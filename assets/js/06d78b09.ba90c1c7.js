"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3047],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>k});var a=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function r(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var s=a.createContext({}),o=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):p(p({},n),e)),t},u=function(e){var n=o(e.components);return a.createElement(s.Provider,{value:n},e.children)},m="mdxType",g={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},c=a.forwardRef((function(e,n){var t=e.components,l=e.mdxType,i=e.originalType,s=e.parentName,u=r(e,["components","mdxType","originalType","parentName"]),m=o(t),c=l,k=m["".concat(s,".").concat(c)]||m[c]||g[c]||i;return t?a.createElement(k,p(p({ref:n},u),{},{components:t})):a.createElement(k,p({ref:n},u))}));function k(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var i=t.length,p=new Array(i);p[0]=c;var r={};for(var s in n)hasOwnProperty.call(n,s)&&(r[s]=n[s]);r.originalType=e,r[m]="string"==typeof e?e:l,p[1]=r;for(var o=2;o<i;o++)p[o]=t[o];return a.createElement.apply(null,p)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},71:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>p,default:()=>m,frontMatter:()=>i,metadata:()=>r,toc:()=>o});var a=t(7462),l=(t(7294),t(3905));const i={},p="1.nginx",r={unversionedId:"Java/\u4e2d\u95f4\u4ef6/nginx",id:"Java/\u4e2d\u95f4\u4ef6/nginx",title:"1.nginx",description:"\u7b2c\u4e00\u7ae0 \u57fa\u7840\u53ca\u5b89\u88c5",source:"@site/docs/Java/7.\u4e2d\u95f4\u4ef6/1.nginx.md",sourceDirName:"Java/7.\u4e2d\u95f4\u4ef6",slug:"/Java/\u4e2d\u95f4\u4ef6/nginx",permalink:"/docs/Java/\u4e2d\u95f4\u4ef6/nginx",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Java/7.\u4e2d\u95f4\u4ef6/1.nginx.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"Java",previous:{title:"9.SPRING-DATA-JPA",permalink:"/docs/Java/\u6846\u67b6/SPRING-DATA-JPA"},next:{title:"2.1 ELK\u5165\u95e8",permalink:"/docs/Java/\u4e2d\u95f4\u4ef6/2.1 ELK\u5165\u95e8"}},s={},o=[{value:"\u7b2c\u4e00\u7ae0 \u57fa\u7840\u53ca\u5b89\u88c5",id:"\u7b2c\u4e00\u7ae0-\u57fa\u7840\u53ca\u5b89\u88c5",level:2},{value:"\u4e00\u3001nginx \u529f\u80fd\u4ecb\u7ecd",id:"\u4e00nginx-\u529f\u80fd\u4ecb\u7ecd",level:3},{value:"\u4e8c\u3001nginx\u53ef\u4ee5\u63d0\u4f9b\u7684\u670d\u52a1",id:"\u4e8cnginx\u53ef\u4ee5\u63d0\u4f9b\u7684\u670d\u52a1",level:3},{value:"\u4e09\u3001nginx \u7684\u4f18\u70b9",id:"\u4e09nginx-\u7684\u4f18\u70b9",level:3},{value:"\u56db\u3001nginx\u5e94\u7528\u573a\u5408",id:"\u56dbnginx\u5e94\u7528\u573a\u5408",level:3},{value:"\u4e94\u3001nginx\u5b9e\u6218",id:"\u4e94nginx\u5b9e\u6218",level:3},{value:"1\u3001\u4e0b\u8f7dnginx\u5b89\u88c5\u5305",id:"1\u4e0b\u8f7dnginx\u5b89\u88c5\u5305",level:4},{value:"2\u3001\u5b89\u88c5\u4f9d\u8d56\u5305",id:"2\u5b89\u88c5\u4f9d\u8d56\u5305",level:4},{value:"3\u3001\u7f16\u8bd1\u5b89\u88c5",id:"3\u7f16\u8bd1\u5b89\u88c5",level:4},{value:"\u516d\u3001nginx\u914d\u7f6e\u6587\u4ef6",id:"\u516dnginx\u914d\u7f6e\u6587\u4ef6",level:3},{value:"\u4e03\u3001\u914d\u7f6e\u6587\u4ef6\u89e3\u8bfb",id:"\u4e03\u914d\u7f6e\u6587\u4ef6\u89e3\u8bfb",level:3},{value:"1\u3001main \u5168\u5c40\u914d\u7f6e",id:"1main-\u5168\u5c40\u914d\u7f6e",level:4},{value:"2\u3001events\u6a21\u5757",id:"2events\u6a21\u5757",level:4},{value:"3\u3001http\u670d\u52a1\u5668",id:"3http\u670d\u52a1\u5668",level:4},{value:"\u7b2c\u4e8c\u7ae0 \u5b9e\u6218-\u90e8\u7f72\u524d\u540e\u5206\u79bb\u9879\u76ee",id:"\u7b2c\u4e8c\u7ae0-\u5b9e\u6218-\u90e8\u7f72\u524d\u540e\u5206\u79bb\u9879\u76ee",level:2},{value:"\u4e00\u3001\u642d\u5efa\u540e\u7aef\u9879\u76ee",id:"\u4e00\u642d\u5efa\u540e\u7aef\u9879\u76ee",level:3},{value:"\u4e8c\u3001\u642d\u5efa\u524d\u7aef\u9879\u76ee",id:"\u4e8c\u642d\u5efa\u524d\u7aef\u9879\u76ee",level:3},{value:"\u4e09\u3001nginx\u505a\u9759\u6001\u670d\u52a1\u5668",id:"\u4e09nginx\u505a\u9759\u6001\u670d\u52a1\u5668",level:3},{value:"\u56db\u3001\u865a\u62df\u4e3b\u673a\u914d\u7f6e\u8be6\u89e3",id:"\u56db\u865a\u62df\u4e3b\u673a\u914d\u7f6e\u8be6\u89e3",level:3},{value:"1\u3001location \u5e38\u89c1\u7684\u914d\u7f6e\u9879\uff1a",id:"1location-\u5e38\u89c1\u7684\u914d\u7f6e\u9879",level:4},{value:"2\u3001\u6587\u4ef6\u8def\u5f84\u7684\u5b9a\u4e49",id:"2\u6587\u4ef6\u8def\u5f84\u7684\u5b9a\u4e49",level:4},{value:"3\u3001\u89e3\u51b3\u524d\u7aef\u7684\u8def\u7531\u95ee\u9898",id:"3\u89e3\u51b3\u524d\u7aef\u7684\u8def\u7531\u95ee\u9898",level:4},{value:"4\u3001\u5bf9\u56fe\u7247\u5f00\u542fgzip\u538b\u7f29",id:"4\u5bf9\u56fe\u7247\u5f00\u542fgzip\u538b\u7f29",level:4},{value:"\u4e94\u3001\u53cd\u5411\u4ee3\u7406\u89e3\u51b3\u8de8\u57df",id:"\u4e94\u53cd\u5411\u4ee3\u7406\u89e3\u51b3\u8de8\u57df",level:3},{value:"1\u3001\u914d\u7f6enginx\u53cd\u5411\u4ee3\u7406",id:"1\u914d\u7f6enginx\u53cd\u5411\u4ee3\u7406",level:4},{value:"\u516d\u3001\u4e3a\u540e\u7aef\u5de5\u7a0b\u505a\u8d1f\u8f7d\u5747\u8861",id:"\u516d\u4e3a\u540e\u7aef\u5de5\u7a0b\u505a\u8d1f\u8f7d\u5747\u8861",level:3},{value:"1\u3001upstream\u6a21\u5757\u89e3\u8bfb",id:"1upstream\u6a21\u5757\u89e3\u8bfb",level:4},{value:"2\u3001\u9879\u76ee\u914d\u7f6e",id:"2\u9879\u76ee\u914d\u7f6e",level:4},{value:"\u4e03\u3001\u5176\u4ed6\u7684\u8de8\u57df\u95ee\u9898",id:"\u4e03\u5176\u4ed6\u7684\u8de8\u57df\u95ee\u9898",level:3},{value:"\u516b\u3001nginx\u76d1\u63a7",id:"\u516bnginx\u76d1\u63a7",level:3},{value:"1\u3001\u5f00\u542f\u72b6\u6001\u9875",id:"1\u5f00\u542f\u72b6\u6001\u9875",level:4},{value:"2\u3001\u8bbf\u95eeURL",id:"2\u8bbf\u95eeurl",level:4},{value:"\u4e94\u3001\u5176\u5b83nginx\u914d\u7f6e",id:"\u4e94\u5176\u5b83nginx\u914d\u7f6e",level:3},{value:"1\u3001\u8bbf\u95ee\u63a7\u5236 allow/deny",id:"1\u8bbf\u95ee\u63a7\u5236-allowdeny",level:4},{value:"2\u3001\u5217\u51fa\u76ee\u5f55 autoindex",id:"2\u5217\u51fa\u76ee\u5f55-autoindex",level:4}],u={toc:o};function m(e){let{components:n,...t}=e;return(0,l.kt)("wrapper",(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"1nginx"},"1.nginx"),(0,l.kt)("h2",{id:"\u7b2c\u4e00\u7ae0-\u57fa\u7840\u53ca\u5b89\u88c5"},"\u7b2c\u4e00\u7ae0 \u57fa\u7840\u53ca\u5b89\u88c5"),(0,l.kt)("h3",{id:"\u4e00nginx-\u529f\u80fd\u4ecb\u7ecd"},"\u4e00\u3001nginx \u529f\u80fd\u4ecb\u7ecd"),(0,l.kt)("p",null,'Nginx ("engine x") \u662f\u4e00\u6b3e\u5f00\u6e90\u7684\uff0c\u652f\u6301\u9ad8\u6027\u80fd\u3001\u9ad8\u5e76\u53d1\u7684 Web \u670d\u52a1\u548c\u4ee3\u7406\u670d\u52a1\u8f6f\u4ef6\u3002\u5b83\u662f\u7531\u4fc4\u7f57\u65af\u4eba Igor Sysoev \u5f00\u53d1\u7684\uff0c\u6700\u521d\u88ab\u5e94\u7528\u5728\u4fc4\u7f57\u65af\u7684\u5927\u578b\u7f51\u7ad9 ',(0,l.kt)("a",{parentName:"p",href:"http://www.rambler.ru/"},"www.rambler.ruopen in new window")," \u4e0a\u3002\u540e\u6765\u4f5c\u8005\u5c06\u6e90\u4ee3\u7801\u4ee5\u7c7b BSD \u8bb8\u53ef\u7684\u5f62\u5f0f\u5f00\u6e90\u51fa\u6765\u4f9b\u5168\u7403\u4f7f\u7528\u3002\u56e0\u4e3a\u5b83\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"\u7a33\u5b9a\u6027"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"\u4e30\u5bcc\u7684\u6a21\u5757\u5e93"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"\u7075\u6d3b\u7684\u914d\u7f6e"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"\u4f4e\u7cfb\u7edf\u8d44\u6e90"),"\u7684\u6d88\u8017\u800c\u95fb\u540d\u3002"),(0,l.kt)("p",null,"\u76ee\u524d\uff0c\u5e02\u573a\u4e0a\u8fd8\u6709\u5f88\u591a\u7684\u540c\u7c7b\u7ade\u54c1\uff0c\u5982\u5927\u540d\u9f0e\u9f0e\u7684apache\uff0cLighttpd\u3002\u76ee\u524d\uff0cNginx\u7684\u5e02\u573a\u4efd\u989d\u548c\u57df\u6570\u91cf\u53cc\u53cc\u7a33\u5c45\u4e16\u754c\u7b2c\u4e00\uff0c\u5e76\u4ee5 4.12 \u4ebf\u7684\u603b\u6570\u9065\u9065\u9886\u5148\u5176\u5b83\u7ade\u4e89\u5bf9\u624b\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u5c0f\u77e5\u8bc6\uff1a")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"BSD\u8bb8\u53ef\u8bc1\u7684\u6761\u6b3e")),(0,l.kt)("p",null,"\u4f7f\u7528BSD\u534f\u8bae\uff0c\u9700\u8981\u9075\u5b88\u4ee5\u4e0b\u89c4\u5219"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5982\u679c\u518d\u53d1\u5e03\u7684\u4ea7\u54c1\u4e2d\u5305\u542b\u6e90\u4ee3\u7801\uff0c\u5219\u5728\u6e90\u4ee3\u7801\u4e2d\u5fc5\u987b\u5e26\u6709\u539f\u6765\u4ee3\u7801\u4e2d\u7684BSD\u534f\u8bae\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u5982\u679c\u518d\u53d1\u5e03\u7684\u53ea\u662f\u4e8c\u8fdb\u5236\u7c7b\u5e93/\u8f6f\u4ef6\uff0c\u5219\u9700\u8981\u5728\u7c7b\u5e93/\u8f6f\u4ef6\u7684\u6587\u6863\u548c\u7248\u6743\u58f0\u660e\u4e2d\u5305\u542b\u539f\u6765\u4ee3\u7801\u4e2d\u7684BSD\u534f\u8bae\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u4e0d\u53ef\u4ee5\u7528\u5f00\u6e90\u4ee3\u7801\u7684\u201c\u4f5c\u8005/\u673a\u6784\u7684\u540d\u5b57\u201d\u6216\u201c\u539f\u6765\u4ea7\u54c1\u7684\u540d\u5b57\u201d\u505a\u5e02\u573a\u63a8\u5e7f\u3002")),(0,l.kt)("p",null,"\u73b0\u4eca\u5b58\u5728\u7684\u5f00\u6e90\u534f\u8bae\u5f88\u591a\uff0c\u800c\u7ecf\u8fc7Open Source Initiative\uff08\u5f00\u653e\u6e90\u4ee3\u7801\u5021\u8bae\uff09\u901a\u8fc7\u6279\u51c6\u7684\u5f00\u6e90\u534f\u8bae\u76ee\u524d\u670960\u591a\u79cd\uff08",(0,l.kt)("a",{parentName:"p",href:"http://www.opensource.org/licenses/alphabetical"},"http://www.opensource.org/licenses/alphabeticalopen in new window")," \uff09\u3002\u6211\u4eec\u5728\u5e38\u89c1\u7684\u5f00\u6e90\u534f\u8bae\u5982BSD, GPL, LGPL,MIT\u7b49\u90fd\u662fOSI\u6279\u51c6\u7684\u534f\u8bae\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u5728\u8fd9\u7f51\u7f51\u7ad9\uff0c"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/1657530052574-7ce836ab.png",alt:"1657530052574"}),"1657530052574"),(0,l.kt)("p",null,"\u6211\u4eec\u6458\u53d6\u51e0\u4e2a\u548c\u5927\u5bb6\u5206\u4eab\u4e00\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Apache License 2.0\uff1a\u5b83\u662f\u5bf9\u5546\u4e1a\u5e94\u7528\u53cb\u597d\u7684\u8bb8\u53ef\u3002\u4f7f\u7528\u8005\u4e5f\u53ef\u4ee5\u5728\u9700\u8981\u7684\u65f6\u5019\u4fee\u6539\u4ee3\u7801\u6765\u6ee1\u8db3\u9700\u8981\u5e76\u4f5c\u4e3a\u5f00\u6e90\u6216\u5546\u4e1a\u4ea7\u54c1\u53d1\u5e03/\u9500\u552e\u3002"),(0,l.kt)("li",{parentName:"ul"},"BSD\u5f00\u6e90\u534f\u8bae\uff08Berkerley Software Distribution\uff09\uff1a\u5546\u4e1a\u8f6f\u4ef6\u53ef\u4ee5\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u4fee\u6539\u4f7f\u7528BSD\u534f\u8bae\u7684\u4ee3\u7801\u3002"),(0,l.kt)("li",{parentName:"ul"},"MIT ( MIT license )\uff1a\u5546\u4e1a\u8f6f\u4ef6\u53ef\u4ee5\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u4fee\u6539MIT\u534f\u8bae\u7684\u4ee3\u7801\uff0c\u751a\u81f3\u53ef\u4ee5\u51fa\u552eMIT\u534f\u8bae\u7684\u4ee3\u7801\u3002"),(0,l.kt)("li",{parentName:"ul"},"MPL ( Mozilla Public License 1.1 )\uff1a\u5546\u4e1a\u8f6f\u4ef6\u53ef\u4ee5\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u4fee\u6539MPL\u534f\u8bae\u7684\u4ee3\u7801\uff0c\u4f46\u4fee\u6539\u540e\u7684\u4ee3\u7801\u7248\u6743\u5f52\u8f6f\u4ef6\u7684\u53d1\u8d77\u8005\u3002"),(0,l.kt)("li",{parentName:"ul"},"CDDL (Common Development and Distribution License )\uff1a\u5546\u4e1a\u8f6f\u4ef6\u53ef\u4ee5\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u4fee\u6539CDDL\u534f\u8bae\u7684\u4ee3\u7801\u3002"),(0,l.kt)("li",{parentName:"ul"},"EPL (Eclipse Public License 1.0 )\uff1a\u5546\u4e1a\u8f6f\u4ef6\u53ef\u4ee5\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u4fee\u6539EPL\u534f\u8bae\u7684\u4ee3\u7801\uff0c\u4f46\u8981\u627f\u62c5\u4ee3\u7801\u4ea7\u751f\u7684\u4fb5\u6743\u8d23\u4efb\u3002"),(0,l.kt)("li",{parentName:"ul"},"GPL ( GNU General Public License )\uff1a\u5546\u4e1a\u8f6f\u4ef6\u4e0d\u80fd\u4f7f\u7528GPL\u534f\u8bae\u7684\u4ee3\u7801\u3002"),(0,l.kt)("li",{parentName:"ul"},"LGPL ( GNU Library or \u201cLesser\u201d General Public License )\uff1a\u5546\u4e1a\u8f6f\u4ef6\u53ef\u4ee5\u4f7f\u7528\uff0c\u4f46\u4e0d\u80fd\u4fee\u6539LGPL\u534f\u8bae\u7684\u4ee3\u7801\u3002")),(0,l.kt)("h3",{id:"\u4e8cnginx\u53ef\u4ee5\u63d0\u4f9b\u7684\u670d\u52a1"},"\u4e8c\u3001nginx\u53ef\u4ee5\u63d0\u4f9b\u7684\u670d\u52a1"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"web \u670d\u52a1"),(0,l.kt)("li",{parentName:"ol"},"\u8d1f\u8f7d\u5747\u8861 \uff08\u53cd\u5411\u4ee3\u7406\uff09"),(0,l.kt)("li",{parentName:"ol"},"web cache\uff08web \u7f13\u5b58\uff09")),(0,l.kt)("h3",{id:"\u4e09nginx-\u7684\u4f18\u70b9"},"\u4e09\u3001nginx \u7684\u4f18\u70b9"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u6bd4\u5176\u4ed6\u670d\u52a1\u5668\u54cd\u5e94\u66f4\u5feb\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u9ad8\u6269\u5c55\uff0cnginx\u7684\u8bbe\u8ba1\u6781\u5177\u6269\u5c55\u6027\uff0c\u4ed6\u662f\u7531\u591a\u4e2a\u529f\u80fd\u4e0d\u540c\u4e14\u8026\u5408\u6027\u6781\u4f4e\u7684\u6a21\u5757\u7ec4\u6210\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u5355\u673a\u652f\u6301\u5e76\u53d1\u6781\u9ad8\uff0c\u7406\u8bba\u4e0a\u652f\u630110\u4e07\u7684\u5e76\u53d1\u8fde\u63a5\uff0cnginx\u652f\u6301\u7684\u5e76\u53d1\u8fde\u63a5\u548c\u5185\u5b58\u76f8\u5173\uff0c\u8d85\u8fc710\u4e07\u4e5f\u662f\u53ef\u4ee5\u7684\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u4f4e\u5185\u5b58\u6d88\u8017\uff0c10000\u4e2a\u975e\u6d3b\u8dc3\u7684http keep-alive\u94fe\u63a5\u5728nginx\u4e2d\u4ec5\u4ec5\u6d88\u80172.5M\u7684\u5185\u5b58\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u652f\u6301\u70ed\u90e8\u7f72\uff0c\u5982\u4e0d\u7528\u505c\u6b62\u670d\u52a1\u5c31\u80fd\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u6781\u5177\u81ea\u7531\u7684BSD\u8bb8\u53ef\u534f\u8bae\u3002\u6211\u4eec\u4e0d\u4ec5\u53ef\u4ee5\u76f4\u63a5\u9605\u8bfbnginx\u7684\u6e90\u4ee3\u7801\u3001\u8fd8\u80fd\u7528\u6765\u4fee\u6539\u5347\u7ea7\u3002")),(0,l.kt)("h3",{id:"\u56dbnginx\u5e94\u7528\u573a\u5408"},"\u56db\u3001nginx\u5e94\u7528\u573a\u5408"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u9759\u6001\u670d\u52a1\u5668\u3002\u7528\u6765\u5b58\u653e\u6211\u4eec\u7684\u9759\u6001\u8d44\u6e90\uff0c\u5982\u56fe\u7247\u3001\u9759\u6001\u9875\u9762\u3001js\u3001css\u7b49\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u53cd\u5411\u4ee3\u7406\uff0c\u8d1f\u8f7d\u5747\u8861\u3002\u65e5pv2000W\u4ee5\u4e0b\uff0c\u90fd\u53ef\u4ee5\u76f4\u63a5\u7528nginx\u505a\u4ee3\u7406\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u7f13\u5b58\u670d\u52a1\u3002")),(0,l.kt)("h3",{id:"\u4e94nginx\u5b9e\u6218"},"\u4e94\u3001nginx\u5b9e\u6218"),(0,l.kt)("p",null,"\u6211\u4eec\u7684nginx\u6d4b\u8bd5\u90fd\u662f\u5728linux\u73af\u5883\u4e2d\u8fdb\u884c\u7684\uff0c\u6240\u6709\u9996\u5148\u4f60\u9700\u8981\u4e00\u4e2alinux\u7cfb\u7edf\uff0c\u53ef\u4ee5\u662f\u4e91\u670d\u52a1\u5668\uff0c\u4e5f\u53ef\u4ee5\u662f\u81ea\u5df1\u7684vmware\u3002"),(0,l.kt)("h4",{id:"1\u4e0b\u8f7dnginx\u5b89\u88c5\u5305"},"1\u3001\u4e0b\u8f7dnginx\u5b89\u88c5\u5305"),(0,l.kt)("p",null,"\u8fdb\u5165nginx\u5b98\u7f51\uff08",(0,l.kt)("a",{parentName:"p",href:"http://nginx.org/en/%EF%BC%89%EF%BC%9A"},"http://nginx.org/en/\uff09\uff1aopen in new window")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/1657531156233-a7274079.png",alt:"1657531156233"}),"1657531156233"),(0,l.kt)("p",null,"Nginx\u5b98\u7f51\u63d0\u4f9b\u4e86\u4e09\u4e2a\u7c7b\u578b\u7684\u7248\u672c"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Mainline version\uff1aMainline \u662f Nginx \u76ee\u524d\u4e3b\u529b\u5728\u505a\u7684\u7248\u672c\uff0c\u53ef\u4ee5\u8bf4\u662f\u5f00\u53d1\u7248"),(0,l.kt)("li",{parentName:"ul"},"Stable version\uff1a\u6700\u65b0\u7a33\u5b9a\u7248\uff0c\u751f\u4ea7\u73af\u5883\u4e0a\u5efa\u8bae\u4f7f\u7528\u7684\u7248\u672c"),(0,l.kt)("li",{parentName:"ul"},"Legacy versions\uff1a\u9057\u7559\u7684\u8001\u7248\u672c\u7684\u7a33\u5b9a\u7248")),(0,l.kt)("p",null,"\u6211\u4eec\u4e0b\u8f7d\u8fd9\u4e2a\u6700\u65b0\u7684\u7a33\u5b9a\u7248\u672c\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/1657531361055-acd562a3.png",alt:"1657531361055"}),"1657531361055"),(0,l.kt)("h4",{id:"2\u5b89\u88c5\u4f9d\u8d56\u5305"},"2\u3001\u5b89\u88c5\u4f9d\u8d56\u5305"),(0,l.kt)("p",null,"nginx\u5b89\u88c5\u4f9d\u8d56GCC\u3001openssl-devel\u3001pcre-devel\u548czlib-devel\u8f6f\u4ef6\u5e93\uff0c\u4ed6\u4eec\u7684\u4f5c\u7528\u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"zlib\u5e93\u7528\u4e8e\u5bf9HTTP\u5305\u7684\u5185\u5bb9\u505agzip\u683c\u5f0f\u7684\u538b\u7f29\uff0c\u5e76\u6307\u5b9a\u5bf9\u4e8e\u67d0\u4e9b\u7c7b\u578b\uff08content-type\uff09\u7684HTTP\u54cd\u5e94\u4f7f\u7528gzip\u6765\u8fdb\u884c\u538b\u7f29\u4ee5\u51cf\u5c11\u7f51\u7edc\u4f20\u8f93\u91cf\uff0c\u5219\u5728\u7f16\u8bd1\u65f6\u5c31\u5fc5\u987b\u628azlib\u7f16\u8bd1\u8fdbNginx\u3002"),(0,l.kt)("li",{parentName:"ul"},"Pcre\u5168\u79f0\uff08Perl Compatible Regular Expressions\uff09\uff0cPerl\u5e93\uff0c\u5305\u62ec ",(0,l.kt)("a",{parentName:"li",href:"https://baike.baidu.com/item/perl/851577"},"perlopen in new window")," \u517c\u5bb9\u7684",(0,l.kt)("a",{parentName:"li",href:"https://baike.baidu.com/item/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"},"\u6b63\u5219\u8868\u8fbe\u5f0fopen in new window"),"\u5e93\uff0c\u5982\u679c\u6211\u4eec\u5728nginx\u4e2d\u4f7f\u7528\u4e86\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u90a3\u4e48\u5728\u7f16\u8bd1Nginx\u65f6\u5c31\u5fc5\u987b\u628aPCRE\u5e93\u7f16\u8bd1\u8fdbNginx\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u670d\u52a1\u5668\u4e0d\u53ea\u662f\u8981\u652f\u6301HTTP\uff0c\u8fd8\u9700\u8981\u5728\u66f4\u5b89\u5168\u7684SSL\u534f\u8bae\u4e0a\u4f20\u8f93HTTP\uff0c\u90a3\u4e48\u9700\u8981\u62e5\u6709OpenSSL\u3002\u53e6\u5916\uff0c\u5982\u679c\u6211\u4eec\u60f3\u4f7f\u7528MD5\u3001SHA1\u7b49\u6563\u5217\u51fd\u6570\uff0c\u90a3\u4e48\u4e5f\u9700\u8981\u5b89\u88c5\u5b83\u3002\u53ef\u4ee5\u8fd9\u6837\u5b89\u88c5\uff1a")),(0,l.kt)("p",null,"\u6211\u4eec\u4f7f\u7528\u4e00\u4e0b\u7684\u547d\u4ee4\u8fdb\u884c\u5b89\u88c5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"yum install gcc zlib-devel  pcre pcre-devel openssl openssl-devel -y \n")),(0,l.kt)("p",null,"\u5c0f\u77e5\u8bc6\uff1a"),(0,l.kt)("p",null,"devel \u5305\u4e3b\u8981\u662f\u4f9b\u5f00\u53d1\u7528\uff0c\u81f3\u5c11\u5305\u62ec\u4ee5\u4e0b2\u4e2a\u4e1c\u897f\u5934\u6587\u4ef6\u548c\u94fe\u63a5\uff0c\u6709\u7684\u8fd8\u542b\u6709\u5f00\u53d1\u6587\u6863\u6216\u6f14\u793a\u4ee3\u7801\u3002"),(0,l.kt)("p",null,"\u4ee5 glib \u548c glib-devel \u4e3a\u4f8b:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u4f60\u5b89\u88c5\u57fa\u4e8e glib \u5f00\u53d1\u7684\u7a0b\u5e8f\uff0c\u53ea\u9700\u8981\u5b89\u88c5 glib \u5305\u5c31\u884c\u4e86\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u4f46\u662f\u5982\u679c\u4f60\u8981\u7f16\u8bd1\u4f7f\u7528\u4e86 glib \u7684\u6e90\u4ee3\u7801\uff0c\u5219\u9700\u8981\u5b89\u88c5 glib-devel\u3002")),(0,l.kt)("h4",{id:"3\u7f16\u8bd1\u5b89\u88c5"},"3\u3001\u7f16\u8bd1\u5b89\u88c5"),(0,l.kt)("p",null,"\u4e0b\u8f7dnginx"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"wget http://nginx.org/download/nginx-1.22.0.tar.gz\n")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/1657535839648-dbb22e94.png",alt:"1657535839648"}),"1657535839648"),(0,l.kt)("p",null,"\u89e3\u538b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tar -zvxf nginx-1.22.0.tar.gz\n")),(0,l.kt)("p",null,"nginx\u6700\u7b80\u5355\u7684\u7f16\u8bd1\u5b89\u88c5\u65b9\u5f0f\uff0c\u5c31\u662f\u8fdb\u5165\u76ee\u5f55\u540e\uff0c\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"./configure\nmake\nmake install\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"./configure"),"\u547d\u4ee4\u505a\u4e86\u5f88\u591a\u5e55\u540e\u5de5\u4f5c\uff0c\u5305\u62ec\u68c0\u6d4b\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u548c\u5df2\u7ecf\u5b89\u88c5\u7684\u8f6f\u4ef6\uff0c\u53c2\u6570\u7684\u89e3\u6790\uff0c\u4e2d\u95f4\u76ee\u5f55\u7684\u751f\u6210\uff0c\u4ee5\u53ca\u6839\u636e\u53c2\u6570\u751f\u6210c\u6e90\u7801\u6587\u4ef6\u548cmakefile\u6587\u4ef6\u7b49\u3002"),(0,l.kt)("li",{parentName:"ul"},"make\u547d\u4ee4\u6839\u636e\uff0cconfigure\u547d\u4ee4\u751f\u6210\u7684makefile\u6587\u4ef6\u7f16\u8bd1nginx\u5de5\u7a0b\uff0c\u5e76\u751f\u6210\u76ee\u6807\u6587\u4ef6\u3001\u6700\u7ec8\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002"),(0,l.kt)("li",{parentName:"ul"},"make install\u547d\u4ee4\u8d1f\u8d23\u5c06nginx\u5b89\u88c5\u5230\u6307\u5b9a\u7684\u5b89\u88c5\u76ee\u5f55\uff0c\u5305\u62ec\u76f8\u5173\u76ee\u5f55\u7684\u5efa\u7acb\u548c\u4e8c\u8fdb\u5236\u6587\u4ef6\u3001\u4f4d\u7f6e\u6587\u4ef6\u7684\u590d\u5236\u3002")),(0,l.kt)("p",null,"\u4ee5\u4e0a\u547d\u4ee4\u4f1a\u5c06nginx\u6309\u7167\u9ed8\u8ba4\u914d\u7f6e\uff08\u9ed8\u8ba4\u6a21\u5757\u3001\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\uff09\u8fdb\u884c\u5b89\u88c5\uff0c\u5982\u679c\u9700\u8981\u81ea\u5b9a\u4e49\u4e00\u4e9b\u914d\u7f6e\uff0c\u5219\u9700\u8981\u4f7f\u7528\u5982\u4e0b\u7684\u65b9\u5f0f\u3002"),(0,l.kt)("p",null,"\u5177\u4f53\u7684\u547d\u4ee4\u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"./configure --help"),"\u67e5\u770b\u5404\u4e2a\u6a21\u5757\u7684\u4f7f\u7528\u60c5\u51b5\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"--without-http_ssi_module"),"\u7684\u65b9\u5f0f\u5173\u95ed\u4e0d\u9700\u8981\u7684\u6a21\u5757\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"--with-http_perl_modules"),"\u65b9\u5f0f\u5b89\u88c5\u9700\u8981\u7684\u6a21\u5757\u3002")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u7f16\u8bd1\u547d\u4ee4")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"tar -zxf nginx-1.22.0.tar.gz \ncd nginx-1.22.0\n\nmkdir /data/nginx -p\n\n./configure --prefix=/data/nginx --user=nginx --group=nginx  --with-http_ssl_module  --with-http_stub_status_module\n\n# -M \uff1a \u4e0d\u521b\u5efa\u4e3b\u76ee\u5f55  -s \uff1a \u4e0d\u5141\u8bb8\u767b\u5f55 /sbin/nologin\u662f\u4e00\u4e2a\u6709\u4e00\u4e2a\u7279\u6b8a\u7684shell\uff0c\u4e0d\u9700\u8981\u767b\u9646\nuseradd nginx -M -s /sbin/nologin \nmake && make install \n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"--with-http_ssl_module  \u5b89\u88c5\u8be5\u6a21\u5757\uff0c\u8be5\u6a21\u5757\u662fnginx\u652f\u6301ssl\u534f\u8bae\uff0c\u63d0\u4f9bhttps\u670d\u52a1\u3002\n--with-http_stub_status_module  #\u662f\u4e00\u4e2a\u76d1\u89c6\u6a21\u5757\uff0c\u53ef\u4ee5\u67e5\u770b\u76ee\u524d\u7684\u8fde\u63a5\u6570\u7b49\u4e00\u4e9b\u4fe1\u606f\uff0c\u56e0\u4e3a\u662f\u975e\u6838\u5fc3\u6a21\u5757\uff0c\u6240\u4ee5\u6211\u4eec\u4f7f\u7528nginx -V\u9ed8\u8ba4\u662f\u6ca1\u6709\u5b89\u88c5\u7684\n")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/1657540449988-903f8df3.png",alt:"1657540449988"}),"1657540449988"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u6d4b\u8bd5nginx\u914d\u7f6e\u6587\u4ef6\u662f\u5426\u6b63\u5e38")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"/data/nginx/sbin/nginx -t \nnginx: the configuration file /data/nginx-1.10.1/conf/nginx.conf syntax is ok\nnginx: configuration file /data/nginx-1.10.1/conf/nginx.conf test is successful\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u542f\u52a8nginx\u670d\u52a1\u5668")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"/data/nginx/sbin/nginx  -t      ## \u68c0\u67e5\u914d\u7f6e\u6587\u4ef6\n/data/nginx/sbin/nginx          ## \u786e\u5b9anginx\u670d\u52a1\nnetstat -lntup |grep nginx      ## \u68c0\u67e5\u8fdb\u7a0b\u662f\u5426\u6b63\u5e38\ncurl http://localhost           ## \u786e\u8ba4\u7ed3\u679c\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"nginx\u5176\u4ed6\u547d\u4ee4")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"nginx -s signal\nsignal\uff1a\nstop \u2014 \u7acb\u9a6c\u5173\u95ed\nquit \u2014 \u4f18\u96c5\u5173\u95ed\uff0c\u5904\u7406\u5b8c\u6ca1\u5904\u7406\u597d\u7684\u8bf7\u6c42\u540e\u5173\u95ed\nreload \u2014 \u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\nreopen \u2014 reopening the log files\n\u7528\u6765\u6253\u5f00\u65e5\u5fd7\u6587\u4ef6\uff0c\u8fd9\u6837nginx\u4f1a\u628a\u65b0\u65e5\u5fd7\u4fe1\u606f\u5199\u5165\u8fd9\u4e2a\u65b0\u7684\u6587\u4ef6\u4e2d\n")),(0,l.kt)("p",null,"\u5b89\u88c5net-tools\u6765\u67e5\u770b\u7aef\u53e3\u4f7f\u7528\u60c5\u51b5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"yum -y install net-tools\n")),(0,l.kt)("p",null,"net-tools\u5de5\u5177\u7bb1\u5305\u62ec",(0,l.kt)("a",{parentName:"p",href:"https://so.csdn.net/so/search?q=arp&spm=1001.2101.3001.7020"},"arpopen in new window"),", hostname, ifconfig, netstat, rarp, route, plipconfig, slattach, mii-tool and iptunnel and ipmaddr\u7b49\u547d\u4ee4\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"netstat -nplt\n")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/1657540929779-ca292d0c.png",alt:"1657540929779"}),"1657540929779"),(0,l.kt)("p",null,"\u5728\u6d4f\u89c8\u5668\u8f93\u5165\u670d\u52a1\u5668\u5730\u5740\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220706172230504-4c7d5b14.png",alt:"image-20220706172230504"}),"image-20220706172230504"),(0,l.kt)("h3",{id:"\u516dnginx\u914d\u7f6e\u6587\u4ef6"},"\u516d\u3001nginx\u914d\u7f6e\u6587\u4ef6"),(0,l.kt)("p",null,"nginx\u5b89\u88c5\u76ee\u5f55\uff0c\u5982\u4e0b\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/1657541074372-2b553dab.png",alt:"1657541074372"}),"1657541074372"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u914d\u7f6e\u57fa\u7840\u914d\u7f6e\u6587\u4ef6")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"worker_processes  1;\nevents {\n    worker_connections  1024;\n}\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n    sendfile        on;\n    keepalive_timeout  65;\n    server {\n        listen       80;\n        server_name  localhost;\n        location / {\n            root   html;\n            index  index.html index.htm;\n        }\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html {\n            root   html;\n        }\n    }\n}\n### \u6d4b\u8bd5\u914d\u7f6e\u6587\u4ef6\u662f\u5426\u6b63\u5e38\nshell> /data/nginx/sbin/nginx -t \nnginx: the configuration file /data/nginx-1.10.3/conf/nginx.conf syntax is ok\nnginx: configuration file /data/nginx-1.10.3/conf/nginx.conf test is successful\nshell> curl -I http://localhost      # -I\u4ee3\u8868\u53ea\u663e\u793a\u5934\u4fe1\u606f\nHTTP/1.1 200 OK\n")),(0,l.kt)("p",null,"\u6211\u4eec\u4e0d\u59a8\u5148\u601d\u8003\u4e00\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u770b\u5230\u7684\u7f51\u9875\u662f\u5728\u54ea\u91cc\u5462\uff0c\u6211\u4eec\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"root html"),"\u914d\u7f6e\u7ed3\u5408\u5b89\u88c5\u76ee\u5f55\u4e2d\u6709html\u76ee\u5f55\uff0c\u5927\u6982\u80fd\u731c\u51fa\u6765\uff0c\u9996\u9875\u7684\u6587\u4ef6\u5c31\u5728html\u6587\u4ef6\u5939\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/1657542245510-9ccd3363.png",alt:"1657542245510"}),"1657542245510"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"curl 127.0.0.1\n")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/1657542307377-b2f65d2b.png",alt:"1657542307377"}),"1657542307377"),(0,l.kt)("h3",{id:"\u4e03\u914d\u7f6e\u6587\u4ef6\u89e3\u8bfb"},"\u4e03\u3001\u914d\u7f6e\u6587\u4ef6\u89e3\u8bfb"),(0,l.kt)("p",null,"nginx\u914d\u7f6e\u6587\u4ef6\u4e3b\u8981\u5206\u4e3a\u56db\u4e2a\u90e8\u5206\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"main{ #\uff08\u5168\u5c40\u8bbe\u7f6e\uff09\n    http{ #\u670d\u52a1\u5668\u914d\u7f6e\n        upstream{} #\uff08\u8d1f\u8f7d\u5747\u8861\u670d\u52a1\u5668\u8bbe\u7f6e\uff09\n        server{ #\uff08\u4e3b\u673a\u8bbe\u7f6e\uff1a\u4e3b\u8981\u7528\u4e8e\u6307\u5b9a\u4e3b\u673a\u548c\u7aef\u53e3\uff09\n            location{} #\uff08URL\u5339\u914d\u7684\u8bbe\u7f6e\uff09\n        }\n    }\n}\n")),(0,l.kt)("p",null,"server\u7ee7\u627f\u81eamain\uff0clocation\u7ee7\u627f\u81easerver\uff0cupstream\u5373\u4e0d\u4f1a\u7ee7\u627f\u5176\u4ed6\u8bbe\u7f6e\u4e5f\u4e0d\u4f1a\u88ab\u7ee7\u627f\u3002 ",(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220606171640915-d0d40614.png",alt:"image-20220606171640915"})),(0,l.kt)("h4",{id:"1main-\u5168\u5c40\u914d\u7f6e"},"1\u3001main \u5168\u5c40\u914d\u7f6e"),(0,l.kt)("p",null,"nginx\u5728\u8fd0\u884c\u65f6\u4e0e\u5177\u4f53\u4e1a\u52a1\u529f\u80fd\u65e0\u5173\u7684\u4e00\u4e9b\u53c2\u6570\uff0c\u6bd4\u5982\u5de5\u4f5c\u8fdb\u7a0b\u6570\uff0c\u8fd0\u884c\u7684\u8eab\u4efd\u7b49\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"user ydlclass;\nworker_processes 4;\nworker_cpu_affinity 0001 0010 0100 1000;\nerror_log  /data/nginx/logs/error.log  crit;\npid        /data/nginx/logs/nginx.pid;\nworker_rlimit_nofile 65535;\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"user nginx;"),": \u6307\u5b9anginx\u8fdb\u7a0b\u4f7f\u7528\u4ec0\u4e48\u7528\u6237\u542f\u52a8"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"worker_processes 4;")," : \u6307\u5b9a\u542f\u52a8\u591a\u5c11\u8fdb\u7a0b\u6765\u5904\u7406\u8bf7\u6c42\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u8bbe\u7f6e\u6210CPU\u7684\u6838\u6570\uff0c\u5982\u679c\u5f00\u542f\u4e86ssl\u548cgzip\u5e94\u8be5\u8bbe\u7f6e\u6210\u4e0e\u903b\u8f91CPU\u6570\u91cf\u4e00\u6837\u751a\u81f3\u4e3a2\u500d\uff0c\u53ef\u4ee5\u51cf\u5c11I/O\u64cd\u4f5c\u3002\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"grep ^processor /proc/cpuinfo | wc -l"),"\u67e5\u770bCPU\u6838\u6570\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"worker_cpu_affinity 0001 0010 0100 1000;"),": \u5728\u9ad8\u5e76\u53d1\u60c5\u51b5\u4e0b\uff0c\u901a\u8fc7\u8bbe\u7f6e\u5c06CPU\u548c\u5177\u4f53\u7684\u8fdb\u7a0b\u7ed1\u5b9a\u6765\u964d\u4f4e\u7531\u4e8e\u591a\u6838CPU\u5207\u6362\u9020\u6210\u7684\u5bc4\u5b58\u5668\u7b49\u73b0\u573a\u91cd\u5efa\u5e26\u6765\u7684\u6027\u80fd\u635f\u8017\u3002\u5982worker_cpu_affinity 0001 0010 0100 1000; \uff08\u56db\u6838\uff09\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"error_log logs/error.log;"),": error_log\u662f\u4e2a\u4e3b\u6a21\u5757\u6307\u4ee4\uff0c\u7528\u6765\u5b9a\u4e49\u5168\u5c40\u9519\u8bef\u65e5\u5fd7\u6587\u4ef6\u3002\u65e5\u5fd7\u8f93\u51fa\u7ea7\u522b\u6709debug\u3001info\u3001notice\u3001warn\u3001error\u3001crit\u53ef\u4f9b\u9009\u62e9\uff0c\u5176\u4e2d\uff0cdebug\u8f93\u51fa\u65e5\u5fd7\u6700\u4e3a\u6700\u8be6\u7ec6\uff0c\u800ccrit\u8f93\u51fa\u65e5\u5fd7\u6700\u5c11\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"pid logs/nginx.pid;"),": \u6307\u5b9a\u8fdb\u7a0bpid\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002")),(0,l.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"ps -ef | grep nginx"),"\u67e5\u770bmaster\u548cworker\u7684\u8fdb\u7a0b\uff0c\u8fd9\u91cc\u6709\u4e00\u4e2amaster\u548c\u56db\u4e2aworker\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220713182916582-7d761cef.png",alt:"image-20220713182916582"}),"image-20220713182916582"),(0,l.kt)("h4",{id:"2events\u6a21\u5757"},"2\u3001events\u6a21\u5757"),(0,l.kt)("p",null,"events \u6a21\u5757\u4e3b\u8981\u662fnginx \u548c\u7528\u6237\u4ea4\u4e92\u7f51\u7edc\u8fde\u63a5\u4f18\u5316\u7684\u914d\u7f6e\u5185\u5bb9\uff0c\u6211\u4eec\u4e3b\u8981\u770b\u4e00\u4e0b\u4e24\u4e2a\u914d\u7f6e\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"events{\n  use epoll;\n  worker_connections  65536;\n}\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"use epoll;"),"\u662f\u4f7f\u7528\u4e8b\u4ef6\u6a21\u5757\u6307\u4ee4\uff0c\u7528\u6765\u6307\u5b9aNginx\u7684\u5de5\u4f5c\u6a21\u5f0f\u3002Nginx\u652f\u6301\u7684\u5de5\u4f5c\u6a21\u5f0f\u6709select\u3001poll\u3001kqueue\u3001epoll\u3001rtsig\u548c/dev/poll\u3002\u5176\u4e2dselect\u548cpoll\u90fd\u662f\u6807\u51c6\u7684\u5de5\u4f5c\u6a21\u5f0f\uff0ckqueue\u548cepoll\u662f\u9ad8\u6548\u7684\u5de5\u4f5c\u6a21\u5f0f\uff0c\u4e0d\u540c\u7684\u662fepoll\u7528\u5728Linux\u5e73\u53f0\u4e0a\uff0c\u800ckqueue\u7528\u5728BSD\u7cfb\u7edf\u4e2d\u3002\u5bf9\u4e8eLinux\u7cfb\u7edf\uff0cepoll\u5de5\u4f5c\u6a21\u5f0f\u662f\u9996\u9009\u3002\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u652f\u6301\u8fd9\u4e9b\u9ad8\u6548\u6a21\u578b\u65f6\u624d\u4f7f\u7528select\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"worker_connections 65536;"),"\u6bcf\u4e00\u4e2aworker\u8fdb\u7a0b\u80fd\u5e76\u53d1\u5904\u7406\uff08\u53d1\u8d77\uff09\u7684\u6700\u5927\u8fde\u63a5\u6570\u3002")),(0,l.kt)("h4",{id:"3http\u670d\u52a1\u5668"},"3\u3001http\u670d\u52a1\u5668"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"http{\n  include       mime.types;\n  default_type  application/octet-stream;\n  #charset  gb2312;\n  sendfile        on;\n  keepalive_timeout  60s;\n}\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"include\u662f\u4e2a\u4e3b\u6a21\u5757\u6307\u4ee4\uff0c\u5b9e\u73b0\u5bf9\u914d\u7f6e\u6587\u4ef6\u6240\u5305\u542b\u7684\u6587\u4ef6\u7684\u8bbe\u5b9a\uff0c\u53ef\u4ee5\u51cf\u5c11\u4e3b\u914d\u7f6e\u6587\u4ef6\u7684\u590d\u6742\u5ea6\u3002\u8be5\u6587\u4ef6\u4e5f\u5728conf\u76ee\u5f55\u4e2d\u3002"),(0,l.kt)("li",{parentName:"ul"},"default_type\u5c5e\u4e8eHTTP\u6838\u5fc3\u6a21\u5757\u6307\u4ee4\uff0c\u8fd9\u91cc\u8bbe\u5b9a\u9ed8\u8ba4\u7c7b\u578b\u4e3a\u4e8c\u8fdb\u5236\u6d41\uff0c\u4e5f\u5c31\u662f\u5f53\u6587\u4ef6\u7c7b\u578b\u672a\u5b9a\u4e49\u65f6\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u3002"),(0,l.kt)("li",{parentName:"ul"},"charset gb2312; \u6307\u5b9a\u5ba2\u6237\u7aef\u7f16\u7801\u683c\u5f0f\u3002"),(0,l.kt)("li",{parentName:"ul"},"sendfile\u5b9e\u9645\u4e0a\u662f Linux2.0+\u4ee5\u540e\u7684\u63a8\u51fa\u7684\u4e00\u4e2a\u7cfb\u7edf\u8c03\u7528\uff0cweb\u670d\u52a1\u5668\u53ef\u4ee5\u901a\u8fc7\u8c03\u6574\u81ea\u8eab\u7684\u914d\u7f6e\u6765\u51b3\u5b9a\u662f\u5426\u5229\u7528 sendfile\u8fd9\u4e2a\u7cfb\u7edf\u8c03\u7528\u3002sendfile\u662f\u4e2a\u6bd4 read \u548c write \u66f4\u9ad8\u6027\u80fd\u7684\u7cfb\u7edf\u63a5\u53e3\u3002 \u5f53 Nginx \u662f\u4e00\u4e2a\u9759\u6001\u6587\u4ef6\u670d\u52a1\u5668\u7684\u65f6\u5019\uff0c\u5f00\u542f SENDFILE \u914d\u7f6e\u9879\u80fd\u5927\u5927\u63d0\u9ad8 Nginx \u7684\u6027\u80fd\u3002 \u4f46\u662f\u5f53 Nginx \u662f\u4f5c\u4e3a\u4e00\u4e2a\u53cd\u5411\u4ee3\u7406\u6765\u4f7f\u7528\u7684\u65f6\u5019\uff0cSENDFILE \u5219\u6ca1\u4ec0\u4e48\u7528\u3002"),(0,l.kt)("li",{parentName:"ul"},"Nginx \u4f7f\u7528 keepalive_timeout \u6765\u6307\u5b9a KeepAlive \u7684\u8d85\u65f6\u65f6\u95f4\uff08timeout\uff09\u3002\u6307\u5b9a\u6bcf\u4e2a TCP \u8fde\u63a5\u6700\u591a\u53ef\u4ee5\u4fdd\u6301\u591a\u957f\u65f6\u95f4\u3002Nginx \u7684\u9ed8\u8ba4\u503c\u662f 75 \u79d2\uff0c\u6709\u4e9b\u6d4f\u89c8\u5668\u6700\u591a\u53ea\u4fdd\u6301 60 \u79d2\uff0c\u6240\u4ee5\u53ef\u4ee5\u8bbe\u5b9a\u4e3a 60 \u79d2\u3002\u82e5\u5c06\u5b83\u8bbe\u7f6e\u4e3a 0\uff0c\u5c31\u7981\u6b62\u4e86 keepalive \u8fde\u63a5\u3002")),(0,l.kt)("h2",{id:"\u7b2c\u4e8c\u7ae0-\u5b9e\u6218-\u90e8\u7f72\u524d\u540e\u5206\u79bb\u9879\u76ee"},"\u7b2c\u4e8c\u7ae0 \u5b9e\u6218-\u90e8\u7f72\u524d\u540e\u5206\u79bb\u9879\u76ee"),(0,l.kt)("p",null,"\u672c\u7ae0\u8282\u6211\u4eec\u4f1a\u6f14\u793a\u65e5\u5e38\u7684\u5de5\u4f5c\u4e2d\uff0c\u6211\u4eec\u662f\u600e\u4e48\u5229\u7528nginx\u90e8\u7f72\u9879\u76ee\u7684\u3002\u6211\u4eec\u4ee5\u90e8\u7f72\u4e00\u5957\u524d\u540e\u5206\u79bb\u7684\u9879\u76ee\u4e3a\u672c\u6b21\u8bb2\u8ff0\u7684\u5185\u5bb9\u3002"),(0,l.kt)("h3",{id:"\u4e00\u642d\u5efa\u540e\u7aef\u9879\u76ee"},"\u4e00\u3001\u642d\u5efa\u540e\u7aef\u9879\u76ee"),(0,l.kt)("p",null,"\u521b\u5efa\u4e00\u4e2a\u6700\u7b80\u5355\u7684springboot\u9879\u76ee\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/1657507807889-8ffd6220.png",alt:"1657507807889"}),"1657507807889"),(0,l.kt)("p",null,"\u53ea\u9700\u8981\u4f9d\u8d56\u4e00\u4e2aweb\u6a21\u5757\u5373\u53ef\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220713092526231-f68f20ca.png",alt:"image-20220713092526231"}),"image-20220713092526231"),(0,l.kt)("p",null,"\u63d0\u4f9b\u4e00\u4e2aapi\u63a5\u53e3\uff0c\u53ef\u4ee5\u83b7\u53d6\u670d\u52a1\u7aef\u7684\u4e3b\u673a\u5730\u5740\u548c\u670d\u52a1\u7aef\u53e3\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@RestController\npublic class NginxController implements ApplicationListener<WebServerInitializedEvent> {\n\n    private int port;\n\n    @Override\n    public void onApplicationEvent(WebServerInitializedEvent event) {\n        this.port = event.getWebServer().getPort();\n    }\n\n    @GetMapping("host")\n    public String getHost(HttpServletRequest request){\n        InetAddress address;\n        try {\n            address = InetAddress.getLocalHost();\n            return  address.getHostAddress() + ":" + port;\n        } catch (UnknownHostException e) {\n            e.printStackTrace();\n        }\n        return "error\uff1aNetwork card information is not available\uff01";\n    }\n\n}\n')),(0,l.kt)("p",null,"\u6d4b\u8bd5\u63a5\u53e3\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220713094617222-f5e63e7a.png",alt:"image-20220713094617222"}),"image-20220713094617222"),(0,l.kt)("h3",{id:"\u4e8c\u642d\u5efa\u524d\u7aef\u9879\u76ee"},"\u4e8c\u3001\u642d\u5efa\u524d\u7aef\u9879\u76ee"),(0,l.kt)("p",null,"\u642d\u5efa\u524d\u7aef\u5de5\u7a0b\uff0c\u4f7f\u7528vue\u5b98\u65b9\u63d0\u4f9b\u7684\u811a\u624b\u67b6\u642d\u5efa\u4e00\u4e2a\u57fa\u7840\u5de5\u7a0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-http"},"https://cli.vuejs.org/guide/creating-a-project.html\n")),(0,l.kt)("p",null,"\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"vue ui"),"\u642d\u5efa\u811a\u624b\u67b6\uff0c\u9009\u62e9\u5b89\u88c5vue-router\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/1657507661343-1264f023.png",alt:"1657507661343"}),"1657507661343"),(0,l.kt)("p",null,"\u542f\u52a8\u9879\u76ee\uff0c\u6253\u5f00\u9879\u76ee\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/1657509039232-85fa6931.png",alt:"1657509039232"}),"1657509039232"),(0,l.kt)("p",null,"\u5b89\u88c5axios\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm install axios\n")),(0,l.kt)("p",null,"\u4f7f\u7528axios\u8bbf\u95ee\u540e\u7aef\u7684api\u63a5\u53e3\uff0c\u4fee\u6539app.vue\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <img alt=\"Vue logo\" src=\"./assets/logo.png\">\n  <br>\u670d\u52a1\u5668\u7684ip\u548c\u7aef\u53e3\u662f\uff1a{{ host }}\n</template>\n\n<script>\nimport axios from 'axios'\nexport default {\n  name: 'App',\n  data(){\n    return {\n      host: \"\"\n    }\n  },\n  mounted(){\n    var ip_addr = document.location.hostname\n    axios.get('http://'+ip_addr+':8080/host').then(res=>{\n      this.host = res.data\n    })\n  }\n  \n}\n<\/script>\n")),(0,l.kt)("p",null,"\u6d4f\u89c8\u5668\u8bbf\u95ee\uff0c\u53d1\u751f\u4e86\u8de8\u57df\u95ee\u9898\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/1657509682419-d88211fc.png",alt:"1657509682419"}),"1657509682419"),(0,l.kt)("p",null,"\u6dfb\u52a0\u914d\u7f6e\u9879\uff0c\u65b0\u5efa",(0,l.kt)("inlineCode",{parentName:"p"},"vue.config.js"),"\u4f4d\u7f6e\u6587\u4ef6\uff0c\u914d\u7f6e\u4ee3\u7406\u5982\u4e0b:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"module.exports = {\n  devServer: {\n    port: 80,\n    proxy: 'http://127.0.0.1:8080'\n  }\n}\n")),(0,l.kt)("p",null,"\u540c\u65f6\u4fee\u6539axiso\u7684\u8bf7\u6c42\u5730\u5740\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"mounted(){\n    var ip_addr = document.location.hostname\n    axios.get('http://'+ip_addr+'/host').then(res=>{\n        this.host = res.data\n    })\n}\n")),(0,l.kt)("p",null,"\u518d\u6b21\u8bbf\u95ee\u524d\u7aef\u5de5\u7a0b\uff0c\u53d1\u73b0\u8de8\u57df\u95ee\u9898\u89e3\u51b3\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/1657510276751-45fc20bd.png",alt:"1657510276751"}),"1657510276751"),(0,l.kt)("h3",{id:"\u4e09nginx\u505a\u9759\u6001\u670d\u52a1\u5668"},"\u4e09\u3001nginx\u505a\u9759\u6001\u670d\u52a1\u5668"),(0,l.kt)("p",null,"\u6211\u4eec\u90fd\u77e5\u9053\uff0cnginx\u7684\u5b89\u88c5\u76ee\u5f55\u4e2d\u6709\u8fd9\u6837\u4e00\u4e2a\u6587\u4ef6\u5939\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220712152343632-b6290bdc.png",alt:"image-20220712152343632"}),"image-20220712152343632"),(0,l.kt)("p",null,"\u6211\u4eec\u518d\u7ed3\u5408nginx\u7684\u57fa\u7840\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u4ee5\u4e0b\u5185\u5bb9\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"server {\n    listen       80;\n    server_name  localhost;\n\n    location / {\n        root   html;\n        index  index.html index.htm;\n    }\n}\n")),(0,l.kt)("p",null,"\u6211\u4eec\u4e0d\u59a8\u731c\u60f3\u4e00\u4e0b\u5f53url\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"/"),"\u65f6\uff08\u5f53\u7136\u8fd9\u662f\u9519\u7684\uff09\uff0c\u4f1a\u53bbhtml\u76ee\u5f55\u5bfb\u627eindex.html\u6587\u4ef6\u4f5c\u4e3a\u9996\u9875\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u4e0d\u59a8\u4fee\u6539\u4e00\u4e0bindex.html\u6587\u4ef6\u770b\u770b\uff0c\u4fee\u6539\u662f\u5426\u53ef\u4ee5\u751f\u6548\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220712153302770-534eec67.png",alt:"image-20220712153302770"}),"image-20220712153302770"),(0,l.kt)("p",null,"\u786e\u5b9e\u53ef\u4ee5\u751f\u6548\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\uff0c\u7ed3\u8bba\u53ea\u9700\u8981\u5c06\u6211\u4eec\u7684q\u524d\u7aef\u6587\u4ef6\u653e\u5728html\u76ee\u5f55\u5373\u53ef\uff08\u4e8b\u5b9e\u4e0a\u653e\u5728\u54ea\u91cc\u90fd\u53ef\u4ee5\uff09\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u5c1d\u8bd5\u5c06\u6784\u5efa\u7684\u7ed3\u679c\u653e\u5165html\u6587\u4ef6\u5939\uff1a"),(0,l.kt)("p",null,"\u524d\u7aef\u5de5\u7a0b\u4ea7\u7269\u5982\u4e0b\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220713131449954-a4979cf4.png",alt:"image-20220713131449954"}),"image-20220713131449954"),(0,l.kt)("p",null,"\u4e0a\u4f20\u81f3nginx\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220713132032861-981fcea7.png",alt:"image-20220713132032861"}),"image-20220713132032861"),(0,l.kt)("p",null,"\u4ed6\u771f\u7684\u53ef\u4ee5\u8bbf\u95ee\u4e86\uff0c\u4f46\u662f\uff0c\u6b64\u65f6\u5374\u51fa\u73b0\u4e86\u95ee\u9898\uff0cngixn\u65e0\u6cd5\u5224\u65ad\u54ea\u4e9b\u662f\u9759\u6001\u8d44\u6e90\uff0c\u54ea\u4e9b\u662f\u9700\u8981\u8bbf\u95eeapi\u63a5\u53e3\u7684\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220713132138381-ec54fad9.png",alt:"image-20220713132138381"}),"image-20220713132138381"),(0,l.kt)("p",null,"\u95ee\u9898\u5982\u4e0b\uff0c\u6b64\u95ee\u9898\u6309\u4e0b\u4e0d\u8868\uff0c\u540e\u7eed\u5904\u7406\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220713132219959-7fb714a1.png",alt:"image-20220713132219959"}),"image-20220713132219959"),(0,l.kt)("h3",{id:"\u56db\u865a\u62df\u4e3b\u673a\u914d\u7f6e\u8be6\u89e3"},"\u56db\u3001\u865a\u62df\u4e3b\u673a\u914d\u7f6e\u8be6\u89e3"),(0,l.kt)("p",null,"http\u670d\u52a1\u4e0a\u652f\u6301\u3010\u82e5\u5e72\u865a\u62df\u4e3b\u673a\u3011\u3002\u6bcf\u4e2a\u865a\u62df\u4e3b\u673a\u5bf9\u5e94\u4e00\u4e2aserver\u914d\u7f6e\u9879\uff0c\u914d\u7f6e\u9879\u91cc\u9762\u5305\u542b\u8be5\u865a\u62df\u4e3b\u673a\u76f8\u5173\u7684\u914d\u7f6e\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"server{\n    listen 80 default;\n    server_name www.ydlclass.com;\n    index index.html index.htm index.php;\n    root /data/www;\n\n    location ~ .*\\.(gif|jpg|jpeg|png|bmp|swf)${\n        expires      30d;\n    }\n\n    location ~ .*\\.(js|css)?${\n        expires      1h;\n    }\n}\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"listen 80;")," \u76d1\u542c\u7aef\u53e3\uff0c\u9ed8\u8ba480\uff0c\u5c0f\u4e8e1024\u7684\u8981\u4ee5root\u542f\u52a8\u3002\u53ef\u4ee5\u4e3alisten :80\u3001listen 127.0.0.1:80\u7b49\u5f62\u5f0f\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"server_name www.ydlclass.com")," \u7528\u4e8e\u8bbe\u7f6e\u865a\u62df\u4e3b\u673a\u670d\u52a1\u540d\u79f0\uff0c\u5982\uff1a127.0.0.1 \u3001 localhost \u3001\u57df\u540d[",(0,l.kt)("a",{parentName:"li",href:"http://www.baidu.com/"},"www.baidu.comopen in new window")," | ",(0,l.kt)("a",{parentName:"li",href:"http://www.jd.com/"},"www.jd.comopen in new window"),"]\uff0c\u4e5f\u53ef\u4ee5\u8fdb\u884c\u6b63\u5219\u5339\u914d\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"root /data/www")," \u5b9a\u4e49\u670d\u52a1\u5668\u7684\u9ed8\u8ba4\u7f51\u7ad9\u6839\u76ee\u5f55\u4f4d\u7f6e\u3002\u53ef\u4ee5\u662flinux\u7684\u7edd\u5bf9\u8def\u5f84\uff08/xxx/xx\uff09\uff0c\u4e5f\u53ef\u4ee5\u662fnginx\u5b89\u88c5\u76ee\u5f55\u7684\u76f8\u5bf9\u8def\u5f84\uff08html\uff09\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"index index.jsp index.html index.htm")," \uff1a\u5b9a\u4e49\u8def\u5f84\u4e0b\u9ed8\u8ba4\u8bbf\u95ee\u7684\u6587\u4ef6\u540d\uff0c\u4e00\u822c\u8ddf\u7740root\u653e\u3002")),(0,l.kt)("h4",{id:"1location-\u5e38\u89c1\u7684\u914d\u7f6e\u9879"},"1\u3001location \u5e38\u89c1\u7684\u914d\u7f6e\u9879\uff1a"),(0,l.kt)("p",null,"location\u901a\u5e38\u7528\u6765\u5339\u914duri\uff0c\u5176\u57fa\u672c\u8bed\u6cd5\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"location [=|~|~*|^~] /uri/ {}\n")),(0,l.kt)("p",null,"\uff081\uff09=\u8868\u793a\u5339\u914duri\u65f6\u5fc5\u987b\u505a\u5230\u5b8c\u5168\u5339\u914d\uff0c\u5982"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"location = /index {}\n")),(0,l.kt)("p",null,"\uff082\uff09~\u8868\u793a\u5339\u914dURI\u65f6\u662f\u5b57\u6bcd\u5927\u5c0f\u5199\u654f\u611f\u7684\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u3002"),(0,l.kt)("p",null,"\uff083\uff09~*\u8868\u793a\u5339\u914dURI\u65f6\u662f\u5ffd\u7565\u5b57\u6bcd\u5927\u5c0f\u654f\u611f\u7684\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u3002"),(0,l.kt)("p",null,"\uff084\uff09^~\u8868\u793a\u5339\u914duri\u65f6\u53ea\u9700\u6ee1\u8db3\u524d\u7f00\u5339\u914d\u5373\u53ef"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"# \u6240\u6709 /./img/\u5f00\u5934\u7684uri\u4f1a\u5168\u90e8\u5339\u914d\nlocation ^~ /./img/ {}\n")),(0,l.kt)("p",null,"\uff085\uff09uri\u53c2\u6570\u4e2d\u662f\u53ef\u4ee5\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\uff0c\u5982\u5339\u914d\u4ee5 .gif .jpg\u548c.jpeg\u7ed3\u5c3e\u7684uri\uff0c\u5982\u4e0b:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"location ~* \\.(gif|jpg|jpeg)$ {}\n")),(0,l.kt)("p",null,"\uff086\uff09\u4ee5\u4e0b\u65b9\u5f0f\u53ef\u4ee5\u5339\u914d\u6240\u6709\u7684uri"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"location / {}\n")),(0,l.kt)("p",null,"\uff087\uff09",(0,l.kt)("inlineCode",{parentName:"p"},"@")," \u6307\u5b9a\u4e00\u4e2a\u547d\u540d\u7684location\uff0c\u4e00\u822c\u7528\u4e8e\u5185\u90e8\u91cd\u5b9a\u4e49\u8bf7\u6c42\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"location @name {\u2026}\n")),(0,l.kt)("p",null,"\u7ed3\u679c\u603b\u7ed3\uff1a \u5339\u914d\u7684\u4f18\u5148\u987a\u5e8f\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"="),">",(0,l.kt)("inlineCode",{parentName:"p"},"^~"),"\uff08\u5339\u914d\u56fa\u5b9a\u5b57\u7b26\u4e32\uff0c\u5ffd\u7565\u6b63\u5219\uff09>",(0,l.kt)("inlineCode",{parentName:"p"},"~*"),">",(0,l.kt)("inlineCode",{parentName:"p"},"/")," \uff0c\u5de5\u4f5c\u4e2d\u5c3d\u91cf\u5c06\u2018=\u2019\u653e\u5728\u524d\u9762\u3002"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"http://192.168.111.201/1.png"},"http://192.168.111.201/1.pngopen in new window")),(0,l.kt)("h4",{id:"2\u6587\u4ef6\u8def\u5f84\u7684\u5b9a\u4e49"},"2\u3001\u6587\u4ef6\u8def\u5f84\u7684\u5b9a\u4e49"),(0,l.kt)("p",null,"\uff081\uff09\u4ee5root\u65b9\u5f0f\u8bbe\u7f6e\u8d44\u6e90\u8def\u5f84"),(0,l.kt)("p",null,"\u8bed\u6cd5 root path \uff0c\u9ed8\u8ba4 root html\uff0c\u53ef\u4ee5\u5728http\u3001server\u3001location\u6a21\u5757\u4e2d\u914d\u7f6e\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"location ^~ /backend {\n    root /data/www/backend\n}\n")),(0,l.kt)("p",null,"\u5982\u679curl\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"}," /backend/index/test.html"),"\u5219\u4f1a\u8fd4\u56de/data/www/backend/backend/index/test.html\u8fd9\u4e2a\u6587\u4ef6\u3002"),(0,l.kt)("p",null,"\uff082\uff09\u4ee5alias\u65b9\u5f0f\u8bbe\u7f6e\u8d44\u6e90\u8def\u5f84"),(0,l.kt)("p",null,"alias\u4e5f\u662f\u7528\u6765\u8bbe\u7f6e\u6587\u4ef6\u8d44\u6e90\u7684\uff0c\u5b83\u548croot\u4e0d\u540c\u70b9\u5728\u4e8e\u5982\u4f55\u89e3\u8bfb\u7d27\u8ddflocation\u540e\u9762\u7684uri\u53c2\u6570\uff0c\u53ef\u4ee5\u5728location\u4e2d\u914d\u7f6e\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"location ^~ /backend {\n    alias /data/www/backend\n}\n")),(0,l.kt)("p",null,"\u5982\u679curl\u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"/backend/index/test.html"),"\u5219\u4f1a\u8fd4\u56de/data/www/backend/index/test.html\u6587\u4ef6\u3002"),(0,l.kt)("p",null,"alias\u4f1a\u5c06location\u540e\u7684url\u90e8\u5206\u4e22\u5f03\u6389\uff0c\u800croot\u4e0d\u4f1a\u3002"),(0,l.kt)("p",null,"\uff083\uff09\u8bbf\u95ee\u9996\u9875"),(0,l.kt)("p",null,"\u53ef\u4ee5\u5728http\u3001server\u3001location\u4e2d\u914d\u7f6e\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"index index.html index.htm index.php\n")),(0,l.kt)("p",null,"nginx\u4f1a\u4f9d\u6b21\u8bbf\u95eeindex\u4e2d\u5b9a\u4e49\u7684\u6587\u4ef6\uff0c\u77e5\u9053\u8bbf\u95ee\u6210\u529f\u4e3a\u6b62\u3002"),(0,l.kt)("p",null,"\uff084\uff09\u6839\u636ehttp\u8fd4\u56de\u7801\u91cd\u5b9a\u5411\u9875\u9762"),(0,l.kt)("p",null,"\u53ef\u4ee5\u5728http\u3001server\u3001location\u4e2d\u914d\u7f6e\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"error_page 404 /404.html\nerror_page 502 503 504 /50x.html\n")),(0,l.kt)("p",null,"\uff085\uff09try_files"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"try_files path1 path2 ... uri\n")),(0,l.kt)("p",null,"\u8be5\u914d\u7f6e\u9879\u53ef\u4ee5\u914d\u7f6e\u5728server\u3001location\u6a21\u5757\u3002"),(0,l.kt)("p",null,"try_files\u540e\u8fb9\u4f1a\u8ddf\u82e5\u5e72\u8def\u5f84\uff0cnginx\u4f1a\u5c1d\u8bd5\u6309\u7167\u987a\u5e8f\u8bbf\u95ee\u6bcf\u4e00\u4e2apath\uff0c\u5982\u679c\u53ef\u4ee5\u6709\u6548\u7684\u8bfb\u53d6\uff0c\u5c31\u76f4\u63a5\u8bbf\u95ee\u5f53\u4e0bpath\u8d44\u6e90\uff0c\u5426\u5219\u7ee7\u7eed\u5411\u4e0b\u8bbf\u95ee\uff0c\u5982\u679c\u90fd\u8bfb\u53d6\u4e0d\u5230\u5c31\u91cd\u5b9a\u5411\u5230uri\u53c2\u6570\u4e0a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"try_files /a/b.html $uri $uri/index.html $uri.html @other;\nlocation @other {\n    proxy_pass http://backend\n}\n")),(0,l.kt)("h4",{id:"3\u89e3\u51b3\u524d\u7aef\u7684\u8def\u7531\u95ee\u9898"},"3\u3001\u89e3\u51b3\u524d\u7aef\u7684\u8def\u7531\u95ee\u9898"),(0,l.kt)("p",null,"\u6211\u4eec\u5728\u524d\u7aef\u76f4\u63a5\u70b9\u51fb\u8def\u7531\u7684\u6309\u94ae\u53ef\u4ee5\u8bbf\u95ee\uff0c\u56e0\u4e3a\u8fd9\u79cd\u60c5\u51b5\u5e76\u672a\u518d\u6b21\u5411nginx\u53d1\u9001\u8bf7\u6c42\uff0c\u4ec5\u4ec5\u662f\u524d\u7aef\u7684\u8def\u7531\u5207\u6362\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220714164105074-a93f281a.png",alt:"image-20220714164105074"}),"image-20220714164105074"),(0,l.kt)("p",null,"\u4f46\u662f\uff0c\u5982\u679c\u76f4\u63a5\u8bbf\u95ee",(0,l.kt)("inlineCode",{parentName:"p"},"/about"),"\u5c31GG\u4e86\uff0c\u8fd9\u4e2aurl\u76f4\u63a5\u8bbf\u95eenginx\u65f6\uff0cnginx\u4f1a\u8ba4\u4e3a\u4f60\u8981\u67e5\u627eabout\u8fd9\u4e2a\u8d44\u6e90\uff0c\u5f53\u7136\u662f404\u4e86\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220714164156365-6b100278.png",alt:"image-20220714164156365"}),"image-20220714164156365"),(0,l.kt)("p",null,"\u6240\u4ee5\u6211\u4eec\u8981\u901a\u8fc7\u4e00\u4e9b\u914d\u7f6e\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cvue\u5de5\u7a0b\u90fd\u662f\u5355\u9875\u9762\u7684\uff0c\u6240\u4ee5\u65e0\u8bba\u54ea\u4e2a\u8def\u7531\u90fd\u5e94\u8be5\u4f7f\u7528\u552f\u4e00\u7684index.html\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u505a\u5982\u4e0b\u7684\u914d\u7f6e\uff0c\u8be5\u914d\u7f6e\u7684\u610f\u601d\u5c31\u662f\u5c06\u5176\u4ed6\u7684\u6240\u6709\u8bf7\u6c42\uff0c\u90fd\u5f3a\u5236\u4f7f\u7528/index.html\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"location / {\n    root /data/www/ui;\n    try_files /index.html;\n}\n")),(0,l.kt)("p",null,"\u4f46\u662f\u8fd9\u4e2a\u6709\u95ee\u9898\u7684\uff0c\u6bd4\u5982\u4e0b\u8fb9\u7684\u8bf7\u6c42\uff0c\u4e5f\u4f1a\u5f3a\u5236\u4f7f\u7528index.html\uff0c\u6211\u660e\u660e\u9700\u8981js\uff0c\u4f60\u5374\u7ed9\u6211\u4e00\u4e2aHTML\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-http"},"http://192.168.111.201/js/app.aa11d15b.js\n")),(0,l.kt)("p",null,"\u6240\u4ee5\u914d\u7f6e\u8981\u6539\u6210\u4e0b\u8fb9\u7684\u5185\u5bb9\uff0c$uri\u662f\u4e00\u4e2a\u53d8\u91cf\uff0c\u4ed6\u5c31\u662f\u5177\u4f53\u7684url\uff0c\u5bf9\u4e00",(0,l.kt)("inlineCode",{parentName:"p"},"/js/app.aa11d15b.js"),"\u8fd9\u4e2a\u8bf7\u6c42\uff0c\u9996\u5148\u4f1a\u8bbf\u95ee",(0,l.kt)("inlineCode",{parentName:"p"},"/data/www/ui/js/app.aa11d15b.js"),"\u8fd9\u4e2a\u8d44\u6e90\uff0c\u5f53\u7136\u5b58\u5728\uff0c\u5c31\u76f4\u63a5\u8fd4\u56de\u4e86\uff0c\u800c\u5176\u4ed6\u7684\u8def\u7531\u8d44\u6e90\u4f1a\u4f7f\u7528index.html\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"location / {\n    root /data/www/ui;\n    try_files $uri $uri/ $uri/index.html $uri.html /index.html;\n}\n")),(0,l.kt)("h4",{id:"4\u5bf9\u56fe\u7247\u5f00\u542fgzip\u538b\u7f29"},"4\u3001\u5bf9\u56fe\u7247\u5f00\u542fgzip\u538b\u7f29"),(0,l.kt)("p",null,"\u5728http\u6a21\u5757\u4e2d\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"gzip on;\ngzip_min_length 1k;\ngzip_buffers    4 16k;\ngzip_http_version 1.1;\ngzip_comp_level 5;\ngzip_types image/png;\ngzip_vary on;\n")),(0,l.kt)("p",null,"\u89e3\u91ca\u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},'gzip on;\u4f7f\u7528"gzip on;"\u53c2\u6570\u6765\u542f\u7528\u538b\u7f29\uff0c\u9ed8\u8ba4\u662f\u5173\u95ed\u7684\u3002'),(0,l.kt)("li",{parentName:"ul"},"gzip_min_length 1k;gzip\u538b\u7f29\u7684\u6700\u5c0f\u6587\u4ef6\uff0c\u5c0f\u4e8e\u8bbe\u7f6e\u503c\u7684\u6587\u4ef6\u5c06\u4e0d\u4f1a\u538b\u7f29#\u6307\u5b9aNginx\u670d\u52a1\u9700\u8981\u5411\u670d\u52a1\u5668\u7533\u8bf7\u7684\u7f13\u5b58\u7a7a\u95f4\u7684\u4e2a\u6570*\u5927\u5c0f\uff0c\u9ed8\u8ba432 4k|16 8k;"),(0,l.kt)("li",{parentName:"ul"},"gzip_buffers 4 16k;\u8bbe\u7f6e\u538b\u7f29\u7f13\u51b2\u533a\u5927\u5c0f\uff0c\u6b64\u5904\u8bbe\u7f6e\u4e3a4\u4e2a16K\u5185\u5b58\u4f5c\u4e3a\u538b\u7f29\u7ed3\u679c\u6d41\u7f13\u5b58"),(0,l.kt)("li",{parentName:"ul"},"gzip_http_version 1.1;\u542f\u7528\u538b\u7f29\u529f\u80fd\u65f6\uff0c\u534f\u8bae\u7684\u6700\u5c0f\u7248\u672c\uff0c\u9ed8\u8ba4HTTP/1.1"),(0,l.kt)("li",{parentName:"ul"},"gzip_comp_level 5;\u538b\u7f29\u6bd4\u4f8b\u7531\u4f4e\u5230\u9ad8\u4ece1\u52309\uff0c\u9ed8\u8ba4\u4e3a1\u3002\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\u538b\u7f29\u6bd4\u8bbe\u7f6e\u7684\u8d8a\u9ad8\u5c31\u4f1a\u8d8a\u6d88\u8017CPU\u7684\u8d44\u6e90\uff0c\u56e0\u6b64\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u6211\u4eec\u4f1a\u8bbe\u7f6e\u8be5\u53c2\u6570\u7684\u503c\u57283~5\u4e4b\u95f4\uff0c\u6700\u597d\u4e0d\u8981\u8d85\u8fc75\uff0c\u56e0\u4e3a\u968f\u7740\u538b\u7f29\u6bd4\u7684\u589e\u5927\u7684\u786e\u4f1a\u964d\u4f4e\u4f20\u8f93\u7684\u5e26\u5bbd\u6210\u672c\u4f46\u53d1\u9001\u6570\u636e\u524d\u4f1a\u5360\u7528\u66f4\u591a\u7684CPU\u65f6\u95f4\u5206\u7247\u3002"),(0,l.kt)("li",{parentName:"ul"},"gzip_types image/png;\u6307\u660e\u4ec5\u5bf9\u54ea\u4e9b\u7c7b\u578b\u7684\u8d44\u6e90\u6267\u884c\u538b\u7f29\u64cd\u4f5c\uff1b\u9ed8\u8ba4\u4e3agzip_types text/html\uff0c\u4e0d\u7528\u663e\u793a\u6307\u5b9a\uff0c\u5426\u5219\u51fa\u9519\u3002"),(0,l.kt)("li",{parentName:"ul"},"gzip_vary on;\u8be5\u6307\u4ee4\u7528\u4e8e\u8bbe\u7f6e\u5728\u4f7f\u7528Gzip\u529f\u80fd\u65f6\u662f\u5426\u53d1\u9001\u5e26\u6709\u201cVary: Accept-Encoding\u201d\u5934\u57df\u7684\u54cd\u5e94\u5934\u90e8\u3002\u8be5\u5934\u57df\u7684\u4e3b\u8981\u529f\u80fd\u662f\u544a\u8bc9\u63a5\u6536\u65b9\u53d1\u9001\u7684\u6570\u636e\u7ecf\u8fc7\u4e86\u538b\u7f29\u5904\u7406\u3002\u5f00\u542f\u540e\u7684\u6548\u679c\u662f\u5728\u54cd\u5e94\u5934\u90e8\u6dfb\u52a0\u4e86Accept-Encoding: gzip\uff0c\u8fd9\u5bf9\u4e8e\u672c\u8eab\u4e0d\u652f\u6301Gzip\u538b\u7f29\u7684\u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u662f\u6709\u7528\u7684\u3002")),(0,l.kt)("p",null,"\u8fd9\u4e00\u6b21\u6ca1\u6709\u8bbe\u7f6e\u56fe\u7247\u538b\u7f29\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220713153150102-ca095497.png",alt:"image-20220713153150102"}),"image-20220713153150102"),(0,l.kt)("p",null,"\u8bbe\u7f6e\u56fe\u7247\u538b\u7f29\u540e\uff0c\u54cd\u5e94\u591a\u4e86\u5982\u4e0b\u7684\u9996\u90e8\u4fe1\u606f\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220713153422776-1dce8c84.png",alt:"image-20220713153422776"}),"image-20220713153422776"),(0,l.kt)("h3",{id:"\u4e94\u53cd\u5411\u4ee3\u7406\u89e3\u51b3\u8de8\u57df"},"\u4e94\u3001\u53cd\u5411\u4ee3\u7406\u89e3\u51b3\u8de8\u57df"),(0,l.kt)("h4",{id:"1\u914d\u7f6enginx\u53cd\u5411\u4ee3\u7406"},"1\u3001\u914d\u7f6enginx\u53cd\u5411\u4ee3\u7406"),(0,l.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7proxy_pass\u53c2\u6570\u8bbe\u7f6e\u53cd\u5411\u4ee3\u7406\u7684\u670d\u52a1\u5668\uff0c\u8bed\u6cd5\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"location / {\n    proxy_pass http://ydl.com;\n}\n")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220713160342661-a6e6f2fa.png",alt:"image-20220713160342661"}),"image-20220713160342661"),(0,l.kt)("p",null,"\u6211\u4eec\u7684\u5b9e\u73b0\u903b\u8f91\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u5c06\u4ee5",(0,l.kt)("inlineCode",{parentName:"p"},"/api"),"\u4e3a\u524d\u7f00\u7684uri\u5168\u90e8\u53cd\u5411\u4ee3\u7406\u5230\u771f\u6b63\u7684\u540e\u7aef\u670d\u52a1\u5373\u53ef\u3002"),(0,l.kt)("p",null,"\u5b89\u88c5java\u73af\u5883\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220713161110581-785e07ad.png",alt:"image-20220713161110581"}),"image-20220713161110581"),(0,l.kt)("p",null,"\u540e\u53f0\u542f\u52a8\u6210\u529f\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220713161557596-d7964e5e.png",alt:"image-20220713161557596"}),"image-20220713161557596"),(0,l.kt)("p",null,"\u6211\u4eec\u4e3a\u4e86\u533a\u5206\u524d\u7aef\u9875\u9762\u548capi\u63a5\u53e3\uff0c\u5c06\u6240\u6709\u8bbf\u95ee\u540e\u7aefapi\u7684url\u7edf\u4e00\u52a0\u4e0a\u524d\u7f00 /api"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"mounted(){\n  var ip_addr = document.location.hostname\n  axios.get('http://'+ip_addr+'/api/host').then(res=>{\n   this.host = res.data\n  })\n}\n")),(0,l.kt)("p",null,"\u73b0\u5728\u6211\u4eec\u60f3\u7684\u662f\u5c06\u524d\u7aef\u53d1\u9001\u7684\u4ee5api\u6253\u5934\u7684url\u5168\u90e8\u4ee3\u7406\u5230\uff0c\u540e\u7aef8080\u7aef\u53e3\uff1a"),(0,l.kt)("p",null,"\u524d\u7aef\u8bbf\u95ee\u7684\u63a5\u53e3\uff1a",(0,l.kt)("a",{parentName:"p",href:"http://192.168.111.200/api/host"},"http://192.168.111.200:80/api/hostopen in new window")),(0,l.kt)("p",null,"\u540e\u7aef\u7684\u63a5\u53e3\uff1a",(0,l.kt)("a",{parentName:"p",href:"http://192.168.111.200:8080/host"},"http://192.168.111.200:8080/hostopen in new window")),(0,l.kt)("p",null,"\u5728\u5b9e\u73b0\u4ee3\u7406\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5c06/api\u8fd9\u4e2a\u524d\u7f00\u5220\u9664\u6389\uff0c\u6709\u4ee5\u4e0b\u4e24\u79cd\u65b9\u6cd5\uff0c\u4e00\u79cd\u662f\u91cd\u5199url\uff0c\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"location ^~ /api/ {\n    rewrite ^/api(.*)$ $1 break;\n    proxy_pass http://127.0.0.1:8080;\n}\n")),(0,l.kt)("p",null,"\u66f4\u7b80\u5355\u7684\u505a\u6cd5\u662f\uff0c\u5728\u4ee3\u7406\u5730\u5740\u7684\u540e\u8fb9\u52a0",(0,l.kt)("inlineCode",{parentName:"p"},"/"),"\uff0c\u8fd9\u6837\u505a\u4e5f\u4f1a\u53bb\u6389\u524d\u7f00\uff0c\u4f46\u4e0d\u5982\u4ee5\u4e0a\u65b9\u5f0f\u7075\u6d3b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"location ^~ /api/ {\n    proxy_pass http://127.0.0.1:8080/;\n}\n")),(0,l.kt)("p",null,"\u5c0f\u77e5\u8bc6\uff1alocation\u4e2d\u7684rewirte\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"rewrite break\uff1aurl\u91cd\u5199\u540e\uff0c\u76f4\u63a5\u4f7f\u7528\u5f53\u524d\u8d44\u6e90\uff0c\u4e0d\u518d\u6267\u884clocation\u91cc\u4f59\u4e0b\u7684\u8bed\u53e5\uff0c\u5b8c\u6210\u672c\u6b21\u8bf7\u6c42\uff0c\u5730\u5740\u680furl\u4e0d\u53d8"),(0,l.kt)("li",{parentName:"ol"},"rewrite last\uff1aurl\u91cd\u5199\u540e\uff0c\u9a6c\u4e0a\u53d1\u8d77\u4e00\u4e2a\u65b0\u7684\u8bf7\u6c42\uff0c\u518d\u6b21\u8fdb\u5165server\u5757\uff0c\u91cd\u8bd5location\u5339\u914d\uff0c\u8d85\u8fc710\u6b21\u5339\u914d\u4e0d\u5230\u62a5500\u9519\u8bef\uff0c\u5730\u5740\u680furl\u4e0d\u53d8"),(0,l.kt)("li",{parentName:"ol"},"rewrite redirect\uff1a\u8fd4\u56de302\u4e34\u65f6\u91cd\u5b9a\u5411\uff0c\u5730\u5740\u680f\u663e\u793a\u91cd\u5b9a\u5411\u540e\u7684url\u3002")),(0,l.kt)("h3",{id:"\u516d\u4e3a\u540e\u7aef\u5de5\u7a0b\u505a\u8d1f\u8f7d\u5747\u8861"},"\u516d\u3001\u4e3a\u540e\u7aef\u5de5\u7a0b\u505a\u8d1f\u8f7d\u5747\u8861"),(0,l.kt)("p",null,"\u6709\u65f6\u5019\uff0c\u6211\u4eec\u7684\u540e\u7aef\u5de5\u7a0b\u538b\u529b\u592a\u5927\uff0c\u53ef\u80fd\u9700\u8981\u5c06\u540e\u7aef\u5de5\u7a0b\u90e8\u7f72\u5728\u591a\u53f0\u670d\u52a1\u5668\u4e0a\uff0c\u6b64\u65f6\u5c31\u9700\u8981\u4f7f\u7528\u8d1f\u8f7d\u5747\u8861\u4e86\uff0c\u5728\u5b66\u4e60\u8d1f\u8f7d\u5747\u8861\u7684\u65f6\u5019\u6211\u4eec\u4e0d\u59a8\u5148\u4e86\u89e3\u4e00\u4e0bupstream\u6a21\u5757\u3002"),(0,l.kt)("h4",{id:"1upstream\u6a21\u5757\u89e3\u8bfb"},"1\u3001upstream\u6a21\u5757\u89e3\u8bfb"),(0,l.kt)("p",null,"nginx \u7684\u8d1f\u8f7d\u5747\u8861\u529f\u80fd\u4f9d\u8d56\u4e8e ngx_http_upstream_module\u6a21\u5757\u3002upstream \u6a21\u5757\u5e94\u8be5\u653e\u4e8ehttp{}\u6807\u7b7e\u5185\u3002"),(0,l.kt)("p",null,"\u6a21\u5757\u5199\u6cd5\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"upstream backend {\n    ip_hash; \n    server backend1.example.com;\n    server backend2.example.com:8080;\n    server 127.0.0.1:8080;\n    server backup2.example.com:8080;\n}\n")),(0,l.kt)("p",null,"\u7136\u540e\u5728location\u5904\u4f7f\u7528\u5982\u4e0b\u5199\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"location / {\n    proxy_pass http://backend;\n}\n")),(0,l.kt)("p",null,"\u4ee5\u4e0a\u5199\u6cd5\u7684\u610f\u601d\u5c31\u662f\uff0c\u5c06\u6765\u540c\u4e00\u4e2aurl\u8bbf\u95ee\u6211\u4eec\u7684\u670d\u52a1\u65f6\uff0c\u670d\u52a1\u53ef\u4ee5\u7531backend\u4e2d\u7684\u670d\u52a1\u5668\u6309\u7167\u67d0\u79cd\u7279\u5b9a\u89c4\u5219\u8f6e\u6d41\u63d0\u4f9b\u3002"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"ngixn\u8d1f\u8f7d\u5747\u8861\u7684\u4e94\u79cd\u7b97\u6cd5")),(0,l.kt)("p",null,"\uff081\uff09round robin \u8f6e\u8be2 \uff08\u9ed8\u8ba4\uff09 \u6309\u65f6\u95f4\u987a\u5e8f\u4f9d\u6b21\u5c06\u8bf7\u6c42\u5206\u914d\u5230\u5404\u4e2a\u540e\u53f0\u670d\u52a1\u5668\u4e2d\uff0c\u6302\u6389\u7684\u670d\u52a1\u5668\u81ea\u52a8\u4ece\u5217\u8868\u4e2d\u5254\u9664"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"upstream bakend {  \n   server 192.168.0.1 down;    \n   server 192.168.0.2;  \n}\n")),(0,l.kt)("p",null,"\uff082\uff09weight \u8f6e\u8be2\u6743\u91cd weight\u7684\u503c\u8d8a\u5927\u5206\u914d\u5230\u7684\u8bbf\u95ee\u6982\u7387\u8d8a\u9ad8\uff0c\u4e3b\u8981\u7528\u4e8e\u540e\u7aef\u6bcf\u53f0\u670d\u52a1\u5668\u6027\u80fd\u4e0d\u5747\u8861\u7684\u60c5\u51b5\u4e0b\uff0c\u6216\u5728\u4e3b\u4ece\u7684\u60c5\u51b5\u4e0b\u8bbe\u7f6e\u4e0d\u540c\u7684\u6743\u503c\uff0c\u8fbe\u5230\u5408\u7406\u6709\u6548\u7684\u5730\u5229\u7528\u4e3b\u673a\u8d44\u6e90\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"upstream bakend {  \n    server 192.168.0.1 weight=20;  \n    server 192.168.0.2 weight=10;  \n}\n")),(0,l.kt)("p",null,"\uff083\uff09ip_hash\uff1a\u6bcf\u4e2a\u8bf7\u6c42\u6309\u8bbf\u95eeIP\u7684\u54c8\u5e0c\u7ed3\u679c\u5206\u914d\uff0c\u4f7f\u6765\u81ea\u540c\u4e00\u4e2aIP\u7684\u8bbf\u5ba2\u56fa\u5b9a\u8bbf\u95ee\u4e00\u53f0\u540e\u7aef\u670d\u52a1\u5668\uff0c\u5e76\u4e14\u53ef\u4ee5\u6709\u6548\u89e3\u51b3\u52a8\u6001\u7f51\u9875\u5b58\u5728\u7684session\u5171\u4eab\u95ee\u9898\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"upstream bakend {  \n    ip_hash;  \n    server 192.168.0.1:88;  \n    server 192.168.0.2:80;  \n} \n")),(0,l.kt)("p",null,"\uff084\uff09url_hash\uff1a\u6309\u8bbf\u95ee\u7684URL\u7684\u54c8\u5e0c\u7ed3\u679c\u6765\u5206\u914d\u8bf7\u6c42\uff0c\u4f7f\u6bcf\u4e2aURL\u5b9a\u5411\u5230\u540c\u4e00\u53f0\u540e\u7aef\u670d\u52a1\u5668\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u63d0\u9ad8\u540e\u7aef\u670d\u52a1\u5668\u7f13\u5b58\u7684\u6548\u7387\u3002Nginx\u672c\u8eab\u4e0d\u652f\u6301url_hash\uff0c\u9700\u8981\u5b89\u88c5Nginx\u7684hash\u8f6f\u4ef6\u5305\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"upstream backend {  \n    server 192.168.0.1:88;     //\u4f7f\u7528hash\u8bed\u53e5\u65f6\uff0c\u4e0d\u80fd\u5728\u4f7f\u7528weight\u7b49\u5176\u4ed6\u53c2\u6570\n    server 192.168.0.2:80;  \n    hash $request_uri;  \n    hash_method crc32;    //\u4f7f\u7528hash\u7b97\u6cd5\n}\n")),(0,l.kt)("p",null,"\uff085\uff09fair\u7b97\u6cd5\uff1a\u53ef\u4ee5\u6839\u636e\u9875\u9762\u5927\u5c0f\u548c\u52a0\u8f7d\u65f6\u95f4\u957f\u77ed\u667a\u80fd\u5730\u8fdb\u884c\u8d1f\u8f7d\u5747\u8861\uff0c\u6839\u636e\u540e\u7aef\u670d\u52a1\u5668\u7684\u54cd\u5e94\u65f6\u95f4\u6765\u5206\u914d\u8bf7\u6c42\uff0c\u54cd\u5e94\u65f6\u95f4\u77ed\u7684\u4f18\u5148\u5206\u914d\u3002Nginx\u672c\u8eab\u4e0d\u652f\u6301fair\uff0c\u8981\u5b89\u88c5upstream_fair\u6a21\u5757\u624d\u80fd\u4f7f\u7528\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"upstream backend {  \n    server 192.168.0.1:88;  \n    server 192.168.0.2:80;  \n    fair;  \n}\n")),(0,l.kt)("h4",{id:"2\u9879\u76ee\u914d\u7f6e"},"2\u3001\u9879\u76ee\u914d\u7f6e"),(0,l.kt)("p",null,"\u9996\u5148\u6211\u4eec\u9700\u8981\u5c06\u6211\u4eec\u7684\u540e\u7aef\u9879\u76ee\u5728\u670d\u52a1\u5668\u4e2d\u542f\u52a8\u4e24\u4efd\u6216\u591a\u4efd\uff0c\u53ef\u4ee5\u662f\u540c\u4e00\u53f0\u670d\u52a1\u5668\uff0c\u4e5f\u53ef\u4ee5\u662f\u591a\u53f0\u670d\u52a1\u5668\uff0c\u53ea\u8981\u53ef\u4ee5\u4e92\u8054\u4e92\u901a\u5373\u53ef\u3002"),(0,l.kt)("p",null,"\u540c\u4e00\u53f0\u670d\u52a1\u5668\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\uff0c\u91cd\u65b0\u6307\u5b9a\u4e00\u4e2a\u7aef\u53e3\u5373\u53ef\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"java -jar ydl-nginx.jar --server.port=8081\n")),(0,l.kt)("p",null,"\u6211\u4eec\u9700\u8981\u5b9a\u4e49\u4e00\u4e2aupstream\uff0c\u5c06\u90fd\u6709\u7684\u540e\u7aef\u670d\u52a1\u914d\u7f6e\u5728\u5176\u4e2d\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"upstream ydlclass {\n    server 127.0.0.1:8080 weight 10;\n    server 127.0.0.1:8081 weight 20;\n}\n")),(0,l.kt)("p",null,"\u4fee\u6539location\u7684proxy_pass\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"location ^~ /api/ {\n    proxy_pass http://ydlclass/;\n}\n")),(0,l.kt)("p",null,"\u5728\u6d4f\u89c8\u5668\u4e2d\u4e0d\u505c\u7684\u5237\u65b0\uff0c\u53d1\u73b0\u7aef\u53e3\u5728\u4e0d\u505c\u7684\u53d8\u5316\uff0c\u8bf4\u660e\u6211\u4eec\u7684\u591a\u6b21\u8bf7\u6c42\u786e\u5b9e\u843d\u5728\u4e86\u4e0d\u540c\u670d\u52a1\u4e0a\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220713171258079-eee6d3ab.png",alt:"image-20220713171258079"}),"image-20220713171258079"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220713171229793-48f7dfb3.png",alt:"image-20220713171229793"}),"image-20220713171229793"),(0,l.kt)("h3",{id:"\u4e03\u5176\u4ed6\u7684\u8de8\u57df\u95ee\u9898"},"\u4e03\u3001\u5176\u4ed6\u7684\u8de8\u57df\u95ee\u9898"),(0,l.kt)("p",null,"\u5982\u679c\u73b0\u5728\u672c\u673a\u7684\u524d\u7aef\u9879\u76ee\uff08\u4e5f\u5c31\u662f\u5176\u4ed6\u670d\u52a1\u5668\u7684\u524d\u7aef\u9879\u76ee\uff09\u4e5f\u60f3\u8981\u8bbf\u95ee\u865a\u62df\u673a\u4e2dngixn\u4ee3\u7406\u7684api\u63a5\u53e3\u3002\u8fd9\u662f\u4e00\u4e2a\u5178\u578b\u7684\u4e0d\u540c\u7684\u9879\u76ee\u4e4b\u95f4\u8fdb\u884c\u8bbf\u95ee\u7684\u95ee\u9898\uff0c\u8fd9\u5fc5\u7136\u5b58\u5728\u8de8\u57df\u95ee\u9898\uff0c\u5982\u4e0b\u56fe\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220713175913937-3a1a0718.png",alt:"image-20220713175913937"}),"image-20220713175913937"),(0,l.kt)("p",null,"\u6211\u4eec\u5c06\u672c\u5730\u7684vue\u5de5\u7a0b\u8fdb\u884c\u5982\u4e0b\u4fee\u6539\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"mounted(){\n    axios.get('http://192.168.111.200/api/host').then(res=>{\n      this.host = res.data\n    })\n  }\n")),(0,l.kt)("p",null,"\u6b64\u65f6\uff0c\u786e\u5b9e\u53d1\u751f\u4e86\u8de8\u57df\u95ee\u9898\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220713172639758-500766cd.png",alt:"image-20220713172639758"}),"image-20220713172639758"),(0,l.kt)("p",null,"\u6839\u636e\u6211\u4eec\u5b66\u4e60\u8fc7\u7684\u77e5\u8bc6\u8981\u89e3\u51b3\u8de8\u57df\u95ee\u9898\u3002\u5176\u5b9e\uff0c\u53ea\u9700\u8981\u5728\u5ba2\u6237\u7aef\u53d1\u9001\u3010\u9884\u68c0\u8bf7\u6c42\u3011\u65f6\u6307\u5b9a\u5bf9\u5e94\u7684\u54cd\u5e94\u5934\u5373\u53ef\uff0cnginx\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u7ed9\u54cd\u5e94\u589e\u52a0\u4e00\u4e9b\u9996\u90e8\u4fe1\u606f\uff0c\u65b9\u6cd5\u5982\u4e0b\uff0c\u5728\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"location ^~ /api/ {\n    add_header 'Access-Control-Allow-Origin' '*';\n    add_header 'Access-Control-Allow_Credentials' 'true';\n    add_header 'Access-Control-Allow-Headers' 'Authorization,Accept,Origin,DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Content-Range,Range';\n    add_header 'Access-Control-Allow-Methods' 'GET,POST,OPTIONS,PUT,DELETE,PATCH';\n    proxy_pass http://ydlclass/;\n}\n")),(0,l.kt)("p",null,"\u8bbf\u95ee\u672c\u5730\u5730\u5740\uff0c\u672c\u6b21\u8bbf\u95ee\u8de8\u57df\u7684\u95ee\u9898\u88ab\u89e3\u51b3\u4e86\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220713172843173-7a1457c5.png",alt:"image-20220713172843173"}),"image-20220713172843173"),(0,l.kt)("p",null,"\u6211\u4eec\u4e5f\u80fd\u770b\u5230\u5bf9\u5e94\u7684\u54cd\u5e94\u9996\u90e8\u4fe1\u606f\uff0c\u591a\u4e86\u5982\u4e0b\u5185\u5bb9\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220713180106546-01b1e3a2.png",alt:"image-20220713180106546"}),"image-20220713180106546"),(0,l.kt)("h3",{id:"\u516bnginx\u76d1\u63a7"},"\u516b\u3001nginx\u76d1\u63a7"),(0,l.kt)("p",null,"\u5f00\u542fnginx\u7684\u76d1\u63a7\u670d\u52a1"),(0,l.kt)("h4",{id:"1\u5f00\u542f\u72b6\u6001\u9875"},"1\u3001\u5f00\u542f\u72b6\u6001\u9875"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"#\u8bbe\u5b9a\u67e5\u770bNginx\u72b6\u6001\u7684\u5730\u5740   \nlocation = /status {  \n  stub_status on;       #\u8868\u793a\u5f00\u542fstubStatus\u7684\u5de5\u4f5c\u72b6\u6001\u7edf\u8ba1\u529f\u80fd\u3002\n}\n")),(0,l.kt)("h4",{id:"2\u8bbf\u95eeurl"},"2\u3001\u8bbf\u95eeURL"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"curl http://127.0.0.1/status\n\nActive connections:  1\nserver accepts handled requests\n 16 16 18\nReading: 0 Writing: 1 Waiting: 0\n\n# active connections \u2013 \u6d3b\u8dc3\u7684\u8fde\u63a5\u6570\u91cf\n# server accepts handled reque\n")),(0,l.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u8bbf\u95ee/status\u67e5\u770b\u5f53\u524dnginx\u7684\u72b6\u6001\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220706172922752-f43db494.png",alt:"image-20220706172922752"}),"image-20220706172922752"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u72b6\u6001\u7801"),(0,l.kt)("th",{parentName:"tr",align:null},"\u8868\u793a\u7684\u610f\u4e49"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Active connections"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5f53\u524d\u6240\u6709\u5904\u4e8e\u6253\u5f00\u72b6\u6001\u7684\u8fde\u63a5\u6570")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"accepts"),(0,l.kt)("td",{parentName:"tr",align:null},"\u603b\u5171\u5904\u7406\u4e86\u591a\u5c11\u4e2a\u8fde\u63a5")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"handled"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6210\u529f\u521b\u5efa\u591a\u5c11\u63e1\u624b")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"requests"),(0,l.kt)("td",{parentName:"tr",align:null},"\u603b\u5171\u5904\u7406\u4e86\u591a\u5c11\u4e2a\u8bf7\u6c42")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Reading"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8868\u793a\u6b63\u5904\u4e8e\u63a5\u6536\u8bf7\u6c42\u72b6\u6001\u7684\u8fde\u63a5\u6570")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Writing"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8868\u793a\u8bf7\u6c42\u5df2\u7ecf\u63a5\u6536\u5b8c\u6210\uff0c\u4e14\u6b63\u5904\u4e8e\u5904\u7406\u8bf7\u6c42\u6216\u53d1\u9001\u54cd\u5e94\u7684\u8fc7\u7a0b\u4e2d\u7684\u8fde\u63a5\u6570")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Waiting"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5f00\u542fkeep-alive\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2a\u503c\u7b49\u4e8eactive - (reading + writing)\uff0c\u610f\u601d\u5c31\u662fNginx\u5df2\u5904\u7406\u5b8c\u6b63\u5728\u7b49\u5019\u4e0b\u4e00\u6b21\u8bf7\u6c42\u6307\u4ee4\u7684\u9a7b\u7559\u8fde\u63a5")))),(0,l.kt)("h3",{id:"\u4e94\u5176\u5b83nginx\u914d\u7f6e"},"\u4e94\u3001\u5176\u5b83nginx\u914d\u7f6e"),(0,l.kt)("h4",{id:"1\u8bbf\u95ee\u63a7\u5236-allowdeny"},"1\u3001\u8bbf\u95ee\u63a7\u5236 allow/deny"),(0,l.kt)("p",null,"Nginx \u7684\u8bbf\u95ee\u63a7\u5236\u6a21\u5757\u9ed8\u8ba4\u5c31\u4f1a\u5b89\u88c5\uff0c\u800c\u4e14\u5199\u6cd5\u4e5f\u975e\u5e38\u7b80\u5355\uff0c\u53ef\u4ee5\u5206\u522b\u6709\u591a\u4e2aallow,deny\uff0c\u5141\u8bb8\u6216\u7981\u6b62\u67d0\u4e2aip\u6216ip\u6bb5\u8bbf\u95ee\uff0c\u4f9d\u6b21\u6ee1\u8db3\u4efb\u4f55\u4e00\u4e2a\u89c4\u5219\u5c31\u505c\u6b62\u5f80\u4e0b\u5339\u914d\u3002\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"location /status {\n  stub_status on;\n  access_log off;\n  allow 192.168.10.100;\n  allow 172.29.73.0/24;\n  deny all;\n}\n")),(0,l.kt)("h4",{id:"2\u5217\u51fa\u76ee\u5f55-autoindex"},"2\u3001\u5217\u51fa\u76ee\u5f55 autoindex"),(0,l.kt)("p",null,"Nginx\u9ed8\u8ba4\u662f\u4e0d\u5141\u8bb8\u5217\u51fa\u6574\u4e2a\u76ee\u5f55\u7684\u3002\u5982\u9700\u6b64\u529f\u80fd\uff0c\u6253\u5f00nginx.conf\u6587\u4ef6\uff0c\u5728location\uff0cserver \u6216 http\u6bb5\u4e2d\u52a0\u5165\u5982\u4e0b\u53c2\u6570\uff1a\u8fd9\u4e2a\u529f\u80fd\u6211\u4eec\u53ef\u4ee5\u505a\u4e00\u4e2a\u8d44\u6e90\u4e0b\u8f7d\u7ad9\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"location ^~ /file {\n    root   /data/www;\n    autoindex on;\n    autoindex_exact_size off;\n    autoindex_localtime on;\n    charset utf-8,gbk;\n}\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"autoindex on;"),"\u8fd0\u884c\u5217\u51fa\u76ee\u5f55\u5185\u5bb9\u3002\u53e6\u5916\u4e24\u4e2a\u53c2\u6570\u6700\u597d\u4e5f\u52a0\u4e0a\u53bb\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"autoindex_exact_size off;")," \u9ed8\u8ba4\u4e3aon\uff0c\u663e\u793a\u51fa\u6587\u4ef6\u7684\u786e\u5207\u5927\u5c0f\uff0c\u5355\u4f4d\u662fbytes\u3002\u6539\u4e3aoff\u540e\uff0c\u663e\u793a\u51fa\u6587\u4ef6\u7684\u5927\u6982\u5927\u5c0f\uff0c\u5355\u4f4d\u662fkB\u6216\u8005MB\u6216\u8005GB\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"autoindex_localtime on;")," \u9ed8\u8ba4\u4e3aoff\uff0c\u663e\u793a\u7684\u6587\u4ef6\u65f6\u95f4\u4e3aGMT\u65f6\u95f4\u3002\u6539\u4e3aon\u540e\uff0c\u663e\u793a\u7684\u6587\u4ef6\u65f6\u95f4\u4e3a\u6587\u4ef6\u7684\u670d\u52a1\u5668\u65f6\u95f4\u3002")))}m.isMDXComponent=!0}}]);