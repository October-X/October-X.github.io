"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8752],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>g});var a=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var i=a.createContext({}),s=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},u=function(e){var n=s(e.components);return a.createElement(i.Provider,{value:n},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,l=e.originalType,i=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),m=s(t),d=o,g=m["".concat(i,".").concat(d)]||m[d]||c[d]||l;return t?a.createElement(g,r(r({ref:n},u),{},{components:t})):a.createElement(g,r({ref:n},u))}));function g(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var l=t.length,r=new Array(l);r[0]=d;var p={};for(var i in n)hasOwnProperty.call(n,i)&&(p[i]=n[i]);p.originalType=e,p[m]="string"==typeof e?e:o,r[1]=p;for(var s=2;s<l;s++)r[s]=t[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},6881:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>r,default:()=>m,frontMatter:()=>l,metadata:()=>p,toc:()=>s});var a=t(7462),o=(t(7294),t(3905));const l={},r="\u5e38\u7528Composition API",p={unversionedId:"vue3/\u5e38\u7528 Composition API",id:"vue3/\u5e38\u7528 Composition API",title:"\u5e38\u7528Composition API",description:"1.\u62c9\u5f00\u5e8f\u5e55\u7684setup",source:"@site/docs/vue3/3.\u5e38\u7528 Composition API.md",sourceDirName:"vue3",slug:"/vue3/\u5e38\u7528 Composition API",permalink:"/docs/vue3/\u5e38\u7528 Composition API",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/vue3/3.\u5e38\u7528 Composition API.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{},sidebar:"vue3",previous:{title:"Composition API\u7684\u4f18\u52bf",permalink:"/docs/vue3/Composition API\u7684\u4f18\u52bf"},next:{title:"\u5176\u4ed6Composition API",permalink:"/docs/vue3/\u5176\u4ed6Composition API"}},i={},s=[{value:"1.\u62c9\u5f00\u5e8f\u5e55\u7684setup",id:"1\u62c9\u5f00\u5e8f\u5e55\u7684setup",level:2},{value:"2.ref\u51fd\u6570",id:"2ref\u51fd\u6570",level:2},{value:"3.reactive\u51fd\u6570",id:"3reactive\u51fd\u6570",level:2},{value:"4.Vue3.0\u4e2d\u7684\u54cd\u5e94\u5f0f\u539f\u7406",id:"4vue30\u4e2d\u7684\u54cd\u5e94\u5f0f\u539f\u7406",level:2},{value:"vue2.x\u7684\u54cd\u5e94\u5f0f",id:"vue2x\u7684\u54cd\u5e94\u5f0f",level:3},{value:"Vue3.0\u7684\u54cd\u5e94\u5f0f",id:"vue30\u7684\u54cd\u5e94\u5f0f",level:3},{value:"5.reactive\u5bf9\u6bd4ref",id:"5reactive\u5bf9\u6bd4ref",level:2},{value:"6.setup\u7684\u4e24\u4e2a\u6ce8\u610f\u70b9",id:"6setup\u7684\u4e24\u4e2a\u6ce8\u610f\u70b9",level:2},{value:"7.\u8ba1\u7b97\u5c5e\u6027\u4e0e\u76d1\u89c6",id:"7\u8ba1\u7b97\u5c5e\u6027\u4e0e\u76d1\u89c6",level:2},{value:"1.computed\u51fd\u6570",id:"1computed\u51fd\u6570",level:3},{value:"2.watch\u51fd\u6570",id:"2watch\u51fd\u6570",level:3},{value:"\u5173\u4e8evalue\u7684\u95ee\u9898",id:"\u5173\u4e8evalue\u7684\u95ee\u9898",level:5},{value:"3.watchEffect\u51fd\u6570",id:"3watcheffect\u51fd\u6570",level:3},{value:"8.\u751f\u547d\u5468\u671f",id:"8\u751f\u547d\u5468\u671f",level:2},{value:"9.\u81ea\u5b9a\u4e49hook\u51fd\u6570",id:"9\u81ea\u5b9a\u4e49hook\u51fd\u6570",level:2},{value:"10.toRef",id:"10toref",level:2},{value:"11.toRefs",id:"11torefs",level:2}],u={toc:s};function m(e){let{components:n,...t}=e;return(0,o.kt)("wrapper",(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"\u5e38\u7528composition-api"},"\u5e38\u7528Composition API"),(0,o.kt)("h1",{id:"\u521d\u8bc6setup"},"\u521d\u8bc6setup"),(0,o.kt)("h2",{id:"1\u62c9\u5f00\u5e8f\u5e55\u7684setup"},"1.\u62c9\u5f00\u5e8f\u5e55\u7684setup"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"\u7406\u89e3\uff1aVue3.0\u4e2d\u4e00\u4e2a\u65b0\u7684\u914d\u7f6e\u9879\uff0c\u503c\u4e3a\u4e00\u4e2a\u51fd\u6570\u3002"),(0,o.kt)("li",{parentName:"ol"},"setup\u662f\u6240\u6709",(0,o.kt)("strong",{parentName:"li"},"Composition API\uff08\u7ec4\u5408\u5f0fAPI\uff09"),"\u201c \u8868\u6f14\u7684\u821e\u53f0 \u201d\u3002"),(0,o.kt)("li",{parentName:"ol"},"\u7ec4\u4ef6\u4e2d\u6240\u7528\u5230\u7684\uff1a\u6570\u636e\u3001\u65b9\u6cd5\u7b49\u7b49\uff0c\u5747\u8981\u914d\u7f6e\u5728setup\u4e2d\u3002"),(0,o.kt)("li",{parentName:"ol"},"setup\u51fd\u6570\u7684\u4e24\u79cd\u8fd4\u56de\u503c\uff1a ",(0,o.kt)("ol",{parentName:"li"},(0,o.kt)("li",{parentName:"ol"},"\u82e5\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5219\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\u3001\u65b9\u6cd5, \u5728\u6a21\u677f\u4e2d\u5747\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u3002\uff08\u91cd\u70b9\u5173\u6ce8\uff01\uff09"),(0,o.kt)("li",{parentName:"ol"},"\u82e5\u8fd4\u56de\u4e00\u4e2a\u6e32\u67d3\u51fd\u6570\uff1a\u5219\u53ef\u4ee5\u81ea\u5b9a\u4e49\u6e32\u67d3\u5185\u5bb9\u3002\uff08\u4e86\u89e3\uff09"))),(0,o.kt)("li",{parentName:"ol"},"\u6ce8\u610f\u70b9\uff1a ",(0,o.kt)("ol",{parentName:"li"},(0,o.kt)("li",{parentName:"ol"},"\u5c3d\u91cf\u4e0d\u8981\u4e0eVue2.x\u914d\u7f6e\u6df7\u7528 ",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Vue2.x\u914d\u7f6e\uff08data\u3001methos\u3001computed...\uff09\u4e2d",(0,o.kt)("strong",{parentName:"li"},"\u53ef\u4ee5\u8bbf\u95ee\u5230"),"setup\u4e2d\u7684\u5c5e\u6027\u3001\u65b9\u6cd5\u3002"),(0,o.kt)("li",{parentName:"ul"},"\u4f46\u5728setup\u4e2d",(0,o.kt)("strong",{parentName:"li"},"\u4e0d\u80fd\u8bbf\u95ee\u5230"),"Vue2.x\u914d\u7f6e\uff08data\u3001methos\u3001computed...\uff09\u3002"),(0,o.kt)("li",{parentName:"ul"},"\u5982\u679c\u6709\u91cd\u540d, setup\u4f18\u5148\u3002"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"setup"),"\u4e0d\u80fd\u662f\u4e00\u4e2a",(0,o.kt)("inlineCode",{parentName:"li"},"async"),"\u51fd\u6570\uff0c\u56e0\u4e3a\u8fd4\u56de\u503c\u4e0d\u518d\u662f",(0,o.kt)("inlineCode",{parentName:"li"},"return"),"\u7684\u5bf9\u8c61, \u800c\u662f",(0,o.kt)("inlineCode",{parentName:"li"},"promise"),", \u6a21\u677f\u770b\u4e0d\u5230",(0,o.kt)("inlineCode",{parentName:"li"},"return"),"\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\u3002\uff08\u540e\u671f\u4e5f\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2a",(0,o.kt)("inlineCode",{parentName:"li"},"Promise"),"\u5b9e\u4f8b\uff0c\u4f46\u9700\u8981",(0,o.kt)("inlineCode",{parentName:"li"},"Suspense"),"\u548c\u5f02\u6b65\u7ec4\u4ef6\u7684\u914d\u5408\uff09")))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  \x3c!--vue3\u7684\u7ec4\u4ef6\u6a21\u7248\u7ed3\u6784\u53ef\u4ee5\u6ca1\u6709\u6839\u6807\u7b7e--\x3e\n  <h1>\u6211\u662fapp\u7ec4\u4ef6</h1>\n  <h1>\u6211\u53eb{{ name }}, {{ age }}\u5c81</h1>\n  <button @click=\"sayHello\">hello!!</button>\n  <h3>msg: {{ vue2 }}</h3>\n  <p>\u6570\u636e\u51b2\u7a81\u8be5\u600e\u4e48\u529e\uff1f{{ a }}</p>\n  <button @click=\"test1\">\u6d4b\u8bd5\u4e00\u4e0b\u5728vue2\u4e2d\u53bb\u8bfb\u53d6vue3\u7684\u914d\u7f6e</button>\n  <button @click=\"test2\">\u6d4b\u8bd5\u4e00\u4e0b\u5728vue3\u7684setup\u4e2d\u53bb\u8bfb\u53d6vue2\u7684\u914d\u7f6e</button>\n</template>\n\n<script>\n// import { h } from 'vue';\nexport default {\n  name: 'App',\n  //\u6b64\u5904\u53ea\u662f\u6d4b\u8bd5setup\uff0c\u6682\u65f6\u5148\u4e0d\u8003\u8651\u54cd\u5e94\u5f0f\u7684\u95ee\u9898\n  //\u6d4b\u8bd5\u4f7f\u7528vue2\u7684\u5185\u5bb9\n  data(){\n    return {\n      vue2: 'still can use vue2 in vue3 code',\n      a:1\n    }\n  },\n  methods:{\n    //vue2\u914d\u7f6e\u65b9\u6cd5\u7684\u65b9\u5f0f\n    test1(){\n      console.log(this.vue2);\n      console.log(this.name);\n      console.log(this.sayHello);\n      this.sayHello();\n    }\n  },\n  setup(){\n    //\u8868\u6f14\u7684\u821e\u53f0\n    //\u51c6\u5907\u6570\u636e data\n    //\u8fd9\u6837\u5b9a\u4e49\u7684\u6570\u636evue\u662f\u76d1\u6d4b\u4e0d\u5230\u7684\uff0c\u540e\u9762\u4f1a\u8bb2\u5230\u8981\u4f7f\u7528ref\n    let name = 'py';\n    let age = 21;\n    let a = 300;\n\n    //\u65b9\u6cd5 methods\n    function sayHello(){\n      alert(`My name is ${name}, ${age} ${age === 1  ? 'year' : 'years'} old`);\n    }\n\n\n    //\u5728vue3\u7684\u914d\u7f6e\u91cc\u53bb\u8bfb\u53d6vue2\u7684\u5c5e\u6027\n    function test2(){\n      console.log(name);\n      console.log(age);\n      console.log(sayHello);\n      console.log(this.vue2);\n      console.log(this.test1);\n    }\n\n\n    //\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\n    return {\n      name,\n      age,\n      sayHello,\n      test2,\n      a\n    }\n\n    //\u8fd4\u56de\u4e00\u4e2a\u6e32\u67d3\u51fd\u6570\n    //\u8fd9\u662f\u76f4\u63a5\u5c06\u4f60\u5728\u8fd9\u91cc\u6e32\u67d3\u7684\u4e1c\u897f\u66ff\u6362\u5230template\u4e2d\n    // return () => h('h1', 'hello');\n  }\n}\n<\/script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n\n")),(0,o.kt)("h2",{id:"2ref\u51fd\u6570"},"2.ref\u51fd\u6570"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u4f5c\u7528: \u5b9a\u4e49\u4e00\u4e2a\u54cd\u5e94\u5f0f\u7684\u6570\u636e"),(0,o.kt)("li",{parentName:"ul"},"\u8bed\u6cd5: ",(0,o.kt)("inlineCode",{parentName:"li"},"const xxx = ref(initValue)")," ",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u54cd\u5e94\u5f0f\u6570\u636e\u7684",(0,o.kt)("strong",{parentName:"li"},"\u5f15\u7528\u5bf9\u8c61\uff08reference\u5bf9\u8c61\uff0c\u7b80\u79f0ref\u5bf9\u8c61\uff09"),"\u3002"),(0,o.kt)("li",{parentName:"ul"},"JS\u4e2d\u64cd\u4f5c\u6570\u636e\uff1a ",(0,o.kt)("inlineCode",{parentName:"li"},"xxx.value")),(0,o.kt)("li",{parentName:"ul"},"\u6a21\u677f\u4e2d\u8bfb\u53d6\u6570\u636e: \u4e0d\u9700\u8981.value\uff0c\u76f4\u63a5\uff1a",(0,o.kt)("inlineCode",{parentName:"li"},"<div>{{xxx}}</div>")))),(0,o.kt)("li",{parentName:"ul"},"\u5907\u6ce8\uff1a ",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"\u63a5\u6536\u7684\u6570\u636e\u53ef\u4ee5\u662f\uff1a\u57fa\u672c\u7c7b\u578b\u3001\u4e5f\u53ef\u4ee5\u662f\u5bf9\u8c61\u7c7b\u578b\u3002"),(0,o.kt)("li",{parentName:"ul"},"\u57fa\u672c\u7c7b\u578b\u7684\u6570\u636e\uff1a\u54cd\u5e94\u5f0f\u4f9d\u7136\u662f\u9760",(0,o.kt)("inlineCode",{parentName:"li"},"Object.defineProperty()"),"\u7684",(0,o.kt)("inlineCode",{parentName:"li"},"get"),"\u4e0e",(0,o.kt)("inlineCode",{parentName:"li"},"set"),"\u5b8c\u6210\u7684\u3002"),(0,o.kt)("li",{parentName:"ul"},"\u5bf9\u8c61\u7c7b\u578b\u7684\u6570\u636e\uff1a\u5185\u90e8 \u201c \u6c42\u52a9 \u201d \u4e86Vue3.0\u4e2d\u7684\u4e00\u4e2a\u65b0\u51fd\u6570\u2014\u2014 ",(0,o.kt)("inlineCode",{parentName:"li"},"reactive"),"\u51fd\u6570\u3002")))),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221206200153952.png",alt:"image-20221206200153952"}),"\n",(0,o.kt)("inlineCode",{parentName:"p"},"RefImp"),"\u5c31\u662f",(0,o.kt)("inlineCode",{parentName:"p"},"reference\uff08\u5f15\u7528\uff09"),"\u548c",(0,o.kt)("inlineCode",{parentName:"p"},"implement\uff08\u5b9e\u73b0\uff09"),"\u3002\u5c31\u662f",(0,o.kt)("strong",{parentName:"p"},"\u5f15\u7528\u5b9e\u73b0\u5bf9\u8c61"),"\n",(0,o.kt)("img",{parentName:"p",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221206200202252.png",alt:"image-20221206200202252"})),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  \x3c!--vue3\u7684\u7ec4\u4ef6\u6a21\u7248\u7ed3\u6784\u53ef\u4ee5\u6ca1\u6709\u6839\u6807\u7b7e--\x3e\n  \x3c!--\u8fd9\u8fb9\u4e0d\u8981\u52a0\u4e0a.value\uff0c\u540e\u9762\u89e3\u6790\u4f1a\u81ea\u52a8\u52a0\u4e0a\u53bb--\x3e\n  <h1>\u6211\u662fapp\u7ec4\u4ef6</h1>\n  <h1>\u6211\u53eb{{ name }}, {{ age }}\u5c81</h1>\n  <h3>\u804c\u4f4d:{{ job.type }}</h3>\n  <h3>\u85aa\u6c34:{{ job.salary }}</h3>\n  <button @click=\"changeInfo\">\u4fee\u6539\u4eba\u7684\u4fe1\u606f</button>\n</template>\n\n<script>\nimport { ref } from 'vue';\nexport default {\n  name: 'App',\n  setup(){\n    //\u8868\u6f14\u7684\u821e\u53f0(setup)\n    //\u51c6\u5907\u6570\u636e data\n    //ref\u5b9e\u73b0\u54cd\u5e94\u5f0f(\u57fa\u672c\u7c7b\u578b)\u4e5f\u662f\u91c7\u7528Object.definedProperty()\u6765\u5b9e\u73b0\u7684 getter\u548csetter\n    let name = ref('py'); //ref\u5f15\u7528\u5bf9\u8c61\n    let age = ref(21);\n    //ref\u5b9e\u73b0\u54cd\u5e94\u5f0f(\u5bf9\u8c61\u7c7b\u578b)\u4e5f\u662f\u91c7\u7528Proxy\u6765\u5b9e\u73b0\n    let job = ref({\n      type: 'frontend developer',\n      salary: '30'\n    });\n\n    function changeInfo(){\n      name.value = '\u674e\u56db';\n      age.value = 42;\n      job.value.type = 'UI developer';\n      console.log(name, age); //\u4e0d\u662f\u54cd\u5e94\u5f0f\u7684\n    }\n\n    //\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\n    return {\n      name,\n      age,\n      job,\n      changeInfo\n    }\n  }\n}\n<\/script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n\n")),(0,o.kt)("p",null,"\u4ee5\u4e0a\u4ee3\u7801\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"job.value"),"\u8f93\u51fa\uff1a\n",(0,o.kt)("img",{parentName:"p",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221206200304477.png",alt:"image-20221206200304477"}),"\n",(0,o.kt)("strong",{parentName:"p"},"\u5c0f\u7ed3\uff1a"),"\n",(0,o.kt)("inlineCode",{parentName:"p"},"RefImpl"),"\u5bf9\u4e8e",(0,o.kt)("strong",{parentName:"p"},"\u57fa\u672c\u6570\u636e\u7c7b\u578b"),"\u7684\u6570\u636e\u662f\u4f7f\u7528",(0,o.kt)("inlineCode",{parentName:"p"},"defineProperty"),"\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"set"),"\uff0c",(0,o.kt)("inlineCode",{parentName:"p"},"get"),"\u8fdb\u884c\u6570\u636e\u52ab\u6301\u3002\u5bf9\u4e8e",(0,o.kt)("strong",{parentName:"p"},"\u5bf9\u8c61\u7c7b\u578b"),"\u7684\u6570\u636e\u662f\u4f7f\u7528es6\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"proxy"),"\u3002\u5185\u90e8 \u201c \u6c42\u52a9 \u201d \u4e86Vue3.0\u4e2d\u7684\u4e00\u4e2a\u65b0\u51fd\u6570\u2014\u2014 ",(0,o.kt)("inlineCode",{parentName:"p"},"reactive"),"\u51fd\u6570\u3002",(0,o.kt)("inlineCode",{parentName:"p"},"reactive"),"\u51fd\u6570\u6709proxy\u7684\u76f8\u5173\u64cd\u4f5c"),(0,o.kt)("h2",{id:"3reactive\u51fd\u6570"},"3.reactive\u51fd\u6570"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u4f5c\u7528: \u5b9a\u4e49\u4e00\u4e2a",(0,o.kt)("strong",{parentName:"li"},"\u5bf9\u8c61\u7c7b\u578b"),"\u7684\u54cd\u5e94\u5f0f\u6570\u636e\uff08\u57fa\u672c\u7c7b\u578b\u4e0d\u8981\u7528\u5b83\uff0c\u8981\u7528",(0,o.kt)("inlineCode",{parentName:"li"},"ref"),"\u51fd\u6570\uff09"),(0,o.kt)("li",{parentName:"ul"},"\u8bed\u6cd5\uff1a",(0,o.kt)("inlineCode",{parentName:"li"},"const \u4ee3\u7406\u5bf9\u8c61= reactive(\u6e90\u5bf9\u8c61)"),"\u63a5\u6536\u4e00\u4e2a\u5bf9\u8c61\uff08\u6216\u6570\u7ec4\uff09\uff0c\u8fd4\u56de\u4e00\u4e2a",(0,o.kt)("strong",{parentName:"li"},"\u4ee3\u7406\u5bf9\u8c61\uff08Proxy\u7684\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u7b80\u79f0proxy\u5bf9\u8c61\uff09")),(0,o.kt)("li",{parentName:"ul"},"reactive\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\u662f\u201c\u6df1\u5c42\u6b21\u7684\u201d\u3002"),(0,o.kt)("li",{parentName:"ul"},"\u5185\u90e8\u57fa\u4e8e ES6 \u7684 Proxy \u5b9e\u73b0\uff0c\u901a\u8fc7\u4ee3\u7406\u5bf9\u8c61\u64cd\u4f5c\u6e90\u5bf9\u8c61\u5185\u90e8\u6570\u636e\u8fdb\u884c\u64cd\u4f5c\u3002")),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221206200320448.png",alt:"image-20221206200320448"})),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  \x3c!--vue3\u7684\u7ec4\u4ef6\u6a21\u7248\u7ed3\u6784\u53ef\u4ee5\u6ca1\u6709\u6839\u6807\u7b7e--\x3e\n  <h1>\u6211\u662fapp\u7ec4\u4ef6</h1>\n  <h1>\u6211\u53eb{{ person.name }}, {{ person.age }}\u5c81</h1>\n  <h3>\u804c\u4f4d:{{ person.type }}</h3>\n  <h3>\u85aa\u6c34:{{ person.salary }}</h3>\n  <h3>\u7231\u597d:{{ person.hobbies }}</h3>\n  <h4>\u6d4b\u8bd5\u7684\u6570\u636ec:{{ person.a.b.c }}</h4>\n  <button @click=\"changeInfo\">\u4fee\u6539\u4eba\u7684\u4fe1\u606f</button>\n</template>\n\n<script>\nimport { reactive } from 'vue';\nexport default {\n  name: 'App',\n  setup(){\n    //\u8868\u6f14\u7684\u821e\u53f0(setup)\n    //\u51c6\u5907\u6570\u636e data\n    //ref\u5b9e\u73b0\u54cd\u5e94\u5f0f(\u57fa\u672c\u7c7b\u578b)\u4e5f\u662f\u91c7\u7528Object.definedProperty()\u6765\u5b9e\u73b0\u7684 getter\u548csetter\n    // let name = ref('py'); //ref\u5f15\u7528\u5bf9\u8c61(RefImpl)\u5b9e\u4f8b\n    // let age = ref(21);\n    //ref\u5b9e\u73b0\u54cd\u5e94\u5f0f(\u5bf9\u8c61\u7c7b\u578b)\u4e5f\u662f\u91c7\u7528Proxy\u6765\u5b9e\u73b0(proxy) \u8fd9\u91cc\u5982\u679c\u5c31\u7b97\u662f\u7528ref\u4e5f\u662f\u501f\u52a9\u4e86reactive\n    let person = reactive({\n      name: 'py',\n      age: 21,\n      type: 'frontend developer',\n      salary: '30',\n      hobbies: ['\u62bd\u70df', '\u559d\u9152', '\u70eb\u5934'],\n      a:{\n        b:{\n          c: 666\n        }\n      }\n    });\n\n\n    function changeInfo(){\n      person.name = '\u674e\u56db';\n      person.age = 42;\n      // job.value.type = 'xxx'\n      person.type = 'UI developer';\n      //\u6d4b\u8bd5reactive\u80fd\u5426\u76d1\u6d4b\u6df1\u5c42\u6b21\u53d8\u5316\n      person.a.b.c = 100;\n      person.hobbies[0] = 'play tennis';\n      // console.log(name, age); //\u4e0d\u662f\u54cd\u5e94\u5f0f\u7684\n    }\n\n    //\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\n    return {\n      person,\n      changeInfo\n    }\n  }\n}\n<\/script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n\n")),(0,o.kt)("h2",{id:"4vue30\u4e2d\u7684\u54cd\u5e94\u5f0f\u539f\u7406"},"4.Vue3.0\u4e2d\u7684\u54cd\u5e94\u5f0f\u539f\u7406"),(0,o.kt)("h3",{id:"vue2x\u7684\u54cd\u5e94\u5f0f"},"vue2.x\u7684\u54cd\u5e94\u5f0f"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u5b9e\u73b0\u539f\u7406\uff1a ",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"\u5bf9\u8c61\u7c7b\u578b\uff1a\u901a\u8fc7",(0,o.kt)("inlineCode",{parentName:"li"},"Object.defineProperty()"),"\u5bf9\u5c5e\u6027\u7684\u8bfb\u53d6\u3001\u4fee\u6539\u8fdb\u884c\u62e6\u622a\uff08\u6570\u636e\u52ab\u6301\uff09\u3002 "),(0,o.kt)("li",{parentName:"ul"},"\u6570\u7ec4\u7c7b\u578b\uff1a\u901a\u8fc7\u91cd\u5199\u66f4\u65b0\u6570\u7ec4\u7684\u4e00\u7cfb\u5217\u65b9\u6cd5\u6765\u5b9e\u73b0\u62e6\u622a\u3002\uff08\u5bf9\u6570\u7ec4\u7684\u53d8\u66f4\u65b9\u6cd5\u8fdb\u884c\u4e86\u5305\u88f9\uff09\u3002 ")))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"Object.defineProperty(data, 'count', {\n    get () {}, \n    set () {}\n})\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u5b58\u5728\u95ee\u9898\uff1a ",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"\u65b0\u589e\u5c5e\u6027\u3001\u5220\u9664\u5c5e\u6027, \u754c\u9762\u4e0d\u4f1a\u66f4\u65b0\u3002"),(0,o.kt)("li",{parentName:"ul"},"\u76f4\u63a5\u901a\u8fc7\u4e0b\u6807\u4fee\u6539\u6570\u7ec4, \u754c\u9762\u4e0d\u4f1a\u81ea\u52a8\u66f4\u65b0\u3002")))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\u590d\u4e60\u4e00\u4e0b\u5f53\u65f6\u7684\u89e3\u51b3\u65b9\u6cd5\uff1a")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n\n</template>\n\n<script>\nimport Vue from 'vue'\nexport default {\n    data() {\n        return {\n            person: {\n                name: '\u5f20\u4e09',\n                age: 18,\n                hobby: ['\u5b66\u4e60', '\u8dd1\u6b65']\n            }\n        }\n    },\n    methods: {\n        addSex() {\n            this.$set(this.person, 'sex', '\u7537')\n            // Vue.set(this.person,'sex','\u7537')\n        },\n        deleteName() {\n            this.$delete(this.person, 'name')\n            //Vue.delete(this.person,'name')\n        },\n        changeRun() {\n            // this.$set(this.person.hobby,0,'\u901b\u8857')\n            //\u56e0\u4e3a\u91cd\u5199\u4e86\u6570\u7ec4\u7684\u4e00\u4e9b\u53d8\u66f4\u65b9\u6cd5\uff0c\u6240\u4ee5\u4f7f\u7528splice\u662f\u53ef\u4ee5\u88ab\u76d1\u6d4b\u5230\u7684\n            this.person.hobby.splice(0, 1, '\u901b\u8857')\n        }\n    }\n}\n<\/script>\n\n<style>\n</style>\n")),(0,o.kt)("h3",{id:"vue30\u7684\u54cd\u5e94\u5f0f"},"Vue3.0\u7684\u54cd\u5e94\u5f0f"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u5b9e\u73b0\u539f\u7406: ",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"\u901a\u8fc7Proxy\uff08\u4ee3\u7406\uff09: \xa0\u62e6\u622a\u5bf9\u8c61\u4e2d\u4efb\u610f\u5c5e\u6027\u7684\u53d8\u5316, \u5305\u62ec\uff1a\u5c5e\u6027\u503c\u7684\u8bfb\u5199\u3001\u5c5e\u6027\u7684\u6dfb\u52a0\u3001\u5c5e\u6027\u7684\u5220\u9664\u7b49\u3002"),(0,o.kt)("li",{parentName:"ul"},"\u901a\u8fc7Reflect\uff08\u53cd\u5c04\uff09: \xa0\u5bf9\u6e90\u5bf9\u8c61\u7684\u5c5e\u6027\u8fdb\u884c\u64cd\u4f5c\u3002"),(0,o.kt)("li",{parentName:"ul"},"MDN\u6587\u6863\u4e2d\u63cf\u8ff0\u7684Proxy\u4e0eReflect\uff1a ",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Proxy\uff1a",(0,o.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy"},"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy")," "),(0,o.kt)("li",{parentName:"ul"},"Reflect\uff1a",(0,o.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect"},"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect")," ")))))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"new Proxy(data, {\n    // \u62e6\u622a\u8bfb\u53d6\u5c5e\u6027\u503c\n    get (target, prop) {\n        return Reflect.get(target, prop)\n    },\n    // \u62e6\u622a\u8bbe\u7f6e\u5c5e\u6027\u503c\u6216\u6dfb\u52a0\u65b0\u5c5e\u6027\n    set (target, prop, value) {\n        return Reflect.set(target, prop, value)\n    },\n    // \u62e6\u622a\u5220\u9664\u5c5e\u6027\n    deleteProperty (target, prop) {\n        return Reflect.deleteProperty(target, prop)\n    }\n})\n\nproxy.name = 'tom'\n")),(0,o.kt)("p",null,"\u6a21\u62df\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},"<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>v3\u54cd\u5e94\u5f0f</title>\n  </head>\n  <body>\n    <script type=\"text/javascript\">\n      let person = {\n        name: '\u5f20\u4e09',\n        age: 18\n      };\n      \n      //#region //\u53ef\u4ee5\u7528\u6765\u6298\u53e0\n      //\u6a21\u62dfvue2\u4e2d\u7684\u54cd\u5e94\u5f0f\n      // let p = {};\n      // Object.defineProperty(p, 'name', {\n      //     get(){\n      //         //\u6709\u4eba\u8bfb\u53d6name\u65f6\u8c03\u7528\n      //         return person.name;\n      //     },\n      //     set(value){\n      //         //\u6709\u4eba\u4fee\u6539name\u65f6\u8c03\u7528\n      //         console.log('name changed, must change the page');\n      //         person.name = value;\n      //     }\n      // })\n      //\n      // Object.defineProperty(p, 'age', {\n      //     configurable: true,//\u53ef\u914d\u7f6e\uff0c\u4f46\u662fvue2\u662f\u65e0\u6cd5\u6355\u83b7\u5230\u914d\u7f6e\u88ab\u4fee\u6539\u7684\uff0c\u6bd4\u5982\u5220\u9664\n      //     get(){\n      //         //get age\n      //         return person.age;\n      //     },\n      //     set(value){\n      //         //set age\n      //         console.log('age changed, must change the page');\n      //         person.age = value;\n      //     }\n      // })\n      //#endregion\n      \n      //vue3\u7684\u54cd\u5e94\u5f0f\n      const p = new Proxy(person,{\n        //\u8bfb\u53d6\n        get(target, propName){\n          //person ==> target\n          console.log('\u8bfb\u53d6');\n          return Reflect.get(target,propName);\n        },\n        set(target, propName, value) {\n          // \u4fee\u6539\u548c\u589e\u52a0\u5c5e\u6027\u90fd\u8c03\u7528\n          console.log('\u4fee\u6539');\n          Reflect.set(target, propName, value);\n        },\n        //\u5220\u9664\n        deleteProperty(target, propName) {\n          console.log(`\u5220\u9664`);\n          return Reflect.deleteProperty(target, propName);\n        }\n      });\n      \n      // let obj = {\n      //     a:1,\n      //     b:2\n      // }\n      //\n      // const x1 = Reflect.defineProperty(obj, 'c',{\n      //     get(){\n      //         return 3;\n      //     }\n      // });\n      // console.log(x1); //true \u6210\n      // const x2 = Reflect.defineProperty(obj, 'c',{\n      //     get(){\n      //         return 4;\n      //     }\n      // });\n      // if(x2){\n      //     console.log(x2); //false \u5426\n      // }\n      // Reflect.get(obj,'a');\n    <\/script>\n  </body>\n</html>\n\n")),(0,o.kt)("h2",{id:"5reactive\u5bf9\u6bd4ref"},"5.reactive\u5bf9\u6bd4ref"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u4ece\u5b9a\u4e49\u6570\u636e\u89d2\u5ea6\u5bf9\u6bd4\uff1a ",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"ref\u7528\u6765\u5b9a\u4e49\uff1a",(0,o.kt)("strong",{parentName:"li"},"\u57fa\u672c\u7c7b\u578b\u6570\u636e"),"\u3002"),(0,o.kt)("li",{parentName:"ul"},"reactive\u7528\u6765\u5b9a\u4e49\uff1a",(0,o.kt)("strong",{parentName:"li"},"\u5bf9\u8c61\uff08\u6216\u6570\u7ec4\uff09\u7c7b\u578b\u6570\u636e"),"\u3002"),(0,o.kt)("li",{parentName:"ul"},"\u5907\u6ce8\uff1aref\u4e5f\u53ef\u4ee5\u7528\u6765\u5b9a\u4e49",(0,o.kt)("strong",{parentName:"li"},"\u5bf9\u8c61\uff08\u6216\u6570\u7ec4\uff09\u7c7b\u578b\u6570\u636e"),", \u5b83\u5185\u90e8\u4f1a\u81ea\u52a8\u901a\u8fc7",(0,o.kt)("inlineCode",{parentName:"li"},"reactive"),"\u8f6c\u4e3a",(0,o.kt)("strong",{parentName:"li"},"\u4ee3\u7406\u5bf9\u8c61"),"\u3002"))),(0,o.kt)("li",{parentName:"ul"},"\u4ece\u539f\u7406\u89d2\u5ea6\u5bf9\u6bd4\uff1a ",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"ref\u901a\u8fc7",(0,o.kt)("inlineCode",{parentName:"li"},"Object.defineProperty()"),"\u7684",(0,o.kt)("inlineCode",{parentName:"li"},"get"),"\u4e0e",(0,o.kt)("inlineCode",{parentName:"li"},"set"),"\u6765\u5b9e\u73b0\u54cd\u5e94\u5f0f\uff08\u6570\u636e\u52ab\u6301\uff09\u3002"),(0,o.kt)("li",{parentName:"ul"},"reactive\u901a\u8fc7\u4f7f\u7528",(0,o.kt)("strong",{parentName:"li"},"Proxy"),"\u6765\u5b9e\u73b0\u54cd\u5e94\u5f0f\uff08\u6570\u636e\u52ab\u6301\uff09, \u5e76\u901a\u8fc7",(0,o.kt)("strong",{parentName:"li"},"Reflect"),"\u64cd\u4f5c",(0,o.kt)("strong",{parentName:"li"},"\u6e90\u5bf9\u8c61"),"\u5185\u90e8\u7684\u6570\u636e\u3002"))),(0,o.kt)("li",{parentName:"ul"},"\u4ece\u4f7f\u7528\u89d2\u5ea6\u5bf9\u6bd4\uff1a ",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"ref\u5b9a\u4e49\u7684\u6570\u636e\uff1a\u64cd\u4f5c\u6570\u636e",(0,o.kt)("strong",{parentName:"li"},"\u9700\u8981"),(0,o.kt)("inlineCode",{parentName:"li"},".value"),"\uff0c\u8bfb\u53d6\u6570\u636e\u65f6\u6a21\u677f\u4e2d\u76f4\u63a5\u8bfb\u53d6",(0,o.kt)("strong",{parentName:"li"},"\u4e0d\u9700\u8981"),(0,o.kt)("inlineCode",{parentName:"li"},".value"),"\u3002"),(0,o.kt)("li",{parentName:"ul"},"reactive\u5b9a\u4e49\u7684\u6570\u636e\uff1a\u64cd\u4f5c\u6570\u636e\u4e0e\u8bfb\u53d6\u6570\u636e\uff1a",(0,o.kt)("strong",{parentName:"li"},"\u5747\u4e0d\u9700\u8981"),(0,o.kt)("inlineCode",{parentName:"li"},".value"),"\u3002")))),(0,o.kt)("h2",{id:"6setup\u7684\u4e24\u4e2a\u6ce8\u610f\u70b9"},"6.setup\u7684\u4e24\u4e2a\u6ce8\u610f\u70b9"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"setup\u6267\u884c\u7684\u65f6\u673a ",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"\u5728beforeCreate\u4e4b\u524d\u6267\u884c\u4e00\u6b21\uff0cthis\u662fundefined\u3002"))),(0,o.kt)("li",{parentName:"ul"},"setup\u7684\u53c2\u6570 ",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"props\uff1a\u503c\u4e3a\u5bf9\u8c61\uff0c\u5305\u542b\uff1a\u7ec4\u4ef6\u5916\u90e8\u4f20\u9012\u8fc7\u6765\uff0c\u4e14\u7ec4\u4ef6\u5185\u90e8\u58f0\u660e\u63a5\u6536\u4e86\u7684\u5c5e\u6027\u3002"),(0,o.kt)("li",{parentName:"ul"},"context\uff1a\u4e0a\u4e0b\u6587\u5bf9\u8c61 ",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"attrs: \u503c\u4e3a\u5bf9\u8c61\uff0c\u5305\u542b\uff1a\u7ec4\u4ef6\u5916\u90e8\u4f20\u9012\u8fc7\u6765\uff0c\u4f46\u6ca1\u6709\u5728props\u914d\u7f6e\u4e2d\u58f0\u660e\u7684\u5c5e\u6027, \u76f8\u5f53\u4e8e ",(0,o.kt)("inlineCode",{parentName:"li"},"this.$attrs"),"\u3002"),(0,o.kt)("li",{parentName:"ul"},"slots: \u6536\u5230\u7684\u63d2\u69fd\u5185\u5bb9, \u76f8\u5f53\u4e8e ",(0,o.kt)("inlineCode",{parentName:"li"},"this.$slots"),"\u3002"),(0,o.kt)("li",{parentName:"ul"},"emit: \u5206\u53d1\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684\u51fd\u6570, \u76f8\u5f53\u4e8e ",(0,o.kt)("inlineCode",{parentName:"li"},"this.$emit"),"\u3002")))))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  \x3c!--vue3\u7684\u7ec4\u4ef6\u6a21\u7248\u7ed3\u6784\u53ef\u4ee5\u6ca1\u6709\u6839\u6807\u7b7e--\x3e\n  <h1>\u6211\u662fapp\u7ec4\u4ef6</h1>\n  <h1>\u6211\u53eb{{ person.name }}, {{ person.age }}\u5c81</h1>\n  <button @click=\"test\">\u6d4b\u8bd5\u89e6\u53d1\u4e00\u6b21demo\u7684\u81ea\u5b9a\u4e49\u4e8b\u4ef6</button>\n</template>\n\n<script>\nimport { reactive } from 'vue';\nexport default {\n  name: 'Demo',\n  beforeCreate() {\n    console.log('----@bc');\n  },\n  props: ['msg', 'school'],\n  emits:['hello'],//\u8fd9\u4e2a\u914d\u7f6e\u4e0d\u5199\u7684\u8bdd\uff0c\u4f1a\u51fa\u73b0\u8b66\u544a\uff0c\u4f46\u662f\u4e0d\u5f71\u54cd\u4f7f\u7528\u3002\n  setup(props, context){\n    // console.log('----setup');\n    // console.log(this); ///undefined\n    console.log(props); //props: \u5916\u90e8\u7ed9\u7ec4\u4ef6\u4e22\u7684\u53c2\u6570 => \u54cd\u5e94\u5f0f(Proxy\u5b9e\u4f8b)\n    //\u8868\u6f14\u7684\u821e\u53f0(setup)\n    //\u51c6\u5907\u6570\u636e data\n    //ref\u5b9e\u73b0\u54cd\u5e94\u5f0f(\u57fa\u672c\u7c7b\u578b)\u4e5f\u662f\u91c7\u7528Object.definedProperty()\u6765\u5b9e\u73b0\u7684 getter\u548csetter\n    // let name = ref('py'); //ref\u5f15\u7528\u5bf9\u8c61(RefImpl)\u5b9e\u4f8b\n    // let age = ref(21);\n    //ref\u5b9e\u73b0\u54cd\u5e94\u5f0f(\u5bf9\u8c61\u7c7b\u578b)\u4e5f\u662f\u91c7\u7528Proxy\u6765\u5b9e\u73b0(proxy) \u8fd9\u91cc\u5982\u679c\u5c31\u7b97\u662f\u7528ref\u4e5f\u662f\u501f\u52a9\u4e86reactive\n    let person = reactive({\n      name: 'py',\n      age: 21,\n    });\n\n    // console.log(context, context.attrs);//\u76f8\u5f53\u4e8evue2\u4e2d\u7684$attrs\n    // console.log(context,context.slots);//\u63d2\u69fd\n    // console.log(context,context.emit);//\u89e6\u53d1\u81ea\u5b9a\u4e49\u4e8b\u4ef6\n\n    //\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\n    return {\n      person,\n      test(){\n        context.emit('hello', 666); //\u89e6\u53d1\u81ea\u5b9a\u4e49\u4e8b\u4ef6\n      }\n    }\n  }\n}\n<\/script>\n\n<style>\n</style>\n\n")),(0,o.kt)("h2",{id:"7\u8ba1\u7b97\u5c5e\u6027\u4e0e\u76d1\u89c6"},"7.\u8ba1\u7b97\u5c5e\u6027\u4e0e\u76d1\u89c6"),(0,o.kt)("h3",{id:"1computed\u51fd\u6570"},"1.computed\u51fd\u6570"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u4e0eVue2.x\u4e2dcomputed\u914d\u7f6e\u529f\u80fd\u4e00\u81f4 "),(0,o.kt)("li",{parentName:"ul"},"\u5199\u6cd5 ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import {computed} from 'vue'\n\nsetup(){\n    ...\n    //\u8ba1\u7b97\u5c5e\u6027\u2014\u2014\u7b80\u5199\n    let fullName = computed(()=>{\n        return person.firstName + '-' + person.lastName\n    })\n    //\u8ba1\u7b97\u5c5e\u6027\u2014\u2014\u5b8c\u6574\n    let fullName = computed({\n        get(){\n            return person.firstName + '-' + person.lastName\n        },\n        set(value){\n            const nameArr = value.split('-')\n            person.firstName = nameArr[0]\n            person.lastName = nameArr[1]\n        }\n    })\n}\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <h1>\u4e00\u4e2a\u4eba\u7684\u4fe1\u606f</h1>\n  \u59d3:<input type=\"text\" v-model=\"person.firstName\"/>\n  <br/>\n  \u540d:<input type=\"text\" v-model=\"person.lastName\"/>\n  <p>\u59d3\u540d:{{ person.fullName }}</p>\n  <br/>\n  \u4fee\u6539\u5168\u540d:<input type=\"text\" v-model=\"person.fullName\"/>\n</template>\n\n<script>\nimport { reactive, computed } from 'vue';\nexport default {\n  name: 'Demo',\n  //vue2\u7684\u5199\u6cd5\n  // computed:{\n  //   fullName(){\n  //     //vue2\u770b\u5f97\u5230vue3 \u6ce8\u610f\n  //     return this.person.firstName + '-' + this.person.lastName;\n  //   }\n  // },\n  setup(){\n    let person = reactive({\n      firstName: 'pan',\n      lastName: 'yue',\n      age: 21,\n    });\n\n    //\u8ba1\u7b97\u5c5e\u6027(\u7b80\u5199\uff0c\u6ca1\u6709\u8003\u8651\u8ba1\u7b97\u5c5e\u6027\u88ab\u4fee\u6539\u7684\u60c5\u51b5)\n    // person.fullName = computed(() => {\n    //   return person.firstName + '-' + person.lastName;\n    // })\n\n    //\u8ba1\u7b97\u5c5e\u6027(\u5b8c\u6574\u5199\u6cd5\uff0c\u65e2\u8003\u8651\u4e86\u8bfb\u4e5f\u8003\u8651\u4e86\u6539)\n    person.fullName = computed({\n      get(){\n        return person.firstName + '-' + person.lastName\n      },\n      set(name){\n        let [ fn, ln ] = name.split('-');\n        //\u54cd\u5e94\u5f0f\n        person.firstName = fn;\n        person.lastName = ln;\n      }\n    })\n\n    //\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\n    return {\n      person,\n    }\n  }\n}\n<\/script>\n\n<style>\n</style>\n\n")),(0,o.kt)("h3",{id:"2watch\u51fd\u6570"},"2.watch\u51fd\u6570"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u4e0eVue2.x\u4e2dwatch\u914d\u7f6e\u529f\u80fd\u4e00\u81f4 "),(0,o.kt)("li",{parentName:"ul"},"\u4e24\u4e2a\u5c0f\u201c\u5751\u201d\uff1a ",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"\u76d1\u89c6reactive\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\u65f6\uff1aoldValue\u65e0\u6cd5\u6b63\u786e\u83b7\u53d6\u3001\u5f3a\u5236\u5f00\u542f\u4e86\u6df1\u5ea6\u76d1\u89c6\uff08deep\u914d\u7f6e\u5931\u6548\uff09\u3002"),(0,o.kt)("li",{parentName:"ul"},"\u76d1\u89c6reactive\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\u4e2d\u67d0\u4e2a\u5c5e\u6027\u65f6\uff1adeep\u914d\u7f6e\u6709\u6548\u3002")))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"//\u60c5\u51b5\u4e00\uff1a\u76d1\u89c6ref\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\nwatch(sum,(newValue,oldValue)=>{\n    console.log('sum\u53d8\u5316\u4e86',newValue,oldValue)\n},{immediate:true})\n\n//\u60c5\u51b5\u4e8c\uff1a\u76d1\u89c6\u591a\u4e2aref\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\nwatch([sum,msg],(newValue,oldValue)=>{\n    console.log('sum\u6216msg\u53d8\u5316\u4e86',newValue,oldValue)\n}) \n\n/* \u60c5\u51b5\u4e09\uff1a\u76d1\u89c6reactive\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\n            \u82e5watch\u76d1\u89c6\u7684\u662freactive\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\uff0c\u5219\u65e0\u6cd5\u6b63\u786e\u83b7\u5f97oldValue\uff01\uff01\n            \u82e5watch\u76d1\u89c6\u7684\u662freactive\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\uff0c\u5219\u5f3a\u5236\u5f00\u542f\u4e86\u6df1\u5ea6\u76d1\u89c6 \n*/\nwatch(person,(newValue,oldValue)=>{\n    console.log('person\u53d8\u5316\u4e86',newValue,oldValue)\n},{immediate:true,deep:false}) //\u6b64\u5904\u7684deep\u914d\u7f6e\u4e0d\u518d\u594f\u6548\n\n//\u60c5\u51b5\u56db\uff1a\u76d1\u89c6reactive\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\u4e2d\u7684\u67d0\u4e2a\u5c5e\u6027\nwatch(()=>person.job,(newValue,oldValue)=>{\n    console.log('person\u7684job\u53d8\u5316\u4e86',newValue,oldValue)\n},{immediate:true,deep:true}) \n\n//\u60c5\u51b5\u4e94\uff1a\u76d1\u89c6reactive\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\u4e2d\u7684\u67d0\u4e9b\u5c5e\u6027\nwatch([()=>person.job,()=>person.name],(newValue,oldValue)=>{\n    console.log('person\u7684job\u53d8\u5316\u4e86',newValue,oldValue)\n},{immediate:true,deep:true})\n\n//\u7279\u6b8a\u60c5\u51b5\nwatch(()=>person.job,(newValue,oldValue)=>{\n    console.log('person\u7684job\u53d8\u5316\u4e86',newValue,oldValue)\n},{deep:true}) //\u6b64\u5904\u7531\u4e8e\u76d1\u89c6\u7684\u662freactive\u7d20\u5b9a\u4e49\u7684\u5bf9\u8c61\u4e2d\u7684\u67d0\u4e2a\u5c5e\u6027\uff0c\u6240\u4ee5deep\u914d\u7f6e\u6709\u6548\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"<template>\n   <h1>\u5f53\u524d\u6c42\u548c\u4e3a:{{ sum }}</h1>\n   <button @click=\"sum++\">\u70b9\u6211\u52a0\u4e00</button>\n   <hr/>\n   <h2>\u5f53\u524d\u7684\u4fe1\u606f\u4e3a:{{ msg }}</h2>\n   <button @click=\"msg += '!'\">\u4fee\u6539\u4fe1\u606f</button>\n   <hr/>\n   <h2>\u59d3\u540d:{{ person.name }}</h2>\n   <h2>\u5e74\u9f84:{{ person.age }}</h2>\n   <h2>\u85aa\u8d44:{{ person.job.j1.salary }}K</h2>\n  <button @click=\"person.name = person.name + '~'\">\u4fee\u6539\u59d3\u540d</button>\n  <button @click=\"person.age++\">\u589e\u957f\u5e74\u9f84</button>\n  <button @click=\"person.job.j1.salary++\">\u589e\u957f\u85aa\u8d44</button>\n</template>\n\n<script>\nimport { ref, reactive, watch } from 'vue';\nexport default {\n  name: 'Demo',\n  //vue2\u4e2d\u7684watch\u5199\u6cd5\n  // watch:{\n  //   //\u7b80\u5355\u5199\u6cd5\n  //   // sum(nv,ov){\n  //   //   console.log('sum\u7684\u503c\u53d1\u751f\u53d8\u5316\u4e86');\n  //   //   console.log(`newValue:${nv}, oldValue:${ov}`);\n  //   // }\n  //\n  //   //\u5b8c\u6574\u5199\u6cd5\n  //   sum:{\n  //     deep: true, //\u6df1\u5ea6\u76d1\u89c6\n  //     immediate: true, //\u4e00\u5f00\u59cb\u5c31\u76d1\u89c6\u4e00\u4e0b\n  //     handler(nv,ov){\n  //         console.log('sum\u7684\u503c\u53d1\u751f\u53d8\u5316\u4e86');\n  //         console.log(`newValue:${nv}, oldValue:${ov}`);\n  //     }\n  //   }\n  // },\n  setup(){\n\n    let sum = ref(0);\n    let msg = ref('\u4f60\u597d');\n    let person = reactive({\n      name: '\u5f20\u4e09',\n      age: 18,\n      job:{\n        j1:{\n          salary: 20\n        }\n      }\n    })\n\n    //\u60c5\u51b5\u4e00: \u76d1\u89c6ref\u6240\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u6570\u636e\n    // watch(sum, (nv, ov) => {\n    //   //\u8fd9\u91cc\u6211\u5e76\u4e0d\u9700\u8981this\uff0c\u6240\u4ee5\u526a\u5934\u51fd\u6570\uff0c\u666e\u901a\u51fd\u6570\u6211\u53ef\u4ee5\u4e71\u7ca5\n    //   console.log('sum\u7684\u503c\u53d1\u751f\u53d8\u5316\u4e86');\n    //   console.log(`newValue:${nv}, oldValue:${ov}`);\n    // }, {\n    //   //\u76d1\u89c6\u7684\u914d\u7f6e\n    //   immediate: true //\u4e00\u4e0a\u6765\u5c31\u66f4\u65b0\n    // });\n\n    //\u60c5\u51b5\u4e8c:\u76d1\u89c6ref\u6240\u5b9a\u4e49\u7684\u591a\u4e2a\u54cd\u5e94\u5f0f\u6570\u636e\n    // watch([sum, msg], (nv, ov) => {\n    //   //\u6b64\u65f6nv\u548cov\u90fd\u662f\u88ab\u76d1\u89c6\u5c5e\u6027\u503c\u7684\u6570\u7ec4\n    //   // console.log(Array.isArray(ov)); //true\n    //   console.log('sum\u7684\u503c\u6216\u8005msg\u7684\u503c\u53d1\u751f\u53d8\u5316\u4e86');\n    //   console.log(`newValue:${nv}, oldValue:${ov}`);\n    // },{\n    //   immediate: true\n    // });\n\n    /**\n     * \u60c5\u51b5\u4e09:\u76d1\u89c6reactive\u6240\u5b9a\u4e49\u7684\u4e00\u4e2a\u54cd\u5e94\u5f0f\u6570\u636e\n     * \u5751:1.\u6b64\u5904\u65e0\u6cd5\u83b7\u53d6\u6b63\u786e\u7684ov(oldValue)\n     *    2.\u5f3a\u5236\u5f00\u542f\u4e86\u6df1\u5ea6\u76d1\u89c6\n     */\n    // watch(person, (nv, ov) => {\n    //   console.log('person\u53d8\u5316\u4e86');\n    //   console.log(nv, ov);\n    // }, {\n    //   deep: false //\u6b64\u5904\u7684deep\u914d\u7f6e\u662f\u65e0\u6548\u7684\n    // });\n\n    //\u60c5\u51b5\u56db\uff1a\u76d1\u89c6reactive\u6240\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u4e2d\u7684\u67d0\u4e00\u4e2a\u5c5e\u6027\n    // watch(() => person.age, (nv, ov) => {\n    //   console.log('person\u7684age\u53d8\u4e86', nv, ov);\n    // })\n\n    //\u60c5\u51b5\u4e94:\u76d1\u89c6reactive\u6240\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u4e2d\u7684\u67d0\u4e9b\u5c5e\u6027:\u5e76\u4e0d\u53ea\u662f\u4e00\u4e2a\n    // watch([() => person.age, () => person.name], (nv, ov) => {\n    //   //\u6b64\u65f6nv\u548cov\u90fd\u662f\u6570\u7ec4\n    //   console.log('person\u7684age\u6216name\u53d1\u751f\u6539\u53d8\u4e86',nv, ov);\n    // });\n\n    //\u7279\u6b8a\u60c5\u51b5\n    // watch(() => person.job, (nv, ov) => {\n    //   //\u8fd9\u91cc\u4f9d\u7136\u65e0\u6cd5\u62ff\u5230\u6b63\u786e\u7684ov\uff0c\u56e0\u4e3a\u4f9d\u7136\u76d1\u89c6\u7684\u662f\u5bf9\u8c61\n    //   console.log('person\u7684job\u4fe1\u606f\u53d1\u751f\u6539\u53d8\u4e86',nv, ov);\n    // }, {\n    //   //\u8fd9\u91cc\u5fc5\u987b\u8981\u52a0deep:true\u6ce8\u610f\n    //   deep: true //\u6b64\u5904\u56e0\u4e3a\u76d1\u89c6\u7684\u662freactive\u6240\u5b9a\u4e49\u7684\u54cd\u5e94\u5f0f\u5bf9\u8c61\u7684\u4e00\u4e2a\u5c5e\u6027(\u8fd9\u4e2a\u5c5e\u6027\u7684\u503c\u5b83\u4f9d\u7136\u662f\u4e00\u4e2a\u5bf9\u8c61)\uff0c\u6240\u4ee5deep\u914d\u7f6e\u6709\u6548\n    // })\n\n    //\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\n    return {\n      sum,\n      msg,\n      person\n    }\n  }\n}\n<\/script>\n\n<style>\n</style>\n\n")),(0,o.kt)("h5",{id:"\u5173\u4e8evalue\u7684\u95ee\u9898"},"\u5173\u4e8evalue\u7684\u95ee\u9898"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n   <h1>\u5f53\u524d\u6c42\u548c\u4e3a:{{ sum }}</h1>\n   <button @click=\"sum++\">\u70b9\u6211\u52a0\u4e00</button>\n   <hr/>\n   <h2>\u5f53\u524d\u7684\u4fe1\u606f\u4e3a:{{ msg }}</h2>\n   <button @click=\"msg += '!'\">\u4fee\u6539\u4fe1\u606f</button>\n   <hr/>\n   <h2>\u59d3\u540d:{{ person.name }}</h2>\n   <h2>\u5e74\u9f84:{{ person.age }}</h2>\n   <h2>\u85aa\u8d44:{{ person.job.j1.salary }}K</h2>\n  <button @click=\"person.name = person.name + '~'\">\u4fee\u6539\u59d3\u540d</button>\n  <button @click=\"person.age++\">\u589e\u957f\u5e74\u9f84</button>\n  <button @click=\"person.job.j1.salary++\">\u589e\u957f\u85aa\u8d44</button>\n</template>\n\n<script>\nimport {ref, watch} from 'vue';\nexport default {\n  name: 'Demo',\n  setup(){\n\n    let sum = ref(0);\n    let msg = ref('\u4f60\u597d');\n    let person = ref({\n      name: '\u5f20\u4e09',\n      age: 18,\n      job:{\n        j1:{\n          salary: 20\n        }\n      }\n    });\n\n    //\u76d1\u6d4b\u7684\u4e0d\u662f\u4e00\u4e2a\u503c\uff0c\u800c\u662f\u4e00\u4e2a\u4fdd\u5b58\u503c\u7684\u7ed3\u6784(\u4e0d\u80fd\u5199\u6210sum.value) \u4e0d\u80fd\u76d1\u89c6\u4e00\u4e2a\u5177\u4f53\u7684\u503c\u6ce8\u610f\n    watch(sum, (nv, ov) => {\n       console.log(nv, ov);\n    });\n\n    console.log(person);\n\n    //person\u662fRefImpl\n    //\u5f00\u542f\u6df1\u5ea6\u76d1\u89c6\u4e0d\u4f1a\u5b58\u5728\u95ee\u9898\n    // watch(person, (nv, ov) => {\n    //   console.log(nv, ov);\n    // },{\n    //   deep: true\n    // });\n\n    //\u8fd9\u91cc\u5982\u679c\u4e0d\u662fperson.value\u5219\u4f1a\u51fa\u73b0\u95ee\u9898 \u56e0\u4e3aperson\u662f\u4e00\u4e2aRefImpl(\u9ed8\u8ba4\u6ca1\u5f00\u542f\u6df1\u5ea6\u76d1\u89c6)\n    //\u4f46\u662fperson.value\u662f\u4e00\u4e2a\u501f\u52a9\u4e86proxy\u751f\u6210\u7684reactive\u54cd\u5e94\u5f0f\u5bf9\u8c61 \u6240\u4ee5\u8fd9\u91cc\u53ef\u4ee5\u89e3\u51b3\u95ee\u9898\n    //\u4f7f\u7528person.value\u76d1\u89c6\u5c31\u4e0d\u662fref\u7684\uff0c\u800c\u662freactive\u5b9a\u4e49\u7684\n    // watch(person.value, (nv, ov) => {\n    //   console.log(nv, ov);\n    // });\n\n    console.log(sum);\n    console.log(msg);\n    console.log(person);\n\n    //\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\n    return {\n      sum,\n      msg,\n      person\n    }\n  }\n}\n<\/script>\n\n<style>\n</style>\n\n")),(0,o.kt)("h3",{id:"3watcheffect\u51fd\u6570"},"3.watchEffect\u51fd\u6570"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"watch\u7684\u5957\u8def\u662f\uff1a\u65e2\u8981\u6307\u660e\u76d1\u89c6\u7684\u5c5e\u6027\uff0c\u4e5f\u8981\u6307\u660e\u76d1\u89c6\u7684\u56de\u8c03\u3002 "),(0,o.kt)("li",{parentName:"ul"},"watchEffect\u7684\u5957\u8def\u662f\uff1a\u4e0d\u7528\u6307\u660e\u76d1\u89c6\u54ea\u4e2a\u5c5e\u6027\uff0c",(0,o.kt)("strong",{parentName:"li"},"\u76d1\u89c6\u7684\u56de\u8c03\u4e2d\u7528\u5230\u54ea\u4e2a\u5c5e\u6027\uff0c\u90a3\u5c31\u76d1\u89c6\u54ea\u4e2a\u5c5e\u6027\u3002")," "),(0,o.kt)("li",{parentName:"ul"},"watchEffect\u6709\u70b9\u50cfcomputed\uff1a ",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"\u4f46computed\u6ce8\u91cd\u7684\u8ba1\u7b97\u51fa\u6765\u7684\u503c\uff08\u56de\u8c03\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff09\uff0c\u6240\u4ee5\u5fc5\u987b\u8981\u5199\u8fd4\u56de\u503c\u3002"),(0,o.kt)("li",{parentName:"ul"},"\u800cwatchEffect\u66f4\u6ce8\u91cd\u7684\u662f\u8fc7\u7a0b\uff08\u56de\u8c03\u51fd\u6570\u7684\u51fd\u6570\u4f53\uff09\uff0c\u6240\u4ee5\u4e0d\u7528\u5199\u8fd4\u56de\u503c\u3002")))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"//watchEffect\u6240\u6307\u5b9a\u7684\u56de\u8c03\u4e2d\u7528\u5230\u7684\u6570\u636e\u53ea\u8981\u53d1\u751f\u53d8\u5316\uff0c\u5219\u76f4\u63a5\u91cd\u65b0\u6267\u884c\u56de\u8c03\u3002\n//\u4e00\u4e0a\u6765\u5c31\u4f1a\u6267\u884c\u56de\u8c03\nwatchEffect(()=>{\n    const x1 = sum.value\n    const x2 = person.age\n    console.log('watchEffect\u914d\u7f6e\u7684\u56de\u8c03\u6267\u884c\u4e86')\n})\n\nconst res = watchEffect(...\u8be6\u7ec6\u4ee3\u7801)\nres()//\u8fd9\u6837\u53ef\u4ee5\u505c\u6b62\u76d1\u542c\u3002\n")),(0,o.kt)("h2",{id:"8\u751f\u547d\u5468\u671f"},"8.\u751f\u547d\u5468\u671f"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"vue2.x\u7684\u751f\u547d\u5468\u671f\uff08\u5de6\uff09"),"\n",(0,o.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2022/png/26296167/1661957096740-2859e4de-84a6-46cc-9570-2f4dbd49ba4e.png#clientId=u90633ae4-96d4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=699&id=u9c52b516&name=image.png&originHeight=3039&originWidth=1200&originalType=url&ratio=1&rotation=0&showTitle=false&size=223114&status=done&style=none&taskId=u2661f342-45c7-4c71-885e-1b78841cf34&title=&width=276",alt:"image.png"}),(0,o.kt)("img",{parentName:"p",src:"https://v3.cn.vuejs.org/images/lifecycle.svg#clientId=u90633ae4-96d4-4&crop=0&crop=0&crop=1&crop=1&height=701&id=Oxw0Y&originHeight=1388&originWidth=840&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uf856fc32-7b42-4223-98f2-fd6c9dacf6d&title=&width=424",alt:null})),(0,o.kt)("p",null,"1"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Vue3.0\u4e2d\u53ef\u4ee5\u7ee7\u7eed\u4f7f\u7528Vue2.x\u4e2d\u7684\u751f\u547d\u5468\u671f\u94a9\u5b50\uff0c\u4f46\u6709\u6709\u4e24\u4e2a\u88ab\u66f4\u540d\uff1a ",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"beforeDestroy"),"\u6539\u540d\u4e3a ",(0,o.kt)("inlineCode",{parentName:"li"},"beforeUnmount")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"destroyed"),"\u6539\u540d\u4e3a ",(0,o.kt)("inlineCode",{parentName:"li"},"unmounted")))),(0,o.kt)("li",{parentName:"ul"},"Vue3.0\u4e5f\u63d0\u4f9b\u4e86 Composition API \u5f62\u5f0f\u7684\u751f\u547d\u5468\u671f\u94a9\u5b50\uff0c\u4e0eVue2.x\u4e2d\u94a9\u5b50\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\uff1a ",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"beforeCreate"),"===>",(0,o.kt)("inlineCode",{parentName:"li"},"setup()")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"created"),"=======>",(0,o.kt)("inlineCode",{parentName:"li"},"setup()")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"beforeMount")," ===>",(0,o.kt)("inlineCode",{parentName:"li"},"onBeforeMount")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"mounted"),"=======>",(0,o.kt)("inlineCode",{parentName:"li"},"onMounted")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"beforeUpdate"),"===>",(0,o.kt)("inlineCode",{parentName:"li"},"onBeforeUpdate")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"updated")," =======>",(0,o.kt)("inlineCode",{parentName:"li"},"onUpdated")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"beforeUnmount"),"\xa0==>",(0,o.kt)("inlineCode",{parentName:"li"},"onBeforeUnmount")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"unmounted")," =====>",(0,o.kt)("inlineCode",{parentName:"li"},"onUnmounted"))))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n   <h1>\u5f53\u524d\u6c42\u548c\u4e3a:{{ sum }}</h1>\n   <button @click=\"sum++\">\u70b9\u6211\u52a0\u4e00</button>\n\n   <hr/>\n</template>\n\n<script>\nimport { ref, onBeforeMount, onMounted, onBeforeUpdate, onUpdated, onBeforeUnmount, onUnmounted } from 'vue';\nexport default {\n  name: 'Demo',\n  setup(){\n    let sum = ref(0);\n\n    //\u901a\u8fc7\u7ec4\u5408\u5f0fapi\u7684\u5f62\u5f0f\u53bb\u4f7f\u7528\u751f\u547d\u5468\u671f\u94a9\u5b50\n    ///setup()\u76f8\u5f53\u4e8ebeforeCreate()\u548ccreated()\n    onBeforeMount(() => {  console.log('----beforeMount----'); });\n    onMounted(() => {  console.log('-----mounted-----'); });\n    onBeforeUpdate(() => {  console.log('-----beforeUpdate-----') });\n    onUpdated(() => { console.log('-----updated-----'); });\n    onBeforeUnmount(() => { console.log('-----beforeUnmount----'); });\n    onUnmounted(() => { console.log('-----unmounted----'); })\n\n    console.log('-----setup----')\n\n    //\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\n    return {\n      sum,\n    }\n  },\n  //\u4f7f\u7528\u914d\u7f6e\u9879\u7684\u5f62\u5f0f\u4f7f\u7528\u751f\u547d\u5468\u671f\u94a9\u5b50\n  // beforeCreate() {\n  //   console.log('----beforeCreate!!----');\n  // },\n  // created() {\n  //   console.log('----created!!----');\n  // },\n  // beforeMount() {\n  //   console.log('----beforeMount----');\n  // },\n  // mounted() {\n  //   console.log('-----mounted-----');\n  // },\n  // beforeUpdate() {\n  //   console.log('-----beforeUpdate-----')\n  // },\n  // updated() {\n  //   console.log('-----updated-----');\n  // },\n  // beforeUnmount() {\n  //   console.log('-----beforeUnmount----');\n  // },\n  // unmounted() {\n  //   console.log('-----unmounted----');\n  // }\n}\n<\/script>\n\n<style>\n</style>\n\n")),(0,o.kt)("h2",{id:"9\u81ea\u5b9a\u4e49hook\u51fd\u6570"},"9.\u81ea\u5b9a\u4e49hook\u51fd\u6570"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u4ec0\u4e48\u662fhook\uff1f\u2014\u2014 \u672c\u8d28\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u628asetup\u51fd\u6570\u4e2d\u4f7f\u7528\u7684Composition API\u8fdb\u884c\u4e86\u5c01\u88c5\u3002 "),(0,o.kt)("li",{parentName:"ul"},"\u7c7b\u4f3c\u4e8evue2.x\u4e2d\u7684mixin\u3002 "),(0,o.kt)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49hook\u7684\u4f18\u52bf: \u590d\u7528\u4ee3\u7801, \u8ba9setup\u4e2d\u7684\u903b\u8f91\u66f4\u6e05\u695a\u6613\u61c2\u3002 ")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"/hooks/usePoint.js")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"///\u5f97\u5230\u9f20\u6807\u70b9\u7684api\n\nimport { reactive, onMounted, onBeforeUnmount } from \"vue\";\n\nexport default function usePoint(){\n    //\u54cd\u5e94\u5f0f\u6570\u636e\n    let point = reactive({\n        x: 0,\n        y: 0\n    });\n\n    //\u65b9\u6cd5\n    const savePoint = event => {\n        console.log(event.pageX, event.pageY);\n        point.x = event.pageX;\n        point.y = event.pageY;\n    };\n\n    //\u751f\u547d\u5468\u671f\n    onMounted(() => {\n        window.addEventListener('click', savePoint)\n    });\n\n    onBeforeUnmount(() => {\n        //\u5728\u5378\u8f7d\u4e4b\u524d\u53d6\u6d88\u4e8b\u4ef6\u7684\u76d1\u542c\n        window.removeEventListener('click', savePoint);\n    });\n\n    return point;\n}\n\n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"/components/Demo.vue")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n   <h1>\u5f53\u524d\u6c42\u548c\u4e3a:{{ sum }}</h1>\n   <button @click=\"sum++\">\u70b9\u6211\u52a0\u4e00</button>\n   <hr/>\n   <h2>\u5f53\u524d\u70b9\u51fb\u65f6\u9f20\u6807\u7684\u5750\u6807\u4e3ax:{{ point.x }}, y:{{ point.y }}</h2>\n</template>\n\n<script>\nimport {ref} from 'vue';\nimport usePoint from \"../hooks/usePoint\";\nexport default {\n  name: 'Demo',\n  setup(){\n    let sum = ref(0);\n\n    //\u590d\u7528\u81ea\u5b9a\u4e49hooks\n    const point = usePoint();\n\n    //\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\n    return {\n      sum,\n      point\n      //\u6216\u8005...usePoint()\n    }\n  },\n}\n<\/script>\n\n<style>\n</style>\n\n")),(0,o.kt)("h2",{id:"10toref"},"10.toRef"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u4f5c\u7528\uff1a\u521b\u5efa\u4e00\u4e2a ref \u5bf9\u8c61\uff0c\u5176value\u503c\u6307\u5411\u53e6\u4e00\u4e2a\u5bf9\u8c61\u4e2d\u7684\u67d0\u4e2a\u5c5e\u6027\u3002"),(0,o.kt)("li",{parentName:"ul"},"\u8bed\u6cd5\uff1a",(0,o.kt)("inlineCode",{parentName:"li"},"const name = toRef(person,'name')")," "),(0,o.kt)("li",{parentName:"ul"},"\u5e94\u7528: \xa0 ",(0,o.kt)("strong",{parentName:"li"},"\u8981\u5c06\u54cd\u5e94\u5f0f\u5bf9\u8c61\u4e2d\u7684\u67d0\u4e2a\u5c5e\u6027\u5355\u72ec\u63d0\u4f9b\u7ed9\u5916\u90e8\u4f7f\u7528\u65f6"),"\u3002 "),(0,o.kt)("li",{parentName:"ul"},"\u6269\u5c55\uff1a",(0,o.kt)("inlineCode",{parentName:"li"},"toRefs")," \u4e0e",(0,o.kt)("inlineCode",{parentName:"li"},"toRef"),"\u529f\u80fd\u4e00\u81f4\uff0c\u4f46\u53ef\u4ee5\u6279\u91cf\u521b\u5efa\u591a\u4e2a ref \u5bf9\u8c61\uff0c\u8bed\u6cd5\uff1a",(0,o.kt)("inlineCode",{parentName:"li"},"toRefs(person)")," ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <h4>{{ person }}</h4>\n  <h2>\u59d3\u540d:{{ name }}</h2>\n  <h2>\u5e74\u9f84:{{ age }}</h2>\n  <h2>\u85aa\u8d44:{{ salary }}K</h2>\n  <button @click=\"name = name + '~'\">\u4fee\u6539\u59d3\u540d</button>\n  <button @click=\"age++\">\u589e\u957f\u5e74\u9f84</button>\n  <button @click=\"salary++\">\u589e\u957f\u85aa\u8d44</button>\n</template>\n\n<script>\nimport { ref, reactive, toRef, toRefs} from 'vue';\nexport default {\n  name: 'Demo',\n  setup(){\n    let person = reactive({\n      name: '\u5f20\u4e09',\n      age: 18,\n      job:{\n        j1:{\n          salary: 20\n        }\n      }\n    });\n\n    //ref\u7c7b\u578b\u7684\u503c\u5728\u6a21\u677f\u91cc\u4f7f\u7528\u662f\u4e0d\u9700\u8981.value\u6765\u53d6\u7684\n    const name1 = person.name //\u6ce8\u610f\u8f93\u51fa\u5b57\u7b26\u4e32\uff0c\u5e76\u4e0d\u662f\u54cd\u5e94\u5f0f\u7684\u6570\u636e\n    console.log('@@@@@', name1);\n    const name2 = toRef(person,name); //RefImpl \u8fd9\u91cc\u7684name2\u4e0eperson.name\u662f\u5b8c\u5168\u4e00\u6a21\u4e00\u6837\u7684(\u4f60\u6539\u8fd9\u91cc\u7684name2\u4e0e\u4f60\u6539person.name\u662f\u4e00\u7801\u4e8b),\u4e14\u6570\u636e\u8fd8\u662f\u54cd\u5e94\u5f0f\u7684\n    console.log('####', name2);\n\n    const x = toRefs(person);\n    console.log(x);\n\n\n    //\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61(toRef\u662f\u5f15\u7528 name\u5c31\u662fperson.name\u4e14\u4e3a\u54cd\u5e94\u5f0f)\n    //toRef\u5904\u7406\u4e00\u4e2a\uff0c\u800ctoRefs\u5904\u7406\u4e00\u7fa4\n    //\u5927\u767d\u8bdd:toRef(s)\u5c31\u662f\u65b9\u4fbf\u6211\u4eec\u628a\u54cd\u5e94\u5f0f\u6570\u636e(ref,reactive)\u5c55\u5f00\u4e22\u51fa\u53bb\uff0c\u65b9\u4fbf\u5728\u6a21\u7248\u4e2d\u5e94\u7528\n    return {\n      person,\n      // name: toRef(person, \"name\"),\n      // age: toRef(person, \"age\"),\n      // salary: toRef(person.job.j1, \"salary\")\n      ...toRefs(person),\n      salary: toRef(person.job.j1, 'salary')  //toRef\u53ef\u4ee5\u4e0etoRefs\u8fde\u7528,\u66f4\u52a0\u65b9\u4fbf\n    };\n\n\n    //\u6ce8\u610f\u5343\u4e07\u4e0d\u80fd\u8fd9\u6837\u5199\n    //\u4e00\u65e6\u8fd9\u6837\u5199\u5c31\u4e0e\u5143\u6570\u636e\u5206\u79bb\u4e86,\u6539name\u4e0d\u4f1a\u5f15\u8d77person.name\u7684\u53d8\u5316(\u56e0\u4e3aref\u628aname\u503c\u5305\u88c5\u6210\u4e86\u4e00\u4e2arefImpl\u5bf9\u8c61)\n    // return {\n    //   person,\n    //   name: ref(person.name),\n    //   age: ref(person.age),\n    //   salary: ref(person.job.j1.salary)\n    // };\n  }\n}\n<\/script>\n\n<style>\n</style>\n")),(0,o.kt)("h2",{id:"11torefs"},"11.toRefs"),(0,o.kt)("p",null,"\u5c31\u662f\u6211\u4eec\u4f7f\u7528\u7684\u65f6\u5019\u4e0d\u7528\u518d\u53bb...\u4e86\uff0c\u53ef\u4ee5\u76f4\u63a5\u4e22\u7ed9\u5916\u5c42\uff0c\u8f93\u5165\u5bf9\u8c61\u7684\u5c5e\u6027\u540d\u5c31\u884c\u4e86\u3002"))}m.isMDXComponent=!0}}]);