"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4165],{3905:(e,n,t)=>{t.d(n,{Zo:()=>s,kt:()=>m});var a=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function g(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var i=a.createContext({}),p=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},s=function(e){var n=p(e.components);return a.createElement(i.Provider,{value:n},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,l=e.mdxType,r=e.originalType,i=e.parentName,s=g(e,["components","mdxType","originalType","parentName"]),c=p(t),u=l,m=c["".concat(i,".").concat(u)]||c[u]||d[u]||r;return t?a.createElement(m,o(o({ref:n},s),{},{components:t})):a.createElement(m,o({ref:n},s))}));function m(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=t.length,o=new Array(r);o[0]=u;var g={};for(var i in n)hasOwnProperty.call(n,i)&&(g[i]=n[i]);g.originalType=e,g[c]="string"==typeof e?e:l,o[1]=g;for(var p=2;p<r;p++)o[p]=t[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},6120:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>o,default:()=>c,frontMatter:()=>r,metadata:()=>g,toc:()=>p});var a=t(7462),l=(t(7294),t(3905));const r={},o="1.\u65e5\u5fd7\u6846\u67b6",g={unversionedId:"Java/\u57fa\u7840\u77e5\u8bc6/\u65e5\u5fd7\u6846\u67b6",id:"Java/\u57fa\u7840\u77e5\u8bc6/\u65e5\u5fd7\u6846\u67b6",title:"1.\u65e5\u5fd7\u6846\u67b6",description:"\u7b2c\u4e00\u7ae0 \u65e5\u5fd7\u7684\u6982\u5ff5",source:"@site/docs/Java/5.\u57fa\u7840\u77e5\u8bc6/1.\u65e5\u5fd7\u6846\u67b6.md",sourceDirName:"Java/5.\u57fa\u7840\u77e5\u8bc6",slug:"/Java/\u57fa\u7840\u77e5\u8bc6/\u65e5\u5fd7\u6846\u67b6",permalink:"/docs/Java/\u57fa\u7840\u77e5\u8bc6/\u65e5\u5fd7\u6846\u67b6",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Java/5.\u57fa\u7840\u77e5\u8bc6/1.\u65e5\u5fd7\u6846\u67b6.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"Java",previous:{title:"BOM",permalink:"/docs/Java/web/BOM"},next:{title:"2.MAVEN",permalink:"/docs/Java/\u57fa\u7840\u77e5\u8bc6/MAVEN"}},i={},p=[{value:"\u7b2c\u4e00\u7ae0 \u65e5\u5fd7\u7684\u6982\u5ff5",id:"\u7b2c\u4e00\u7ae0-\u65e5\u5fd7\u7684\u6982\u5ff5",level:2},{value:"\u4e00\u3001\u6982\u8ff0",id:"\u4e00\u6982\u8ff0",level:3},{value:"\u4e8c\u3001\u65e5\u5fd7\u7684\u4f5c\u7528",id:"\u4e8c\u65e5\u5fd7\u7684\u4f5c\u7528",level:3},{value:"\u4e09\u3001\u63a5\u89e6\u8fc7\u7684\u65e5\u5fd7",id:"\u4e09\u63a5\u89e6\u8fc7\u7684\u65e5\u5fd7",level:3},{value:"\u56db\u3001\u4e3b\u6d41\u65e5\u5fd7\u6846\u67b6",id:"\u56db\u4e3b\u6d41\u65e5\u5fd7\u6846\u67b6",level:3},{value:"\u7b2c\u4e8c\u7ae0 JUL\u65e5\u5fd7\u6846\u67b6",id:"\u7b2c\u4e8c\u7ae0-jul\u65e5\u5fd7\u6846\u67b6",level:2},{value:"\u4e00\u3001\u5165\u95e8\u6848\u4f8b",id:"\u4e00\u5165\u95e8\u6848\u4f8b",level:3},{value:"\u4e8c\u3001\u65e5\u5fd7\u7684\u7ea7\u522b",id:"\u4e8c\u65e5\u5fd7\u7684\u7ea7\u522b",level:3},{value:"\u4e09\u3001\u65e5\u5fd7\u914d\u7f6e",id:"\u4e09\u65e5\u5fd7\u914d\u7f6e",level:3},{value:"\u56db\u3001 Logger\u4e4b\u95f4\u7684\u7236\u5b50\u5173\u7cfb",id:"\u56db-logger\u4e4b\u95f4\u7684\u7236\u5b50\u5173\u7cfb",level:3},{value:"\u4e94\u3001\u65e5\u5fd7\u683c\u5f0f\u5316",id:"\u4e94\u65e5\u5fd7\u683c\u5f0f\u5316",level:3},{value:"1\u3001String\u7684format\u65b9\u6cd5",id:"1string\u7684format\u65b9\u6cd5",level:4},{value:"2\u3001\u5e38\u7528\u7684\u8f6c\u6362\u7b26",id:"2\u5e38\u7528\u7684\u8f6c\u6362\u7b26",level:4},{value:"3\u3001\u7279\u6b8a\u7b26\u53f7",id:"3\u7279\u6b8a\u7b26\u53f7",level:4},{value:"4\u3001\u65e5\u671f\u5904\u7406",id:"4\u65e5\u671f\u5904\u7406",level:4},{value:"\u516d\u3001\u914d\u7f6e\u6587\u4ef6",id:"\u516d\u914d\u7f6e\u6587\u4ef6",level:3},{value:"\u7b2c\u4e09\u7ae0 LOG4J \u65e5\u5fd7\u6846\u67b6",id:"\u7b2c\u4e09\u7ae0-log4j-\u65e5\u5fd7\u6846\u67b6",level:2},{value:"\u4e00\u3001\u5165\u95e8\u6848\u4f8b",id:"\u4e00\u5165\u95e8\u6848\u4f8b-1",level:3},{value:"\u4e8c\u3001\u7ec4\u4ef6\u8bb2\u89e3",id:"\u4e8c\u7ec4\u4ef6\u8bb2\u89e3",level:3},{value:"1\u3001Loggers",id:"1loggers",level:4},{value:"2\u3001Appenders",id:"2appenders",level:4},{value:"3\u3001Layouts",id:"3layouts",level:4},{value:"\u4e09\u3001\u914d\u7f6e",id:"\u4e09\u914d\u7f6e",level:3},{value:"\u56db\u3001\u81ea\u5b9a\u4e49Logger",id:"\u56db\u81ea\u5b9a\u4e49logger",level:3},{value:"\u7b2c\u56db\u7ae0 \u65e5\u5fd7\u95e8\u9762",id:"\u7b2c\u56db\u7ae0-\u65e5\u5fd7\u95e8\u9762",level:2},{value:"\u4e00\u3001SLF4J\u65e5\u5fd7\u95e8\u9762",id:"\u4e00slf4j\u65e5\u5fd7\u95e8\u9762",level:3},{value:"1\u3001\u963f\u91cc\u65e5\u5fd7\u89c4\u7ea6",id:"1\u963f\u91cc\u65e5\u5fd7\u89c4\u7ea6",level:4},{value:"2\u3001SLF4J\u5b9e\u6218",id:"2slf4j\u5b9e\u6218",level:4},{value:"3\u3001\u7ed1\u5b9a\u5176\u4ed6\u65e5\u5fd7\u7684\u5b9e\u73b0\uff08Binding\uff09",id:"3\u7ed1\u5b9a\u5176\u4ed6\u65e5\u5fd7\u7684\u5b9e\u73b0binding",level:4},{value:"4\u3001\u6865\u63a5\u65e7\u7684\u65e5\u5fd7\u6846\u67b6\uff08Bridging\uff09",id:"4\u6865\u63a5\u65e7\u7684\u65e5\u5fd7\u6846\u67b6bridging",level:4},{value:"5\u3001SLF4J\u539f\u7406\u89e3\u6790",id:"5slf4j\u539f\u7406\u89e3\u6790",level:4},{value:"\u4e8c\u3001JCL \u65e5\u5fd7\u95e8\u9762",id:"\u4e8cjcl-\u65e5\u5fd7\u95e8\u9762",level:3},{value:"1\u3001JCL\u5165\u95e8",id:"1jcl\u5165\u95e8",level:4},{value:"2\u3001JCL\u539f\u7406",id:"2jcl\u539f\u7406",level:4},{value:"3\u3001\u65e5\u5fd7\u751f\u6001\u56fe\uff1a",id:"3\u65e5\u5fd7\u751f\u6001\u56fe",level:4},{value:"\u7b2c\u4e94\u7ae0 Logback\u7684\u4f7f\u7528",id:"\u7b2c\u4e94\u7ae0-logback\u7684\u4f7f\u7528",level:2},{value:"\u4e00\u3001logback\u5165\u95e8",id:"\u4e00logback\u5165\u95e8",level:3},{value:"\u4e8c\u3001\u6e90\u7801\u89e3\u6790",id:"\u4e8c\u6e90\u7801\u89e3\u6790",level:3},{value:"1\u3001spi\u673a\u5236",id:"1spi\u673a\u5236",level:4},{value:"2\u3001\u6e90\u7801\u89e3\u6790",id:"2\u6e90\u7801\u89e3\u6790",level:4},{value:"\u4e09\u3001\u4e09\u5927\u7ec4\u4ef6",id:"\u4e09\u4e09\u5927\u7ec4\u4ef6",level:3},{value:"\u56db\u3001logback\u914d\u7f6e",id:"\u56dblogback\u914d\u7f6e",level:3},{value:"\u4e94\u3001logback-access\u7684\u4f7f\u7528",id:"\u4e94logback-access\u7684\u4f7f\u7528",level:3},{value:"\u7b2c\u516d\u7ae0 log4j2\u7684\u4f7f\u7528",id:"\u7b2c\u516d\u7ae0-log4j2\u7684\u4f7f\u7528",level:2},{value:"\u4e00\u3001Log4j2\u5165\u95e8",id:"\u4e00log4j2\u5165\u95e8",level:3},{value:"1\u3001\u4f7f\u7528log4j-api\u505a\u95e8\u9762",id:"1\u4f7f\u7528log4j-api\u505a\u95e8\u9762",level:4},{value:"2\u3001\u4f7f\u7528slf4j\u505a\u95e8\u9762",id:"2\u4f7f\u7528slf4j\u505a\u95e8\u9762",level:4},{value:"\u4e8c\u3001Log4j2\u914d\u7f6e",id:"\u4e8clog4j2\u914d\u7f6e",level:3},{value:"1\u3001\u9ed8\u8ba4\u914d\u7f6e\uff1a",id:"1\u9ed8\u8ba4\u914d\u7f6e",level:4},{value:"\u4e09\u3001Log4j2\u5f02\u6b65\u65e5\u5fd7",id:"\u4e09log4j2\u5f02\u6b65\u65e5\u5fd7",level:3},{value:"\u7b2c\u4e03\u7ae0\uff1a\u600e\u4e48\u6253\u65e5\u5fd7",id:"\u7b2c\u4e03\u7ae0\u600e\u4e48\u6253\u65e5\u5fd7",level:2}],s={toc:p};function c(e){let{components:n,...t}=e;return(0,l.kt)("wrapper",(0,a.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"1\u65e5\u5fd7\u6846\u67b6"},"1.\u65e5\u5fd7\u6846\u67b6"),(0,l.kt)("h2",{id:"\u7b2c\u4e00\u7ae0-\u65e5\u5fd7\u7684\u6982\u5ff5"},"\u7b2c\u4e00\u7ae0 \u65e5\u5fd7\u7684\u6982\u5ff5"),(0,l.kt)("h3",{id:"\u4e00\u6982\u8ff0"},"\u4e00\u3001\u6982\u8ff0"),(0,l.kt)("p",null," \u65e5\u5fd7\u6587\u4ef6\u662f\u7528\u4e8e\u8bb0\u5f55\u7cfb\u7edf\u64cd\u4f5c\u4e8b\u4ef6\u7684\u6587\u4ef6\u96c6\u5408\uff0c\u53ef\u5206\u4e3a\u4e8b\u4ef6\u65e5\u5fd7\u548c\u6d88\u606f\u65e5\u5fd7\u3002\u5177\u6709\u5904\u7406\u5386\u53f2\u6570\u636e\u3001\u8bca\u65ad\u95ee\u9898\u7684\u8ffd\u8e2a\u4ee5\u53ca\u7406\u89e3\u7cfb\u7edf\u7684\u6d3b\u52a8\u7b49\u91cd\u8981\u4f5c\u7528\u3002"),(0,l.kt)("p",null," \u5728\u8ba1\u7b97\u673a\u4e2d\uff0c\u65e5\u5fd7\u6587\u4ef6\u662f\u8bb0\u5f55\u5728\u64cd\u4f5c\u7cfb\u7edf\u6216\u5176\u4ed6\u8f6f\u4ef6\u8fd0\u884c\u4e2d\u53d1\u751f\u7684\u4e8b\u4ef6\u6216\u5728\u901a\u4fe1\u8f6f\u4ef6\u7684\u4e0d\u540c\u7528\u6237\u4e4b\u95f4\u7684\u6d88\u606f\u7684\u6587\u4ef6\u3002\u8bb0\u5f55\u662f\u4fdd\u6301\u65e5\u5fd7\u7684\u884c\u4e3a\u3002\u5728\u6700\u7b80\u5355\u7684\u60c5\u51b5\u4e0b\uff0c\u6d88\u606f\u88ab\u5199\u5165\u5355\u4e2a\u65e5\u5fd7\u6587\u4ef6\u3002"),(0,l.kt)("h3",{id:"\u4e8c\u65e5\u5fd7\u7684\u4f5c\u7528"},"\u4e8c\u3001\u65e5\u5fd7\u7684\u4f5c\u7528"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u8c03\u8bd5"),(0,l.kt)("p",{parentName:"li"},"  \u5728Java\u9879\u76ee\u8c03\u8bd5\u65f6\uff0c\u67e5\u770b\u6808\u4fe1\u606f\u53ef\u4ee5\u65b9\u4fbf\u5730\u77e5\u9053\u5f53\u524d\u7a0b\u5e8f\u7684\u8fd0\u884c\u72b6\u6001\uff0c\u8f93\u51fa\u7684\u65e5\u5fd7\u4fbf\u4e8e\u8bb0\u5f55\u7a0b\u5e8f\u5728\u4e4b\u524d\u7684\u8fd0\u884c\u7ed3\u679c\u3002\u5982\u679c\u4f60\u5927\u91cf\u4f7f\u7528System.out\u6216\u8005System.err\uff0c\u8fd9\u662f\u4e00\u79cd\u6700\u65b9\u4fbf\u6700\u6709\u6548\u7684\u65b9\u6cd5\uff0c\u4f46\u663e\u5f97\u4e0d\u591f\u4e13\u4e1a\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u9519\u8bef\u5b9a\u4f4d"),(0,l.kt)("p",{parentName:"li"},"  \u4e0d\u8981\u4ee5\u4e3a\u9879\u76ee\u80fd\u6b63\u786e\u8dd1\u8d77\u6765\u5c31\u53ef\u4ee5\u9ad8\u6795\u65e0\u5fe7\uff0c\u9879\u76ee\u5728\u8fd0\u884c\u4e00\u6bb5\u65f6\u5019\u540e\uff0c\u53ef\u80fd\u7531\u4e8e\u6570\u636e\u95ee\u9898\uff0c\u7f51\u7edc\u95ee\u9898\uff0c\u5185\u5b58\u95ee\u9898\u7b49\u51fa\u73b0\u5f02\u5e38\u3002\u8fd9\u65f6\u65e5\u5fd7\u53ef\u4ee5\u5e2e\u52a9\u5f00\u53d1\u6216\u8005\u8fd0\u7ef4\u4eba\u5458\u5feb\u901f\u5b9a\u4f4d\u9519\u8bef\u4f4d\u7f6e\uff0c\u63d0\u51fa\u89e3\u51b3\u65b9\u6848\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u6570\u636e\u5206\u6790"),(0,l.kt)("p",{parentName:"li"},"  \u5927\u6570\u636e\u7684\u5174\u8d77\uff0c\u4f7f\u5f97\u5927\u91cf\u7684\u65e5\u5fd7\u5206\u6790\u6210\u4e3a\u53ef\u80fd\uff0cELK\u4e5f\u8ba9\u65e5\u5fd7\u5206\u6790\u95e8\u69db\u964d\u4f4e\u4e86\u5f88\u591a\u3002\u65e5\u5fd7\u4e2d\u8574\u542b\u4e86\u5927\u91cf\u7684\u7528\u6237\u6570\u636e\uff0c\u5305\u62ec\u70b9\u51fb\u884c\u4e3a\uff0c\u5174\u8da3\u504f\u597d\u7b49\uff0c\u7528\u6237\u753b\u50cf\u5bf9\u4e8e\u516c\u53f8\u4e0b\u4e00\u6b65\u7684\u6218\u7565\u65b9\u5411\u6709\u4e00\u5b9a\u6307\u5f15\u4f5c\u7528\u3002"))),(0,l.kt)("h3",{id:"\u4e09\u63a5\u89e6\u8fc7\u7684\u65e5\u5fd7"},"\u4e09\u3001\u63a5\u89e6\u8fc7\u7684\u65e5\u5fd7"),(0,l.kt)("p",null,"\u6700\u7b80\u5355\u7684\u65e5\u5fd7\u8f93\u51fa\u65b9\u5f0f\uff0c\u6211\u4eec\u6bcf\u5929\u90fd\u5728\u4f7f\u7528\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'System.out.println("\u8fd9\u4e2a\u6570\u7684\u7ed3\u679c\u662f\uff1a"+ num);\n')),(0,l.kt)("p",null,"\u4ee5\u53ca\u9519\u8bef\u65e5\u5fd7\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'System.err.println("\u6b64\u5904\u53d1\u751f\u4e86\u5f02\u5e38");\n')),(0,l.kt)("p",null,"\u6b64\u7c7b\u4ee3\u7801\u5728\u7a0b\u5e8f\u7684\u6267\u884c\u8fc7\u7a0b\u4e2d\u6ca1\u6709\u4ec0\u4e48\u5b9e\u8d28\u7684\u4f5c\u7528\uff0c\u4f46\u662f\u5374\u80fd\u6253\u5370\u4e00\u4e9b\u4e2d\u95f4\u53d8\u91cf\uff0c\u8f85\u52a9\u6211\u4eec\u8c03\u8bd5\u548c\u9519\u8bef\u7684\u6392\u67e5\u3002"),(0,l.kt)("p",null,"\u65e5\u5fd7\u7cfb\u7edf\u6211\u4eec\u4e5f\u89c1\u8fc7\uff1a"),(0,l.kt)("p",null,"\u5728tomcat\u4e2d"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021105443307-a3ff32dd.png",alt:"image-20211021105443307"}),"image-20211021105443307"),(0,l.kt)("p",null,"\u5f53\u6211\u4eec\u7684\u7a0b\u5e8f\u65e0\u6cd5\u542f\u52a8\u6216\u8005\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u95ee\u9898\uff0c\u4f1a\u6709\u6240\u8bb0\u5f55\uff0c\u6bd4\u5982\u6211\u7684catalina.log\u4e2d\u67e5\u770b\uff0c\u53d1\u73b0\u786e\u5b9e\u6709\u9519\u8bef\u4fe1\u606f\uff0c\u8fd9\u80fd\u5e2e\u6211\u4eec\u8fc5\u901f\u5b9a\u4f4d\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021105553886-9a0eb0bf.png",alt:"image-20211021105553886"}),"image-20211021105553886"),(0,l.kt)("p",null,"\u800c\u6211\u4eec\u7684System.err\u53ea\u80fd\u505a\u5230\u63a7\u5236\u53f0\u6253\u5370\u65e5\u5fd7\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u66f4\u5f3a\u5927\u65e5\u5fd7\u6846\u67b6\u6765\u5904\u7406\uff1a"),(0,l.kt)("h3",{id:"\u56db\u4e3b\u6d41\u65e5\u5fd7\u6846\u67b6"},"\u56db\u3001\u4e3b\u6d41\u65e5\u5fd7\u6846\u67b6"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u65e5\u5fd7\u5b9e\u73b0\uff08\u5177\u4f53\u5e72\u6d3b\u7684\uff09\uff1aJUL\uff08java util logging\uff09\u3001logback\u3001log4j\u3001log4j2"),(0,l.kt)("li",{parentName:"ul"},"\u65e5\u5fd7\u95e8\u9762\uff08\u6307\u5b9a\u89c4\u5219\u7684\uff09\uff1aJCL\uff08Jakarta Commons Logging\uff09\u3001slf4j\uff08 Simple Logging Facade for Java\uff09")),(0,l.kt)("h2",{id:"\u7b2c\u4e8c\u7ae0-jul\u65e5\u5fd7\u6846\u67b6"},"\u7b2c\u4e8c\u7ae0 JUL\u65e5\u5fd7\u6846\u67b6"),(0,l.kt)("p",null,"JUL\u5168\u79f0Java util Logging\u662fjava\u539f\u751f\u7684\u65e5\u5fd7\u6846\u67b6\uff0c\u4f7f\u7528\u65f6\u4e0d\u9700\u8981\u53e6\u5916\u5f15\u7528\u7b2c\u4e09\u65b9\u7c7b\u5e93\uff0c\u76f8\u5bf9\u5176\u4ed6\u65e5\u5fd7\u6846 \u67b6\u4f7f\u7528\u65b9\u4fbf\uff0c\u5b66\u4e60\u7b80\u5355\uff0c\u80fd\u591f\u5728\u5c0f\u578b\u5e94\u7528\u4e2d\u7075\u6d3b\u4f7f\u7528\u3002"),(0,l.kt)("p",null,"\u5728JUL\u4e2d\u6709\u4ee5\u4e0b\u7ec4\u4ef6\uff0c\u6211\u4eec\u5148\u505a\u4e86\u89e3\uff0c\u6162\u6162\u5b66\u4e60\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Loggers\uff1a\u88ab\u79f0\u4e3a\u8bb0\u5f55\u5668\uff0c\u5e94\u7528\u7a0b\u5e8f\u901a\u8fc7\u83b7\u53d6Logger\u5bf9\u8c61\uff0c\u8c03\u7528\u5176API\u6765\u6765\u53d1\u5e03\u65e5\u5fd7\u4fe1\u606f\u3002Logger \u901a\u5e38\u65f6\u5e94\u7528\u7a0b\u5e8f\u8bbf\u95ee\u65e5\u5fd7\u7cfb\u7edf\u7684\u5165\u53e3\u7a0b\u5e8f\u3002"),(0,l.kt)("li",{parentName:"ul"},"Appenders\uff1a\u4e5f\u88ab\u79f0\u4e3aHandlers\uff0c\u6bcf\u4e2aLogger\u90fd\u4f1a\u5173\u8054\u4e00\u7ec4Handlers\uff0cLogger\u4f1a\u5c06\u65e5\u5fd7\u4ea4\u7ed9\u5173\u8054 Handlers\u5904\u7406\uff0c\u7531Handlers\u8d1f\u8d23\u5c06\u65e5\u5fd7\u505a\u8bb0\u5f55\u3002Handlers\u5728\u6b64\u662f\u4e00\u4e2a\u62bd\u8c61\uff0c\u5176\u5177\u4f53\u7684\u5b9e\u73b0\u51b3\u5b9a\u4e86 \u65e5\u5fd7\u8bb0\u5f55\u7684\u4f4d\u7f6e\u53ef\u4ee5\u662f\u63a7\u5236\u53f0\u3001\u6587\u4ef6\u3001\u7f51\u7edc\u4e0a\u7684\u5176\u4ed6\u65e5\u5fd7\u670d\u52a1\u6216\u64cd\u4f5c\u7cfb\u7edf\u65e5\u5fd7\u7b49\u3002"),(0,l.kt)("li",{parentName:"ul"},"Layouts\uff1a\u4e5f\u88ab\u79f0\u4e3aFormatters\uff0c\u5b83\u8d1f\u8d23\u5bf9\u65e5\u5fd7\u4e8b\u4ef6\u4e2d\u7684\u6570\u636e\u8fdb\u884c\u8f6c\u6362\u548c\u683c\u5f0f\u5316\u3002Layouts\u51b3\u5b9a\u4e86 \u6570\u636e\u5728\u4e00\u6761\u65e5\u5fd7\u8bb0\u5f55\u4e2d\u7684\u6700\u7ec8\u5f62\u5f0f\u3002"),(0,l.kt)("li",{parentName:"ul"},"Level\uff1a\u6bcf\u6761\u65e5\u5fd7\u6d88\u606f\u90fd\u6709\u4e00\u4e2a\u5173\u8054\u7684\u65e5\u5fd7\u7ea7\u522b\u3002\u8be5\u7ea7\u522b\u7c97\u7565\u6307\u5bfc\u4e86\u65e5\u5fd7\u6d88\u606f\u7684\u91cd\u8981\u6027\u548c\u7d27\u8feb\uff0c\u6211 \u53ef\u4ee5\u5c06Level\u548cLoggers\uff0cAppenders\u505a\u5173\u8054\u4ee5\u4fbf\u4e8e\u6211\u4eec\u8fc7\u6ee4\u6d88\u606f\u3002"),(0,l.kt)("li",{parentName:"ul"},"Filters\uff1a\u8fc7\u6ee4\u5668\uff0c\u6839\u636e\u9700\u8981\u5b9a\u5236\u54ea\u4e9b\u4fe1\u606f\u4f1a\u88ab\u8bb0\u5f55\uff0c\u54ea\u4e9b\u4fe1\u606f\u4f1a\u88ab\u653e\u8fc7\u3002")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u603b\u7ed3\u4e00\u4e0b\u5c31\u662f\uff1a")),(0,l.kt)("p",null," \u7528\u6237\u4f7f\u7528Logger\u6765\u8fdb\u884c\u65e5\u5fd7\u8bb0\u5f55\uff0cLogger\u6301\u6709\u82e5\u5e72\u4e2aHandler\uff0c\u65e5\u5fd7\u7684\u8f93\u51fa\u64cd\u4f5c\u662f\u7531Handler\u5b8c\u6210\u7684\u3002 \u5728Handler\u5728\u8f93\u51fa\u65e5\u5fd7\u524d\uff0c\u4f1a\u7ecf\u8fc7Filter\u7684\u8fc7\u6ee4\uff0c\u5224\u65ad\u54ea\u4e9b\u65e5\u5fd7\u7ea7\u522b\u8fc7\u6ee4\u653e\u884c\u54ea\u4e9b\u62e6\u622a\uff0cHandler\u4f1a\u5c06\u65e5\u5fd7\u5185\u5bb9\u8f93\u51fa\u5230\u6307\u5b9a\u4f4d\u7f6e\uff08\u65e5\u5fd7\u6587\u4ef6\u3001\u63a7\u5236\u53f0\u7b49\uff09\u3002Handler\u5728\u8f93\u51fa\u65e5\u5fd7\u65f6\u4f1a\u4f7f\u7528Layout\uff0c\u5c06\u8f93\u51fa\u5185\u5bb9\u8fdb\u884c\u6392\u7248\u3002"),(0,l.kt)("h3",{id:"\u4e00\u5165\u95e8\u6848\u4f8b"},"\u4e00\u3001\u5165\u95e8\u6848\u4f8b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public static void main(String[] args) {\n    Logger logger = Logger.getLogger("myLogger");\n    logger.info("\u4fe1\u606f");\n    logger.warning("\u8b66\u544a\u4fe1\u606f");\n    logger.severe("\u4e25\u91cd\u4fe1\u606f");\n}\n')),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021111645121-964a89ab.png",alt:"image-20211021111645121"}),"image-20211021111645121"),(0,l.kt)("h3",{id:"\u4e8c\u65e5\u5fd7\u7684\u7ea7\u522b"},"\u4e8c\u3001\u65e5\u5fd7\u7684\u7ea7\u522b"),(0,l.kt)("p",null," jul\u4e2d\u5b9a\u4e49\u7684\u65e5\u5fd7\u7ea7\u522b\uff0c\u4ece\u4e0a\u8ff0\u4f8b\u5b50\u4e2d\u6211\u4eec\u4e5f\u770b\u5230\u4f7f\u7528info\u548cwarning\u6253\u5370\u51fa\u7684\u65e5\u5fd7\u6709\u4e0d\u540c\u7684\u524d\u7f00\uff0c\u901a\u8fc7\u7ed9\u65e5\u5fd7\u8bbe\u7f6e\u4e0d\u540c\u7684\u7ea7\u522b\u53ef\u4ee5\u6e05\u6670\u7684\u4ece\u65e5\u5fd7\u4e2d\u533a\u5206\u51fa\u54ea\u4e9b\u662f\u57fa\u672c\u4fe1\u606f\uff0c\u54ea\u4e9b\u662f\u8c03\u8bd5\u4fe1\u606f\uff0c\u54ea\u4e9b\u662f\u4e25\u91cd\u7684\u5f02\u5e38\u3002"),(0,l.kt)("p",null,"\uff081\uff09java.util.logging.Level\u4e2d\u5b9a\u4e49\u4e86\u65e5\u5fd7\u7684\u7ea7\u522b\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"SEVERE\uff08\u6700\u9ad8\u503c\uff09"),(0,l.kt)("li",{parentName:"ol"},"WARNING"),(0,l.kt)("li",{parentName:"ol"},"INFO \uff08\u9ed8\u8ba4\u7ea7\u522b\uff09"),(0,l.kt)("li",{parentName:"ol"},"CONFIG"),(0,l.kt)("li",{parentName:"ol"},"FINE"),(0,l.kt)("li",{parentName:"ol"},"FINER"),(0,l.kt)("li",{parentName:"ol"},"FINEST\uff08\u6700\u4f4e\u503c\uff09")),(0,l.kt)("p",null,"\u518d\u4f8b\u5982\uff1a\u6211\u4eec\u67e5\u770btomcat\u7684\u65e5\u5fd7\uff0c\u80fd\u660e\u663e\u7684\u770b\u5230\u4e0d\u540c\u7ea7\u522b\u7684\u65e5\u5fd7\uff0c\u5176\u5b9etomcat\u9ed8\u8ba4\u4f7f\u7528\u7684\u5c31\u662fJUL\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021112420933-acbc908d.png",alt:"image-20211021112420933"}),"image-20211021112420933"),(0,l.kt)("p",null,"\u8fd8\u6709\u4e24\u4e2a\u7279\u6b8a\u7684\u7ea7\u522b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"OFF\uff0c\u53ef\u7528\u6765\u5173\u95ed\u65e5\u5fd7\u8bb0\u5f55\u3002"),(0,l.kt)("li",{parentName:"ul"},"ALL\uff0c\u542f\u7528\u6240\u6709\u6d88\u606f\u7684\u65e5\u5fd7\u8bb0\u5f55\u3002")),(0,l.kt)("p",null,"\u867d\u7136\u6211\u4eec\u6d4b\u8bd5\u4e867\u4e2a\u65e5\u5fd7\u7ea7\u522b\uff0c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Test\npublic void testLogger() {\n    Logger logger = Logger.getLogger(LoggerTest.class.getName());\n    logger.severe("severe");\n    logger.warning("warning");\n    logger.info("info");\n    logger.config("config");\n    logger.fine("fine");\n    logger.finer("finer");\n    logger.finest("finest");\n}\n')),(0,l.kt)("p",null,"\u6211\u4eec\u53d1\u73b0\u80fd\u591f\u6253\u5370\u7684\u53ea\u6709\u4e09\u884c\uff0c\u8fd9\u662f\u4e3a\u4ec0\u4e48\u5462\uff1f"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021112943297-146bb073.png",alt:"image-20211021112943297"}),"image-20211021112943297"),(0,l.kt)("p",null,"\u6211\u4eec\u627e\u4e00\u4e0b\u8fd9\u4e2a\u6587\u4ef6\uff0c\u4e0b\u56fe\u662fjdk11\u7684\u65e5\u5fd7\u914d\u7f6e\u6587\u4ef6\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021113111605-8c77f1ae.png",alt:"image-20211021113111605"}),"image-20211021113111605"),(0,l.kt)("p",null,"\u6216\u8005\u5728jdk1.8\u4e2d\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021113311661-8a239252.png",alt:"image-20211021113311661"}),"image-20211021113311661"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021113415090-8c59f8f9.png",alt:"image-20211021113415090"}),"image-20211021113415090"),(0,l.kt)("p",null,"\u5c31\u53ef\u4ee5\u770b\u5230\u7cfb\u7edf\u9ed8\u8ba4\u5728\u63a7\u5236\u53f0\u6253\u5370\u7684\u65e5\u5fd7\u7ea7\u522b\u4e86\uff0c\u7cfb\u7edf\u914d\u7f6e\u6211\u4eec\u6682\u4e14\u4e0d\u52a8\uff0c\u4e00\u4f1a\u6211\u4eec\u72ec\u7acb\u521b\u5efa\u914d\u7f6e\u6587\u4ef6\u5b8c\u6210\u4fee\u6539\u3002"),(0,l.kt)("p",null,"\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u7684\u770b\u770b\u8fd9\u4e2a\u65e5\u5fd7\u914d\u7f6e\u4e86\u54ea\u4e9b\u5185\u5bb9\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-properties"},".level= INFO\n\n############################################################\n# Handler specific properties.\n# Describes specific configuration info for Handlers.\n############################################################\n\n# default file output is in user's home directory.\njava.util.logging.FileHandler.pattern = %h/java%u.log\njava.util.logging.FileHandler.limit = 50000\njava.util.logging.FileHandler.count = 1\n# Default number of locks FileHandler can obtain synchronously.\n# This specifies maximum number of attempts to obtain lock file by FileHandler\n# implemented by incrementing the unique field %u as per FileHandler API documentation.\njava.util.logging.FileHandler.maxLocks = 100\njava.util.logging.FileHandler.formatter = java.util.logging.XMLFormatter\n\n# Limit the message that are printed on the console to INFO and above.\njava.util.logging.ConsoleHandler.level = INFO\njava.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter\n")),(0,l.kt)("p",null," \u5728\u65e5\u5fd7\u4e2d\u6211\u4eec\u53d1\u73b0\u4e86\uff0c\u8c8c\u4f3c\u53ef\u4ee5\u7ed9\u8fd9\u4e2a\u65e5\u5fd7\u5bf9\u8c61\u6dfb\u52a0\u5404\u79cdhandler\u5c31\u662f\u5904\u7406\u5668\uff0c\u6bd4\u5982ConsoleHandler\u4e13\u95e8\u5904\u7406\u63a7\u5236\u53f0\u65e5\u5fd7\uff0cFileHandler\u8c8c\u4f3c\u53ef\u4ee5\u5904\u7406\u6587\u4ef6\uff0c\u540c\u65f6\u6211\u4eec\u786e\u5b9e\u53d1\u73b0\u4e86\u4ed6\u6709\u8fd9\u4e48\u4e00\u4e2a\u65b9\u6cd5\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021114314901-e1fd4727.png",alt:"image-20211021114314901"}),"image-20211021114314901"),(0,l.kt)("h3",{id:"\u4e09\u65e5\u5fd7\u914d\u7f6e"},"\u4e09\u3001\u65e5\u5fd7\u914d\u7f6e"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Test\npublic void testLogConfig() throws Exception {\n    // 1.\u521b\u5efa\u65e5\u5fd7\u8bb0\u5f55\u5668\u5bf9\u8c61\n    Logger logger = Logger.getLogger("com.ydlclass.log.JULTest");\n    // \u4e00\u3001\u81ea\u5b9a\u4e49\u65e5\u5fd7\u7ea7\u522b\n    // a.\u5173\u95ed\u7cfb\u7edf\u9ed8\u8ba4\u914d\u7f6e\n    logger.setUseParentHandlers(false);\n    // b.\u521b\u5efahandler\u5bf9\u8c61\n    ConsoleHandler consoleHandler = new ConsoleHandler();\n    // c.\u521b\u5efaformatter\u5bf9\u8c61\n    SimpleFormatter simpleFormatter = new SimpleFormatter();\n    // d.\u8fdb\u884c\u5173\u8054\n    consoleHandler.setFormatter(simpleFormatter);\n    logger.addHandler(consoleHandler);\n    // e.\u8bbe\u7f6e\u65e5\u5fd7\u7ea7\u522b\n    logger.setLevel(Level.ALL);\n    consoleHandler.setLevel(Level.ALL);\n    // \u4e8c\u3001\u8f93\u51fa\u5230\u65e5\u5fd7\u6587\u4ef6\n    FileHandler fileHandler = new FileHandler("d:/logs/jul.log");\n    fileHandler.setFormatter(simpleFormatter);\n    logger.addHandler(fileHandler);\n    // 2.\u65e5\u5fd7\u8bb0\u5f55\u8f93\u51fa\n    logger.severe("severe");\n    logger.warning("warning");\n    logger.info("info");\n    logger.config("config");\n    logger.fine("fine");\n    logger.finer("finer");\n    logger.finest("finest");\n}\n')),(0,l.kt)("p",null,"\u518d\u6b21\u67e5\u770b\u7ed3\u679c\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"10\u6708 21, 2021 11:50:01 \u4e0a\u5348 com.ydlclass.entity.LoggerTest testConfig\n\u4e25\u91cd: severe\n10\u6708 21, 2021 11:50:01 \u4e0a\u5348 com.ydlclass.entity.LoggerTest testConfig\n\u8b66\u544a: warning\n10\u6708 21, 2021 11:50:01 \u4e0a\u5348 com.ydlclass.entity.LoggerTest testConfig\n\u4fe1\u606f: info\n10\u6708 21, 2021 11:50:01 \u4e0a\u5348 com.ydlclass.entity.LoggerTest testConfig\n\u914d\u7f6e: config\n10\u6708 21, 2021 11:50:01 \u4e0a\u5348 com.ydlclass.entity.LoggerTest testConfig\n\u8be6\u7ec6: fine\n10\u6708 21, 2021 11:50:01 \u4e0a\u5348 com.ydlclass.entity.LoggerTest testConfig\n\u8f83\u8be6\u7ec6: finer\n10\u6708 21, 2021 11:50:01 \u4e0a\u5348 com.ydlclass.entity.LoggerTest testConfig\n\u975e\u5e38\u8be6\u7ec6: finest\n\nProcess finished with exit code 0\n")),(0,l.kt)("p",null,"\u6587\u4ef6\u4e2d\u4e5f\u8f93\u51fa\u4e86\u6b63\u786e\u7684\u7ed3\u679c\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021115105181-2de920a7.png",alt:"image-20211021115105181"}),"image-20211021115105181"),(0,l.kt)("h3",{id:"\u56db-logger\u4e4b\u95f4\u7684\u7236\u5b50\u5173\u7cfb"},"\u56db\u3001 Logger\u4e4b\u95f4\u7684\u7236\u5b50\u5173\u7cfb"),(0,l.kt)("p",null," JUL\u4e2dLogger\u4e4b\u95f4\u5b58\u5728\u7236\u5b50\u5173\u7cfb\uff0c\u8fd9\u79cd\u7236\u5b50\u5173\u7cfb\u901a\u8fc7\u6811\u72b6\u7ed3\u6784\u5b58\u50a8\uff0cJUL\u5728\u521d\u59cb\u5316\u65f6\u4f1a\u521b\u5efa\u4e00\u4e2a\u9876\u5c42 RootLogger\u4f5c\u4e3a\u6240\u6709Logger\u7236Logger\uff0c\u5b58\u50a8\u4e0a\u4f5c\u4e3a\u6811\u72b6\u7ed3\u6784\u7684\u6839\u8282\u70b9\u3002\u5e76\u7236\u5b50\u5173\u7cfb\u901a\u8fc7\u540d\u79f0\u6765\u5173\u8054\u3002\u9ed8\u8ba4\u5b50Logger\u4f1a\u7ee7\u627f\u7236Logger\u7684\u5c5e\u6027\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021123800692-5d6e86a9.png",alt:"image-20211021123800692"}),"image-20211021123800692"),(0,l.kt)("p",null,"\u6240\u6709\u7684logger\u5b9e\u4f8b\u90fd\u662f\u7531LoggerManager\u7edf\u4e00\u7ba1\u7406\uff0c\u4e0d\u59a8\u6211\u4eec\u70b9\u8fdbgetLogger\u65b9\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"private static Logger demandLogger(String name, String resourceBundleName, Class<?> caller) {\n    LogManager manager = LogManager.getLogManager();\n    if (!SystemLoggerHelper.disableCallerCheck) {\n        if (isSystem(caller.getModule())) {\n            return manager.demandSystemLogger(name, resourceBundleName, caller);\n        }\n    }\n    return manager.demandLogger(name, resourceBundleName, caller);\n    // ends up calling new Logger(name, resourceBundleName, caller)\n    // iff the logger doesn't exist already\n}\n")),(0,l.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u770b\u5230LogManager\u662f\u5355\u4f8b\u7684\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public static LogManager getLogManager() {\n    if (manager != null) {\n        manager.ensureLogManagerInitialized();\n    }\n    return manager;\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Test\npublic void testLogParent() throws Exception {\n    Logger logger1 = Logger.getLogger("com.ydlclass.service");\n    Logger logger2 = Logger.getLogger("com.ydlclass");\n    System.out.println("logger1 = " + logger1);\n    System.out.println("logger1.getParent() = " + logger1.getParent());\n    System.out.println("logger2 = " + logger2);\n    System.out.println("logger2.getParent() = " + logger2.getParent());\n    System.out.println(logger1.getParent() == logger2);\n}\n\n\u7ed3\u679c\uff1a\nlogger1 = java.util.logging.Logger@2b4bac49\nlogger1.getParent() = java.util.logging.Logger@fd07cbb\nlogger2 = java.util.logging.Logger@fd07cbb\nlogger2.getParent() = java.util.logging.LogManager$RootLogger@3571b748\ntrue\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Test\npublic void testLogParent() throws Exception {\n    Logger logger1 = Logger.getLogger("com.ydlclass.service");\n    Logger logger2 = Logger.getLogger("com.ydlclass");\n    // \u4e00\u3001\u5bf9logger2\u8fdb\u884c\u72ec\u7acb\u7684\u914d\u7f6e\n    // 1.\u5173\u95ed\u7cfb\u7edf\u9ed8\u8ba4\u914d\u7f6e\n    logger2.setUseParentHandlers(false);\n    // 2.\u521b\u5efahandler\u5bf9\u8c61\n    ConsoleHandler consoleHandler = new ConsoleHandler();\n    // 3.\u521b\u5efaformatter\u5bf9\u8c61\n    SimpleFormatter simpleFormatter = new SimpleFormatter();\n    // 4.\u8fdb\u884c\u5173\u8054\n    consoleHandler.setFormatter(simpleFormatter);\n    logger2.addHandler(consoleHandler);\n    // 5.\u8bbe\u7f6e\u65e5\u5fd7\u7ea7\u522b\n    logger2.setLevel(Level.ALL);\n    consoleHandler.setLevel(Level.ALL);\n    // \u6d4b\u8bd5logger1\u662f\u5426\u88ablogger2\u5f71\u54cd\n    logger1.severe("severe");\n    logger1.warning("warning");\n    logger1.info("info");\n    logger1.config("config");\n    logger1.fine("fine");\n    logger1.finer("finer");\n    logger1.finest("finest");\n}\n    \n    \n 10\u6708 21, 2021 12:45:15 \u4e0b\u5348 com.ydlclass.entity.LoggerTest testLogParent\n\u4e25\u91cd: severe\n10\u6708 21, 2021 12:45:15 \u4e0b\u5348 com.ydlclass.entity.LoggerTest testLogParent\n\u8b66\u544a: warning\n10\u6708 21, 2021 12:45:15 \u4e0b\u5348 com.ydlclass.entity.LoggerTest testLogParent\n\u4fe1\u606f: info\n10\u6708 21, 2021 12:45:15 \u4e0b\u5348 com.ydlclass.entity.LoggerTest testLogParent\n\u914d\u7f6e: config\n10\u6708 21, 2021 12:45:15 \u4e0b\u5348 com.ydlclass.entity.LoggerTest testLogParent\n\u8be6\u7ec6: fine\n10\u6708 21, 2021 12:45:15 \u4e0b\u5348 com.ydlclass.entity.LoggerTest testLogParent\n\u8f83\u8be6\u7ec6: finer\n10\u6708 21, 2021 12:45:15 \u4e0b\u5348 com.ydlclass.entity.LoggerTest testLogParent\n\u975e\u5e38\u8be6\u7ec6: finest\n\nProcess finished with exit code 0\n   \n')),(0,l.kt)("h3",{id:"\u4e94\u65e5\u5fd7\u683c\u5f0f\u5316"},"\u4e94\u3001\u65e5\u5fd7\u683c\u5f0f\u5316"),(0,l.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u72ec\u7acb\u7684\u5b9e\u73b0\u65e5\u5fd7\u683c\u5f0f\u5316\u7684Formatter\uff0c\u800c\u4e0d\u4f7f\u7528SimpleFormatter\uff0c\u6211\u4eec\u53ef\u4ee5\u505a\u5982\u4e0b\u5904\u7406\uff0c\u6700\u540e\u8fd4\u56de\u7684\u7ed3\u679c\u6211\u4eec\u53ef\u4ee5\u968f\u610f\u62fc\u5199\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'Formatter myFormatter = new Formatter(){\n    @Override\n    public String format(LogRecord record) {\n        return record.getLoggerName()+"." +record.getSourceMethodName() + " " + LocalDateTime.ofInstant(record.getInstant(), ZoneId.systemDefault())+"\\r\\n"\n            +record.getLevel()+": " +record.getMessage() + "\\r\\n";\n    }\n};\n')),(0,l.kt)("p",null,"\u7ed3\u679c\u4e3a\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021131248992-5b512b7e.png",alt:"image-20211021131248992"}),"image-20211021131248992"),(0,l.kt)("p",null,"\u5f53\u7136\u6211\u4eec\u53c2\u8003\u4e00\u4e0bSimpleFormatter\u7684\u8be5\u65b9\u6cd5\u7684\u5b9e\u73b0\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"// format string for printing the log record\nstatic String getLoggingProperty(String name) {\n    return LogManager.getLogManager().getProperty(name);\n}\n\nprivate final String format =\n    SurrogateLogger.getSimpleFormat(SimpleFormatter::getLoggingProperty);\n\nZonedDateTime zdt = ZonedDateTime.ofInstant(\n    record.getInstant(), ZoneId.systemDefault());\nreturn String.format(format,\n                     zdt,\n                     source,\n                     record.getLoggerName(),\n                     record.getLevel().getLocalizedLevelName(),\n                     message,\n                     throwable);\n")),(0,l.kt)("p",null,"\u8fd9\u4e2a\u5199\u6cd5\u8c8c\u4f3c\u6bd4\u6211\u4eec\u7684\u5199\u6cd5\u9ad8\u7ea7\u4e00\u70b9\uff0c\u6240\u4ee5\u6211\u4eec\u5fc5\u987b\u597d\u597d\u5b66\u4e00\u4e0bString\u7684format\u65b9\u6cd5\u4e86\u3002"),(0,l.kt)("h4",{id:"1string\u7684format\u65b9\u6cd5"},"1\u3001String\u7684format\u65b9\u6cd5"),(0,l.kt)("p",null,"String\u7c7b\u7684format()\u65b9\u6cd5\u7528\u4e8e\u521b\u5efa\u683c\u5f0f\u5316\u7684\u5b57\u7b26\u4e32\u4ee5\u53ca\u8fde\u63a5\u591a\u4e2a\u5b57\u7b26\u4e32\u5bf9\u8c61\u3002"),(0,l.kt)("p",null,"format()\u65b9\u6cd5\u6709\u4e24\u79cd\u91cd\u8f7d\u5f62\u5f0f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public static String format(String format, Object... args) {\n    return new Formatter().format(format, args).toString();\n}\n\npublic static String format(Locale l, String format, Object... args) {\n    return new Formatter(l).format(format, args).toString();\n}\n")),(0,l.kt)("p",null,"\u5728\u8fd9\u4e2a\u65b9\u6cd5\u4e2d\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u5b57\u7b26\u4e32\u6a21\u677f\uff0c\u7136\u540e\u4f7f\u7528\u7c7b\u4f3c\u586b\u7a7a\u7684\u65b9\u5f0f\u5c06\u6a21\u677f\u683c\u5f0f\u5316\u6210\u6211\u4eec\u60f3\u8981\u7684\u7ed3\u679c\u5b57\u7b26\u4e32\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'String java = String.format("hello %s", "world");\n')),(0,l.kt)("p",null,"\u5f97\u5230\u7684\u7ed3\u679c\u5c31\u662fhello world\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u7b2c\u4e00\u4e2a\u53c2\u6570\u5f53\u505a\u6a21\u677f\uff0c %s\u5f53\u505a\u586b\u7a7a\u9898\uff0c\u540e\u8fb9\u7684\u53ef\u53d8\u53c2\u6570\u5f53\u505a\u7b54\u6848\u3002"),(0,l.kt)("h4",{id:"2\u5e38\u7528\u7684\u8f6c\u6362\u7b26"},"2\u3001\u5e38\u7528\u7684\u8f6c\u6362\u7b26"),(0,l.kt)("p",null,"\u5f53\u7136\u4e0d\u540c\u6570\u636e\u7c7b\u578b\u9700\u8981\u4e0d\u540c\u8f6c\u6362\u7b26\u5b8c\u6210\u5b57\u7b26\u4e32\u7684\u8f6c\u6362\uff0c\u4ee5\u4e0b\u662f\u4e0d\u540c\u7c7b\u578b\u7684\u8f6c\u5316\u7b26\u5217\u8868\uff1a"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"\u8f6c\u6362\u7b26"),(0,l.kt)("th",{parentName:"tr",align:"left"},"\u8be6\u7ec6\u8bf4\u660e"),(0,l.kt)("th",{parentName:"tr",align:"left"},"\u793a\u4f8b"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("strong",{parentName:"td"},"%s")),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("strong",{parentName:"td"},"\u5b57\u7b26\u4e32\u7c7b\u578b")),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("strong",{parentName:"td"},"\u201c\u559c\u6b22\u8bf7\u6536\u85cf\u201d"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"%c"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u5b57\u7b26\u7c7b\u578b"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u2018m\u2019")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"%b"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u5e03\u5c14\u7c7b\u578b"),(0,l.kt)("td",{parentName:"tr",align:"left"},"true")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("strong",{parentName:"td"},"%d")),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("strong",{parentName:"td"},"\u6574\u6570\u7c7b\u578b\uff08\u5341\u8fdb\u5236\uff09")),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("strong",{parentName:"td"},"88"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"%x"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u6574\u6570\u7c7b\u578b\uff08\u5341\u516d\u8fdb\u5236\uff09"),(0,l.kt)("td",{parentName:"tr",align:"left"},"FF")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"%o"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u6574\u6570\u7c7b\u578b\uff08\u516b\u8fdb\u5236\uff09"),(0,l.kt)("td",{parentName:"tr",align:"left"},"77")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("strong",{parentName:"td"},"%f")),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("strong",{parentName:"td"},"\u6d6e\u70b9\u7c7b\u578b")),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("strong",{parentName:"td"},"8.888"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"%a"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u5341\u516d\u8fdb\u5236\u6d6e\u70b9\u7c7b\u578b"),(0,l.kt)("td",{parentName:"tr",align:"left"},"FF.35AE")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"%e"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u6307\u6570\u7c7b\u578b"),(0,l.kt)("td",{parentName:"tr",align:"left"},"9.38e+5")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("strong",{parentName:"td"},"%n")),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u6362\u884c\u7b26"),(0,l.kt)("td",{parentName:"tr",align:"left"})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"%tx"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u65e5\u671f\u4e0e\u65f6\u95f4\u7c7b\u578b\uff08x\u4ee3\u8868\u4e0d\u540c\u7684\u65e5\u671f\u4e0e\u65f6\u95f4\u8f6c\u6362\u7b26)"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u540e\u8fb9\u8be6\u7ec6\u8bf4")))),(0,l.kt)("p",null,"\u5c0f\u4f8b\u5b50\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'System.out.printf("\u8fc7\u5e74\u4e86\uff0c%s\u4eca\u5e74%d\u5c81\u4e86\uff0c\u4eca\u5929\u6536\u4e86%f\u5143\u7684\u538b\u5c81\u94b1!",\n                "\u5c0f\u660e",5,88.88);\n\n\u7ed3\u679c\uff1a\n    \u8fc7\u5e74\u4e86\uff0c\u5c0f\u660e\u4eca\u5e745\u5c81\u4e86\uff0c\u4eca\u5929\u6536\u4e8688.880000\u5143\u7684\u538b\u5c81\u94b1!\n')),(0,l.kt)("p",null,"\u8fd9\u8981\u6bd4\u62fc\u5199\u5b57\u7b26\u4e32\u7b80\u5355\u591a\u4e86\u3002"),(0,l.kt)("h4",{id:"3\u7279\u6b8a\u7b26\u53f7"},"3\u3001\u7279\u6b8a\u7b26\u53f7"),(0,l.kt)("p",null,"\u63a5\u4e0b\u6765\u6211\u4eec\u770b\u51e0\u4e2a\u7279\u6b8a\u5b57\u7b26\u7684\u5e38\u7528\u642d\u914d\uff0c\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e9b\u9ad8\u7ea7\u529f\u80fd\uff1a"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"\u6807\u5fd7"),(0,l.kt)("th",{parentName:"tr",align:"left"},"\u8bf4\u660e"),(0,l.kt)("th",{parentName:"tr",align:"left"},"\u793a\u4f8b"),(0,l.kt)("th",{parentName:"tr",align:"left"},"\u7ed3\u679c"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"+"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u4e3a\u6b63\u6570\u6216\u8005\u8d1f\u6570\u6dfb\u52a0\u7b26\u53f7\uff0c\u56e0\u4e3a\u4e00\u822c\u6574\u6570\u4e0d\u4f1a\u4e3b\u52a8\u52a0\u7b26\u53f7"),(0,l.kt)("td",{parentName:"tr",align:"left"},"(\u201c%+d\u201d,15)"),(0,l.kt)("td",{parentName:"tr",align:"left"},"+15")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"0"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u6570\u5b57\u524d\u9762\u88650\uff0c\u7528\u4e8e\u5bf9\u9f50"),(0,l.kt)("td",{parentName:"tr",align:"left"},"(\u201c%04d\u201d, 99)"),(0,l.kt)("td",{parentName:"tr",align:"left"},"0099")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"\u7a7a\u683c"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u5728\u6574\u6570\u4e4b\u524d\u6dfb\u52a0\u6307\u5b9a\u6570\u91cf\u7684\u7a7a\u683c"),(0,l.kt)("td",{parentName:"tr",align:"left"},"(\u201c%4d\u201d, 99)"),(0,l.kt)("td",{parentName:"tr",align:"left"},"99")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},","),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u4ee5\u201c,\u201d\u5bf9\u6570\u5b57\u5206\u7ec4(\u5e38\u7528\u663e\u793a\u91d1\u989d)"),(0,l.kt)("td",{parentName:"tr",align:"left"},"(\u201c%,f\u201d, 9999.99)"),(0,l.kt)("td",{parentName:"tr",align:"left"},"9,999.990000")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"("),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u4f7f\u7528\u62ec\u53f7\u5305\u542b\u8d1f\u6570"),(0,l.kt)("td",{parentName:"tr",align:"left"},"(\u201c%(f\u201d, -99.99)"),(0,l.kt)("td",{parentName:"tr",align:"left"},"(99.990000)")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'System.out.printf("\u8fc7\u5e74\u4e86\uff0c%s\u4eca\u5e74%03d\u5c81\u4e86\uff0c\u4eca\u5929\u6536\u4e86%,f\u5143\u7684\u538b\u5c81\u94b1!",\n                "\u5c0f\u660e",5,8888.88);\n                \u7ed3\u679c\n        \u8fc7\u5e74\u4e86\uff0c\u5c0f\u660e\u4eca\u5e74005\u5c81\u4e86\uff0c\u4eca\u5929\u6536\u4e868,888.880000\u5143\u7684\u538b\u5c81\u94b1!        \n')),(0,l.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684\u53ef\u53d8\u53c2\u6570\u662f\u5b89\u88c5\u987a\u5e8f\u4f9d\u6b21\u66ff\u6362\uff0c\u4f46\u662f\u6211\u60f3\u91cd\u590d\u5229\u7528\u53ef\u53d8\u53c2\u6570\u90a3\u8be5\u600e\u4e48\u5904\u7406\u5462\uff1f"),(0,l.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u91c7\u7528 \u5728\u8f6c\u6362\u7b26\u4e2d\u52a0",(0,l.kt)("inlineCode",{parentName:"p"},"\u6570\u5b57$"),"\u5b8c\u6210\u5339\u914d\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'System.out.printf("%1$s %1$s %1$s","\u5c0f\u660e");\n')),(0,l.kt)("p",null,"\u5176\u4e2d1\u5c31\u4ee3\u8868\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u90a3\u4e482\u5c31\u4ee3\u8868\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u90a3\u4e482\u5c31\u4ee3\u8868\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u90a3\u4e482\u5c31\u4ee3\u8868\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e86\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"\u5c0f\u660e \u5c0f\u660e \u5c0f\u660e\n")),(0,l.kt)("h4",{id:"4\u65e5\u671f\u5904\u7406"},"4\u3001\u65e5\u671f\u5904\u7406"),(0,l.kt)("p",null,"\u7b2c\u4e00\u4e2a\u4f8b\u5b50\u4e2d\u6709\u8bf4\u5230 %tx x\u4ee3\u8868\u65e5\u671f\u8f6c\u6362\u7b26 \u6211\u4e5f\u987a\u4fbf\u5217\u4e3e\u4e0b\u65e5\u671f\u8f6c\u6362\u7b26"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"\u6807\u5fd7"),(0,l.kt)("th",{parentName:"tr",align:"left"},"\u8bf4\u660e"),(0,l.kt)("th",{parentName:"tr",align:"left"},"\u793a\u4f8b"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"c"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u5305\u62ec\u5168\u90e8\u65e5\u671f\u548c\u65f6\u95f4\u4fe1\u606f"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u5468\u56db 10\u6708 21 14:52:10 GMT+08:00 2021")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"F"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u201c\u5e74-\u6708-\u65e5\u201d\u683c\u5f0f"),(0,l.kt)("td",{parentName:"tr",align:"left"},"2021-10-21")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"D"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u201c\u6708/\u65e5/\u5e74\u201d\u683c\u5f0f"),(0,l.kt)("td",{parentName:"tr",align:"left"},"10/21/21")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"r"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u201cHH:MM:SS PM\u201d\u683c\u5f0f\uff0812\u65f6\u5236\uff09"),(0,l.kt)("td",{parentName:"tr",align:"left"},"02:53:20 \u4e0b\u5348")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"T"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u201cHH:MM:SS\u201d\u683c\u5f0f\uff0824\u65f6\u5236\uff09"),(0,l.kt)("td",{parentName:"tr",align:"left"},"14:53:39")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"R"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u201cHH:MM\u201d\u683c\u5f0f\uff0824\u65f6\u5236\uff09"),(0,l.kt)("td",{parentName:"tr",align:"left"},"14:53")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"b"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u6708\u4efd\u672c\u5730\u5316"),(0,l.kt)("td",{parentName:"tr",align:"left"},"10\u6708")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"y"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u4e24\u4f4d\u7684\u5e74"),(0,l.kt)("td",{parentName:"tr",align:"left"},"21")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"Y"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u56db\u4f4d\u7684\u5e74"),(0,l.kt)("td",{parentName:"tr",align:"left"},"2021")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"m"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u6708"),(0,l.kt)("td",{parentName:"tr",align:"left"},"10")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"d"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u65e5"),(0,l.kt)("td",{parentName:"tr",align:"left"},"21")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"H"),(0,l.kt)("td",{parentName:"tr",align:"left"},"24\u5c0f\u65f6\u5236\u7684\u65f6"),(0,l.kt)("td",{parentName:"tr",align:"left"},"14")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"l"),(0,l.kt)("td",{parentName:"tr",align:"left"},"12\u5c0f\u65f6\u5236\u7684\u65f6"),(0,l.kt)("td",{parentName:"tr",align:"left"},"2")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"M"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u5206"),(0,l.kt)("td",{parentName:"tr",align:"left"},"57")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"S"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u79d2"),(0,l.kt)("td",{parentName:"tr",align:"left"},"46")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"s"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\u6233"),(0,l.kt)("td",{parentName:"tr",align:"left"},"1634799527")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"p"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u4e0a\u5348\u8fd8\u662f\u4e0b\u5348"),(0,l.kt)("td",{parentName:"tr",align:"left"},"\u4e0b\u5348")))),(0,l.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u4e09\u4e2a\u7c7b\u53bb\u8fdb\u884c\u683c\u5f0f\u5316\uff0c\u5176\u4e2d\u53ef\u80fd\u5b58\u5728\u4e0d\u652f\u6301\u7684\u60c5\u51b5\uff0c\u6bd4\u5982LocalDateTime\u4e0d\u652f\u6301c\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'System.out.printf("%tc",new Date());\nSystem.out.printf("%tc",ZonedDateTime.now());\nSystem.out.printf("%tF",LocalDateTime.now());\n')),(0,l.kt)("p",null,"\u6b64\u65f6\u6211\u4eec\u4f7f\u7528debug\u67e5\u770b\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u7684fomat\uff0c\u6211\u4eec\u4e0d\u59a8\u6765\u8bfb\u4e00\u8bfb\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021131531722-c04db0d5.png",alt:"image-20211021131531722"}),"image-20211021131531722"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"10\u6708 21, 2021 2:23:42 \u4e0b\u5348 com.ydlclass.entity.LoggerTest testLogParent\n\u8b66\u544a: warning\n")),(0,l.kt)("h3",{id:"\u516d\u914d\u7f6e\u6587\u4ef6"},"\u516d\u3001\u914d\u7f6e\u6587\u4ef6"),(0,l.kt)("p",null,"\u6211\u4eec\u4e0d\u59a8\u770b\u770b\u4e00\u4e2a\u6587\u4ef6\u5904\u7406\u5668\u7684\u6e90\u7801\u662f\u600e\u4e48\u8bfb\u914d\u7f6e\u9879\u7684\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'private void configure() {\n        LogManager manager = LogManager.getLogManager();\n\n        String cname = getClass().getName();\n\n        pattern = manager.getStringProperty(cname + ".pattern", "%h/java%u.log");\n        limit = manager.getLongProperty(cname + ".limit", 0);\n        if (limit < 0) {\n            limit = 0;\n        }\n        count = manager.getIntProperty(cname + ".count", 1);\n        if (count <= 0) {\n            count = 1;\n        }\n        append = manager.getBooleanProperty(cname + ".append", false);\n        setLevel(manager.getLevelProperty(cname + ".level", Level.ALL));\n        setFilter(manager.getFilterProperty(cname + ".filter", null));\n        setFormatter(manager.getFormatterProperty(cname + ".formatter", new XMLFormatter()));\n        // Initialize maxLocks from the logging.properties file.\n        // If invalid/no property is provided 100 will be used as a default value.\n        maxLocks = manager.getIntProperty(cname + ".maxLocks", MAX_LOCKS);\n        if(maxLocks <= 0) {\n            maxLocks = MAX_LOCKS;\n        }\n        try {\n            setEncoding(manager.getStringProperty(cname +".encoding", null));\n        } catch (Exception ex) {\n            try {\n                setEncoding(null);\n            } catch (Exception ex2) {\n                // doing a setEncoding with null should always work.\n                // assert false;\n            }\n        }\n    }\n')),(0,l.kt)("p",null,"\u53ef\u4ee5\u4ece\u4ee5\u4e0b\u6e90\u7801\u4e2d\u770b\u5230\u914d\u7f6e\u9879\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public class FileHandler extends StreamHandler {\n    private MeteredStream meter;\n    private boolean append;\n    // \u9650\u5236\u6587\u4ef6\u5927\u5c0f\n    private long limit;       // zero => no limit.\n    // \u63a7\u5236\u65e5\u5fd7\u6587\u4ef6\u7684\u6570\u91cf\n    private int count;\n    // \u65e5\u5fd7\u6587\u4ef6\u7684\u683c\u5f0f\u5316\u65b9\u5f0f\n    private String pattern;\n    private String lockFileName;\n    private FileChannel lockFileChannel;\n    private File files[];\n    private static final int MAX_LOCKS = 100;\n    // \u53ef\u4ee5\u7406\u89e3\u4e3a\u540c\u65f6\u53ef\u4ee5\u6709\u591a\u5c11\u4e2a\u7ebf\u7a0b\u6253\u5f00\u6587\u4ef6\uff0c\u6e90\u7801\u4e2d\u6709\u4ecb\u7ecd\n    private int maxLocks = MAX_LOCKS;\n    private static final Set<String> locks = new HashSet<>();\n}\n")),(0,l.kt)("p",null,"\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\u7cfb\u7edf\u9ed8\u8ba4\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u4f4d\u7f6e\uff0c\u90a3\u6211\u4eec\u80fd\u4e0d\u80fd\u81ea\u5b9a\u4e49\u5462\uff1f\u5f53\u7136\u53ef\u4ee5\u4e86\uff0c\u6211\u4eec\u4ecejdk\u4e2d\u8d4b\u503c\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\u8fc7\u6765\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-properties"},".level= INFO\n\n# default file output is in user's home directory.\njava.util.logging.FileHandler.pattern = %h/java%u.log\njava.util.logging.FileHandler.limit = 50000\njava.util.logging.FileHandler.count = 1\n\n# Default number of locks FileHandler can obtain synchronously.\n# This specifies maximum number of attempts to obtain lock file by FileHandler\n# implemented by incrementing the unique field %u as per FileHandler API documentation.\njava.util.logging.FileHandler.maxLocks = 100\njava.util.logging.FileHandler.formatter = java.util.logging.XMLFormatter\n\n# Limit the message that are printed on the console to INFO and above.\njava.util.logging.ConsoleHandler.level = INFO\njava.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter\n\n# java.util.logging.SimpleFormatter.format=%4$s: %5$s [%1$tc]%n\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'pattern = manager.getStringProperty(cname + ".pattern", "%h/java%u.log");\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"static File generate(String pat, int count, int generation, int unique)\n            throws IOException\n{\n    Path path = Paths.get(pat);\n    Path result = null;\n    boolean sawg = false;\n    boolean sawu = false;\n    StringBuilder word = new StringBuilder();\n    Path prev = null;\n    for (Path elem : path) {\n        if (prev != null) {\n            prev = prev.resolveSibling(word.toString());\n            result = result == null ? prev : result.resolve(prev);\n        }\n        String pattern = elem.toString();\n        int ix = 0;\n        word.setLength(0);\n        while (ix < pattern.length()) {\n            char ch = pattern.charAt(ix);\n            ix++;\n            char ch2 = 0;\n            if (ix < pattern.length()) {\n                ch2 = Character.toLowerCase(pattern.charAt(ix));\n            }\n            if (ch == '%') {\n                if (ch2 == 't') {\n                    String tmpDir = System.getProperty(\"java.io.tmpdir\");\n                    if (tmpDir == null) {\n                        tmpDir = System.getProperty(\"user.home\");\n                    }\n                    result = Paths.get(tmpDir);\n                    ix++;\n                    word.setLength(0);\n                    continue;\n                } else if (ch2 == 'h') {\n                    result = Paths.get(System.getProperty(\"user.home\"));\n                    if (jdk.internal.misc.VM.isSetUID()) {\n                        // Ok, we are in a set UID program.  For safety's sake\n                        // we disallow attempts to open files relative to %h.\n                        throw new IOException(\"can't use %h in set UID program\");\n                    }\n                    ix++;\n                    word.setLength(0);\n                    continue;\n                } else if (ch2 == 'g') {\n                    word = word.append(generation);\n                    sawg = true;\n                    ix++;\n                    continue;\n                } else if (ch2 == 'u') {\n                    word = word.append(unique);\n                    sawu = true;\n                    ix++;\n                    continue;\n                } else if (ch2 == '%') {\n                    word = word.append('%');\n                    ix++;\n                    continue;\n                }\n            }\n            word = word.append(ch);\n        }\n        prev = elem;\n    }\n\n    if (count > 1 && !sawg) {\n        word = word.append('.').append(generation);\n    }\n    if (unique > 0 && !sawu) {\n        word = word.append('.').append(unique);\n    }\n    if (word.length() > 0) {\n        String n = word.toString();\n        Path p = prev == null ? Paths.get(n) : prev.resolveSibling(n);\n        result = result == null ? p : result.resolve(p);\n    } else if (result == null) {\n        result = Paths.get(\"\");\n    }\n\n    if (path.getRoot() == null) {\n        return result.toFile();\n    } else {\n        return path.getRoot().resolve(result).toFile();\n    }\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'System.out.println(System.getProperty("user.home") );\n')),(0,l.kt)("p",null,"C:\\Users\\zn\\java0.log"),(0,l.kt)("p",null,"\u6211\u4eec\u5c06\u62f7\u8d1d\u7684\u6587\u4ef6\u7a0d\u4f5c\u4fee\u6539\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-properties"},".level= INFO\n\n# default file output is in user's home directory.\njava.util.logging.FileHandler.pattern = D:/log/java%u.log\njava.util.logging.FileHandler.limit = 50000\njava.util.logging.FileHandler.count = 1\njava.util.logging.FileHandler.maxLocks = 100\njava.util.logging.FileHandler.formatter = java.util.logging.XMLFormatter\n\n# Limit the message that are printed on the console to INFO and above.\njava.util.logging.ConsoleHandler.level = INFO\njava.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter\n\n# java.util.logging.SimpleFormatter.format=%4$s: %5$s [%1$tc]%n\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Test\npublic void testProperties() throws Exception {\n    // \u8bfb\u53d6\u81ea\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\n    InputStream in =\n        JULTest.class.getClassLoader().getResourceAsStream("logging.properties");\n    // \u83b7\u53d6\u65e5\u5fd7\u7ba1\u7406\u5668\u5bf9\u8c61\n    LogManager logManager = LogManager.getLogManager();\n    // \u901a\u8fc7\u65e5\u5fd7\u7ba1\u7406\u5668\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\n    logManager.readConfiguration(in);\n    Logger logger = Logger.getLogger("com.ydlclass.log.JULTest");\n    logger.severe("severe");\n    logger.warning("warning");\n    logger.info("info");\n    logger.config("config");\n    logger.fine("fine");\n    logger.finer("finer");\n    logger.finest("finest");\n}\n')),(0,l.kt)("p",null,"\u914d\u7f6e\u6587\u4ef6\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-properties"},"handlers= java.util.logging.ConsoleHandler,java.util.logging.FileHandler\n.level= INFO\n\njava.util.logging.FileHandler.pattern = D:/logs/java%u.log\njava.util.logging.FileHandler.limit = 50000\njava.util.logging.FileHandler.count = 1\njava.util.logging.FileHandler.maxLocks = 100\njava.util.logging.FileHandler.formatter = java.util.logging.XMLFormatter\n\n# Limit the message that are printed on the console to INFO and above.\njava.util.logging.ConsoleHandler.level = INFO\njava.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter\n")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021161011899-61d59d16.png",alt:"image-20211021161011899"}),"image-20211021161011899"),(0,l.kt)("p",null,"\u6587\u4ef6\u4e2d\u4e5f\u51fa\u73b0\u4e86\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021161036728-94ce60b8.png",alt:"image-20211021161036728"}),"image-20211021161036728"),(0,l.kt)("p",null,"\u6253\u5f00\u65e5\u5fd7\u53d1\u73b0\u662fxml\uff0c\u56e0\u4e3a\u8fd9\u91cc\u7528\u7684\u5c31\u662fXMLFormatter\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021161646767-03a8129f.png",alt:"image-20211021161646767"}),"image-20211021161646767"),(0,l.kt)("p",null,"\u4e0a\u8fb9\u6211\u4eec\u914d\u7f6e\u4e86\u4e24\u4e2ahandler\u7ed9\u6839Logger\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u7ed9\u5176\u4ed6\u7684Logger\u505a\u72ec\u7acb\u7684\u914d\u7f6e\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-properties"},"handlers = java.util.logging.ConsoleHandler\n.level = INFO\n# \u5bf9\u8fd9\u4e2alogger\u72ec\u7acb\u914d\u7f6e\ncom.ydlclass.handlers = java.util.logging.FileHandler\ncom.ydlclass.level = ALL\ncom.ydlclass.useParentHandlers = false\n\n# \u4fee\u6539\u4e86\u540d\u5b57\njava.util.logging.FileHandler.pattern = D:/logs/ydl-java%u.log\njava.util.logging.FileHandler.limit = 50000\njava.util.logging.FileHandler.count = 1\njava.util.logging.FileHandler.maxLocks = 100\njava.util.logging.FileHandler.formatter = java.util.logging.SimpleFormatter\n# \u6587\u4ef6\u4f7f\u7528\u8ffd\u52a0\u65b9\u5f0f\njava.util.logging.FileHandler.append = true\n\n# Limit the message that are printed on the console to INFO and above.\njava.util.logging.ConsoleHandler.level = INFO\njava.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter\n\n# \u4fee\u6539\u65e5\u5fd7\u683c\u5f0f\njava.util.logging.SimpleFormatter.format=%4$s: %5$s [%1$tc]%n\n")),(0,l.kt)("p",null,"\u6267\u884c\u53d1\u73b0\u63a7\u5236\u53f0\u6ca1\u6709\u5185\u5bb9\uff0c\u6587\u4ef6\u4e2d\u6709\u4e86\uff0c\u8bf4\u660e\u6ca1\u6709\u95ee\u9898OK\u4e86\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021161557198-13d982f4.png",alt:"image-20211021161557198"}),"image-20211021161557198"),(0,l.kt)("p",null,"\u65e5\u5fd7\u51fa\u73b0\u4ee5\u4e0b\u5185\u5bb9\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021161911691-70526a4f.png",alt:"image-20211021161911691"}),"image-20211021161911691"),(0,l.kt)("h2",{id:"\u7b2c\u4e09\u7ae0-log4j-\u65e5\u5fd7\u6846\u67b6"},"\u7b2c\u4e09\u7ae0 LOG4J \u65e5\u5fd7\u6846\u67b6"),(0,l.kt)("p",null," Log4j\u662fApache\u4e0b\u7684\u4e00\u6b3e\u5f00\u6e90\u7684\u65e5\u5fd7\u6846\u67b6\u3002 \u5b98\u65b9\u7f51\u7ad9\uff1a ",(0,l.kt)("a",{parentName:"p",href:"http://logging.apache.org/log4j/1.2/%EF%BC%8C%E8%BF%99%E6%98%AF%E4%B8%80%E6%AC%BE%E6%AF%94%E8%BE%83%E8%80%81%E7%9A%84%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6%EF%BC%8C%E7%9B%AE%E5%89%8D%E6%96%B0%E7%9A%84log4j2%E5%81%9A%E4%BA%86%E5%BE%88%E5%A4%A7%E7%9A%84%E6%94%B9%E5%8A%A8%EF%BC%8C%E4%BB%BB%E7%84%B6%E6%9C%89%E4%B8%80%E4%BA%9B%E9%A1%B9%E7%9B%AE%E5%9C%A8%E4%BD%BF%E7%94%A8log4j%E3%80%82"},"http://logging.apache.org/log4j/1.2/\uff0c\u8fd9\u662f\u4e00\u6b3e\u6bd4\u8f83\u8001\u7684\u65e5\u5fd7\u6846\u67b6\uff0c\u76ee\u524d\u65b0\u7684log4j2\u505a\u4e86\u5f88\u5927\u7684\u6539\u52a8\uff0c\u4efb\u7136\u6709\u4e00\u4e9b\u9879\u76ee\u5728\u4f7f\u7528log4j\u3002open in new window")),(0,l.kt)("h3",{id:"\u4e00\u5165\u95e8\u6848\u4f8b-1"},"\u4e00\u3001\u5165\u95e8\u6848\u4f8b"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5efa\u7acbmaven\u5de5\u7a0b"),(0,l.kt)("li",{parentName:"ol"},"\u6dfb\u52a0\u4f9d\u8d56")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<dependencies>\n    <dependency>\n        <groupId>log4j</groupId>\n        <artifactId>log4j</artifactId>\n        <version>1.2.17</version>\n    </dependency>\n    <dependency>\n        <groupId>junit</groupId>\n        <artifactId>junit</artifactId>\n        <version>4.13.2</version>\n    </dependency>\n</dependencies>\n\n<build>\n    <plugins>\n        <plugin>\n            <groupId>org.apache.maven.plugins</groupId>\n            <artifactId>maven-compiler-plugin</artifactId>\n            <version>3.8.1</version>\n            <configuration>\n                <source>${maven.compiler.source}</source>\n                <target>${maven.compiler.target}</target>\n                <encoding>UTF-8</encoding>\n            </configuration>\n        </plugin>\n    </plugins>\n</build>\n")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"java\u4ee3\u7801")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Test\npublic void testLogger() {\n    Logger logger = Logger.getLogger(Log4jTest.class);\n    // \u65e5\u5fd7\u8bb0\u5f55\u8f93\u51fa\n    logger.info("hello log4j");\n    // \u65e5\u5fd7\u7ea7\u522b\n    logger.fatal("fatal"); // \u4e25\u91cd\u9519\u8bef\uff0c\u4e00\u822c\u4f1a\u9020\u6210\u7cfb\u7edf\u5d29\u6e83\u548c\u7ec8\u6b62\u8fd0\u884c\n    logger.error("error"); // \u9519\u8bef\u4fe1\u606f\uff0c\u4f46\u4e0d\u4f1a\u5f71\u54cd\u7cfb\u7edf\u8fd0\u884c\n    logger.warn("warn"); // \u8b66\u544a\u4fe1\u606f\uff0c\u53ef\u80fd\u4f1a\u53d1\u751f\u95ee\u9898\n    logger.info("info"); // \u7a0b\u5e8f\u8fd0\u884c\u4fe1\u606f\uff0c\u6570\u636e\u5e93\u7684\u8fde\u63a5\u3001\u7f51\u7edc\u3001IO\u64cd\u4f5c\u7b49\n    logger.debug("debug"); // \u8c03\u8bd5\u4fe1\u606f\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u9636\u6bb5\u4f7f\u7528\uff0c\u8bb0\u5f55\u7a0b\u5e8f\u7684\u53d8\u91cf\u3001\u53c2\u6570\u7b49\n    logger.trace("trace"); // \u8ffd\u8e2a\u4fe1\u606f\uff0c\u8bb0\u5f55\u7a0b\u5e8f\u7684\u6240\u6709\u6d41\u7a0b\u4fe1\u606f\n}\n')),(0,l.kt)("p",null,"\u53d1\u73b0\u4f1a\u6709\u4e00\u4e9b\u8b66\u544a\uff0cJUL\u53ef\u4ee5\u76f4\u63a5\u5728\u63a7\u5236\u53f0\u8f93\u51fa\u662f\u56e0\u4e3a\u4ed6\u6709\u9ed8\u8ba4\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u800c\u8fd9\u4e2a\u72ec\u7acb\u7684\u7b2c\u4e09\u65b9\u7684\u65e5\u5fd7\u6846\u67b6\u5374\u6ca1\u6709\u914d\u7f6e\u6587\u4ef6\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"log4j:WARN No appenders could be found for logger (com.ydlclass.entity.Log4jTest).\nlog4j:WARN Please initialize the log4j system properly.\nlog4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\n")),(0,l.kt)("p",null,"\u6211\u4eec\u5728\u6267\u884c\u4ee3\u7801\u4e4b\u524d\uff0c\u52a0\u4e0a\u4ee5\u4e0b\u4ee3\u7801\uff0c\u4ed6\u4f1a\u521d\u59cb\u5316\u4e00\u4e2a\u9ed8\u8ba4\u914d\u7f6e\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"BasicConfigurator.configure();\n")),(0,l.kt)("p",null,"\u7ed3\u679c\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"0 [main] INFO com.ydlclass.entity.Log4jTest  - hello log4j\n1 [main] FATAL com.ydlclass.entity.Log4jTest  - fatal\n1 [main] ERROR com.ydlclass.entity.Log4jTest  - error\n1 [main] WARN com.ydlclass.entity.Log4jTest  - warn\n1 [main] INFO com.ydlclass.entity.Log4jTest  - info\n1 [main] DEBUG com.ydlclass.entity.Log4jTest  - debug\n")),(0,l.kt)("p",null,"\u4ece\u6e90\u7801\u770b\uff0c\u8fd9\u4e00\u884c\u4ee3\u7801\u7ed9\u6211\u4eec\u7684RootLogger\u52a0\u5165\u4e00\u4e2a\u63a7\u5236\u53f0\u7684\u8f93\u51fa\u6e90\uff0c\u5c31\u548cjul\u4e2d\u7684handler\u4e00\u6837\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public static void configure() {\n    Logger root = Logger.getRootLogger();\n    root.addAppender(new ConsoleAppender(new PatternLayout("%r [%t] %p %c %x - %m%n")));\n}\n')),(0,l.kt)("p",null,"log4j\u5b9a\u4e49\u4e86\u4ee5\u4e0b\u7684\u65e5\u5fd7\u7684\u7ea7\u522b\uff0c\u548cJUL\u7684\u7565\u6709\u4e0d\u540c\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"fatal \u6307\u51fa\u6bcf\u4e2a\u4e25\u91cd\u7684\u9519\u8bef\u4e8b\u4ef6\u5c06\u4f1a\u5bfc\u81f4\u5e94\u7528\u7a0b\u5e8f\u7684\u9000\u51fa\u3002"),(0,l.kt)("li",{parentName:"ol"},"error \u6307\u51fa\u867d\u7136\u53d1\u751f\u9519\u8bef\u4e8b\u4ef6\uff0c\u4f46\u4ecd\u7136\u4e0d\u5f71\u54cd\u7cfb\u7edf\u7684\u7ee7\u7eed\u8fd0\u884c\u3002"),(0,l.kt)("li",{parentName:"ol"},"warn \u8868\u660e\u4f1a\u51fa\u73b0\u6f5c\u5728\u7684\u9519\u8bef\u60c5\u5f62\u3002"),(0,l.kt)("li",{parentName:"ol"},"info \u4e00\u822c\u548c\u5728\u7c97\u7c92\u5ea6\u7ea7\u522b\u4e0a\uff0c\u5f3a\u8c03\u5e94\u7528\u7a0b\u5e8f\u7684\u8fd0\u884c\u5168\u7a0b\u3002"),(0,l.kt)("li",{parentName:"ol"},"debug \u4e00\u822c\u7528\u4e8e\u7ec6\u7c92\u5ea6\u7ea7\u522b\u4e0a\uff0c\u5bf9\u8c03\u8bd5\u5e94\u7528\u7a0b\u5e8f\u975e\u5e38\u6709\u5e2e\u52a9\u3002"),(0,l.kt)("li",{parentName:"ol"},"trace \u662f\u7a0b\u5e8f\u8ffd\u8e2a\uff0c\u53ef\u4ee5\u7528\u4e8e\u8f93\u51fa\u7a0b\u5e8f\u8fd0\u884c\u4e2d\u7684\u53d8\u91cf\uff0c\u663e\u793a\u6267\u884c\u7684\u6d41\u7a0b\u3002")),(0,l.kt)("p",null,"\u548cJUL\u4e00\u6837\uff1a\u8fd8\u6709\u4e24\u4e2a\u7279\u6b8a\u7684\u7ea7\u522b\uff1aOFF\uff0c\u53ef\u7528\u6765\u5173\u95ed\u65e5\u5fd7\u8bb0\u5f55\u3002 ALL\uff0c\u542f\u7528\u6240\u6709\u6d88\u606f\u7684\u65e5\u5fd7\u8bb0\u5f55\u3002"),(0,l.kt)("p",null,"\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ea\u4f7f\u75284\u4e2a\u7ea7\u522b\uff0c\u4f18\u5148\u7ea7\u4ece\u9ad8\u5230\u4f4e\u4e3a ERROR > WARN > INFO > DEBUG\u3002"),(0,l.kt)("h3",{id:"\u4e8c\u7ec4\u4ef6\u8bb2\u89e3"},"\u4e8c\u3001\u7ec4\u4ef6\u8bb2\u89e3"),(0,l.kt)("p",null," Log4J \u4e3b\u8981\u7531 Loggers (\u65e5\u5fd7\u8bb0\u5f55\u5668)\u3001Appenders\uff08\u8f93\u51fa\u7aef\uff09\u548c Layout\uff08\u65e5\u5fd7\u683c\u5f0f\u5316\u5668\uff09\u7ec4\u6210\u3002\u5176\u4e2d Loggers \u63a7\u5236\u65e5\u5fd7\u7684\u8f93\u51fa\u7ea7\u522b\u4e0e\u65e5\u5fd7\u662f\u5426\u8f93\u51fa\uff1bAppenders \u6307\u5b9a\u65e5\u5fd7\u7684\u8f93\u51fa\u65b9\u5f0f\uff08\u8f93\u51fa\u5230\u63a7\u5236\u53f0\u3001\u6587\u4ef6 \u7b49\uff09\uff1bLayout \u63a7\u5236\u65e5\u5fd7\u4fe1\u606f\u7684\u8f93\u51fa\u683c\u5f0f\u3002"),(0,l.kt)("h4",{id:"1loggers"},"1\u3001Loggers"),(0,l.kt)("p",null,"\u65e5\u5fd7\u8bb0\u5f55\u5668\uff1a\u8d1f\u8d23\u6536\u96c6\u5904\u7406\u65e5\u5fd7\u8bb0\u5f55\uff0c\u5b9e\u4f8b\u7684\u547d\u540d\u5c31\u662f\u7c7b\u201cXX\u201d\u7684full quailied name\uff08\u7c7b\u7684\u5168\u9650\u5b9a\u540d\uff09\uff0c Logger\u7684\u540d\u5b57\u5927\u5c0f\u5199\u654f\u611f\uff0c\u5176\u547d\u540d\u6709\u7ee7\u627f\u673a\u5236\uff1a\u4f8b\u5982\uff1aname\u4e3acom.ydlclass.service\u7684logger\u4f1a\u7ee7\u627f name\u4e3acom.ydlclass\u7684logger\uff0c\u548cJUL\u4e00\u81f4\u3002"),(0,l.kt)("p",null,"Log4J\u4e2d\u6709\u4e00\u4e2a\u7279\u6b8a\u7684logger\u53eb\u505a\u201croot\u201d\uff0c\u4ed6\u662f\u6240\u6709logger\u7684\u6839\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u5176\u4ed6\u6240\u6709\u7684logger\u90fd\u4f1a\u76f4\u63a5 \u6216\u8005\u95f4\u63a5\u5730\u7ee7\u627f\u81earoot\u3002root logger\u53ef\u4ee5\u7528Logger.getRootLogger()\u65b9\u6cd5\u83b7\u53d6\u3002 JUL\u662f\u4e0d\u662f\u4e5f\u6709\u4e00\u4e2a\u540d\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"."),"\u7684\u6839\u3002"),(0,l.kt)("h4",{id:"2appenders"},"2\u3001Appenders"),(0,l.kt)("p",null,"Appender\u548cJUL\u7684Handler\u5f88\u50cf\uff0c\u7528\u6765\u6307\u5b9a\u65e5\u5fd7\u8f93\u51fa\u5230\u54ea\u4e2a\u5730\u65b9\uff0c\u53ef\u4ee5\u540c\u65f6\u6307\u5b9a\u65e5\u5fd7\u7684\u8f93\u51fa\u76ee\u7684\u5730\u3002Log4j \u5e38\u7528\u7684\u8f93\u51fa\u76ee\u7684\u5730 \u6709\u4ee5\u4e0b\u51e0\u79cd\uff1a"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u8f93\u51fa\u7aef\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u4f5c\u7528"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ConsoleAppender"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230\u63a7\u5236\u53f0")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"FileAppender"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230\u6587\u4ef6\u4e2d")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"DailyRollingFileAppender"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0c\u5e76\u4e14\u6bcf\u5929\u8f93\u51fa\u5230\u4e00\u4e2a\u65b0\u7684\u6587\u4ef6")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"RollingFileAppender"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5c06\u65e5\u5fd7\u4fe1\u606f\u8f93\u51fa\u5230\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\uff0c\u5e76\u4e14\u6307\u5b9a\u6587\u4ef6\u7684\u5c3a\u5bf8\uff0c\u5f53\u6587\u4ef6\u5927 \u5c0f\u8fbe\u5230\u6307\u5b9a\u5c3a\u5bf8\u65f6\uff0c\u4f1a\u81ea\u52a8\u628a\u6587\u4ef6\u6539\u540d\uff0c\u540c\u65f6\u4ea7\u751f\u4e00\u4e2a\u65b0\u7684\u6587\u4ef6")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"JDBCAppender"),(0,l.kt)("td",{parentName:"tr",align:null},"\u628a\u65e5\u5fd7\u4fe1\u606f\u4fdd\u5b58\u5230\u6570\u636e\u5e93\u4e2d")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'// \u914d\u7f6e\u4e00\u4e2a\u63a7\u5236\u53f0\u8f93\u51fa\u6e90\nConsoleAppender consoleAppender = new ConsoleAppender();\nconsoleAppender.setName("ydl");\nconsoleAppender.setWriter(new PrintWriter(System.out));\nlogger.addAppender(consoleAppender);\n')),(0,l.kt)("h4",{id:"3layouts"},"3\u3001Layouts"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'Layout layout = new Layout() {\n    @Override\n    public String format(LoggingEvent loggingEvent) {\n        return loggingEvent.getLoggerName() + " "\n            +loggingEvent.getMessage() + "\\r\\n";\n    }\n\n    @Override\n    public boolean ignoresThrowable() {\n        return false;\n    }\n\n    @Override\n    public void activateOptions() {\n\n    }\n};\n')),(0,l.kt)("p",null,"\u6709\u4e00\u4e9b\u9ed8\u8ba4\u7684\u5b9e\u73b0\u7c7b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"Layout layout = new SimpleLayout();\n")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021174447092-80a06256.png",alt:"image-20211021174447092"}),"image-20211021174447092"),(0,l.kt)("p",null,"\u4ed6\u7684\u5b9e\u73b0\u592a\u7b80\u5355\u4e86\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public String format(LoggingEvent event) {\n    sbuf.setLength(0);\n    sbuf.append(event.getLevel().toString());\n    sbuf.append(" - ");\n    sbuf.append(event.getRenderedMessage());\n    sbuf.append(LINE_SEP);\n    return sbuf.toString();\n  }\n')),(0,l.kt)("p",null," \u8fd8\u6709\u4e00\u4e2a\u6bd4\u8f83\u5e38\u7528\u7684Layout\uff0c\u5c31\u662fPatternLayout\u8fd9\u4e2a\u5b9e\u73b0\u7c7b\uff0c\u80fd\u591f\u6839\u636e\u7279\u5b9a\u7684\u5360\u4f4d\u7b26\u8fdb\u884c\u8f6c\u5316\uff0c\u548cJUL\u5f88\u50cf\uff0c\u4f46\u662f\u53c8\u4e0d\u4e00\u6837\uff0c\u6211\u4eec\u5e96\u4e01\u89e3\u725b\u7814\u7a76\u4e00\u756a\uff0c\u9996\u5148\u770b\u4ed6\u7684\u6784\u9020\u5668\uff0c\u6784\u9020\u5668\u4e2d\u5982\u679c\u4f20\u5165\u4e00\u4e2apattern\u5b57\u7b26\u4e32\uff0c\u4ed6\u4f1a\u6839\u636e\u8fd9\u4e2apattern\u521b\u5efa\u4e00\u4e2a\u94fe\u8868\uff0c\u8fd9\u4e2a\u94fe\u8868\u5177\u4f53\u5e72\u4ec0\u4e48\u54b1\u4eec\u6162\u6162\u5f80\u540e\u770b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public PatternLayout(String pattern) {\n    this.pattern = pattern;\n    head = createPatternParser((pattern == null) ? DEFAULT_CONVERSION_PATTERN :\n                               pattern).parse();\n}\n")),(0,l.kt)("p",null,"\u5c06\u6b65\u9aa4\u62c6\u89e3\u5f00\u6765\u770b\uff0c\u9996\u5148\u521b\u5efa\u4e86\u4e00\u4e2a\u89e3\u6790\u5668\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"protected PatternParser createPatternParser(String pattern) {\n    return new PatternParser(pattern);\n}\n")),(0,l.kt)("p",null,"\u67e5\u770bparse\u65b9\u6cd5\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u6bd4\u8f83\u590d\u6742\u6211\u4eec\u7b80\u5316\u6765\u770b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public PatternConverter parse() {\n    char c;\n    i = 0;\n    while(i < patternLength) {\n        ...\u6b64\u6b21\u7701\u7565\u4e86\u5f88\u591a\u4ee3\u7801\uff0c\u4f46\u662f\u53ef\u4ee5\u4ece\u8fd9\u4e2a\u6838\u5fc3\u770b\u51fa\u6765\n        c = pattern.charAt(i++);\n        finalizeConverter(c);\n    }\n    return head;\n}\n")),(0,l.kt)("p",null,"\u800cfinalizeConverter\u505a\u7684\u5de5\u4f5c\u5927\u5bb6\u5c31\u80fd\u770b\u7684\u5f88\u6e05\u695a\u4e86\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"protected void finalizeConverter(char c) {\n    PatternConverter pc = null;\n    switch(c) {\n    case 'c':\n      pc = new CategoryPatternConverter(formattingInfo,\n                    extractPrecisionOption());\n      //LogLog.debug(\"CATEGORY converter.\");\n      //formattingInfo.dump();\n      currentLiteral.setLength(0);\n      break;\n    //\u5904\u7406\u7c7b\u540d\u7684\u8f6c\u5316\u5668\n    case 'C':\n      pc = new ClassNamePatternConverter(formattingInfo,\n                     extractPrecisionOption());\n      //LogLog.debug(\"CLASS_NAME converter.\");\n      //formattingInfo.dump();\n      currentLiteral.setLength(0);\n      break;\n     //\u5904\u7406\u65f6\u95f4\u7684\u8f6c\u5316\u5668\n    case 'd':\n      String dateFormatStr = AbsoluteTimeDateFormat.ISO8601_DATE_FORMAT;\n      DateFormat df;\n        ... \n      pc = new DatePatternConverter(formattingInfo, df);\n      currentLiteral.setLength(0);\n      break;\n    //\u8f93\u51fa\u65e5\u5fd7\u65f6\u95f4\u53d1\u751f\u7684\u4f4d\u7f6e\uff0c\u5305\u62ec\u7c7b\u540d\u3001\u7ebf\u7a0b\u3001\u53ca\u5728\u4ee3\u7801\u4e2d\u7684\u884c\u6570\n    case 'F':\n      pc = new LocationPatternConverter(formattingInfo,\n                    FILE_LOCATION_CONVERTER);\n      break;\n    case 'l':\n      pc = new LocationPatternConverter(formattingInfo,\n                    FULL_LOCATION_CONVERTER);\n      currentLiteral.setLength(0);\n      break;\n    case 'L':\n      pc = new LocationPatternConverter(formattingInfo,\n                    LINE_LOCATION_CONVERTER);\n      currentLiteral.setLength(0);\n      break;\n    case 'm':\n      pc = new BasicPatternConverter(formattingInfo, MESSAGE_CONVERTER);\n      currentLiteral.setLength(0);\n      break;\n    case 'M':\n      pc = new LocationPatternConverter(formattingInfo,\n                    METHOD_LOCATION_CONVERTER);\n      currentLiteral.setLength(0);\n      break;\n    case 'p':\n      pc = new BasicPatternConverter(formattingInfo, LEVEL_CONVERTER);\n      currentLiteral.setLength(0);\n      break;\n    case 'r':\n      pc = new BasicPatternConverter(formattingInfo,\n                     RELATIVE_TIME_CONVERTER);\n      currentLiteral.setLength(0);\n      break;\n    case 't':\n      pc = new BasicPatternConverter(formattingInfo, THREAD_CONVERTER);\n      currentLiteral.setLength(0);\n      break;\n    case 'x':\n      pc = new BasicPatternConverter(formattingInfo, NDC_CONVERTER);\n      //LogLog.debug(\"NDC converter.\");\n      currentLiteral.setLength(0);\n      break;\n    case 'X':\n      String xOpt = extractOption();\n      pc = new MDCPatternConverter(formattingInfo, xOpt);\n      currentLiteral.setLength(0);\n      break;\n    default:\n      LogLog.error(\"Unexpected char [\" +c+\"] at position \"+i\n           +\" in conversion patterrn.\");\n      pc = new LiteralPatternConverter(currentLiteral.toString());\n      currentLiteral.setLength(0);\n    }\n\n    addConverter(pc);\n  }\n")),(0,l.kt)("p",null,"\u4e0b\u8fb9\u5c31\u662f\u4e00\u4e2a\u5178\u578b\u7684\u94fe\u8868\u7ed3\u6784\u7684\u6784\u5efa\u4e86\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"protected void addConverter(PatternConverter pc) {\n    currentLiteral.setLength(0);\n    // Add the pattern converter to the list.\n    addToList(pc);\n    // Next pattern is assumed to be a literal.\n    state = LITERAL_STATE;\n    // Reset formatting info\n    formattingInfo.reset();\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"private void  addToList(PatternConverter pc) {\n    if(head == null) {\n        head = tail = pc;\n    } else {\n        tail.next = pc;\n        tail = pc;\n    }\n}\n")),(0,l.kt)("p",null," \u6784\u5efa\u5b8c\u8f6c\u5316\u5668\u94fe\u8868\u4e4b\u540e\uff0c\u5c31\u662f\u5faa\u73af\u8fd9\u4e2a\u94fe\u8868\uff0c\u4e00\u6b21\u5904\u7406\u5bf9\u5e94\u7684\u5360\u4f4d\u7b26\u4e86\uff0c\u4ed6\u7684\u6838\u5fc3\u7684\u683c\u5f0f\u5316\u7684\u65b9\u6cd5\u4e5f\u662fformat\u65b9\u6cd5\uff0c\u5728format\u65b9\u6cd5\u4e2d\u662f\u901a\u8fc7\u4e00\u4e2a\u8f6c\u5316\u5668\u94fe\u6765\u5b8c\u6210\u8f6c\u5316\u7684\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public String format(LoggingEvent event) {\n    // \u5728format\u65b9\u6cd5\u4e2d\u662f\u901a\u8fc7\u4e00\u4e2a\u8f6c\u5316\u5668\u94fe\u6765\u5b8c\u6210\u8f6c\u5316\u7684\n    PatternConverter c = head;\n\n    while(c != null) {\n      // \u8fd9\u4e00\u53e5\u662f\u6838\u5fc3\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u4e2aStringBuilder\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570LoggingEvent\n      c.format(sbuf, event);\n      c = c.next;\n    }\n    return sbuf.toString();\n  }\n}\n")),(0,l.kt)("p",null," \u8fd9\u91cc\u5c31\u662f\u901a\u8fc7\u4e00\u4e2apattern\u5b57\u7b26\u4e32\uff0c\u8fd9\u4e2a\u5b57\u7b26\u4e32\u53ef\u80fd\u5f20\u8fd9\u4e2a\u6837\u5b50\uff08%-d{yyyy-MM-dd HH:mm:ss} ","[%t:%r]"," -","[%p]"," %m%n\uff09\uff0c\u4f7f\u7528createPatternParser().parse()\u65b9\u6cd5\u6784\u5efa\u4e00\u4e2a\u5904\u7406\u5668\u7684\u94fe\u8868\uff0c\u8fd9\u4e2a\u6bcf\u4e2a\u5904\u7406\u5668\u5904\u7406\u4e00\u4e2a\u5360\u4f4d\u7b26\u6bd4\u5982\uff08%d\uff09\u3002"),(0,l.kt)("p",null,"\u8fdb\u5165c.format()\u65b9\u6cd5\uff0c\u6211\u4eec\u4f1a\u8fdb\u5165\u4e00\u4e2a\u62bd\u8c61\u7c7bPatternConverter\u4e2d\u7684format\u65b9\u6cd5\uff0c\u91cc\u8fb9\u7684\u6838\u5fc3\u5c31\u662f\u5982\u4e0b\u4ee3\u7801\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public void format(StringBuffer sbuf, LoggingEvent e) {\n    // \u6838\u5fc3\u5c31\u662f\u8fd9\u4e00\u53e5\n    String s = convert(e);\n}\n")),(0,l.kt)("p",null,"log4j \u5176\u5b9e\u91c7\u7528\u7c7b\u4f3c C \u8bed\u8a00\u7684 printf \u51fd\u6570\u7684\u6253\u5370\u683c\u5f0f\u683c\u5f0f\u5316\u65e5\u5fd7\u4fe1\u606f\uff0c\u6e90\u7801\u5df2\u7ecf\u770b\u8fc7\u4e86\uff0c\u5177\u4f53\u7684\u5360\u4f4d\u7b26\u53ca\u5176\u542b\u4e49\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'%m \u8f93\u51fa\u4ee3\u7801\u4e2d\u6307\u5b9a\u7684\u65e5\u5fd7\u4fe1\u606f\n%p \u8f93\u51fa\u65e5\u5fd7\u7ea7\u522b\uff0c\u53ca DEBUG\u3001INFO \u7b49\n%n \u6362\u884c\u7b26\uff08Windows\u5e73\u53f0\u7684\u6362\u884c\u7b26\u4e3a "\\n"\uff0cUnix \u5e73\u53f0\u4e3a "\\n"\uff09\n%r \u8f93\u51fa\u81ea\u5e94\u7528\u542f\u52a8\u5230\u8f93\u51fa\u8be5 log \u4fe1\u606f\u8017\u8d39\u7684\u6beb\u79d2\u6570\n%c \u8f93\u51fa\u6253\u5370\u8bed\u53e5\u6240\u5c5e\u7684\u7c7b\u7684\u5168\u540d\n%t \u8f93\u51fa\u4ea7\u751f\u8be5\u65e5\u5fd7\u7684\u7ebf\u7a0b\u5168\u540d\n%d \u8f93\u51fa\u670d\u52a1\u5668\u5f53\u524d\u65f6\u95f4\uff0c\u9ed8\u8ba4\u4e3a ISO8601\uff0c\u4e5f\u53ef\u4ee5\u6307\u5b9a\u683c\u5f0f\uff0c\u5982\uff1a%d{yyyy\u5e74MM\u6708dd\u65e5HH:mm:ss}\n%l \u8f93\u51fa\u65e5\u5fd7\u65f6\u95f4\u53d1\u751f\u7684\u4f4d\u7f6e\uff0c\u5305\u62ec\u7c7b\u540d\u3001\u7ebf\u7a0b\u3001\u53ca\u5728\u4ee3\u7801\u4e2d\u7684\u884c\u6570\u3002\u5982\uff1aTest.main(Test.java:10)\n%F \u8f93\u51fa\u65e5\u5fd7\u6d88\u606f\u4ea7\u751f\u65f6\u6240\u5728\u7684\u6587\u4ef6\u540d\u79f0\n%L \u8f93\u51fa\u4ee3\u7801\u4e2d\u7684\u884c\u53f7\n%% \u8f93\u51fa\u4e00\u4e2a "%" \u5b57\u7b26\n* \u53ef\u4ee5\u5728 % \u4e0e\u5b57\u7b26\u4e4b\u95f4\u52a0\u4e0a\u4fee\u9970\u7b26\u6765\u63a7\u5236\u6700\u5c0f\u5bbd\u5ea6\u3001\u6700\u5927\u5bbd\u5ea6\u548c\u6587\u672c\u7684\u5bf9\u5176\u65b9\u5f0f\u3002\u5982\uff1a\n%5c \u8f93\u51facategory\u540d\u79f0\uff0c\u6700\u5c0f\u5bbd\u5ea6\u662f5\uff0ccategory<5\uff0c\u9ed8\u8ba4\u7684\u60c5\u51b5\u4e0b\u53f3\u5bf9\u9f50\n%-5c \u8f93\u51facategory\u540d\u79f0\uff0c\u6700\u5c0f\u5bbd\u5ea6\u662f5\uff0ccategory<5\uff0c"-"\u53f7\u6307\u5b9a\u5de6\u5bf9\u9f50,\u4f1a\u6709\u7a7a\u683c\n%.5c \u8f93\u51facategory\u540d\u79f0\uff0c\u6700\u5927\u5bbd\u5ea6\u662f5\uff0ccategory>5\uff0c\u5c31\u4f1a\u5c06\u5de6\u8fb9\u591a\u51fa\u7684\u5b57\u7b26\u622a\u6389\uff0c<5\u4e0d\u4f1a\u6709\u7a7a\u683c\n%20.30c category\u540d\u79f0<20\u8865\u7a7a\u683c\uff0c\u5e76\u4e14\u53f3\u5bf9\u9f50\uff0c>30\u5b57\u7b26\uff0c\u5c31\u4ece\u5de6\u8fb9\u4ea4\u8fdc\u9500\u51fa\u7684\u5b57\u7b26\u622a\u6389\n')),(0,l.kt)("p",null,"\u4e3e\u4e00\u4e2a\u4f8b\u5b50\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"%-d{yyyy-MM-dd HH:mm:ss} [%t:%r] -[%p] %m%n\n\u6253\u5370\uff1a\u65e5\u671f [\u7ebf\u7a0b:\u6beb\u79d2\u6570] - [\u65e5\u5fd7\u7ea7\u522b] - \u65e5\u5fd7\u4fe1\u606f \u6362\u884c\n")),(0,l.kt)("p",null,"\u5c1d\u8bd5\u5199\u4e00\u4e2a\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Test\npublic void testLog(){\n    // \u83b7\u53d6\u4e00\u4e2alogger\n    Logger logger = Logger.getLogger(TestLog4j.class);\n    // \u521b\u5efa\u4e00\u4e2alayout\n    Layout layout = new PatternLayout("%-d{yyyy-MM-dd HH:mm:ss} [%t:%r] -[%p] %m%n");\n    // \u521b\u5efa\u4e00\u4e2a\u8f93\u51fa\u6e90\n    ConsoleAppender appender = new ConsoleAppender();\n    appender.setLayout(layout);\n    appender.setWriter(new PrintWriter(System.out));\n    logger.addAppender(appender);\n    logger.warn("warning");\n}\n\n\u7ed3\u679c\uff1a\n2021-10-21 21:31:05 [main:0] -[WARN] warning\n')),(0,l.kt)("p",null,"\u914d\u7f6e\u4e00\u4e2ajdbcAppender"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"JDBCAppender jdbcAppender = new JDBCAppender();\njdbcAppender.setDriver(\"com.mysql.cj.jdbc.Driver\");\njdbcAppender.setURL(\"jdbc:mysql://localhost:3306/ydlclass?characterEncoding=utf8&useSSL=false&serverTimezone=UTC\");\njdbcAppender.setUser(\"root\");\njdbcAppender.setPassword(\"root\");\njdbcAppender.setSql(\"INSERT INTO log(project_name,create_date,level,category,file_name,thread_name,line,all_category,message) values('ydlclass','%d{yyyy-MM-ddHH:mm:ss}','%p','%c','%F','%t','%L','%l','%m')\");\n        \n")),(0,l.kt)("p",null,"\u6570\u636e\u8868"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE `log` (\n    `log_id` int(11) NOT NULL AUTO_INCREMENT,\n    `project_name` varchar(255) DEFAULT NULL COMMENT '\u76ee\u9879\u540d',\n    `create_date` varchar(255) DEFAULT NULL COMMENT '\u521b\u5efa\u65f6\u95f4',\n    `level` varchar(255) DEFAULT NULL COMMENT '\u4f18\u5148\u7ea7',\n    `category` varchar(255) DEFAULT NULL COMMENT '\u6240\u5728\u7c7b\u7684\u5168\u540d',\n    `file_name` varchar(255) DEFAULT NULL COMMENT '\u8f93\u51fa\u65e5\u5fd7\u6d88\u606f\u4ea7\u751f\u65f6\u6240\u5728\u7684\u6587\u4ef6\u540d\u79f0 ',\n    `thread_name` varchar(255) DEFAULT NULL COMMENT '\u65e5\u5fd7\u4e8b\u4ef6\u7684\u7ebf\u7a0b\u540d',\n    `line` varchar(255) DEFAULT NULL COMMENT '\u53f7\u884c',\n    `all_category` varchar(255) DEFAULT NULL COMMENT '\u65e5\u5fd7\u4e8b\u4ef6\u7684\u53d1\u751f\u4f4d\u7f6e',\n    `message` varchar(4000) DEFAULT NULL COMMENT '\u8f93\u51fa\u4ee3\u7801\u4e2d\u6307\u5b9a\u7684\u6d88\u606f',\n    PRIMARY KEY (`log_id`)\n);\n")),(0,l.kt)("p",null,"\u4f9d\u8d56"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"<dependency>\n    <groupId>mysql</groupId>\n    <artifactId>mysql-connector-java</artifactId>\n    <version>8.0.22</version>\n</dependency>\n")),(0,l.kt)("h3",{id:"\u4e09\u914d\u7f6e"},"\u4e09\u3001\u914d\u7f6e"),(0,l.kt)("p",null,"log4j\u4e0d\u4ec5\u4ec5\u53ef\u4ee5\u5728\u63a7\u5236\u53f0\uff0c\u6587\u4ef6\u6587\u4ef6\u4e2d\u8f93\u51fa\u65e5\u5fd7\uff0c\u751a\u81f3\u53ef\u4ee5\u5728\u6570\u636e\u5e93\u4e2d\uff0c\u6211\u4eec\u5148\u4f7f\u7528\u914d\u7f6e\u7684\u65b9\u5f0f\u5b8c\u6210\u65e5\u5fd7\u7684\u8f93\u5165\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-properties"},"#\u6307\u5b9a\u65e5\u5fd7\u7684\u8f93\u51fa\u7ea7\u522b\u4e0e\u8f93\u51fa\u7aef\nlog4j.rootLogger=INFO,Console,ydl\n# \u63a7\u5236\u53f0\u8f93\u51fa\u914d\u7f6e\nlog4j.appender.Console=org.apache.log4j.ConsoleAppender\nlog4j.appender.Console.layout=org.apache.log4j.PatternLayout\nlog4j.appender.Console.layout.ConversionPattern=%d [%t] %-5p [%c] - %m%n\n# \u6587\u4ef6\u8f93\u51fa\u914d\u7f6e\nlog4j.appender.ydl = org.apache.log4j.DailyRollingFileAppender\n#\u6307\u5b9a\u65e5\u5fd7\u7684\u8f93\u51fa\u8def\u5f84\nlog4j.appender.ydl.File = D:/logs/ydl.log\nlog4j.appender.ydl.Append = true\n#\u4f7f\u7528\u81ea\u5b9a\u4e49\u65e5\u5fd7\u683c\u5f0f\u5316\u5668\nlog4j.appender.ydl.layout = org.apache.log4j.PatternLayout\n#\u6307\u5b9a\u65e5\u5fd7\u7684\u8f93\u51fa\u683c\u5f0f\nlog4j.appender.ydl.layout.ConversionPattern = %-d{yyyy-MM-dd HH:mm:ss} [%t:%r] -[%p] %m%n\n#\u6307\u5b9a\u65e5\u5fd7\u7684\u6587\u4ef6\u7f16\u7801\nlog4j.appender.ydl.encoding=UTF-8\n")),(0,l.kt)("p",null,"\u6709\u4e86\u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\u6211\u4eec\u4e9b\u4ee3\u7801\u5c31\u7b80\u5355\u4e86\u4e00\u4e9b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Test\npublic void testConfig(){\n    // \u83b7\u53d6\u4e00\u4e2alogger\n    Logger logger = Logger.getLogger(TestLog4j.class);\n    logger.warn("warning");\n}\n\n\u7ed3\u679c\uff1a\n    2021-10-21 21:37:06,705 [main] WARN  [com.ydlclass.TestLog4j] - warning\n')),(0,l.kt)("p",null,"\u6587\u4ef6\u4e5f\u6709\u4e86\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021213817159-f1e0ce56.png",alt:"image-20211021213817159"}),"image-20211021213817159"),(0,l.kt)("p",null,"\u5185\u5bb9\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021213845319-dcc33aa3.png",alt:"image-20211021213845319"}),"image-20211021213845319"),(0,l.kt)("p",null,"\u6211\u4eec\u67e5\u770b\u4e86\u53ef\u662f\u786e\u5b9e\u6ca1\u6709\u95ee\u9898\u3002"),(0,l.kt)("p",null," \u5f53\u7136\u65e5\u5fd7\u914d\u7f6e\u6587\u4ef6\u662f\u4ec0\u4e48\u65f6\u5019\u8bfb\u53d6\u7684\u5462\uff1f\u6bcf\u4e00\u4e2alogger\u90fd\u662fLogManager\u521b\u5efa\u7684\uff0c\u800cLogManager\u6709\u4e00\u4e2a\u9759\u6001\u4ee3\u7801\u5757\u5e2e\u52a9\u6211\u4eec\u89e3\u6790\u914d\u7f6e\u6587\u4ef6\uff0c\u7ec6\u8282\u5c31\u4e0d\u9700\u8981\u4e86\u89e3\u4e86\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public class LogManager {\n\n  /**\n   * @deprecated This variable is for internal use only. It will\n   * become package protected in future versions.\n   * */\n  static public final String DEFAULT_CONFIGURATION_FILE = "log4j.properties";\n  \n  static final String DEFAULT_XML_CONFIGURATION_FILE = "log4j.xml";  \n   \n  /**\n   * @deprecated This variable is for internal use only. It will\n   * become private in future versions.\n   * */\n  static final public String DEFAULT_CONFIGURATION_KEY="log4j.configuration";\n\n  /**\n   * @deprecated This variable is for internal use only. It will\n   * become private in future versions.\n   * */\n  static final public String CONFIGURATOR_CLASS_KEY="log4j.configuratorClass";\n\n  /**\n  * @deprecated This variable is for internal use only. It will\n  * become private in future versions.\n  */\n  public static final String DEFAULT_INIT_OVERRIDE_KEY = \n                                                 "log4j.defaultInitOverride";\n\n\n  static private Object guard = null;\n  static private RepositorySelector repositorySelector;\n\n  static {\n      // By default we use a DefaultRepositorySelector which always returns \'h\'.\n      Hierarchy h = new Hierarchy(new RootLogger((Level) Level.DEBUG));\n      repositorySelector = new DefaultRepositorySelector(h);\n\n      /** Search for the properties file log4j.properties in the CLASSPATH.  */\n      String override =OptionConverter.getSystemProperty(DEFAULT_INIT_OVERRIDE_KEY,\n                                                         null);\n\n      // if there is no default init override, then get the resource\n      // specified by the user or the default config file.\n      if(override == null || "false".equalsIgnoreCase(override)) {\n\n          String configurationOptionStr = OptionConverter.getSystemProperty(\n              DEFAULT_CONFIGURATION_KEY, \n              null);\n\n          String configuratorClassName = OptionConverter.getSystemProperty(\n              CONFIGURATOR_CLASS_KEY, \n              null);\n\n          URL url = null;\n\n          // if the user has not specified the log4j.configuration\n          // property, we search first for the file "log4j.xml" and then\n          // "log4j.properties"\n          if(configurationOptionStr == null) {  \n              url = Loader.getResource(DEFAULT_XML_CONFIGURATION_FILE);\n              if(url == null) {\n                  url = Loader.getResource(DEFAULT_CONFIGURATION_FILE);\n              }\n          } else {\n              try {\n                  url = new URL(configurationOptionStr);\n              } catch (MalformedURLException ex) {\n                  // so, resource is not a URL:\n                  // attempt to get the resource from the class path\n                  url = Loader.getResource(configurationOptionStr); \n              } \n          }\n\n          // If we have a non-null url, then delegate the rest of the\n          // configuration to the OptionConverter.selectAndConfigure\n          // method.\n          if(url != null) {\n              LogLog.debug("Using URL ["+url+"] for automatic log4j configuration.");\n              try {\n                  OptionConverter.selectAndConfigure(url, configuratorClassName,\n                                                     LogManager.getLoggerRepository());\n              } catch (NoClassDefFoundError e) {\n                  LogLog.warn("Error during default initialization", e);\n              }\n          } else {\n              LogLog.debug("Could not find resource: ["+configurationOptionStr+"].");\n          }\n      } else {\n          LogLog.debug("Default initialization of overridden by " + \n                       DEFAULT_INIT_OVERRIDE_KEY + "property."); \n      }  \n  } \n}\n')),(0,l.kt)("p",null,"\u8fd8\u6709\u66f4\u6709\u610f\u601d\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u6dfb\u52a0\u4e00\u4e2a\u6570\u636e\u6e90\uff0c\u8bb2\u65e5\u5fd7\u8f93\u51fa\u5230\u6570\u636e\u5e93\u4e2d\uff0c\u5c31\u662f\u4e00\u4e2a\u548c\u6570\u636e\u5e93\u94fe\u63a5\u7684\u8f93\u51fa\u6e90\u800c\u5df2\uff1a"),(0,l.kt)("p",null,"\u52a0\u5165\u4e00\u4e2a\u6570\u636e\u5e93\u7684\u65e5\u5fd7\u8f93\u51fa\u6e90\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-properties"},"#mysql\nlog4j.appender.logDB=org.apache.log4j.jdbc.JDBCAppender\nlog4j.appender.logDB.layout=org.apache.log4j.PatternLayout\nlog4j.appender.logDB.Driver=com.mysql.cj.jdbc.Driver\nlog4j.appender.logDB.URL=jdbc:mysql://localhost:3306/ssm\nlog4j.appender.logDB.User=root\nlog4j.appender.logDB.Password=root\nlog4j.appender.logDB.Sql=INSERT INTO log(project_name,create_date,level,category,file_name,thread_name,line,all_category,message) values('ydlclass','%d{yyyy-MM-ddHH:mm:ss}','%p','%c','%F','%t','%L','%l','%m')\n")),(0,l.kt)("p",null,"\u9700\u8981"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE `log` (\n    `log_id` int(11) NOT NULL AUTO_INCREMENT,\n    `project_name` varchar(255) DEFAULT NULL COMMENT '\u76ee\u9879\u540d',\n    `create_date` varchar(255) DEFAULT NULL COMMENT '\u521b\u5efa\u65f6\u95f4',\n    `level` varchar(255) DEFAULT NULL COMMENT '\u4f18\u5148\u7ea7',\n    `category` varchar(255) DEFAULT NULL COMMENT '\u6240\u5728\u7c7b\u7684\u5168\u540d',\n    `file_name` varchar(255) DEFAULT NULL COMMENT '\u8f93\u51fa\u65e5\u5fd7\u6d88\u606f\u4ea7\u751f\u65f6\u6240\u5728\u7684\u6587\u4ef6\u540d\u79f0 ',\n    `thread_name` varchar(255) DEFAULT NULL COMMENT '\u65e5\u5fd7\u4e8b\u4ef6\u7684\u7ebf\u7a0b\u540d',\n    `line` varchar(255) DEFAULT NULL COMMENT '\u53f7\u884c',\n    `all_category` varchar(255) DEFAULT NULL COMMENT '\u65e5\u5fd7\u4e8b\u4ef6\u7684\u53d1\u751f\u4f4d\u7f6e',\n    `message` varchar(4000) DEFAULT NULL COMMENT '\u8f93\u51fa\u4ee3\u7801\u4e2d\u6307\u5b9a\u7684\u6d88\u606f',\n    PRIMARY KEY (`log_id`)\n);\n")),(0,l.kt)("p",null,"pom\u4e2d\u6dfb\u52a0\u9a71\u52a8\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n    <groupId>mysql</groupId>\n    <artifactId>mysql-connector-java</artifactId>\n    <version>8.0.22</version>\n</dependency>\n")),(0,l.kt)("p",null,"\u518d\u6b21\u6267\u884c\uff1a"),(0,l.kt)("p",null,"\u53d1\u73b0\u9664\u4e86\u63a7\u5236\u53f0\uff0c\u6587\u4ef6\uff0c\u6570\u636e\u5e93\u4e2d\u4e5f\u6709\u4e86\u65e5\u5fd7\u4e86\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021215028322-46a6267d.png",alt:"image-20211021215028322"}),"image-20211021215028322"),(0,l.kt)("h3",{id:"\u56db\u81ea\u5b9a\u4e49logger"},"\u56db\u3001\u81ea\u5b9a\u4e49Logger"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-properties"},"# RootLogger\u914d\u7f6e\nlog4j.rootLogger = trace,console\n# \u81ea\u5b9a\u4e49Logger\nlog4j.logger.com.ydlclass= WARN,logDB\nlog4j.logger.org.apache = error\n")),(0,l.kt)("p",null,"\u7531\u6b64\u6211\u4eec\u53d1\u73b0\uff0c\u6211\u4eec\u53ef\u4ee5\u5f88\u7075\u6d3b\u7684\u81ea\u5b9a\u4e49\uff0c\u7ec4\u88c5\u4e0d\u540clogger\u7684\u5b9e\u73b0\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u5199\u4ee3\u7801\u6d4b\u8bd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Test\npublic void testDefineLogger() throws Exception {\n    Logger logger1 = Logger.getLogger(Log4jTest.class);\n    logger1.fatal("fatal"); // \u4e25\u91cd\u9519\u8bef\uff0c\u4e00\u822c\u4f1a\u9020\u6210\u7cfb\u7edf\u5d29\u6e83\u548c\u7ec8\u6b62\u8fd0\u884c\n    logger1.error("error"); // \u9519\u8bef\u4fe1\u606f\uff0c\u4f46\u4e0d\u4f1a\u5f71\u54cd\u7cfb\u7edf\u8fd0\u884c\n    logger1.warn("warn"); // \u8b66\u544a\u4fe1\u606f\uff0c\u53ef\u80fd\u4f1a\u53d1\u751f\u95ee\u9898\n    logger1.info("info"); // \u7a0b\u5e8f\u8fd0\u884c\u4fe1\u606f\uff0c\u6570\u636e\u5e93\u7684\u8fde\u63a5\u3001\u7f51\u7edc\u3001IO\u64cd\u4f5c\u7b49\n    logger1.debug("debug"); // \u8c03\u8bd5\u4fe1\u606f\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u9636\u6bb5\u4f7f\u7528\uff0c\u8bb0\u5f55\u7a0b\u5e8f\u7684\u53d8\u91cf\u3001\u53c2\u6570\u7b49\n    logger1.trace("trace"); // \u8ffd\u8e2a\u4fe1\u606f\uff0c\u8bb0\u5f55\u7a0b\u5e8f\u7684\u6240\u6709\u6d41\u7a0b\u4fe1\u606f\n    // \u81ea\u5b9a\u4e49 org.apache\n    Logger logger2 = Logger.getLogger(Logger.class);\n    logger2.fatal("fatal logger2"); // \u4e25\u91cd\u9519\u8bef\uff0c\u4e00\u822c\u4f1a\u9020\u6210\u7cfb\u7edf\u5d29\u6e83\u548c\u7ec8\u6b62\u8fd0\u884c\n    logger2.error("error logger2"); // \u9519\u8bef\u4fe1\u606f\uff0c\u4f46\u4e0d\u4f1a\u5f71\u54cd\u7cfb\u7edf\u8fd0\u884c\n    logger2.warn("warn logger2"); // \u8b66\u544a\u4fe1\u606f\uff0c\u53ef\u80fd\u4f1a\u53d1\u751f\u95ee\u9898\n    logger2.info("info logger2"); // \u7a0b\u5e8f\u8fd0\u884c\u4fe1\u606f\uff0c\u6570\u636e\u5e93\u7684\u8fde\u63a5\u3001\u7f51\u7edc\u3001IO\u64cd\u4f5c\u7b49\n    logger2.debug("debug logger2"); // \u8c03\u8bd5\u4fe1\u606f\uff0c\u4e00\u822c\u5728\u5f00\u53d1\u9636\u6bb5\u4f7f\u7528\uff0c\u8bb0\u5f55\u7a0b\u5e8f\u7684\u53d8\u91cf\u3001\u53c2\u6570\u7b49\n    logger2.trace("trace logger2"); // \u8ffd\u8e2a\u4fe1\u606f\uff0c\u8bb0\u5f55\u7a0b\u5e8f\u7684\u6240\u6709\u6d41\u7a0b\u4fe1\u606f\n}\n')),(0,l.kt)("p",null,"\u6211\u4eec\u53d1\u73b0logger1\u7684\u65e5\u5fd7\u7ea7\u522b\u6210\u4e86warn\uff0c\u5e76\u4e14\u5728\u6570\u636e\u5e93\u4e2d\u6709\u4e86\u65e5\u5fd7\uff0clogger2\u7ea7\u522b\u6210\u4e86error\uff0c\u4ed6\u4eec\u5176\u5b9e\u90fd\u7ee7\u627f\u4e86\u6839logger\u7684\u4e00\u4e9b\u5c5e\u6027\u3002"),(0,l.kt)("h2",{id:"\u7b2c\u56db\u7ae0-\u65e5\u5fd7\u95e8\u9762"},"\u7b2c\u56db\u7ae0 \u65e5\u5fd7\u95e8\u9762"),(0,l.kt)("p",null," \u5f53\u6211\u4eec\u7684\u7cfb\u7edf\u53d8\u7684\u590d\u6742\u7684\u4e4b\u540e\uff0c\u96be\u514d\u4f1a\u96c6\u6210\u5176\u4ed6\u7684\u7cfb\u7edf\uff0c\u4e0d\u540c\u7684\u7cfb\u7edf\u4e4b\u95f4\u53ef\u80fd\u4f1a\u4f7f\u7528\u4e0d\u540c\u7684\u65e5\u5fd7\u7cfb\u7edf\u3002\u90a3\u4e48\u5728\u4e00\u4e2a\u7cfb\u7edf\u4e2d\uff0c\u6211\u4eec\u7684\u65e5\u5fd7\u6846\u67b6\u53ef\u80fd\u4f1a\u51fa\u73b0\u591a\u4e2a\uff0c\u4f1a\u51fa\u73b0\u6df7\u4e71\uff0c\u800c\u4e14\u968f\u7740\u65f6\u95f4\u7684\u53d1\u5c55\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u65b0\u7684\u6548\u7387\u66f4\u9ad8\u7684\u65e5\u5fd7\u7cfb\u7edf\uff0c\u5982\u679c\u6211\u4eec\u60f3\u5207\u6362\u4ee3\u4ef7\u4f1a\u975e\u5e38\u7684\u5927\u3002\u5982\u679c\u6211\u4eec\u7684\u65e5\u5fd7\u7cfb\u7edf\u80fd\u548cjdbc\u4e00\u6837\uff0c\u6709\u4e00\u5957\u81ea\u5df1\u7684\u89c4\u8303\uff0c\u5176\u4ed6\u5b9e\u73b0\u5747\u6309\u7167\u89c4\u8303\u53bb\u5b9e\u73b0\uff0c\u5c31\u80fd\u5f88\u7075\u6d3b\u7684\u4f7f\u7528\u65e5\u5fd7\u6846\u67b6\u4e86\u3002"),(0,l.kt)("p",null," \u65e5\u5fd7\u95e8\u9762\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u800c\u51fa\u73b0\u7684\u4e00\u79cd\u6280\u672f\uff0c\u65e5\u5fd7\u95e8\u9762\u662f\u89c4\u8303\uff0c\u5176\u4ed6\u7684\u5b9e\u73b0\u6309\u7167\u89c4\u8303\u5b9e\u73b0\u5404\u81ea\u7684\u65e5\u5fd7\u6846\u67b6\u5373\u53ef\uff0c\u6211\u4eec\u7a0b\u5e8f\u5458\u57fa\u4e8e\u65e5\u5fd7\u95e8\u9762\u7f16\u7a0b\u5373\u53ef\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u65e5\u5fd7\u95e8\u9762\u5c31\u597d\u6bd4\u83dc\u5355\uff0c\u65e5\u5fd7\u5b9e\u73b0\u5c31\u597d\u6bd4\u53a8\u5e08\uff0c\u6211\u4eec\u53bb\u9910\u9986\u5403\u996d\u6309\u7167\u83dc\u5355\u70b9\u83dc\u5373\u53ef\uff0c\u53a8\u5e08\u662f\u8c01\u5176\u5b9e\u4e0d\u91cd\u8981\uff0c\u4f46\u662f\u6709\u4e00\u4e2a\u7b26\u5408\u6211\u53e3\u5473\u7684\u53a8\u5e08\u5f53\u7136\u4f1a\u66f4\u597d\u3002"),(0,l.kt)("p",null,"\u5e38\u89c1\u7684\u65e5\u5fd7\u95e8\u9762\uff1a JCL\u3001slf4j"),(0,l.kt)("p",null,"\u5e38\u89c1\u7684\u65e5\u5fd7\u5b9e\u73b0\uff1a JUL\u3001log4j\u3001logback\u3001log4j2"),(0,l.kt)("p",null,"\u65e5\u5fd7\u6846\u67b6\u51fa\u73b0\u7684\u5386\u53f2\u987a\u5e8f\uff1a"),(0,l.kt)("p",null,"log4j --\x3eJUL--\x3eJCL--\x3e slf4j --\x3e logback --\x3e log4j2"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021221729341-6c15169d.png",alt:"image-20211021221729341"}),"image-20211021221729341"),(0,l.kt)("h3",{id:"\u4e00slf4j\u65e5\u5fd7\u95e8\u9762"},"\u4e00\u3001SLF4J\u65e5\u5fd7\u95e8\u9762"),(0,l.kt)("p",null," \u7b80\u5355\u65e5\u5fd7\u95e8\u9762(Simple Logging Facade For Java) SLF4J\u4e3b\u8981\u662f\u4e3a\u4e86\u7ed9Java\u65e5\u5fd7\u8bbf\u95ee\u63d0\u4f9b\u4e00\u5957\u6807\u51c6\u3001\u89c4\u8303\u7684API\u6846\u67b6\uff0c\u5176\u4e3b\u8981\u610f\u4e49\u5728\u4e8e\u63d0\u4f9b\u63a5\u53e3\uff0c\u5177\u4f53\u7684\u5b9e\u73b0\u53ef\u4ee5\u4ea4\u7531\u5176\u4ed6\u65e5\u5fd7\u6846\u67b6\uff0c\u4f8b\u5982log4j\u548clogback\u7b49\u3002 \u5f53\u7136slf4j\u81ea\u5df1\u4e5f\u63d0\u4f9b\u4e86\u529f\u80fd\u8f83\u4e3a\u7b80\u5355\u7684\u5b9e\u73b0\uff0c\u4f46\u662f\u4e00\u822c\u5f88\u5c11\u7528\u5230\u3002\u5bf9\u4e8e\u4e00\u822c\u7684Java\u9879\u76ee\u800c\u8a00\uff0c\u65e5\u5fd7\u6846\u67b6 \u4f1a\u9009\u62e9slf4j-api\u4f5c\u4e3a\u95e8\u9762\uff0c\u914d\u4e0a\u5177\u4f53\u7684\u5b9e\u73b0\u6846\u67b6\uff08log4j\u3001logback\u7b49\uff09\uff0c\u4e2d\u95f4\u4f7f\u7528\u6865\u63a5\u5668\u5b8c\u6210\u6865\u63a5\u3002\u5b98\u65b9\u7f51\u7ad9\uff1a ",(0,l.kt)("a",{parentName:"p",href:"https://www.slf4j.org/"},"https://www.slf4j.org/open in new window")),(0,l.kt)("p",null,"SLF4J\u662f\u76ee\u524d\u5e02\u9762\u4e0a\u6700\u6d41\u884c\u7684\u65e5\u5fd7\u95e8\u9762\u3002\u73b0\u5728\u7684\u9879\u76ee\u4e2d\uff0c\u57fa\u672c\u4e0a\u90fd\u662f\u4f7f\u7528SLF4J\u4f5c\u4e3a\u6211\u4eec\u7684\u65e5\u5fd7\u7cfb\u7edf\u3002"),(0,l.kt)("p",null,"SLF4J\u65e5\u5fd7\u95e8\u9762\u4e3b\u8981\u63d0\u4f9b\u4e24\u5927\u529f\u80fd\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u65e5\u5fd7\u6846\u67b6\u7684\u7ed1\u5b9a"),(0,l.kt)("li",{parentName:"ol"},"\u65e5\u5fd7\u6846\u67b6\u7684\u6865\u63a5")),(0,l.kt)("h4",{id:"1\u963f\u91cc\u65e5\u5fd7\u89c4\u7ea6"},"1\u3001\u963f\u91cc\u65e5\u5fd7\u89c4\u7ea6"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5e94\u7528\u4e2d\u4e0d\u53ef\u76f4\u63a5\u4f7f\u7528\u65e5\u5fd7\u7cfb\u7edf\uff08Log4j\u3001Logback\uff09\u4e2d\u7684API\uff0c\u800c\u5e94\u4f9d\u8d56\u4f7f\u7528\u65e5\u5fd7\u6846\u67b6SLF4J\u4e2d\u7684API\u3002\u4f7f\u7528\u95e8\u9762\u6a21\u5f0f\u7684\u65e5\u5fd7\u6846\u67b6\uff0c\u6709\u5229\u4e8e\u7ef4\u62a4\u548c\u5404\u4e2a\u7c7b\u7684\u65e5\u5fd7\u5904\u7406\u65b9\u6cd5\u7edf\u4e00\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u65e5\u5fd7\u6587\u4ef6\u63a8\u8350\u81f3\u5c11\u4fdd\u5b5815\u5929\uff0c\u56e0\u4e3a\u6709\u4e9b\u5f02\u5e38\u5177\u5907\u4ee5\u201c\u5468\u201d\u4e3a\u9891\u6b21\u53d1\u751f\u7684\u7279\u70b9\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u5e94\u7528\u4e2d\u7684\u6269\u5c55\u65e5\u5fd7\uff08\u5982\u6253\u70b9\u3001\u4e34\u65f6\u76d1\u63a7\u3001\u8bbf\u95ee\u65e5\u5fd7\u7b49\uff09\u547d\u540d\u65b9\u5f0f\uff1aappName_logType_logName.log\u3002logType\u4e3a\u65e5\u5fd7\u7c7b\u578b\uff0c\u63a8\u8350\u5206\u7c7b\u6709stats/monitor/visit \u7b49\uff1b"),(0,l.kt)("li",{parentName:"ol"},"logName\u4e3a\u65e5\u5fd7\u63cf\u8ff0\u3002\u8fd9\u79cd\u547d\u540d\u7684\u597d\u5904\uff1a\u901a\u8fc7\u6587\u4ef6\u540d\u5c31\u53ef\u4ee5\u77e5\u9053\u65e5\u5fd7\u6587\u4ef6\u5c5e\u4e8e\u54ea\u4e2a\u5e94\u7528\uff0c\u54ea\u79cd\u7c7b\u578b\uff0c\u6709\u4ec0\u4e48\u76ee\u7684\uff0c\u8fd9\u4e5f\u6709\u5229\u4e8e\u5f52\u7c7b\u67e5\u627e\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u5bf9trace/debug/info\u7ea7\u522b\u7684\u65e5\u5fd7\u8f93\u51fa\uff0c\u5fc5\u987b\u4f7f\u7528\u6761\u4ef6\u8f93\u51fa\u5f62\u5f0f\u6216\u8005\u5360\u4f4d\u7b26\u7684\u65b9\u5f0f\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u907f\u514d\u91cd\u590d\u6253\u5370\u65e5\u5fd7\uff0c\u5426\u5219\u4f1a\u6d6a\u8d39\u78c1\u76d8\u7a7a\u95f4\u3002\u52a1\u5fc5\u5728\u65e5\u5fd7\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6eadditivity=false\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u5f02\u5e38\u4fe1\u606f\u5e94\u8be5\u5305\u62ec\u4e24\u7c7b\uff1a\u6848\u53d1\u73b0\u573a\u4fe1\u606f\u548c\u5f02\u5e38\u5806\u6808\u4fe1\u606f\u3002\u5982\u679c\u4e0d\u5904\u7406\uff0c\u90a3\u4e48\u901a\u8fc7\u5173\u952e\u5b57\u5411\u4e0a\u629b\u51fa\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u8c28\u614e\u5730\u8bb0\u5f55\u65e5\u5fd7\u3002\u751f\u4ea7\u73af\u5883\u7981\u6b62\u8f93\u51fadebug\u65e5\u5fd7\uff1b\u6709\u9009\u62e9\u5730\u8f93\u51fainfo\u65e5\u5fd7\uff1b\u5982\u679c\u4f7f\u7528warn\u8bb0\u5f55\u521a\u4e0a\u7ebf\u65f6\u7684\u4e1a\u52a1\u884c\u4e3a\u4fe1\u606f\uff0c\u4e00\u5b9a\u8981\u6ce8\u610f\u65e5\u5fd7\u8f93\u51fa\u91cf\u7684\u95ee\u9898\uff0c\u907f\u514d\u5427\u670d\u52a1\u5668\u78c1\u76d8\u6491\u7206\uff0c\u5e76\u53ca\u65f6\u5220\u9664\u8fd9\u4e9b\u89c2\u5bdf\u65e5\u5fd7\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u53ef\u4ee5\u4f7f\u7528warn\u65e5\u5fd7\u7ea7\u522b\u8bb0\u5f55\u7528\u6237\u8f93\u5165\u53c2\u6570\u9519\u8bef\u7684\u60c5\u51b5\uff0c\u907f\u514d\u5f53\u7528\u6237\u6295\u8bc9\u65f6\u65e0\u6240\u9002\u4ece\u3002")),(0,l.kt)("h4",{id:"2slf4j\u5b9e\u6218"},"2\u3001SLF4J\u5b9e\u6218"),(0,l.kt)("p",null,"\uff081\uff09\u6dfb\u52a0\u4f9d\u8d56"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!--slf4j core \u4f7f\u7528slf4j\u5fc5\u9808\u6dfb\u52a0--\x3e\n<dependency>\n    <groupId>org.slf4j</groupId>\n    <artifactId>slf4j-api</artifactId>\n    <version>1.7.27</version>\n</dependency>\n\x3c!--slf4j \u81ea\u5e26\u7684\u7b80\u5355\u65e5\u5fd7\u5b9e\u73b0 --\x3e\n<dependency>\n    <groupId>org.slf4j</groupId>\n    <artifactId>slf4j-simple</artifactId>\n    <version>1.7.27</version>\n</dependency>\n")),(0,l.kt)("p",null,"\uff082\uff09\u7f16\u5199\u4ee3\u7801"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public class TestSlf4j {\n\n    // \u58f0\u660e\u65e5\u5fd7\u5bf9\u8c61\n    public final static Logger LOGGER =\n            LoggerFactory.getLogger(TestSlf4j.class);\n    @Test\n    public void testSlfSimple()  {\n        //\u6253\u5370\u65e5\u5fd7\u4fe1\u606f\n        LOGGER.error("error");\n        LOGGER.warn("warn");\n        LOGGER.info("info");\n        LOGGER.debug("debug");\n        LOGGER.trace("trace");\n        // \u4f7f\u7528\u5360\u4f4d\u7b26\u8f93\u51fa\u65e5\u5fd7\u4fe1\u606f\n        String name = "lucy";\n        Integer age = 18;\n        LOGGER.info("{}\u4eca\u5e74{}\u5c81\u4e86\uff01", name, age);\n        // \u5c06\u7cfb\u7edf\u5f02\u5e38\u4fe1\u606f\u5199\u5165\u65e5\u5fd7\n        try {\n            int i = 1 / 0;\n        } catch (Exception e) {\n            // e.printStackTrace();\n            LOGGER.info("\u51fa\u73b0\u5f02\u5e38\uff1a", e);\n        }\n    }\n}\n')),(0,l.kt)("p",null,"slf4j\u652f\u6301\u5360\u4f4d\u7b26\uff1a"),(0,l.kt)("h4",{id:"3\u7ed1\u5b9a\u5176\u4ed6\u65e5\u5fd7\u7684\u5b9e\u73b0binding"},"3\u3001\u7ed1\u5b9a\u5176\u4ed6\u65e5\u5fd7\u7684\u5b9e\u73b0\uff08Binding\uff09"),(0,l.kt)("p",null,"\u5982\u524d\u6240\u8ff0\uff0cSLF4J\u652f\u6301\u5404\u79cd\u65e5\u5fd7\u6846\u67b6\u3002SLF4J\u53d1\u884c\u7248\u9644\u5e26\u4e86\u51e0\u4e2a\u79f0\u4e3a\u201cSLF4J\u7ed1\u5b9a\u201d\u7684jar\u6587\u4ef6\uff0c\u6bcf\u4e2a\u7ed1\u5b9a\u5bf9\u5e94\u4e00\u4e2a\u53d7\u652f\u6301\u7684\u6846\u67b6\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u4f7f\u7528slf4j\u7684\u65e5\u5fd7\u7ed1\u5b9a\u6d41\u7a0b:")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u6dfb\u52a0slf4j-api\u7684\u4f9d\u8d56")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u4f7f\u7528slf4j\u7684API\u5728\u9879\u76ee\u4e2d\u8fdb\u884c\u7edf\u4e00\u7684\u65e5\u5fd7\u8bb0\u5f55")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u7ed1\u5b9a\u5177\u4f53\u7684\u65e5\u5fd7\u5b9e\u73b0\u6846\u67b6"),(0,l.kt)("p",{parentName:"li"},"a. \u7ed1\u5b9a\u5df2\u7ecf\u5b9e\u73b0\u4e86slf4j\u7684\u65e5\u5fd7\u6846\u67b6,\u76f4\u63a5\u6dfb\u52a0\u5bf9\u5e94\u4f9d\u8d56"),(0,l.kt)("p",{parentName:"li"},"b. \u7ed1\u5b9a\u6ca1\u6709\u5b9e\u73b0slf4j\u7684\u65e5\u5fd7\u6846\u67b6,\u5148\u6dfb\u52a0\u65e5\u5fd7\u7684\u9002\u914d\u5668,\u518d\u6dfb\u52a0\u5b9e\u73b0\u7c7b\u7684\u4f9d\u8d56")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"slf4j\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u65e5\u5fd7\u5b9e\u73b0\u6846\u67b6\u7684\u7ed1\u5b9a\uff08\u5982\u679c\u51fa\u73b0\u591a\u4e2a\u9ed8\u8ba4\u4f7f\u7528\u7b2c\u4e00\u4e2a\u4f9d\u8d56\u65e5\u5fd7\u5b9e\u73b0\uff09"))),(0,l.kt)("p",null,"\u7ed1\u5b9ajul\u7684\u5b9e\u73b0"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n    <groupId>org.slf4j</groupId>\n    <artifactId>slf4j-api</artifactId>\n    <version>1.7.27</version>\n</dependency>\n<dependency>\n    <groupId>org.slf4j</groupId>\n    <artifactId>slf4j-jdk14</artifactId>\n    <version>1.7.25</version>\n</dependency>\n")),(0,l.kt)("p",null,"\u7ed1\u5b9alog4j\u7684\u5b9e\u73b0"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!--slf4j core \u4f7f\u7528slf4j\u5fc5\u9808\u6dfb\u52a0--\x3e\n<dependency>\n    <groupId>org.slf4j</groupId>\n    <artifactId>slf4j-api</artifactId>\n    <version>1.7.27</version>\n</dependency>\n\x3c!-- log4j--\x3e\n<dependency>\n    <groupId>org.slf4j</groupId>\n    <artifactId>slf4j-log4j12</artifactId>\n    <version>1.7.27</version>\n</dependency>\n<dependency>\n    <groupId>log4j</groupId>\n    <artifactId>log4j</artifactId>\n    <version>1.2.17</version>\n</dependency>\n")),(0,l.kt)("p",null," \u8981\u5207\u6362\u65e5\u5fd7\u6846\u67b6\uff0c\u53ea\u9700\u66ff\u6362\u7c7b\u8def\u5f84\u4e0a\u7684slf4j\u7ed1\u5b9a\u3002\u4f8b\u5982\uff0c\u8981\u4ecejava.util.logging\u5207\u6362\u5230log4j\uff0c\u53ea\u9700\u5c06 slf4j-jdk14-1.7.27.jar\u66ff\u6362\u4e3aslf4j-log4j12-1.7.27.jar\u5373\u53ef\u3002"),(0,l.kt)("p",null," SLF4J\u4e0d\u4f9d\u8d56\u4e8e\u4efb\u4f55\u7279\u6b8a\u7684\u7c7b\u88c5\u8f7d\u3002\u5b9e\u9645\u4e0a\uff0c\u6bcf\u4e2aSLF4J\u7ed1\u5b9a\u5728\u7f16\u8bd1\u65f6\u90fd\u662f\u786c\u8fde\u7ebf\u7684\uff0c \u4ee5\u4f7f\u7528\u4e00\u4e2a\u4e14\u53ea\u6709 \u4e00\u4e2a\u7279\u5b9a\u7684\u65e5\u5fd7\u8bb0\u5f55\u6846\u67b6\u3002\u4f8b\u5982\uff0cslf4j-log4j12-1.7.27.jar\u7ed1\u5b9a\u5728\u7f16\u8bd1\u65f6\u7ed1\u5b9a\u4ee5\u4f7f\u7528log4j\u3002"),(0,l.kt)("h4",{id:"4\u6865\u63a5\u65e7\u7684\u65e5\u5fd7\u6846\u67b6bridging"},"4\u3001\u6865\u63a5\u65e7\u7684\u65e5\u5fd7\u6846\u67b6\uff08Bridging\uff09"),(0,l.kt)("p",null," \u901a\u5e38\uff0c\u60a8\u4f9d\u8d56\u7684\u67d0\u4e9b\u7ec4\u4ef6\u4f9d\u8d56\u4e8eSLF4J\u4ee5\u5916\u7684\u65e5\u5fd7\u8bb0\u5f55API\u3002\u60a8\u4e5f\u53ef\u4ee5\u5047\u8bbe\u8fd9\u4e9b\u7ec4\u4ef6\u5728\u4e0d\u4e45\u7684\u5c06\u6765\u4e0d\u4f1a\u5207\u6362\u5230SLF4J\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u79cd\u60c5\u51b5\uff0cSLF4J\u9644\u5e26\u4e86\u51e0\u4e2a\u6865\u63a5\u6a21\u5757\uff0c\u8fd9\u4e9b\u6a21\u5757\u5c06\u5bf9log4j\uff0cJCL\u548c java.util.logging API\u7684\u8c03\u7528\u91cd\u5b9a\u5411\uff0c\u5c31\u597d\u50cf\u5b83\u4eec\u662f\u5bf9SLF4J API\u4e00\u6837\u3002"),(0,l.kt)("p",null," \u5c31\u662f\u4f60\u8fd8\u7528log4j\u7684api\u5199\u4ee3\u7801\uff0c\u4f46\u662f\u5177\u4f53\u7684\u5b9e\u73b0\u7ed9\u4f60\u62bd\u79bb\u4e86\uff0c\u6211\u4eec\u4f9d\u8d56\u4e86\u4e00\u4e2a\u4e2d\u95f4\u5c42\uff0c\u8fd9\u4e2a\u5c42\u5176\u5b9e\u662f\u7528\u65e7\u7684api\u64cd\u4f5cslf4j\uff0c\u800c\u4e0d\u662f\u64cd\u4f5c\u5177\u4f53\u7684\u5b9e\u73b0\u3002"),(0,l.kt)("p",null,"\u6865\u63a5\u89e3\u51b3\u7684\u662f\u9879\u76ee\u4e2d\u65e5\u5fd7\u7684\u9057\u7559\u95ee\u9898\uff0c\u5f53\u7cfb\u7edf\u4e2d\u5b58\u5728\u4e4b\u524d\u7684\u65e5\u5fd7API\uff0c\u53ef\u4ee5\u901a\u8fc7\u6865\u63a5\u8f6c\u6362\u5230slf4j\u7684\u5b9e\u73b0"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5148\u53bb\u9664\u4e4b\u524d\u8001\u7684\u65e5\u5fd7\u6846\u67b6\u7684\u4f9d\u8d56\uff0c\u5fc5\u987b\u53bb\u6389\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u6dfb\u52a0SLF4J\u63d0\u4f9b\u7684\u6865\u63a5\u7ec4\u4ef6\uff0c\u8fd9\u4e2a\u7ec4\u4ef6\u5c31\u662f\u6a21\u4eff\u4e4b\u524d\u8001\u7684\u65e5\u5fd7\u5199\u4e86\u4e00\u5957\u76f8\u540c\u7684api\uff0c\u53ea\u4e0d\u8fc7\u8fd9\u4e2aapi\u662f\u5728\u8c03\u7528slf4j\u7684api\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u4e3a\u9879\u76ee\u6dfb\u52a0SLF4J\u7684\u5177\u4f53\u5b9e\u73b0\u3002")),(0,l.kt)("p",null,"\u8fc1\u79fb\u7684\u65b9\u5f0f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!-- \u6865\u63a5\u7684\u7ec4\u4ef6 --\x3e\n<dependency>\n    <groupId>org.slf4j</groupId>\n    <artifactId>log4j-over-slf4j</artifactId>\n    <version>1.7.27</version>\n</dependency>\n\n<dependency>\n    <groupId>org.slf4j</groupId>\n    <artifactId>slf4j-api</artifactId>\n    <version>1.7.27</version>\n</dependency>\n\n<dependency>\n    <groupId>org.slf4j</groupId>\n    <artifactId>slf4j-simple</artifactId>\n    <version>1.7.27</version>\n</dependency>\n")),(0,l.kt)("p",null,"SLF4J\u63d0\u4f9b\u7684\u6865\u63a5\u5668\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!-- log4j--\x3e\n<dependency>\n    <groupId>org.slf4j</groupId>\n    <artifactId>log4j-over-slf4j</artifactId>\n    <version>1.7.27</version>\n</dependency>\n\x3c!-- jul --\x3e\n<dependency>\n    <groupId>org.slf4j</groupId>\n    <artifactId>jul-to-slf4j</artifactId>\n    <version>1.7.27</version>\n</dependency>\n\x3c!--jcl --\x3e\n<dependency>\n    <groupId>org.slf4j</groupId>\n    <artifactId>jcl-over-slf4j</artifactId>\n    <version>1.7.27</version>\n</dependency>\n")),(0,l.kt)("p",null,"\u6ce8\u610f\u95ee\u9898\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"jcl-over-slf4j.jar\u548c slf4j-jcl.jar\u4e0d\u80fd\u540c\u65f6\u90e8\u7f72\u3002\u524d\u4e00\u4e2ajar\u6587\u4ef6\u5c06\u5bfc\u81f4JCL\u5c06\u65e5\u5fd7\u7cfb\u7edf\u7684\u9009\u62e9\u59d4\u6258\u7ed9 SLF4J\uff0c\u540e\u4e00\u4e2ajar\u6587\u4ef6\u5c06\u5bfc\u81f4SLF4J\u5c06\u65e5\u5fd7\u7cfb\u7edf\u7684\u9009\u62e9\u59d4\u6258\u7ed9JCL\uff0c\u4ece\u800c\u5bfc\u81f4\u65e0\u9650\u5faa\u73af\u3002"),(0,l.kt)("li",{parentName:"ol"},"log4j-over-slf4j.jar\u548cslf4j-log4j12.jar\u4e0d\u80fd\u540c\u65f6\u51fa\u73b0"),(0,l.kt)("li",{parentName:"ol"},"jul-to-slf4j.jar\u548cslf4j-jdk14.jar\u4e0d\u80fd\u540c\u65f6\u51fa\u73b0"),(0,l.kt)("li",{parentName:"ol"},"\u6240\u6709\u7684\u6865\u63a5\u90fd\u53ea\u5bf9Logger\u65e5\u5fd7\u8bb0\u5f55\u5668\u5bf9\u8c61\u6709\u6548\uff0c\u5982\u679c\u7a0b\u5e8f\u4e2d\u8c03\u7528\u4e86\u5185\u90e8\u7684\u914d\u7f6e\u7c7b\u6216\u8005\u662f Appender,Filter\u7b49\u5bf9\u8c61\uff0c\u5c06\u65e0\u6cd5\u4ea7\u751f\u6548\u679c\u3002")),(0,l.kt)("h4",{id:"5slf4j\u539f\u7406\u89e3\u6790"},"5\u3001SLF4J\u539f\u7406\u89e3\u6790"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"SLF4J\u901a\u8fc7LoggerFactory\u52a0\u8f7d\u65e5\u5fd7\u5177\u4f53\u7684\u5b9e\u73b0\u5bf9\u8c61\u3002"),(0,l.kt)("li",{parentName:"ol"},"LoggerFactory\u5728\u521d\u59cb\u5316\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u901a\u8fc7performInitialization()\u65b9\u6cd5\u7ed1\u5b9a\u5177\u4f53\u7684\u65e5\u5fd7\u5b9e\u73b0\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u5728\u7ed1\u5b9a\u5177\u4f53\u5b9e\u73b0\u7684\u65f6\u5019\uff0c\u901a\u8fc7\u7c7b\u52a0\u8f7d\u5668\uff0c\u52a0\u8f7dorg/slf4j/impl/StaticLoggerBinder.class"),(0,l.kt)("li",{parentName:"ol"},"\u6240\u4ee5\uff0c\u53ea\u8981\u662f\u4e00\u4e2a\u65e5\u5fd7\u5b9e\u73b0\u6846\u67b6\uff0c\u5728org.slf4j.impl\u5305\u4e2d\u63d0\u4f9b\u4e00\u4e2a\u81ea\u5df1\u7684StaticLoggerBinder\u7c7b\uff0c\u5728\u5176\u4e2d\u63d0\u4f9b\u5177\u4f53\u65e5\u5fd7\u5b9e\u73b0\u7684LoggerFactory\u5c31\u53ef\u4ee5\u88abSLF4J\u6240\u52a0\u8f7d")),(0,l.kt)("p",null,"\u5728slf4j\u4e2d\u521b\u5efalogger\u7684\u65b9\u6cd5\u662f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public static Logger getLogger(String name) {\n    ILoggerFactory iLoggerFactory = getILoggerFactory();\n    return iLoggerFactory.getLogger(name);\n}\n")),(0,l.kt)("p",null,"\u7ee7\u7eed\u8fdb\u5165\u67e5\u770b\uff0c\u6838\u5fc3\u5c31\u662fperformInitialization();\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public static ILoggerFactory getILoggerFactory() {\n    if (INITIALIZATION_STATE == UNINITIALIZED) {\n        synchronized (LoggerFactory.class) {\n            if (INITIALIZATION_STATE == UNINITIALIZED) {\n                INITIALIZATION_STATE = ONGOING_INITIALIZATION;\n                performInitialization();\n            }\n        }\n    }\n}\n")),(0,l.kt)("p",null,"\u7ee7\u7eed\u8fdb\u5165\u67e5\u770b\uff0c\u6838\u5fc3\u5c31\u662fbind()\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u5e94\u8be5\u5c31\u80fd\u7ed1\u5b9a\u65e5\u5fd7\u5b9e\u73b0\u4e86\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"private final static void performInitialization() {\n        bind();\n        if (INITIALIZATION_STATE == SUCCESSFUL_INITIALIZATION) {\n            versionSanityCheck();\n        }\n    }\n}\n")),(0,l.kt)("p",null,"\u6765\u5230\u8fd9\u91cc\uff0c\u770b\u770b\u7ed1\u5b9a\u7684\u65b9\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'private final static void bind() {\n        try {\n            ...\n            // \u4ee5\u4e0b\u5185\u5bb9\u5c31\u7ed1\u5b9a\u6210\u529f\u4e86\n            StaticLoggerBinder.getSingleton();\n            INITIALIZATION_STATE = SUCCESSFUL_INITIALIZATION;\n            reportActualBinding(staticLoggerBinderPathSet);\n            fixSubstituteLoggers();\n            replayEvents();\n            // release all resources in SUBST_FACTORY\n            SUBST_FACTORY.clear();\n        } catch (NoClassDefFoundError ncde) {\n            String msg = ncde.getMessage();\n            if (messageContainsOrgSlf4jImplStaticLoggerBinder(msg)) {\n                INITIALIZATION_STATE = NOP_FALLBACK_INITIALIZATION;\n                Util.report("Failed to load class \\"org.slf4j.impl.StaticLoggerBinder\\".");\n                Util.report("Defaulting to no-operation (NOP) logger implementation");\n                Util.report("See " + NO_STATICLOGGERBINDER_URL + " for further details.");\n            } else {\n                failedBinding(ncde);\n                throw ncde;\n            }\n        } catch (java.lang.NoSuchMethodError nsme) {\n            String msg = nsme.getMessage();\n            if (msg != null && msg.contains("org.slf4j.impl.StaticLoggerBinder.getSingleton()")) {\n                INITIALIZATION_STATE = FAILED_INITIALIZATION;\n                Util.report("slf4j-api 1.6.x (or later) is incompatible with this binding.");\n                Util.report("Your binding is version 1.5.5 or earlier.");\n                Util.report("Upgrade your binding to version 1.6.x.");\n            }\n            throw nsme;\n        } catch (Exception e) {\n            failedBinding(e);\n            throw new IllegalStateException("Unexpected initialization failure", e);\n        }\n    }\n')),(0,l.kt)("p",null,"\u6bcf\u4e00\u4e2a\u65e5\u5fd7\u5b9e\u73b0\u7684\u4e2d\u95f4\u5305\u90fd\u6709\u4e00\u4e2aStaticLoggerBinder\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021233331749-82120764.png",alt:"image-20211021233331749"}),"image-20211021233331749"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public class StaticLoggerBinder implements LoggerFactoryBinder {\n\n    /**\n     * The unique instance of this class.\n     * \n     */\n    private static final StaticLoggerBinder SINGLETON = new StaticLoggerBinder();\n\n    /**\n     * Return the singleton of this class.\n     * \n     * @return the StaticLoggerBinder singleton\n     */\n    public static final StaticLoggerBinder getSingleton() {\n        return SINGLETON;\n    }\n\n    /**\n     * Declare the version of the SLF4J API this implementation is compiled against. \n     * The value of this field is modified with each major release. \n     */\n    // to avoid constant folding by the compiler, this field must *not* be final\n    public static String REQUESTED_API_VERSION = "1.6.99"; // !final\n\n    private static final String loggerFactoryClassStr = Log4jLoggerFactory.class.getName();\n\n    /**\n     * The ILoggerFactory instance returned by the {@link #getLoggerFactory}\n     * method should always be the same object\n     */\n    private final ILoggerFactory loggerFactory;\n\n    private StaticLoggerBinder() {\n        loggerFactory = new Log4jLoggerFactory();\n        try {\n            @SuppressWarnings("unused")\n            Level level = Level.TRACE;\n        } catch (NoSuchFieldError nsfe) {\n            Util.report("This version of SLF4J requires log4j version 1.2.12 or later. See also http://www.slf4j.org/codes.html#log4j_version");\n        }\n    }\n\n    public ILoggerFactory getLoggerFactory() {\n        return loggerFactory;\n    }\n\n    public String getLoggerFactoryClassStr() {\n        return loggerFactoryClassStr;\n    }\n}\n')),(0,l.kt)("h3",{id:"\u4e8cjcl-\u65e5\u5fd7\u95e8\u9762"},"\u4e8c\u3001JCL \u65e5\u5fd7\u95e8\u9762"),(0,l.kt)("p",null," \u5168\u79f0\u4e3aJakarta Commons Logging\uff0c\u662fApache\u63d0\u4f9b\u7684\u4e00\u4e2a\u901a\u7528\u65e5\u5fd7API\u3002 \u6539\u65e5\u5fd7\u95e8\u9762\u7684\u4f7f\u7528\u5e76\u4e0d\u662f\u5f88\u5e7f\u6cdb\u3002"),(0,l.kt)("p",null,' \u5b83\u662f\u4e3a "\u6240\u6709\u7684Java\u65e5\u5fd7\u5b9e\u73b0"\u63d0\u4f9b\u4e00\u4e2a\u7edf\u4e00\u7684\u63a5\u53e3\uff0c\u5b83\u81ea\u8eab\u4e5f\u63d0\u4f9b\u4e00\u4e2a\u65e5\u5fd7\u7684\u5b9e\u73b0\uff0c\u4f46\u662f\u529f\u80fd\u975e\u5e38\u5e38\u5f31 \uff08SimpleLog\uff09\u3002\u6240\u4ee5\u4e00\u822c\u4e0d\u4f1a\u5355\u72ec\u4f7f\u7528\u5b83\u3002\u4ed6\u5141\u8bb8\u5f00\u53d1\u4eba\u5458\u4f7f\u7528\u4e0d\u540c\u7684\u5177\u4f53\u65e5\u5fd7\u5b9e\u73b0\u5de5\u5177: Log4j, Jdk \u81ea\u5e26\u7684\u65e5\u5fd7\uff08JUL)'),(0,l.kt)("p",null,"JCL \u6709\u4e24\u4e2a\u57fa\u672c\u7684\u62bd\u8c61\u7c7b\uff1aLog(\u57fa\u672c\u8bb0\u5f55\u5668)\u548cLogFactory(\u8d1f\u8d23\u521b\u5efaLog\u5b9e\u4f8b)\u3002"),(0,l.kt)("h4",{id:"1jcl\u5165\u95e8"},"1\u3001JCL\u5165\u95e8"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u5efa\u7acbmaven\u5de5\u7a0b")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u6dfb\u52a0\u4f9d\u8d56"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"```xml\n<dependency>\n    <groupId>commons-logging</groupId>\n    <artifactId>commons-logging</artifactId>\n    <version>1.2</version>\n</dependency>\n```\n")),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},"\u5165\u95e8\u4ee3\u7801")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public class JULTest {\n    @Test\n    public void testQuick() throws Exception {\n        // \u521b\u5efa\u65e5\u5fd7\u5bf9\u8c61\n        Log log = LogFactory.getLog(JULTest.class);\n        // \u65e5\u5fd7\u8bb0\u5f55\u8f93\u51fa\n        log.fatal("fatal");\n        log.error("error");\n        log.warn("warn");\n        log.info("info");\n        log.debug("debug");\n    }\n}\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6211\u4eec\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u65e5\u5fd7\u95e8\u9762\uff1a")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u9762\u5411\u63a5\u53e3\u5f00\u53d1\uff0c\u4e0d\u518d\u4f9d\u8d56\u5177\u4f53\u7684\u5b9e\u73b0\u7c7b\u3002\u51cf\u5c11\u4ee3\u7801\u7684\u8026\u5408"),(0,l.kt)("li",{parentName:"ol"},"\u9879\u76ee\u901a\u8fc7\u5bfc\u5165\u4e0d\u540c\u7684\u65e5\u5fd7\u5b9e\u73b0\u7c7b\uff0c\u53ef\u4ee5\u7075\u6d3b\u7684\u5207\u6362\u65e5\u5fd7\u6846\u67b6"),(0,l.kt)("li",{parentName:"ol"},"\u7edf\u4e00API\uff0c\u65b9\u4fbf\u5f00\u53d1\u8005\u5b66\u4e60\u548c\u4f7f\u7528"),(0,l.kt)("li",{parentName:"ol"},"\u7edf\u4e00\u914d\u7f6e\u4fbf\u4e8e\u9879\u76ee\u65e5\u5fd7\u7684\u7ba1\u7406")),(0,l.kt)("h4",{id:"2jcl\u539f\u7406"},"2\u3001JCL\u539f\u7406"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021231249663-5e859d81.png",alt:"image-20211021231249663"}),"image-20211021231249663"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u901a\u8fc7LogFactory\u52a8\u6001\u52a0\u8f7dLog\u5b9e\u73b0\u7c7b")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211020173040622-50e7df1f.png",alt:"image-20211020173040622"}),"image-20211020173040622"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u65e5\u5fd7\u95e8\u9762\u652f\u6301\u7684\u65e5\u5fd7\u5b9e\u73b0\u6570\u7ec4")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'private static final String[] classesToDiscover =\n    new String[]{"org.apache.commons.logging.impl.Log4JLogger",\n                 "org.apache.commons.logging.impl.Jdk14Logger",\n                 "org.apache.commons.logging.impl.Jdk13LumberjackLogger",\n                 "org.apache.commons.logging.impl.SimpleLog"};\n')),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u83b7\u53d6\u5177\u4f53\u7684\u65e5\u5fd7\u5b9e\u73b0")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"for(int i = 0; i < classesToDiscover.length && result == null; ++i) {\n    result = this.createLogFromClass(classesToDiscover[i], logCategory,\n                                     true);\n}\n")),(0,l.kt)("h4",{id:"3\u65e5\u5fd7\u751f\u6001\u56fe"},"3\u3001\u65e5\u5fd7\u751f\u6001\u56fe\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211031103502365-06f774c0.png",alt:"image-20211031103502365"}),"image-20211031103502365"),(0,l.kt)("p",null,"\u5386\u53f2\u63d2\u66f2\uff1a\u73b0\u5728\u804a\u804a\u5386\u53f2\uff1a",(0,l.kt)("a",{parentName:"p",href:"https://segmentfault.com/a/1190000021121882?utm_source=tag-newest"},"https://segmentfault.com/a/1190000021121882?utm_source=tag-newestopen in new window")),(0,l.kt)("h2",{id:"\u7b2c\u4e94\u7ae0-logback\u7684\u4f7f\u7528"},"\u7b2c\u4e94\u7ae0 Logback\u7684\u4f7f\u7528"),(0,l.kt)("p",null,"Logback\u662f\u7531log4j\u521b\u59cb\u4eba\u8bbe\u8ba1\u7684\u53e6\u4e00\u4e2a\u5f00\u6e90\u65e5\u5fd7\u7ec4\u4ef6\uff0c\u6027\u80fd\u6bd4log4j\u8981\u597d\u3002"),(0,l.kt)("p",null,"\u5b98\u65b9\u7f51\u7ad9\uff1a",(0,l.kt)("a",{parentName:"p",href:"https://logback.qos.ch/index.html"},"https://logback.qos.ch/index.htmlopen in new window")),(0,l.kt)("p",null,"Logback\u4e3b\u8981\u5206\u4e3a\u4e09\u4e2a\u6a21\u5757\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"logback-core\uff1a\u5176\u5b83\u4e24\u4e2a\u6a21\u5757\u7684\u57fa\u7840\u6a21\u5757"),(0,l.kt)("li",{parentName:"ul"},"logback-classic\uff1a\u5b83\u662flog4j\u7684\u4e00\u4e2a\u6539\u826f\u7248\u672c\uff0c\u540c\u65f6\u5b83\u5b8c\u6574\u5b9e\u73b0\u4e86slf4j API"),(0,l.kt)("li",{parentName:"ul"},"logback-access\uff1a\u8bbf\u95ee\u6a21\u5757\u4e0eServlet\u5bb9\u5668\u96c6\u6210\u63d0\u4f9b\u901a\u8fc7Http\u6765\u8bbf\u95ee\u65e5\u5fd7\u7684\u529f\u80fd \u540e\u7eed\u7684\u65e5\u5fd7\u4ee3\u7801\u90fd\u662f\u901a\u8fc7SLF4J\u65e5\u5fd7\u95e8\u9762\u642d\u5efa\u65e5\u5fd7\u7cfb\u7edf\uff0c\u6240\u4ee5\u5728\u4ee3\u7801\u662f\u6ca1\u6709\u533a\u522b\uff0c\u4e3b\u8981\u662f\u901a\u8fc7\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u548cpom.xml\u4f9d\u8d56")),(0,l.kt)("h3",{id:"\u4e00logback\u5165\u95e8"},"\u4e00\u3001logback\u5165\u95e8"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u6dfb\u52a0\u4f9d\u8d56")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n    <groupId>ch.qos.logback</groupId>\n    <artifactId>logback-classic</artifactId>\n    <version>1.2.3</version>\n</dependency>\n")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"java\u4ee3\u7801")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public class TestLogback {\n\n    private final static Logger logger = LoggerFactory.getLogger(TestLog4j.class);\n    \n    @Test\n    public void testLogback(){\n        //\u6253\u5370\u65e5\u5fd7\u4fe1\u606f\n        logger.error("error");\n        logger.warn("warn");\n        logger.info("info");\n        logger.debug("debug");\n        logger.trace("trace");\n    }\n}\n')),(0,l.kt)("p",null,"\u5176\u5b9e\u6211\u4eec\u53d1\u73b0\u5373\u4f7f\u9879\u76ee\u4e2d\u6ca1\u6709\u5f15\u5165slf4j\u6211\u4eec\u8fd9\u91cc\u4e5f\u662f\u7528\u7684slf4j\u95e8\u9762\u8fdb\u884c\u7f16\u7a0b\u3002"),(0,l.kt)("p",null,"1\u3001"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211022094203520-a45a4bf3.png",alt:"image-20211022094203520"}),"image-20211022094203520"),(0,l.kt)("p",null,"2\u3001\u4ecelogback'\u7684pom\u4f9d\u8d56\u4e2d\u6211\u4eec\u770b\u5230slf4j\uff0c\u4f9d\u8d56\u4f1a\u8fdb\u884c\u4f20\u9012"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211022094404297-f7046835.png",alt:"image-20211022094404297"}),"image-20211022094404297"),(0,l.kt)("h3",{id:"\u4e8c\u6e90\u7801\u89e3\u6790"},"\u4e8c\u3001\u6e90\u7801\u89e3\u6790"),(0,l.kt)("h4",{id:"1spi\u673a\u5236"},"1\u3001spi\u673a\u5236"),(0,l.kt)("p",null,"SPI\u5168\u79f0Service Provider Interface\uff0c\u662fJava\u63d0\u4f9b\u7684\u4e00\u5957\u7528\u6765\u88ab\u7b2c\u4e09\u65b9\u5b9e\u73b0\u6216\u8005\u6269\u5c55\u7684API\uff0c\u5b83\u53ef\u4ee5\u7528\u6765\u542f\u7528\u6846\u67b6\u6269\u5c55\u548c\u66ff\u6362\u7ec4\u4ef6\u3002\u4ed6\u662f\u4e00\u79cd\u670d\u52a1\u53d1\u73b0\u673a\u5236\u3002\u5b83\u901a\u8fc7\u5728ClassPath\u8def\u5f84\u4e0b\u7684META-INF/services\u6587\u4ef6\u5939\u67e5\u627e\u6587\u4ef6\uff0c\u81ea\u52a8\u52a0\u8f7d\u6587\u4ef6\u91cc\u6240\u5b9a\u4e49\u7684\u7c7b\u3002"),(0,l.kt)("p",null,"\u4e3b\u8981\u662f\u4f7f\u7528\uff0cjava.util\u5305\u4e0b\u7684ServiceLoader\u5b9e\u73b0\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public static <S> ServiceLoader<S> load(Class<S> service, ClassLoader loader)\n{\n    return new ServiceLoader<>(service, loader);\n}\n")),(0,l.kt)("h4",{id:"2\u6e90\u7801\u89e3\u6790"},"2\u3001\u6e90\u7801\u89e3\u6790"),(0,l.kt)("p",null,"\u6e90\u7801\u770b\u4e00\u4e0b\u542f\u52a8\u8fc7\u7a0b\uff1a"),(0,l.kt)("p",null,"1\u3001\u6211\u4eec\u4ece\u65e5\u5fd7\u5de5\u5382\u7684\u5e38\u89c1\u770b\u8d77\uff0c\u8fd9\u91cc\u662fslf4j\u7684\u5b9e\u73b0\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"private final static Logger logger = LoggerFactory.getLogger(TestLog4j.class);\n")),(0,l.kt)("p",null,"\u6838\u5fc3\u65b9\u6cd5\u53ea\u6709\u4e00\u53e5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public static Logger getLogger(Class<?> clazz) {\n    Logger logger = getLogger(clazz.getName());\n    ...\u4e2d\u95f4\u7684\u903b\u8f91\u5224\u65ad\u7701\u7565\u6389\n    return logger;\n}\n")),(0,l.kt)("p",null,"\u770b\u4e00\u4e0bgetLogger\u65b9\u6cd5\uff0c\u8fd9\u91cc\u662f\u5148\u83b7\u53d6\u65e5\u5fd7\u5de5\u5382\uff0c\u5728\u4ece\u5de5\u5382\u4e2d\u63d0\u53d6\u65e5\u5fd7\u5bf9\u8c61\uff0c\u6211\u4eec\u4e0d\u8003\u8651\u65e5\u5fd7\u5bf9\u8c61\uff0c\u4e3b\u8981\u770b\u770b\u65e5\u5fd7\u5de5\u5382\u7684\u73af\u5883\u600e\u4e48\u521d\u59cb\u5316\u7684\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public static Logger getLogger(String name) {\n    ILoggerFactory iLoggerFactory = getILoggerFactory();\n    return iLoggerFactory.getLogger(name);\n}\n")),(0,l.kt)("p",null,"\u65e5\u5fd7\u5de5\u5382\u7684\u521b\u5efa\u65b9\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public static ILoggerFactory getILoggerFactory() {\n    ...\u53bb\u6389\u5176\u4ed6\u7684\u4ee3\u7801\uff0c\u4ece\u8fd9\u4e00\u884c\u770b\u3002\n    return StaticLoggerBinder.getSingleton().getLoggerFactory();\n\n}\n")),(0,l.kt)("p",null,"\u8fd9\u91cc\u5c31\u8fdb\u5165\u4e86\uff0cStaticLoggerBinder\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u8fd9\u662f\u65e5\u5fd7\u5b9e\u73b0\u7528\u6765\u548cslf4j\u8fdb\u884c\u7ed1\u5b9a\u7684\u7c7b\uff0c\u4ece\u6b64\u5c31\u8fdb\u5165\u65e5\u5fd7\u5b9e\u73b0\u4e2d\u4e86\u3002"),(0,l.kt)("p",null,"StaticLoggerBinder.getSingleton()\u8fd9\u91cc\u770b\u5230\u51fa\u6765\u662f\u4e00\u4e2a\u5355\u4f8b\uff0c\u6765\u5230\u8fd9\u4e2a\u7c7b\u5f53\u4e2d\uff0c\u6211\u4eec\u770b\u5230\uff0c\u76f4\u63a5\u8fd4\u56de\u4e86defaultLoggerContext"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"public ILoggerFactory getLoggerFactory() {\n        if (!initialized) {\n            return defaultLoggerContext;\n        }\n... \u7701\u7565\u5176\u4ed6\n        \n    }\n")),(0,l.kt)("p",null,"\u8fd9\u662f\u4e2a\u65e5\u5fd7\u4e0a\u4e0b\u6587\uff0c\u4e00\u5b9a\u4fdd\u5b58\u4e86\u6211\u4eec\u7684\u73af\u5883\uff0c\u914d\u7f6e\u5185\u5bb9\u4e00\u5b9a\u5728\u8fd9\u4e2a\u91cc\u8fb9\uff0c\u90a3\u4e48\u54ea\u91cc\u521d\u59cb\u5316\u4ed6\u4e86\u5462\uff0c\u6211\u4eec\u80fd\u60f3\u5230\u7684\u5c31\u662f\u9759\u6001\u4ee3\u7801\u5757\u4e86\uff1a"),(0,l.kt)("p",null,"\u6211\u4eec\u53d1\u73b0\u8fd9\u4e2a\u7c7b\u4e2d\u8fd8\u771f\u6709\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"static {\n    SINGLETON.init();\n}\n")),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u5230init()\u65b9\u6cd5\u4e2d\uff0c\u6709\u4e00\u4e2aautoConfig()\uff0c\u611f\u89c9\u5c31\u50cf\u5728\u81ea\u52a8\u914d\u7f6e\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'void init() {\n    try {\n        try {\n            new ContextInitializer(defaultLoggerContext).autoConfig();\n        } catch (JoranException je) {\n            Util.report("Failed to auto configure default logger context", je);\n        }\n        ...\u5176\u4ed6\u7701\u7565\n    }\n}\n')),(0,l.kt)("p",null,"\u9ed8\u8ba4\u914d\u7f6e\uff1aContextInitializer\u7c7b\u662f\u521d\u59cb\u5316\u7684\u5173\u952e\uff1a"),(0,l.kt)("p",null,"\u81ea\u52a8\u914d\u7f6e\u662f\u8fd9\u4e48\u73a9\u7684\uff0c\u5148\u627e\u914d\u7f6e\u6587\u4ef6"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public void autoConfig() throws JoranException {\n        StatusListenerConfigHelper.installIfAsked(loggerContext);\n        // \u8fd9\u5c31\u662f\u53bb\u627e\u914d\u7f6e\u6587\u4ef6\n        URL url = findURLOfDefaultConfigurationFile(true);\n        if (url != null) {\n            // \u89e3\u6790\u914d\u7f6e\n            configureByResource(url);\n        } else {\n            // \u6ca1\u6709\u627e\u5230\u6587\u4ef6\uff0c\u5c31\u53bb\u4f7f\u7528spi\u673a\u5236\u627e\u4e00\u4e2a\u914d\u7f6e\u7c7b\uff0c\u8fd9\u4e2a\u914d\u7f6e\u7c7b\u662f\u5728web\u4e2d\u7528\u7684\n            Configurator c = EnvUtil.loadFromServiceLoader(Configurator.class);\n            if (c != null) {\n                try {\n                    c.setContext(loggerContext);\n                    c.configure(loggerContext);\n                } catch (Exception e) {\n                    throw new LogbackException(String.format("Failed to initialize Configurator: %s using ServiceLoader", c != null ? c.getClass()\n                                    .getCanonicalName() : "null"), e);\n                }\n            } else {\n                // \u5982\u679c\u6ca1\u6709\u627e\u5230\uff0c\u5c31\u505a\u57fa\u672c\u7684\u914d\u7f6e\n                BasicConfigurator basicConfigurator = new BasicConfigurator();\n                basicConfigurator.setContext(loggerContext);\n                basicConfigurator.configure(loggerContext);\n            }\n        }\n    }\n')),(0,l.kt)("p",null,"\u5bfb\u627e\u914d\u7f6e\u6587\u4ef6\u7684\u8fc7\u7a0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'final public static String GROOVY_AUTOCONFIG_FILE = "logback.groovy";\nfinal public static String AUTOCONFIG_FILE = "logback.xml";\nfinal public static String TEST_AUTOCONFIG_FILE = "logback-test.xml";\n\npublic URL findURLOfDefaultConfigurationFile(boolean updateStatus) {\n    ClassLoader myClassLoader = Loader.getClassLoaderOfObject(this);\n    URL url = findConfigFileURLFromSystemProperties(myClassLoader, updateStatus);\n    if (url != null) {\n        return url;\n    }\n\n    url = getResource(TEST_AUTOCONFIG_FILE, myClassLoader, updateStatus);\n    if (url != null) {\n        return url;\n    }\n\n    url = getResource(GROOVY_AUTOCONFIG_FILE, myClassLoader, updateStatus);\n    if (url != null) {\n        return url;\n    }\n\n    return getResource(AUTOCONFIG_FILE, myClassLoader, updateStatus);\n}\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},' public void configureByResource(URL url) throws JoranException {\n        if (url == null) {\n            throw new IllegalArgumentException("URL argument cannot be null");\n        }\n        final String urlString = url.toString();\n        if (urlString.endsWith("groovy")) {\n            if (EnvUtil.isGroovyAvailable()) {\n                // avoid directly referring to GafferConfigurator so as to avoid\n                // loading groovy.lang.GroovyObject . See also http://jira.qos.ch/browse/LBCLASSIC-214\n                GafferUtil.runGafferConfiguratorOn(loggerContext, this, url);\n            } else {\n                StatusManager sm = loggerContext.getStatusManager();\n                sm.add(new ErrorStatus("Groovy classes are not available on the class path. ABORTING INITIALIZATION.", loggerContext));\n            }\n        } else if (urlString.endsWith("xml")) {\n            JoranConfigurator configurator = new JoranConfigurator();\n            configurator.setContext(loggerContext);\n            configurator.doConfigure(url);\n        } else {\n            throw new LogbackException("Unexpected filename extension of file [" + url.toString() + "]. Should be either .groovy or .xml");\n        }\n    }\n')),(0,l.kt)("p",null,"\u57fa\u7840\u914d\u7f6e\u7684\u4ee3\u7801\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public class BasicConfigurator extends ContextAwareBase implements Configurator {\n\n    public BasicConfigurator() {\n    }\n\n    public void configure(LoggerContext lc) {\n        addInfo("Setting up default configuration.");\n        \n        ConsoleAppender<ILoggingEvent> ca = new ConsoleAppender<ILoggingEvent>();\n        ca.setContext(lc);\n        ca.setName("console");\n        LayoutWrappingEncoder<ILoggingEvent> encoder = new LayoutWrappingEncoder<ILoggingEvent>();\n        encoder.setContext(lc);\n        \n \n        // same as \n        // PatternLayout layout = new PatternLayout();\n        // layout.setPattern("%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n");\n        TTLLLayout layout = new TTLLLayout();\n \n        layout.setContext(lc);\n        layout.start();\n        encoder.setLayout(layout);\n        \n        ca.setEncoder(encoder);\n        ca.start();\n        \n        Logger rootLogger = lc.getLogger(Logger.ROOT_LOGGER_NAME);\n        rootLogger.addAppender(ca);\n    }\n}\n')),(0,l.kt)("p",null,"\u6211\u4eec\u5148\u4e0d\u8bf4\u914d\u7f6e\u7684\u4e8b\u60c5\uff0c\u4ece\u6e90\u7801\u4e2d\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\u6709\u51e0\u79cd\u914d\u7f6e\uff0c\u56e0\u4e3a\u6709\u4e86"),(0,l.kt)("p",null,"\u6211\u4eec\u5148\u6a21\u4effBasicConfigurator\u5199\u4e00\u4e2a\u7c7b\uff0c\u53ea\u505a\u7565\u5fae\u7684\u6539\u52a8\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public class MyConfigurator extends ContextAwareBase implements Configurator {\n    public MyConfigurator() {\n    }\n\n    public void configure(LoggerContext lc) {\n        addInfo("Setting up default configuration.");\n\n        ConsoleAppender<ILoggingEvent> ca = new ConsoleAppender<ILoggingEvent>();\n        ca.setContext(lc);\n        ca.setName("console");\n        LayoutWrappingEncoder<ILoggingEvent> encoder = new LayoutWrappingEncoder<ILoggingEvent>();\n        encoder.setContext(lc);\n\n\n        // same as\n        // PatternLayout layout = new PatternLayout();\n        // layout.setPattern("%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n");\n        PatternLayout layout = new PatternLayout();\n        layout.setPattern("%d{HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n");\n\n        layout.setContext(lc);\n        layout.start();\n        encoder.setLayout(layout);\n\n        ca.setEncoder(encoder);\n        ca.start();\n\n        Logger rootLogger = lc.getLogger(Logger.ROOT_LOGGER_NAME);\n        rootLogger.addAppender(ca);\n    }\n}\n')),(0,l.kt)("p",null,"\u5728resource\u4e2d\u65b0\u5efaMETA-INF\u76ee\u5f55\uff0c\u4e0b\u8fb9\u5728\u65b0\u5efaservices\u6587\u4ef6\u5939\uff0c\u518d\u65b0\u5efa\u4e00\u4e2a\u540d\u5b57\u6211",(0,l.kt)("inlineCode",{parentName:"p"},"ch.qos.logback.classic.spi.Configurator"),"\u7684\u6587\u4ef6\uff0c"),(0,l.kt)("p",null,"\u5185\u5bb9\u662f\uff1acom.ydlclass.MyConfigurator"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211022111350444-a7af7dc8.png",alt:"image-20211022111350444"}),"image-20211022111350444"),(0,l.kt)("h3",{id:"\u4e09\u4e09\u5927\u7ec4\u4ef6"},"\u4e09\u3001\u4e09\u5927\u7ec4\u4ef6"),(0,l.kt)("p",null,"1\u3001appender\uff0c\u8f93\u51fa\u6e90\uff0c\u4e00\u4e2a\u65e5\u5fd7\u53ef\u4ee5\u540e\u597d\u51e0\u4e2a\u8f93\u51fa\u6e90"),(0,l.kt)("p",null,"2\u3001encoder\uff0c\u4e00\u4e2aappender\u6709\u4e00\u4e2aencoder\uff0c\u8d1f\u8d23\u5c06\u4e00\u4e2aevent\u4e8b\u4ef6\u8f6c\u6362\u6210\u4e00\u7ec4byte\u6570\u7ec4\uff0c\u5e76\u5c06\u8f6c\u6362\u540e\u7684\u5b57\u8282\u6570\u636e\u8f93\u51fa\u5230\u6587\u4ef6\u4e2d\u3002"),(0,l.kt)("p",null,"Encoder\u8d1f\u8d23\u628a\u4e8b\u4ef6\u8f6c\u6362\u4e3a\u5b57\u8282\u6570\u7ec4\uff0c\u5e76\u628a\u5b57\u8282\u6570\u7ec4\u5199\u5230\u5408\u9002\u7684\u8f93\u51fa\u6d41\u3002\u56e0\u6b64\uff0cencoder\u53ef\u4ee5\u63a7\u5236\u5728\u4ec0\u4e48\u65f6\u5019\u3001\u628a\u4ec0\u4e48\u6837\u7684\u5b57\u8282\u6570\u7ec4\u5199\u5165\u5230\u5176\u62e5\u6709\u8005\u7ef4\u62a4\u7684\u8f93\u51fa\u6d41\u4e2d\u3002Encoder\u63a5\u53e3\u6709\u4e24\u4e2a\u5b9e\u73b0\u7c7b\uff0cLayoutWrappingEncoder\u4e0ePatternLayoutEncoder\u3002"),(0,l.kt)("p",null,"\u6ce8\u610f\uff1a\u5728logback 0.9.19 \u7248\u4e4b\u524d\u6ca1\u6709 encoder\u3002"),(0,l.kt)("p",null,"\u5728\u4e4b\u524d\u7684\u7248\u672c\u91cc\uff0c\u591a\u6570 appender \u4f9d\u9760 layout \u6765\u628a\u4e8b\u4ef6\u8f6c\u6362\u6210\u5b57\u7b26\u4e32\u5e76\u7528 java.io.Writer \u628a\u5b57\u7b26\u4e32\u8f93\u51fa\u3002\u5728\u4e4b\u524d\u7684\u7248\u672c\u91cc\uff0c\u7528\u6237\u9700\u8981\u5728 FileAppender\u91cc\u5d4c\u5165\u4e00\u4e2a PatternLayout\u3002"),(0,l.kt)("p",null,"3\u3001layout\uff0c\u683c\u5f0f\u5316\u6570\u636e\u5c06event\u4e8b\u4ef6\u8f6c\u5316\u4e3a\u5b57\u7b26\u4e32\uff0c\u89e3\u6790\u7684\u8fc7\u7a0b"),(0,l.kt)("p",null,"4\u3001filter \u8fc7\u6ee4\u5668"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"LevelFilter levelFilter = new LevelFilter();\n        levelFilter.setOnMatch(FilterReply.DENY);\n        levelFilter.setLevel(Level.WARN);\n        levelFilter.start();\n        ca.addFilter(levelFilter);\n")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"%-5level"),(0,l.kt)("li",{parentName:"ol"},"%d{yyyy-MM-dd HH:mm:ss.SSS}\u65e5\u671f"),(0,l.kt)("li",{parentName:"ol"},"%c\u7c7b\u7684\u5b8c\u6574\u540d\u79f0"),(0,l.kt)("li",{parentName:"ol"},"%M\u4e3amethod"),(0,l.kt)("li",{parentName:"ol"},"%L\u4e3a\u884c\u53f7"),(0,l.kt)("li",{parentName:"ol"},"%thread\u7ebf\u7a0b\u540d\u79f0"),(0,l.kt)("li",{parentName:"ol"},"%m\u6216\u8005%msg\u4e3a\u4fe1\u606f"),(0,l.kt)("li",{parentName:"ol"},"%n\u6362\u884c")),(0,l.kt)("p",null,"\u80fd\u770b\u5230logback\u7684\u683c\u5f0f\u5316\u4fe1\u606f"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public class PatternLayout extends PatternLayoutBase<ILoggingEvent> {\n\n    public static final Map<String, String> defaultConverterMap = new HashMap<String, String>();\n    public static final String HEADER_PREFIX = "#logback.classic pattern: ";\n\n    static {\n        defaultConverterMap.putAll(Parser.DEFAULT_COMPOSITE_CONVERTER_MAP);\n\n        defaultConverterMap.put("d", DateConverter.class.getName());\n        defaultConverterMap.put("date", DateConverter.class.getName());\n\n        defaultConverterMap.put("r", RelativeTimeConverter.class.getName());\n        defaultConverterMap.put("relative", RelativeTimeConverter.class.getName());\n\n        defaultConverterMap.put("level", LevelConverter.class.getName());\n        defaultConverterMap.put("le", LevelConverter.class.getName());\n        defaultConverterMap.put("p", LevelConverter.class.getName());\n\n        defaultConverterMap.put("t", ThreadConverter.class.getName());\n        defaultConverterMap.put("thread", ThreadConverter.class.getName());\n\n        defaultConverterMap.put("lo", LoggerConverter.class.getName());\n        defaultConverterMap.put("logger", LoggerConverter.class.getName());\n        defaultConverterMap.put("c", LoggerConverter.class.getName());\n\n        defaultConverterMap.put("m", MessageConverter.class.getName());\n        defaultConverterMap.put("msg", MessageConverter.class.getName());\n        defaultConverterMap.put("message", MessageConverter.class.getName());\n\n        defaultConverterMap.put("C", ClassOfCallerConverter.class.getName());\n        defaultConverterMap.put("class", ClassOfCallerConverter.class.getName());\n\n        defaultConverterMap.put("M", MethodOfCallerConverter.class.getName());\n        defaultConverterMap.put("method", MethodOfCallerConverter.class.getName());\n\n        defaultConverterMap.put("L", LineOfCallerConverter.class.getName());\n        defaultConverterMap.put("line", LineOfCallerConverter.class.getName());\n\n        defaultConverterMap.put("F", FileOfCallerConverter.class.getName());\n        defaultConverterMap.put("file", FileOfCallerConverter.class.getName());\n\n        defaultConverterMap.put("X", MDCConverter.class.getName());\n        defaultConverterMap.put("mdc", MDCConverter.class.getName());\n\n        defaultConverterMap.put("ex", ThrowableProxyConverter.class.getName());\n        defaultConverterMap.put("exception", ThrowableProxyConverter.class.getName());\n        defaultConverterMap.put("rEx", RootCauseFirstThrowableProxyConverter.class.getName());\n        defaultConverterMap.put("rootException", RootCauseFirstThrowableProxyConverter.class.getName());\n        defaultConverterMap.put("throwable", ThrowableProxyConverter.class.getName());\n\n        defaultConverterMap.put("xEx", ExtendedThrowableProxyConverter.class.getName());\n        defaultConverterMap.put("xException", ExtendedThrowableProxyConverter.class.getName());\n        defaultConverterMap.put("xThrowable", ExtendedThrowableProxyConverter.class.getName());\n\n        defaultConverterMap.put("nopex", NopThrowableInformationConverter.class.getName());\n        defaultConverterMap.put("nopexception", NopThrowableInformationConverter.class.getName());\n\n        defaultConverterMap.put("cn", ContextNameConverter.class.getName());\n        defaultConverterMap.put("contextName", ContextNameConverter.class.getName());\n\n        defaultConverterMap.put("caller", CallerDataConverter.class.getName());\n\n        defaultConverterMap.put("marker", MarkerConverter.class.getName());\n\n        defaultConverterMap.put("property", PropertyConverter.class.getName());\n\n        defaultConverterMap.put("n", LineSeparatorConverter.class.getName());\n\n        defaultConverterMap.put("black", BlackCompositeConverter.class.getName());\n        defaultConverterMap.put("red", RedCompositeConverter.class.getName());\n        defaultConverterMap.put("green", GreenCompositeConverter.class.getName());\n        defaultConverterMap.put("yellow", YellowCompositeConverter.class.getName());\n        defaultConverterMap.put("blue", BlueCompositeConverter.class.getName());\n        defaultConverterMap.put("magenta", MagentaCompositeConverter.class.getName());\n        defaultConverterMap.put("cyan", CyanCompositeConverter.class.getName());\n        defaultConverterMap.put("white", WhiteCompositeConverter.class.getName());\n        defaultConverterMap.put("gray", GrayCompositeConverter.class.getName());\n        defaultConverterMap.put("boldRed", BoldRedCompositeConverter.class.getName());\n        defaultConverterMap.put("boldGreen", BoldGreenCompositeConverter.class.getName());\n        defaultConverterMap.put("boldYellow", BoldYellowCompositeConverter.class.getName());\n        defaultConverterMap.put("boldBlue", BoldBlueCompositeConverter.class.getName());\n        defaultConverterMap.put("boldMagenta", BoldMagentaCompositeConverter.class.getName());\n        defaultConverterMap.put("boldCyan", BoldCyanCompositeConverter.class.getName());\n        defaultConverterMap.put("boldWhite", BoldWhiteCompositeConverter.class.getName());\n        defaultConverterMap.put("highlight", HighlightingCompositeConverter.class.getName());\n\n        defaultConverterMap.put("lsn", LocalSequenceNumberConverter.class.getName());\n\n    }\n\n    public PatternLayout() {\n        this.postCompileProcessor = new EnsureExceptionHandling();\n    }\n\n    public Map<String, String> getDefaultConverterMap() {\n        return defaultConverterMap;\n    }\n\n    public String doLayout(ILoggingEvent event) {\n        if (!isStarted()) {\n            return CoreConstants.EMPTY_STRING;\n        }\n        return writeLoopOnConverters(event);\n    }\n\n    @Override\n    protected String getPresentationHeaderPrefix() {\n        return HEADER_PREFIX;\n    }\n}\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"OutputStreamAppender\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'protected void subAppend(E event) {\n        if (!isStarted()) {\n            return;\n        }\n        try {\n            // this step avoids LBCLASSIC-139\n            if (event instanceof DeferredProcessingAware) {\n                ((DeferredProcessingAware) event).prepareForDeferredProcessing();\n            }\n            // the synchronization prevents the OutputStream from being closed while we\n            // are writing. It also prevents multiple threads from entering the same\n            // converter. Converters assume that they are in a synchronized block.\n            // lock.lock();\n\n            byte[] byteArray = this.encoder.encode(event);\n            writeBytes(byteArray);\n\n        } catch (IOException ioe) {\n            // as soon as an exception occurs, move to non-started state\n            // and add a single ErrorStatus to the SM.\n            this.started = false;\n            addStatus(new ErrorStatus("IO failure in appender", this, ioe));\n        }\n    }\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"public byte[] encode(E event) {\n        String txt = layout.doLayout(event);\n        return convertToBytes(txt);\n    }\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"private void buildLoggingEventAndAppend(final String localFQCN, final Marker marker, final Level level, final String msg, final Object[] params,\n                                        final Throwable t) {\n    LoggingEvent le = new LoggingEvent(localFQCN, this, level, msg, t, params);\n    le.setMarker(marker);\n    callAppenders(le);\n}\n")),(0,l.kt)("h3",{id:"\u56dblogback\u914d\u7f6e"},"\u56db\u3001logback\u914d\u7f6e"),(0,l.kt)("p",null,"Let us begin by discussing the initialization steps that logback follows to try to configure itself:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Logback tries to find a file called ",(0,l.kt)("em",{parentName:"li"},"logback-test.xml")," ",(0,l.kt)("a",{parentName:"li",href:"http://logback.qos.ch/faq.html#configFileLocation"},"in the classpathopen in new window"),"."),(0,l.kt)("li",{parentName:"ol"},"If no such file is found, logback tries to find a file called ",(0,l.kt)("em",{parentName:"li"},"logback.groovy")," ",(0,l.kt)("a",{parentName:"li",href:"http://logback.qos.ch/faq.html#configFileLocation"},"in the classpathopen in new window"),"."),(0,l.kt)("li",{parentName:"ol"},"If no such file is found, it checks for the file ",(0,l.kt)("em",{parentName:"li"},"logback.xml")," ",(0,l.kt)("a",{parentName:"li",href:"http://logback.qos.ch/faq.html#configFileLocation"},"in the classpathopen in new window"),".."),(0,l.kt)("li",{parentName:"ol"},"If no such file is found, ",(0,l.kt)("a",{parentName:"li",href:"http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html"},"service-provider loading facilityopen in new window")," (introduced in JDK 1.6) is used to resolve the implementation of ",(0,l.kt)("a",{parentName:"li",href:"http://logback.qos.ch/xref/ch/qos/logback/classic/spi/Configurator.html"},(0,l.kt)("inlineCode",{parentName:"a"},"com.qos.logback.classic.spi.Configurator"),"open in new window")," interface by looking up the file ",(0,l.kt)("em",{parentName:"li"},"META-INF\\services\\ch.qos.logback.classic.spi.Configurator")," in the class path. Its contents should specify the fully qualified class name of the desired ",(0,l.kt)("inlineCode",{parentName:"li"},"Configurator")," implementation."),(0,l.kt)("li",{parentName:"ol"},"If none of the above succeeds, logback configures itself automatically using the ",(0,l.kt)("a",{parentName:"li",href:"http://logback.qos.ch/xref/ch/qos/logback/classic/BasicConfigurator.html"},(0,l.kt)("inlineCode",{parentName:"a"},"BasicConfigurator"),"open in new window")," which will cause logging output to be directed to the console."),(0,l.kt)("li",{parentName:"ol"},"\u57fa\u672c\u914d\u7f6e\u4fe1\u606f")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<configuration>\n\n    \x3c!--\u683c\u5f0f\u5316\u8f93\u51fa\uff1a%d\u8868\u793a\u65e5\u671f\uff0c%thread\u8868\u793a\u7ebf\u7a0b\u540d\uff0c%-5level\uff1a\u7ea7\u522b\u4ece\u5de6\u663e\u793a5\u4e2a\u5b57\u7b26\u5bbd\u5ea6\n    %msg\uff1a\u65e5\u5fd7\u6d88\u606f\uff0c%n\u662f\u6362\u884c\u7b26--\x3e\n    <property name="pattern" value="%d{yyyy-MM-dd HH:mm:ss.SSS} %c [%thread]\n                                    %-5level %msg%n"/>\n    \x3c!--\n        Appender: \u8bbe\u7f6e\u65e5\u5fd7\u4fe1\u606f\u7684\u53bb\u5411,\u5e38\u7528\u7684\u6709\u4ee5\u4e0b\u51e0\u4e2a\n        ch.qos.logback.core.ConsoleAppender (\u63a7\u5236\u53f0)\n        ch.qos.logback.core.rolling.RollingFileAppender (\u6587\u4ef6\u5927\u5c0f\u5230\u8fbe\u6307\u5b9a\u5c3a\u5bf8\u7684\u65f6\u5019\u4ea7\u751f\u4e00\u4e2a\u65b0\u6587\u4ef6)\n        ch.qos.logback.core.FileAppender (\u6587\u4ef6)\n        --\x3e\n    <appender name="console" class="ch.qos.logback.core.ConsoleAppender">\n        \x3c!--\u8f93\u51fa\u6d41\u5bf9\u8c61 \u9ed8\u8ba4 System.out \u6539\u4e3a System.err--\x3e\n        <target>System.err</target>\n        \x3c!--\u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e--\x3e\n        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">\n            <pattern>${pattern}</pattern>\n        </encoder>\n    </appender>\n    \x3c!--\n  \u7528\u6765\u8bbe\u7f6e\u67d0\u4e00\u4e2a\u5305\u6216\u8005\u5177\u4f53\u7684\u67d0\u4e00\u4e2a\u7c7b\u7684\u65e5\u5fd7\u6253\u5370\u7ea7\u522b\u3001\u4ee5\u53ca\u6307\u5b9a<appender>\u3002\n                    <loger>\u4ec5\u6709\u4e00\u4e2aname\u5c5e\u6027\uff0c\u4e00\u4e2a\u53ef\u9009\u7684level\u548c\u4e00\u4e2a\u53ef\u9009\u7684addtivity\u5c5e\u6027\n                    name:\n        \u7528\u6765\u6307\u5b9a\u53d7\u6b64logger\u7ea6\u675f\u7684\u67d0\u4e00\u4e2a\u5305\u6216\u8005\u5177\u4f53\u7684\u67d0\u4e00\u4e2a\u7c7b\u3002\n            level:\n        \u7528\u6765\u8bbe\u7f6e\u6253\u5370\u7ea7\u522b\uff0c\u5927\u5c0f\u5199\u65e0\u5173\uff1aTRACE, DEBUG, INFO, WARN, ERROR, ALL \u548c\n            OFF\uff0c\n            \u5982\u679c\u672a\u8bbe\u7f6e\u6b64\u5c5e\u6027\uff0c\u90a3\u4e48\u5f53\u524dlogger\u5c06\u4f1a\u7ee7\u627f\u4e0a\u7ea7\u7684\u7ea7\u522b\u3002\n            additivity:\n        \u662f\u5426\u5411\u4e0a\u7ea7loger\u4f20\u9012\u6253\u5370\u4fe1\u606f\u3002\u9ed8\u8ba4\u662ftrue\u3002\n            <logger>\u53ef\u4ee5\u5305\u542b\u96f6\u4e2a\u6216\u591a\u4e2a<appender-ref>\u5143\u7d20\uff0c\u6807\u8bc6\u8fd9\u4e2aappender\u5c06\u4f1a\u6dfb\u52a0\u5230\u8fd9\u4e2a\n            logger\n            --\x3e\n    \x3c!--\n            \u4e5f\u662f<logger>\u5143\u7d20\uff0c\u4f46\u662f\u5b83\u662f\u6839logger\u3002\u9ed8\u8ba4debug\n            level:\u7528\u6765\u8bbe\u7f6e\u6253\u5370\u7ea7\u522b\uff0c\u5927\u5c0f\u5199\u65e0\u5173\uff1aTRACE, DEBUG, INFO, WARN, ERROR, ALL\n                \u548c OFF\uff0c\n                <root>\u53ef\u4ee5\u5305\u542b\u96f6\u4e2a\u6216\u591a\u4e2a<appender-ref>\u5143\u7d20\uff0c\u6807\u8bc6\u8fd9\u4e2aappender\u5c06\u4f1a\u6dfb\u52a0\u5230\u8fd9\u4e2a\n                logger\u3002\n        --\x3e\n    <root level="ALL">\n        <appender-ref ref="console"/>\n    </root>\n</configuration>\n')),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"FileAppender\u914d\u7f6e")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<configuration>\n    \x3c!-- \u81ea\u5b9a\u4e49\u5c5e\u6027 \u53ef\u4ee5\u901a\u8fc7${name}\u8fdb\u884c\u5f15\u7528--\x3e\n    <property name="pattern" value="[%-5level] %d{yyyy-MM-dd HH:mm:ss} %c %M\n                                    %L [%thread] %m %n"/>\n    \x3c!--\n    \u65e5\u5fd7\u8f93\u51fa\u683c\u5f0f\uff1a\n    %d{pattern}\u65e5\u671f\n    %m\u6216\u8005%msg\u4e3a\u4fe1\u606f\n    %M\u4e3amethod\n    %L\u4e3a\u884c\u53f7\n    %c\u7c7b\u7684\u5b8c\u6574\u540d\u79f0\n    %thread\u7ebf\u7a0b\u540d\u79f0\n    %n\u6362\u884c\n    %-5level\n    --\x3e\n    \x3c!-- \u65e5\u5fd7\u6587\u4ef6\u5b58\u653e\u76ee\u5f55 --\x3e\n    <property name="log_dir" value="d:/logs"></property>\n    \x3c!--\u63a7\u5236\u53f0\u8f93\u51faappender\u5bf9\u8c61--\x3e\n    <appender name="console" class="ch.qos.logback.core.ConsoleAppender">\n        \x3c!--\u8f93\u51fa\u6d41\u5bf9\u8c61 \u9ed8\u8ba4 System.out \u6539\u4e3a System.err--\x3e\n        <target>System.err</target>\n        \x3c!--\u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e--\x3e\n        <encoder\n                 class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">\n            <pattern>${pattern}</pattern>\n        </encoder>\n    </appender>\n    \x3c!--\u65e5\u5fd7\u6587\u4ef6\u8f93\u51faappender\u5bf9\u8c61--\x3e\n    <appender name="file" class="ch.qos.logback.core.FileAppender">\n        \x3c!--\u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e--\x3e\n        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">\n            <pattern>${pattern}</pattern>\n        </encoder>\n        \x3c!--\u65e5\u5fd7\u8f93\u51fa\u8def\u5f84--\x3e\n        <file>${log_dir}/logback.log</file>\n    </appender>\n    \x3c!-- \u751f\u6210html\u683c\u5f0fappender\u5bf9\u8c61 --\x3e\n    <appender name="htmlFile" class="ch.qos.logback.core.FileAppender">\n        \x3c!--\u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e--\x3e\n        <encoder class="ch.qos.logback.core.encoder.LayoutWrappingEncoder">\n            <layout class="ch.qos.logback.classic.html.HTMLLayout">\n                <pattern>%level%d{yyyy-MM-dd HH:mm:ss}%c%M%L%thread%m</pattern>\n            </layout>\n        </encoder>\n        \x3c!--\u65e5\u5fd7\u8f93\u51fa\u8def\u5f84--\x3e\n        <file>${log_dir}/logback.html</file>\n    </appender>\n    \x3c!--RootLogger\u5bf9\u8c61--\x3e\n    <root level="all">\n        <appender-ref ref="console"/>\n        <appender-ref ref="file"/>\n        <appender-ref ref="htmlFile"/>\n    </root>\n</configuration>\n')),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"RollingFileAppender\u914d\u7f6e")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<configuration>\n    \x3c!-- \u81ea\u5b9a\u4e49\u5c5e\u6027 \u53ef\u4ee5\u901a\u8fc7${name}\u8fdb\u884c\u5f15\u7528--\x3e\n    <property name="pattern" value="[%-5level] %d{yyyy-MM-dd HH:mm:ss} %c %M\n                                    %L [%thread] %m %n"/>\n    \x3c!--\n    \u65e5\u5fd7\u8f93\u51fa\u683c\u5f0f\uff1a\n    %d{pattern}\u65e5\u671f\n    %m\u6216\u8005%msg\u4e3a\u4fe1\u606f\n    %M\u4e3amethod\n    %L\u4e3a\u884c\u53f7\n    %c\u7c7b\u7684\u5b8c\u6574\u540d\u79f0\n    %thread\u7ebf\u7a0b\u540d\u79f0\n    %n\u6362\u884c\n    %-5level\n    --\x3e\n    \x3c!-- \u65e5\u5fd7\u6587\u4ef6\u5b58\u653e\u76ee\u5f55 --\x3e\n    <property name="log_dir" value="d:/logs"></property>\n    \x3c!--\u63a7\u5236\u53f0\u8f93\u51faappender\u5bf9\u8c61--\x3e\n    <appender name="console" class="ch.qos.logback.core.ConsoleAppender">\n        \x3c!--\u8f93\u51fa\u6d41\u5bf9\u8c61 \u9ed8\u8ba4 System.out \u6539\u4e3a System.err--\x3e\n        <target>System.err</target>\n        \x3c!--\u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e--\x3e\n        <encoder\n                 class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">\n            <pattern>${pattern}</pattern>\n        </encoder>\n    </appender>\n    \x3c!-- \u65e5\u5fd7\u6587\u4ef6\u62c6\u5206\u548c\u5f52\u6863\u7684appender\u5bf9\u8c61--\x3e\n    <appender name="rollFile"\n              class="ch.qos.logback.core.rolling.RollingFileAppender">\n        \x3c!--\u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e--\x3e\n        <encoder\n                 class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">\n            <pattern>${pattern}</pattern>\n        </encoder>\n        \x3c!--\u65e5\u5fd7\u8f93\u51fa\u8def\u5f84--\x3e\n        <file>${log_dir}/roll_logback.log</file>\n        \x3c!--\u6307\u5b9a\u65e5\u5fd7\u6587\u4ef6\u62c6\u5206\u548c\u538b\u7f29\u89c4\u5219--\x3e\n        <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">\n            \x3c!--\u901a\u8fc7\u6307\u5b9a\u538b\u7f29\u6587\u4ef6\u540d\u79f0\uff0c\u6765\u786e\u5b9a\u5206\u5272\u6587\u4ef6\u65b9\u5f0f--\x3e\n            <fileNamePattern>${log_dir}/rolling.%d{yyyy-MMdd}.log%i.gz</fileNamePattern>\n            \x3c!--\u6587\u4ef6\u62c6\u5206\u5927\u5c0f--\x3e\n            <maxFileSize>1MB</maxFileSize>\n        </rollingPolicy>\n    </appender>\n    \x3c!--RootLogger\u5bf9\u8c61--\x3e\n    <root level="all">\n        <appender-ref ref="console"/>\n        <appender-ref ref="rollFile"/>\n    </root>\n</configuration>\n')),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Filter\u548c\u5f02\u6b65\u65e5\u5fd7\u914d\u7f6e")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<configuration>\n    \x3c!-- \u81ea\u5b9a\u4e49\u5c5e\u6027 \u53ef\u4ee5\u901a\u8fc7${name}\u8fdb\u884c\u5f15\u7528--\x3e\n    <property name="pattern" value="[%-5level] %d{yyyy-MM-dd HH:mm:ss} %c %M\n                                    %L [%thread] %m %n"/>\n    \x3c!--\n    \u65e5\u5fd7\u8f93\u51fa\u683c\u5f0f\uff1a\n    %d{pattern}\u65e5\u671f\n    %m\u6216\u8005%msg\u4e3a\u4fe1\u606f\n    %M\u4e3amethod\n    %L\u4e3a\u884c\u53f7\n    %c\u7c7b\u7684\u5b8c\u6574\u540d\u79f0\n    %thread\u7ebf\u7a0b\u540d\u79f0\n    %n\u6362\u884c\n    %-5level\n    --\x3e\n    \x3c!-- \u65e5\u5fd7\u6587\u4ef6\u5b58\u653e\u76ee\u5f55 --\x3e\n    <property name="log_dir" value="d:/logs/"></property>\n    \x3c!--\u63a7\u5236\u53f0\u8f93\u51faappender\u5bf9\u8c61--\x3e\n    <appender name="console" class="ch.qos.logback.core.ConsoleAppender">\n        \x3c!--\u8f93\u51fa\u6d41\u5bf9\u8c61 \u9ed8\u8ba4 System.out \u6539\u4e3a System.err--\x3e\n        <target>System.err</target>\n        \x3c!--\u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e--\x3e\n        <encoder\n                 class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">\n            <pattern>${pattern}</pattern>\n        </encoder>\n    </appender>\n    \x3c!-- \u65e5\u5fd7\u6587\u4ef6\u62c6\u5206\u548c\u5f52\u6863\u7684appender\u5bf9\u8c61--\x3e\n    <appender name="rollFile"\n              class="ch.qos.logback.core.rolling.RollingFileAppender">\n        \x3c!--\u65e5\u5fd7\u683c\u5f0f\u914d\u7f6e--\x3e\n        <encoder\n                 class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">\n            <pattern>${pattern}</pattern>\n        </encoder>\n        \x3c!--\u65e5\u5fd7\u8f93\u51fa\u8def\u5f84--\x3e\n        <file>${log_dir}roll_logback.log</file>\n        \x3c!--\u6307\u5b9a\u65e5\u5fd7\u6587\u4ef6\u62c6\u5206\u548c\u538b\u7f29\u89c4\u5219--\x3e\n        <rollingPolicy\n                       class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">\n            \x3c!--\u901a\u8fc7\u6307\u5b9a\u538b\u7f29\u6587\u4ef6\u540d\u79f0\uff0c\u6765\u786e\u5b9a\u5206\u5272\u6587\u4ef6\u65b9\u5f0f--\x3e\n            <fileNamePattern>${log_dir}rolling.%d{yyyy-MMdd}.log%i.gz</fileNamePattern>\n            \x3c!--\u6587\u4ef6\u62c6\u5206\u5927\u5c0f--\x3e\n            <maxFileSize>1MB</maxFileSize>\n        </rollingPolicy>\n        \x3c!--filter\u914d\u7f6e--\x3e\n        <filter class="ch.qos.logback.classic.filter.LevelFilter">\n            \x3c!--\u8bbe\u7f6e\u62e6\u622a\u65e5\u5fd7\u7ea7\u522b--\x3e\n            <level>error</level>\n            <onMatch>ACCEPT</onMatch>\n            <onMismatch>DENY</onMismatch>\n        </filter>\n    </appender>\n    \x3c!--\u5f02\u6b65\u65e5\u5fd7--\x3e\n    <appender name="async" class="ch.qos.logback.classic.AsyncAppender">\n        <appender-ref ref="rollFile"/>\n    </appender>\n    \x3c!--RootLogger\u5bf9\u8c61--\x3e\n    <root level="all">\n        <appender-ref ref="console"/>\n        <appender-ref ref="async"/>\n    </root>\n    \x3c!--\u81ea\u5b9a\u4e49logger additivity\u8868\u793a\u662f\u5426\u4ece rootLogger\u7ee7\u627f\u914d\u7f6e--\x3e\n    <logger name="com.ydlclass" level="debug" additivity="false">\n        <appender-ref ref="console"/>\n    </logger>\n</configuration>\n')),(0,l.kt)("h3",{id:"\u4e94logback-access\u7684\u4f7f\u7528"},"\u4e94\u3001logback-access\u7684\u4f7f\u7528"),(0,l.kt)("p",null,"\u5728server.xml\u91cc\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"<host>"),"\u6807\u7b7e\u4e0b\u52a0\u4e0a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<Valve className="org.apache.catalina.valves.AccessLogValve"  directory="logs" prefix="localhost_access_log." suffix=".txt"  pattern="common" resolveHosts="false"/>\n')),(0,l.kt)("p",null,"\u5c31\u53ef\u4ee5\u4e86\uff0c\u4e0b\u9762\u54b1\u4eec\u9010\u4e00\u5206\u6790\u5404\u4e2a\u53c2\u6570\u3002"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"className"),(0,l.kt)("th",{parentName:"tr",align:null},"\u60f3\u914d\u7f6e\u8bbf\u95ee\u65e5\u5fd7\uff1f\u8fd9\u5c31\u5fc5\u987b\u5f97\u5199\u6210\u8fd9\u6837\u3002"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"directory"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8fd9\u4e2a\u4e1c\u897f\u662f\u65e5\u5fd7\u6587\u4ef6\u653e\u7f6e\u7684\u76ee\u5f55\uff0c\u5728tomcat\u4e0b\u9762\u6709\u4e2alogs\u6587\u4ef6\u5939\uff0c\u90a3\u91cc\u9762\u662f\u4e13\u95e8\u653e\u7f6e\u65e5\u5fd7\u6587\u4ef6\u7684\uff0c\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u4fee\u6539\uff0c\u6211\u5c31\u7ed9\u6539\u6210\u4e86D:\\ ")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"prefix"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8fd9\u4e2a\u662f\u65e5\u5fd7\u6587\u4ef6\u7684\u540d\u79f0\u524d\u7f00\uff0c\u6211\u7684\u65e5\u5fd7\u540d\u79f0\u4e3alocalhost_access_log.2007-09-22.txt\uff0c\u524d\u9762\u7684\u524d\u7f00\u5c31\u662f\u8fd9\u4e2alocalhost_access_log")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"suffix"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8fd9\u5c31\u662f\u540e\u7f00\u540d\u5566\uff0c\u53ef\u4ee5\u6539\u6210\u522b\u7684")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"pattern"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8fd9\u4e2a\u662f\u6700\u4e3b\u8981\u7684\u53c2\u6570\u4e86\uff0c\u5177\u4f53\u7684\u54b1\u4eec\u4e0b\u9762\u8bb2\uff0c\u8fd9\u4e2a\u53c2\u6570\u7684\u5185\u5bb9\u6bd4\u8f83\u4e30\u5bcc\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"resolveHosts"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5982\u679c\u8fd9\u4e2a\u503c\u662ftrue\u7684\u8bdd\uff0ctomcat\u4f1a\u5c06\u8fd9\u4e2a\u670d\u52a1\u5668IP\u5730\u5740\u901a\u8fc7DNS\u8f6c\u6362\u4e3a\u4e3b\u673a\u540d\uff0c\u5982\u679c\u662ffalse\uff0c\u5c31\u76f4\u63a5\u5199\u670d\u52a1\u5668IP\u5730\u5740\u5566")))),(0,l.kt)("p",null,"To use logback-access with Tomcat, after downloading the logback distribution, place the files ",(0,l.kt)("em",{parentName:"p"},"logback-core-1.3.0-alpha10.jar")," and ",(0,l.kt)("em",{parentName:"p"},"logback-access-1.3.0-alpha10.jar")," under $TOMCAT_HOME/lib/ directory, where $TOMCAT_HOME is the folder where you have installed Tomcat."),(0,l.kt)("p",null,"logback-access\u6a21\u5757\u4e0eServlet\u5bb9\u5668\uff08\u5982Tomcat\u548cJetty\uff09\u96c6\u6210\uff0c\u4ee5\u63d0\u4f9bHTTP\u8bbf\u95ee\u65e5\u5fd7\u529f\u80fd\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f \u7528logback-access\u6a21\u5757\u6765\u66ff\u6362tomcat\u7684\u8bbf\u95ee\u65e5\u5fd7\u3002"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5c06logback-access.jar\u4e0elogback-core.jar\u590d\u5236\u5230$TOMCAT_HOME/lib/\u76ee\u5f55\u4e0b"),(0,l.kt)("li",{parentName:"ol"},"\u4fee\u6539$TOMCAT_HOME/conf/server.xml\u4e2d\u7684Host\u5143\u7d20\u4e2d\u6dfb\u52a0\uff1a")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'<Valve className="ch.qos.logback.access.tomcat.LogbackValve"/>\n')),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"logback\u9ed8\u8ba4\u4f1a\u5728$TOMCAT_HOME/conf\u4e0b\u67e5\u627e\u6587\u4ef6 logback-access.xml")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<configuration>\n    \x3c!-- always a good activate OnConsoleStatusListener --\x3e\n    <statusListener\n                    class="ch.qos.logback.core.status.OnConsoleStatusListener"/>\n    <property name="LOG_DIR" value="${catalina.base}/logs"/>\n    <appender name="FILE"\n              class="ch.qos.logback.core.rolling.RollingFileAppender">\n        <file>${LOG_DIR}/access.log</file>\n        <rollingPolicy\n                       class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">\n            <fileNamePattern>access.%d{yyyy-MM-dd}.log.zip</fileNamePattern>\n        </rollingPolicy>\n        <encoder>\n            \x3c!-- \u8bbf\u95ee\u65e5\u5fd7\u7684\u683c\u5f0f --\x3e\n            <pattern>combined</pattern>\n        </encoder>\n    </appender>\n    <appender-ref ref="FILE"/>\n</configuration>\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'%h %l %u %user %date "%r" %s %b\n')),(0,l.kt)("p",null,"\u5b98\u65b9\u914d\u7f6e\uff1a ",(0,l.kt)("a",{parentName:"p",href:"https://logback.qos.ch/access.html#configuration"},"https://logback.qos.ch/access.html#configurationopen in new window")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211026105800183-ab8ebe30.png",alt:"image-20211026105800183"}),"image-20211026105800183"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211026105525146-c644841e.png",alt:"image-20211026105525146"}),"image-20211026105525146"),(0,l.kt)("h2",{id:"\u7b2c\u516d\u7ae0-log4j2\u7684\u4f7f\u7528"},"\u7b2c\u516d\u7ae0 log4j2\u7684\u4f7f\u7528"),(0,l.kt)("p",null,"Apache Log4j2\u662f\u5bf9Log4j\u7684\u5347\u7ea7\u7248\uff0c\u53c2\u8003\u4e86logback\u7684\u4e00\u4e9b\u4f18\u79c0\u7684\u8bbe\u8ba1\uff0c\u5e76\u4e14\u4fee\u590d\u4e86\u4e00\u4e9b\u95ee\u9898\uff0c\u56e0\u6b64\u5e26\u6765\u4e86\u4e00\u4e9b\u91cd\u5927\u7684\u63d0\u5347\uff0c\u4e3b\u8981\u6709\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5f02\u5e38\u5904\u7406\uff0c\u5728logback\u4e2d\uff0cAppender\u4e2d\u7684\u5f02\u5e38\u4e0d\u4f1a\u88ab\u5e94\u7528\u611f\u77e5\u5230\uff0c\u4f46\u662f\u5728log4j2\u4e2d\uff0c\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5f02\u5e38\u5904\u7406\u673a\u5236\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u6027\u80fd\u63d0\u5347\uff0c log4j2\u76f8\u8f83\u4e8elog4j \u548clogback\u90fd\u5177\u6709\u5f88\u660e\u663e\u7684\u6027\u80fd\u63d0\u5347\uff0c\u540e\u9762\u4f1a\u6709\u5b98\u65b9\u6d4b\u8bd5\u7684\u6570\u636e\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u81ea\u52a8\u91cd\u8f7d\u914d\u7f6e\uff0c\u53c2\u8003\u4e86logback\u7684\u8bbe\u8ba1\uff0c\u5f53\u7136\u4f1a\u63d0\u4f9b\u81ea\u52a8\u5237\u65b0\u53c2\u6570\u914d\u7f6e\uff0c\u6700\u5b9e\u7528\u7684\u5c31\u662f\u6211\u4eec\u5728\u751f\u4ea7 \u4e0a\u53ef\u4ee5\u52a8\u6001\u7684\u4fee\u6539\u65e5\u5fd7\u7684\u7ea7\u522b\u800c\u4e0d\u9700\u8981\u91cd\u542f\u5e94\u7528\u3002")),(0,l.kt)("p",null,"\u5b98\u7f51\uff1a ",(0,l.kt)("a",{parentName:"p",href:"https://logging.apache.org/log4j/2.x/"},"https://logging.apache.org/log4j/2.x/open in new window")),(0,l.kt)("h3",{id:"\u4e00log4j2\u5165\u95e8"},"\u4e00\u3001Log4j2\u5165\u95e8"),(0,l.kt)("p",null," \u76ee\u524d\u5df2\u7ecf\u6709\u4e09\u4e2a\u95e8\u9762\u4e86\uff0c\u5176\u5b9e\u4e0d\u7ba1\u662f\u54ea\u91cc\u90fd\u662f\u6c5f\u6e56\uff0c\u90fd\u60f3\u5199\u4e00\u4e2a\u95e8\u9762\uff0c\u4e00\u7edf\u6c5f\u6e56\uff0c\u6240\u4ee5log42\u51fa\u4e86\u63d0\u4f9b\u65e5\u5fd7\u5b9e\u73b0\u4ee5\u5916\uff0c\u4e5f\u62e5\u6709\u4e00\u5957\u81ea\u5df1\u7684\u72ec\u7acb\u7684\u95e8\u9762\u3002"),(0,l.kt)("p",null," \u76ee\u524d\u5e02\u9762\u4e0a\u6700\u4e3b\u6d41\u7684\u65e5\u5fd7\u95e8\u9762\u5c31\u662fSLF4J\uff0c\u867d\u7136Log4j2\u4e5f\u662f\u65e5\u5fd7\u95e8\u9762\uff0c\u56e0\u4e3a\u5b83\u7684\u65e5\u5fd7\u5b9e\u73b0\u529f\u80fd\u975e\u5e38\u5f3a\u5927\uff0c\u6027\u80fd\u4f18\u8d8a\u3002\u6240\u4ee5\u5927\u5bb6\u4e00\u822c\u8fd8\u662f\u5c06Log4j2\u770b\u4f5c\u662f\u65e5\u5fd7\u7684\u5b9e\u73b0\uff0cSlf4j + Log4j2\u5e94\u8be5\u662f\u672a\u6765\u7684\u5927\u52bf\u6240\u8d8b\u3002"),(0,l.kt)("h4",{id:"1\u4f7f\u7528log4j-api\u505a\u95e8\u9762"},"1\u3001\u4f7f\u7528log4j-api\u505a\u95e8\u9762"),(0,l.kt)("p",null,"\uff081\uff09\u6dfb\u52a0\u4f9d\u8d56"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!-- Log4j2 \u95e8\u9762API--\x3e\n<dependency>\n    <groupId>org.apache.logging.log4j</groupId>\n    <artifactId>log4j-api</artifactId>\n    <version>2.14.1</version>\n</dependency>\n\x3c!-- Log4j2 \u65e5\u5fd7\u5b9e\u73b0 --\x3e\n<dependency>\n    <groupId>org.apache.logging.log4j</groupId>\n    <artifactId>log4j-core</artifactId>\n    <version>2.14.1</version>\n</dependency>\n")),(0,l.kt)("p",null,"\uff082\uff09JAVA\u4ee3\u7801"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public class TestLog4j2 {\n\n    private static final Logger LOGGER = LogManager.getLogger(TestLog4j2.class);\n\n    @Test\n    public void testLog(){\n        LOGGER.fatal("fatal");\n        LOGGER.error("error");\n        LOGGER.warn("warn");\n        LOGGER.info("info");\n        LOGGER.debug("debug");\n        LOGGER.trace("trace");\n    }\n\n}\n')),(0,l.kt)("p",null,"\u7ed3\u679c\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211025151930142-628fd044.png",alt:"image-20211025151930142"}),"image-20211025151930142"),(0,l.kt)("h4",{id:"2\u4f7f\u7528slf4j\u505a\u95e8\u9762"},"2\u3001\u4f7f\u7528slf4j\u505a\u95e8\u9762"),(0,l.kt)("p",null,"\u4f7f\u7528slf4j\u4f5c\u4e3a\u65e5\u5fd7\u7684\u95e8\u9762\uff0c\u4f7f\u7528log4j2\u4f5c\u4e3a\u65e5\u5fd7\u7684\u5b9e\u73b0\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!-- Log4j2 \u95e8\u9762API--\x3e\n<dependency>\n    <groupId>org.apache.logging.log4j</groupId>\n    <artifactId>log4j-api</artifactId>\n    <version>2.14.1</version>\n</dependency>\n\x3c!-- Log4j2 \u65e5\u5fd7\u5b9e\u73b0 --\x3e\n<dependency>\n    <groupId>org.apache.logging.log4j</groupId>\n    <artifactId>log4j-core</artifactId>\n    <version>2.14.1</version>\n</dependency>\n\x3c!--\u4f7f\u7528slf4j\u4f5c\u4e3a\u65e5\u5fd7\u7684\u95e8\u9762,\u4f7f\u7528log4j2\u6765\u8bb0\u5f55\u65e5\u5fd7 --\x3e\n<dependency>\n    <groupId>org.slf4j</groupId>\n    <artifactId>slf4j-api</artifactId>\n    <version>1.7.30</version>\n</dependency>\n\x3c!--\u4e3aslf4j\u7ed1\u5b9a\u65e5\u5fd7\u5b9e\u73b0 log4j2\u7684\u9002\u914d\u5668 --\x3e\n<dependency>\n    <groupId>org.apache.logging.log4j</groupId>\n    <artifactId>log4j-slf4j-impl</artifactId>\n    <version>2.12.1</version>\n</dependency>\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'private static final org.slf4j.Logger LOG = LoggerFactory.getLogger(TestLog4j2.class);\n\n@Test\npublic void testSlf4j(){\n    LOG.error("error");\n    LOG.warn("warn");\n    LOG.debug("debug");\n    LOG.info("info");\n    LOG.trace("trace");\n}\n')),(0,l.kt)("p",null,"\u7ed3\u679c\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211025152411946-d567ba08.png",alt:"image-20211025152411946"}),"image-20211025152411946"),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u5230log4j2\u7684\u9ed8\u8ba4\u65e5\u5fd7\u7ea7\u522b\u597d\u50cf\u662ferror\u3002"),(0,l.kt)("h3",{id:"\u4e8clog4j2\u914d\u7f6e"},"\u4e8c\u3001Log4j2\u914d\u7f6e"),(0,l.kt)("h4",{id:"1\u9ed8\u8ba4\u914d\u7f6e"},"1\u3001\u9ed8\u8ba4\u914d\u7f6e\uff1a"),(0,l.kt)("p",null,"DefaultConfiguration\u7c7b\u4e2d\u63d0\u4f9b\u7684\u9ed8\u8ba4\u914d\u7f6e\u5c06\u8bbe\u7f6e\uff0c"),(0,l.kt)("p",null,"\u901a\u8fc7debug\u53ef\u4ee5\u5728LoggerContext\u7c7b\u4e2d\u53d1\u73b0"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"private volatile Configuration configuration = new DefaultConfiguration();\n")),(0,l.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\u9ed8\u8ba4\u7684root\u65e5\u5fd7\u7684layout"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211025170516097-5ab25742.png",alt:"image-20211025170516097"}),"image-20211025170516097"),(0,l.kt)("p",null,"\u6211\u4eec\u4e5f\u80fd\u770b\u5230\u4ed6\u7684\u65e5\u5fd7\u7ea7\u522b\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211025170538643-e0e00836.png",alt:"image-20211025170538643"}),"image-20211025170538643"),(0,l.kt)("p",null,"\u6211\u4eec\u80fd\u4ece\u9ed8\u8ba4\u914d\u7f6e\u7c7b\u4e2d\u770b\u5230\u4e00\u4e9b\u9ed8\u8ba4\u7684\u914d\u7f6e\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'protected void setToDefault() {\n    // LOG4J2-1176 facilitate memory leak investigation\n    setName(DefaultConfiguration.DEFAULT_NAME + "@" + Integer.toHexString(hashCode()));\n    final Layout<? extends Serializable> layout = PatternLayout.newBuilder()\n        .withPattern(DefaultConfiguration.DEFAULT_PATTERN)\n        .withConfiguration(this)\n        .build();\n    final Appender appender = ConsoleAppender.createDefaultAppenderForLayout(layout);\n    appender.start();\n    addAppender(appender);\n    final LoggerConfig rootLoggerConfig = getRootLogger();\n    rootLoggerConfig.addAppender(appender, null, null);\n\n    final Level defaultLevel = Level.ERROR;\n    final String levelName = PropertiesUtil.getProperties().getStringProperty(DefaultConfiguration.DEFAULT_LEVEL,\n                                                                              defaultLevel.name());\n    final Level level = Level.valueOf(levelName);\n    rootLoggerConfig.setLevel(level != null ? level : defaultLevel);\n}\n')),(0,l.kt)("p",null,"5 \u81ea\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e"),(0,l.kt)("p",null,"log4j2\u9ed8\u8ba4\u5728classpath\u4e0b\u67e5\u627e\u914d\u7f6e\u6587\u4ef6\uff0c\u53ef\u4ee5\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002\u5728\u975eweb\u9879\u76ee\u4e2d\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public static void main(String[] args) throws IOException {\n    File file = new File("D:/log4j2.xml");\n    BufferedInputStream in = new BufferedInputStream(new FileInputStream(file));\n    final ConfigurationSource source = new ConfigurationSource(in);\n    Configurator.initialize(null, source);\n    \n    Logger logger = LogManager.getLogger("mylog");\n}\n')),(0,l.kt)("p",null,"\u5982\u679c\u662fweb\u9879\u76ee\uff0c\u5728web.xml\u4e2d\u6dfb\u52a0"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<context-param>\n    <param-name>log4jConfiguration</param-name>\n    <param-value>/WEB-INF/conf/log4j2.xml</param-value>\n</context-param>\n<listener>\n    <listener-class>org.apache.logging.log4j.web.Log4jServletContextListener</listener-class>\n</listener>\n")),(0,l.kt)("p",null,"log4j2\u9ed8\u8ba4\u52a0\u8f7dclasspath\u4e0b\u7684 log4j2.xml \u6587\u4ef6\u4e2d\u7684\u914d\u7f6e\u3002\u4e8b\u5b9e\u4e0alog4j2\u53ef\u4ee5\u901a\u8fc7 XML\u3001JSON\u3001YAML \u6216properties\u683c\u5f0f\u8fdb\u884c\u914d\u7f6e\uff1a"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://logging.apache.org/log4j/2.x/manual/configuration.html"},"https://logging.apache.org/log4j/2.x/manual/configuration.htmlopen in new window")),(0,l.kt)("p",null,"\u5982\u679c\u627e\u4e0d\u5230\u914d\u7f6e\u6587\u4ef6\uff0cLog4j \u5c06\u63d0\u4f9b\u9ed8\u8ba4\u914d\u7f6e\u3002DefaultConfiguration \u7c7b\u4e2d\u63d0\u4f9b\u7684\u9ed8\u8ba4\u914d\u7f6e\u5c06\u8bbe\u7f6e\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"%d{HH:mm:ss.SSS} \uff0c\u8868\u793a\u8f93\u51fa\u5230\u6beb\u79d2\u7684\u65f6\u95f4"),(0,l.kt)("li",{parentName:"ul"},"%t\uff0c\u8f93\u51fa\u5f53\u524d\u7ebf\u7a0b\u540d\u79f0"),(0,l.kt)("li",{parentName:"ul"},"%-5level\uff0c\u8f93\u51fa\u65e5\u5fd7\u7ea7\u522b\uff0c-5\u8868\u793a\u5de6\u5bf9\u9f50\u5e76\u4e14\u56fa\u5b9a\u8f93\u51fa5\u4e2a\u5b57\u7b26\uff0c\u5982\u679c\u4e0d\u8db3\u5728\u53f3\u8fb9\u88650"),(0,l.kt)("li",{parentName:"ul"},"%logger\uff0c\u8f93\u51falogger\u540d\u79f0\uff0c\u56e0\u4e3aRoot Logger\u6ca1\u6709\u540d\u79f0\uff0c\u6240\u4ee5\u6ca1\u6709\u8f93\u51fa"),(0,l.kt)("li",{parentName:"ul"},"%msg\uff0c\u65e5\u5fd7\u6587\u672c"),(0,l.kt)("li",{parentName:"ul"},"%n\uff0c\u6362\u884c")),(0,l.kt)("p",null,"\u5176\u4ed6\u5e38\u7528\u7684\u5360\u4f4d\u7b26\u6709\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"%F\uff0c\u8f93\u51fa\u6240\u5728\u7684\u7c7b\u6587\u4ef6\u540d\uff0c\u5982Client.java"),(0,l.kt)("li",{parentName:"ul"},"%L\uff0c\u8f93\u51fa\u884c\u53f7"),(0,l.kt)("li",{parentName:"ul"},"%M\uff0c\u8f93\u51fa\u6240\u5728\u65b9\u6cd5\u540d"),(0,l.kt)("li",{parentName:"ul"},"%l\uff0c\u8f93\u51fa\u8bed\u53e5\u6240\u5728\u7684\u884c\u6570, \u5305\u62ec\u7c7b\u540d\u3001\u65b9\u6cd5\u540d\u3001\u6587\u4ef6\u540d\u3001\u884c\u6570")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'private void reconfigure(final URI configURI) {\n    Object externalContext = externalMap.get(EXTERNAL_CONTEXT_KEY);\n    final ClassLoader cl = ClassLoader.class.isInstance(externalContext) ? (ClassLoader) externalContext : null;\n    LOGGER.debug("Reconfiguration started for context[name={}] at URI {} ({}) with optional ClassLoader: {}",\n                 contextName, configURI, this, cl);\n    final Configuration instance = ConfigurationFactory.getInstance().getConfiguration(this, contextName, configURI, cl);\n    if (instance == null) {\n        LOGGER.error("Reconfiguration failed: No configuration found for \'{}\' at \'{}\' in \'{}\'", contextName, configURI, cl);\n    } else {\n        setConfiguration(instance);\n        /*\n             * instance.start(); Configuration old = setConfiguration(instance); updateLoggers(); if (old != null) {\n             * old.stop(); }\n             */\n        final String location = configuration == null ? "?" : String.valueOf(configuration.getConfigurationSource());\n        LOGGER.debug("Reconfiguration complete for context[name={}] at URI {} ({}) with optional ClassLoader: {}",\n                     contextName, location, this, cl);\n    }\n}\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"ConfigurationFactory\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"for (final ConfigurationFactory factory : getFactories()) {\n    final String[] types = factory.getSupportedTypes();\n    if (types != null) {\n        for (final String type : types) {\n            if (type.equals(ALL_TYPES)) {\n                final Configuration config = factory.getConfiguration(loggerContext, name, configLocation);\n                if (config != null) {\n                    return config;\n                }\n            }\n        }\n    }\n}\n")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211025180117043-7c5baa95.png",alt:"image-20211025180117043"}),"image-20211025180117043"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<Configuration status="warn" monitorInterval="5">\n    <properties>\n        <property name="LOG_HOME">D:/logs</property>\n    </properties>\n    <Appenders>\n        <Console name="Console" target="SYSTEM_OUT">\n            <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] [%-5level] %c{36}:%L -\n                                    -- %m%n" />\n        </Console>\n        <File name="file" fileName="${LOG_HOME}/myfile.log">\n            <PatternLayout pattern="[%d{yyyy-MM-dd HH:mm:ss.SSS}] [%-5level] %l\n                                    %c{36} - %m%n" />\n        </File>\n        <RandomAccessFile name="accessFile" fileName="${LOG_HOME}/myAcclog.log">\n            <PatternLayout pattern="[%d{yyyy-MM-dd HH:mm:ss.SSS}] [%-5level] %l\n                                    %c{36} - %m%n" />\n        </RandomAccessFile>\n        <RollingFile name="rollingFile" fileName="${LOG_HOME}/myrollog.log"\n                     filePattern="D:/logs/$${date:yyyy-MM-dd}/myrollog-%d{yyyyMM-dd-HH-mm}-%i.log">\n            <ThresholdFilter level="debug" onMatch="ACCEPT" onMismatch="DENY" />\n            <PatternLayout pattern="[%d{yyyy-MM-dd HH:mm:ss.SSS}] [%-5level] %l\n                                    %c{36} - %msg%n" />\n            <Policies>\n                <OnStartupTriggeringPolicy />\n                <SizeBasedTriggeringPolicy size="10 MB" />\n                <TimeBasedTriggeringPolicy />\n            </Policies>\n            <DefaultRolloverStrategy max="30" />\n        </RollingFile>\n        <RollingRandomAccessFile name="MyFile"\n            fileName="${LOG_HOME}/${FILE_NAME}.log"\n            filePattern="${LOG_HOME}/$${date:yyyy-MM}/${FILE_NAME}-%d{yyyy-MM-dd HH-mm}-%i.log">\n            <PatternLayout\n                pattern="%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n" />\n            <Policies>\n                <TimeBasedTriggeringPolicy interval="1" />\n                <SizeBasedTriggeringPolicy size="10 MB" />\n            </Policies>\n            <DefaultRolloverStrategy max="20" />\n        </RollingRandomAccessFile>\n    </Appenders>\n    <Loggers>\n        <Logger name="mylog" level="trace" additivity="false">\n            <AppenderRef ref="MyFile" />\n        </Logger>\n        <Root level="error">\n            <AppenderRef ref="Console" />\n        </Root>\n    </Loggers>\n</Configuration>\n')),(0,l.kt)("p",null,"\u6ce8\u610f\u6839\u8282\u70b9\u589e\u52a0\u4e86\u4e00\u4e2amonitorInterval\u5c5e\u6027\uff0c\u542b\u4e49\u662f\u6bcf\u9694300\u79d2\u91cd\u65b0\u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6\uff0c\u53ef\u4ee5\u4e0d\u91cd\u542f\u5e94\u7528\u7684\u60c5\u51b5\u4e0b\u4fee\u6539\u914d\u7f6e\uff0c\u8fd8\u662f\u5f88\u597d\u7528\u7684\u529f\u80fd\u3002"),(0,l.kt)("p",null,"RollingRandomAccessFile\u7684\u5c5e\u6027\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"fileName \u6307\u5b9a\u5f53\u524d\u65e5\u5fd7\u6587\u4ef6\u7684\u4f4d\u7f6e\u548c\u6587\u4ef6\u540d\u79f0"),(0,l.kt)("li",{parentName:"ul"},"filePattern \u6307\u5b9a\u5f53\u53d1\u751fRolling\u65f6\uff0c\u6587\u4ef6\u7684\u8f6c\u79fb\u548c\u91cd\u547d\u540d\u89c4\u5219"),(0,l.kt)("li",{parentName:"ul"},"SizeBasedTriggeringPolicy \u6307\u5b9a\u5f53\u6587\u4ef6\u4f53\u79ef\u5927\u4e8esize\u6307\u5b9a\u7684\u503c\u65f6\uff0c\u89e6\u53d1Rolling"),(0,l.kt)("li",{parentName:"ul"},"DefaultRolloverStrategy \u6307\u5b9a\u6700\u591a\u4fdd\u5b58\u7684\u6587\u4ef6\u4e2a\u6570"),(0,l.kt)("li",{parentName:"ul"},"TimeBasedTriggeringPolicy \u8fd9\u4e2a\u914d\u7f6e\u9700\u8981\u548cfilePattern\u7ed3\u5408\u4f7f\u7528\uff0c"),(0,l.kt)("li",{parentName:"ul"},"\u6ce8\u610ffilePattern\u4e2d\u914d\u7f6e\u7684\u6587\u4ef6\u91cd\u547d\u540d\u89c4\u5219\u662f${FILE_NAME}-%d{yyyy-MM-dd HH-mm}-%i\uff0c\u6700\u5c0f\u7684\u65f6\u95f4\u7c92\u5ea6\u662fmm\uff0c\u5373\u5206\u949f\u3002"),(0,l.kt)("li",{parentName:"ul"},"TimeBasedTriggeringPolicy\u6307\u5b9a\u7684size\u662f1\uff0c\u7ed3\u5408\u8d77\u6765\u5c31\u662f\u6bcf1\u5206\u949f\u751f\u6210\u4e00\u4e2a\u65b0\u6587\u4ef6\u3002\u5982\u679c\u6539\u6210%d{yyyy-MM-dd HH}\uff0c\u6700\u5c0f\u7c92\u5ea6\u4e3a\u5c0f\u65f6\uff0c\u5219\u6bcf\u4e00\u4e2a\u5c0f\u65f6\u751f\u6210\u4e00\u4e2a\u6587\u4ef6\u3002")),(0,l.kt)("h3",{id:"\u4e09log4j2\u5f02\u6b65\u65e5\u5fd7"},"\u4e09\u3001Log4j2\u5f02\u6b65\u65e5\u5fd7"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u5f02\u6b65\u65e5\u5fd7")),(0,l.kt)("p",null,"log4j2\u6700\u5927\u7684\u7279\u70b9\u5c31\u662f\u5f02\u6b65\u65e5\u5fd7\uff0c\u5176\u6027\u80fd\u7684\u63d0\u5347\u4e3b\u8981\u4e5f\u662f\u4ece\u5f02\u6b65\u65e5\u5fd7\u4e2d\u53d7\u76ca\uff0c\u6211\u4eec\u6765\u770b\u770b\u5982\u4f55\u4f7f\u7528 log4j2\u7684\u5f02\u6b65\u65e5\u5fd7\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"\u540c\u6b65\u65e5\u5fd7"))),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211026112840360-88b0fa4c.png",alt:"image-20211026112840360"}),"image-20211026112840360"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"\u5f02\u6b65\u65e5\u5fd7"))),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211026114244785-b53e7ae9.png",alt:"image-20211026114244785"}),"image-20211026114244785"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211026113622616-f880b79c.png",alt:"image-20211026113622616"}),"image-20211026113622616"),(0,l.kt)("p",null,"Log4j2\u63d0\u4f9b\u4e86\u4e24\u79cd\u5b9e\u73b0\u65e5\u5fd7\u7684\u65b9\u5f0f\uff0c\u4e00\u4e2a\u662f\u901a\u8fc7AsyncAppender\uff0c\u4e00\u4e2a\u662f\u901a\u8fc7AsyncLogger\uff0c\u5206\u522b\u5bf9\u5e94 \u524d\u9762\u6211\u4eec\u8bf4\u7684Appender\u7ec4\u4ef6\u548cLogger\u7ec4\u4ef6\u3002"),(0,l.kt)("p",null,"\u6ce8\u610f\uff1a\u914d\u7f6e\u5f02\u6b65\u65e5\u5fd7\u9700\u8981\u6dfb\u52a0\u4f9d\u8d56"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!--\u5f02\u6b65\u65e5\u5fd7\u4f9d\u8d56--\x3e\n<dependency>\n    <groupId>com.lmax</groupId>\n    <artifactId>disruptor</artifactId>\n    <version>3.3.4</version>\n</dependency>\n")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"AsyncAppender\u65b9\u5f0f")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<Configuration status="warn">\n    <properties>\n        <property name="LOG_HOME">D:/logs</property>\n    </properties>\n    <Appenders>\n        <File name="file" fileName="${LOG_HOME}/myfile.log">\n            <PatternLayout>\n                <Pattern>%d %p %c{1.} [%t] %m%n</Pattern>\n            </PatternLayout>\n        </File>\n        <Async name="Async">\n            <AppenderRef ref="file"/>\n        </Async>\n    </Appenders>\n    <Loggers>\n        <Root level="error">\n            <AppenderRef ref="Async"/>\n        </Root>\n    </Loggers>\n</Configuration>\n')),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"AsyncLogger\u65b9\u5f0f")),(0,l.kt)("p",null,"AsyncLogger\u624d\u662flog4j2 \u7684\u91cd\u5934\u620f\uff0c\u4e5f\u662f\u5b98\u65b9\u63a8\u8350\u7684\u5f02\u6b65\u65b9\u5f0f\u3002\u5b83\u53ef\u4ee5\u4f7f\u5f97\u8c03\u7528Logger.log\u8fd4\u56de\u7684 \u66f4\u5feb\u3002\u4f60\u53ef\u4ee5\u6709\u4e24\u79cd\u9009\u62e9\uff1a\u5168\u5c40\u5f02\u6b65\u548c\u6df7\u5408\u5f02\u6b65\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"\u5168\u5c40\u5f02\u6b65"),"\u5c31\u662f\uff0c\u6240\u6709\u7684\u65e5\u5fd7\u90fd\u5f02\u6b65\u7684\u8bb0\u5f55\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u4e0a\u4e0d\u7528\u505a\u4efb\u4f55\u6539\u52a8\uff0c\u53ea\u9700\u8981\u6dfb\u52a0\u4e00\u4e2a log4j2.component.properties \u914d\u7f6e\uff1b")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-properties"},"Log4jContextSelector=org.apache.logging.log4j.core.async.AsyncLoggerContextSelector\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"\u6df7\u5408\u5f02\u6b65"),"\u5c31\u662f\uff0c\u4f60\u53ef\u4ee5\u5728\u5e94\u7528\u4e2d\u540c\u65f6\u4f7f\u7528\u540c\u6b65\u65e5\u5fd7\u548c\u5f02\u6b65\u65e5\u5fd7\uff0c\u8fd9\u4f7f\u5f97\u65e5\u5fd7\u7684\u914d\u7f6e\u65b9\u5f0f\u66f4\u52a0\u7075\u6d3b\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<Configuration status="WARN">\n    <properties>\n        <property name="LOG_HOME">D:/logs</property>\n    </properties>\n    <Appenders>\n        <File name="file" fileName="${LOG_HOME}/myfile.log">\n            <PatternLayout>\n                <Pattern>%d %p %c{1.} [%t] %m%n</Pattern>\n            </PatternLayout>\n        </File>\n        <Async name="Async">\n            <AppenderRef ref="file"/>\n        </Async>\n    </Appenders>\n    <Loggers>\n        <AsyncLogger name="com.ydlclass" level="trace"\n                     includeLocation="false" additivity="false">\n            <AppenderRef ref="file"/>\n        </AsyncLogger>\n        <Root level="info" includeLocation="true">\n            <AppenderRef ref="file"/>\n        </Root>\n    </Loggers>\n</Configuration>\n')),(0,l.kt)("p",null,"\u5982\u4e0a\u914d\u7f6e\uff1a com.ydlclass \u65e5\u5fd7\u662f\u5f02\u6b65\u7684\uff0croot\u65e5\u5fd7\u662f\u540c\u6b65\u7684\u3002"),(0,l.kt)("p",null,"\u4f7f\u7528\u5f02\u6b65\u65e5\u5fd7\u9700\u8981\u6ce8\u610f\u7684\u95ee\u9898\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5982\u679c\u4f7f\u7528\u5f02\u6b65\u65e5\u5fd7\uff0cAsyncAppender\u3001AsyncLogger\u548c\u5168\u5c40\u65e5\u5fd7\uff0c\u4e0d\u8981\u540c\u65f6\u51fa\u73b0\u3002\u6027\u80fd\u4f1a\u548c AsyncAppender\u4e00\u81f4\uff0c\u964d\u81f3\u6700\u4f4e\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u8bbe\u7f6eincludeLocation=false \uff0c\u6253\u5370\u4f4d\u7f6e\u4fe1\u606f\u4f1a\u6025\u5267\u964d\u4f4e\u5f02\u6b65\u65e5\u5fd7\u7684\u6027\u80fd\uff0c\u6bd4\u540c\u6b65\u65e5\u5fd7\u8fd8\u8981\u6162\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'for (int i = 0; i < 1000000; i++) {\n    LOGGER.fatal("fatal");\n\n}\nlong end = System.currentTimeMillis();\nSystem.out.println(end - start);\n\n\n2970\n')),(0,l.kt)("p",null,"Log4j2\u7684\u6027\u80fd"),(0,l.kt)("p",null,"log4j\u5b98\u7f51\u5bf9\u5176\u6027\u80fd\u8fdb\u884c\u5927\u8086\u5ba3\u626c\uff0c\u4f46\u662f\u7f51\u4e0a\u4e5f\u6709\u4e13\u4e1a\u8ba4\u8bc6\u8fdb\u884c\u6d4b\u8bd5\uff0clog4j\u5728\u5927\u91cf\u65e5\u5fd7\u7684\u60c5\u51b5\u4e0b\u6709\u4e00\u5b9a\u7684\u4f18\u52bf\uff0c\u4ed6\u786e\u5b9e\u662f\u65e5\u540e\u7684\u9009\u62e9\u3002\u4f46\u662f\u4e5f\u4e0d\u5fc5\u7ea0\u7ed3\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211021234601896-e6e4f2f3.png",alt:"image-20211021234601896"}),"image-20211021234601896"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"http://logging.apache.org/log4j/2.x/performance.html#asyncLogging"},"Log4j \u2013 Performance (apache.org)open in new window")),(0,l.kt)("h2",{id:"\u7b2c\u4e03\u7ae0\u600e\u4e48\u6253\u65e5\u5fd7"},"\u7b2c\u4e03\u7ae0\uff1a\u600e\u4e48\u6253\u65e5\u5fd7"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u57fa\u672c\u683c\u5f0f")),(0,l.kt)("p",null,"\u5fc5\u987b\u4f7f\u7528\u53c2\u6570\u5316\u4fe1\u606f\u7684\u65b9\u5f0f:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'logger.debug("Processing trade with id:[{}] and symbol : [{}] ", id, symbol);\n')),(0,l.kt)("p",null,"\u4e0d\u8981\u8fdb\u884c\u5b57\u7b26\u4e32\u62fc\u63a5,\u90a3\u6837\u4f1a\u4ea7\u751f\u5f88\u591aString\u5bf9\u8c61\uff0c\u5360\u7528\u7a7a\u95f4\uff0c\u5f71\u54cd\u6027\u80fd\u3002\u53cd\u4f8b(\u4e0d\u8981\u8fd9\u4e48\u505a):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'logger.debug("Processing trade with id: " + id + " symbol: " + symbol);\n')),(0,l.kt)("p",null,"\u4f7f\u7528[]\u8fdb\u884c\u53c2\u6570\u53d8\u91cf\u9694\u79bb\uff0c\u5982\u6709\u53c2\u6570\u53d8\u91cf\uff0c\u5e94\u8be5\u5199\u6210\u5982\u4e0b\u5199\u6cd5:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'logger.debug("Processing trade with id:[{}] and symbol : [{}] ", id, symbol);\n')),(0,l.kt)("p",null,"\u8fd9\u6837\u7684\u683c\u5f0f\u5199\u6cd5\uff0c\u53ef\u8bfb\u6027\u66f4\u597d\uff0c\u5bf9\u4e8e\u6392\u67e5\u95ee\u9898\u66f4\u6709\u5e2e\u52a9\u3002\u4e0d\u540c\u7ea7\u522b\u7684\u4f7f\u7528"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"ERROR\uff0c\u5f71\u54cd\u5230\u7a0b\u5e8f\u6b63\u5e38\u8fd0\u884c\u3001\u5f53\u524d\u8bf7\u6c42\u6b63\u5e38\u8fd0\u884c\u7684\u5f02\u5e38\u60c5\u51b5:")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6253\u5f00\u914d\u7f6e\u6587\u4ef6\u5931\u8d25"),(0,l.kt)("li",{parentName:"ul"},"\u6240\u6709\u7b2c\u4e09\u65b9\u5bf9\u63a5\u7684\u5f02\u5e38(\u5305\u62ec\u7b2c\u4e09\u65b9\u8fd4\u56de\u9519\u8bef\u7801)"),(0,l.kt)("li",{parentName:"ul"},"\u6240\u6709\u5f71\u54cd\u529f\u80fd\u4f7f\u7528\u7684\u5f02\u5e38\uff0c\u5305\u62ec:SQLException\u548c\u9664\u4e86\u4e1a\u52a1\u5f02\u5e38\u4e4b\u5916\u7684\u6240\u6709\u5f02\u5e38(RuntimeException\u548cException)"),(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u5e94\u8be5\u51fa\u73b0\u7684\u60c5\u51b5\uff0c\u6bd4\u5982\u8981\u4f7f\u7528\u963f\u91cc\u4e91\u4f20\u56fe\u7247\uff0c\u4f46\u662f\u672a\u54cd\u5e94"),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u6709Throwable\u4fe1\u606f\uff0c\u9700\u8981\u8bb0\u5f55\u5b8c\u6210\u7684\u5806\u6808\u4fe1\u606f:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'log.error("\u83b7\u53d6\u7528\u6237[{}]\u7684\u7528\u6237\u4fe1\u606f\u65f6\u51fa\u9519",userName,e);\n')),(0,l.kt)("p",null,"\u8bf4\u660e\uff0c\u5982\u679c\u8fdb\u884c\u4e86\u629b\u51fa\u5f02\u5e38\u64cd\u4f5c\uff0c\u8bf7\u4e0d\u8981\u8bb0\u5f55error\u65e5\u5fd7\uff0c\u7531\u6700\u7ec8\u5904\u7406\u65b9\u8fdb\u884c\u5904\u7406\uff1a"),(0,l.kt)("p",null,"\u53cd\u4f8b(\u4e0d\u8981\u8fd9\u4e48\u505a):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'try{\n    ....\n}catch(Exception ex){\n    String errorMessage=String.format("Error while reading information of user [%s]",userName);\n    logger.error(errorMessage,ex);\n    throw new UserServiceException(errorMessage,ex);\n}\n')),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"WARN\uff0c\u4e0d\u5e94\u8be5\u51fa\u73b0\u4f46\u662f\u4e0d\u5f71\u54cd\u7a0b\u5e8f\u3001\u5f53\u524d\u8bf7\u6c42\u6b63\u5e38\u8fd0\u884c\u7684\u5f02\u5e38\u60c5\u51b5:")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u6709\u5bb9\u9519\u673a\u5236\u7684\u65f6\u5019\u51fa\u73b0\u7684\u9519\u8bef\u60c5\u51b5"),(0,l.kt)("li",{parentName:"ol"},"\u627e\u4e0d\u5230\u914d\u7f6e\u6587\u4ef6\uff0c\u4f46\u662f\u7cfb\u7edf\u80fd\u81ea\u52a8\u521b\u5efa\u914d\u7f6e\u6587\u4ef6"),(0,l.kt)("li",{parentName:"ol"},"\u5373\u5c06\u63a5\u8fd1\u4e34\u754c\u503c\u7684\u65f6\u5019\uff0c\u4f8b\u5982\uff1a\u7f13\u5b58\u6c60\u5360\u7528\u8fbe\u5230\u8b66\u544a\u7ebf\uff0c\u4e1a\u52a1\u5f02\u5e38\u7684\u8bb0\u5f55\uff0c\u6bd4\u5982:\u7528\u6237\u9501\u5b9a\u5f02\u5e38")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"INFO\uff0c\u7cfb\u7edf\u8fd0\u884c\u4fe1\u606f")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Service\u65b9\u6cd5\u4e2d\u5bf9\u4e8e\u7cfb\u7edf/\u4e1a\u52a1\u72b6\u6001\u7684\u53d8\u66f4"),(0,l.kt)("li",{parentName:"ol"},"\u4e3b\u8981\u903b\u8f91\u4e2d\u7684\u5206\u6b65\u9aa4\uff1a1\uff0c\u521d\u59cb\u5316\u4ec0\u4e48 2\u3001\u52a0\u8f7d\u4ec0\u4e48"),(0,l.kt)("li",{parentName:"ol"},"\u5916\u90e8\u63a5\u53e3\u90e8\u5206"),(0,l.kt)("li",{parentName:"ol"},"\u5ba2\u6237\u7aef\u8bf7\u6c42\u53c2\u6570(REST/WS)"),(0,l.kt)("li",{parentName:"ol"},"\u8c03\u7528\u7b2c\u4e09\u65b9\u65f6\u7684\u8c03\u7528\u53c2\u6570\u548c\u8c03\u7528\u7ed3\u679c"),(0,l.kt)("li",{parentName:"ol"},"\u5bf9\u4e8e\u590d\u6742\u7684\u4e1a\u52a1\u903b\u8f91\uff0c\u9700\u8981\u8fdb\u884c\u65e5\u5fd7\u6253\u70b9\uff0c\u4ee5\u53ca\u57cb\u70b9\u8bb0\u5f55\uff0c\u6bd4\u5982\u7535\u5546\u7cfb\u7edf\u4e2d\u7684\u4e0b\u8ba2\u5355\u903b\u8f91\uff0c\u4ee5\u53caOrderAction\u64cd\u4f5c(\u4e1a\u52a1\u72b6\u6001\u53d8\u66f4)\u3002"),(0,l.kt)("li",{parentName:"ol"},"\u8c03\u7528\u5176\u4ed6\u7b2c\u4e09\u65b9\u670d\u52a1\u65f6\uff0c\u6240\u6709\u7684\u51fa\u53c2\u548c\u5165\u53c2\u662f\u5fc5\u987b\u8981\u8bb0\u5f55\u7684(\u56e0\u4e3a\u4f60\u5f88\u96be\u8ffd\u6eaf\u7b2c\u4e09\u65b9\u6a21\u5757\u53d1\u751f\u7684\u95ee\u9898)")),(0,l.kt)("p",null,"\u8bf4\u660e \u5e76\u4e0d\u662f\u6240\u6709\u7684service\u90fd\u8fdb\u884c\u51fa\u5165\u53e3\u6253\u70b9\u8bb0\u5f55,\u5355\u4e00\u3001\u7b80\u5355service\u662f\u6ca1\u6709\u610f\u4e49\u7684(job\u9664\u5916,job\u9700\u8981\u8bb0\u5f55\u5f00\u59cb\u548c\u7ed3\u675f,)\u3002\u53cd\u4f8b(\u4e0d\u8981\u8fd9\u4e48\u505a):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public List listByBaseType(Integer baseTypeId) {\n    log.info("\u5f00\u59cb\u67e5\u8be2\u57fa\u5730");\n    BaseExample ex=new BaseExample();\n    BaseExample.Criteria ctr = ex.createCriteria();\n    ctr.andIsDeleteEqualTo(IsDelete.USE.getValue());\n    Optionals.doIfPresent(baseTypeId, ctr::andBaseTypeIdEqualTo);\n    log.info("\u67e5\u8be2\u57fa\u5730\u7ed3\u675f");\n    return baseRepository.selectByExample(ex);\n\n}\n')),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"DEBUG\uff0c\u53ef\u4ee5\u586b\u5199\u6240\u6709\u7684\u60f3\u77e5\u9053\u7684\u76f8\u5173\u4fe1\u606f(\u4f46\u4e0d\u4ee3\u8868\u53ef\u4ee5\u968f\u4fbf\u5199\uff0cdebug\u4fe1\u606f\u8981\u6709\u610f\u4e49,\u6700\u597d\u6709\u76f8\u5173\u53c2\u6570)")),(0,l.kt)("p",null,"\u751f\u4ea7\u73af\u5883\u9700\u8981\u5173\u95edDEBUG\u4fe1\u606f"),(0,l.kt)("p",null,"\u5982\u679c\u5728\u751f\u4ea7\u60c5\u51b5\u4e0b\u9700\u8981\u5f00\u542fDEBUG,\u9700\u8981\u4f7f\u7528\u5f00\u5173\u8fdb\u884c\u7ba1\u7406\uff0c\u4e0d\u80fd\u4e00\u76f4\u5f00\u542f\u3002"),(0,l.kt)("p",null,"\u8bf4\u660e \u5982\u679c\u4ee3\u7801\u4e2d\u51fa\u73b0\u4ee5\u4e0b\u4ee3\u7801\uff0c\u53ef\u4ee5\u8fdb\u884c\u4f18\u5316:"),(0,l.kt)("p",null,"//1. \u83b7\u53d6\u7528\u6237\u57fa\u672c\u85aa\u8d44"),(0,l.kt)("p",null,"//2. \u83b7\u53d6\u7528\u6237\u4f11\u5047\u60c5\u51b5"),(0,l.kt)("p",null,"//3. \u8ba1\u7b97\u7528\u6237\u5e94\u5f97\u85aa\u8d44"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'logger.debug("\u5f00\u59cb\u83b7\u53d6\u5458\u5de5[{}] [{}]\u5e74\u57fa\u672c\u85aa\u8d44",employee,year);\nlogger.debug("\u83b7\u53d6\u5458\u5de5[{}] [{}]\u5e74\u7684\u57fa\u672c\u85aa\u8d44\u4e3a[{}]",employee,year,basicSalary);\nlogger.debug("\u5f00\u59cb\u83b7\u53d6\u5458\u5de5[{}] [{}]\u5e74[{}]\u6708\u4f11\u5047\u60c5\u51b5",employee,year,month);\nlogger.debug("\u5458\u5de5[{}][{}]\u5e74[{}]\u6708\u5e74\u5047/\u75c5\u5047/\u4e8b\u5047\u4e3a[{}]/[{}]/[{}]",employee,year,month,annualLeaveDays,sickLeaveDays,noPayLeaveDays);\nlogger.debug("\u5f00\u59cb\u8ba1\u7b97\u5458\u5de5[{}][{}]\u5e74[{}]\u6708\u5e94\u5f97\u85aa\u8d44",employee,year,month);\nlogger.debug("\u5458\u5de5[{}] [{}]\u5e74[{}]\u6708\u5e94\u5f97\u85aa\u8d44\u4e3a[{}]",employee,year,month,actualSalary);\n')),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"TRACE\uff0c\u7279\u522b\u8be6\u7ec6\u7684\u7cfb\u7edf\u8fd0\u884c\u5b8c\u6210\u4fe1\u606f\uff0c\u4e1a\u52a1\u4ee3\u7801\u4e2d\uff0c\u4e0d\u8981\u4f7f\u7528.(\u9664\u975e\u6709\u7279\u6b8a\u7528\u610f\uff0c\u5426\u5219\u8bf7\u4f7f\u7528DEBUG\u7ea7\u522b\u66ff\u4ee3)")),(0,l.kt)("p",null,"\u89c4\u8303\u793a\u4f8b\u8bf4\u660e"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Override\n@Transactional\npublic void createUserAndBindMobile(@NotBlank String mobile, @NotNull User user) throws CreateConflictException{\n    boolean debug = log.isDebugEnabled();\n    if(debug){\n        log.debug("\u5f00\u59cb\u521b\u5efa\u7528\u6237\u5e76\u7ed1\u5b9a\u624b\u673a\u53f7. args[mobile=[{}],user=[{}]]", mobile, LogObjects.toString(user));\n    }\n    try {\n        user.setCreateTime(new Date());\n        user.setUpdateTime(new Date());\n        userRepository.insertSelective(user);\n        if(debug){\n            log.debug("\u521b\u5efa\u7528\u6237\u4fe1\u606f\u6210\u529f. insertedUser=[{}]",LogObjects.toString(user));\n        }\n        UserMobileRelationship relationship = new UserMobileRelationship();\n        relationship.setMobile(mobile);\n        relationship.setOpenId(user.getOpenId());\n        relationship.setCreateTime(new Date());\n        relationship.setUpdateTime(new Date());\n        userMobileRelationshipRepository.insertOnDuplicateKey(relationship);\n        if(debug){\n            log.debug("\u7ed1\u5b9a\u624b\u673a\u6210\u529f. relationship=[{}]",LogObjects.toString(relationship));\n        }\n        log.info("\u521b\u5efa\u7528\u6237\u5e76\u7ed1\u5b9a\u624b\u673a\u53f7. userId=[{}],openId=[{}],mobile[{}]",user.getId(),user.getOpenId(),mobile);        // \u5982\u679c\u8003\u8651\u5b89\u5168\uff0c\u624b\u673a\u53f7\u8bb0\u5f97\u8131\u654f\n    }catch(DuplicateKeyException e){\n        log.info("\u521b\u5efa\u7528\u6237\u5e76\u7ed1\u5b9a\u624b\u673a\u53f7\u5931\u8d25,\u5df2\u5b58\u5728\u76f8\u540c\u7684\u7528\u6237. openId=[{}],mobile=[{}]",user.getOpenId(),mobile);\n        throw new CreateConflictException("\u521b\u5efa\u7528\u6237\u53d1\u751f\u51b2\u7a81, openid=[%s]",user.getOpenId());\n    }\n}\n')))}c.isMDXComponent=!0}}]);