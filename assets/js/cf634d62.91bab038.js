"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1069],{3905:(n,e,t)=>{t.d(e,{Zo:()=>p,kt:()=>b});var o=t(7294);function a(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function r(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function l(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?r(Object(t),!0).forEach((function(e){a(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function d(n,e){if(null==n)return{};var t,o,a=function(n,e){if(null==n)return{};var t,o,a={},r=Object.keys(n);for(o=0;o<r.length;o++)t=r[o],e.indexOf(t)>=0||(a[t]=n[t]);return a}(n,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(o=0;o<r.length;o++)t=r[o],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}var s=o.createContext({}),i=function(n){var e=o.useContext(s),t=e;return n&&(t="function"==typeof n?n(e):l(l({},e),n)),t},p=function(n){var e=i(n.components);return o.createElement(s.Provider,{value:e},n.children)},u="mdxType",c={inlineCode:"code",wrapper:function(n){var e=n.children;return o.createElement(o.Fragment,{},e)}},m=o.forwardRef((function(n,e){var t=n.components,a=n.mdxType,r=n.originalType,s=n.parentName,p=d(n,["components","mdxType","originalType","parentName"]),u=i(t),m=a,b=u["".concat(s,".").concat(m)]||u[m]||c[m]||r;return t?o.createElement(b,l(l({ref:e},p),{},{components:t})):o.createElement(b,l({ref:e},p))}));function b(n,e){var t=arguments,a=e&&e.mdxType;if("string"==typeof n||a){var r=t.length,l=new Array(r);l[0]=m;var d={};for(var s in e)hasOwnProperty.call(e,s)&&(d[s]=e[s]);d.originalType=n,d[u]="string"==typeof n?n:a,l[1]=d;for(var i=2;i<r;i++)l[i]=t[i];return o.createElement.apply(null,l)}return o.createElement.apply(null,t)}m.displayName="MDXCreateElement"},3239:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>d,toc:()=>i});var o=t(7462),a=(t(7294),t(3905));const r={},l=void 0,d={unversionedId:"vue/vue-cli/\u5168\u5c40\u4e8b\u4ef6\u603b\u7ebf \u6d88\u606f\u7684\u8ba2\u9605\u4e0e\u53d1\u5e03",id:"vue/vue-cli/\u5168\u5c40\u4e8b\u4ef6\u603b\u7ebf \u6d88\u606f\u7684\u8ba2\u9605\u4e0e\u53d1\u5e03",title:"\u5168\u5c40\u4e8b\u4ef6\u603b\u7ebf \u6d88\u606f\u7684\u8ba2\u9605\u4e0e\u53d1\u5e03",description:"\u5168\u5c40\u4e8b\u4ef6\u603b\u7ebf(GlobalEventBus)",source:"@site/docs/vue/vue-cli/5.\u5168\u5c40\u4e8b\u4ef6\u603b\u7ebf \u6d88\u606f\u7684\u8ba2\u9605\u4e0e\u53d1\u5e03.md",sourceDirName:"vue/vue-cli",slug:"/vue/vue-cli/\u5168\u5c40\u4e8b\u4ef6\u603b\u7ebf \u6d88\u606f\u7684\u8ba2\u9605\u4e0e\u53d1\u5e03",permalink:"/docs/vue/vue-cli/\u5168\u5c40\u4e8b\u4ef6\u603b\u7ebf \u6d88\u606f\u7684\u8ba2\u9605\u4e0e\u53d1\u5e03",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/vue/vue-cli/5.\u5168\u5c40\u4e8b\u4ef6\u603b\u7ebf \u6d88\u606f\u7684\u8ba2\u9605\u4e0e\u53d1\u5e03.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{},sidebar:"vue",previous:{title:"\u672c\u5730\u5b58\u50a8 \u81ea\u5b9a\u4e49\u4e8b\u4ef6",permalink:"/docs/vue/vue-cli/\u672c\u5730\u5b58\u50a8 \u81ea\u5b9a\u4e49\u4e8b\u4ef6"},next:{title:"$nextTick \u8fc7\u6e21\u4e0e\u52a8\u753b",permalink:"/docs/vue/vue-cli/$nextTick \u8fc7\u6e21\u4e0e\u52a8\u753b"}},s={},i=[{value:"\u5168\u5c40\u4e8b\u4ef6\u603b\u7ebf(GlobalEventBus)",id:"\u5168\u5c40\u4e8b\u4ef6\u603b\u7ebfglobaleventbus",level:2},{value:"\u4f7f\u7528\u6b65\u9aa4",id:"\u4f7f\u7528\u6b65\u9aa4",level:3},{value:"\u6d88\u606f\u7684\u8ba2\u9605\u4e0e\u53d1\u5e03\uff08\u57fa\u672c\u4e0d\u7528)",id:"\u6d88\u606f\u7684\u8ba2\u9605\u4e0e\u53d1\u5e03\u57fa\u672c\u4e0d\u7528",level:2},{value:"\u4f7f\u7528\u6b65\u9aa4",id:"\u4f7f\u7528\u6b65\u9aa4-1",level:3}],p={toc:i};function u(n){let{components:e,...t}=n;return(0,a.kt)("wrapper",(0,o.Z)({},p,t,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"\u5168\u5c40\u4e8b\u4ef6\u603b\u7ebfglobaleventbus"},"\u5168\u5c40\u4e8b\u4ef6\u603b\u7ebf(GlobalEventBus)"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u4e00\u79cd\u53ef\u4ee5\u5728\u4efb\u610f\u7ec4\u4ef6\u95f4\u901a\u4fe1\u7684\u65b9\u5f0f"),"\uff0c\u672c\u8d28\u4e0a\u5c31\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5b83\u5fc5\u987b\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u6240\u6709\u7684\u7ec4\u4ef6\u5bf9\u8c61\u90fd\u5fc5\u987b\u80fd\u770b\u89c1\u4ed6"),(0,a.kt)("li",{parentName:"ol"},"\u8fd9\u4e2a\u5bf9\u8c61\u5fc5\u987b\u80fd\u591f\u4f7f\u7528",(0,a.kt)("inlineCode",{parentName:"li"},"**$on**``**$emit**``**$off**"),"\u65b9\u6cd5\u53bb\u7ed1\u5b9a\u3001\u89e6\u53d1\u548c\u89e3\u7ed1\u4e8b\u4ef6")),(0,a.kt)("h3",{id:"\u4f7f\u7528\u6b65\u9aa4"},"\u4f7f\u7528\u6b65\u9aa4"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u5b9a\u4e49\u5168\u5c40\u4e8b\u4ef6\u603b\u7ebf")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"new Vue({\n  ...\n  beforeCreate() {\n  Vue.prototype.$bus = this // \u5b89\u88c5\u5168\u5c40\u4e8b\u4ef6\u603b\u7ebf\uff0c$bus \u5c31\u662f\u5f53\u524d\u5e94\u7528\u7684 vm\n},\n        ...\n})\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"\u4f7f\u7528\u4e8b\u4ef6\u603b\u7ebf")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u63a5\u6536\u6570\u636e:A\u7ec4\u4ef6\u60f3\u63a5\u6536\u6570\u636e\uff0c\u5219\u5728A\u7ec4\u4ef6\u4e2d\u7ed9",(0,a.kt)("inlineCode",{parentName:"li"},"**$bus**")," \u7ed1\u5b9a\u81ea\u5b9a\u4e49\u4e8b\u4ef6\uff0c\u4e8b\u4ef6\u7684\u56de\u8c03\u7559\u5728A\u7ec4\u4ef6\u81ea\u8eab")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"export default {\n  methods(){\n    demo(data){...}\n              }\n    ...\n    mounted() {\n      this.$bus.$on('xxx',this.demo)\n    }\n}\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"}," b\uff0e\u63d0\u4f9b\u6570\u636e:`**this.$bus.$emit( 'xxx' ,data)**`\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"\u6700\u597d\u5728",(0,a.kt)("inlineCode",{parentName:"li"},"beforeDestroy")," \u94a9\u5b50\u4e2d\uff0c\u7528",(0,a.kt)("inlineCode",{parentName:"li"},"**$off()**"),"\u53bb\u89e3\u7ed1\u5f53\u524d\u7ec4\u4ef6\u6240\u7528\u5230\u7684\u4e8b\u4ef6")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"src/main.js")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n  el:'#app',\n  render: h => h(App),\n  beforeCreate() {\n    Vue.prototype.$bus = this // \u5b89\u88c5\u5168\u5c40\u4e8b\u4ef6\u603b\u7ebf\n  }\n})\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"src/App.vue")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n<div class=\"app\">\n  <School/>\n  <Student/>\n  </div>\n</template>\n\n<script>\n  import Student from './components/Student'\n  import School from './components/School'\n  \n  export default {\n    name:'App',\n    components:{ School, Student }\n  }\n<\/script>\n\n<style scoped>.app{background-color: gray;padding: 5px;}</style>\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"src / components /School.vue")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n<div class="school">\n  <h2>\u5b66\u6821\u540d\u79f0\uff1a{{ name }}</h2>\n  <h2>\u5b66\u6821\u5730\u5740\uff1a{{ address }}</h2>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: "School",\n    data() {\n      return {\n        name: "\u5c1a\u7845\u8c37",\n        address: "\u5317\u4eac",\n      };\n    },\n    mounted() {  \n      // console.log(\'School\',this)\n      this.$bus.$on("hello", (data) => {\n        console.log("\u6211\u662fSchool\u7ec4\u4ef6\uff0c\u6536\u5230\u4e86\u6570\u636e", data);\n      });\n    },\n    beforeDestroy() {  \n      this.$bus.$off("hello");\n    },\n  };\n<\/script>\n\n<style scoped>.school {background-color: skyblue;padding: 5px;}</style>\n')),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"src/ components /student.vue")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n<div class=\"student\">\n  <h2>\u5b66\u751f\u59d3\u540d\uff1a{{ name }}</h2>\n  <h2>\u5b66\u751f\u6027\u522b\uff1a{{ sex }}</h2>\n  <button @click=\"sendStudentName\">\u628a\u5b66\u751f\u540d\u7ed9School\u7ec4\u4ef6</button> \n  </div>\n</template>\n\n<script>\n  export default {\n    name:'Student',\n    data() {\n      return {\n        name:'\u5f20\u4e09',\n        sex:'\u7537'\n      }\n    },\n    methods: {  \n      sendStudentName(){\n        this.$bus.$emit('demo', this.name)\n      }\n    }\n  }\n<\/script>\n\n<style scoped>.student{background-color: pink;padding: 5px;margin-top: 30px;}</style>\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221206193454407.png",alt:"image-20221206193454407"}),"\n",(0,a.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u4f18\u5316Todo-List"),"\n",(0,a.kt)("inlineCode",{parentName:"p"},"src/mian.js")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-vue"},"import Vue from 'vue'\nimport App from './App.vue'\nVue.config.productionTip = false\n\nnew Vue({\nel:'#app',\nrender: h => h(App),\nbeforeCreate() {\nVue.prototype.$bus = this\n},\n})\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"src/App. vue")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n<div id="root">\n  <div class="todo-container">\n    <div class="todo-wrap">\n      <MyHeader @addTodo="addTodo" />\n      <MyList :todos="todos"/>\n      <MyFooter :todos="todos" @checkAllTodo="checkAllTodo" @clearAllTodo="clearAllTodo"/>\n  </div>\n  </div>\n  </div>\n</template>\n\n<script>\n  import MyHeader from "./components/MyHeader";\n  import MyList from "./components/MyList";\n  import MyFooter from "./components/MyFooter.vue";\n  \n  export default {\n    name: "App",\n    components: { MyHeader, MyList, MyFooter },\n    data() {\n      return {\n        //\u7531\u4e8etodos\u662fMyHeader\u7ec4\u4ef6\u548cMyFooter\u7ec4\u4ef6\u90fd\u5728\u4f7f\u7528\uff0c\u6240\u4ee5\u653e\u5728App\u4e2d\uff08\u72b6\u6001\u63d0\u5347\uff09\n        todos: JSON.parse(localStorage.getItem("todos")) || [],\n      };\n    },\n    methods: {\n      //\u6dfb\u52a0\u4e00\u4e2atodo\n      addTodo(todoObj) {\n        this.todos.unshift(todoObj);\n      },\n      //\u52fe\u9009or\u53d6\u6d88\u52fe\u9009\u4e00\u4e2atodo\n      checkTodo(id) {\n        this.todos.forEach((todo) => {\n          if (todo.id === id) todo.done = !todo.done;\n        });\n      },\n      //\u5220\u9664\u4e00\u4e2atodo\n      deleteTodo(id) {\n        this.todos = this.todos.filter((todo) => todo.id !== id);\n      },\n      //\u5168\u9009or\u53d6\u6d88\u5168\u9009\n      checkAllTodo(done) {\n        this.todos.forEach((todo) => {\n          todo.done = done;\n        });\n      },\n      //\u6e05\u9664\u6240\u6709\u5df2\u7ecf\u5b8c\u6210\u7684todo\n      clearAllTodo() {\n        this.todos = this.todos.filter((todo) => {\n          return !todo.done;\n        });\n      },\n    },\n    watch: {\n      todos: {\n        deep: true,\n        handler(value) {\n          localStorage.setItem("todos", JSON.stringify(value));\n        },\n      },\n    },\n    mounted() {\n      this.$bus.$on("checkTodo", this.checkTodo);\n      this.$bus.$on("deleteTodo", this.deleteTodo);\n    },\n    beforeDestroy() {\n      this.$bus.$off("checkTodo");\n      this.$bus.$off("deleteTodo");\n    },\n  };\n<\/script>\n')),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"src/ components /MyItem.vue")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n<li>\n  <label>\n    <input type="checkbox" :checked="todoObj.done" @change="handleCheck(todoObj.id)"/>\n    <span>{{ todoObj.title }}</span>\n  </label>\n  <button class="btn btn-danger" @click="handleDelete(todoObj.id)">\u5220\u9664</button>\n  </li>\n</template>\n\n<script>\n  export default {\n    name: "MyItem",\n    data() {\n      return {};\n    },\n    props: ["todoObj"], // \u58f0\u660e\u63a5\u53d7todoObj\u5bf9\u8c61\n    methods: {\n      handleCheck(id) {\n        this.$bus.$emit(\'checkTodo\', id)\n      },\n      handleDelete(id) {\n        if (confirm(\'\u786e\u5b9a\u5220\u9664\u5417\uff1f\')) {\n          this.$bus.$emit(\'deleteTodo\', id)\n        }\n      }\n    },\n  };\n<\/script>\n')),(0,a.kt)("h2",{id:"\u6d88\u606f\u7684\u8ba2\u9605\u4e0e\u53d1\u5e03\u57fa\u672c\u4e0d\u7528"},"\u6d88\u606f\u7684\u8ba2\u9605\u4e0e\u53d1\u5e03\uff08\u57fa\u672c\u4e0d\u7528)"),(0,a.kt)("p",null,"\u6d88\u606f\u8ba2\u9605\u4e0e\u53d1\u5e03(pubsub)\u6d88\u606f\u8ba2\u9605\u4e0e\u53d1\u5e03\u662f\u4e00\u79cd\u7ec4\u4ef6\u95f4\u901a\u4fe1\u7684\u65b9\u5f0f\uff0c\u9002\u7528\u4e8e\u4efb\u610f\u7ec4\u4ef6\u95f4\u901a\u4fe1"),(0,a.kt)("h3",{id:"\u4f7f\u7528\u6b65\u9aa4-1"},"\u4f7f\u7528\u6b65\u9aa4"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u5b89\u88c5pubsub: ",(0,a.kt)("inlineCode",{parentName:"p"},"npm i pubsub-js"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u5f15\u5165:",(0,a.kt)("inlineCode",{parentName:"p"},"import pubsub from 'pubsub-js'"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u63a5\u6536\u6570\u636e:A\u7ec4\u4ef6\u60f3\u63a5\u6536\u6570\u636e\uff0c\u5219\u5728A\u7ec4\u4ef6\u4e2d\u8ba2\u9605\u6d88\u606f\uff0c\u8ba2\u9605\u7684\u56de\u8c03\u7559\u5728A"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"}," \u7ec4\u4ef6\u81ea\u8eab\n")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"export default {\n  methods: {\n    demo(msgName, data) {...}\n                        }\n    ...\n    mounted() {\n  this.pid = pubsub.subscribe('xxx',this.demo)\n}\n}\n")),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"\u63d0\u4f9b\u6570\u636e:",(0,a.kt)("inlineCode",{parentName:"li"},"pubsub.publish( 'xxx ' ,data)")),(0,a.kt)("li",{parentName:"ol"},"\u6700\u597d\u5728",(0,a.kt)("inlineCode",{parentName:"li"},"beforeDestroy")," \u94a9\u5b50\u4e2d\uff0c\u4f7f\u7528",(0,a.kt)("inlineCode",{parentName:"li"},"pubsub.unsubscribe(pid)"),"\u53d6")),(0,a.kt)("p",null,"\u6d88\u8ba2\u9605"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"src /components /School.vue")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n<div class=\"school\">\n  <h2>\u5b66\u6821\u540d\u79f0\uff1a{{name}}</h2>\n  <h2>\u5b66\u6821\u5730\u5740\uff1a{{address}}</h2>\n  </div>\n</template>\n\n<script>\n  import pubsub from 'pubsub-js'\n  \n  export default {\n    name: 'School',\n    data() {\n      return {\n        name:'\u5c1a\u7845\u8c37',\n        address:'\u5317\u4eac',\n      }\n    },\n    methods: {\n      demo(msgName, data) {\n        console.log('\u6211\u662fSchool\u7ec4\u4ef6\uff0c\u6536\u5230\u4e86\u6570\u636e\uff1a',msgName, data)\n      }\n    },\n    mounted() {\n      this.pubId = pubsub.subscribe('demo', this.demo) // \u8ba2\u9605\u6d88\u606f\n    },\n    beforeDestroy() {\n      pubsub.unsubscribe(this.pubId) // \u53d6\u6d88\u8ba2\u9605\n    }\n  }\n<\/script>\n\n<style scoped>\n  .school{\n    background-color: skyblue;\n    padding: 5px;\n  }\n</style>\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"src/ components / Student.vue")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n<div class=\"student\">\n  <h2>\u5b66\u751f\u59d3\u540d\uff1a{{name}}</h2>\n  <h2>\u5b66\u751f\u6027\u522b\uff1a{{sex}}</h2>\n  <button @click=\"sendStudentName\">\u628a\u5b66\u751f\u540d\u7ed9School\u7ec4\u4ef6</button>\n  </div>\n</template>\n\n<script>\n  import pubsub from 'pubsub-js'\n  \n  export default {\n    name:'Student',\n    data() {\n      return {\n        name:'JOJO',\n        sex:'\u7537',\n      }\n    },\n    methods: {\n      sendStudentName(){\n        pubsub.publish('demo', this.name) // \u53d1\u5e03\u6d88\u606f\n      }\n    }\n  }\n<\/script>\n\n<style scoped>\n  .student{\n    background-color: pink;\n    padding: 5px;\n    margin-top: 30px;\n  }\n</style>\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u4f7f\u7528\u6d88\u606f\u7684\u8ba2\u9605\u4e0e\u53d1\u5e03\u4f18\u5316Todo-List"),"\n",(0,a.kt)("inlineCode",{parentName:"p"},"src/App.vue")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n<div id=\"root\">\n  <div class=\"todo-container\">\n    <div class=\"todo-wrap\">\n      <MyHeader @addTodo=\"addTodo\"/>\n      <MyList :todos=\"todos\"/>\n      <MyFooter :todos=\"todos\" @checkAllTodo=\"checkAllTodo\" @clearAllTodo=\"clearAllTodo\"/>\n  </div>\n  </div>\n  </div>\n</template>\n\n<script>\n  import pubsub from 'pubsub-js'    // \u4e60\u60ef\u7b2c\u4e09\u65b9\u5e93\u5199\u4e0a\u9762\n  import MyHeader from './components/MyHeader.vue'\n  import MyList from './components/MyList.vue'\n  import MyFooter from './components/MyFooter.vue'\n  \n  \n  export default {\n    name:'App',\n    components: { MyHeader,MyList,MyFooter },\n    data() {\n      return {\n        todos:JSON.parse(localStorage.getItem('todos')) || []\n      }\n    },\n    methods:{\n      //\u6dfb\u52a0\u4e00\u4e2atodo\n      addTodo(todoObj){\n        this.todos.unshift(todoObj)\n      },\n      //\u52fe\u9009or\u53d6\u6d88\u52fe\u9009\u4e00\u4e2atodo\n      checkTodo(_,id){\n        this.todos.forEach((todo)=>{\n          if(todo.id === id) todo.done = !todo.done\n        })\n      },\n      //\u5220\u9664\u4e00\u4e2atodo\n      deleteTodo(id){\n        this.todos = this.todos.filter(todo => todo.id !== id)\n      },\n      //\u5168\u9009or\u53d6\u6d88\u52fe\u9009\n      checkAllTodo(done){\n        this.todos.forEach(todo => todo.done = done)\n      },\n      //\u5220\u9664\u5df2\u5b8c\u6210\u7684todo\n      clearAllTodo(){\n        this.todos = this.todos.filter(todo => !todo.done)\n      }\n    },\n    watch:{\n      todos:{\n        deep:true,\n        handler(value){\n          localStorage.setItem('todos',JSON.stringify(value))\n        }\n      }\n    },\n    mounted(){\n      this.pubId = pubsub.subscribe('checkTodo',this.checkTodo) // \u4e24\u79cd\u5bf9\u6bd4\n      this.$bus.$on('deleteTodo',this.deleteTodo)\n    },\n    beforeDestroy(){\n      pubsub.unsubscribe(this.pubId)\n      this.$bus.$off('deleteTodo')\n    }\n  }\n<\/script>\n\n<style>\n  body {\n    background: #fff;\n  }\n  \n  .btn {\n    display: inline-block;\n    padding: 4px 12px;\n    margin-bottom: 0;\n    font-size: 14px;\n    line-height: 20px;\n    text-align: center;\n    vertical-align: middle;\n    cursor: pointer;\n    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);\n    border-radius: 4px;\n  }\n  \n  .btn-danger {\n    color: #fff;\n    background-color: #da4f49;\n    border: 1px solid #bd362f;\n  }\n  \n  .btn-danger:hover {\n    color: #fff;\n    background-color: #bd362f;\n  }\n  \n  .btn:focus {\n    outline: none;\n  }\n  \n  .todo-container {\n    width: 600px;\n    margin: 0 auto;\n  }\n  .todo-container .todo-wrap {\n    padding: 10px;\n    border: 1px solid #ddd;\n    border-radius: 5px;\n  }\n</style>\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"src / components /myItem.vue")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n<li>\n  <label>\n    <input type="checkbox" :checked="todo.done" @click="handleCheck(todo.id)"/>\n    <span>{{todo.title}}</span>\n  </label>\n  <button class="btn btn-danger" @click="handleDelete(todo.id,todo.title)">\u5220\u9664</button>\n  </li>\n</template>\n\n<script>\n  import pubsub from \'pubsub-js\'\n  export default {\n    name:\'MyItem\',\n    props:[\'todo\'],\n    methods:{\n      handleCheck(id){                    \n        pubsub.publish(\'checkTodo\',id)\n      },\n      handleDelete(id,title){\n        if(confirm("\u786e\u5b9a\u5220\u9664\u4efb\u52a1\uff1a"+title+"\u5417\uff1f")){\n          this.$bus.$emit(\'deleteTodo\',id)\n        }\n      }\n    }\n  }\n<\/script>\n\n<style scoped>\n  li {\n    list-style: none;\n    height: 36px;\n    line-height: 36px;\n    padding: 0 5px;\n    border-bottom: 1px solid #ddd;\n  }\n  \n  li label {\n    float: left;\n    cursor: pointer;\n  }\n  \n  li label li input {\n    vertical-align: middle;\n    margin-right: 6px;\n    position: relative;\n    top: -1px;\n  }\n  \n  li button {\n    float: right;\n    display: none;\n    margin-top: 3px;\n  }\n  \n  li:before {\n    content: initial;\n  }\n  \n  li:last-child {\n    border-bottom: none;\n  }\n  \n  li:hover {\n    background-color: #eee;\n  }\n  \n  li:hover button{\n    display: block;\n  }\n</style>\n')))}u.isMDXComponent=!0}}]);