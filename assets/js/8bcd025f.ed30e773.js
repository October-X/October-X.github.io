"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9974],{3905:(e,t,l)=>{l.d(t,{Zo:()=>u,kt:()=>N});var n=l(7294);function a(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}function r(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,n)}return l}function p(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?r(Object(l),!0).forEach((function(t){a(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):r(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}function s(e,t){if(null==e)return{};var l,n,a=function(e,t){if(null==e)return{};var l,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)l=r[n],t.indexOf(l)>=0||(a[l]=e[l]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)l=r[n],t.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(e,l)&&(a[l]=e[l])}return a}var i=n.createContext({}),m=function(e){var t=n.useContext(i),l=t;return e&&(l="function"==typeof e?e(t):p(p({},t),e)),l},u=function(e){var t=m(e.components);return n.createElement(i.Provider,{value:t},e.children)},k="mdxType",o={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var l=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),k=m(l),d=a,N=k["".concat(i,".").concat(d)]||k[d]||o[d]||r;return l?n.createElement(N,p(p({ref:t},u),{},{components:l})):n.createElement(N,p({ref:t},u))}));function N(e,t){var l=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=l.length,p=new Array(r);p[0]=d;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s[k]="string"==typeof e?e:a,p[1]=s;for(var m=2;m<r;m++)p[m]=l[m];return n.createElement.apply(null,p)}return n.createElement.apply(null,l)}d.displayName="MDXCreateElement"},7590:(e,t,l)=>{l.r(t),l.d(t,{assets:()=>i,contentTitle:()=>p,default:()=>k,frontMatter:()=>r,metadata:()=>s,toc:()=>m});var n=l(7462),a=(l(7294),l(3905));const r={},p="mysql\u8fdb\u9636-\u4e0b",s={unversionedId:"Java/mysql\u5b66\u4e60/mysql\u8fdb\u9636-\u4e0b",id:"Java/mysql\u5b66\u4e60/mysql\u8fdb\u9636-\u4e0b",title:"mysql\u8fdb\u9636-\u4e0b",description:"\u7b2c\u516d\u7ae0 \u7d22\u5f15",source:"@site/docs/Java/3.mysql\u5b66\u4e60/3.mysql\u8fdb\u9636-\u4e0b.md",sourceDirName:"Java/3.mysql\u5b66\u4e60",slug:"/Java/mysql\u5b66\u4e60/mysql\u8fdb\u9636-\u4e0b",permalink:"/docs/Java/mysql\u5b66\u4e60/mysql\u8fdb\u9636-\u4e0b",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Java/3.mysql\u5b66\u4e60/3.mysql\u8fdb\u9636-\u4e0b.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{},sidebar:"Java",previous:{title:"mysql\u8fdb\u9636-\u4e0a",permalink:"/docs/Java/mysql\u5b66\u4e60/mysql\u8fdb\u9636-\u4e0a"},next:{title:"JDBC",permalink:"/docs/Java/mysql\u5b66\u4e60/JDBC"}},i={},m=[{value:"\u7b2c\u516d\u7ae0 \u7d22\u5f15",id:"\u7b2c\u516d\u7ae0-\u7d22\u5f15",level:2},{value:"\u4e00\u3001\u6570\u636e\u7ed3\u6784",id:"\u4e00\u6570\u636e\u7ed3\u6784",level:3},{value:"1\u3001B-\u6811",id:"1b-\u6811",level:4},{value:"2\u3001B+\u6811",id:"2b\u6811",level:4},{value:"3\u3001\u9009\u578b\u7f18\u7531",id:"3\u9009\u578b\u7f18\u7531",level:4},{value:"4\u3001\u53d1\u73b0\u7d22\u5f15",id:"4\u53d1\u73b0\u7d22\u5f15",level:4},{value:"\u4e8c\u3001\u7d22\u5f15\u7684\u5206\u7c7b\u548c\u521b\u5efa",id:"\u4e8c\u7d22\u5f15\u7684\u5206\u7c7b\u548c\u521b\u5efa",level:3},{value:"1\u3001\u805a\u7c07\u7d22\u5f15\u548c\u975e\u805a\u7c07\u7d22\u5f15",id:"1\u805a\u7c07\u7d22\u5f15\u548c\u975e\u805a\u7c07\u7d22\u5f15",level:4},{value:"2\u3001\u666e\u901a\u7d22\u5f15 \uff08\u5e38\u89c4\u7d22\u5f15\uff09(normal)",id:"2\u666e\u901a\u7d22\u5f15-\u5e38\u89c4\u7d22\u5f15normal",level:4},{value:"3\u3001\u552f\u4e00\u7d22\u5f15\uff08UNIQUE \uff09",id:"3\u552f\u4e00\u7d22\u5f15unique-",level:4},{value:"4\u3001\u591a\u4e2a\u4e8c\u7ea7\u7d22\u5f15\u7684\u7ec4\u5408\u4f7f\u7528",id:"4\u591a\u4e2a\u4e8c\u7ea7\u7d22\u5f15\u7684\u7ec4\u5408\u4f7f\u7528",level:4},{value:"5\u3001\u590d\u5408\u7d22\u5f15\uff08\u8054\u5408\u7d22\u5f15\uff09\u91cd\u8981",id:"5\u590d\u5408\u7d22\u5f15\u8054\u5408\u7d22\u5f15\u91cd\u8981",level:4},{value:"6\u3001\u5168\u6587\u7d22\u5f15\uff08FULLTEXT\uff09",id:"6\u5168\u6587\u7d22\u5f15fulltext",level:4},{value:"8\u3001hash\u7d22\u5f15",id:"8hash\u7d22\u5f15",level:4},{value:"7\u3001\u7a7a\u95f4\u7d22\u5f15\uff08SPATIAL\uff09",id:"7\u7a7a\u95f4\u7d22\u5f15spatial",level:4},{value:"\u4e09\u3001explain\u7684\u7528\u6cd5",id:"\u4e09explain\u7684\u7528\u6cd5",level:3},{value:"1\u3001id\u5b57\u6bb5",id:"1id\u5b57\u6bb5",level:4},{value:"2\u3001select_type\u5b57\u6bb5",id:"2select_type\u5b57\u6bb5",level:4},{value:"3\u3001type\u5b57\u6bb5",id:"3type\u5b57\u6bb5",level:4},{value:"4\u3001table\u5b57\u6bb5",id:"4table\u5b57\u6bb5",level:4},{value:"5\u3001possible_keys\u5b57\u6bb5",id:"5possible_keys\u5b57\u6bb5",level:4},{value:"6\u3001key\u5b57\u6bb5",id:"6key\u5b57\u6bb5",level:4},{value:"7\u3001key_len\u5b57\u6bb5",id:"7key_len\u5b57\u6bb5",level:4},{value:"8\u3001ref\u5b57\u6bb5",id:"8ref\u5b57\u6bb5",level:4},{value:"9\u3001rows\u5b57\u6bb5",id:"9rows\u5b57\u6bb5",level:4},{value:"10\u3001partitions\u5b57\u6bb5",id:"10partitions\u5b57\u6bb5",level:4},{value:"11\u3001filtered\u5b57\u6bb5",id:"11filtered\u5b57\u6bb5",level:4},{value:"12\u3001Extra\u5b57\u6bb5",id:"12extra\u5b57\u6bb5",level:4},{value:"\u4e09\u3001\u4f7f\u7528\u7d22\u5f15\u7684\u95ee\u9898",id:"\u4e09\u4f7f\u7528\u7d22\u5f15\u7684\u95ee\u9898",level:3},{value:"1\u3001\u54ea\u4e9b\u60c5\u51b5\u4e0b\u9002\u5408\u5efa\u7d22\u5f15",id:"1\u54ea\u4e9b\u60c5\u51b5\u4e0b\u9002\u5408\u5efa\u7d22\u5f15",level:4},{value:"2\u3001\u54ea\u4e9b\u60c5\u51b5\u4e0b\u4e0d\u9002\u5408\u5efa\u7d22\u5f15",id:"2\u54ea\u4e9b\u60c5\u51b5\u4e0b\u4e0d\u9002\u5408\u5efa\u7d22\u5f15",level:4},{value:"3\u3001\u80fd\u7528\u590d\u5408\u7d22\u5f15\u7684\u8981\u4f7f\u7528\u590d\u5408\u7d22\u5f15",id:"3\u80fd\u7528\u590d\u5408\u7d22\u5f15\u7684\u8981\u4f7f\u7528\u590d\u5408\u7d22\u5f15",level:4},{value:"4\u3001null\u503c\u4e5f\u662f\u53ef\u4ee5\u8d70\u7d22\u5f15\u7684\uff0c\u4ed6\u88ab\u5904\u7406\u6210\u6700\u5c0f\u503c\u653e\u5728b+\u6811\u7684\u6700\u5de6\u4fa7",id:"4null\u503c\u4e5f\u662f\u53ef\u4ee5\u8d70\u7d22\u5f15\u7684\u4ed6\u88ab\u5904\u7406\u6210\u6700\u5c0f\u503c\u653e\u5728b\u6811\u7684\u6700\u5de6\u4fa7",level:4},{value:"5\u3001\u4f7f\u7528\u77ed\u7d22\u5f15",id:"5\u4f7f\u7528\u77ed\u7d22\u5f15",level:4},{value:"6\uff0c\u6392\u5e8f\u7684\u7d22\u5f15\u95ee\u9898",id:"6\u6392\u5e8f\u7684\u7d22\u5f15\u95ee\u9898",level:4},{value:"7\u3001MySQL\u7d22\u5f15\u5931\u6548\u7684\u51e0\u79cd\u60c5\u51b5",id:"7mysql\u7d22\u5f15\u5931\u6548\u7684\u51e0\u79cd\u60c5\u51b5",level:4},{value:"\u7b2c\u4e03\u7ae0 \u9501\u673a\u5236",id:"\u7b2c\u4e03\u7ae0-\u9501\u673a\u5236",level:2},{value:"\u4e00\u3001InnoDB\u7684\u9501\u7c7b\u578b",id:"\u4e00innodb\u7684\u9501\u7c7b\u578b",level:3},{value:"1\u3001s\u9501",id:"1s\u9501",level:4},{value:"2\u3001x\u9501",id:"2x\u9501",level:4},{value:"3\u3001\u8bb0\u5f55\u9501\uff08Record Lock\uff09",id:"3\u8bb0\u5f55\u9501record-lock",level:4},{value:"4\u3001\u95f4\u9699\u9501\uff08GAP Lock\uff09",id:"4\u95f4\u9699\u9501gap-lock",level:4},{value:"5\u3001\u8bb0\u5f55\u9501\u548c\u95f4\u9699\u9501\u7684\u7ec4\u5408\uff08next-key lock\uff09",id:"5\u8bb0\u5f55\u9501\u548c\u95f4\u9699\u9501\u7684\u7ec4\u5408next-key-lock",level:4},{value:"6\u3001MDL\u9501",id:"6mdl\u9501",level:4},{value:"7\u3001\u6b7b\u9501\u95ee\u9898",id:"7\u6b7b\u9501\u95ee\u9898",level:4},{value:"\u4e8c\u3001\u8868\u9501",id:"\u4e8c\u8868\u9501",level:3},{value:"\u4e09\u3001\u4ece\u53e6\u4e00\u4e2a\u89d2\u5ea6\u533a\u5206\u9501\u7684\u5206\u7c7b",id:"\u4e09\u4ece\u53e6\u4e00\u4e2a\u89d2\u5ea6\u533a\u5206\u9501\u7684\u5206\u7c7b",level:3},{value:"1\u3001\u4e50\u89c2\u9501",id:"1\u4e50\u89c2\u9501",level:4},{value:"2\u3001\u60b2\u89c2\u9501",id:"2\u60b2\u89c2\u9501",level:4},{value:"\u7b2c\u516b\u7ae0 \u65e5\u5fd7\u7cfb\u7edf",id:"\u7b2c\u516b\u7ae0-\u65e5\u5fd7\u7cfb\u7edf",level:2},{value:"\u4e00\u3001bin log\u65e5\u5fd7",id:"\u4e00bin-log\u65e5\u5fd7",level:3},{value:"1\u3001\u6982\u8ff0",id:"1\u6982\u8ff0",level:4},{value:"2\u3001\u6570\u636e\u6062\u590d",id:"2\u6570\u636e\u6062\u590d",level:4},{value:"3\u3001\u683c\u5f0f\u5206\u7c7b",id:"3\u683c\u5f0f\u5206\u7c7b",level:4},{value:"4\u3001\u65e5\u5fd7\u683c\u5f0f",id:"4\u65e5\u5fd7\u683c\u5f0f",level:4},{value:"5\u3001binlog\u5237\u76d8",id:"5binlog\u5237\u76d8",level:4},{value:"6\u3001binlog\u5b9e\u73b0\u4e3b\u4ece\u540c\u6b65",id:"6binlog\u5b9e\u73b0\u4e3b\u4ece\u540c\u6b65",level:4},{value:"<strong>\uff081\uff09 \u4e3b\u4ece\u590d\u5236\u5de5\u4f5c\u539f\u7406\u5256\u6790</strong>",id:"1-\u4e3b\u4ece\u590d\u5236\u5de5\u4f5c\u539f\u7406\u5256\u6790",level:5},{value:"<strong>\uff082\uff09\u600e\u4e48\u914d\u7f6emysql\u4e3b\u4ece\u590d\u5236</strong>",id:"2\u600e\u4e48\u914d\u7f6emysql\u4e3b\u4ece\u590d\u5236",level:5},{value:"\uff083\uff09\u53ef\u80fd\u9047\u5230\u7684\u95ee\u9898",id:"3\u53ef\u80fd\u9047\u5230\u7684\u95ee\u9898",level:5},{value:"\u4e8c\u3001\u5176\u4ed6\u65e5\u5fd7",id:"\u4e8c\u5176\u4ed6\u65e5\u5fd7",level:3},{value:"1\u3001\u901a\u7528\u67e5\u8be2\u65e5\u5fd7\uff0c\u9ed8\u8ba4\u5173\u95ed",id:"1\u901a\u7528\u67e5\u8be2\u65e5\u5fd7\u9ed8\u8ba4\u5173\u95ed",level:4},{value:"2\u3001\u6162\u67e5\u8be2\u65e5\u5fd7",id:"2\u6162\u67e5\u8be2\u65e5\u5fd7",level:4},{value:"3\u3001\u9519\u8bef\u65e5\u5fd7",id:"3\u9519\u8bef\u65e5\u5fd7",level:4},{value:"\u4e09\u3001redo log\u65e5\u5fd7",id:"\u4e09redo-log\u65e5\u5fd7",level:3},{value:"1\u3001MTR",id:"1mtr",level:4},{value:"2\u3001log buffer",id:"2log-buffer",level:4},{value:"3\u3001checkpoint",id:"3checkpoint",level:4},{value:"4\u3001\u4e00\u4e2a\u4e8b\u52a1\u7684\u6267\u884c\u6d41\u7a0b",id:"4\u4e00\u4e2a\u4e8b\u52a1\u7684\u6267\u884c\u6d41\u7a0b",level:4},{value:"5\u3001\u7cfb\u7edf\u5d29\u6e83\u7684\u5f71\u54cd",id:"5\u7cfb\u7edf\u5d29\u6e83\u7684\u5f71\u54cd",level:4},{value:"\u56db\u3001undo log\u65e5\u5fd7",id:"\u56dbundo-log\u65e5\u5fd7",level:3},{value:"1\u3001\u6982\u8ff0",id:"1\u6982\u8ff0-1",level:4},{value:"2\u3001\u4e8b\u52a1id\uff08trx_id\uff09",id:"2\u4e8b\u52a1idtrx_id",level:4},{value:"3\u3001roll_pointer",id:"3roll_pointer",level:4},{value:"4\u3001\u5206\u7c7b",id:"4\u5206\u7c7b",level:4},{value:"5\u3001\u7269\u7406\u5b58\u50a8\u7ed3\u6784",id:"5\u7269\u7406\u5b58\u50a8\u7ed3\u6784",level:4},{value:"6\u3001\u8bb0\u5f55\u6d41\u7a0b",id:"6\u8bb0\u5f55\u6d41\u7a0b",level:4},{value:"7\u3001\u56de\u6eda\u8fc7\u7a0b",id:"7\u56de\u6eda\u8fc7\u7a0b",level:4},{value:"\u7b2c\u4e5d\u7ae0\u3001\u9694\u79bb\u7ea7\u522b\u548cMVCC",id:"\u7b2c\u4e5d\u7ae0\u9694\u79bb\u7ea7\u522b\u548cmvcc",level:2},{value:"\u4e00\u3001Read View\uff08\u8bfb\u89c6\u56fe\uff09",id:"\u4e00read-view\u8bfb\u89c6\u56fe",level:3},{value:"1\u3001\u5b9e\u73b0\u539f\u7406",id:"1\u5b9e\u73b0\u539f\u7406",level:4},{value:"2\u3001readView\u7684\u7ed3\u6784",id:"2readview\u7684\u7ed3\u6784",level:4},{value:"\u4e8c\u3001\u5feb\u7167\u8bfb\u539f\u7406\u89e3\u6790",id:"\u4e8c\u5feb\u7167\u8bfb\u539f\u7406\u89e3\u6790",level:3},{value:"\u4e09\u3001\u89e3\u51b3\u810f\u8bfb\u548c\u4e0d\u53ef\u91cd\u590d\u8bfb",id:"\u4e09\u89e3\u51b3\u810f\u8bfb\u548c\u4e0d\u53ef\u91cd\u590d\u8bfb",level:3},{value:"1\u3001\u89e3\u51b3\u810f\u8bfb",id:"1\u89e3\u51b3\u810f\u8bfb",level:4},{value:"2\u3001\u89e3\u51b3\u4e0d\u53ef\u91cd\u590d\u8bfb",id:"2\u89e3\u51b3\u4e0d\u53ef\u91cd\u590d\u8bfb",level:4},{value:"3\u3001\u89e3\u51b3\u5e7b\u8bfb",id:"3\u89e3\u51b3\u5e7b\u8bfb",level:4},{value:"\u7b2c\u5341\u7ae0 \u5176\u4ed6\u77e5\u8bc6",id:"\u7b2c\u5341\u7ae0-\u5176\u4ed6\u77e5\u8bc6",level:2},{value:"\u4e00\u3001\u89e6\u53d1\u5668",id:"\u4e00\u89e6\u53d1\u5668",level:3},{value:"1\u3001\u89e6\u53d1\u5668\u7684\u7279\u6027",id:"1\u89e6\u53d1\u5668\u7684\u7279\u6027",level:4},{value:"2\u3001\u89e6\u53d1\u5668\u7684\u521b\u5efa",id:"2\u89e6\u53d1\u5668\u7684\u521b\u5efa",level:4},{value:"3\u3001\u5220\u9664\u89e6\u53d1\u5668",id:"3\u5220\u9664\u89e6\u53d1\u5668",level:4},{value:"\u4e8c\u3001\u5b58\u50a8\u8fc7\u7a0b",id:"\u4e8c\u5b58\u50a8\u8fc7\u7a0b",level:3},{value:"1\u3001 \u53d8\u91cf",id:"1-\u53d8\u91cf",level:4},{value:"1.1 \u7cfb\u7edf\u53d8\u91cf",id:"11-\u7cfb\u7edf\u53d8\u91cf",level:5},{value:"1.2 \u7528\u6237\u53d8\u91cf",id:"12-\u7528\u6237\u53d8\u91cf",level:5},{value:"2\u3001\u5b58\u50a8\u8fc7\u7a0b\u7684\u521b\u5efa",id:"2\u5b58\u50a8\u8fc7\u7a0b\u7684\u521b\u5efa",level:4},{value:"2.1 \u6d41\u7a0b\u63a7\u5236\u8bed\u53e5",id:"21-\u6d41\u7a0b\u63a7\u5236\u8bed\u53e5",level:5},{value:"\u4e09\u3001\u5b58\u50a8\u51fd\u6570",id:"\u4e09\u5b58\u50a8\u51fd\u6570",level:3},{value:"1\u3001\u521b\u5efa\u51fd\u6570",id:"1\u521b\u5efa\u51fd\u6570",level:4},{value:"2\u3001\u4f7f\u7528\u51fd\u6570",id:"2\u4f7f\u7528\u51fd\u6570",level:4},{value:"3\u3001\u67e5\u770b\u51fd\u6570",id:"3\u67e5\u770b\u51fd\u6570",level:4},{value:"4\u3001\u5220\u9664\u51fd\u6570",id:"4\u5220\u9664\u51fd\u6570",level:4},{value:"\u56db\u3001\u5b9a\u65f6\u4efb\u52a1",id:"\u56db\u5b9a\u65f6\u4efb\u52a1",level:3},{value:"1\u3001\u67e5\u770b\u5b9a\u65f6\u7b56\u7565\u662f\u5426\u5f00\u542f",id:"1\u67e5\u770b\u5b9a\u65f6\u7b56\u7565\u662f\u5426\u5f00\u542f",level:4},{value:"2\u3001\u521b\u5efa\u5b9a\u65f6\u4efb\u52a1",id:"2\u521b\u5efa\u5b9a\u65f6\u4efb\u52a1",level:4},{value:"3\u3001\u5b9a\u65f6\u4efb\u52a1\u64cd\u4f5c",id:"3\u5b9a\u65f6\u4efb\u52a1\u64cd\u4f5c",level:4},{value:"4\u3001\u5b9a\u65f6\u89c4\u5219",id:"4\u5b9a\u65f6\u89c4\u5219",level:4},{value:"\u9644\u5f55\uff1a",id:"\u9644\u5f55",level:2}],u={toc:m};function k(e){let{components:t,...l}=e;return(0,a.kt)("wrapper",(0,n.Z)({},u,l,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"mysql\u8fdb\u9636-\u4e0b"},"mysql\u8fdb\u9636-\u4e0b"),(0,a.kt)("h2",{id:"\u7b2c\u516d\u7ae0-\u7d22\u5f15"},"\u7b2c\u516d\u7ae0 \u7d22\u5f15"),(0,a.kt)("p",null,"\u5b66\u4e60\u672c\u7ae0\u8282\u5185\u5bb9\uff0c\u6211\u4eec\u6700\u597d\u80fd\u6a21\u62df\u4e00\u4e2a\u6570\u636e\u91cf\u6bd4\u8f83\u5927\u7684\u73af\u5883\uff0c\u6211\u4f7f\u7528nodejs\u6a21\u62df\u4e86600\u591a\u4e07\u6761\u6570\u636e\uff0c\u5927\u5bb6\u53ef\u81ea\u884c\u4e0b\u8f7d\uff1a"),(0,a.kt)("p",null,"\u6570\u636e\u5e93\u8868\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"DROP TABLE IF EXISTS `user`;\nCREATE TABLE `user`  (\n  `user_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '\u7528\u6237ID',\n  `user_name` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT '\u7528\u6237\u8d26\u53f7',\n  `nick_name` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT '\u7528\u6237\u6635\u79f0',\n  `email` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT '' COMMENT '\u7528\u6237\u90ae\u7bb1',\n  `sex` char(1) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT '0' COMMENT '\u7528\u6237\u6027\u522b\uff080\u7537 1\u5973 2\u672a\u77e5\uff09',\n  `avatar` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT '' COMMENT '\u5934\u50cf\u5730\u5740',\n  `password` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT '' COMMENT '\u5bc6\u7801',\n  `login_ip` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT '' COMMENT '\u6700\u540e\u767b\u5f55IP',\n  `login_date` datetime NULL DEFAULT NULL COMMENT '\u6700\u540e\u767b\u5f55\u65f6\u95f4',\n   `text` text CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci COMMENT '\u6d4b\u8bd5\u6587\u672c',\n  PRIMARY KEY (`user_id`) USING BTREE\n) ENGINE = InnoDB AUTO_INCREMENT = 2 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci COMMENT = '\u7528\u6237\u4fe1\u606f\u8868' ROW_FORMAT = Dynamic;\n")),(0,a.kt)("p",null,"\u6211\u8fd9\u91cc\u4f7f\u7528nodejs\uff08\u540e\u8fb9\u4f1a\u5b66\uff09\u7684\u811a\u672c\u5bfc\u5165\u4e86600\u4e07\u6761\u6570\u636e\uff0c\u7528\u6765\u6a21\u62df\uff0c\u811a\u672c\u5982\u4e0b\uff0c\u5927\u5bb6\u4e5f\u53ef\u4ee5\u5728\u6211\u4eec\u7f51\u7ad9\u81ea\u884c\u83b7\u53d6\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"// \u4f7f\u7528 Mock\nvar Mock = require('mockjs')\n// mysql8.0\u9700\u8981\u6267\u884c\u4e0b\u8fb9\u7684sql\uff0c\u5426\u5219nodejs\u4e0d\u652f\u6301\n// ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '\u81ea\u5df1\u7684\u5bc6\u7801';\nvar mysql = require('mysql');\n// \u5b9a\u4e49\u8fde\u63a5\u6c60\nconst pool = mysql.createPool({\n    host: \"127.0.0.1\", // \u4e3b\u673a\u5730\u5740\n    port: 3306,\n    database: \"ydl\", // \u6570\u636e\u5e93\u540d\u5b57\n    user: \"root\", // \u8fde\u63a5\u6570\u636e\u5e93\u7684\u7528\u6237\u540d\n    password: \"root\", // \u8fde\u63a5\u6570\u636e\u5e93\u5bc6\u7801\n    connectionLimit: 30, // \u8fde\u63a5\u6c60\u6700\u5927\u8fde\u63a5\u6570\n    multipleStatements: true // \u5141\u8bb8\u6267\u884c\u591a\u6761sql\u8bed\u53e5\n})\n\n\nfunction insert(connection) {\n    let content = '';\n    for (var i = 0; i < 100; i++) {\n        // \u4f7f\u7528mock.js\u6a21\u62df\u6570\u636e\n        var user = Mock.mock({\n            userName: Mock.mock('@name(true)'),\n            nickName: Mock.mock('@cname()'),\n            email: Mock.mock('@email()'),\n            sex: Math.random() > 0.5 ? '\u7537' : '\u5973',\n            loginIp: Mock.mock('@ip()'),\n            loginDate: Mock.mock('@datetime()'),\n            password: Mock.mock('@word(5, 10)'),\n            avatar: Mock.mock('@url()'),\n            text: Mock.mock('@cparagraph(30)'),\n        });\n\n        // \u6bcf\u6b21\u5b58\u51651000\u6761\n        let insertData = '('\n        for (key in user) {\n            insertData += '\\'' + user[key] + '\\'' + ','\n        }\n        insertData = insertData.substring(0, insertData.length - 1) + ')';\n        content += insertData + ',';\n    }\n\n    content = content.substring(0, content.length - 1);\n    let sql = `insert into user (user_name,\n        nick_name,email,sex,login_ip,login_date,password,avatar,text) values\n        ${content}`;\n    connection.query(sql);\n    connection.release();\n}\n// \u5faa\u73af60000\u4e07\u6b21\uff0c\u603b\u8ba1\u80fd\u63d2\u5165600\u4e07\u6761\nfor (let i = 0; i < 60000; i++)\n {\n    \n    pool.getConnection(function (err, connection) {\n        // \u4ee3\u7801\n        insert(connection)\n        console.log('\u7b2c'+i+'\u6761sql\u6267\u884c\u6210\u529f\uff01')\n    }) \n}\n")),(0,a.kt)("p",null,"\u5bf9\u5e94\u7684sql\u6587\u4ef6\u4e5f\u51c6\u5907\u597d\u4e86\uff0c\u6587\u4ef6\u5927\u5c0f1.18G\uff0c\u5927\u5bb6\u53ef\u4ee5\u81ea\u884c\u4e0b\u8f7d\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220429163430651-514ed3af.png",alt:"image-20220429163430651"}),"image-20220429163430651"),(0,a.kt)("p",null,"\u51c6\u5907\u5de5\u4f5c\u505a\u597d\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u6df1\u5165\u7684\u53bb\u5b66\u4e60\u8fd9\u4e9b\u77e5\u8bc6\u4e86\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"select count(*) from ydl_user;  -- 5.429\nselect * from ydl_user where user_id = 1000000; -- 0.355s\nselect * from ydl_user where user_name = 'Jennifer Susan Johnson';   -- 4.715s\n")),(0,a.kt)("h3",{id:"\u4e00\u6570\u636e\u7ed3\u6784"},"\u4e00\u3001\u6570\u636e\u7ed3\u6784"),(0,a.kt)("p",null,"\u4e00\u65b9\u9762mysql\u7684\u6570\u636e\u662f\u5b58\u50a8\u5728\u78c1\u76d8\u4e0a\u7684\uff0c\u53e6\u4e00\u65b9\u9762\u8fd8\u8981\u6ee1\u8db3\u5bf9\u65e5\u5e38\u64cd\u4f5c\u5982\u3010\u589e\u5220\u6539\u67e5\u3011\u7684\u9ad8\u6548\u7a33\u5b9a\u7684\u652f\u6301\uff0c\u6211\u4eec\u5f53\u7136\u53ef\u4ee5\u91c7\u7528\u66f4\u597d\u7684\u786c\u4ef6\u6765\u63d0\u5347\u6027\u80fd\uff0c\u4f46\u662f\u9009\u7528\u5408\u9002\u7684\u6570\u636e\u7ed3\u6784\u4e5f\u5f88\u5173\u952e\uff0cinnodb\u91c7\u7528\u7684\u662f\u4e00\u79cd\u540d\u4e3a\u3010b+\u6811\u3011\u7684\u6570\u636e\u7ed3\u6784\u3002"),(0,a.kt)("p",null,"\u6211\u4eec\u4e4b\u524d\u5df2\u7ecf\u5b66\u4e60\u8fc7innodb\u4e2d\u7684\u6570\u636e\u662f\u4ee5\u3010\u884c\u3011\u4e3a\u5355\u4f4d\uff0c\u5b58\u5728\u4e00\u4e2a\u4e2a\u5927\u5c0f\u4e3a16k\u7684\u3010\u9875\u3011\u4e2d\uff0c\u521a\u624d\u7684b+\u6811\u7684\u4f5c\u7528\u5c31\u662f\u6309\u7167\u4e00\u4e2a\u7684\u7ec4\u7ec7\u5f62\u5f0f\uff0c\u5c06\u6240\u6709\u7684\u3010\u9875\u3011\u7ec4\u7ec7\u5173\u8054\u8d77\u6765\u3002"),(0,a.kt)("h4",{id:"1b-\u6811"},"1\u3001B-\u6811"),(0,a.kt)("p",null,"\u6211\u4eec\u8981\u4e86\u89e3\u3010B+\u6811\u3011\uff0c\u9996\u5148\u8981\u4e86\u89e3\u4e00\u4e0b\u3010B-\u6811\u3011\uff0c\u8fd9\u91cc\u7684 B \u8868\u793a balance( \u5e73\u8861\u7684\u610f\u601d)\uff0cB-\u6811\u662f\u4e00\u79cd\u3010\u591a\u8def\u81ea\u5e73\u8861\u7684\u641c\u7d22\u6811\u3011\uff0c\u5b83\u7c7b\u4f3c\u666e\u901a\u7684\u5e73\u8861\u4e8c\u53c9\u6811\uff0c\u4e0d\u540c\u7684\u4e00\u70b9\u662fB-\u6811\u5141\u8bb8\u6bcf\u4e2a\u8282\u70b9\u6709\u66f4\u591a\u7684\u5b50\u8282\u70b9\u3002\u4e0b\u56fe\u662f B-\u6811\u7684\u7b80\u5316\u56fe."),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220429152229620-0c8ec149.png",alt:"image-20220429152229620"}),"image-20220429152229620"),(0,a.kt)("p",null,"B-\u6811\u6709\u5982\u4e0b\u7279\u70b9:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u6240\u6709\u952e\u503c\u5206\u5e03\u5728\u6574\u9897\u6811\u4e2d\uff1b"),(0,a.kt)("li",{parentName:"ol"},"\u4efb\u4f55\u4e00\u4e2a\u5173\u952e\u5b57\u51fa\u73b0\u4e14\u53ea\u51fa\u73b0\u5728\u4e00\u4e2a\u7ed3\u70b9\u4e2d\uff1b"),(0,a.kt)("li",{parentName:"ol"},"\u641c\u7d22\u6709\u53ef\u80fd\u5728\u975e\u53f6\u5b50\u7ed3\u70b9\u7ed3\u675f\uff1b"),(0,a.kt)("li",{parentName:"ol"},"\u5728\u5173\u952e\u5b57\u5168\u96c6\u5185\u505a\u4e00\u6b21\u67e5\u627e\uff0c\u6027\u80fd\u903c\u8fd1\u4e8c\u5206\u67e5\u627e\uff1b")),(0,a.kt)("h4",{id:"2b\u6811"},"2\u3001B+\u6811"),(0,a.kt)("p",null,"\u3010B+\u6811\u3011\u662f\u3010B-\u6811\u3011\u7684\u53d8\u4f53\uff0c\u4e5f\u662f\u4e00\u79cd\u591a\u8def\u641c\u7d22\u6811, \u5b83\u4e0e B- \u6811\u7684\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u6240\u6709\u5173\u952e\u5b57\u5b58\u50a8\u5728\u53f6\u5b50\u8282\u70b9"),(0,a.kt)("li",{parentName:"ol"},"\u4e3a\u6240\u6709\u53f6\u5b50\u7ed3\u70b9\u589e\u52a0\u4e86\u4e00\u4e2a\u53cc\u5411\u6307\u9488")),(0,a.kt)("p",null,"\u7b80\u5316 B+\u6811 \u5982\u4e0b\u56fe\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220429152436442-1eacd588.png",alt:"image-20220429152436442"}),"image-20220429152436442"),(0,a.kt)("h4",{id:"3\u9009\u578b\u7f18\u7531"},"3\u3001\u9009\u578b\u7f18\u7531"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u95ee\u9898\u4e00\uff1a\u4e3a\u4ec0\u4e48\u5728b-\u6811\u6216b+\u6811\u4e2d\u9009\u62e9\uff1f")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"mysql\u6570\u636e\u6a21\u578b\u66f4\u9002\u5408\u7528\u8fd9\u7c7b\u6570\u636e\u7ed3\u6784\uff0c\u4e00\u6761\u6570\u636e\u4e2d\u901a\u5e38\u5305\u542b\u3010id\u3011+\u3010\u5176\u4ed6\u5217\u6570\u636e\u3011\uff0c\u6211\u4eec\u53ef\u4ee5\u5f88\u8f7b\u677e\u7684\u6839\u636eid\u7ec4\u7ec7\u4e00\u9897B+\u6811\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u6211\u4eec\u77e5\u9053innodb\u4f7f\u7528\u3010\u9875\u3011\uff08\u8fd9\u662finndb\u7ba1\u7406\u6570\u636e\u7684\u6700\u5c0f\u5355\u4f4d\uff09\u4fdd\u5b58\u6570\u636e\uff0c\u4e00\u9875\uff0816k\uff09\uff0cb+\u6811\u4e2d\u7684\u6bcf\u4e2a\u8282\u70b9\u90fd\u662f\u4e00\u9875\u6570\u636e\u3002")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u95ee\u9898\u4e8c\uff1a\u4e3a\u4ec0\u4e48\u9009\u62e9B+\u6811\uff1f")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u76f8\u540c\u7684\u7a7a\u95f4\uff0c\u4e0d\u5b58\u653e\u3010\u6574\u884c\u6570\u636e\u3011\u5c31\u80fd\u5b58\u3010\u66f4\u591a\u7684id\u3011\uff0cb+\u6811\u80fd\u4f7f\u6bcf\u4e2a\u8282\u70b9\u80fd\u68c0\u7d22\u7684\u3010\u8303\u56f4\u66f4\u5927\u3001\u66f4\u7cbe\u786e\uff0c\u6781\u5927\u7684\u51cf\u5c11\u4e86I/O\u64cd\u4f5c\uff0c\u4fdd\u8bc1b+\u6811\u7684\u5c42\u9ad8\u8f83\u4f4e\uff0c\u901a\u5e383\u52304\u5c42\u7684\u5c42\u9ad8\u5c31\u80fd\u652f\u6301\u767e\u4e07\u7ea7\u522b\u7684\u8bbf\u95ee\u3011\u3002"),(0,a.kt)("li",{parentName:"ul"},"Mysql\u662f\u4e00\u79cd\u5173\u7cfb\u578b\u6570\u636e\u5e93\uff0c\u3010\u533a\u95f4\u8bbf\u95ee\u3011\u662f\u5f88\u5e38\u89c1\u7684\u4e00\u79cd\u60c5\u51b5\uff0cB+\u6811\u53f6\u8282\u70b9\u589e\u52a0\u7684\u53cc\u5411\u6307\u9488\uff0c\u52a0\u5f3a\u4e86\u533a\u95f4\u8bbf\u95ee\u6027\uff0c\u53ef\u4f7f\u7528\u5728\u8303\u56f4\u533a\u95f4\u67e5\u8be2\u7684\u60c5\u51b5\u3002")),(0,a.kt)("h4",{id:"4\u53d1\u73b0\u7d22\u5f15"},"4\u3001\u53d1\u73b0\u7d22\u5f15"),(0,a.kt)("p",null,"\u6211\u4eec\u53d1\u73b0\u5f53\u4f7f\u7528id\u53bb\u67e5\u8be2\u6570\u636e\u65f6\uff0c\u6548\u7387\u5f88\u9ad8\uff0c\u56e0\u4e3a\u4f7f\u7528id\u53ef\u4ee5\u5229\u7528B+\u6811\u7684\u7279\u6027\uff0c\u52a0\u901f\u67e5\u8be2\uff0c\u8bf7\u770b\u4ee5\u4e0b\u4e24\u6761sql\u7684\u6267\u884c\u6548\u7387\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"select * from ydl_user where id = 1                              -- \u4f7f\u7528\u65f6\u95f40.011s\nselect * from ydl_user where email = 'm.szi@xwsrnhp.pl'          -- \u4f7f\u7528\u65f6\u95f44.284s\n")),(0,a.kt)("p",null,"\u6211\u4eec\u53d1\u73b0\uff0c\u67e5\u8be2\u76f8\u540c\u7684\u8bb0\u5f55\uff0c\u4f7f\u7528\u3010id\u5217\u3011\u6bd4\u4f7f\u7528\u3010emil\u5217\u3011\u5feb\u4e86389\u500d\uff0c\u539f\u56e0\u5982\u4e0b\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4f7f\u7528id\u5217\u53ef\u4ee5\u5229\u7528B+\u6811\u7684\u7279\u6027\uff0c\u7531\u4e0a\u81ea\u4e0b\u67e5\u8be2\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u4f7f\u7528email\u5217\u53ea\u80fd\u4ece\u53f6\u5b50\u8282\u70b9\u8fdb\u884c\u3010\u5168\u8868\u626b\u63cf\u3011\uff0c\u4e00\u4e2a\u4e00\u4e2a\u7684\u6bd4\u8f83\u3002")),(0,a.kt)("p",null,"\u90a3\u4e48\u5982\u679c\u6211\u60f3\u63d0\u5347\u4f7f\u7528\u5176\u4ed6\u5b57\u6bb5\u7684\u67e5\u8be2\u6548\u7387\uff0c\u5e94\u8be5\u600e\u4e48\u505a\u5462\uff1f"),(0,a.kt)("p",null,"\u9996\u5148\uff0c\u6211\u4eec\u5e94\u8be5\u60f3\u5230\u7684\u601d\u8def\u5c31\u662f\uff0c\u6309\u7167\u8fd9\u4e2a\u903b\u8f91\u518d\u7ed9\u5176\u4ed6\u7684\u5b57\u6bb5\u4e5f\u521b\u5efa\u4e00\u4e2a\u8fd9\u6837\u7684\u7ed3\u6784\u4e0d\u5c31\u597d\u4e86\uff0c\u5982\u4e0b\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220429114638247-8094d895.png",alt:"image-20220429114638247"}),"image-20220429114638247"),(0,a.kt)("p",null,"\u4f46\u662f\u6211\u4eec\u4f1a\u53d1\u73b0\uff0c\u5982\u679c\u6211\u4eec\u4e0d\u65ad\u7684\u521b\u5efa\u7c7b\u4f3c\u7684\u7ed3\u6784\uff0c\u6570\u636e\u4f1a\u4fdd\u5b58\u5f88\u591a\u6b21\uff0c1\u4e2aG\u7684\u6570\u636e\u53ef\u4ee5\u81a8\u80c0\u4e3a5G\u751a\u81f310G\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u4f18\u5316\uff0c\u5728\u53f6\u5b50\u8282\u70b9\u4e2d\u53ea\u3010\u4fdd\u5b58id\u3011\u800c\u4e0d\u4fdd\u5b58\u5168\u90e8\u6570\u636e\uff0c\u67e5\u5230id\u540e\u518d\u3010\u56de\u8868\u3011\uff08\u56de\u5230\u539f\u6765\u7684\u7ed3\u6784\u4e2d\u6839\u636eid\u8fdb\u884c\u67e5\u8be2\uff09\u67e5\u8be2\u6574\u6761\u8bb0\u5f55\uff0c\u5176\u7ed3\u6784\u5982\u4e0b\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220429114616461-2471a114.png",alt:"image-20220429114616461"}),"image-20220429114616461"),(0,a.kt)("p",null,"\u5176\u5b9e\u8fd9\u5c31\u662f\u6211\u4eec\u65e5\u5e38\u5de5\u4f5c\u4e2d\u7ecf\u5e38\u521b\u5efa\u7684\u3010\u7d22\u5f15\u3011\u3002"),(0,a.kt)("h3",{id:"\u4e8c\u7d22\u5f15\u7684\u5206\u7c7b\u548c\u521b\u5efa"},"\u4e8c\u3001\u7d22\u5f15\u7684\u5206\u7c7b\u548c\u521b\u5efa"),(0,a.kt)("h4",{id:"1\u805a\u7c07\u7d22\u5f15\u548c\u975e\u805a\u7c07\u7d22\u5f15"},"1\u3001\u805a\u7c07\u7d22\u5f15\u548c\u975e\u805a\u7c07\u7d22\u5f15"),(0,a.kt)("p",null,"\u6211\u4eec\u5728\u4e0a\u8fb9\u7684\u4f8b\u5b50\u4e2d\uff0c\u3010\u4e3b\u952e\u548c\u6570\u636e\u3011\u5171\u5b58\u7684\u7d22\u5f15\u88ab\u79f0\u4e4b\u4e3a\u3010\u805a\u7c07\u7d22\u5f15\u3011\uff0c\u5176\u4ed6\u7684\uff0c\u6bd4\u5982\u6211\u4eec\u4f7f\u7528\u3010\u59d3\u540d\u5217+\u4e3b\u952e\u3011\u5efa\u7acb\u7684\u7d22\u5f15\uff0c\u53ef\u4ee5\u79f0\u4e3a\u3010\u975e\u805a\u7c07\u7d22\u5f15\u3011\uff0c\u6216\u8005\u3010\u8f85\u52a9\u7d22\u5f15\u3011\uff0c\u6216\u8005\u3010\u4e8c\u7ea7\u7d22\u5f15\u3011\uff0c\u540c\u65f6\u805a\u7c07\u7d22\u5f15\u53ea\u6709\u5728innodb\u5f15\u64ce\u4e2d\u624d\u5b58\u5728\uff0c\u800c\u5728myIsam\u4e2d\u662f\u4e0d\u5b58\u5728\u7684\uff0c\u5982\u4e0b\u56fe\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220513141318848-e4599efe.png",alt:"image-20220513141318848"}),"image-20220513141318848"),(0,a.kt)("p",null,"InnoDB\u4f7f\u7528\u7684\u662f\u3010\u805a\u7c07\u7d22\u5f15\u3011\uff0c\u4ed6\u4f1a\u5c06\u3010\u4e3b\u952e\u3011\u7ec4\u7ec7\u5230\u4e00\u68f5B+\u6811\u4e2d\uff0c\u800c\u3010\u884c\u6570\u636e\u3011\u5c31\u50a8\u5b58\u5728\u53f6\u5b50\u8282\u70b9\u4e0a\uff0c\u82e5\u4f7f\u7528",(0,a.kt)("inlineCode",{parentName:"p"},"where id = 14"),"\u8fd9\u6837\u7684\u6761\u4ef6\u67e5\u627e\u4e3b\u952e\uff0c\u5219\u6309\u7167B+\u6811\u7684\u68c0\u7d22\u7b97\u6cd5\u5373\u53ef\u67e5\u627e\u5230\u5bf9\u5e94\u7684\u53f6\u8282\u70b9\uff0c\u4e4b\u540e\u83b7\u5f97\u884c\u6570\u636e\u3002"),(0,a.kt)("p",null,"\u82e5\u5bf9Name\u5217\u8fdb\u884c\u6761\u4ef6\u641c\u7d22\uff0c\u4e14name\u5217\u5df2\u5efa\u7acb\u3010\u7d22\u5f15\u3011\uff0c\u5219\u9700\u8981\u4e24\u4e2a\u6b65\u9aa4\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u7b2c\u4e00\u6b65\u5728\u8f85\u52a9\u7d22\u5f15B+\u6811\u4e2d\u68c0\u7d22Name\uff0c\u5230\u8fbe\u5176\u53f6\u5b50\u8282\u70b9\u83b7\u53d6\u5bf9\u5e94\u7684\u4e3b\u952e\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u7b2c\u4e8c\u6b65\u4f7f\u7528\u4e3b\u952e\u5728\u4e3b\u7d22\u5f15B+\u6811\u79cd\u518d\u6267\u884c\u4e00\u6b21B+\u6811\u68c0\u7d22\u64cd\u4f5c\uff0c\u6700\u7ec8\u5230\u8fbe\u53f6\u5b50\u8282\u70b9\u5373\u53ef\u83b7\u53d6\u6574\u884c\u6570\u636e\u3002\uff08\u91cd\u70b9\u5728\u4e8e\u901a\u8fc7\u5176\u4ed6\u952e\u9700\u8981\u5efa\u7acb\u8f85\u52a9\u7d22\u5f15\uff09")),(0,a.kt)("p",null,"\u5982\u4e0b\u56fe\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220429171436220-e060a1c3.png",alt:"image-20220429171436220"}),"image-20220429171436220"),(0,a.kt)("p",null,"MyIsam\u4f7f\u7528\u7684\u662f\u3010\u975e\u805a\u7c07\u7d22\u5f15\u3011\uff0c\u975e\u805a\u7c07\u7d22\u5f15\u7684\u4e24\u68f5B+\u6811\u770b\u4e0a\u53bb\u6ca1\u4ec0\u4e48\u4e0d\u540c\uff0c\u8282\u70b9\u7684\u7ed3\u6784\u5b8c\u5168\u4e00\u81f4\u53ea\u662f\u5b58\u50a8\u7684\u5185\u5bb9\u4e0d\u540c\u800c\u5df2\uff0c\u4e3b\u952e\u7d22\u5f15B+\u6811\u7684\u8282\u70b9\u5b58\u50a8\u4e86\u4e3b\u952e\uff0c\u8f85\u52a9\u952e\u7d22\u5f15B+\u6811\u5b58\u50a8\u4e86\u8f85\u52a9\u5217\u3002\u8868\u6570\u636e\u5b58\u50a8\u5728\u72ec\u7acb\u7684\u5730\u65b9\uff0c\u8fd9\u4e24\u9897B+\u6811\u7684\u53f6\u5b50\u8282\u70b9\u90fd\u4f7f\u7528\u4e00\u4e2a\u3010\u5730\u5740\u6307\u5411\u771f\u6b63\u7684\u8868\u6570\u636e\u3011\uff0c\u5bf9\u4e8e\u8868\u6570\u636e\u6765\u8bf4\uff0c\u8fd9\u4e24\u4e2a\u952e\u6ca1\u6709\u4efb\u4f55\u5dee\u522b\u3002\u7531\u4e8e\u7d22\u5f15\u6811\u662f\u72ec\u7acb\u7684\uff0c\u901a\u8fc7\u8f85\u52a9\u952e\u68c0\u7d22\u65e0\u9700\u8bbf\u95ee\u4e3b\u952e\u7684\u7d22\u5f15\u6811\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"tips\uff1a")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u805a\u7c07\u7d22\u5f15\u3010\u9ed8\u8ba4\u4f7f\u7528\u4e3b\u952e\u3011\uff0c\u5982\u679c\u8868\u4e2d\u6ca1\u6709\u5b9a\u4e49\u4e3b\u952e\uff0cInnoDB \u4f1a\u9009\u62e9\u4e00\u4e2a\u3010\u552f\u4e00\u4e14\u975e\u7a7a\u3011\u7684\u5217\u4ee3\u66ff\u3002\u5982\u679c\u6ca1\u6709\u8fd9\u6837\u7684\u5217\uff0cInnoDB \u4f1a\u9690\u5f0f\u5b9a\u4e49\u4e00\u4e2a\u4e3b\u952e\u3010\u7c7b\u4f3coracle\u4e2d\u7684RowId\u3011rowid\u6765\u4f5c\u4e3a\u805a\u7c07\u7d22\u5f15\u7684\u5217\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u5982\u679c\u6d89\u53ca\u5230\u5927\u6570\u636e\u91cf\u7684\u6392\u5e8f\u3001\u5168\u8868\u626b\u63cf\u3001count\u4e4b\u7c7b\u7684\u64cd\u4f5c\u7684\u8bdd\uff0c\u8fd8\u662fMyIsam\u5360\u4f18\u52bf\u4e9b\uff0c\u56e0\u4e3a\u7d22\u5f15\u6240\u5360\u7a7a\u95f4\u5c0f\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u662f\u9700\u8981\u5728\u5185\u5b58\u4e2d\u5b8c\u6210\u7684\u3002")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u5c0f\u95ee\u9898\uff1a\u4e3b\u952e\u4e3a\u4ec0\u4e48\u5efa\u8bae\u4f7f\u7528\u81ea\u589eid?")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4e3b\u952e\u6700\u597d\u4e0d\u8981\u4f7f\u7528uuid\uff0c\u56e0\u4e3auuid\u7684\u503c\u592a\u8fc7\u79bb\u6563\uff0c\u4e0d\u9002\u5408\u6392\u5e8f\u4e14\u53ef\u80fd\u51fa\u73b0\u65b0\u589e\u52a0\u8bb0\u5f55\u7684uuid\uff0c\u4f1a\u63d2\u5165\u5728\u7d22\u5f15\u6811\u4e2d\u95f4\u7684\u4f4d\u7f6e\uff0c\u51fa\u73b0\u9875\u5206\u88c2\uff0c\u5bfc\u81f4\u7d22\u5f15\u6811\u8c03\u6574\u590d\u6742\u5ea6\u53d8\u5927\uff0c\u6d88\u8017\u66f4\u591a\u7684\u65f6\u95f4\u548c\u8d44\u6e90\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u805a\u7c07\u7d22\u5f15\u7684\u6570\u636e\u7684\u7269\u7406\u5b58\u653e\u987a\u5e8f\u4e0e\u7d22\u5f15\u987a\u5e8f\u662f\u4e00\u81f4\u7684\uff0c\u5373\uff1a\u53ea\u8981\u7d22\u5f15\u662f\u76f8\u90bb\u7684\uff0c\u90a3\u4e48\u5bf9\u5e94\u7684\u6570\u636e\u4e00\u5b9a\u4e5f\u662f\u76f8\u90bb\u5730\u5b58\u653e\u5728\u78c1\u76d8\u4e0a\u7684\u3002\u5982\u679c\u4e3b\u952e\u4e0d\u662f\u81ea\u589eid\uff0c\u5b83\u4f1a\u4e0d\u65ad\u5730\u8c03\u6574\u6570\u636e\u7684\u7269\u7406\u5730\u5740\u3001\u5206\u9875\uff0c\u5f53\u7136\u4e5f\u6709\u5176\u4ed6\u4e00\u4e9b\u63aa\u65bd\u6765\u51cf\u5c11\u8fd9\u4e9b\u64cd\u4f5c\uff0c\u4f46\u5374\u65e0\u6cd5\u5f7b\u5e95\u907f\u514d\u3002\u4f46\u5982\u679c\u662f\u81ea\u589e\u7684id\uff0c\u5b83\u53ea\u9700\u8981\u4e00 \u9875\u4e00\u9875\u5730\u5199\uff0c\u7d22\u5f15\u7ed3\u6784\u76f8\u5bf9\u7d27\u51d1\uff0c\u78c1\u76d8\u788e\u7247\u5c11\uff0c\u6548\u7387\u4e5f\u9ad8\u3002")),(0,a.kt)("p",null,"\u672c\u7ae0\u8282\u4e2d\u8bb2\u8ff0\u4e86\u805a\u7c07\u7d22\u5f15\u548c\u4e8c\u7ea7\u952e\u7d22\u5f15\uff0c\u5bf9\u4e8e\u3010\u4e8c\u7ea7\u7d22\u5f15\u3011\u800c\u8a00\uff0c\u6839\u636e\u5176\u4e0d\u540c\u7684\u7279\u6027\uff0c\u6211\u4eec\u53c8\u53ef\u4ee5\u5206\u4e3a\u666e\u901a\u7d22\u5f15\u3001\u552f\u4e00\u7d22\u5f15\u3001\u590d\u5408\u7d22\u5f15\u7b49\uff0c\u63a5\u4e0b\u6765\u4f1a\u4e00\u4e00\u8bb2\u89e3\u3002"),(0,a.kt)("h4",{id:"2\u666e\u901a\u7d22\u5f15-\u5e38\u89c4\u7d22\u5f15normal"},"2\u3001\u666e\u901a\u7d22\u5f15 \uff08\u5e38\u89c4\u7d22\u5f15\uff09(normal)"),(0,a.kt)("p",null,"\u5c31\u662f\u666e\u666e\u901a\u901a\u7684\u7d22\u5f15\uff0c\u6ca1\u6709\u4ec0\u4e48\u7279\u6b8a\u8981\u6c42\uff0c\u7406\u8bba\u4e0a\u4efb\u4f55\u5217\u90fd\u53ef\u4ee5\u5f53\u505a\u666e\u901a\u7d22\u5f15\uff0c\u521b\u5efa\u65b9\u5f0f\u5982\u4e0b\uff1a"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e00\u6b65\uff1a"),"\u521b\u5efa\u7d22\u5f15\u524d\u5148\u6267\u884c\u4e0b\u5217\u8bed\u53e5\uff0c\u89c2\u5bdf\u6267\u884c\u65f6\u95f4\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"select * from user where user_name ='Dorothy William Harris';  -- \u6574\u4e2a\u6267\u884c\u65f6\u95f4\u4e3a4.297s\n")),(0,a.kt)("p",null,"\u7b2c\u4e8c\u6b65\uff1a\u521b\u5efauser_name\u5217\u7684\u7d22\u5f15\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"create index idx_user_name on user(user_name);   -- \u6574\u4e2a\u7d22\u5f15\u521b\u5efa\u65f6\u95f4\u4e3a24.502s\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u7ed3\u8bba\uff1a"),"\u521b\u5efa\u7d22\u5f15\u662f\u4e00\u4e2a\u5f88\u8d39\u65f6\u95f4\u7684\u64cd\u4f5c\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e09\u6b65\uff1a"),"\u518d\u6b21\u6267\u884c\u4e0b\u5217\u8bed\u53e5"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"select * from ydl_user where user_name ='Dorothy William Harris';   -- \u6267\u884c\u65f6\u95f40.031s\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u7ed3\u8bba\uff1a"),"\u521b\u5efa\u7d22\u5f15\u540e\uff0c\u6211\u4eec\u7684\u6267\u884c\u6548\u7387\u63d0\u5347\u4e86138\u500d\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u56db\u90e8\uff1a"),"\u5220\u9664\u7d22\u5f15"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"drop index idx_user_name on ydl_user; \n")),(0,a.kt)("p",null,"\u5176\u4ed6\u521b\u5efa\u7d22\u5f15\u7684\u65b9\u6cd5\uff0c\u5982\u4e0b\uff1a"),(0,a.kt)("p",null,"\uff081\uff09\u521b\u5efaemail\u5217\u7684\u7d22\u5f15\uff0c\u7d22\u5f15\u53ef\u4ee5\u622a\u53d6length\u957f\u5ea6\uff0c\u53ea\u4f7f\u7528\u8fd9\u4e00\u5217\u7684\u524d\u51e0\u4e2a\u5b57\u7b26"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"create index idx_email on user(email(5));     --\u6267\u884c\u65f6\u95f416.174s\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u91cd\u70b9\uff1a")),(0,a.kt)("p",null,"\u6709\u7684\u5217\u3010\u6570\u636e\u91cf\u6bd4\u8f83\u5927\u3011\uff0c\u4f7f\u7528\u524d\u51e0\u4e2a\u5b57\u7b26\u5c31\u80fd\u3010\u5f88\u5feb\u6807\u8bc6\u3011\u51fa\u6765\u4e00\u884c\u6570\u636e\uff0c\u90a3\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u5efa\u7acb\u7d22\u5f15\uff0c\u6bd4\u5982\u6211\u4eec\u7684\u90ae\u7bb1\uff0c\u90ae\u7bb1\u5f88\u591a\u540e\u7f00\u662f\u76f8\u540c\u7684\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u5ffd\u7565\u3002"),(0,a.kt)("p",null,"\uff082\uff09\u4f7f\u7528\u4fee\u6539\u8868\u7684\u65b9\u5f0f\u6dfb\u52a0\u7d22\u5f15"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"alter table user add index idx_email (email);\n")),(0,a.kt)("p",null,"\uff083\uff09\u5efa\u8868\u65f6\u65f6\uff0c\u540c\u65f6\u521b\u5efa\u7d22\u5f15"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"create table tbl_name(\n    tid int,\n    tname varchar(20),\n    gender varchar(1),\n    index [indexName] (fieldName(length))\n)\n")),(0,a.kt)("h4",{id:"3\u552f\u4e00\u7d22\u5f15unique-"},"3\u3001\u552f\u4e00\u7d22\u5f15\uff08UNIQUE \uff09"),(0,a.kt)("p",null,"\u5bf9\u5217\u7684\u8981\u6c42\uff1a\u7d22\u5f15\u5217\u7684\u503c\u4e0d\u80fd\u91cd\u590d"),(0,a.kt)("p",null,"\u521b\u5efa\u8868\u7684\u540c\u65f6\uff0c\u521b\u5efa\u7d22\u5f15\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"create table tbl_name(\n    tid int,\n    tname varchar(20),\n    gender varchar(1),\n    unique index unique_index_tname (tname)\n)\n")),(0,a.kt)("p",null,"\u72ec\u7acb\u7684sql\u8bed\u53e5\u521b\u5efa\u7d22\u5f15\uff0c\u6211\u4eec\u7684\u90ae\u7bb1\uff0c\u7528\u6237\u540d\u5c31\u5e94\u8be5\u521b\u5efa\u552f\u4e00\u7d22\u5f15\uff0c\u59d3\u540d\u5c31\u5e94\u8be5\u662f\u666e\u901a\u7d22\u5f15\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"create unique index idx_email on user(email);\n")),(0,a.kt)("p",null,"\u901a\u8fc7alter\u8bed\u53e5\u6dfb\u52a0\u7d22\u5f15\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"ALTER table mytable ADD UNIQUE [ux_indexName] (username(length))\n")),(0,a.kt)("p",null,"\u552f\u4e00\u7d22\u5f15\u548c\u4e3b\u952e\u7684\u533a\u522b\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u552f\u4e00\u7d22\u5f15\u5217\u5141\u8bb8\u7a7a\u503c\uff0c\u800c\u4e3b\u952e\u5217\u4e0d\u5141\u8bb8\u4e3a\u7a7a\u503c\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u4e3b\u952e\u5217\u5728\u521b\u5efa\u65f6\uff0c\u5df2\u7ecf\u9ed8\u8ba4\u4e3a\u975e\u7a7a\u503c + \u552f\u4e00\u7d22\u5f15\u4e86\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u4e3b\u952e\u53ef\u4ee5\u88ab\u5176\u4ed6\u8868\u5f15\u7528\u4e3a\u5916\u952e\uff0c\u800c\u552f\u4e00\u7d22\u5f15\u4e0d\u80fd\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u4e00\u4e2a\u8868\u6700\u591a\u53ea\u80fd\u521b\u5efa\u4e00\u4e2a\u4e3b\u952e\uff0c\u4f46\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u552f\u4e00\u7d22\u5f15\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u4e3b\u952e\u66f4\u9002\u5408\u90a3\u4e9b\u4e0d\u5bb9\u6613\u66f4\u6539\u7684\u552f\u4e00\u6807\u8bc6\uff0c\u5982\u81ea\u52a8\u9012\u589e\u5217\u3001\u8eab\u4efd\u8bc1\u53f7\u7b49\u3002")),(0,a.kt)("p",null,"\u552f\u4e00\u7ea6\u675f\u548c\u552f\u4e00\u7d22\u5f15\u7684\u533a\u522b\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u552f\u4e00\u7ea6\u675f\u548c\u552f\u4e00\u7d22\u5f15\uff0c\u90fd\u53ef\u4ee5\u5b9e\u73b0\u5217\u6570\u636e\u7684\u552f\u4e00\uff0c\u5217\u503c\u53ef\u4ee5\u4e3anull\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u521b\u5efa\u552f\u4e00\u7ea6\u675f\uff0c\u4f1a\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a\u540c\u540d\u7684\u552f\u4e00\u7d22\u5f15\uff0c\u8be5\u7d22\u5f15\u4e0d\u80fd\u5355\u72ec\u5220\u9664\uff0c\u5220\u9664\u7ea6\u675f\u4f1a\u81ea\u52a8\u5220\u9664\u7d22\u5f15\u3002\u552f\u4e00\u7ea6\u675f\u662f\u901a\u8fc7\u552f\u4e00\u7d22\u5f15\u6765\u5b9e\u73b0\u6570\u636e\u552f\u4e00\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u521b\u5efa\u4e00\u4e2a\u552f\u4e00\u7d22\u5f15\uff0c\u8fd9\u4e2a\u7d22\u5f15\u5c31\u662f\u72ec\u7acb\u7684\u7d22\u5f15\uff0c\u53ef\u4ee5\u5355\u72ec\u5220\u9664\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u5982\u679c\u4e00\u4e2a\u5217\u4e0a\u60f3\u6709\u7ea6\u675f\u548c\u7d22\u5f15\uff0c\u4e14\u4e24\u8005\u53ef\u4ee5\u5355\u72ec\u7684\u5220\u9664\u3002\u53ef\u4ee5\u5148\u5efa\u552f\u4e00\u7d22\u5f15\uff0c\u518d\u5efa\u540c\u540d\u7684\u552f\u4e00\u7ea6\u675f\u3002")),(0,a.kt)("h4",{id:"4\u591a\u4e2a\u4e8c\u7ea7\u7d22\u5f15\u7684\u7ec4\u5408\u4f7f\u7528"},"4\u3001\u591a\u4e2a\u4e8c\u7ea7\u7d22\u5f15\u7684\u7ec4\u5408\u4f7f\u7528"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u8bb0\u4f4f\u4e00\u70b9"),"\uff1amysql\u5728\u6267\u884c\u67e5\u8be2\u8bed\u53e5\u7684\u65f6\u5019\u4e00\u822c\u53ea\u4f1a\u4f7f\u7528\u3010\u4e00\u4e2a\u7d22\u5f15\u3011\uff0c\u9664\u975e\u662f\u4f7f\u3010\u7528or\u8fde\u63a5\u7684\u4e24\u4e2a\u7d22\u5f15\u5217\u3011\u4f1a\u4ea7\u751f\u7d22\u5f15\u5408\u5e76\u3002"),(0,a.kt)("p",null,"\u6211\u4eec\u9488\u5bf9\u67d0\u7535\u5546\u5e73\u53f0\u7684\u68c0\u7d22\u529f\u80fd\u505a\u4e86\u4f18\u5316\uff0c\u6dfb\u52a0\u4e86\u4e09\u4e2a\u7d22\u5f15\uff0c\u4e09\u4e2a\u5b57\u6bb5\u5206\u522b\u4e3a\u3010\u54c1\u724c\u3011\u3001\u3010\u4ef7\u683c\u3011\u3001\u3010\u9500\u91cf\u3011\u8fd9\u4e09\u4e2a\u7684\u7d22\u5f15\u7ed3\u6784\u5982\u4e0b:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff081\uff09\u54c1\u724c\u7684\u7d22\u5f15\u7ed3\u6784\uff1a")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220517162932935-819a308c.png",alt:"image-20220517162932935"}),"image-20220517162932935"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff082\uff09\u4ef7\u683c\u7684\u7d22\u5f15\u7ed3\u6784\uff1a")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220516145308003-e5328734.png",alt:"image-20220516145308003"}),"image-20220516145308003"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff083\uff09\u9500\u91cf\u7684\u7d22\u5f15\u7ed3\u6784\uff1a")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220516145354413-ca508ef0.png",alt:"image-20220516145354413"}),"image-20220516145354413"),(0,a.kt)("p",null,"\u9488\u5bf9\u4ee5\u4e0a\u7684\u7d22\u5f15\u6211\u4eec\u8fdb\u884c\u5982\u4e0b\u7684\u67e5\u8be2\uff0c\u5206\u6790\u68c0\u7d22\u8fc7\u7a0b\uff1a"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u6211\u4eec\u8981\u68c0\u7d22\u54c1\u724c\u4e3a\u963f\u739b\u5c3c\uff08Armani\uff09\u7684\u5305\u5305"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e00\u6b65\uff1a"),"\u901a\u8fc7\u3010\u54c1\u724c\u7d22\u5f15\u3011\u68c0\u7d22\u51fa\u6240\u6709\u963f\u739b\u5c3c\u7684\u5546\u54c1id\uff0c\u56de\u8868\u67e5\u8be2\uff0c\u5f97\u5230\u7ed3\u679c\u3002"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7ed3\u8bba\uff1a"),"\u4f1a\u4f7f\u7528\u4e00\u4e2a\u7d22\u5f15\u3002")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u6211\u4eec\u8981\u68c0\u7d22\u540d\u79f0\u4e3a\u963f\u739b\u5c3c\uff08Armani\uff09\uff0c\u4ef7\u683c\u57281\u4e07\u52303\u4e07\u4e4b\u95f4\u7684\u5305\u5305"),(0,a.kt)("p",{parentName:"li"},"\u67e5\u8be2\u7684\u6b65\u9aa4\u5982\u4e0b\uff1a"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e00\u6b65\uff1a"),"\u901a\u8fc7\u3010\u54c1\u724c\u7d22\u5f15\u3011\u68c0\u7d22\u51fa\u6240\u6709\u963f\u739b\u5c3c\u7684\u5546\u54c1id\u3002"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e8c\u6b65\uff1a"),"\u76f4\u63a5\u56de\u8868\u626b\u63cf\uff0c\u6839\u636e\u5269\u4f59\u6761\u4ef6\u68c0\u7d22\u7ed3\u679c\u3002"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7ed3\u8bba\uff1a"),"\u53ea\u4f1a\u4f7f\u7528\u7b2c\u4e00\u4e2a\u7d22\u5f15\u3002")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u6211\u4eec\u8981\u68c0\u7d22\u540d\u79f0\u4e3a\u963f\u739b\u5c3c\uff08Armani\uff09\uff0c\u4ef7\u683c\u4e3a26800\uff0c\u4e14\u9500\u91cf\u572850\u4ee5\u4e0a\u7684\u5305\u5305"),(0,a.kt)("p",{parentName:"li"},"\u67e5\u8be2\u7684\u6b65\u9aa4\u5982\u4e0b\uff1a"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e00\u6b65\uff1a"),"\u901a\u8fc7\u3010\u54c1\u724c\u7d22\u5f15\u3011\u68c0\u7d22\u51fa\u6240\u6709\u963f\u739b\u5c3c\u7684\u5546\u54c1id\uff0c\u8fdb\u884c\u7f13\u5b58\u3002"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e8c\u6b65\uff1a"),"\u76f4\u63a5\u56de\u8868\u626b\u63cf\uff0c\u6839\u636e\u5269\u4f59\u6761\u4ef6\u68c0\u7d22\u7ed3\u679c\u3002"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7ed3\u8bba\uff1a"),"\u53ea\u4f1a\u4f7f\u7528\u7b2c\u4e00\u4e2a\u7d22\u5f15\u3002")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u6211\u4eec\u8981\u68c0\u7d22\u540d\u79f0\u4e3a\u963f\u739b\u5c3c\uff08Armani\uff09\u6216\u540d\u79f0\u4e3aLV\u7684\u5305\u5305"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e00\u6b65\uff1a"),"\u901a\u8fc7\u3010\u54c1\u724c\u7d22\u5f15\u3011\u68c0\u7d22\u51fa\u6240\u6709\u963f\u739b\u5c3c\u7684\u5546\u54c1id\uff0c\u5f97\u5230\u7ed3\u679c\u3002"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7ed3\u8bba\uff1a"),"\u6211\u4eec\u7ecf\u5e38\u542c\u8bf4\uff0c\u6709or\u7d22\u5f15\u4f1a\u5931\u6548\uff0c\u4f46\u662f\u50cf\u8fd9\u6837\u7684\u3010type =\u2018Armani\u2019 or type = \u2018LV\u2019\u3011\u5e76\u4e0d\u4f1a\uff0c\u4ed6\u76f8\u5f53\u4e8e\u4e00\u4e2ain\u5173\u952e\u5b57\uff0c\u4f1a\u4f7f\u7528\u4e00\u4e2a\u7d22\u5f15\u3002")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u6211\u4eec\u8981\u68c0\u7d22\u540d\u79f0\u4e3a\u963f\u739b\u5c3c\uff08Armani\uff09\u6216\u4ef7\u683c\u5927\u4e8e8000\u7684\u5305\u5305"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e00\u6b65\uff1a"),"\u901a\u8fc7\u3010\u54c1\u724c\u7d22\u5f15\u3011\u68c0\u7d22\u51fa\u6240\u6709\u963f\u739b\u5c3c\u7684\u5546\u54c1id\uff0c\u8fdb\u884c\u7f13\u5b58\u3002"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e8c\u6b65\uff1a"),"\u901a\u8fc7\u3010\u4ef7\u683c\u7d22\u5f15\u3011\u68c0\u7d22\u51fa\u4ef7\u683c\u57285\u4e07\u52307\u4e07\u4e4b\u95f4\u7684\u5546\u54c1id\uff0c\u8fd9\u662f\u4e00\u4e2a\u8fde\u63a5\u6761\u4ef6\u5e26\u6709\u3010or\u7684\u67e5\u8be2\u3011\uff0c\u6240\u4ee5\u9700\u8981\u548c\u4e0a\u4e00\u6b65\u7684\u7ed3\u679c\u8fdb\u884c\u3010\u5e76\u96c6\u3011\uff0c\u5f97\u5230\u7ed3\u679c\u3002"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7ed3\u8bba\uff1a"),"\u8fd9\u4e2a\u8fc7\u7a0b\u53eb\u3010\u7d22\u5f15\u5408\u5e76\u3011\u5f53\u68c0\u7d22\u6761\u4ef6\u6709or\u4f46\u662f\u6240\u6709\u7684\u6761\u4ef6\u90fd\u6709\u7d22\u5f15\u65f6\uff0c\u7d22\u5f15\u4e0d\u5931\u6548\uff0c\u53ef\u4ee5\u8d70\u3010\u4e24\u4e2a\u7d22\u5f15\u3011\u3002")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u6211\u4eec\u8981\u68c0\u7d22\u540d\u79f0\u4e3a\u963f\u739b\u5c3c\uff08Armani\uff09\uff0c\u4e14\u4ef7\u683c\u5927\u4e8e8000\uff0c\u4e14\u3010\u4ea7\u5730\uff08\u8be5\u5217\u65e0\u7d22\u5f15\uff09\u3011\u5728\u5317\u4eac\u7684\u5305\u5305"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e00\u6b65\uff1a"),"\u901a\u8fc7\u3010\u54c1\u724c\u7d22\u5f15\u3011\u68c0\u7d22\u51fa\u6240\u6709\u963f\u739b\u5c3c\u7684\u5546\u54c1id\u3002"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e8c\u6b65\uff1a"),"\u76f4\u63a5\u56de\u8868\u626b\u63cf\uff0c\u6839\u636e\u5269\u4f59\u6761\u4ef6\u68c0\u7d22\u7ed3\u679c\u3002"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7ed3\u8bba\uff1a"),"\u53ea\u4f1a\u4f7f\u7528\u7b2c\u4e00\u4e2a\u7d22\u5f15\u3002")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u6211\u4eec\u8981\u68c0\u7d22\u540d\u79f0\u4e3a\u963f\u739b\u5c3c\uff08Armani\uff09\u6216\u4ef7\u683c\u5927\u4e8e8000\uff0c\u6216\u3010\u4ea7\u5730\uff08\u8be5\u5217\u65e0\u7d22\u5f15\uff09\u3011\u5728\u5317\u4eac\u7684\u5305\u5305"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e00\u6b65\uff1a"),"\u4f18\u5316\u5668\u53d1\u73b0\u3010\u4ea7\u5730\u5217\u3011\u65e0\u7d22\u5f15\uff0c\u540c\u65f6\u8fde\u63a5\u7684\u903b\u8f91\u662f\u3010or\u3011\u6ca1\u6709\u529e\u6cd5\u5229\u7528\u3010\u7d22\u5f15\u3011\u4f18\u5316\uff0c\u53ea\u80fd\u5168\u8868\u626b\u63cf\uff0c\u7d22\u5f15\u5931\u6548\u3002"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7ed3\u8bba\uff1a"),"\u53d1\u751f\u5168\u8868\u626b\u63cf\uff0c\u7d22\u5f15\u5931\u6548\uff0c\u6761\u4ef6\u4e2d\u6709\u6ca1\u5efa\u7acb\u7d22\u5f15\u7684\u5217\uff0c\u540c\u65f6\u5173\u8054\u6761\u4ef6\u662for\u3002"))),(0,a.kt)("h4",{id:"5\u590d\u5408\u7d22\u5f15\u8054\u5408\u7d22\u5f15\u91cd\u8981"},"5\u3001\u590d\u5408\u7d22\u5f15\uff08\u8054\u5408\u7d22\u5f15\uff09\u91cd\u8981"),(0,a.kt)("p",null,"\u5f53\u3010\u67e5\u8be2\u8bed\u53e5\u3011\u4e2d\u5305\u542b\u3010\u591a\u4e2a\u67e5\u8be2\u6761\u4ef6\uff0c\u4e14\u67e5\u8be2\u7684\u987a\u5e8f\u57fa\u672c\u4fdd\u6301\u4e00\u81f4\u3011\u65f6\uff0c\u6211\u4eec\u63a8\u8350\u4f7f\u7528\u590d\u5408\u7d22\u5f15\uff0c\u7d22\u5f15\u7684\u3010\u7ec4\u5408\u4f7f\u7528\u3011\u6548\u7387\u662f\u4f4e\u4e8e\u3010\u590d\u5408\u7d22\u5f15\u3011\u7684\u3002"),(0,a.kt)("p",null,"\u6bd4\u5982\uff1a\u6211\u4eec\u7ecf\u5e38\u6309\u7167A\u5217\u3001B\u5217\u3001C\u5217\u8fdb\u884c\u67e5\u8be2\u65f6\uff0c\u901a\u5e38\u7684\u505a\u6cd5\u662f\u5efa\u7acb\u4e00\u4e2a\u7531\u4e09\u4e2a\u5217\u5171\u540c\u7ec4\u6210\u7684\u3010\u590d\u5408\u7d22\u5f15\u3011\u800c\u4e0d\u662f\u5bf9\u6bcf\u4e00\u4e2a\u5217\u5efa\u7acb\u3010\u666e\u901a\u7d22\u5f15\u3011\u3002"),(0,a.kt)("p",null,"\u521b\u5efa\u8054\u5408\u7d22\u5f15\u7684\u65b9\u5f0f\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"alert table test add idx_a1_a2_a3 table (a1,a2,a3) \n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"-- 28.531s\ncreate index idx_user_nick_name on ydl_user(user_name,nick_name,email(7));\n")),(0,a.kt)("p",null,"\u590d\u5408\u7d22\u5f15\u7684\u7ed3\u6784\u5982\u4e0b\uff0c\u590d\u5408\u7d22\u5f15\u4f1a\u4f18\u5148\u6309\u7167\u7b2c\u4e00\u5217\u6392\u5e8f\uff0c\u7b2c\u4e00\u5217\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\u4f1a\u6309\u7167\u7b2c\u4e8c\u5217\u6392\u5e8f\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff0c\u5982\u4e0b\u56fe\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220516130601156-241ed88b.png",alt:"image-20220516130601156"}),"image-20220516130601156"),(0,a.kt)("p",null,"\u6211\u4eec\u4e0d\u59a8\u628a\u4e0a\u8fb9\u7684\u56fe\uff0c\u8f6c\u5316\u4e3a\u4e0b\u8fb9\u7684\u8868\u683c\uff0c\u770b\u8d77\u6765\u4f1a\u597d\u4e00\u4e9b\uff1a"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"\u54c1\u724c"),(0,a.kt)("th",{parentName:"tr",align:null},"\u4ef7\u683c"),(0,a.kt)("th",{parentName:"tr",align:null},"\u9500\u91cf"),(0,a.kt)("th",{parentName:"tr",align:null},"id"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Armani"),(0,a.kt)("td",{parentName:"tr",align:null},"16800"),(0,a.kt)("td",{parentName:"tr",align:null},"35"),(0,a.kt)("td",{parentName:"tr",align:null},"13,24,76")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Armani"),(0,a.kt)("td",{parentName:"tr",align:null},"26800"),(0,a.kt)("td",{parentName:"tr",align:null},"35"),(0,a.kt)("td",{parentName:"tr",align:null},"12,14,16")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Armani"),(0,a.kt)("td",{parentName:"tr",align:null},"26800"),(0,a.kt)("td",{parentName:"tr",align:null},"100"),(0,a.kt)("td",{parentName:"tr",align:null},"34,56,17")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Armani"),(0,a.kt)("td",{parentName:"tr",align:null},"68888"),(0,a.kt)("td",{parentName:"tr",align:null},"15"),(0,a.kt)("td",{parentName:"tr",align:null},"1,4,5,6,7")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"GUCCI"),(0,a.kt)("td",{parentName:"tr",align:null},"8999"),(0,a.kt)("td",{parentName:"tr",align:null},"135"),(0,a.kt)("td",{parentName:"tr",align:null},"78,92")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"LV"),(0,a.kt)("td",{parentName:"tr",align:null},"9999"),(0,a.kt)("td",{parentName:"tr",align:null},"326"),(0,a.kt)("td",{parentName:"tr",align:null},"55,63")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"LV"),(0,a.kt)("td",{parentName:"tr",align:null},"12888"),(0,a.kt)("td",{parentName:"tr",align:null},"99"),(0,a.kt)("td",{parentName:"tr",align:null},"57,99")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"LV"),(0,a.kt)("td",{parentName:"tr",align:null},"42888"),(0,a.kt)("td",{parentName:"tr",align:null},"69"),(0,a.kt)("td",{parentName:"tr",align:null},"11,22")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"PRADA"),(0,a.kt)("td",{parentName:"tr",align:null},"9588"),(0,a.kt)("td",{parentName:"tr",align:null},"125"),(0,a.kt)("td",{parentName:"tr",align:null},"111,202")))),(0,a.kt)("p",null,"\u8ba4\u771f\u9605\u8bfb\u4e86\u4e0a\u8fb9\u7684\u4ecb\u7ecd\u548c\u56fe\u5f62\uff0c\u6211\u4eec\u518d\u6b21\u601d\u8003\u4ee5\u4e0b\u51e0\u4e2a\u95ee\u9898\uff1a"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u6211\u4eec\u8981\u68c0\u7d22\u540d\u79f0\u4e3a\u963f\u739b\u5c3c\uff08Armani\uff09\u7684\u5305\u5305"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e00\u6b65\uff1a"),"\u901a\u8fc7\u3010\u54c1\u724c\u7d22\u5f15\u3011\u68c0\u7d22\u51fa\u6240\u6709\u963f\u739b\u5c3c\u7684\u5546\u54c1id\uff0c\u56de\u8868\u67e5\u8be2\uff0c\u5f97\u5230\u7ed3\u679c\u3002"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7ed3\u8bba\uff1a"),"\u4f1a\u4f7f\u7528\u7b2c\u4e00\u90e8\u5206\u7d22\u5f15\u3002")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u6211\u4eec\u8981\u68c0\u7d22\u540d\u79f0\u4e3a\u963f\u739b\u5c3c\uff08Armani\uff09\uff0c\u4ef7\u683c\u57281\u4e07\u52303\u4e07\u4e4b\u95f4\u7684\u5305\u5305"),(0,a.kt)("p",{parentName:"li"},"\u67e5\u8be2\u7684\u6b65\u9aa4\u5982\u4e0b\uff1a"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e00\u6b65\uff1a"),"\u901a\u8fc7\u3010\u54c1\u724c\u7d22\u5f15\u3011\u68c0\u7d22\u51fa\u6240\u6709\u963f\u739b\u5c3c\u7684\u53f6\u5b50\u8282\u70b9\u3002"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e8c\u6b65\uff1a"),"\u5728\u3010\u6ee1\u8db3\u4e0a\u4e00\u6b65\u6761\u4ef6\u7684\u53f6\u5b50\u8282\u70b9\u4e2d\u3011\u67e5\u8be2\u4ef7\u683c\u57281\u4e07\u52303\u4e07\u4e4b\u95f4\u7684\u5305\u5305\u7684\u5217\uff0c\u67e5\u8be2\u51fa\u5bf9\u5e94\u7684id\uff0c\u56de\u8868\u67e5\u8be2\u5217\u6570\u636e\u3002"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7ed3\u8bba\uff1a"),"\u4f1a\u4f7f\u7528\u590d\u5408\u7d22\u5f15\u7684\u4e24\u4e2a\u90e8\u5206\u3002")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u6211\u4eec\u8981\u68c0\u7d22\u540d\u79f0\u4e3a\u963f\u739b\u5c3c\uff08Armani\uff09\u6216\u4ef7\u683c\u5927\u4e8e8000\u7684\u5305\u5305"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e00\u6b65\uff1a"),"\u4f18\u5316\u5668\u53d1\u73b0\u6211\u4eec\u5e76\u6ca1\u6709\u4e00\u4e2a\u3010\u4ef7\u683c\u5217\u3011\u7684\u5355\u72ec\u7684\u4e8c\u7ea7\u7d22\u5f15\uff0c\u6b64\u65f6\u8981\u67e5\u8be2\u4ef7\u683c\u5927\u4e8e8000\u7684\u5305\uff0c\u5fc5\u987b\u8fdb\u884c\u5168\u8868\u626b\u63cf\u3002"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7ed3\u8bba\uff1a"),"\u4f46\u51e1\u67e5\u8be2\u7684\u6761\u4ef6\u4e2d\u6ca1\u6709\u3010\u590d\u5408\u7d22\u5f15\u7684\u7b2c\u4e00\u90e8\u5206\u3011\uff0c\u7d22\u5f15\u76f4\u63a5\u3010\u5931\u6548\u3011\uff0c\u5168\u8868\u626b\u63cf\u3002")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u6211\u4eec\u8981\u68c0\u7d22\u540d\u79f0\u4e3a\u963f\u739b\u5c3c\uff08Armani\uff09\uff0c\u4e14\u4ef7\u683c\u5927\u4e8e8000\uff0c\u4e14\u3010\u4ea7\u5730\uff08\u8be5\u5217\u65e0\u7d22\u5f15\uff09\u3011\u5728\u5317\u4eac\u7684\u5305\u5305"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e00\u6b65\uff1a"),"\u901a\u8fc7\u3010\u54c1\u724c\u7d22\u5f15\u3011\u68c0\u7d22\u51fa\u6240\u6709\u963f\u739b\u5c3c\u7684\u53f6\u5b50\u8282\u70b9\u3002"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e8c\u6b65\uff1a"),"\u5728\u3010\u6ee1\u8db3\u4e0a\u4e00\u6b65\u6761\u4ef6\u7684\u53f6\u5b50\u8282\u70b9\u4e2d\u3011\u67e5\u8be2\u4ef7\u683c\u5927\u4e8e8000\u5143\u7684\u5305\u5305\u7684\u53f6\u5b50\u8282\u70b9\u3002"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e09\u6b65\uff1a"),"\u56e0\u4e3a\u3010\u4ea7\u5730\u5217\u3011\u65e0\u7d22\u5f15\uff0c\u4f46\u662f\u662f\u3010and\u3011\u7684\u5173\u7cfb\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5c06\u4e0a\u4e00\u6b65\u5f97\u5230\u7684\u7ed3\u679c\u56de\u8868\u67e5\u8be2\uff0c\u5728\u8fd9\u4e2a\u5f88\u5c0f\u7684\u8303\u56f4\u5185\uff0c\u68c0\u7d22\u4ea7\u5730\u662f\u4e0d\u662f\u5317\u4eac\u5373\u53ef\u3002"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7ed3\u8bba\uff1a"),"\u53ef\u4ee5\u4f7f\u7528\u590d\u5408\u7d22\u5f15\u7684\u4e24\u4e2a\u90e8\u5206\u3002")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u6211\u4eec\u8981\u68c0\u7d22\u540d\u79f0\u4e3a\u963f\u739b\u5c3c\uff08Armani\uff09\u548cLV\u4e4b\u95f4\uff0c\u4ef7\u683c\u4e3a\u57281\u4e07\u52303\u4e07\u7684\u5305\u5305"),(0,a.kt)("p",{parentName:"li"},"\u67e5\u8be2\u7684\u6b65\u9aa4\u5982\u4e0b\uff1a"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e00\u6b65\uff1a"),"\u901a\u8fc7\u3010\u54c1\u724c\u7d22\u5f15\u3011\u68c0\u7d22\u51fa\u6240\u6709\u963f\u739b\u5c3c\u548cLV\u7684\u6240\u6709\u53f6\u5b50\u8282\u70b9\u3002"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e8c\u6b65\uff1a"),"\u6211\u4eec\u672c\u60f3\u5728\u7b2c\u4e00\u6b65\u7684\u7ed3\u679c\u4e2d\uff0c\u5feb\u901f\u5b9a\u4f4d\u4ef7\u683c\u7684\u8303\u56f4\uff0c\u4f46\u662f\u53d1\u73b0\u4e00\u4e2a\u95ee\u9898\uff0c\u7531\u4e8e\u7b2c\u4e00\u6b65\u4e0d\u662f\u7b49\u503c\u67e5\u8be2\uff0c\u4f1a\u5bfc\u81f4\u540e\u8fb9\u7684\u7ed3\u679c\u4e0d\u8fde\u7eed\uff0c\u5fc5\u987b\u5bf9\u3010\u4e0a\u4e00\u6b65\u7684\u7ed3\u679c\u3011\u5168\u90e8\u904d\u5386\uff0c\u624d\u80fd\u62ff\u5230\u5bf9\u5e94\u7684\u7ed3\u679c\u3002"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7ed3\u8bba\uff1a"),"\u53ea\u4f1a\u4f7f\u7528\u590d\u5408\u7d22\u5f15\u7684\u7b2c\u4e00\u4e2a\u90e8\u5206\uff0c\u8fd9\u4e2a\u5c31\u5f15\u51fa\u4e86\u3010\u590d\u5408\u7d22\u5f15\u4e2d\u7279\u522b\u91cd\u8981\u7684\u4e00\u4e2a\u6982\u5ff5\u3011-\u3010\u6700\u5de6\u524d\u7f00\u539f\u5219\u3011\u3002"))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u91cd\u70b9\uff1a"),"\u6700\u5de6\u524d\u7f00\u539f\u5219\uff1a"),(0,a.kt)("p",null,"\uff081\uff09\u6700\u5de6\u524d\u7f00\u5339\u914d\u539f\u5219\uff0c\u975e\u5e38\u91cd\u8981\u7684\u539f\u5219\uff0cmysql\u4f1a\u4e00\u76f4\u5411\u53f3\u5339\u914d\u76f4\u5230\u9047\u5230\u8303\u56f4\u67e5\u8be2\uff08>\u3001<\u3001between\u3001like\uff09\u5c31\u505c\u6b62\u5339\u914d\uff0c\u6bd4\u5982a = 1 and b = 2 and c > 3 and d = 4 \uff0c\u5982\u679c\u5efa\u7acb\uff08a,b,c,d\uff09\u987a\u5e8f\u7684\u8054\u5408\u7d22\u5f15\uff0cd\u662f\u7528\u4e0d\u5230\u7d22\u5f15\u7684\uff0c\u5982\u679c\u5efa\u7acb(a,b,d,c)\u7684\u7d22\u5f15\u5219\u90fd\u53ef\u4ee5\u7528\u5230\uff0ca,b,d\u7684\u987a\u5e8f\u53ef\u4ee5\u4efb\u610f\u8c03\u6574\u3002"),(0,a.kt)("p",null,"\uff082\uff09=\u548cin\u53ef\u4ee5\u4e71\u5e8f\uff0c\u6bd4\u5982a = 1 and b < 2 and c = 3 \uff0c\u54b1\u4eec\u5efa\u7acb\u7684\u7d22\u5f15\u5c31\u53ef\u4ee5\u662f\uff08a,c,b\uff09\u6216\u8005\uff08c,a,b\uff09\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u601d\u8003\uff1a"),"\u4e3a\u4ec0\u4e48\u8054\u5408\u7d22\u5f15\u7684\u6027\u80fd\u4f1a\u6bd4\u7d22\u5f15\u7684\u7ec4\u5408\u4f7f\u7528\u6548\u7387\u9ad8\u3002"),(0,a.kt)("h4",{id:"6\u5168\u6587\u7d22\u5f15fulltext"},"6\u3001\u5168\u6587\u7d22\u5f15\uff08FULLTEXT\uff09"),(0,a.kt)("p",null,"\u505a\u5168\u6587\u68c0\u7d22\uff08\u4e0d\u5982\u767e\u5ea6\u7684\u641c\u7d22\u529f\u80fd\uff09\u4f7f\u7528\u7684\u7d22\u5f15\uff0c\u4f46\u662f\u8fd9\u79cd\u573a\u666f\uff0c\u6211\u4eec\u6709\u66f4\u597d\u7684\u66ff\u4ee3\u54c1\uff0c\u5982\uff1aElacticSearch\uff0c\u6240\u4ee5\u5b9e\u9645\u4f7f\u7528\u4e0d\u591a\uff0c\u53ea\u5f53\u4e86\u89e3\u3002"),(0,a.kt)("p",null,"\u4f7f\u7528 like + % \u5b9e\u73b0\u7684\u6a21\u7cca\u5339\u914d\u6709\u70b9\u7c7b\u4f3c\u5168\u6587\u7d22\u5f15\u3002\u4f46\u662f\u5bf9\u4e8e\u5927\u91cf\u7684\u6587\u672c\u6570\u636e\u68c0\u7d22\uff0c\u5168\u6587\u7d22\u5f15\u6bd4 like + % \u5feb N \u500d\uff0c\u901f\u5ea6\u4e0d\u662f\u4e00\u4e2a\u6570\u91cf\u7ea7\uff0c\u4f46\u662f\u5168\u6587\u7d22\u5f15\u53ef\u80fd\u5b58\u5728\u3010\u7cbe\u5ea6\u95ee\u9898\u3011\u3002\u540c\u65f6\u666e\u901a\u7d22\u5f15\u5728\u4f7f\u7528like\u65f6\u5982\u679c%\u653e\u5728\u9996\u4f4d\uff0c\u7d22\u5f15\u4f1a\u5931\u6548\u3002"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u5168\u6587\u7d22\u5f15\u7684\u7248\u672c\u652f\u6301")),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"MySQL 5.6 \u4ee5\u524d\u7684\u7248\u672c\uff0c\u53ea\u6709 MyIsam \u5b58\u50a8\u5f15\u64ce\u652f\u6301\u5168\u6587\u7d22\u5f15\u3002"),(0,a.kt)("li",{parentName:"ol"},"MySQL 5.6 \u53ca\u4ee5\u540e\u7684\u7248\u672c\uff0cMyIsam \u548c InnoDB \u5b58\u50a8\u5f15\u64ce\u5747\u652f\u6301\u5168\u6587\u7d22\u5f15\u3002"),(0,a.kt)("li",{parentName:"ol"},"\u53ea\u6709\u5b57\u6bb5\u7684\u6570\u636e\u7c7b\u578b\u4e3a char\u3001varchar\u3001text \u53ca\u5176\u7cfb\u5217\u624d\u53ef\u4ee5\u5efa\u5168\u6587\u7d22\u5f15\u3002")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u4f7f\u7528\u5168\u6587\u7d22\u5f15\u7684\u6ce8\u610f")),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u4f7f\u7528\u5168\u6587\u7d22\u5f15\u524d\uff0c\u641e\u6e05\u695a\u7248\u672c\u652f\u6301\u60c5\u51b5\u3002"),(0,a.kt)("li",{parentName:"ol"},"\u5168\u6587\u7d22\u5f15\u6bd4 like + % \u5feb N \u500d\uff0c\u4f46\u662f\u53ef\u80fd\u5b58\u5728\u7cbe\u5ea6\u95ee\u9898\u3002"),(0,a.kt)("li",{parentName:"ol"},"\u5982\u679c\u9700\u8981\u5168\u6587\u7d22\u5f15\u7684\u662f\u5927\u91cf\u6570\u636e\uff0c\u5efa\u8bae\u5148\u6dfb\u52a0\u6570\u636e\uff0c\u518d\u521b\u5efa\u7d22\u5f15\u3002"),(0,a.kt)("li",{parentName:"ol"},"\u5bf9\u4e8e\u4e2d\u6587\uff0c\u53ef\u4ee5\u4f7f\u7528 MySQL 5.7.6 \u4e4b\u540e\u7684\u7248\u672c\uff0c\u6216\u8005\u7b2c\u4e09\u65b9\u63d2\u4ef6\u3002")),(0,a.kt)("p",null,"\uff081\uff09\u521b\u5efa\u8868\u65f6\u521b\u5efa\u5168\u6587\u7d22\u5f15"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"create table ydlclass_user (    \n    ..   \n    FULLTEXT KEY fulltext_text(text)  \n) \n")),(0,a.kt)("p",null,"\uff082\uff09\u5728\u5df2\u5b58\u5728\u7684\u8868\u4e0a\u521b\u5efa\u5168\u6587\u7d22\u5f15"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"create fulltext index fulltext_text  on ydlclass_user(text);\n")),(0,a.kt)("p",null,"\u672c\u6b21\u521b\u5efa\u7528\u65f6143s\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220517172713080-7a8ee702.png",alt:"image-20220517172713080"}),"image-20220517172713080"),(0,a.kt)("p",null,"\uff083\uff09\u901a\u8fc7 SQL \u8bed\u53e5 ALTER TABLE \u521b\u5efa\u5168\u6587\u7d22\u5f15"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"alter table ydlclass_user add fulltext index fulltext_text(text);\n")),(0,a.kt)("p",null,"\uff084\uff09\u76f4\u63a5\u4f7f\u7528 DROP INDEX \u5220\u9664\u5168\u6587\u7d22\u5f15"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"drop index fulltext index on ydlclass_user;\n")),(0,a.kt)("p",null,"\uff085\uff09\u5168\u6587\u68c0\u7d22\u7684\u8bed\u6cd5"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"select * from ydlclass_user where match(text) against('\u9ad8\u53f7\u4fbf\u6cd5\u8fd8\u5386\u53ea\u529e\u4e8c\u4e3b\u5382\u5411\u9645');\n")),(0,a.kt)("h4",{id:"8hash\u7d22\u5f15"},"8\u3001hash\u7d22\u5f15"),(0,a.kt)("p",null,"hash\u7d22\u5f15\u662fMemory\u5b58\u50a8\u5f15\u64ce\u7684\u9ed8\u8ba4\u65b9\u5f0f\uff0c\u800c\u4e14\u53ea\u6709memory\u5f15\u64ce\u652f\u6301hash\u7d22\u5f15\uff0cmemory\u7684\u6570\u636e\u662f\u653e\u5728\u5185\u5b58\u4e2d\u7684\uff0c\u4e00\u65e6\u670d\u52a1\u5173\u95ed\uff0c\u8868\u4e2d\u7684\u6570\u636e\u5c31\u4f1a\u4e22\u5931\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u7684sql\u521b\u5efa\u4e00\u5f20\u8868:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE `hash_user`  (\n  `user_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '\u7528\u6237ID',\n  `user_name` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT '\u7528\u6237\u8d26\u53f7',\n  ......\n) ENGINE = Memory CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci COMMENT = '\u7528\u6237\u4fe1\u606f\u8868' ROW_FORMAT = Dynamic;\n")),(0,a.kt)("p",null,"\u5408\u7406\u7684\u4f7f\u7528memory\u5f15\u64ce\u53ef\u4ee5\u6781\u5927\u7684\u63d0\u5347\u6027\u80fd\uff0c\u9488\u5bf9memory\u5f15\u64ce\u7684\u7279\u70b9\u91cd\u542f\u4e22\u5931\uff09\uff0c\u6211\u4eec\u6700\u597d\u5728\u5176\u4e2d\u5b58\u50a8\u4e00\u4e9b\u516c\u5171\u7684\u3001\u5e38\u7528\u7684\u3001\u4e0d\u7ecf\u5e38\u53d1\u751f\u6539\u53d8\u7684\u6570\u636e\uff0c\u6bd4\u5982\u4e00\u4e9b\u5b57\u5178\u6570\u636e\u3001\u914d\u7f6e\u6570\u636e\u7b49\u3002\u540c\u65f6\uff0c\u8fd9\u4e9b\u6570\u636e\u6700\u597d\u6301\u4e45\u5316\u5728\u4e00\u4e9b\u5176\u4ed6\u7684\u5730\u65b9\uff0c\u6bd4\u5982\u914d\u7f6e\u6587\u4ef6\u3001\u5176\u4ed6\u7684\u8868\uff0c\u5728\u7a0b\u5e8f\u542f\u52a8\u7684\u65f6\u5019\uff0c\u4e3b\u52a8\u7684\u8fdb\u884c\u52a0\u8f7d\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0bsql\uff0c\u5c06\u4e00\u5f20\u8868\u7684\u6570\u636e\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"insert into hash_user select * from ydl_user where user_id < 2000000;\n")),(0,a.kt)("p",null,"\u6211\u4eec\u5728\u6267\u884c\u7684\u8fc7\u7a0b\u79cd\uff0c\u53ef\u80fd\u6709\u5982\u4e0b\u9519\u8bef\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAxgAAABCCAYAAADUgHBoAAANZElEQVR4nO3dPXa6Th+G8ZtnLZLC4wpwBZomla0dltL8O8t0vwZK7dJa2QRWoCvwWAh7mafAFzCCiGhMcn3OsUjIMMMwGL7MDGMZY4wAAAAAoAH/++4CAAAAAPg9CDAAAAAANIYAAwAAAEBjCDAAAAAANIYAAwAAAEBj8gFGEqhrWRpF31SaJvyGYwCAZ8N3KwCgoiftwYg0skZ63P+xpvO7R/kfXSfPJFHQtWRZlqynOU+RRt1AydXpssdiyXr6u7VsHd3rPDyLv3yNNeUBdbgLdCzLknV6DWa3WV0FyZNuA4BfLh9gtMZaGqNp75tK04TfcAw40dJ4aWRMKPe7i7K7ye4GUnvwonh0ZZAQ/ZPXCWWMST8/qqE+03nAw93xuzUaVe0ZSRQMN5rsrp+w42l4uHOPNLI9dcLdtRUPNLf3wc4zbQOAP8AYY4yJje/ISDKSa0KTFRpXrvF9Z7ddxvHj4+bYN450fpsJjZvZ5mZ2HLqO8cNMWsc3sTEmdI9/f/i4+RKdV+8YLuZ3cnyVinImv/yx5/PL7bOwPsv3eaksYdHPDZ+/i2rmd/5YqqXL1fduY/12tj8M54pzkE+XP+Z9GUvqs6gNhq5xXDfd5vjGdyu2i9g3Tq4e02vnkO4kv6LrqfqhP08bPFf/x99dusbqluVSuz7neeqs/Lv1a1nO/s2FfZ+7Jiql9p3jdRu6uePJXaPPtA0A/oBdD8alJ5MzeZvJ7kmML80/d93SiYLhXIPYHJ7ILsetXZpEQXeht/2TWhNK/ewTnJW8d+kj8yTqXyT1pvtyuAqvespb7xjK84s0sjPHF/ta96t2defzW78fu/LTPLP7zAxBKazP8n3W0/z5u19+JfssSReNLPX1tcegfjtLezCGmsj3Q70tqvVgJEFXlmXJ9lZaefaZYRNF9VneBlczaWJCuStP83as2He03l5oFa1XDZyZFvtiJ5+ad8Ldk+mT/O7eW/HYNth66Wi1iXU6lKfzss+z6BqrW5a67fp56qz8u/WW9hJpZNmaD+KT77nq4s1K7lt63SbbtdR5UUvpdW/PB/J3hXmmbQDwF1Scg+Eq3N98tV7UWW0Upz/odSB5tqXu6V138qn5aqb+YQxqXzOtlb33cSdj7f+t9Kb3HtZUdAwlooVm7kSH/32tsSbuSpuLCS/kF42OY/BtT6tDmpL6rHsMpR59/m7L76zSdJEWM0f+f002rPRmazmWNvOt7Gm1wKQ1XsoYo9h35Pjx7mZsqex91dn6vNQG3TelubuaVL5Ja2k8cTXbRRjRv7kG+zo6ze/uHtwG7bYcSUq2krPWIpLijdS2D3s8f43VLUvddl3qib5367aXJFDX6kvh6UOUa3bRVX/tK3t5O20p6Fp6b8cyy7Fe9JzbAOC3u3mS9/7G6UPDr5NWHV+xOT5lO72h+psijfpr+QVP/Err8w4eff7ukl9puo5e7tLmepoujzdqP07vTe5soUiRFuuBXr/xQB7+HbLeKvrcqD0ZSNtI23XFdHdpn/X8+O/d1lhLE0r9oocp5ZKgK3s+UJy5BlsvHa28vjaTfdCSHM7tM20DgL+gsbdItcZLmdiXs96mQwpaL+qsqnS/F7n1KV8D+dltObP34zCWJND7zMk87bxdNOprdub3X+rzJsdjq5zfzeevXGP5labr6c2d6b30BubR7exKd2uDad0sRgsp80Q7zW+ReWvU+fZyvSdpg7teiYXaeu29qr1ZaFMlCL1L+7zkSeqszE3tpaepiTWY21cFGeeCi3R3b3KVuTaif/K06+F4pm0A8BekUzHykwKVm/xXNtnwNJ1jcnP1Tif/ZSa9hW75hLc4M9Gy2uTbusdwIb/QLT6+0rIU55edYOz4fsX6vHwMReLc5Paq+Zmbzl9xvdTJr+zclpfzS9qTQl/fzm5TPMm7pD6L2mDo7sp8bAtF+y8ozMlk72MZ9/m5Ydn1Xn1y//O0wd2E5exk/6rfE3XLUto+S0r6NHVWft6L28sVOVQu15myFJ6jk3I80zYA+OUsY4ypF5oA+MmSoKuhPmqPgQcAADjnSRfaQ3WRRocJnSefp1/EDd/h8EarzaSh4II2+LNx/gAAzaIHAwAAAEBj6MEAAAAA0BgCDAAAAACNIcAAHikJ1LUsMbQdAAD8Vg0EGImCbjoh8OtNU91t2e0j3fVeLLuq9uHT3a07EGl0l/zr7LcszbEuG6+vJFD3UB9VylLXver6Ts7Wy3fJnv8qE3PL2ssd2xIAAPgTDgFGNKqzomqioDuUPmL5TlPbdn8RDOV13Nwq13fRm2ZW1HYVPuvKt6VaGi+/rgqOJ9Qaa2mMpk0uuBX9k9cJjys3X9x5WXuhLQEAgNscAozeNF1R9brXErY0XhbdjNfdJikJNPQ6CqdvV5Tlfra713p+7W3Jv96xStVFI0uW1ddMM/XPPHFOtxfvM1uW6gHh9eU8aL2oU7DScVG9lB7DbohQ0TEU13XZsWWftJ/8XJpfcb1Eo66CKJO2G+RXVC+pl/Mu9AxcqJfSPW/Xcr4s7X2hXgAAAO4kM0QqfXIZt9+/eWhEomDoqRNO1eRD3vpm8jaT9Mlw7Gv9vr/RTBR0F3rbPzU2odS/XG+96WlvSf6Jc7rdHPPL7TNTFhOq4w0rDNGpV85MiTU1585FUb2UHUOiYDjXID5uz6/DULzPesryu1QvK3nv0sdue9jx9C9XaUX1UqSsZ+BSvRQc3X49C2+llWefDO8DAAD4Hl/mYLTGS5lQ6n/TjUo6NCqsNYQkyTz9bi5IchXuC9N6UWe1USxJyafmq0wvhNXXTGttb62z7JwQ29OqqCyy1XZW2sQX9nevchbVS+kxtPQ6kDy76Al9yT5rKcmvQr24k7H2t/m9acPDmqqWsyzVeCljjGLfkePHu+Dkpw3vAwAAv82XACMJurL6UvgtNyqJPucradbP3PSlN4FVhsvsb7jSzwN6QBxfsck8rb+5ziKN+mv58fGpevk4eEdfRsY8pJxlyo9hf44+NHzISsGl+T20Xm4oJwAAwA+SCzCikSV7M3nMzflZ+2Ek2ZvTdCjR/Z4e19R6UWd1OmzmGpd7EaJRX7PCjf/krSrMAbi5nLcpOobWeCkT+3LW2xuHQUnZuqyc3zfXS5FH1wsAAEDTcm+Rem/HFd5Ak7WfuGrLW0mzfnZoUt1tP0VP09jXup+Z0Hw6Ebgk7X9+OiQm/7S6pzd3dfj9e9s/6cHIDOnpS+EhENxPVs5MHj+U5ZZy1lF2DPlJ1ZY91+DjOAypbn7Zuqye36PrpewcfVe9lJXl3DYAAIDLLGOM+e5CAAAAAPgdWMkbT+7k6X72wzwFAACAp0MPBgAAAIDG0IMBAAAAoDH3DzCSQKNucH4CdzS6blVpAAAAAE+t0QAjSc6/a2bdeTn/2tveVG+LdHGxaFQwzt66bvExAAAAAN/nxgBj/7rZ9GPbdvUeiWgkqxvInhotxy31ptn1L46f2Hc1eG1g9bMkUPcQtFyxSvnFdPs6yL5mN18vV+UHAAAA/GC5dTCu7ylo6aWTLoRnjFHoutLipAfC9rQ6rMydv9F2Bq/pu/6j0Zdei2aHTkUa2Z464S5wiQea21XW3bicLgmG8jruyXoVJwsGhh15z7aiGwAAAHAHhwCjN401mNs3v/rz7bQnIvbluOHu56XGBZ0Rjh8f0oSuq7ey9f6SQN1regWihWaOr/92+0w+51pppsWlQ72ULgk09DoKp2+lu0m2azlt+6T8DAEDAADA75MZIpU+dY/b71euqn1cXbo/S39zdW+I3ZY8+3DDvd9PU5LtWuq8qLUrmz0fyHcvJruQLlEw9NQJp+fnl2TWb7DnA30cIqtEwXCuQXwMwpZFURcAAADww3yZg9EaL2VCqV+5hyA7RCr9TdobMrxq3kEn14Nx4Y9bYy1LekPOcdpS0LX03o5llmO93JguHRoValrY09LTdN+LM9nI7gZKq6Ol14Hk2fRcAAAA4Pf5EmAkQVdWXwqvvIHPa2m8vCV9s1ovHa28vjaTfW9Bou36lnSJPucr6TC3pK/Zrifn7Aiz3pvc1Vyfu3iiNV7KGKMPDVmRGgAAAL9KLsCIRpbszUTGFA37OZVou/46ROpq8Uaza4ZIXTsHo/cmV44O0yCif/J0nFuR/m70dXJ5YbqTSdwmlLvryTnboxEtNHMGOn0ZVmu8TOeorLeiLwMAAAC/Qe4tUu/tWKZ4zE+B4xCp6oHJid705PW0UykIGrzp7mkaDzS3dxOr+1K4HOtyB0vddMf5F5ZlyXpvKz6kO9lmzzX4qLJPAAAA4PlZxhhzlz0ngbq2p5UkNzzzZD8aqbv9r3iC8yG9q7Bu4AIAAADgoe4XYAAAAAD4c25cyRsAAAAAjggwAAAAADSGAAMAAABAYwgwAAAAADSGAAMAAABAYwgwAAAAADSGAAMAAABAYwgwAAAAADSGAAMAAABAYwgwAAAAADSGAAMAAABAYwgwAAAAADSGAAMAAABAYwgwAAAAADSGAAMAAABAYwgwAAAAADSGAAMAAABAYwgwAAAAADSGAAMAAABAYwgwAAAAADSGAAMAAABAY/4PwjlY6BTO+5EAAAAASUVORK5CYII=",alt:"image-20220517192903131"}),"image-20220517192903131"),(0,a.kt)("p",null,"\u4ed6\u544a\u8bc9\u6211\uff0c\u8fd9\u4e2a\u8868\u4f7f\u7528\u7684\u5185\u5b58\u6ee1\u4e86\uff0c\u653e\u4e0d\u4e0b\u4e86\uff0c\u6211\u4eec\u53ea\u9700\u8981\u8c03\u8282\u4e0b\u8fb9\u4e24\u4e2a\u53c2\u6570\uff0c\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u91cd\u542f\u5373\u53ef\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"tmp_table_size = 4096M\nmax_heap_table_size = 4096M\n")),(0,a.kt)("p",null,"\u57fa\u7840\u5de5\u4f5c\u5b8c\u6210\uff0c\u5199\u51e0\u4e2asql\u8bed\u53e5\u5c1d\u8bd5\u4e00\u4e0b\uff0c\u6211\u4eec\u53d1\u73b0\u771f\u7684\u4e00\u4e2a\u5b57\uff1a\u5feb\u3002"),(0,a.kt)("p",null,"\u6211\u4eec\u6267\u884c\u4e00\u4e0b\u7684sql"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"select * from hash_user where email = 'i.jnoyelrsg@rpnglcvh.museum'  -- 0.189s\n")),(0,a.kt)("p",null,"\u521b\u5efa\u4e00\u4e2ahash\u7d22\u5f15"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"create index hash_idx_user_name using hash on hash_user(email);\n")),(0,a.kt)("p",null,"\u518d\u6b21\u67e5\u8be2"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"select * from hash_user where email = 'i.jnoyelrsg@rpnglcvh.museum'  -- 0.017s\n")),(0,a.kt)("p",null,"\u4e5f\u6709\u4e0d\u9519\u7684\u6548\u679c\u3002"),(0,a.kt)("p",null,"\u5173\u4e8ehash\u7d22\u5f15\u9700\u8981\u4e86\u89e3\u7684\u51e0\u70b9\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"hash\u662f\u4e00\u79cdkey-value\u5f62\u5f0f\u7684\u6570\u636e\u7ed3\u6784\u3002\u5b9e\u73b0\u4e00\u822c\u662f\u6570\u7ec4+\u94fe\u8868\u7684\u7ed3\u6784\uff0c\u901a\u8fc7hash\u51fd\u6570\u8ba1\u7b97\u51fakey\u5728\u6570\u7ec4\u4e2d\u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u5982\u679c\u51fa\u73b0hash\u51b2\u7a81\u5c31\u901a\u8fc7\u94fe\u8868\u6765\u89e3\u51b3\u3002\u5f53\u7136\u8fd8\u6709\u5176\u4ed6\u7684\u89e3\u51b3hash\u51b2\u7a81\u7684\u65b9\u6cd5\u3002hash\u8fd9\u79cd\u6570\u636e\u7ed3\u6784\u662f\u5f88\u5e38\u7528\u7684\uff0c\u6bd4\u5982\u6211\u4eec\u7cfb\u7edf\u4f7f\u7528HashMap\u6765\u6784\u5efa\u70ed\u70b9\u6570\u636e\u7f13\u5b58\uff0c\u5b58\u53d6\u6548\u7387\u5f88\u597d\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u5373\u4f7f\u662f\u76f8\u8fd1\u7684key\uff0chash\u7684\u53d6\u503c\u4e5f\u5b8c\u5168\u6ca1\u6709\u89c4\u5f8b\uff0c\u7d22\u5f15hash\u7d22\u5f15\u4e0d\u652f\u6301\u8303\u56f4\u67e5\u8be2\u3002"),(0,a.kt)("li",{parentName:"ul"},"hash\u7d22\u5f15\u5b58\u50a8\u7684\u662fhash\u503c\u548c\u884c\u6307\u9488\uff0c\u6240\u4ee5\u901a\u8fc7hash\u7d22\u5f15\u67e5\u8be2\u6570\u636e\u9700\u8981\u8fdb\u884c\u4e24\u6b21\u67e5\u8be2\uff08\u9996\u5148\u67e5\u8be2\u884c\u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u627e\u5230\u5177\u4f53\u7684\u6570\u636e\uff09\u3002"),(0,a.kt)("li",{parentName:"ul"},"hash\u7d22\u5f15\u67e5\u8be2\u6570\u636e\u7684\u524d\u63d0\u5c31\u662f\u8ba1\u7b97hash\u503c\uff0c\u4e5f\u5c31\u662f\u8981\u6c42key\u4e3a\u4e00\u4e2a\u80fd\u51c6\u786e\u6307\u5411\u4e00\u6761\u6570\u636e\u7684key\uff0c\u6240\u4ee5\u5bf9\u4e8elike\u7b49\u4e00\u7c7b\u7684\u5339\u914d\u67e5\u8be2\u662f\u4e0d\u652f\u6301\u7684\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u53ea\u8981\u662f\u53ea\u9700\u8981\u505a\u7b49\u503c\u6bd4\u8f83\u67e5\u8be2\uff0c\u800c\u4e0d\u5305\u542b\u6392\u5e8f\u6216\u8303\u56f4\u67e5\u8be2\u7684\u9700\u6c42\uff0c\u90fd\u9002\u5408\u4f7f\u7528\u54c8\u5e0c\u7d22\u5f15\u3002")),(0,a.kt)("h4",{id:"7\u7a7a\u95f4\u7d22\u5f15spatial"},"7\u3001\u7a7a\u95f4\u7d22\u5f15\uff08SPATIAL\uff09"),(0,a.kt)("p",null,"MySQL\u57285.7\u4e4b\u540e\u7684\u7248\u672c\u652f\u6301\u4e86\u7a7a\u95f4\u7d22\u5f15\uff0c\u800c\u4e14\u652f\u6301OpenGIS\u51e0\u4f55\u6570\u636e\u6a21\u578b\u3002\u8fd9\u662f\u5728\u5730\u7406\u4f4d\u7f6e\u9886\u57df\u4f7f\u7528\u7684\u4e00\u79cd\u7d22\u5f15\uff0c\u5176\u4ed6\u573a\u666f\u7528\u7684\u5f88\u5c11\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u6df1\u5165\u5b66\u4e60\u3002"),(0,a.kt)("h3",{id:"\u4e09explain\u7684\u7528\u6cd5"},"\u4e09\u3001explain\u7684\u7528\u6cd5"),(0,a.kt)("p",null,"explain\u5173\u952e\u5b57\u53ef\u4ee5\u6a21\u62dfMySQL\u4f18\u5316\u5668\u6267\u884cSQL\u8bed\u53e5\uff0c\u53ef\u4ee5\u5f88\u597d\u7684\u5206\u6790SQL\u8bed\u53e5\u6216\u8868\u7ed3\u6784\u7684\u6027\u80fd\u74f6\u9888\u3002"),(0,a.kt)("p",null,"explain\u7684\u4f7f\u7528\u5f88\u7b80\u5355\uff0c\u53ea\u9700\u8981\u5728\u76ee\u6807sql\u524d\u52a0\u4e0a\u8fd9\u4e2a\u5173\u952e\u5b57\u5c31\u53ef\u4ee5\u4e86\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220513190241307-0f115ff8.png",alt:"image-20220513190241307"}),"image-20220513190241307"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u6267\u884cexplain\u4f1a\u4ea7\u751f\u4ee5\u4e0b11\u5217\u5185\u5bb9\uff0c\u5982\u4e0b\uff1a")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"\u5217\u53f7"),(0,a.kt)("th",{parentName:"tr",align:null},"\u5217"),(0,a.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"1"),(0,a.kt)("td",{parentName:"tr",align:null},"id"),(0,a.kt)("td",{parentName:"tr",align:null},"select\u67e5\u8be2\u7684\u5e8f\u5217\u53f7\uff0c\u5305\u542b\u4e00\u7ec4\u6570\u5b57\uff0c\u8868\u793a\u67e5\u8be2\u4e2d\u6267\u884cselect\u5b50\u53e5\u6216\u64cd\u4f5c\u8868\u7684\u987a\u5e8f")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"2"),(0,a.kt)("td",{parentName:"tr",align:null},"select_type"),(0,a.kt)("td",{parentName:"tr",align:null},"\u67e5\u8be2\u7c7b\u578b")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"3"),(0,a.kt)("td",{parentName:"tr",align:null},"table"),(0,a.kt)("td",{parentName:"tr",align:null},"\u6b63\u5728\u8bbf\u95ee\u54ea\u4e2a\u8868")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"4"),(0,a.kt)("td",{parentName:"tr",align:null},"partitions"),(0,a.kt)("td",{parentName:"tr",align:null},"\u5339\u914d\u7684\u5206\u533a")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"5"),(0,a.kt)("td",{parentName:"tr",align:null},"type"),(0,a.kt)("td",{parentName:"tr",align:null},"/\u8bbf\u95ee\u7684\u7c7b\u578b")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"6"),(0,a.kt)("td",{parentName:"tr",align:null},"possible_keys"),(0,a.kt)("td",{parentName:"tr",align:null},"\u663e\u793a\u53ef\u80fd\u5e94\u7528\u5728\u8fd9\u5f20\u8868\u4e2d\u7684\u7d22\u5f15\uff0c\u4e00\u4e2a\u6216\u591a\u4e2a\uff0c\u4f46\u4e0d\u4e00\u5b9a\u5b9e\u9645\u4f7f\u7528\u5230")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"7"),(0,a.kt)("td",{parentName:"tr",align:null},"key"),(0,a.kt)("td",{parentName:"tr",align:null},"\u5b9e\u9645\u4f7f\u7528\u5230\u7684\u7d22\u5f15\uff0c\u5982\u679c\u4e3aNULL\uff0c\u5219\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"8"),(0,a.kt)("td",{parentName:"tr",align:null},"key_len"),(0,a.kt)("td",{parentName:"tr",align:null},"\u8868\u793a\u7d22\u5f15\u4e2d\u4f7f\u7528\u7684\u5b57\u8282\u6570\uff0c\u53ef\u901a\u8fc7\u8be5\u5217\u8ba1\u7b97\u67e5\u8be2\u4e2d\u4f7f\u7528\u7684\u7d22\u5f15\u7684\u957f\u5ea6")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"9"),(0,a.kt)("td",{parentName:"tr",align:null},"ref"),(0,a.kt)("td",{parentName:"tr",align:null},"\u663e\u793a\u7d22\u5f15\u7684\u54ea\u4e00\u5217\u88ab\u4f7f\u7528\u4e86\uff0c\u5982\u679c\u53ef\u80fd\u7684\u8bdd\uff0c\u662f\u4e00\u4e2a\u5e38\u6570\uff0c\u54ea\u4e9b\u5217\u6216\u5e38\u91cf\u88ab\u7528\u4e8e\u67e5\u627e\u7d22\u5f15\u5217\u4e0a\u7684\u503c")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"10"),(0,a.kt)("td",{parentName:"tr",align:null},"rows"),(0,a.kt)("td",{parentName:"tr",align:null},"\u6839\u636e\u8868\u7edf\u8ba1\u4fe1\u606f\u53ca\u7d22\u5f15\u9009\u7528\u60c5\u51b5\uff0c\u5927\u81f4\u4f30\u7b97\u51fa\u627e\u5230\u6240\u9700\u7684\u8bb0\u5f55\u6240\u9700\u8bfb\u53d6\u7684\u884c\u6570 filtered //\u67e5\u8be2\u7684\u8868\u884c\u5360\u8868\u7684\u767e\u5206\u6bd4")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"11"),(0,a.kt)("td",{parentName:"tr",align:null},"filtered"),(0,a.kt)("td",{parentName:"tr",align:null},"\u67e5\u8be2\u7684\u8868\u884c\u5360\u8868\u7684\u767e\u5206\u6bd4")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"12"),(0,a.kt)("td",{parentName:"tr",align:null},"Extra"),(0,a.kt)("td",{parentName:"tr",align:null},"\u5305\u542b\u4e0d\u9002\u5408\u5728\u5176\u5b83\u5217\u4e2d\u663e\u793a\u4f46\u5341\u5206\u91cd\u8981\u7684\u989d\u5916\u4fe1\u606f")))),(0,a.kt)("h4",{id:"1id\u5b57\u6bb5"},"1\u3001id\u5b57\u6bb5"),(0,a.kt)("p",null,"select\u67e5\u8be2\u7684\u5e8f\u5217\u53f7\uff0c\u5305\u542b\u4e00\u7ec4\u6570\u5b57\uff0c\u8868\u793a\u67e5\u8be2\u4e2d\u6267\u884cselect\u5b50\u53e5\u6216\u64cd\u4f5c\u8868\u7684\u987a\u5e8f"),(0,a.kt)("p",null,"\uff081\uff09 id\u76f8\u540c"),(0,a.kt)("p",null,"id\u5982\u679c\u76f8\u540c\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e00\u7ec4\uff0c\u6267\u884c\u987a\u5e8f\u4ece\u4e0a\u81f3\u4e0b\uff0c\u5982\u4e0b\u67e5\u8be2\u8bed\u53e5\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"explain select * from student s, scores sc where s.id = sc.s_id\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220516175632471-aec555f3.png",alt:"image-20220516175632471"}),"image-20220516175632471"),(0,a.kt)("p",null,"\uff082\uff09 id\u4e0d\u540c"),(0,a.kt)("p",null,"\u5982\u679c\u662f\u5b50\u67e5\u8be2\uff0cid\u7684\u5e8f\u53f7\u4f1a\u9012\u589e\uff0cid\u7684\u503c\u8d8a\u5927\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u8d8a\u5148\u88ab\u6267\u884c\u4f8b\u5b50"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"explain select * from student where age > (\n    select age from student where name = '\u8fde\u5b87\u680b'\n);\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220516180258900-0f568bab.png",alt:"image-20220516180258900"}),"image-20220516180258900"),(0,a.kt)("p",null,"\uff083\uff09id\u90e8\u5206\u76f8\u540c\u90e8\u5206\u4e0d\u540c"),(0,a.kt)("p",null,"id\u5982\u679c\u76f8\u540c\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e00\u7ec4\uff0c\u4ece\u4e0a\u5f80\u4e0b\u987a\u5e8f\u6267\u884c\u5728\u6240\u6709\u7ec4\u4e2d\uff0cid\u503c\u8d8a\u5927\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u8d8a\u5148\u6267\u884c\u4f8b\u5b50\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"explain \nselect * from student s, scores sc where s.id = sc.s_id\nunion\nselect * from student s, scores sc where s.id = sc.s_id;\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220516180459139-b4df1b84.png",alt:"image-20220516180459139"}),"image-20220516180459139"),(0,a.kt)("h4",{id:"2select_type\u5b57\u6bb5"},"2\u3001select_type\u5b57\u6bb5"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff081\uff09SIMPLE")),(0,a.kt)("p",null,"\u7b80\u5355\u67e5\u8be2\uff0c\u4e0d\u5305\u542b\u5b50\u67e5\u8be2\u6216Union\u67e5\u8be2\u7684sql\u8bed\u53e5\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff082\uff09PRIMARY")),(0,a.kt)("p",null,"\u67e5\u8be2\u4e2d\u82e5\u5305\u542b\u4efb\u4f55\u590d\u6742\u7684\u5b50\u90e8\u5206\uff0c\u6700\u5916\u5c42\u67e5\u8be2\u5219\u88ab\u6807\u8bb0\u4e3a\u4e3b\u67e5\u8be2\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff083\uff09 SUBQUERY")),(0,a.kt)("p",null,"\u5728select\u6216where\u4e2d\u5305\u542b\u5b50\u67e5\u8be2\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff084\uff09UNION")),(0,a.kt)("p",null,"\u82e5\u7b2c\u4e8c\u4e2aselect\u51fa\u73b0\u5728uion\u4e4b\u540e\uff0c\u5219\u88ab\u6807\u8bb0\u4e3aUNION\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff086\uff09UNION RESULT")),(0,a.kt)("p",null,"\u4eceUNION\u8868\u83b7\u53d6\u7ed3\u679c\u7684\u5408\u5e76\u64cd\u4f5c\u3002"),(0,a.kt)("h4",{id:"3type\u5b57\u6bb5"},"3\u3001type\u5b57\u6bb5"),(0,a.kt)("p",null,"\u6700\u597d\u5230\u6700\u5dee\u5907\u6ce8\uff1a\u638c\u63e1\u4ee5\u4e0b10\u79cd\u5e38\u89c1\u7684\u5373\u53efNULL>system>const>eq_ref>ref>ref_or_null>index_merge>range>index>ALL"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff081\uff09 NULL")),(0,a.kt)("p",null,"MySQL\u80fd\u591f\u5728\u4f18\u5316\u9636\u6bb5\u5206\u89e3\u67e5\u8be2\u8bed\u53e5\uff0c\u5728\u6267\u884c\u9636\u6bb5\u7528\u4e0d\u7740\u518d\u8bbf\u95ee\u8868\u6216\u7d22\u5f15\uff0c\u6bd4\u5982\u901a\u8fc7id\u6ca1\u6709\u627e\u5230\u4f8b\u5b50\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"explain select min(id) from student;\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220516180830093-f1e439bd.png",alt:"image-20220516180830093"}),"image-20220516180830093"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff082\uff09system")),(0,a.kt)("p",null,"\u8868\u53ea\u6709\u4e00\u884c\u8bb0\u5f55\uff08\u7b49\u4e8e\u7cfb\u7edf\u8868\uff09\uff0c\u8fd9\u662fconst\u7c7b\u578b\u7684\u7279\u5217\uff0c\u5e73\u65f6\u4e0d\u5927\u4f1a\u51fa\u73b0\uff0c\u53ef\u4ee5\u5ffd\u7565\uff0c\u6211\u4e5f\u6ca1\u6709\u5b9e\u6d4b\u51fa\u6765\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"explain select * from mysql.proxies_priv\n")),(0,a.kt)("p",null,"\u6211\u5b9e\u6d4b\u4e00\u4e2a\u53ea\u6709\u4e00\u884c\u8bb0\u5f55\u7684\u7cfb\u7edf\u8868\uff0c\u540c\u6837\u662fall\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220518115948496-44153fd6.png",alt:"image-20220518115948496"}),"image-20220518115948496"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff083\uff09 const")),(0,a.kt)("p",null,"\u8868\u793a\u901a\u8fc7\u7d22\u5f15\u4e00\u6b21\u5c31\u627e\u5230\u4e86\uff0cconst\u7528\u4e8e\u6bd4\u8f83primary key\u6216uique\u7d22\u5f15\uff0c\u56e0\u4e3a\u53ea\u5339\u914d\u4e00\u884c\u6570\u636e\uff0c\u6240\u4ee5\u5f88\u5feb\uff0c\u5982\u4e3b\u952e\u7f6e\u4e8ewhere\u5217\u8868\u4e2d\uff0cMySQL\u5c31\u80fd\u5c06\u8be5\u67e5\u8be2\u8f6c\u6362\u4e3a\u4e00\u4e2a\u5e38\u91cf\u4f8b\u5b50\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"explain select * from student where id = 1;\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220516181115548-7e73b3f8.png",alt:"image-20220516181115548"}),"image-20220516181115548"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"4. eq_ref")),(0,a.kt)("p",null,"\u552f\u4e00\u6027\u7d22\u5f15\u626b\u63cf\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u7d22\u5f15\u952e\uff0c\u8868\u4e2d\u53ea\u6709\u4e00\u6761\u8bb0\u5f55\u4e0e\u4e4b\u5339\u914d\uff0c\u5e38\u89c1\u4e8e\u4e3b\u952e\u6216\u552f\u4e00\u7d22\u5f15\u626b\u63cf\u4f8b\u5b50\uff1a"),(0,a.kt)("p",null,"\u88ab\u9a71\u52a8\u8868\u4f7f\u7528\u4e3b\u952e\u7d22\u9762\uff0c\u7ed3\u679c\u552f\u4e00"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"explain select * from scores sc left join student s on s.id = sc.s_id\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220516183031354-2de188ef.png",alt:"image-20220516183031354"}),"image-20220516183031354"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"5. ref")),(0,a.kt)("p",null,"\u975e\u552f\u4e00\u6027\u7d22\u5f15\u626b\u63cf\uff0c\u8fd4\u56de\u5339\u914d\u67d0\u4e2a\u5355\u72ec\u503c\u7684\u6240\u6709\u884c\uff0c\u672c\u8d28\u4e0a\u4e5f\u662f\u4e00\u79cd\u7d22\u5f15\u8bbf\u95ee\uff0c\u8fd4\u56de\u6240\u6709\u5339\u914d\u67d0\u4e2a\u5355\u72ec\u503c\u7684\u884c\uff0c\u7136\u800c\u53ef\u80fd\u4f1a\u627e\u5230\u591a\u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u884c\uff0c\u5e94\u8be5\u5c5e\u4e8e\u67e5\u627e\u548c\u626b\u63cf\u7684\u6df7\u5408\u4f53\u4f8b\u5b50\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"explain select * from student where name = '\u767d\u6770'\nexplain select * from student s left join scores sc on s.id = sc.s_id\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220516183118398-d08c2df6.png",alt:"image-20220516183118398"}),"image-20220516183118398"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"6. ref_or_null")),(0,a.kt)("p",null,"\u7c7b\u4f3cref\uff0c\u4f46\u662f\u53ef\u4ee5\u641c\u7d22\u503c\u4e3aNULL\u7684\u884c\u4f8b\u5b50\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"explain select * from student s where name = '\u767d\u6770' or name is null\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220516183229589-daa35de1.png",alt:"image-20220516183229589"}),"image-20220516183229589"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"7. index_merge")),(0,a.kt)("p",null,"\u8868\u793a\u4f7f\u7528\u4e86\u7d22\u5f15\u5408\u5e76\u7684\u4f18\u5316\u65b9\u6cd5\u4f8b\u5b50\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"explain select * from student where id = 1 or name ='\u674e\u5174';\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220516181626267-12ca24b4.png",alt:"image-20220516181626267"}),"image-20220516181626267"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"8. range")),(0,a.kt)("p",null,"\u53ea\u68c0\u7d22\u7ed9\u5b9a\u8303\u56f4\u7684\u884c\uff0c\u4f7f\u7528\u4e00\u4e2a\u7d22\u5f15\u6765\u9009\u62e9\u884c\uff0ckey\u5217\u663e\u793a\u4f7f\u7528\u4e86\u54ea\u4e2a\u7d22\u5f15\u4e00\u822c\u5c31\u662f\u5728\u4f60\u7684where\u8bed\u53e5\u4e2d\u51fa\u73b0between\u3001",(0,a.kt)("inlineCode",{parentName:"p"},"<>"),"\u3001in\u7b49\u7684\u67e5\u8be2\u3002\u4f8b\u5b50\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"explain select * from student where id between 4 and 7;\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220516181716830-9c6ab949.png",alt:"image-20220516181716830"}),"image-20220516181716830"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"9. index"),"\uff08\u5168\u7d22\u5f15\u626b\u63cf\uff09"),(0,a.kt)("p",null,"Full index Scan\uff0cIndex\u4e0eAll\u533a\u522b\uff1aindex\u53ea\u904d\u5386\u7d22\u5f15\u6811\uff0c\u901a\u5e38\u6bd4All\u5feb\u56e0\u4e3a\u7d22\u5f15\u6587\u4ef6\u901a\u5e38\u6bd4\u6570\u636e\u6587\u4ef6\u5c0f\uff0c\u4e5f\u5c31\u662f\u867d\u7136all\u548cindex\u90fd\u662f\u8bfb\u5168\u8868\uff0c\u4f46index\u662f\u4ece\u7d22\u5f15\u4e2d\u8bfb\u53d6\u7684\uff0c\u800call\u662f\u4ece\u786c\u76d8\u8bfb\u7684\u3002\u4f8b\u5b50\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"explain select name from student;\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220516181813844-c49ee252.png",alt:"image-20220516181813844"}),"image-20220516181813844"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"10. ALL"),"\uff08\u5168\u8868\u626b\uff09"),(0,a.kt)("p",null,"Full Table Scan\uff0c\u5c06\u904d\u5386\u5168\u8868\u4ee5\u627e\u5230\u5339\u914d\u884c\u4f8b\u5b50\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"explain select * from student;\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220516181840924-dcb02ba6.png",alt:"image-20220516181840924"}),"image-20220516181840924"),(0,a.kt)("h4",{id:"4table\u5b57\u6bb5"},"4\u3001table\u5b57\u6bb5"),(0,a.kt)("p",null,"\u8868\u793a\u6570\u636e\u6765\u81ea\u54ea\u5f20\u8868"),(0,a.kt)("h4",{id:"5possible_keys\u5b57\u6bb5"},"5\u3001possible_keys\u5b57\u6bb5"),(0,a.kt)("p",null,"\u663e\u793a\u53ef\u80fd\u5e94\u7528\u5728\u8fd9\u5f20\u8868\u4e2d\u7684\u7d22\u5f15\uff0c\u4e00\u4e2a\u6216\u591a\u4e2a\u67e5\u8be2\u6d89\u53ca\u5230\u7684\u5b57\u6bb5\u82e5\u5b58\u5728\u7d22\u5f15\uff0c\u5219\u8be5\u7d22\u5f15\u5c06\u88ab\u5217\u51fa\uff0c\u4f46\u4e0d\u4e00\u5b9a\u88ab\u5b9e\u9645\u4f7f\u7528"),(0,a.kt)("h4",{id:"6key\u5b57\u6bb5"},"6\u3001key\u5b57\u6bb5"),(0,a.kt)("p",null,"\u5b9e\u9645\u4f7f\u7528\u5230\u7684\u7d22\u5f15\uff0c\u5982\u679c\u4e3aNULL\uff0c\u5219\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15\u67e5\u8be2\u4e2d\u82e5\u4f7f\u7528\u4e86\u8986\u76d6\u7d22\u5f15\uff08\u67e5\u8be2\u7684\u5217\u521a\u597d\u662f\u7d22\u5f15\uff09\uff0c\u5219\u8be5\u7d22\u5f15\u4ec5\u51fa\u73b0\u5728key\u5217\u8868"),(0,a.kt)("h4",{id:"7key_len\u5b57\u6bb5"},"7\u3001key_len\u5b57\u6bb5"),(0,a.kt)("p",null,"\u8868\u793a\u7d22\u5f15\u4e2d\u4f7f\u7528\u7684\u5b57\u8282\u6570\uff0c\u53ef\u901a\u8fc7\u8be5\u5217\u8ba1\u7b97\u67e5\u8be2\u4e2d\u4f7f\u7528\u7684\u7d22\u5f15\u7684\u957f\u5ea6\u5728\u4e0d\u635f\u5931\u7cbe\u786e\u5ea6\u7684\u60c5\u51b5\u4e0b\uff0c\u957f\u5ea6\u8d8a\u77ed\u8d8a\u597dkey_len\u663e\u793a\u7684\u503c\u4e3a\u7d22\u5f15\u5b57\u6bb5\u6700\u5927\u7684\u53ef\u80fd\u957f\u5ea6\uff0c\u5e76\u975e\u5b9e\u9645\u4f7f\u7528\u957f\u5ea6\u5373key_len\u662f\u6839\u636e\u5b9a\u4e49\u8ba1\u7b97\u800c\u5f97\uff0c\u4e0d\u662f\u901a\u8fc7\u8868\u5185\u68c0\u7d22\u51fa\u7684"),(0,a.kt)("h4",{id:"8ref\u5b57\u6bb5"},"8\u3001ref\u5b57\u6bb5"),(0,a.kt)("p",null,"\u54ea\u4e9b\u5217\u6216\u5e38\u91cf\u88ab\u7528\u4e8e\u67e5\u627e\u7d22\u5f15\u5217\u4e0a\u7684\u503c"),(0,a.kt)("h4",{id:"9rows\u5b57\u6bb5"},"9\u3001rows\u5b57\u6bb5"),(0,a.kt)("p",null,"\u6839\u636e\u8868\u7edf\u8ba1\u4fe1\u606f\u53ca\u7d22\u5f15\u9009\u7528\u60c5\u51b5\uff0c\u5927\u81f4\u4f30\u7b97\u51fa\u627e\u5230\u6240\u9700\u7684\u8bb0\u5f55\u6240\u9700\u8bfb\u53d6\u7684\u884c\u6570"),(0,a.kt)("h4",{id:"10partitions\u5b57\u6bb5"},"10\u3001partitions\u5b57\u6bb5"),(0,a.kt)("p",null,"\u5339\u914d\u7684\u5206\u533a"),(0,a.kt)("h4",{id:"11filtered\u5b57\u6bb5"},"11\u3001filtered\u5b57\u6bb5"),(0,a.kt)("p",null,"\u5b83\u6307\u8fd4\u56de\u7ed3\u679c\u7684\u884c\u5360\u9700\u8981\u8bfb\u5230\u7684\u884c(rows\u5217\u7684\u503c)\u7684\u767e\u5206\u6bd4"),(0,a.kt)("h4",{id:"12extra\u5b57\u6bb5"},"12\u3001Extra\u5b57\u6bb5"),(0,a.kt)("p",null,"\u8be5\u5217\u5305\u542b\u4e0d\u9002\u5408\u5728\u5176\u5b83\u5217\u4e2d\u663e\u793a\uff0c\u4f46\u5341\u5206\u91cd\u8981\u7684\u989d\u5916\u4fe1\u606f\uff0c\u6211\u4eec\u5217\u4e3e\u51e0\u4e2a\u4f8b\u5b50\uff1a"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff081\uff09Using filesort")),(0,a.kt)("p",null,"\u53ea\u8981\u4f7f\u7528\u975e\u7d22\u5f15\u5b57\u6bb5\u6392\u5e8f\uff0c\u5c31\u4f1a\u51fa\u73b0\u8fd9\u6837\u7684\u5185\u5bb9\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff082\uff09Using temporary")),(0,a.kt)("p",null,"\u4f7f\u7528\u4e86\u4e34\u65f6\u8868\u4fdd\u5b58\u4e2d\u95f4\u7ed3\u679c\uff0cMySQL\u5728\u5bf9\u7ed3\u679c\u6392\u5e8f\u65f6\u4f7f\u7528\u4e34\u65f6\u8868\uff0c\u5e38\u89c1\u4e8e\u6392\u5e8forder by \u548c\u5206\u7ec4\u67e5\u8be2group by\u4f8b\u5b50\uff1a"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff083\uff09Using where")),(0,a.kt)("p",null,"\u4f7f\u7528\u4e86where\u6761\u4ef6\u4f8b\u5b50\uff1a"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff084\uff09impossible where")),(0,a.kt)("p",null,"where\u5b50\u53e5\u7684\u503c\u603b\u662ffalse\uff0c\u4e0d\u80fd\u7528\u6765\u83b7\u53d6\u4efb\u4f55\u6570\u636e\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"explain select * from student where name = '\u767d\u6d01' and name = '\u674e\u5174';\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220516182510228-1803ac6c.png",alt:"image-20220516182510228"}),"image-20220516182510228"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff085\uff09Select tables optimized away")),(0,a.kt)("p",null,"SELECT\u64cd\u4f5c\u5df2\u7ecf\u4f18\u5316\u5230\u4e0d\u80fd\u518d\u4f18\u5316\u4e86\uff08MySQL\u6839\u672c\u6ca1\u6709\u904d\u5386\u8868\u6216\u7d22\u5f15\u5c31\u8fd4\u56de\u6570\u636e\u4e86\uff09\u4f8b\u5b50\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"explain select min(id) from student;\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220516182125161-920194f5.png",alt:"image-20220516182125161"}),"image-20220516182125161"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff086\uff09no matching row in const table")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"explain select * from student where id < 100 and id > 200;\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220516182318832-7e012d1a.png",alt:"image-20220516182318832"}),"image-20220516182318832"),(0,a.kt)("h3",{id:"\u4e09\u4f7f\u7528\u7d22\u5f15\u7684\u95ee\u9898"},"\u4e09\u3001\u4f7f\u7528\u7d22\u5f15\u7684\u95ee\u9898"),(0,a.kt)("p",null,"\u8bbe\u8ba1\u597dMySql\u7684\u7d22\u5f15\u53ef\u4ee5\u8ba9\u4f60\u7684\u6570\u636e\u5e93\u98de\u8d77\u6765\u3002\u4f46\u662f\uff0c\u4e0d\u5408\u7406\u7684\u521b\u5efa\u7d22\u5f15\u540c\u6837\u4f1a\u4ea7\u751f\u5f88\u591a\u95ee\u9898\uff1f\u6211\u4eec\u5728\u8bbe\u8ba1MySql\u7d22\u5f15\u7684\u65f6\u5019\u6709\u4e00\u4e0b\u51e0\u70b9\u6ce8\u610f\uff1a"),(0,a.kt)("h4",{id:"1\u54ea\u4e9b\u60c5\u51b5\u4e0b\u9002\u5408\u5efa\u7d22\u5f15"},"1\u3001\u54ea\u4e9b\u60c5\u51b5\u4e0b\u9002\u5408\u5efa\u7d22\u5f15"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9891\u7e41\u4f5c\u4e3awhere\u6761\u4ef6\u8bed\u53e5\u67e5\u8be2\u7684\u5b57\u6bb5"),(0,a.kt)("li",{parentName:"ul"},"\u5173\u8054\u5b57\u6bb5\u9700\u8981\u5efa\u7acb\u7d22\u5f15"),(0,a.kt)("li",{parentName:"ul"},"\u5206\u7ec4\uff0c\u6392\u5e8f\u5b57\u6bb5\u53ef\u4ee5\u5efa\u7acb\u7d22\u5f15"),(0,a.kt)("li",{parentName:"ul"},"\u7edf\u8ba1\u5b57\u6bb5\u53ef\u4ee5\u5efa\u7acb\u7d22\u5f15\uff0c\u4f8b\u5982count()\uff0cmax()\u7b49")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u5c0f\u6848\u4f8b"),"\uff1a\u8fd8\u8bb0\u5f97\u5728\u5b66\u4e60\u4e34\u65f6\u8868\u65f6\uff0c\u5206\u6790\u8fc7group by\u7684\u6267\u884c\u6d41\u7a0b\u5417\uff08\u5206\u7ec4\u5b57\u6bb5\u6ca1\u6709\u7d22\u5f15\uff09\uff1f\u6709\u4e86\u7d22\u5f15\u4e4b\u540e\u7684\u5206\u7ec4\u6267\u884c\u6d41\u7a0b\u5982\u4e0b\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220512173224645-3b81778d.png",alt:"image-20220512173224645"}),"image-20220512173224645"),(0,a.kt)("p",null,"\u76f4\u63a5\u4f7f\u7528\u7d22\u5f15\u4fe1\u606f\uff0c\u7edf\u8ba1\u6bcf\u4e2a\u7ec4\u7684\u4eba\u6570\uff0c\u76f4\u63a5\u8fd4\u56de\u3002"),(0,a.kt)("h4",{id:"2\u54ea\u4e9b\u60c5\u51b5\u4e0b\u4e0d\u9002\u5408\u5efa\u7d22\u5f15"},"2\u3001\u54ea\u4e9b\u60c5\u51b5\u4e0b\u4e0d\u9002\u5408\u5efa\u7d22\u5f15"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9891\u7e41\u66f4\u65b0\u7684\u5b57\u6bb5\u4e0d\u9002\u5408\u5efa\u7acb\u7d22\u5f15"),(0,a.kt)("li",{parentName:"ul"},"where\u6761\u4ef6\u4e2d\u7528\u4e0d\u5230\u7684\u5b57\u6bb5\u4e0d\u9002\u5408\u5efa\u7acb\u7d22\u5f15"),(0,a.kt)("li",{parentName:"ul"},"\u8868\u6570\u636e\u53ef\u4ee5\u786e\u5b9a\u6bd4\u8f83\u5c11\u7684\u4e0d\u9700\u8981\u5efa\u7d22\u5f15"),(0,a.kt)("li",{parentName:"ul"},"\u6570\u636e\u91cd\u590d\u4e14\u53d1\u5e03\u6bd4\u8f83\u5747\u5300\u7684\u7684\u5b57\u6bb5\u4e0d\u9002\u5408\u5efa\u7d22\u5f15\uff08\u552f\u4e00\u6027\u592a\u5dee\u7684\u5b57\u6bb5\u4e0d\u9002\u5408\u5efa\u7acb\u7d22\u5f15\uff09\uff0c\u4f8b\u5982\u6027\u522b\uff0c\u771f\u5047\u503c"),(0,a.kt)("li",{parentName:"ul"},"\u53c2\u4e0e\u5217\u8ba1\u7b97\u7684\u5217\u4e0d\u9002\u5408\u5efa\u7d22\u5f15\uff0c\u7d22\u5f15\u4f1a\u5931\u6548")),(0,a.kt)("h4",{id:"3\u80fd\u7528\u590d\u5408\u7d22\u5f15\u7684\u8981\u4f7f\u7528\u590d\u5408\u7d22\u5f15"},"3\u3001\u80fd\u7528\u590d\u5408\u7d22\u5f15\u7684\u8981\u4f7f\u7528\u590d\u5408\u7d22\u5f15"),(0,a.kt)("h4",{id:"4null\u503c\u4e5f\u662f\u53ef\u4ee5\u8d70\u7d22\u5f15\u7684\u4ed6\u88ab\u5904\u7406\u6210\u6700\u5c0f\u503c\u653e\u5728b\u6811\u7684\u6700\u5de6\u4fa7"},"4\u3001null\u503c\u4e5f\u662f\u53ef\u4ee5\u8d70\u7d22\u5f15\u7684\uff0c\u4ed6\u88ab\u5904\u7406\u6210\u6700\u5c0f\u503c\u653e\u5728b+\u6811\u7684\u6700\u5de6\u4fa7"),(0,a.kt)("h4",{id:"5\u4f7f\u7528\u77ed\u7d22\u5f15"},"5\u3001\u4f7f\u7528\u77ed\u7d22\u5f15"),(0,a.kt)("p",null,"\u5bf9\u5b57\u7b26\u4e32\u7684\u5217\u521b\u5efa\u7d22\u5f15\uff0c\u5982\u679c\u53ef\u80fd\uff0c\u5e94\u8be5\u6307\u5b9a\u4e00\u4e2a\u524d\u7f00\u957f\u5ea6\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6709\u4e00\u4e2aCHAR(255)\u7684 \u5217\uff0c\u5982\u679c\u5728\u524d10 \u4e2a\u621620 \u4e2a\u5b57\u7b26\u5185\uff0c\u591a\u6570\u503c\u662f\u60df\u4e00\u7684\uff0c\u90a3\u4e48\u5c31\u4e0d\u8981\u5bf9\u6574\u4e2a\u5217\u8fdb\u884c\u7d22\u5f15\u3002\u77ed\u7d22\u5f15\u4e0d\u4ec5\u53ef\u4ee5\u63d0\u9ad8\u67e5\u8be2\u901f\u5ea6\u800c\u4e14\u53ef\u4ee5\u8282\u7701\u78c1\u76d8\u7a7a\u95f4\u548cI/O\u64cd\u4f5c\u3002"),(0,a.kt)("h4",{id:"6\u6392\u5e8f\u7684\u7d22\u5f15\u95ee\u9898"},"6\uff0c\u6392\u5e8f\u7684\u7d22\u5f15\u95ee\u9898"),(0,a.kt)("p",null,"mysql\u67e5\u8be2\u53ea\u4f7f\u7528\u4e00\u4e2a\u7d22\u5f15\uff0c\u56e0\u6b64\u5982\u679cwhere\u5b50\u53e5\u4e2d\u5df2\u7ecf\u4f7f\u7528\u4e86\u7d22\u5f15\u7684\u8bdd\uff0c\u90a3\u4e48order by\u4e2d\u7684\u5217\u662f\u4e0d\u4f1a\u4f7f\u7528\u7d22\u5f15\u7684\u3002\u56e0\u6b64\u6570\u636e\u5e93\u9ed8\u8ba4\u6392\u5e8f\u53ef\u4ee5\u7b26\u5408\u8981\u6c42\u7684\u60c5\u51b5\u4e0b\u4e0d\u8981\u4f7f\u7528\u6392\u5e8f\u64cd\u4f5c\uff1b\u5c3d\u91cf\u4e0d\u8981\u5305\u542b\u591a\u4e2a\u5217\u7684\u6392\u5e8f\uff0c\u5982\u679c\u9700\u8981\uff0c\u6700\u597d\u7ed9\u8fd9\u4e9b\u5217\u521b\u5efa",(0,a.kt)("inlineCode",{parentName:"p"},"\u590d\u5408\u7d22\u5f15"),"\u3002"),(0,a.kt)("h4",{id:"7mysql\u7d22\u5f15\u5931\u6548\u7684\u51e0\u79cd\u60c5\u51b5"},"7\u3001MySQL\u7d22\u5f15\u5931\u6548\u7684\u51e0\u79cd\u60c5\u51b5"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5982\u679c\u6761\u4ef6\u4e2d\u6709or\uff0c\u5373\u4f7f\u5176\u4e2d\u6709\u6761\u4ef6\u5e26\u7d22\u5f15\u4e5f\u4e0d\u4f1a\u4f7f\u7528\u8d70\u7d22\u5f15\uff0c\u9664\u975e\u5168\u90e8\u6761\u4ef6\u90fd\u6709\u7d22\u5f15"),(0,a.kt)("li",{parentName:"ul"},"\u590d\u5408\u7d22\u5f15\u4e0d\u6ee1\u8db3\u6700\u5de6\u539f\u5219\u5c31\u4e0d\u80fd\u4f7f\u7528\u5168\u90e8\u7d22\u5f15"),(0,a.kt)("li",{parentName:"ul"},"like\u67e5\u8be2\u4ee5%\u5f00\u5934"),(0,a.kt)("li",{parentName:"ul"},"\u5b58\u5728\u5217\u8ba1\u7b97")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"explain select * from student where age = (18-1)\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5982\u679cmysql\u4f30\u8ba1\u4f7f\u7528\u5168\u8868\u626b\u63cf\u8981\u6bd4\u4f7f\u7528\u7d22\u5f15\u5feb\uff0c\u5219\u4e0d\u4f7f\u7528\u7d22\u5f15\uff0c\u6bd4\u5982\u7ed3\u679c\u7684\u91cf\u5f88\u5927"),(0,a.kt)("li",{parentName:"ul"},"\u5b58\u5728\u7c7b\u578b\u8f6c\u5316")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"-- \u7d22\u5f15\u4e0d\u5931\u6548\nexplain select * from student where age = '18'  \nexplain select * from ydl_user where login_date = '2008-05-31 17:20:54'\n-- \u7d22\u5f15\u5931\u6548 \u672c\u6765\u662f\u5b57\u7b26\u4e32\uff0c\u4f60\u4f7f\u7528\u6570\u5b57\u548c\u4ed6\u6bd4\u8f83\nexplain select * from student where gander = 1\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220518183149811-7d62b011.png",alt:"image-20220518183149811"}),"image-20220518183149811"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220518183122831-b15ccfd6.png",alt:"image-20220518183122831"}),"image-20220518183122831"),(0,a.kt)("h2",{id:"\u7b2c\u4e03\u7ae0-\u9501\u673a\u5236"},"\u7b2c\u4e03\u7ae0 \u9501\u673a\u5236"),(0,a.kt)("p",null,"\u9501\u662f\u4e3a\u4e86\u4fdd\u8bc1\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u4e00\u81f4\u6027\uff0c\u4f7f\u5404\u79cd\u3010\u5171\u4eab\u8d44\u6e90\u3011\u5728\u88ab\u8bbf\u95ee\u65f6\u53d8\u5f97\u3010\u6709\u5e8f\u3011\u800c\u8bbe\u8ba1\u7684\u4e00\u79cd\u89c4\u5219\u3002"),(0,a.kt)("p",null,"MysQL\u4e2d\u4e0d\u540c\u7684\u5b58\u50a8\u5f15\u64ce\u652f\u6301\u4e0d\u540c\u7684\u9501\u673a\u5236\u3002 InoDB\u652f\u6301\u3010\u884c\u9501\u3011\uff0c\u6709\u65f6\u4e5f\u4f1a\u5347\u7ea7\u4e3a\u8868\u9501\uff0cMyIsam\u53ea\u652f\u6301\u8868\u9501\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u3010\u8868\u9501\u3011\u7684\u7279\u70b9\u5c31\u662f\u5f00\u9500\u5c0f\u3001\u52a0\u9501\u5feb\uff0c\u4e0d\u4f1a\u51fa\u73b0\u6b7b\u9501\u3002\u9501\u7c92\u5ea6\u5927\uff0c\u53d1\u751f\u9501\u51b2\u7a81\u7684\u6982\u7387\u5c0f\uff0c\u5e76\u53d1\u5ea6\u76f8\u5bf9\u4f4e\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u3010\u884c\u9501\u3011\u7684\u7279\u70b9\u5c31\u662f\u5f00\u9500\u5927\u3001\u52a0\u9501\u6162\uff0c\u4f1a\u51fa\u73b0\u6b7b\u9501\u3002\u9501\u7c92\u5ea6\u5c0f\uff0c\u53d1\u751f\u9501\u51b2\u7a81\u7684\u6982\u7387\u9ad8\uff0c\u5e76\u53d1\u5ea6\u9ad8\u3002"),(0,a.kt)("p",{parentName:"li"},"  \u4eca\u5929\u6211\u4eec\u8bb2\u9501\u4e3b\u8981\u4eceInnoDB\u5f15\u64ce\u6765\u8bb2\uff0c\u56e0\u4e3a\u5b83\u65e2\u652f\u6301\u884c\u9501\u3001\u4e5f\u652f\u6301\u8868\u9501\u3002"))),(0,a.kt)("h3",{id:"\u4e00innodb\u7684\u9501\u7c7b\u578b"},"\u4e00\u3001InnoDB\u7684\u9501\u7c7b\u578b"),(0,a.kt)("p",null,"InnoDB\u7684\u9501\u7c7b\u578b\u4e3b\u8981\u6709\u8bfb\u9501(\u5171\u4eab\u9501)\u3001\u5199\u9501(\u6392\u4ed6\u9501)\u3001\u610f\u5411\u9501\u548cMDL\u9501\u3002"),(0,a.kt)("h4",{id:"1s\u9501"},"1\u3001s\u9501"),(0,a.kt)("p",null,"\u8bfb\u9501\uff08\u5171\u4eab\u9501\uff0cshared lock\uff09\u7b80\u79f0S\u9501\u3002\u4e00\u4e2a\u4e8b\u52a1\u83b7\u53d6\u4e86\u4e00\u4e2a\u6570\u636e\u884c\u7684\u8bfb\u9501\uff0c\u5176\u4ed6\u4e8b\u52a1\u4e5f\u80fd\u83b7\u5f97\u8be5\u884c\u5bf9\u5e94\u7684\u8bfb\u9501\uff0c\u4f46\u4e0d\u80fd\u83b7\u5f97\u5199\u9501\uff0c\u5373\u4e00\u4e2a\u4e8b\u52a1\u5728\u8bfb\u53d6\u4e00\u4e2a\u6570\u636e\u884c\u65f6\uff0c\u5176\u4ed6\u4e8b\u52a1\u4e5f\u53ef\u4ee5\u8bfb\uff0c\u4f46\u4e0d\u80fd\u5bf9\u8be5\u6570\u884c\u589e\u5220\u6539\u7684\u64cd\u4f5c\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u6ce8\uff1a"),"\u8bfb\u9501\u662f\u5171\u4eab\u9501\uff0c\u591a\u4e2a\u4e8b\u52a1\u53ef\u4ee5\u540c\u65f6\u6301\u6709\uff0c\u5f53\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u4e8b\u52a1\u6301\u6709\u5171\u4eab\u9501\u65f6\uff0c\u88ab\u9501\u7684\u6570\u636e\u5c31\u4e0d\u80fd\u4fee\u6539\u3002"),(0,a.kt)("p",null,"\u7b80\u800c\u8a00\u4e4b\uff1a\u5c31\u662f\u53ef\u4ee5\u591a\u4e2a\u4e8b\u52a1\u8bfb\uff0c\u4f46\u53ea\u80fd\u4e00\u4e2a\u4e8b\u52a1\u5199\u3002"),(0,a.kt)("p",null,"\u8bfb\u9501\u662f\u901a\u8fc7\u3010select.... lock in share mode\u3011\u8bed\u53e5\u7ed9\u88ab\u8bfb\u53d6\u7684\u884c\u8bb0\u5f55\u6216\u884c\u8bb0\u5f55\u7684\u8303\u56f4\u4e0a\u52a0\u4e00\u4e2a\u8bfb\u9501,\u8ba9\u5176\u4ed6\u4e8b\u52a1\u53ef\u4ee5\u8bfb\uff0c\u4f46\u662f\u8981\u60f3\u7533\u8bf7\u52a0\u5199\u9501\uff0c\u90a3\u5c31\u4f1a\u88ab\u963b\u585e\u3002"),(0,a.kt)("p",null,"\u4e8b\u52a1\u4e00\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"begin;\nselect * from ydl_student where id = 1 lock in share mode;\n")),(0,a.kt)("p",null,"\u4e8b\u52a1\u4e8c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"begin;\nupdate ydl_student set score = '90' where id = 1;\n")),(0,a.kt)("p",null,"\u5361\u4f4f\u4e86\uff0c\u8bf4\u660e\u7a0b\u5e8f\u88ab\u963b\u585e\uff0c\u786e\u5b9e\u52a0\u4e86\u9501\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220517195919549-32b88fda.png",alt:"image-20220517195919549"}),"image-20220517195919549"),(0,a.kt)("p",null,"s\u9501\u662f\u53ef\u4ee5\u88ab\u591a\u4e2a\u4e8b\u52a1\u540c\u65f6\u83b7\u53d6\u7684\uff0c\u6211\u4eec\u5728\u4e24\u4e2a\u4e0d\u540c\u7684\u4e8b\u52a1\u4e2d\u5206\u522b\u5bf9\u540c\u4e00\u884c\u6570\u636e\u52a0\u4e0as\u9501\uff0c\u7ed3\u679c\u90fd\u53ef\u4ee5\u6210\u529f\uff0c\u5982\u4e0b\u56fe\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220517202512738-401cab24.png",alt:"image-20220517202512738"}),"image-20220517202512738"),(0,a.kt)("h4",{id:"2x\u9501"},"2\u3001x\u9501"),(0,a.kt)("p",null,"\u5199\u9501\uff0c\u4e5f\u53eb\u6392\u4ed6\u9501\uff0c\u6216\u8005\u53eb\u72ec\u5360\u6240\uff0c\u7b80\u79f0x\u9501\uff08exclusive\uff09\u3002\u4e00\u4e2a\u4e8b\u52a1\u83b7\u53d6\u4e86\u4e00\u4e2a\u6570\u636e\u884c\u7684\u5199\u9501\uff0c\u65e2\u53ef\u4ee5\u8bfb\u8be5\u884c\u7684\u8bb0\u5f55\uff0c\u4e5f\u53ef\u4ee5\u4fee\u6539\u8be5\u884c\u7684\u8bb0\u5f55\u3002\u4f46\u5176\u4ed6\u4e8b\u52a1\u5c31\u4e0d\u80fd\u518d\u83b7\u53d6\u8be5\u884c\u7684\u5176\u4ed6\u4efb\u4f55\u7684\u9501\uff0c\u5305\u62ecs\u9501\uff0c\u76f4\u5230\u5f53\u524d\u4e8b\u52a1\u5c06\u9501\u91ca\u653e\u3002\u3010\u8fd9\u4fdd\u8bc1\u4e86\u5176\u4ed6\u4e8b\u52a1\u5728\u5f53\u524d\u4e8b\u52a1\u91ca\u653e\u9501\u4e4b\u524d\u4e0d\u80fd\u518d\u4fee\u6539\u6570\u636e\u3011\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u6ce8\uff1a"),"\u5199\u9501\u662f\u72ec\u5360\u9501\uff0c\u53ea\u6709\u4e00\u4e2a\u4e8b\u52a1\u53ef\u4ee5\u6301\u6709\uff0c\u5f53\u8fd9\u4e2a\u4e8b\u52a1\u6301\u6709\u5199\u9501\u65f6\uff0c\u88ab\u9501\u7684\u6570\u636e\u5c31\u4e0d\u80fd\u88ab\u5176\u4ed6\u4e8b\u52a1\u4fee\u6539\u3002"),(0,a.kt)("p",null,"\uff081\uff09\u4e00\u4e9bDML\u8bed\u53e5\u7684\u64cd\u4f5c\u90fd\u4f1a\u5bf9\u884c\u8bb0\u5f55\u52a0\u5199\u9501\u3002"),(0,a.kt)("p",null,"\u4e8b\u52a1\u4e00\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"begin;\nupdate ydl_student set score = '90' where id = 1;\n")),(0,a.kt)("p",null,"\u4e8b\u52a1\u4e8c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"begin;\nupdate ydl_student set score = '88' where id = 1;\n")),(0,a.kt)("p",null,"\u5361\u4f4f\u4e86\uff0c\u8bf4\u660e\u7a0b\u5e8f\u88ab\u963b\u585e\uff0c\u786e\u5b9e\u52a0\u4e86\u9501\u3002\u4f46\u662f\uff0c\u6211\u4eec\u53d1\u73b0\u5176\u4ed6\u4e8b\u52a1\u8fd8\u80fd\u8bfb\uff0c\u6709\u70b9\u4e0d\u7b26\u5408\u903b\u8f91\uff0c\u8fd9\u662f\u5e94\u4e3amysql\u5b9e\u73b0\u4e86MVCC\u6a21\u578b\uff0c\u540e\u8fb9\u4f1a\u8be6\u7ec6\u4ecb\u7ecd\u3002"),(0,a.kt)("p",null,"\uff082\uff09\u6bd4\u8f83\u7279\u6b8a\u7684\u5c31\u662fselect for update\uff0c\u5b83\u4f1a\u5bf9\u8bfb\u53d6\u7684\u884c\u8bb0\u5f55\u4e0a\u52a0\u4e00\u4e2a\u5199\u9501\uff0c\u90a3\u4e48\u5176\u4ed6\u4efb\u4f55\u4e8b\u52a1\u4e0d\u80fd\u5bf9\u88ab\u9501\u5b9a\u7684\u884c\u4e0a\u52a0\u4efb\u4f55\u9501\u4e86\uff0c\u8981\u4e0d\u7136\u4f1a\u88ab\u963b\u585e\u3002"),(0,a.kt)("p",null,"\u4e8b\u52a1\u4e00\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"begin;\nselect * from ydl_student where id = 1 for update;\n")),(0,a.kt)("p",null,"\u4e8b\u52a1\u4e8c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"begin;\nupdate teacher set name = 'lucy2' where id = 1;\n")),(0,a.kt)("p",null,"\u5361\u4f4f\u4e86\uff0c\u8bf4\u660e\u52a0\u4e86\u9501\u4e86\u3002"),(0,a.kt)("p",null,"\uff083\uff09x\u9501\u662f\u53ea\u80fd\u88ab\u4e00\u4e2a\u4e8b\u52a1\u83b7\u53d6\uff0c\u6211\u4eec\u5728\u4e24\u4e2a\u4e0d\u540c\u7684\u4e8b\u52a1\u4e2d\u5206\u522b\u5bf9\u540c\u4e00\u884c\u6570\u636e\u52a0\u4e0ax\u9501\uff0c\u53d1\u73b0\u540e\u8005\u4f1a\u88ab\u963b\u585e\uff0c\u5982\u4e0b\u56fe\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220517202800421-b9a51153.png",alt:"image-20220517202800421"}),"image-20220517202800421"),(0,a.kt)("h4",{id:"3\u8bb0\u5f55\u9501record-lock"},"3\u3001\u8bb0\u5f55\u9501\uff08Record Lock\uff09"),(0,a.kt)("p",null,"\u8bb0\u5f55\u9501\u5c31\u662f\u6211\u4eec\u5e38\u8bf4\u7684\u884c\u9501\uff0c\u53ea\u6709innodb\u624d\u652f\u6301\uff0c\u6211\u4eec\u4f7f\u7528\u4ee5\u4e0b\u56db\u4e2a\u6848\u4f8b\u6765\u9a8c\u8bc1\u8bb0\u5f55\u9501\u7684\u5b58\u5728\uff1a"),(0,a.kt)("p",null,"\uff081\uff09\u4e24\u4e2a\u4e8b\u52a1\u4fee\u6539\u3010\u540c\u4e00\u884c\u3011\u8bb0\u5f55\uff0c\u8be5\u573a\u666f\u4e0b\uff0cwhere\u6761\u4ef6\u4e2d\u7684\u5217\u4e0d\u52a0\u7d22\u5f15\u3002"),(0,a.kt)("p",null,"\u4e8b\u52a1\u4e00\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"begin;\nupdate ydl_student set score = '77' where name = 'jack';\n")),(0,a.kt)("p",null,"\u4e8b\u52a1\u4e8c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"begin;\nupdate ydl_student set score = '80' where name = 'jack';\n")),(0,a.kt)("p",null,"\u53d1\u73b0\u4e8b\u52a1\u4e8c\u5361\u4f4f\u4e86\uff0c\u53ea\u6709\u4e8b\u52a1\u4e00\u63d0\u4ea4\u4e86\uff0c\u4e8b\u52a1\u4e8c\u624d\u80fd\u7ee7\u7eed\u6267\u884c\uff0c\u5f88\u660e\u663e\uff0c\u8fd9\u4e00\u884c\u6570\u636e\u88ab\u3010\u9501\u3011\u4f4f\u4e86\u3002"),(0,a.kt)("p",null,"\uff082\uff09\u4e24\u4e2a\u4e8b\u52a1\u4fee\u6539\u540c\u8868\u3010\u4e0d\u540c\u884c\u3011\u8bb0\u5f55\uff0c\u6b64\u65f6where\u6761\u4ef6\u4e5f\u4e0d\u52a0\u7d22\u3002"),(0,a.kt)("p",null,"\u4e8b\u52a1\u4e00\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"begin;\nupdate ydl_student set score = '76' where name = 'hellen';\n")),(0,a.kt)("p",null,"\u4e8b\u52a1\u4e8c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"begin;\nupdate ydl_student set score = '66' where name = 'jack';\n")),(0,a.kt)("p",null,"\u73b0\u4e8b\u52a1\u4e8c\u5361\u4f4f\u4e86\uff0c\u53ea\u6709\u4e8b\u52a1\u4e00\u63d0\u4ea4\u4e86\uff0c\u4e8b\u52a1\u4e8c\u624d\u80fd\u7ee7\u7eed\u6267\u884c\uff0c\u5f88\u660e\u663e\uff0c\u8868\u88ab\u3010\u9501\u3011\u4f4f\u4e86\u3002"),(0,a.kt)("p",null,"\uff083\uff09\u4e24\u4e2a\u4e8b\u52a1\u4fee\u6539\u3010\u540c\u4e00\u884c\u3011\u8bb0\u5f55\uff0cwhere\u6761\u4ef6\u52a0\u7d22\u5f15"),(0,a.kt)("p",null,"\u4e8b\u52a1\u4e00\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"begin;\nupdate ydl_student set score = '99' where name = 'jack';\n")),(0,a.kt)("p",null,"\u4e8b\u52a1\u4e8c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"begin;\nupdate ydl_student set score = '79' where name = 'jack';\n")),(0,a.kt)("p",null,"\u73b0\u4e8b\u52a1\u4e8c\u5361\u4f4f\u4e86\uff0c\u53ea\u6709\u4e8b\u52a1\u4e00\u63d0\u4ea4\u4e86\uff0c\u4e8b\u52a1\u4e8c\u624d\u80fd\u7ee7\u7eed\u6267\u884c\uff0c\u5f88\u660e\u663e\uff0c\u8fd9\u4e00\u884c\u6570\u636e\u88ab\u3010\u9501\u3011\u4f4f\u4e86\u3002"),(0,a.kt)("p",null,"\uff084\uff09\u4e24\u4e2a\u4e8b\u52a1\u4fee\u6539\u540c\u8868\u3010\u4e0d\u540c\u884c\u3011\u8bb0\u5f55\uff0c\u6b64\u65f6where\u6761\u4ef6\u52a0\u7d22\u3002"),(0,a.kt)("p",null,"\u4e8b\u52a1\u4e00\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"begin;\nupdate ydl_student set score = '77' where name = 'hellen';\n")),(0,a.kt)("p",null,"\u4e8b\u52a1\u4e8c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"begin;\nupdate ydl_student set score = '77' where name = 'jack';\n")),(0,a.kt)("p",null,"\u53d1\u73b0\u90fd\u53ef\u4ee5\u987a\u5229\u4fee\u6539\uff0c\u8bf4\u660e\u9501\u7684\u7684\u786e\u662f\u884c\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u8bc1\u660e\uff1a"),"\u884c\u9501\u662f\u52a0\u5728\u7d22\u5f15\u4e0a\u7684\uff0c\u8fd9\u662f\u6807\u51c6\u7684\u884c\u7ea7\u9501\u3002"),(0,a.kt)("h4",{id:"4\u95f4\u9699\u9501gap-lock"},"4\u3001\u95f4\u9699\u9501\uff08GAP Lock\uff09"),(0,a.kt)("p",null,"\u95f4\u9699\u9501\u5e2e\u6211\u4eec\u89e3\u51b3\u4e86mysql\u5728rr\u7ea7\u522b\u4e0b\u7684\u4e00\u90e8\u5206\u5e7b\u8bfb\u95ee\u9898\u3002\u95f4\u9699\u9501\u9501\u5b9a\u7684\u662f\u8bb0\u5f55\u8303\u56f4\uff0c\u4e0d\u5305\u542b\u8bb0\u5f55\u672c\u8eab\uff0c\u4e5f\u5c31\u662f\u4e0d\u5141\u8bb8\u5728\u67d0\u4e2a\u8303\u56f4\u5185\u63d2\u5165\u6570\u636e\u3002"),(0,a.kt)("p",null,"\u95f4\u9699\u9501\u751f\u6210\u7684\u6761\u4ef6\uff1a"),(0,a.kt)("p",null,"1\u3001A\u4e8b\u52a1\u4f7f\u7528where\u8fdb\u884c\u8303\u56f4\u68c0\u7d22\u65f6\u672a\u63d0\u4ea4\u4e8b\u52a1\uff0c\u6b64\u65f6B\u4e8b\u52a1\u5411A\u6ee1\u8db3\u68c0\u7d22\u6761\u4ef6\u7684\u8303\u56f4\u5185\u63d2\u5165\u6570\u636e\u3002"),(0,a.kt)("p",null,"2\u3001where\u6761\u4ef6\u5fc5\u987b\u6709\u7d22\u5f15\u3002"),(0,a.kt)("p",null,"\u7b2c\u4e00\u6b65\u628ateacher\u8868\u7684id\u76844\u6539\u62108"),(0,a.kt)("p",null,"\u4e8b\u52a1\u4e00\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"begin;\nselect * from ydl_student where id between 3 and 7 lock in share mode;\n")),(0,a.kt)("p",null,"\u4e8b\u52a1\u4e8c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"begin;\ninsert into ydl_student values (5,'tom',66,'d');\n")),(0,a.kt)("p",null,"\u53d1\u73b0\u5361\u4f4f\u4e86\uff0c\u7b2c\u4e00\u4e2a\u4e8b\u52a1\u4f1a\u5c06id\u57283\u52307\u4e4b\u95f4\u7684\u6570\u636e\u5168\u90e8\u9501\u5b9a\uff0c\u4e0d\u5141\u8bb8\u5728\u7f1d\u9699\u95f4\u63d2\u5165\u3002"),(0,a.kt)("p",null,"\u4e8b\u52a1\u4e09\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"begin;\ninsert into ydl_student values (11,'tom',66,'d');\n")),(0,a.kt)("p",null,"\u63d2\u5165\u4e00\u4e2aid\u4e3a11\u7684\u6570\u636e\uff0c\u7adf\u7136\u6210\u529f\u4e86\uff0c\u56e0\u4e3a11\u4e0d\u5728\u4e8b\u52a1\u4e00\u7684\u68c0\u7d22\u7684\u8303\u56f4\u3002"),(0,a.kt)("h4",{id:"5\u8bb0\u5f55\u9501\u548c\u95f4\u9699\u9501\u7684\u7ec4\u5408next-key-lock"},"5\u3001\u8bb0\u5f55\u9501\u548c\u95f4\u9699\u9501\u7684\u7ec4\u5408\uff08next-key lock\uff09"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u4e34\u952e\u9501"),"\uff0c\u662f",(0,a.kt)("strong",{parentName:"p"},"\u8bb0\u5f55\u9501\u4e0e\u95f4\u9699\u9501\u7684\u7ec4\u5408"),"\uff0c\u5b83\u7684\u5c01\u9501\u8303\u56f4\uff0c\u65e2\u5305\u542b\u3010\u7d22\u5f15\u8bb0\u5f55\u3011\uff0c\u53c8\u5305\u542b\u3010\u7d22\u5f15\u533a\u95f4\u3011\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u6ce8\uff1a","*","*\u4e34\u952e\u9501\u7684\u4e3b\u8981\u76ee\u7684\uff0c\u4e5f\u662f\u4e3a\u4e86\u907f\u514d","*","*\u5e7b\u8bfb"),"(Phantom Read)\u3002\u5982\u679c\u628a\u4e8b\u52a1\u7684\u9694\u79bb\u7ea7\u522b\u964d\u7ea7\u4e3aRC\uff0c\u4e34\u952e\u9501\u5219\u4e5f\u4f1a\u5931\u6548\u3002"),(0,a.kt)("h4",{id:"6mdl\u9501"},"6\u3001MDL\u9501"),(0,a.kt)("p",null,"MySQL 5.5\u5f15\u5165\u4e86meta data lock\uff0c\u7b80\u79f0MDL\u9501\uff0c\u7528\u4e8e\u4fdd\u8bc1\u8868\u4e2d",(0,a.kt)("inlineCode",{parentName:"p"},"\u5143\u6570\u636e"),"\u7684\u4fe1\u606f\u3002\u5728\u4f1a\u8bddA\u4e2d\uff0c\u8868\u5f00\u542f\u4e86\u67e5\u8be2\u4e8b\u52a1\u540e\uff0c\u4f1a\u81ea\u52a8\u83b7\u5f97\u4e00\u4e2aMDL\u9501\uff0c\u4f1a\u8bddB\u5c31\u4e0d\u53ef\u4ee5\u6267\u884c\u4efb\u4f55DDL\u8bed\u53e5\uff0c\u4e0d\u80fd\u6267\u884c\u4e3a\u8868\u4e2d\u6dfb\u52a0\u5b57\u6bb5\u7684\u64cd\u4f5c\uff0c\u4f1a\u7528MDL\u9501\u6765\u4fdd\u8bc1\u6570\u636e\u4e4b\u95f4\u7684\u4e00\u81f4\u6027\u3002"),(0,a.kt)("p",null,"\u5143\u6570\u636e\u5c31\u662f\u63cf\u8ff0\u6570\u636e\u7684\u6570\u636e\uff0c\u4e5f\u5c31\u662f\u4f60\u7684\u8868\u7ed3\u6784\u3002\u610f\u8bc6\u662f\u5728\u4f60\u5f00\u542f\u4e86\u4e8b\u52a1\u4e4b\u540e\u83b7\u5f97\u4e86\u610f\u5411\u9501\uff0c\u5176\u4ed6\u4e8b\u52a1\u5c31\u4e0d\u80fd\u66f4\u6539\u4f60\u7684\u8868\u7ed3\u6784\u3002MDL\u9501\u90fd\u662f\u4e3a\u4e86\u9632\u6b62\u5728\u4e8b\u52a1\u8fdb\u884c\u4e2d\uff0c\u6267\u884cDDL\u8bed\u53e5\u5bfc\u81f4\u6570\u636e\u4e0d\u4e00\u81f4\u3002"),(0,a.kt)("h4",{id:"7\u6b7b\u9501\u95ee\u9898"},"7\u3001\u6b7b\u9501\u95ee\u9898"),(0,a.kt)("p",null,"\u53d1\u751f\u6b7b\u9501\u7684",(0,a.kt)("strong",{parentName:"p"},"\u5fc5\u8981\u6761\u4ef6"),"\u67094\u4e2a\uff0c\u5206\u522b\u4e3a\u4e92\u65a5\u6761\u4ef6\u3001\u4e0d\u53ef\u5265\u593a\u6761\u4ef6\u3001\u8bf7\u6c42\u4e0e\u4fdd\u6301\u6761\u4ef6\u548c\u5faa\u73af\u7b49\u5f85\u6761\u4ef6\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u4e92\u65a5\u6761\u4ef6"),"\uff0c\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\uff0c\u8ba1\u7b97\u673a\u4e2d\u7684\u67d0\u4e2a\u8d44\u6e90\u53ea\u80fd\u88ab\u4e00\u4e2a\u8fdb\u7a0b\u5360\u7528\u3002\u6b64\u65f6\uff0c\u5982\u679c\u5176\u4ed6\u8fdb\u7a0b\u8bf7\u6c42\u8be5\u8d44\u6e90\uff0c\u5219\u53ea\u80fd\u7b49\u5f85\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u4e0d\u53ef\u5265\u593a\u6761\u4ef6"),"\uff0c\u67d0\u4e2a\u8fdb\u7a0b\u83b7\u5f97\u7684\u8d44\u6e90\u5728\u4f7f\u7528\u5b8c\u6bd5\u4e4b\u524d\uff0c\u4e0d\u80fd\u88ab\u5176\u4ed6\u8fdb\u7a0b\u5f3a\u884c\u593a\u8d70\uff0c\u53ea\u80fd\u7531\u83b7\u5f97\u8d44\u6e90\u7684\u8fdb\u7a0b\u4e3b\u52a8\u91ca\u653e\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u8bf7\u6c42\u4e0e\u4fdd\u6301\u6761\u4ef6"),"\uff0c\u8fdb\u7a0b\u5df2\u7ecf\u83b7\u5f97\u4e86\u81f3\u5c11\u4e00\u4e2a\u8d44\u6e90\uff0c\u53c8\u8981\u8bf7\u6c42\u5176\u4ed6\u8d44\u6e90\uff0c\u4f46\u8bf7\u6c42\u7684\u8d44\u6e90\u5df2\u7ecf\u88ab\u5176\u4ed6\u8fdb\u7a0b\u5360\u6709\uff0c\u6b64\u65f6\u8bf7\u6c42\u7684\u8fdb\u7a0b\u5c31\u4f1a\u88ab\u963b\u585e\uff0c\u5e76\u4e14\u4e0d\u4f1a\u91ca\u653e\u81ea\u5df1\u5df2\u83b7\u5f97\u7684\u8d44\u6e90\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5faa\u73af\u7b49\u5f85\u6761\u4ef6"),"\uff0c\u7cfb\u7edf\u4e2d\u7684\u8fdb\u7a0b\u4e4b\u95f4\u76f8\u4e92\u7b49\u5f85\uff0c\u540c\u65f6\u5404\u81ea\u5360\u7528\u7684\u8d44\u6e90\u53c8\u4f1a\u88ab\u4e0b\u4e00\u4e2a\u8fdb\u7a0b\u6240\u8bf7\u6c42\u3002\u4f8b\u5982\u6709\u8fdb\u7a0bA\u3001\u8fdb\u7a0bB\u548c\u8fdb\u7a0bC\u4e09\u4e2a\u8fdb\u7a0b\uff0c\u8fdb\u7a0bA\u8bf7\u6c42\u7684\u8d44\u6e90\u88ab\u8fdb\u7a0bB\u5360\u7528\uff0c\u8fdb\u7a0bB\u8bf7\u6c42\u7684\u8d44\u6e90\u88ab\u8fdb\u7a0bC\u5360\u7528\uff0c\u8fdb\u7a0bC\u8bf7\u6c42\u7684\u8d44\u6e90\u88ab\u8fdb\u7a0bA\u5360\u7528\uff0c\u4e8e\u662f\u5f62\u6210\u4e86\u5faa\u73af\u7b49\u5f85\u6761\u4ef6\uff0c\u5982\u56fe1-7\u6240\u793a\u3002")),(0,a.kt)("p",null,"\u6211\u6a21\u62df\u4e86\u4e00\u4e2a\u6b7b\u9501\u573a\u666f\uff0c\u5982\u4e0b\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220517205641323-59d24a58.png",alt:"image-20220517205641323"}),"image-20220517205641323"),(0,a.kt)("p",null,"InnoDB\u4f7f\u7528\u7684\u662f\u884c\u7ea7\u9501\uff0c\u5728\u67d0\u79cd\u60c5\u51b5\u4e0b\u4f1a\u4ea7\u751f\u6b7b\u9501\u95ee\u9898\uff0c\u6240\u4ee5InnoDB\u5b58\u50a8\u5f15\u64ce\u91c7\u7528\u4e86\u4e00\u79cd\u53eb\u4f5c",(0,a.kt)("strong",{parentName:"p"},"\u7b49\u5f85\u56fe"),"\uff08wait-for graph\uff09\u7684\u65b9\u6cd5\u6765\u81ea\u52a8\u68c0\u6d4b\u6b7b\u9501\uff0c\u5982\u679c\u53d1\u73b0\u6b7b\u9501\uff0c\u5c31\u4f1a\u81ea\u52a8\u56de\u6eda\u4e00\u4e2a\u4e8b\u52a1\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220517205123881-a8b4a1ca.png",alt:"image-20220517205123881"}),"image-20220517205123881"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u5728MySQL\u4e2d\uff0c\u901a\u5e38\u901a\u8fc7\u4ee5\u4e0b\u51e0\u79cd\u65b9\u5f0f\u6765\u907f\u514d\u6b7b\u9501\u3002")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5c3d\u91cf\u8ba9\u6570\u636e\u8868\u4e2d\u7684\u6570\u636e\u68c0\u7d22\u90fd\u901a\u8fc7\u7d22\u5f15\u6765\u5b8c\u6210\uff0c\u907f\u514d\u65e0\u6548\u7d22\u5f15\u5bfc\u81f4\u884c\u9501\u5347\u7ea7\u4e3a\u8868\u9501\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u5408\u7406\u8bbe\u8ba1\u7d22\u5f15\uff0c\u5c3d\u91cf\u7f29\u5c0f\u9501\u7684\u8303\u56f4\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u5c3d\u91cf\u51cf\u5c11\u67e5\u8be2\u6761\u4ef6\u7684\u8303\u56f4\uff0c\u5c3d\u91cf\u907f\u514d\u95f4\u9699\u9501\u6216\u7f29\u5c0f\u95f4\u9699\u9501\u7684\u8303\u56f4\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u5c3d\u91cf\u63a7\u5236\u4e8b\u52a1\u7684\u5927\u5c0f\uff0c\u51cf\u5c11\u4e00\u6b21\u4e8b\u52a1\u9501\u5b9a\u7684\u8d44\u6e90\u6570\u91cf\uff0c\u7f29\u77ed\u9501\u5b9a\u8d44\u6e90\u7684\u65f6\u95f4\u3002\u5982\u679c\u4e00\u6761SQL\u8bed\u53e5\u6d89\u53ca\u4e8b\u52a1\u52a0\u9501\u64cd\u4f5c\uff0c\u5219\u5c3d\u91cf\u5c06\u5176\u653e\u5728\u6574\u4e2a\u4e8b\u52a1\u7684\u6700\u540e\u6267\u884c\u3002")),(0,a.kt)("h3",{id:"\u4e8c\u8868\u9501"},"\u4e8c\u3001\u8868\u9501"),(0,a.kt)("p",null,"1\u3001\u5bf9\u4e8eInnoDB\u8868\uff0c\u5728\u7edd\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u90fd\u5e94\u8be5\u4f7f\u7528\u3010\u884c\u7ea7\u9501\u3011\uff0c\u56e0\u4e3a\u4e8b\u52a1\u548c\u884c\u9501\u5f80\u5f80\u662f\u6211\u4eec\u4e4b\u6240\u4ee5\u9009\u62e9InnoDB\u8868\u7684\u7406\u7531\u3002\u4f46\u5728\u4e2a\u53e6\u7279\u6b8a\u4e8b\u52a1\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u8003\u8651\u4f7f\u7528\u8868\u7ea7\u9501\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u7b2c\u4e00\u79cd\u60c5\u51b5\u662f\uff1a\u4e8b\u52a1\u9700\u8981\u66f4\u65b0\u3010\u5927\u90e8\u5206\u6216\u5168\u90e8\u6570\u636e\u3011\uff0c\u8868\u53c8\u6bd4\u8f83\u5927\uff0c\u5982\u679c\u4f7f\u7528\u9ed8\u8ba4\u7684\u884c\u9501\uff0c\u4e0d\u4ec5\u8fd9\u4e2a\u4e8b\u52a1\u6267\u884c\u6548\u7387\u4f4e\uff0c\u800c\u4e14\u53ef\u80fd\u9020\u6210\u5176\u4ed6\u4e8b\u52a1\u957f\u65f6\u95f4\u9501\u7b49\u5f85\u548c\u9501\u51b2\u7a81\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u53ef\u4ee5\u8003\u8651\u4f7f\u7528\u8868\u9501\u6765\u63d0\u9ad8\u8be5\u4e8b\u52a1\u7684\u6267\u884c\u901f\u5ea6\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u7b2c\u4e8c\u79cd\u60c5\u51b5\u662f\uff1a\u4e8b\u52a1\u6d89\u53ca\u591a\u4e2a\u8868\uff0c\u6bd4\u8f83\u590d\u6742\uff0c\u5f88\u53ef\u80fd\u5f15\u8d77\u6b7b\u9501\uff0c\u9020\u6210\u5927\u91cf\u4e8b\u52a1\u56de\u6eda\u3002\u8fd9\u79cd\u60c5\u51b5\u4e5f\u53ef\u4ee5\u8003\u8651\u4e00\u6b21\u6027\u9501\u5b9a\u4e8b\u52a1\u6d89\u53ca\u7684\u8868\uff0c\u4ece\u800c\u907f\u514d\u6b7b\u9501\u3001\u51cf\u5c11\u6570\u636e\u5e93\u56e0\u4e8b\u52a1\u56de\u6eda\u5e26\u6765\u7684\u5f00\u9500\u3002")),(0,a.kt)("p",null,"2\u3001\u5728InnoDB\u4e0b \uff0c\u4e3b\u52a8\u4e0a\u8868\u9501\u7684\u65b9\u5f0f\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"lock tables teacher write,student read;\nselect * from teacher;\ncommit;\nunlock tables;\n")),(0,a.kt)("p",null,"\u4f7f\u7528\u65f6\u6709\u51e0\u70b9\u9700\u8981\u989d\u5916\u6ce8\u610f\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u3010LOCK TALBES\u3011\u867d\u7136\u53ef\u4ee5\u7ed9InnoDB\u52a0\u8868\u7ea7\u9501\uff0c\u4f46\u5fc5\u987b\u8bf4\u660e\u7684\u662f\uff0c\u8868\u9501\u4e0d\u662f\u7531InnoDB\u5b58\u50a8\u5f15\u64ce\u5c42\u7ba1\u7406\u7684\uff0c\u800c\u662f\u7531\u5176\u4e0a\u4e00\u5c42\uff2dySQL Server\u8d1f\u8d23\u7684\uff0c\u4ec5\u5f53autocommit=0\u3001innodb_table_lock=1\uff08\u9ed8\u8ba4\u8bbe\u7f6e\uff09\u65f6\uff0cInnoDB\u5c42\u624d\u80fd\u611f\u77e5MySQL\u52a0\u7684\u8868\u9501\uff0c\uff2dySQL Server\u624d\u80fd\u611f\u77e5InnoDB\u52a0\u7684\u884c\u9501\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cInnoDB\u624d\u80fd\u81ea\u52a8\u8bc6\u522b\u6d89\u53ca\u8868\u7ea7\u9501\u7684\u6b7b\u9501\uff1b\u5426\u5219\uff0cInnoDB\u5c06\u65e0\u6cd5\u81ea\u52a8\u68c0\u6d4b\u5e76\u5904\u7406\u8fd9\u79cd\u6b7b\u9501\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u5728\u7528LOCAK TABLES\u5bf9InnoDB\u52a0\u9501\u65f6\u8981\u6ce8\u610f\uff0c\u4e8b\u52a1\u7ed3\u675f\u524d\uff0c\u4e0d\u8981\u7528UNLOCAK TABLES\u91ca\u653e\u8868\u9501\uff0c\u56e0\u4e3aUNLOCK TABLES\u4f1a\u9690\u542b\u5730\u63d0\u4ea4\u4e8b\u52a1\uff1bCOMMIT\u6216ROLLBACK\u4e0d\u80fd\u91ca\u653e\u7528LOCAK TABLES\u52a0\u7684\u8868\u7ea7\u9501\uff0c\u5fc5\u987b\u7528UNLOCK TABLES\u91ca\u653e\u8868\u9501\uff0c\u6b63\u786e\u7684\u65b9\u5f0f\u89c1\u5982\u4e0b\u8bed\u53e5\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u8868\u9501\u7684\u529b\u5ea6\u5f88\u5927\uff0c\u614e\u7528\u3002")),(0,a.kt)("h3",{id:"\u4e09\u4ece\u53e6\u4e00\u4e2a\u89d2\u5ea6\u533a\u5206\u9501\u7684\u5206\u7c7b"},"\u4e09\u3001\u4ece\u53e6\u4e00\u4e2a\u89d2\u5ea6\u533a\u5206\u9501\u7684\u5206\u7c7b"),(0,a.kt)("h4",{id:"1\u4e50\u89c2\u9501"},"1\u3001\u4e50\u89c2\u9501"),(0,a.kt)("p",null,'\u4e50\u89c2\u9501\u5927\u591a\u662f\u57fa\u4e8e\u6570\u636e\u3010\u7248\u672c\u8bb0\u5f55\u673a\u5236\u3011\u5b9e\u73b0\uff0c\u4e00\u822c\u662f\u7ed9\u6570\u636e\u5e93\u8868\u589e\u52a0\u4e00\u4e2a"version"\u5b57\u6bb5\u3002'),(0,a.kt)("p",null,"\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u5c06\u6b64\u7248\u672c\u53f7\u4e00\u540c\u8bfb\u51fa\uff0c"),(0,a.kt)("p",null,"\u66f4\u65b0\u65f6\uff0c\u5bf9\u6b64\u7248\u672c\u53f7\u52a0\u4e00\u3002\u6b64\u65f6\u5c06\u63d0\u4ea4\u6570\u636e\u7684\u7248\u672c\u6570\u636e\u4e0e\u6570\u636e\u5e93\u8868\u5bf9\u5e94\u8bb0\u5f55\u7684\u5f53\u524d\u7248\u672c\u4fe1\u606f\u8fdb\u884c\u6bd4\u5bf9\uff0c\u5982\u679c\u63d0\u4ea4\u7684\u6570\u636e\u7248\u672c\u53f7\u5927\u4e8e\u6570\u636e\u5e93\u8868\u5f53\u524d\u7248\u672c\u53f7\uff0c\u5219\u4e88\u4ee5\u66f4\u65b0\uff0c\u5426\u5219\u8ba4\u4e3a\u662f\u8fc7\u671f\u6570\u636e\u3002"),(0,a.kt)("p",null,"\u4e8b\u52a1\u4e00\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"select * from ydl_student where id = 1;\n")),(0,a.kt)("p",null,"\u4e8b\u52a1\u4e8c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"select * from ydl_student where id = 1;\nupdate ydl_student set score = 99,version = version + 1 where id = 1 and version = 1;\ncommit;\n")),(0,a.kt)("p",null,"\u4e8b\u52a1\u4e00\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"update ydl_student set score = 100,version = version + 1 where id = 1 and version = 1;\ncommit;\n")),(0,a.kt)("p",null,"\u53d1\u73b0\u66f4\u65b0\u5931\u8d25\uff0c\u5e94\u4e3a\u7248\u672c\u53f7\u88ab\u4e8b\u52a1\u4e8c\u3001\u63d0\u524d\u4fee\u6539\u4e86\uff0c\u8fd9\u4f7f\u7528\u4e86\u4e0d\u52a0\u9501\u7684\u65b9\u5f0f\uff0c\u5b9e\u73b0\u4e86\u4e00\u4e2a\u4e8b\u52a1\u4fee\u6539\u671f\u95f4\uff0c\u7981\u6b62\u5176\u4ed6\u4e8b\u52a1\u4fee\u6539\u7684\u80fd\u529b\u3002"),(0,a.kt)("h4",{id:"2\u60b2\u89c2\u9501"},"2\u3001\u60b2\u89c2\u9501"),(0,a.kt)("p",null,"\u603b\u6709\u5201\u6c11\u60f3\u5bb3\u6715"),(0,a.kt)("p",null,"\u60b2\u89c2\u9501\u4f9d\u9760\u6570\u636e\u5e93\u63d0\u4f9b\u7684\u9501\u673a\u5236\u5b9e\u73b0\u3002MySQL\u4e2d\u7684\u5171\u4eab\u9501\u548c\u6392\u5b83\u9501\u90fd\u662f\u60b2\u89c2\u9501\u3002\u6570\u636e\u5e93\u7684\u589e\u5220\u6539\u64cd\u4f5c\u9ed8\u8ba4\u90fd\u4f1a\u52a0\u6392\u4ed6\u9501\uff0c\u800c\u67e5\u8be2\u4e0d\u4f1a\u52a0\u4efb\u4f55\u9501\u3002\u6b64\u5904\u4e0d\u8d58\u8ff0\u3002"),(0,a.kt)("h2",{id:"\u7b2c\u516b\u7ae0-\u65e5\u5fd7\u7cfb\u7edf"},"\u7b2c\u516b\u7ae0 \u65e5\u5fd7\u7cfb\u7edf"),(0,a.kt)("p",null,"mysql\u7ed9\u6211\u4eec\u63d0\u4f9b\u4e86\u5f88\u591a\u6709\u7528\u7684\u65e5\u5fd7\uff0c\u8fd9\u662fmysql\u670d\u52a1\u5c42\u7ed9\u6211\u4eec\u63d0\u4f9b\u7684\uff1a"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"\u65e5\u5fd7\u7c7b\u578b"),(0,a.kt)("th",{parentName:"tr",align:null},"\u5199\u5165\u65e5\u5fd7\u7684\u4fe1\u606f"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"\u4e8c\u8fdb\u5236\u65e5\u5fd7"),(0,a.kt)("td",{parentName:"tr",align:null},"\u8bb0\u5f55\u4e86\u5bf9MySQL\u6570\u636e\u5e93\u6267\u884c\u66f4\u6539\u7684\u6240\u6709\u64cd\u4f5c")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"\u6162\u67e5\u8be2\u65e5\u5fd7"),(0,a.kt)("td",{parentName:"tr",align:null},"\u8bb0\u5f55\u6240\u6709\u6267\u884c\u65f6\u95f4\u8d85\u8fc7 long_query_time \u79d2\u7684\u6240\u6709\u67e5\u8be2\u6216\u4e0d\u4f7f\u7528\u7d22\u5f15\u7684\u67e5\u8be2")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"\u9519\u8bef\u65e5\u5fd7"),(0,a.kt)("td",{parentName:"tr",align:null},"\u8bb0\u5f55\u5728\u542f\u52a8\uff0c\u8fd0\u884c\u6216\u505c\u6b62mysqld\u65f6\u9047\u5230\u7684\u95ee\u9898")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"\u901a\u7528\u67e5\u8be2\u65e5\u5fd7"),(0,a.kt)("td",{parentName:"tr",align:null},"\u8bb0\u5f55\u5efa\u7acb\u7684\u5ba2\u6237\u7aef\u8fde\u63a5\u548c\u6267\u884c\u7684\u8bed\u53e5")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"\u4e2d\u7ee7\u65e5\u5fd7"),(0,a.kt)("td",{parentName:"tr",align:null},"\u4ece\u590d\u5236\u4e3b\u670d\u52a1\u5668\u63a5\u6536\u7684\u6570\u636e\u66f4\u6539")))),(0,a.kt)("h3",{id:"\u4e00bin-log\u65e5\u5fd7"},"\u4e00\u3001bin log\u65e5\u5fd7"),(0,a.kt)("h4",{id:"1\u6982\u8ff0"},"1\u3001\u6982\u8ff0"),(0,a.kt)("p",null,"\u4e8c\u8fdb\u5236\u65e5\u5fd7\uff08binnary log\uff09\u4ee5\u3010\u4e8b\u4ef6\u5f62\u5f0f\u3011\u8bb0\u5f55\u4e86\u5bf9MySQL\u6570\u636e\u5e93\u6267\u884c\u66f4\u6539\u7684\u6240\u6709\u64cd\u4f5c\u3002"),(0,a.kt)("p",null,"binlog\u8bb0\u5f55\u4e86\u6240\u6709\u6570\u636e\u5e93\u3010\u8868\u7ed3\u6784\u3011\u53d8\u66f4\uff08\u4f8b\u5982CREATE\u3001ALTER TABLE\u2026\uff09\u4ee5\u53ca\u3010\u8868\u6570\u636e\u3011\u4fee\u6539\uff08INSERT\u3001UPDATE\u3001DELETE\u2026\uff09\u7684\u4e8c\u8fdb\u5236\u65e5\u5fd7\u3002\u4e0d\u4f1a\u8bb0\u5f55SELECT\u548cSHOW\u8fd9\u7c7b\u64cd\u4f5c\uff0c\u56e0\u4e3a\u8fd9\u7c7b\u64cd\u4f5c\u5bf9\u6570\u636e\u672c\u8eab\u5e76\u6ca1\u6709\u4fee\u6539\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2\u901a\u7528\u65e5\u5fd7\u6765\u67e5\u770bMySQL\u6267\u884c\u8fc7\u7684\u6240\u6709\u8bed\u53e5\u3002"),(0,a.kt)("p",null,"binlog\u662fmysql server\u5c42\u7ef4\u62a4\u7684\uff0c\u8ddf\u91c7\u7528\u4f55\u79cd\u5f15\u64ce\u6ca1\u6709\u5173\u7cfb\uff0c\u8bb0\u5f55\u7684\u662f\u6240\u6709\u7684\u66f4\u65b0\u64cd\u4f5c\u7684\u65e5\u5fd7\u8bb0\u5f55\u3002binlog\u662f\u5728\u4e8b\u52a1\u6700\u7ec8commit\u524d\u5199\u5165\u7684\u3002\u6211\u4eec\u6267\u884cSELECT\u7b49\u4e0d\u6d89\u53ca\u6570\u636e\u66f4\u65b0\u7684\u8bed\u53e5\u662f\u4e0d\u4f1a\u8bb0binlog\u7684\uff0c\u800c\u6d89\u53ca\u5230\u6570\u636e\u66f4\u65b0\u5219\u4f1a\u8bb0\u5f55\u3002\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5bf9\u652f\u6301\u4e8b\u52a1\u7684\u5f15\u64ce\u5982innodb\u800c\u8a00\uff0c\u5fc5\u987b\u8981\u63d0\u4ea4\u4e86\u4e8b\u52a1\u624d\u4f1a\u8bb0\u5f55binlog\u3002"),(0,a.kt)("p",null,"binlog \u6587\u4ef6\u5199\u6ee1\u540e\uff0c\u4f1a\u81ea\u52a8\u5207\u6362\u5230\u4e0b\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\u7ee7\u7eed\u5199\uff0c\u800c\u4e0d\u4f1a\u8986\u76d6\u4ee5\u524d\u7684\u65e5\u5fd7\uff0c\u8fd9\u4e2a\u4e5f\u533a\u522b\u4e8e redo log\uff0credo log \u662f\u5faa\u73af\u5199\u5165\u7684\uff0c\u5373\u540e\u9762\u5199\u5165\u7684\u53ef\u80fd\u4f1a\u8986\u76d6\u524d\u9762\u5199\u5165\u7684\u3002"),(0,a.kt)("p",null,"binlog\u6709\u4e24\u4e2a\u5e38\u7528\u7684\u4f7f\u7528\u573a\u666f\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4e3b\u4ece\u590d\u5236\uff1a\u6211\u4eec\u4f1a\u4e13\u95e8\u6709\u4e00\u4e2a\u7ae0\u8282\u4ee3\u9886\u5927\u5bb6\u642d\u5efa\u4e00\u4e2a\u4e3b\u4ece\u540c\u6b65\u7684\u4e24\u53f0mysql\u670d\u52a1\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u6570\u636e\u6062\u590d\uff1a\u901a\u8fc7mysqlbinlog\u5de5\u5177\u6765\u6062\u590d\u6570\u636e\u3002")),(0,a.kt)("p",null,"mysql8\u4e2d\u7684binLog\u9ed8\u8ba4\u662f\u5f00\u542f\u7684\uff0c5.7\u9ed8\u8ba4\u662f\u5173\u95ed\u7684\uff0c\u53ef\u4ee5\u901a\u8fc7\u53c2\u6570",(0,a.kt)("inlineCode",{parentName:"p"},"log_bin"),"\u63a7\u5236\uff1a"),(0,a.kt)("h4",{id:"2\u6570\u636e\u6062\u590d"},"2\u3001\u6570\u636e\u6062\u590d"),(0,a.kt)("p",null,"\uff081\uff09\u786e\u8ba4binlog\u5f00\u542f\uff0clog_bin\u53d8\u91cf\u7684\u503c\u4e3aON\u4ee3\u8868binlog\u662f\u5f00\u542f\u72b6\u6001\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"show variables like '%log_bin%';\n")),(0,a.kt)("p",null,"\uff082\uff09\u4e3a\u4e86\u9632\u6b62\u5e72\u6270\uff0c\u6211\u4eecflush\u5237\u65b0log\u65e5\u5fd7\uff0c\u81ea\u6b64\u523b\u4f1a\u4ea7\u751f\u4e00\u4e2a\u65b0\u7f16\u53f7\u7684binlog\u65e5\u5fd7\u6587\u4ef6\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"flush logs;\n")),(0,a.kt)("p",null,"\uff083\uff09\u67e5\u770b\u6240\u6709binlog\u65e5\u5fd7\u5217\u8868\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"show master logs;\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220507135555872-fabcd807.png",alt:"image-20220507135555872"}),"image-20220507135555872"),(0,a.kt)("p",null,"\uff084\uff09\u67e5\u770bmaster\u72b6\u6001\uff0c\u5373\u6700\u540e(\u6700\u65b0)\u4e00\u4e2abinlog\u65e5\u5fd7\u7684\u7f16\u53f7\u540d\u79f0\uff0c\u53ca\u5176\u6700\u540e\u4e00\u4e2a\u64cd\u4f5c\u4e8b\u4ef6pos\u7ed3\u675f\u70b9(Position)\u503c\uff0c\u8fd9\u4e00\u6b65\u53ef\u6709\u53ef\u65e0\uff1a ",(0,a.kt)("img",{parentName:"p",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAyIAAAA/CAYAAAAc7XyGAAANLUlEQVR4nO3dP2zb6BnH8R97Bxw6ebngpgLFmXKQq70VKCyjXbqUSlBocjolnaSiw1lG4S13Q+OigwdRNxSVhuIuU0+TWiTiFWiXFpHR4ja7CWLRRYGbgstgj0VRsINIiZL1h5IpSpS/H0CD/NovX77va4oP+byUcXFx4cm3trYmSTo7O9N7772ntHn9+rU2NjYW3YxYpHkM0truVZk7AAAAaWCEA5HXr18vsi2xWJWTybOzs0U3AQAAAJgbY9gdEQAAAACYp28sugEAAAAAbh4CEQAAAACJIxABAAAAkDgCEQAAAACJe3vWPzw/P9f/1r4VZ1uQcm9dfqX19fVFN+PGOT8/p99TjPHDMMwLjMLcwCrhjggAAACAxBGIAAAAAEgcgQgAAACAxBGIAAAAAEjcfAORf32i+7e+r0//JUlf6ONbP9df57pBrDTXVtbIynanLENP5H5yVDSKcpJoE6Jj/JBWTlFG1lash+hJ/w/z2CaAWMUUiLj61HpHt2+FXtYn+nc8lSOVXNlZQ4bRexU5K0qEU+zv9+X8IL46P4xYTpyj1bvMfbTMbQtzioayqYn80z4v5vX/sowG93Xe++moyOcUsDCx3hG5//v/6NXX/sv5UN9+/0N9/vXf9NP349wK0mNb5bYnz/Pktcs6yV3zjoVZUstrqWRKwYdV90Ojrwzb5Xan3z1Pza19ZYKOWrJ+KjS9bju9ppSL6UQgSr0j+2gJpGX80ibt86Kv/V5VVqJbHzjmzmUTtrJGRi8/Cu9nXo1uQBj3cd9R0chJ3X5t687jKIFPAn0B3BCsEUEyzJI+Khyr/nQ5ri/eJJk724tuQjRW1Q9YY74CGqHeZe6jZW5bqqV8XqweV/aDfW01PVX7IixL1VZJc4m93Vc62S7roLs9U6VW0gEecLMlsEZk1LqQL/RxKJXr/m85Qb1Z+m+HD95+d+3s1TLXVtYoypGjopHR/rFUy/npE92yKPU7KhpZ2XaxW55NTYrJtFw9rR+rkPc/Wvv6aZp+GD9e/eV+nbOktZj3tLtdU6Nb+aTtzlpv2EAfLZU0jd+4Oia1dVz7gqvP/u/01Wlc7384tfOip3Os7PWXUzRkdC/Vj+ujIWWDx9Fxx9wp6zdytQk78lR1hYOCQTMc9ydt07ytreN9HY08qAzbv1F9AWAWsQYin/8kamDxhT6+9Su9//cgleufsv7wHX38lzhbg6Xi2npc29buPVPB7fCTUApEJ02iF3A82N9Sc2QKgqWq11Z5209VuHK1bEL9kqRj7b/Md9PGtP9gpRa6H+9n/A/PjPbHfrhH6YdJ/TmY3vBEqk84AYgkyjjOLnofJS994xeljlFtjTbOtVxDeS/4f3dUNB7rTruXUrNbz8SSKrPM86KWC51k+ztrllpqFmp6bLuSU1TupKx21ZLG9tHVPm+NzW8adsydXL9CqWTNwoSda7/Ucfi9ayvbF5hGO+5PtU1ZqjYLfr8OC86H7d+kdgCYxtzWiHz+szH/mn/5oz7XP/Tr7wWBy3f06y+lV+0VOhOEpGPtZ/wPkkxdu20/l9dpqLZd1pPwB591oHJwZdK8rS3VlJv1KViT6pckbascnGGY97S7YhkY4Tx376OXyow8eY/QD5P60y/vS2/4aOIZwLjW604mwnZnrTd4F7mPkpe68YtUx4i2RhznQjN0QcJpqBY+vvhXqE9ezXLASM+86FsjEspfsqpNbe1nZOROVH7inxiP66NhfT6tCPWHgzgrP+WcMktqeZ48r6lIfznrNq2qPM9Tu3yiXCjAi3eOARhlcWtEvnukP30dWtw+KXhBCoUWq0daUBicEFiqBldVH/hpHrEc+/tPOG4MK6+CThT/5+cc+tM50r52dW/sXJlhu5PqnVsfxSBN4xerCe3bLqvthU7MJ17VHyLN8yKKOPooqfqtvArHdS1qGaFZanWCnlqud2dt3v0HYEGByA9/rPtfHuh3oVSsv/6C7xi5May8Csf7ehCOLsInBK4t25E6CwfbKm8f62U7xvpvGqehmrZ0e9Z9n9Sffnkvz9qV/XiG1Cyn2H9FN65xHKx36O9cs4/mKQ3jd506ZhnnK9uTnOKUdy7SPi9CnGInzaqT8eavWRjXR1fKHNnd/u8FXu7Ten+6VNhU9UeZD5YOytJ+ZsYLT7Ns07WVvZLP5wfAccwxABMt6I7Ij/TLvx/pVWhNyZ9zv9EPFtMYJM5S1fNTCbqLCqVmkGtrlnS7EbodvtUceIqKJJm6t7s9YrHghPpvgOPBfb/Woz4n9aelarusk27++gNpN1oaRl/O++M7avfdOZt9HMfX2xFvH8UrLePXt42Z65hlnAe3Z6iRn9xHaZ8Xfe337xQ7RUO5k06alVl6orKCRw6P66PBsoZul0zJLOlJWd10pAcvt9TL9hs85k6ov7v2Ivp8MEstee1d1TPh/czppHzg1zvhuD/tNs2Sntx53LctNYM5MW7/xrUDwDSMi4sLL3iztrYW+Q/Pz8/1v7VvzaVRSKe3Lr/S+vr6optx45yfny9fvzvFzoneDQr+ZrWy48ccuJalnBdYCswNrBK+RwTANbmyswOP0MzVtL17jxPQVIhj/JgDAIDpEYgAuCZTpSd39LgvlaLtL+oc/H6Izuv6j1mdV703URzjN66OJDEvlt8ixoh5ASwrUrMQG1KzFoPb9OnG+GEY5gVGYW5glXBHBAAAAEDiCEQAAAAAJK4vNevNmzeLbAsAAAAmIDULq+Lt8Jtp1nywHgCDLi8vp1pnhHjQ7+nG+GEY5gVGuby8XHQTgNiQmgUAAAAgcQQiAAAAABJHIAIAAAAgcQQiAAAAABI3MhC5feudJNtxDY6KRlGjvyDVVWVnzDeouhXtGDuquPNpHQAAAICrxt4RSU8wsgiOioYhwzBkXAlkEi5zK9rplo0JurBgnTHcGYh63cpOd+wMw5AxOIBOMVQ+LugGAABIj4mpWSsfjJh7eu491545zR+5quzkdGq35XmevOamSpngBDHpMkfFTEmbTc8vK6iW42R1uXTuyhlGQypcLW2/aCkbjK3nyatavUKnKOPwA7WDMq8q62oVAAAAqRNpjcjKByPTcp+p3iroURC9WAeyszU1nAWUSZIKygdnp1ZeBZ3qjFSzJWJq73kniMiP+I3NjWGRsKvK4ansz/Y0VZwMAACQApEXq48PRhwVjR1VnF6KUNFRX0pJJx2lc2W4LzXFKcrYqcjVYIpK+Kp+OC3Jf/l/E11/Hd3sF7eiHSN0d8HYUaUy2O4B7RdqFfKhK9OmNjal0zM3+TJZOrBPdRi002moVng05R0eLI6rs1Oplhsy791nqmtXOjLGz0cAAIAUmuqpWeODkZZKh9Jn3fQgQ0Yj30knadtS6UiOTO09KqhVf9YNIpxGTYVHezLdih6WNtW8koLiqGjkpCD1yPPUHJLeMkkt11Dei5K+1FLpRbjdD68sZHfPTkduJ+myQKuU6Zys5mrKfpCZ+PtYFsHdks6rbZ8qFwTZ7RdqtUp6kffGzkcAAIA0mioQefX1f8aUZnspJFZeBWVlH/jX8M0NbQbpQlZehVZdz1xJctSo+WlF5oY2VVNucCG201Ata+sglBhv5UdFIqMXdBeaodz6K6lNA/vRbfdd7Wav/oa5sTmyF5Iuk1vRw5Jkt4OT2aY2SxkWrKeUufco9P8hKTz3zT09KrRUf0YkAgAA0i9yIDI+CJmGpQNbqj9z5VYOVeumHFmqep487zPp4bCnRkWru9q9ozLtAvQpnZ6FUsM66TXdPP8Ey9xndbX6UrEs5QtB2hZSLfOBhsTBAAAAKyFSIBJfENJh3t2V6kc6qqt398GtqOJInVSVtuxsSy/a8u+glHTUS5xX5bA29TZrodsfbuWhSq3QAu8owt83Yh3IVqhNzpFK8q9cJ1xm3t1VtnYYCtocNWqjFj9j+bhy+5ZM5VTL7uquqc4dOZX0MBhct6LDWla7dxlbAACQfm9P+oW4gxBJnRSTTUO5U1tts/ezjSNDRs5/X2jKsyTJUrVZkJEz1Ak/srLtglSfbpMFNWT0KlfzWo9BNbX3ma2djCGjW1/wZKOEy8w9PW++kJExVAr2rumpyjNeU+PZQ0Ollv8ma6v9PDTuz5t6YWRk+INbaHo8iAAAAKwE4+LiwgvevP7vN7sFt2+9MzYIeevyK62vr8+8Yado6PCDtp7PclYVfLfCcx5rukwuLy+1tra26GbcOPR7ujF+GIZ5gVGYG1glI++IzOVOSMCt6LBW0COPMAIAAAC4iSamZsXNKRrK1TopJmQPAQAAADdT4oGIVfXkVa9dib9+BAAAAEAaTfU9IgAAAAAQBwIRAAAAAInre2rWmzdvpvrjd999N/YGAQAAYDSemoVV0ReIMLEBAAAAJIHULAAAAACJIxABAAAAkDgCEQAAAACJIxABAAAAkDgCEQAAAACJIxABAAAAkDgCEQAAAACJIxABAAAAkDgCEQAAAACJIxABAAAAkDgCEQAAAACJ+z9jsuXX0dkffQAAAABJRU5ErkJggg==",alt:"image-20220507135613665"})," \uff085\uff09\u6267\u884csql"),(0,a.kt)("p",null,"\u5148\u521b\u5efa\u8868\uff0c\u5e76\u63d2\u5165\u4e00\u4e9b\u6570\u636e\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"DROP TABLE IF EXISTS ydl_student;\nCREATE TABLE `ydl_student` (\n  `id` int(11) NOT NULL,\n  `name` varchar(255) DEFAULT NULL,\n  `score` int(255) DEFAULT NULL,\n  `grade` varchar(255) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\nINSERT INTO `ydl_student`(`id`, `name`, `score`, `grade`) VALUES (1, 'lucy', 80, 'a');\nINSERT INTO `ydl_student`(`id`, `name`, `score`, `grade`) VALUES (2, 'lily', 90, 'a');\nINSERT INTO `ydl_student`(`id`, `name`, `score`, `grade`) VALUES (3, 'jack', 60, 'c');\nINSERT INTO `ydl_student`(`id`, `name`, `score`, `grade`) VALUES (4, 'hellen', 40, 'd');\nINSERT INTO `ydl_student`(`id`, `name`, `score`, `grade`) VALUES (5, 'tom', 60, 'c');\nINSERT INTO `ydl_student`(`id`, `name`, `score`, `grade`) VALUES (6, 'jerry', 10, 'd');\nINSERT INTO `ydl_student`(`id`, `name`, `score`, `grade`) VALUES (7, 'sily', 20, 'd');\n")),(0,a.kt)("p",null,"\u6267\u884c\u5220\u9664\u64cd\u4f5c\uff0c\u5047\u88c5\u8bef\u5220\u9664\uff0c\u76f4\u63a5\u5168\u90e8\u5220\u9664\u4e5f\u53ef\u4ee5\uff0c\u628a\u8868\u5220\u4e86\u90fd\u884c\uff0c\u4e00\u6837\u7684\u9053\u7406\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"delete from ydl_student where id in (3,5);\n")),(0,a.kt)("p",null,"\uff086\uff09\u67e5\u770bbinlog\u65e5\u5fd7\uff0c\u6211\u4eec\u56e0\u4e3a\u5237\u65b0\u4e86\u65e5\u5fd7\uff0c\u6240\u4ee5\u672c\u6b21\u64cd\u4f5c\u90fd\u4f1a\u5728\u6700\u65b0\u7684\u65e5\u5fd7\u6587\u4ef6\u4e0a\uff1a"),(0,a.kt)("p",null,"\u56e0\u4e3a binlog \u7684\u65e5\u5fd7\u6587\u4ef6\u662f\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u4e0d\u80fd\u7528\u6587\u672c\u7f16\u8f91\u5668\u76f4\u63a5\u6253\u5f00\uff0c\u9700\u8981\u7528\u7279\u5b9a\u7684\u5de5\u5177\u6765\u6253\u5f00\uff0cMySQL \u63d0\u4f9b\u4e86 mysqlbinlog \u6765\u5e2e\u52a9\u6211\u4eec\u67e5\u770b\u65e5\u5fd7\u6587\u4ef6\u5185\u5bb9\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"# \u67e5\u770b\u5168\u90e8\u7684\u65e5\u5fd7\u4fe1\u606f\n/www/server/mysql/bin/mysqlbinlog -v mysql-bin.000008\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'# \u6307\u5b9a\u4f4d\u7f6e\u8303\u56f4\n/usr/bin/mysqlbinlog -v mysql-bin.000013 --start-position=0 --stop-position=986\n# \u6307\u5b9a\u65f6\u95f4\u8303\u56f4\n/usr/bin/mysqlbinlog -v mysql-bin.000013 --start-datetime="2022-06-01 11:18:00" --stop-datetime="2022-06-01 12:18:00" \n')),(0,a.kt)("p",null,"\u771f\u5b9e\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684\u65e5\u5fd7\u6587\u4ef6\u6bd4\u8f83\u590d\u6742\uff0c\u5185\u5bb9\u6bd4\u8f83\u591a\u4f7f\u7528\u65f6\u95f4\u8303\u56f4\u67e5\u8be2\u540e\u4efb\u7136\u53ef\u80fd\u9700\u8981\u82b1\u8d39\u65f6\u95f4\u53bb\u6392\u67e5\u95ee\u9898\uff0c\u8fd9\u91cc\u6211\u4eec\u627e\u5230\u4e86\u8bef\u5220\u9664\u7684\u4f4d\u7f6e\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220507143313649-eea2e039.png",alt:"image-20220507143313649"}),"image-20220507143313649"),(0,a.kt)("p",null,"\uff087\uff09\u6267\u884c\u6062\u590d\uff0c\u901a\u8fc7\u4e0a\u4e00\u6b65\u7684\u64cd\u4f5c\uff0c\u6211\u4eec\u627e\u5230\u4e86\u5220\u9664\u7684\u4f4d\u7f6e3228\uff08\u5373\u7b2c\u4e8c\u4e2a\u7ea2\u6846\uff09\uff0c\u6267\u884c\u4e0b\u9762\u7684\u8bed\u53e5\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"/www/server/mysql/bin/mysqlbinlog -v mysql-bin.000008 --stop-position=3228 -v | mysql -uroot -p\n")),(0,a.kt)("p",null,"\uff088\uff09\u81f3\u6b64\uff0c\u6570\u636e\u5df2\u5b8c\u5168\u6062\u590d\u4e86\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220507143456337-cf176c97.png",alt:"image-20220507143456337"}),"image-20220507143456337"),(0,a.kt)("p",null,"binlog\u7684\u6570\u636e\u6062\u590d\u7684\u672c\u8d28\uff0c\u5c31\u662f\u5c06\u4e4b\u524d\u6267\u884c\u8fc7\u7684sql\uff0c\u4ece\u5f00\u59cb\u5230\u6307\u5b9a\u4f4d\u7f6e\u5168\u90e8\u6267\u884c\u4e00\u904d\uff0c\u5982\u679c\u62a5\u9519\u3010\u5f53\u524d\u8868\u5df2\u7ecf\u5b58\u5728\u3011\uff0c\u5c31\u5c06\u6570\u636e\u5e93\u7684\u8868\u5220\u9664\uff0c\u91cd\u65b0\u6062\u590d\u3002"),(0,a.kt)("h4",{id:"3\u683c\u5f0f\u5206\u7c7b"},"3\u3001\u683c\u5f0f\u5206\u7c7b"),(0,a.kt)("p",null,"binlog \u6709\u4e09\u79cd\u683c\u5f0f\uff0c \u4f7f\u7528\u53d8\u91cf",(0,a.kt)("inlineCode",{parentName:"p"},"binlog_format"),"\u67e5\u770b\u5f53\u524d\u4f7f\u7528\u7684\u662f\u54ea\u4e00\u79cd\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Statement\uff08Statement-Based Replication,SBR\uff09\uff1a\u6bcf\u4e00\u6761\u4f1a\u4fee\u6539\u6570\u636e\u7684 SQL \u90fd\u4f1a\u8bb0\u5f55\u5728 binlog \u4e2d\u3002"),(0,a.kt)("li",{parentName:"ul"},"Row\uff08Row-Based Replication,RBR\uff09\uff1a\u4e0d\u8bb0\u5f55 SQL \u8bed\u53e5\u4e0a\u4e0b\u6587\u4fe1\u606f\uff0c\u4ec5\u4fdd\u5b58\u54ea\u6761\u8bb0\u5f55\u88ab\u4fee\u6539\u3002"),(0,a.kt)("li",{parentName:"ul"},"Mixed\uff08Mixed-Based Replication,MBR\uff09\uff1aStatement \u548c Row \u7684\u6df7\u5408\u4f53\uff0c\u5f53\u524d\u9ed8\u8ba4\u7684\u9009\u9879\uff0c5.7\u4e2d\u9ed8\u8ba4row\u3002")),(0,a.kt)("p",null,"\u6211\u4eec\u4e3e\u4e00\u4e2a\u4f8b\u5b50\u6765\u8bf4\u660erow\u548cstatement\u7684\u533a\u522b\uff0c\u5728\u4e0b\u9762\u7684\u63d2\u5165\u8bed\u53e5\u4e2d\u6211\u4eec\u6709\u4e00\u4e2a\u51fd\u6570uuid()\uff0c\u5982\u679c\u65e5\u5fd7\u6587\u4ef6\u4ec5\u4ec5\u4fdd\u5b58sql\u8bed\u53e5\uff0c\u4e0b\u4e00\u6b21\u6267\u884c\u7684\u7ed3\u679c\u53ef\u80fd\u4e0d\u4e00\u81f4\uff0c\u6240\u4ee5Row\u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u4ed6\u4fdd\u5b58\u7684\u662f\u5177\u4f53\u54ea\u4e00\u884c\uff0c\u4fee\u6539\u6210\u4e86\u4ec0\u4e48\u6570\u636e\uff0c\u8bb0\u5f55\u7684\u662f\u6570\u636e\u7684\u53d8\u5316\uff0c\u4e0d\u662f\u7b80\u5355\u7684sql\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"insert into ydl_student values (8,UUID(),45,'d');\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220507150522596-8036d797.png",alt:"image-20220507150522596"}),"image-20220507150522596"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Statement\u548crow\u7684\u4f18\u52a3")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Statement \u6a21\u5f0f\u53ea\u8bb0\u5f55\u6267\u884c\u7684 SQL\uff0c\u4e0d\u9700\u8981\u8bb0\u5f55\u6bcf\u4e00\u884c\u6570\u636e\u7684\u53d8\u5316\uff0c\u56e0\u6b64\u6781\u5927\u7684\u51cf\u5c11\u4e86 binlog \u7684\u65e5\u5fd7\u91cf\uff0c\u907f\u514d\u4e86\u5927\u91cf\u7684 IO \u64cd\u4f5c\uff0c\u63d0\u5347\u4e86\u7cfb\u7edf\u7684\u6027\u80fd\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u7531\u4e8e Statement \u6a21\u5f0f\u53ea\u8bb0\u5f55 SQL\uff0c\u800c\u5982\u679c\u4e00\u4e9b SQL \u4e2d \u5305\u542b\u4e86\u51fd\u6570\uff0c\u90a3\u4e48\u53ef\u80fd\u4f1a\u51fa\u73b0\u6267\u884c\u7ed3\u679c\u4e0d\u4e00\u81f4\u7684\u60c5\u51b5\u3002\u6bd4\u5982\u8bf4 uuid() \u51fd\u6570\uff0c\u6bcf\u6b21\u6267\u884c\u7684\u65f6\u5019\u90fd\u4f1a\u751f\u6210\u4e00\u4e2a\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5728 master \u4e2d\u8bb0\u5f55\u4e86 uuid\uff0c\u5f53\u540c\u6b65\u5230 slave \u4e4b\u540e\uff0c\u518d\u6b21\u6267\u884c\uff0c\u5c31\u5f97\u5230\u53e6\u5916\u4e00\u4e2a\u7ed3\u679c\u4e86\u3002\u6240\u4ee5\u4f7f\u7528 Statement \u683c\u5f0f\u4f1a\u51fa\u73b0\u4e00\u4e9b\u6570\u636e\u4e00\u81f4\u6027\u95ee\u9898\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u4ece MySQL5.1.5 \u7248\u672c\u5f00\u59cb\uff0cbinlog \u5f15\u5165\u4e86 Row \u683c\u5f0f\uff0cRow \u683c\u5f0f\u4e0d\u8bb0\u5f55 SQL \u8bed\u53e5\u4e0a\u4e0b\u6587\u76f8\u5173\u4fe1\u606f\uff0c\u4ec5\u4ec5\u53ea\u9700\u8981\u8bb0\u5f55\u67d0\u4e00\u6761\u8bb0\u5f55\u88ab\u4fee\u6539\u6210\u4ec0\u4e48\u6837\u5b50\u4e86\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u4e0d\u8fc7 Row \u683c\u5f0f\u4e5f\u6709\u4e00\u4e2a\u5f88\u5927\u7684\u95ee\u9898\uff0c\u90a3\u5c31\u662f\u65e5\u5fd7\u91cf\u592a\u5927\u4e86\uff0c\u7279\u522b\u662f\u6279\u91cf update\u3001\u6574\u8868 delete\u3001alter \u8868\u7b49\u64cd\u4f5c\uff0c\u7531\u4e8e\u8981\u8bb0\u5f55\u6bcf\u4e00\u884c\u6570\u636e\u7684\u53d8\u5316\uff0c\u6b64\u65f6\u4f1a\u4ea7\u751f\u5927\u91cf\u7684\u65e5\u5fd7\uff0c\u5927\u91cf\u7684\u65e5\u5fd7\u4e5f\u4f1a\u5e26\u6765 IO \u6027\u80fd\u95ee\u9898\u3002")),(0,a.kt)("h4",{id:"4\u65e5\u5fd7\u683c\u5f0f"},"4\u3001\u65e5\u5fd7\u683c\u5f0f"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"binlog\u6587\u4ef6\u4ee5\u4e00\u4e2a\u503c\u4e3a0Xfe62696e\u7684\u9b54\u6570\u5f00\u5934\uff0c\u8fd9\u4e2a\u9b54\u6570\u5bf9\u5e940xfebin\u3002"),(0,a.kt)("li",{parentName:"ul"},"binlog\u7531\u4e00\u7cfb\u5217\u7684binlog event\u6784\u6210\u3002\u6bcf\u4e2abinlog event\u5305\u542bheader\u548cdata\u4e24\u90e8\u5206\u3002",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"header\u90e8\u5206\u63d0\u4f9b\u7684\u662fevent\u7684\u516c\u5171\u7684\u7c7b\u578b\u4fe1\u606f\uff0c\u5305\u62ecevent\u7684\u521b\u5efa\u65f6\u95f4\uff0c\u670d\u52a1\u5668\u7b49\u7b49\u3002"),(0,a.kt)("li",{parentName:"ul"},"data\u90e8\u5206\u63d0\u4f9b\u7684\u662f\u9488\u5bf9\u8be5event\u7684\u5177\u4f53\u4fe1\u606f\uff0c\u5982\u5177\u4f53\u6570\u636e\u7684\u4fee\u6539\u3002")))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u5e38\u89c1\u7684\u4e8b\u4ef6\u7c7b\u578b\u6709\uff1a")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"FORMAT_DESCRIPTION_EVENT"),"\uff1a\u8be5\u90e8\u5206\u4f4d\u4e8e\u6574\u4e2a\u6587\u4ef6\u7684\u5934\u90e8\uff0c\u6bcf\u4e2abinlog\u6587\u4ef6\u90fd\u5fc5\u5b9a\u4f1a\u6709\u552f\u4e00\u4e00\u4e2a\u8be5event"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"WRITE_ROW_EVENT"),"\uff1a\u63d2\u5165\u64cd\u4f5c\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"DELETE_ROW_EVENT"),"\uff1a\u5220\u9664\u64cd\u4f5c\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"UPDATE_ROW_EVENT"),"\uff1a\u66f4\u65b0\u64cd\u4f5c\u3002\u8bb0\u8f7d\u7684\u662f\u4e00\u6761\u8bb0\u5f55\u7684\u5b8c\u6574\u7684\u53d8\u5316\u60c5\u51b5\uff0c\u5373\u4ece",(0,a.kt)("strong",{parentName:"li"},"\u524d\u91cf"),"\u53d8\u4e3a",(0,a.kt)("strong",{parentName:"li"},"\u540e\u91cf"),"\u7684\u8fc7\u7a0b"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"ROTATE_EVENT"),"\uff1aBinlog\u7ed3\u675f\u65f6\u7684\u4e8b\u4ef6\uff0c\u7528\u4e8e\u8bf4\u660e\u4e0b\u4e00\u4e2abinlog\u6587\u4ef6\u3002")),(0,a.kt)("p",null,"\u4e00\u4e2aevent\u7684\u7ed3\u6784\u5982\u4e0b\uff0c\u6211\u4eec\u5728\u6062\u590d\u6570\u636e\u7684\u65f6\u5019\u5df2\u7ecf\u770b\u5230\u4e86\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220507142122405-84f6da7b.png",alt:"image-20220507142122405"}),"image-20220507142122405"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u6bcf\u4e2a\u65e5\u5fd7\u7684\u6700\u540e\u90fd\u5305\u542b\u4e00\u4e2a",(0,a.kt)("inlineCode",{parentName:"li"},"rotate event"),"\u7528\u4e8e\u8bf4\u660e\u4e0b\u4e00\u4e2abinlog\u6587\u4ef6\u3002"),(0,a.kt)("li",{parentName:"ul"},"binlog\u7d22\u5f15\u6587\u4ef6\u662f\u4e00\u4e2a\u6587\u672c\u6587\u4ef6\uff0c\u5176\u4e2d\u5185\u5bb9\u4e3a\u5f53\u524d\u7684binlog\u6587\u4ef6\u5217\u8868\uff0c\u6bd4\u5982\u4e0b\u9762\u5c31\u662f\u4e00\u4e2amysql-bin.index\u6587\u4ef6\u7684\u5185\u5bb9\u3002")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220507153011412-b6b2b640.png",alt:"image-20220507153011412"}),"image-20220507153011412"),(0,a.kt)("h4",{id:"5binlog\u5237\u76d8"},"5\u3001binlog\u5237\u76d8"),(0,a.kt)("p",null," \u4e8c\u8fdb\u5236\u65e5\u5fd7\u6587\u4ef6\u5e76\u4e0d\u662f\u6bcf\u6b21\u5199\u7684\u65f6\u5019\u540c\u6b65\u5230\u78c1\u76d8\u3002\u56e0\u6b64\u5f53\u6570\u636e\u5e93\u6240\u5728\u64cd\u4f5c\u7cfb\u7edf\u53d1\u751f\u5b95\u673a\u65f6\uff0c\u53ef\u80fd\u4f1a\u6709\u6700\u540e\u4e00\u90e8\u5206\u6570\u636e\u6ca1\u6709\u5199\u5165\u4e8c\u8fdb\u5236\u65e5\u5fd7\u6587\u4ef6\u4e2d\uff0c\u8fd9\u7ed9\u6062\u590d\u548c\u590d\u5236\u5e26\u6765\u4e86\u95ee\u9898\u3002  \u53c2\u6570",(0,a.kt)("inlineCode",{parentName:"p"},"sync_binlog=[N]"),"\u8868\u793a\u6bcf\u5199\u591a\u5c11\u6b21\u5c31\u540c\u6b65\u5230\u78c1\u76d8\u3002\u5982\u679c\u5c06N\u8bbe\u4e3a1\uff0c\u5373sync_binlog=1\u8868\u793a\u91c7\u7528\u540c\u6b65\u5199\u78c1\u76d8\u7684\u65b9\u5f0f\u6765\u5199\u4e8c\u8fdb\u5236\u65e5\u5fd7\uff0c\u8fd9\u65f6\u5199\u64cd\u4f5c\u4e0d\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684\u7f13\u51b2\u6765\u5199\u4e8c\u8fdb\u5236\u65e5\u5fd7\u3002\uff08\u5907\u6ce8\uff1a\u8be5\u503c\u9ed8\u8ba4\u4e3a0\uff0c\u91c7\u7528\u64cd\u4f5c\u7cfb\u7edf\u673a\u5236\u8fdb\u884c\u7f13\u51b2\u6570\u636e\u540c\u6b65\uff09\u3002"),(0,a.kt)("h4",{id:"6binlog\u5b9e\u73b0\u4e3b\u4ece\u540c\u6b65"},"6\u3001binlog\u5b9e\u73b0\u4e3b\u4ece\u540c\u6b65"),(0,a.kt)("p",null,"\u6570\u636e\u5e93\u5355\u70b9\u90e8\u7f72\u7684\u95ee\u9898\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u670d\u52a1\u5668\u5b95\u673a\uff0c\u4f1a\u5bfc\u81f4\u4e1a\u52a1\u505c\u987f\uff0c\u5f71\u54cd\u5ba2\u6237\u4f53\u9a8c\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u670d\u52a1\u5668\u635f\u574f\uff0c\u6570\u636e\u4e22\u5931\uff0c\u4e0d\u80fd\u53ca\u65f6\u5907\u4efd\uff0c\u9020\u6210\u5de8\u5927\u635f\u5931\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u8bfb\u5199\u64cd\u4f5c\u90fd\u5728\u540c\u4e00\u53f0\u670d\u52a1\u5668\uff0c\u5728\u5e76\u53d1\u91cf\u5927\u7684\u60c5\u51b5\u4e0b\u6027\u80fd\u5b58\u5728\u74f6\u9888\u3002")),(0,a.kt)("p",null,"\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528mysql\u7684binlog\u642d\u5efa\u4e00\u4e2a\u4e00\u4e3b\u591a\u4ece\u7684mysql\u96c6\u7fa4\u670d\u52a1\u3002\u8fd9\u6837\u7684\u670d\u52a1\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u5f02\u5730\u5907\u4efd\u6570\u636e\u3001\u8fdb\u884c\u8bfb\u5199\u5206\u79bb\uff0c\u63d0\u9ad8\u7cfb\u7edf\u7684\u53ef\u7528\u6027\u3002"),(0,a.kt)("h5",{id:"1-\u4e3b\u4ece\u590d\u5236\u5de5\u4f5c\u539f\u7406\u5256\u6790"},(0,a.kt)("strong",{parentName:"h5"},"\uff081\uff09 \u4e3b\u4ece\u590d\u5236\u5de5\u4f5c\u539f\u7406\u5256\u6790")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Master \u6570\u636e\u5e93\u53ea\u8981\u53d1\u751f\u53d8\u5316\uff0c\u7acb\u9a6c\u8bb0\u5f55\u5230Binary log \u65e5\u5fd7\u6587\u4ef6\u4e2d"),(0,a.kt)("li",{parentName:"ul"},"Slave\u6570\u636e\u5e93\u542f\u52a8\u4e00\u4e2aI/O thread\u8fde\u63a5Master\u6570\u636e\u5e93\uff0c\u8bf7\u6c42Master\u53d8\u5316\u7684\u4e8c\u8fdb\u5236\u65e5\u5fd7"),(0,a.kt)("li",{parentName:"ul"},"Slave I/O\u83b7\u53d6\u5230\u7684\u4e8c\u8fdb\u5236\u65e5\u5fd7\uff0c\u4fdd\u5b58\u5230\u81ea\u5df1\u7684Relay log \u65e5\u5fd7\u6587\u4ef6\u4e2d\u3002"),(0,a.kt)("li",{parentName:"ul"},"Slave \u6709\u4e00\u4e2a SQL thread\u5b9a\u65f6\u68c0\u67e5Realy log\u662f\u5426\u53d8\u5316\uff0c\u53d8\u5316\u90a3\u4e48\u5c31\u66f4\u65b0\u6570\u636e")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220424200331288-9a3461d4.png",alt:"image-20220424200331288"}),"image-20220424200331288"),(0,a.kt)("h5",{id:"2\u600e\u4e48\u914d\u7f6emysql\u4e3b\u4ece\u590d\u5236"},(0,a.kt)("strong",{parentName:"h5"},"\uff082\uff09\u600e\u4e48\u914d\u7f6emysql\u4e3b\u4ece\u590d\u5236")),(0,a.kt)("hr",null),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u73af\u5883\u51c6\u5907")),(0,a.kt)("p",null,"\u5b89\u88c5\u4e24\u4e2amysql\uff0c\u4f7f\u7528vmvare\u5b89\u88c5\u4e24\u4e2alinux\u7cfb\u7edf\u5c31\u53ef\u4ee5\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"mysql1(master): 42.192.181.133:3306\nmysql2(slave):  124.220.197.17:3306\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"mysql \u914d\u7f6e\u6587\u4ef6\u914d")),(0,a.kt)("p",null,"mysql1\uff08master\uff09: \u914d\u7f6e\u6587\u4ef6\u8bbe\u7f6e\uff0c\u5f00\u542fbin_log\uff08\u5df2\u7ecf\u5f00\u542f\u7684\u53ef\u4ee5\u5ffd\u7565\uff09\u4e14\u9700\u8981\u914d\u7f6e\u4e00\u4e2aserver-id"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"#mysql master1 config \n[mysqld]\nserver-id = 1            # \u8282\u70b9ID\uff0c\u786e\u4fdd\u552f\u4e00\n\n# log config\nlog-bin = master-bin     #\u5f00\u542fmysql\u7684binlog\u65e5\u5fd7\u529f\u80fd\n")),(0,a.kt)("p",null,"mysql2\uff08slave\uff09: \u9700\u8981\u5f00\u542f\u4e2d\u7ee7\u65e5\u5fd7"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"[mysqld]\nserver-id=2\nrelay-log=mysql-relay-bin\nreplicate-wild-ignore-table=mysql.%\nreplicate-wild-ignore-table=sys.%\nreplicate-wild-ignore-table=information_schema.%\nreplicate-wild-ignore-table=performance_schema.%\n")),(0,a.kt)("p",null,"\u91cd\u542f\u4e24\u4e2amysql\uff0c\u8ba9\u914d\u7f6e\u751f\u6548\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e09\u6b65 \u5728master\u6570\u636e\u5e93\u521b\u5efa\u590d\u5236\u7528\u6237\u5e76\u6388\u6743")),(0,a.kt)("p",null,"1.\u8fdb\u5165master\u7684\u6570\u636e\u5e93\uff0c\u4e3amaster\u521b\u5efa\u590d\u5236\u7528\u6237"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE USER 'repl'@'124.220.197.17' IDENTIFIED BY 'Root12345_';\n")),(0,a.kt)("p",null,"2.\u8d4b\u4e88\u8be5\u7528\u6237\u590d\u5236\u7684\u6743\u5229"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-csharp"},"grant replication slave on *.* to 'repl'@'124.220.197.17' \nFLUSH PRIVILEGES;\n")),(0,a.kt)("p",null,"3.\u67e5\u770bmaster\u7684\u72b6\u6001"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ruby"},"show master status;\nmysql> show master status;\n+------------------+----------+--------------+------------------+-------------------+\n| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |\n+------------------+----------+--------------+------------------+-------------------+\n| mysql-bin.000005      120|              | mysql            |                   |\n+------------------+----------+--------------+------------------+-------------------+\n1 row in set (0.00 sec)\n")),(0,a.kt)("p",null,"4,\u914d\u7f6e\u4ece\u5e93"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"CHANGE MASTER TO \nMASTER_HOST = '42.192.181.133',  \nMASTER_USER = 'repl', \nMASTER_PASSWORD = 'Root12345_',\nMASTER_PORT = 3306,\nMASTER_LOG_FILE='mysql-bin.000020',\nMASTER_LOG_POS=2735,\nMASTER_HEARTBEAT_PERIOD = 10000; \n\n# MASTER_LOG_FILE\u4e0e\u4e3b\u5e93File \u4fdd\u6301\u4e00\u81f4\n# MASTER_LOG_POS=120 , #\u4e0e\u4e3b\u5e93Position \u4fdd\u6301\u4e00\u81f4\n")),(0,a.kt)("p",null,"\u89e3\u91ca\uff1aMASTER_HEARTBEAT_PERIOD\u8868\u793a\u5fc3\u8df3\u7684\u5468\u671f\u3002\u5f53MASTER_HEARTBEAT_PERIOD\u65f6\u95f4\u4e4b\u5185\uff0cmaster\u6ca1\u6709binlog event\u53d1\u9001\u7ed9slave\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u53d1\u9001\u5fc3\u8df3\u6570\u636e\u7ed9slave\u3002"),(0,a.kt)("p",null,"5.\u542f\u52a8\u4ece\u5e93slave\u8fdb\u7a0b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-css"},"mysql> start slave;\nQuery OK, 0 rows affected (0.04 sec)\n")),(0,a.kt)("p",null,"6.\u67e5\u770b\u662f\u5426\u914d\u7f6e\u6210\u529f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"show slave status \\G;\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Slave_IO_Running\uff1a\u4ece\u5e93\u7684IO\u7ebf\u7a0b\uff0c\u7528\u6765\u63a5\u6536master\u53d1\u9001\u7684binlog\uff0c\u5e76\u5c06\u5176\u5199\u5165\u5230\u4e2d\u7ee7\u65e5\u5fd7relag log"),(0,a.kt)("li",{parentName:"ul"},"Slave_SQL_Running\uff1a\u4ece\u5e93\u7684SQL\u7ebf\u7a0b\uff0c\u7528\u6765\u4ecerelay log\u4e2d\u8bfb\u53d6\u5e76\u6267\u884cbinlog\u3002"),(0,a.kt)("li",{parentName:"ul"},"Slave_IO_Running\u3001Slave_SQL_Running\uff1a\u8fd9\u4e24\u4e2a\u8fdb\u7a0b\u7684\u72b6\u6001\u9700\u5168\u90e8\u4e3a YES\uff0c\u53ea\u8981\u6709\u4e00\u4e2a\u4e3a NO\uff0c\u5219\u590d\u5236\u5c31\u4f1a\u505c\u6b62\u3002"),(0,a.kt)("li",{parentName:"ul"},"Master_Log_File\uff1a\u8981\u540c\u6b65\u7684\u4e3b\u5e93\u7684binlog\u6587\u4ef6\u540d\u3002"),(0,a.kt)("li",{parentName:"ul"},"Read_Master_Log_Pos\uff1a\u5df2\u540c\u6b65\u7684\u4f4d\u7f6e\uff0c\u5373\u540c\u6b65\u7684 binlog \u6587\u4ef6\u5185\u7684\u5b57\u8282\u504f\u79fb\u91cf\uff0c\u8be5\u503c\u4f1a\u968f\u7740\u4e3b\u4ece\u540c\u6b65\u7684\u8fdb\u884c\u800c\u4e0d\u65ad\u5730\u589e\u957f\u3002"),(0,a.kt)("li",{parentName:"ul"},"Relay_Log_File\uff1a\u4ece\u5e93\u7684\u4e2d\u7ee7\u65e5\u5fd7\u6587\u4ef6\uff0c\u5bf9\u63a5\u6536\u5230\u7684\u4e3b\u5e93\u7684 binlog \u8fdb\u884c\u7f13\u51b2\u3002\u4ece\u5e93\u7684SQL\u7ebf\u7a0b\u4e0d\u65ad\u5730\u4ece relay log \u4e2d\u8bfb\u53d6 binlog \u5e76\u6267\u884c\u3002"),(0,a.kt)("li",{parentName:"ul"},"Relay_Log_Pos\uff1arelay log \u4e2d\u5df2\u8bfb\u53d6\u7684\u4f4d\u7f6e\u504f\u79fb\u91cf\u3002"),(0,a.kt)("li",{parentName:"ul"},"Seconds_Behind_Master: \u4e3b\u4ece\u540c\u6b65\u5ef6\u65f6, \u503c\u4e3a 0 \u4e3a\u6b63\u5e38\u60c5\u51b5\uff0c\u6b63\u503c\u8868\u793a\u5df2\u7ecf\u51fa\u73b0\u5ef6\u8fdf\uff0c\u6570\u5b57\u8d8a\u5927\u4ece\u5e93\u843d\u540e\u4e3b\u5e93\u8d8a\u591a\u3002")),(0,a.kt)("p",null,"7.\u5728\u4e3b\u5e93\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u5e93\u3001\u521b\u5efa\u4e00\u5f20\u8868\uff0c\u6267\u884c\u4e00\u4e9bsql\u8bed\u53e5\u8fdb\u884c\u6d4b\u8bd5\u3002"),(0,a.kt)("h5",{id:"3\u53ef\u80fd\u9047\u5230\u7684\u95ee\u9898"},"\uff083\uff09\u53ef\u80fd\u9047\u5230\u7684\u95ee\u9898"),(0,a.kt)("p",null,"\u5728\u914d\u7f6emysql\u4e3b\u4ece\u590d\u5236\u7684\u65f6\u5019\u53ef\u80fd\u51fa\u73b0\u4e00\u4e0b\u9519\u8bef\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"Fatal error: The slave I/O thread stops because master and slave have equal MySQL server UUIDs; these UUIDs must be different for replication to work.\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u539f\u56e0")),(0,a.kt)("p",null,"\u5982\u679c\u4f60\u4f7f\u7528\u4e86\u4e24\u53f0\u865a\u62df\u673a\uff0c\u4e00\u4e3b\u4e00\u4ece\uff0c\u4ece\u5e93\u7684mysql\u662f\u76f4\u63a5\u514b\u9686\u7684\u3002\u5728mysql 5.6\u7684\u590d\u5236\u5f15\u5165\u4e86uuid\u7684\u6982\u5ff5\uff0c\u5404\u4e2a\u590d\u5236\u7ed3\u6784\u4e2d\u7684server_uuid\u5f97\u4fdd\u8bc1\u4e0d\u4e00\u6837\uff0c\u4f46\u662f\u67e5\u770b\u5230\u76f4\u63a5\u514b\u9686data\u6587\u4ef6\u5939\u540eserver_uuid\u662f\u76f8\u540c\u7684\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u89e3\u51b3")),(0,a.kt)("p",null,"\u627e\u5230data\u6587\u4ef6\u5939\u4e0b\u7684auto.cnf\u6587\u4ef6\uff0c\u4fee\u6539\u91cc\u9762\u7684server_uuid\u503c\uff0c\u4fdd\u8bc1\u5404\u4e2adb\u7684server_uuid\u4e0d\u4e00\u6837\uff0c\u91cd\u542fdb\u5373\u53ef\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"}," cd /www/server/data\n")),(0,a.kt)("p",null,"\u4fee\u6539server_uuid\u7684\u503c"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220517180545563-de94e863.png",alt:"image-20220517180545563"}),"image-20220517180545563"),(0,a.kt)("p",null,"\u4f7f\u7528"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"select uuid();\n")),(0,a.kt)("p",null,"\u751f\u6210\u4e00\u4e2auuid\u5373\u53ef\uff0c\u91cd\u542f\u6570\u636e\u5e93\u3002"),(0,a.kt)("h3",{id:"\u4e8c\u5176\u4ed6\u65e5\u5fd7"},"\u4e8c\u3001\u5176\u4ed6\u65e5\u5fd7"),(0,a.kt)("h4",{id:"1\u901a\u7528\u67e5\u8be2\u65e5\u5fd7\u9ed8\u8ba4\u5173\u95ed"},"1\u3001\u901a\u7528\u67e5\u8be2\u65e5\u5fd7\uff0c\u9ed8\u8ba4\u5173\u95ed"),(0,a.kt)("p",null,"MySQL\u901a\u7528\u67e5\u8be2\u65e5\u5fd7\uff0c\u5b83\u662f\u8bb0\u5f55\u5efa\u7acb\u7684\u5ba2\u6237\u7aef\u8fde\u63a5\u548c\u6267\u884c\u7684\u6240\u6709DDL\u548cDML\u8bed\u53e5(\u4e0d\u7ba1\u662f\u6210\u529f\u8bed\u53e5\u8fd8\u662f\u6267\u884c\u6709\u9519\u8bef\u7684\u8bed\u53e5)\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u662f\u4e0d\u5f00\u542f\u7684\u3002\u8bf7\u6ce8\u610f\uff0c\u5b83\u4e5f\u662f\u4e00\u4e2a\u6587\u672c\u6587\u4ef6\u3002"),(0,a.kt)("p",null,"\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u7684sql\u67e5\u770b\u67e5\u8be2\u65e5\u5fd7\u7684\u72b6\u6001\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220507154040417-4f619c0d.png",alt:"image-20220507154040417"}),"image-20220507154040417"),(0,a.kt)("p",null,"\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5f00\u542f\u901a\u7528\u67e5\u8be2\u65e5\u5fd7\uff0c\u4e00\u822c\u4e0d\u5f00\u542f\uff0c\u8fd9\u662f\u4e3a\u4e86\u6d4b\u8bd5\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u91cd\u542f\u670d\u52a1\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"# \u5728\u5168\u5c40\u6a21\u5f0f\u4e0b\uff0c\u5f00\u542f\u901a\u7528\u67e5\u8be2\u65e5\u5fd7\uff0c1\u8868\u793a\u5f00\u542f\uff0c0\u8868\u793a\u5173\u95ed\nSET global general_log=1;\n")),(0,a.kt)("p",null,"\u5f00\u542f\u540e\uff0c\u6211\u4eec\u968f\u4fbf\u6267\u884csql\u8bed\u53e5\u4e4b\u540e\uff0c\u4f60\u4f1a\u53d1\u73b0data\u76ee\u5f55\u591a\u4e86\u4ee5\u4e0b\u6587\u4ef6\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220507154728204-b2cfd978.png",alt:"image-20220507154728204"}),"image-20220507154728204"),(0,a.kt)("p",null,"\u4f7f\u7528more\u547d\u4ee4\u67e5\u770b\u8be5\u6587\u4ef6\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"more VM-12-17-centos.log \n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220507154844881-2734c9b5.png",alt:"image-20220507154844881"}),"image-20220507154844881"),(0,a.kt)("h4",{id:"2\u6162\u67e5\u8be2\u65e5\u5fd7"},"2\u3001\u6162\u67e5\u8be2\u65e5\u5fd7"),(0,a.kt)("p",null,"\u5f53\u524d\u7248\u672c\u6162\u67e5\u8be2\u65e5\u5fd7\u9ed8\u8ba4\u662f\u5f00\u542f\u7684\uff0c\u6709\u7684\u7248\u672c\u662f\u5173\u95ed\u7684\uff0c\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u67e5\u770b\u6162\u67e5\u8be2\u65e5\u5fd7\u7684\u72b6\u6001\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220507160012005-cee5dfa1.png",alt:"image-20220507160012005"}),"image-20220507160012005"),(0,a.kt)("p",null,"\u90a3\u4e48\uff0c\u4f55\u4e3a\u6162\uff1fmysql\u901a\u8fc7\u4e00\u4e2a\u53d8\u91cf\u2018long_query_time\u2019\u6765\u786e\u5b9asql\u6162\u4e0d\u6162\uff0c\u6267\u884c\u65f6\u95f4\u5927\u4e8e\u8be5\u503c\u5c31\u4f1a\u88ab\u8bb0\u5f55\u5728\u6162\u67e5\u8be2\u65e5\u5fd7\u4e2d\uff0c\u9ed8\u8ba4\u662f3s\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"show variables like 'long_query_time'\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220507160149874-196fb203.png",alt:"image-20220507160149874"}),"image-20220507160149874"),(0,a.kt)("p",null,"\u4ee5\u4e0b\u662f\u3010\u6162\u67e5\u8be2\u65e5\u5fd7\u3011\u7684\u8bb0\u5f55\u6587\u672c\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220507154539012-bfc82d0b.png",alt:"image-20220507154539012"}),"image-20220507154539012"),(0,a.kt)("h4",{id:"3\u9519\u8bef\u65e5\u5fd7"},"3\u3001\u9519\u8bef\u65e5\u5fd7"),(0,a.kt)("p",null,"\u9519\u8bef\u65e5\u5fd7\uff08Error Log\uff09\u4e3b\u8981\u8bb0\u5f55 MySQL \u670d\u52a1\u5668\u542f\u52a8\u548c\u505c\u6b62\u8fc7\u7a0b\u4e2d\u7684\u4fe1\u606f\u3001\u670d\u52a1\u5668\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u53d1\u751f\u7684\u6545\u969c\u548c\u5f02\u5e38\u60c5\u51b5\u7b49\u3002\u4e00\u65e6\u53d1\u751fmysql\u670d\u52a1\u65e0\u6cd5\u542f\u52a8\u3001\u7a0b\u5e8f\u5d29\u6e83\u4e00\u5b9a\u8981\u8bb0\u5f97\u53bb\u67e5\u8be2\u9519\u8bef\u65e5\u5fd7\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220507155123988-72e86ff4.png",alt:"image-20220507155123988"}),"image-20220507155123988"),(0,a.kt)("p",null,"\u6211\u4eec\u968f\u4fbf\u4eba\u4e3a\u4e00\u4e2a\u9519\u8bef\u5bfc\u81f4\u4ed6\u65e0\u6cd5\u542f\u52a8\uff0c\u91cd\u65b0\u542f\u52a8mysql\u547d\u4ee4\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"service mysqld restart\nsystemctl mysqld restart\n")),(0,a.kt)("p",null,"\u6211\u4eec\u5c06inndb\u7684\u7cfb\u7edf\u8868\u7a7a\u95f4\u6587\u4ef6\u91cd\u547d\u540d\uff0c\u91cd\u65b0\u542f\u52a8mysql\u670d\u52a1\uff0c\u53d1\u751f\u95ee\u9898\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220507161525384-b896b188.png",alt:"image-20220507161525384"}),"image-20220507161525384"),(0,a.kt)("p",null,"\u67e5\u8be2\u9519\u8bef\u65e5\u5fd7\uff0c\u5bfb\u627e\u86db\u4e1d\u9a6c\u8ff9\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220507161639367-14d97ab2.png",alt:"image-20220507161639367"}),"image-20220507161639367"),(0,a.kt)("p",null,"\u4fee\u6539\u56de\u6b63\u786e\u7684\u540d\u5b57\uff0c\u91cd\u65b0\u542f\u52a8\u6210\u529f\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220507161102642-5881b0da.png",alt:"image-20220507161102642"}),"image-20220507161102642"),(0,a.kt)("h3",{id:"\u4e09redo-log\u65e5\u5fd7"},"\u4e09\u3001redo log\u65e5\u5fd7"),(0,a.kt)("p",null,"\u63a5\u4e0b\u6765\u7684\u4e24\u4e2a\u65e5\u5fd7\uff0c\u662finnodb\u4e3a\u89e3\u51b3\u4e0d\u540c\u95ee\u9898\u800c\u5f15\u51fa\u7684\u4e24\u7c7b\u65e5\u5fd7\u6587\u4ef6\u3002"),(0,a.kt)("p",null,"redo log\uff08\u91cd\u505a\u65e5\u5fd7\uff09\u7684\u8bbe\u8ba1\u4e3b\u8981\u662f\u4e3a\u4e86\u9632\u6b62\u56e0\u7cfb\u7edf\u5d29\u6e83\u800c\u5bfc\u81f4\u7684\u6570\u636e\u4e22\u5931\uff0c\u5176\u5b9e\u89e3\u51b3\u56e0\u7cfb\u7edf\u5d29\u6e83\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u7684\u601d\u8def\u5982\u4e0b\uff1a"),(0,a.kt)("p",null,"1\u3001\u6bcf\u6b21\u63d0\u4ea4\u4e8b\u52a1\u4e4b\u524d\uff0c\u5fc5\u987b\u5c06\u6240\u6709\u548c\u5f53\u524d\u4e8b\u52a1\u76f8\u5173\u7684\u3010buffer pool\u4e2d\u7684\u810f\u9875\u3011\u5237\u5165\u78c1\u76d8\uff0c\u4f46\u662f\uff0c\u8fd9\u4e2a\u6548\u7387\u6bd4\u8f83\u4f4e\uff0c\u53ef\u80fd\u4f1a\u5f71\u54cd\u4e3b\u7ebf\u7a0b\u7684\u6548\u7387\uff0c\u4ea7\u751f\u7528\u6237\u7b49\u5f85\uff0c\u964d\u4f4e\u54cd\u5e94\u901f\u5ea6\uff0c\u56e0\u4e3a\u5237\u76d8\u662fI/O\u64cd\u4f5c\uff0c\u540c\u65f6\u4e00\u4e2a\u4e8b\u52a1\u7684\u8bfb\u5199\u64cd\u4f5c\u4e5f\u4e0d\u662f\u987a\u5e8f\u8bfb\u5199\u3002"),(0,a.kt)("p",null,"2\u3001\u628a\u5f53\u524d\u4e8b\u52a1\u4e2d\u4fee\u6539\u7684\u6570\u636e\u5185\u5bb9\u5728\u65e5\u5fd7\u4e2d\u8bb0\u5f55\u4e0b\u6765\uff0c\u65e5\u5fd7\u8bb0\u5f55\u662f\u987a\u5e8f\u5199\uff0c\u6027\u80fd\u5f88\u9ad8\u3002\u5176\u5b9emysql\u5c31\u662f\u8fd9\u4e48\u505a\u7684\uff0c\u8fd9\u4e2a\u65e5\u5fd7\u88ab\u79f0\u4e3aredo log\u3002\u6267\u884c\u4e8b\u52a1\u4e2d\uff0c\u6bcf\u6267\u884c\u4e00\u6761\u8bed\u53e5\uff0c\u5c31\u53ef\u80fd\u6709\u82e5\u5e72redo\u65e5\u5fd7\uff0c\u5e76\u6309\u4ea7\u751f\u7684\u987a\u5e8f\u5199\u5165\u78c1\u76d8\uff0credo\u65e5\u5fd7\u5360\u7528\u7684\u7a7a\u95f4\u975e\u5e38\u5c0f\uff0c\u5f53redo log\u7a7a\u95f4\u6ee1\u4e86\u4e4b\u540e\u53c8\u4f1a\u4ece\u5934\u5f00\u59cb\u4ee5\u5faa\u73af\u7684\u65b9\u5f0f\u8fdb\u884c\u8986\u76d6\u5f0f\u7684\u5199\u5165\u3002"),(0,a.kt)("p",null,"redo log\u7684\u683c\u5f0f\u6bd4\u8f83\u7b80\u5355\uff0c\u5305\u542b\u4e00\u4e0b\u51e0\u4e2a\u90e8\u5206\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"type\uff1a\u8be5\u65e5\u5fd7\u7684\u7c7b\u578b\uff0c\u57285.7\u7248\u672c\u4e2d\uff0c\u5927\u6982\u670953\u79cd\u4e0d\u540c\u7c7b\u578b\u7684redo log\uff0c\u5360\u7528\u4e00\u4e2a\u5b57\u8282"),(0,a.kt)("li",{parentName:"ul"},"space id\uff1a\u8868\u7a7a\u95f4id"),(0,a.kt)("li",{parentName:"ul"},"page number\uff1a\u9875\u53f7"),(0,a.kt)("li",{parentName:"ul"},"data\uff1a\u65e5\u5fd7\u6570\u636e")),(0,a.kt)("h4",{id:"1mtr"},"1\u3001MTR"),(0,a.kt)("p",null,"\u5728innodb\u6267\u884c\u4efb\u52a1\u65f6\uff0c\u6709\u5f88\u591a\u64cd\u4f5c\uff0c\u5fc5\u987b\u5177\u6709\u539f\u5b50\u6027\uff0c\u6211\u4eec\u628a\u8fd9\u4e00\u7c7b\u64cd\u4f5c\u79f0\u4e4b\u4e3aMIni Transaction\uff0c\u6211\u4eec\u4ee5\u4e0b\u8fb9\u7684\u4f8b\u5b50\u4e3a\u4f8b\uff1a"),(0,a.kt)("p",null,"\u5728\u6211\u4eec\u5411B+\u6811\u4e2d\u63d2\u5165\u4e00\u6761\u8bb0\u5f55\u7684\u65f6\u5019\uff0c\u9700\u8981\u5b9a\u4f4d\u8fd9\u6761\u6570\u636e\u5c06\u8981\u63d2\u5165\u7684\u3010\u6570\u636e\u9875\u3011\uff0c\u56e0\u4e3a\u63d2\u5165\u7684\u4f4d\u7f6e\u4e0d\u540c\uff0c\u53ef\u80fd\u4f1a\u6709\u4ee5\u4e0b\u60c5\u51b5\uff1a"),(0,a.kt)("p",null,"1\u3001\u5f85\u63d2\u5165\u7684\u9875\u62e5\u6709\u3010\u5145\u8db3\u7684\u5269\u4f59\u7a7a\u95f4\u3011\uff0c\u8db3\u4ee5\u5bb9\u7eb3\u8fd9\u6761\u6570\u636e\uff0c\u90a3\u5c31\u76f4\u63a5\u63d2\u5165\u5c31\u597d\u4e86\uff0c\u8fd9\u79cd\u60c5\u51b5\u9700\u8981\u8bb0\u5f55\u4e00\u6761\u3010MLOG_COMP_REC_INSERT\u7c7b\u578b\u3011\u7684redo\u65e5\u5fd7\u5c31\u597d\u4e86\uff0c\u8fd9\u79cd\u60c5\u51b5\u6210\u4e3a\u4e50\u89c2\u63d2\u5165\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220510121537504-a3ac363a.png",alt:"image-20220510121537504"}),"image-20220510121537504"),(0,a.kt)("p",null,"2\u3001\u5f85\u63d2\u5165\u7684\u9875\u3010\u5269\u4f59\u7a7a\u95f4\u4e0d\u8db3\u3011\u4ee5\u5bb9\u7eb3\u8be5\u6761\u8bb0\u5f55\uff0c\u8fd9\u6837\u5c31\u6bd4\u8f83\u9ebb\u70e6\u4e86\uff0c\u5fc5\u987b\u8fdb\u884c\u3010\u9875\u5206\u88c2\u3011\u4e86\u3002\u5fc5\u987b\u65b0\u5efa\u4e00\u4e2a\u9875\u9762\uff0c\u5c06\u539f\u59cb\u9875\u9762\u7684\u6570\u636e\u62f7\u8d1d\u4e00\u90e8\u5206\u5230\u65b0\u9875\u9762\uff0c\u7136\u540e\u63d2\u5165\u6570\u636e\u3002\u8fd9\u5176\u4e2d\u5bf9\u5e94\u4e86\u597d\u51e0\u4e2a\u64cd\u4f5c\uff0c\u5fc5\u987b\u8bb0\u5f55\u591a\u6761rede log\uff0c\u5305\u62ec\u7533\u8bf7\u65b0\u7684\u6570\u636e\u9875\u3001\u4fee\u6539\u6bb5\u3001\u533a\u7684\u4fe1\u606f\u3001\u4fee\u6539\u5404\u79cd\u94fe\u8868\u4fe1\u606f\u7b49\u64cd\u4f5c\uff0c\u9700\u8981\u8bb0\u5f55\u7684redo log\u53ef\u80fd\u5c31\u6709\u4e8c\u4e09\u5341\u6761\uff0c\u4f46\u662f\u672c\u6b21\u64cd\u4f5c\u5fc5\u987b\u662f\u4e00\u4e2a\u3010\u539f\u5b50\u6027\u64cd\u4f5c\u3011\uff0c\u5728\u8bb0\u5f55\u7684\u8fc7\u7a0b\u4e2d\uff0c\u8981\u5168\u90e8\u8bb0\u5f55\uff0c\u8981\u4e48\u5168\u90e8\u5931\u8d25\uff0c\u8fd9\u79cd\u60c5\u51b5\u5c31\u88ab\u79f0\u4e4b\u4e3a\u4e00\u4e2aMIni Transaction\uff08\u6700\u5c0f\u4e8b\u52a1\uff09\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220510121522561-cee67760.png",alt:"image-20220510121522561"}),"image-20220510121522561"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff081\uff09MTR\u7684\u6309\u7ec4\u5199\u5165")),(0,a.kt)("p",null,"\u5bf9\u4e8e\u4e00\u4e2a\u3010MTR\u3011\u64cd\u4f5c\u5fc5\u987b\u662f\u539f\u5b50\u7684\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u539f\u5b50\u6027\uff0cinnodb\u4f7f\u7528\u4e86\u7ec4\u7684\u5f62\u5f0f\u6765\u8bb0\u5f55redo \u65e5\u5fd7\uff0c\u5728\u6062\u590d\u65f6\uff0c\u8981\u4e48\u8fd9\u4e00\u7ec4\u7684\u7684\u65e5\u5fd7\u5168\u90e8\u6062\u590d\uff0c\u8981\u4e48\u4e00\u6761\u4e5f\u4e0d\u6062\u590d\u3002innodb\u4f7f\u7528\u4e00\u6761\u7c7b\u578b\u4e3a",(0,a.kt)("inlineCode",{parentName:"p"},"MLO_MULTI_REC_END"),"\u7c7b\u578b\u7684redo log\u4f5c\u4e3a\u7ec4\u7684\u7ed3\u5c3e\u6807\u5fd7\uff0c\u5728\u7cfb\u7edf\u5d29\u6e83\u6062\u590d\u65f6\u53ea\u6709\u89e3\u6790\u5230\u8be5\u9879\u65e5\u5fd7\uff0c\u624d\u8ba4\u4e3a\u89e3\u6790\u5230\u4e86\u4e00\u7ec4\u5b8c\u6574\u7684redo log\uff0c\u5426\u5219\u76f4\u63a5\u653e\u5f03\u524d\u8fb9\u89e3\u6790\u7684\u65e5\u5fd7\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220510121447118-6fc6234d.png",alt:"image-20220510121447118"})),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff082\uff09\u5355\u6761redolog\u7684\u6807\u8bc6\u65b9\u6cd5")),(0,a.kt)("p",null,"\u6709\u4e9b\u64cd\u4f5c\u53ea\u4f1a\u4ea7\u751f\u4e00\u6761redo log\uff0cinnodb\u662f\u901a\u8fc7\u3010\u7c7b\u578b\u6807\u8bc6\u3011\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u6765\u5224\u65ad\uff0c\u8fd9\u4e2a\u65e5\u5fd7\u662f\u5355\u4e00\u65e5\u5fd7\u8fd8\u662f\u7ec4\u65e5\u5fd7\uff0c\u5982\u4e0b\u56fe\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220510121610230-f3c4f4b4.png",alt:"image-20220510121610230"})),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff083\uff09\u4e8b\u52a1\u3001sql\u3001MTR\u3001redolog\u7684\u5173\u7cfb\u5982\u4e0b")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4e00\u4e2a\u4e8b\u52a1\u5305\u542b\u4e00\u6761\u6216\u591a\u6761sql"),(0,a.kt)("li",{parentName:"ul"},"\u4e00\u6761sql\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2aMTR"),(0,a.kt)("li",{parentName:"ul"},"\u4e00\u4e2aMTR\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2aredo log")),(0,a.kt)("h4",{id:"2log-buffer"},"2\u3001log buffer"),(0,a.kt)("p",null,"\u4efb\u4f55\u53ef\u80fd\u4ea7\u751f\u5927\u91cfI/O\u7684\u64cd\u4f5c\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u90fd\u4f1a\u8bbe\u8ba1\u3010\u7f13\u51b2\u5c42\u3011\uff0cmysql\u542f\u52a8\u65f6\u4e5f\u4f1a\u5411\u64cd\u4f5c\u7cfb\u7edf\u7533\u8bf7\u4e00\u7247\u7a7a\u95f4\u4f5c\u4e3aredo log\u7684\u3010\u7f13\u51b2\u533a\u3011\uff0cinnodb\u4f7f\u7528\u4e00\u4e2a\u53d8\u91cf",(0,a.kt)("inlineCode",{parentName:"p"},"buf_free"),"\u6765\u6807\u8bb0\u4e0b\u4e00\u6761redo log\u7684\u63d2\u5165\u4f4d\u7f6e\uff08\u6807\u8bb0\u504f\u79fb\u91cf\uff09\uff0clog buffer\u4f1a\u5728\u5408\u9002\u7684\u65f6\u673a\u8fdb\u884c\u5237\u76d8\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"log buffer\u7a7a\u95f4\u4e0d\u8db3\u3002logbuffer\u7684\u5bb9\u91cf\u7531",(0,a.kt)("inlineCode",{parentName:"li"},"innodb_log_buffer_size"),"\u6307\u5b9a\uff0c\u5f53\u5199\u5165log buffer\u7684\u65e5\u5fd7\u5927\u4e8e\u5bb9\u91cf\u768450%\uff0c\u5c31\u4f1a\u8fdb\u884c\u5237\u76d8\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u63d0\u4ea4\u4e8b\u52a1\u65f6\uff0c\u5982\u679c\u9700\u8981\u5b9e\u73b0\u5d29\u6e83\u6062\u590d\uff0c\u4fdd\u8bc1\u6570\u636e\u7684\u6301\u4e45\u6027\uff0c\u63d0\u4ea4\u4e8b\u52a1\u65f6\u5fc5\u987b\u63d0\u4ea4redo log\uff0c\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u4e3a\u4e86\u6548\u7387\u4e0d\u53bb\u63d0\u4ea4\uff0c\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u8bbe\u7f6e\u8be5\u9879\u76ee\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u540e\u53f0\u6709\u72ec\u7acb\u7ebf\u7a0b\u5927\u7ea6\u6bcf\u9694\u4e00\u79d2\u4f1a\u5237\u65b0\u76d8\u4e00\u6b21\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u6b63\u5e38\u5173\u95ed\u670d\u52a1\u5668\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u505acheckpoint\u65f6\uff0c\u540e\u8fb9\u4f1a\u8bb2\u3002")),(0,a.kt)("p",null,"\u6709\u7f13\u51b2\u5c31\u53ef\u80fd\u5b58\u5728\u6570\u636e\u4e0d\u4e00\u81f4\uff0c\u54b1\u4eec\u63a5\u7740\u5f80\u4e0b\u770b\u3002"),(0,a.kt)("h4",{id:"3checkpoint"},"3\u3001checkpoint"),(0,a.kt)("p",null,"redolog\u65e5\u5fd7\u6587\u4ef6\u5bb9\u91cf\u662f\u6709\u9650\u7684\uff0c\u9700\u8981\u5faa\u73af\u4f7f\u7528\uff0credo log\u7684\u4f5c\u7528\u4ec5\u4ec5\u662f\u4e3a\u4e86\u5728\u5d29\u6e83\u65f6\u6062\u590d\u810f\u9875\u6570\u636e\u4f7f\u7528\u7684\uff0c\u5982\u679c\u810f\u9875\u5df2\u7ecf\u5237\u5230\u78c1\u76d8\u4e0a\uff0c\u5176\u5bf9\u5e94\u7684redo log\u4e5f\u5c31\u6ca1\u7528\u4e86\uff0c\u4ed6\u4e5f\u5c31\u53ef\u4ee5\u88ab\u91cd\u590d\u5229\u7528\u4e86\u3002",(0,a.kt)("strong",{parentName:"p"},"checkpoint\u7684\u4f5c\u7528\u5c31\u662f\u7528\u6765\u6807\u8bb0\u54ea\u4e9b\u65e7\u7684redo log\u53ef\u4ee5\u88ab\u8986\u76d6\u3002")),(0,a.kt)("p",null,"\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\uff0c\u5224\u65adredo log\u5360\u7528\u7684\u78c1\u76d8\u7a7a\u95f4\u662f\u5426\u53ef\u4ee5\u88ab\u91cd\u65b0\u5229\u7528\u7684\u6807\u5fd7\u5c31\u662f\uff0c\u5bf9\u5e94\u7684\u810f\u9875\u6709\u6ca1\u6709\u88ab\u5237\u65b0\u5230\u78c1\u76d8\u3002\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e2a\u76ee\u7684\uff0c\u6211\u4eec\u9700\u8981\u4e86\u89e3\u4e00\u4e0b\u4e0b\u8fb9\u51e0\u4e2a\u8bb0\u5f55\u503c\u7684\u4f5c\u7528\uff1a"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff081\uff09lsn")),(0,a.kt)("p",null,"lsn\uff08log sequence number\uff09\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u3002mysql\u5728\u8fd0\u884c\u671f\u95f4\uff0c\u4f1a\u4e0d\u65ad\u7684\u4ea7\u751fredo log\uff0c\u65e5\u5fd7\u7684\u91cf\u4f1a\u4e0d\u65ad\u589e\u52a0\uff0cinnodb\u4f7f\u7528lsn\u6765\u8bb0\u5f55\u5f53\u524d\u603b\u8ba1\u5199\u5165\u7684\u65e5\u5fd7\u91cf\uff0clsn\u7684\u521d\u59cb\u503c\u4e0d\u662f0\uff0c\u800c\u662f8704\uff0c\u539f\u56e0\u672a\u77e5\u3002\u7cfb\u7edf\u5728\u8bb0\u5f55lsn\u65f6\u662f\u6309\u7167\u3010\u504f\u79fb\u91cf\u3011\u4e0d\u65ad\u7d2f\u52a0\u7684\u3002",(0,a.kt)("strong",{parentName:"p"},"lsn\u7684\u503c\u8d8a\u5c0f\u8bf4\u660eredo log\u4ea7\u751f\u7684\u8d8a\u65e9\u3002")),(0,a.kt)("p",null,"\u6bcf\u4e00\u7ec4redo log\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684lsn\u503c\u548c\u4ed6\u5bf9\u5e94\uff0c\u4f60\u53ef\u4ee5\u7406\u89e3\u4e3alsn\u662fredo log\u7684\u5e74\u9f84\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff082\uff09flush_to_disk_lsn")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"flush_to_disk_lsn"),"\u4e5f\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\uff0c\u8868\u793a\u5df2\u7ecf\u5237\u5165\u78c1\u76d8\u7684redo log\u7684\u91cf\uff0c\u4ed6\u5c0f\u4e8e\u7b49\u4e8elsn\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff1a"),(0,a.kt)("p",null,"1\u3001\u5c06redo log\u5199\u5165log buffer\uff0clsn\u589e\u52a0\uff0c\u5047\u5982\uff1a8704+1024 = 9728\uff0c\u6b64\u65f6flush_to_disk_lsn\u4e0d\u53d8\u3002"),(0,a.kt)("p",null,"2\u3001\u5237\u5982512\u5b57\u8282\u5230\u78c1\u76d8\uff0c\u6b64\u65f6flush_to_disk_lsn=8704+512=9256\u3002"),(0,a.kt)("p",null,"\u5982\u679c\u4e24\u8005\u6570\u636e\u76f8\u540c\uff0c\u8bf4\u660e\u5df2\u7ecf\u5168\u90e8\u5237\u76d8\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff083\uff09flush\u94fe\u4e2d\u7684lsn")),(0,a.kt)("p",null,"\u5176\u5b9e\u8981\u4fdd\u8bc1\u6570\u636e\u4e0d\u4e22\u5931\uff0c\u6838\u5fc3\u7684\u5de5\u4f5c\u662f\u8981\u5c06buffer pool\u4e2d\u7684\u810f\u9875\u8fdb\u884c\u5237\u76d8\uff0c\u4f46\u662f\u5237\u76d8\u5de5\u4f5c\u6bd4\u8f83\u635f\u8017\u6027\u80fd\uff0c\u9700\u8981\u72ec\u7acb\u7684\u7ebf\u7a0b\u5728\u540e\u53f0\u9759\u9ed8\u64cd\u4f5c\u3002"),(0,a.kt)("p",null,"\u56de\u987e\u4e00\u4e0bflush\u94fe\uff0c\u5f53\u7b2c\u4e00\u6b21\u4fee\u6539\u67d0\u4e2a\u5df2\u7ecf\u52a0\u8f7d\u5230buffer pool\u4e2d\u7684\u9875\u9762\u65f6\uff0c\u4ed6\u4f1a\u53d8\u6210\u3010\u810f\u9875\u3011\uff0c\u4f1a\u628a\u4ed6\u653e\u7f6e\u5728flush\u94fe\u8868\u7684\u5934\u90e8\uff0cflush\u94fe\u8868\u662f\u6309\u7167\u7b2c\u4e00\u6b21\u4fee\u6539\u7684\u65f6\u95f4\u6392\u5e8f\u7684\u3002\u518d\u7b2c\u4e00\u6b21\u4fee\u6539\u7f13\u51b2\u9875\u65f6\uff0c\u4f1a\u5728\u3010\u7f13\u51b2\u9875\u5bf9\u5e94\u7684\u63a7\u5236\u5757\u3011\u4e2d\uff0c\u8bb0\u5f55\u4ee5\u4e0b\u4e24\u4e2a\u5c5e\u6027\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"oldest_modification\uff1a",(0,a.kt)("strong",{parentName:"li"},"\u7b2c\u4e00\u6b21"),"\u4fee\u6539\u7f13\u51b2\u9875\u65f6\uff0c\u5c31\u5c06\u3010\u4fee\u6539\u8be5\u9875\u9762\u7684\u7b2c\u4e00\u7ec4redo log\u7684lsn\u503c\u3011\u8bb0\u5f55\u5728\u5bf9\u5e94\u7684\u63a7\u5236\u5757\u3002"),(0,a.kt)("li",{parentName:"ul"},"newest_modification\uff1a",(0,a.kt)("strong",{parentName:"li"},"\u6bcf\u4e00\u6b21"),"\u4fee\u6539\u7f13\u51b2\u9875\u65f6\uff0c\u5c31\u5c06\u3010\u4fee\u6539\u8be5\u9875\u9762\u7684\u6700\u540e\u7ec4redo log\u7684lsn\u503c\u3011\u8bb0\u5f55\u5728\u5bf9\u5e94\u7684\u63a7\u5236\u5757\u3002")),(0,a.kt)("p",null,"\u65e2\u7136flush\u94fe\u8868\u662f\u6309\u7167\u4fee\u6539\u65e5\u671f\u6392\u5e8f\u7684\uff0c\u90a3\u4e48\u4e5f\u5c31\u610f\u5473\u7740\uff0coldest_modification\u7684\u503c\u4e5f\u662f\u6709\u5e8f\u7684\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff084\uff09checkpoint\u8fc7\u7a0b")),(0,a.kt)("p",null,"\u6267\u884c\u4e00\u4e2acheck point\u53ef\u4ee5\u5206\u4e3a\u4e24\u4e2a\u6b65\u9aa4"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e00\u6b65\uff1a"),"\u8ba1\u7b97\u5f53\u524dredo log\u6587\u4ef6\u4e2d\u53ef\u4ee5\u88ab\u8986\u76d6\u7684redo\u65e5\u5fd7\u5bf9\u5e94\u7684lsn\u7684\u503c\u662f\u591a\u5c11\uff1a"),(0,a.kt)("p",null,"1\u3001flush\u94fe\u662f\u6309\u7167\u7b2c\u4e00\u6b21\u4fee\u6539\u7684\u65f6\u95f4\u6392\u5e8f\u7684\uff0c\u5f53\u7136\u63a7\u5236\u5757\u5185\u7684\u3010oldest_modification\u3011\u8bb0\u5f55\u7684lsn\u503c\u4e5f\u662f\u6709\u5e8f\u7684\u3002"),(0,a.kt)("p",null,"2\u3001\u6211\u4eec\u627e\u5230flush\u94fe\u8868\u7684\u5934\u8282\u70b9\u4e0a\u7684\u3010oldest_modification\u3011\u6240\u8bb0\u5f55\u7684lsn\u503c\uff0c\u4e5f\u5c31\u627e\u5230\u4e86\u4e00\u4e2a\u53ef\u4ee5\u5237\u76d8\u7684\u6700\u5927\u7684lsn\u503c\uff0c\u5c0f\u4e8e\u8fd9\u4e2a\u503c\u7684\u810f\u9875\uff0c\u80af\u5b9a\u5df2\u7ecf\u5237\u5165\u78c1\u76d8\u3002"),(0,a.kt)("p",null,"3\u3001\u6240\u6709\u5c0f\u4e8e\u8fd9\u4e2alsn\u503c\u7684redo log\uff0c\u90fd\u53ef\u4ee5\u88ab\u8986\u76d6\u91cd\u7528\u3002"),(0,a.kt)("p",null,"4\u3001\u5c06\u8fd9\u4e2alsn\u503c\u8d4b\u503c\u7ed9\u4e00\u4e2a\u5168\u5c40\u53d8\u91cfcheckpoint_lsn\uff0c\u4ed6\u4ee3\u8868\u53ef\u4ee5\u88ab\u8986\u76d6\u7684\u91cf\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u7b2c\u4e8c\u6b65\uff1a"),"\u5c06checkpoint_lsn\u4e0e\u5bf9\u5e94\u7684redo log\u65e5\u5fd7\u6587\u4ef6\u7ec4\u504f\u79fb\u91cf\u4ee5\u53ca\u6b64\u6b21checkpoint\u7684\u7f16\u53f7\uff08checkpoint_no\u4e5f\u662f\u4e00\u4e2a\u53d8\u91cf\uff0c\u8bb0\u5f55\u4e86checkpoint\u7684\u6b21\u6570\uff09\u5168\u90e8\u8bb0\u5f55\u5728\u65e5\u5fd7\u6587\u4ef6\u7684\u7ba1\u7406\u4fe1\u606f\u5185\u3002"),(0,a.kt)("h4",{id:"4\u4e00\u4e2a\u4e8b\u52a1\u7684\u6267\u884c\u6d41\u7a0b"},"4\u3001\u4e00\u4e2a\u4e8b\u52a1\u7684\u6267\u884c\u6d41\u7a0b"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220510174411661-951cbbb0.png",alt:"image-20220510174411661"}),"image-20220510174411661"),(0,a.kt)("p",null,"\u4e3b\u7ebf\u7a0b"),(0,a.kt)("p",null,"1\u3001\u5ba2\u6237\u7aef\u8bbf\u95eemysql\u670d\u52a1\uff0c\u5728buffer pool\u4e2d\u8fdb\u884c\u64cd\u4f5c\uff08\u5982\u679c\u76ee\u6807\u9875\u4e0d\u5728\u7f13\u51b2\u533a\uff0c\u9700\u8981\u52a0\u8f7d\u8fdb\u5165\u7f13\u51b2\u533a\uff09\uff0c\u6b64\u65f6\u4f1a\u5f62\u6210\u810f\u9875\u3002"),(0,a.kt)("p",null,"2\u3001\u8bb0\u5f55redo log\uff0c\u53ef\u80fd\u4ea7\u751f\u5f88\u591a\u7ec4\u65e5\u5fd7\uff0credo log\u4f18\u5148\u8bb0\u5f55\u5728\u7f13\u51b2\u533a\uff0c\u4f1a\u5728\u63d0\u4ea4\u4e8b\u52a1\u524d\u5237\u76d8\u3002"),(0,a.kt)("p",null,"3\u3001\u5237\u76d8\u65f6\u6839\u636echeckpoint\u7684\u7ed3\u679c\uff0c\u9009\u62e9\u53ef\u4ee5\u4f7f\u7528\u7684\u65e5\u5fd7\u7a7a\u95f4\u8fdb\u884c\u8bb0\u5f55\u3002"),(0,a.kt)("p",null,"4\u3001\u6210\u529f\u540e\u5373\u53ef\u8fd4\u56de\uff0c\u6b64\u65f6\u6570\u636e\u4e0d\u4f1a\u843d\u76d8\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u5f88\u591a\u64cd\u4f5c\u53ea\u5728\u5185\u5b58\u8fdb\u884c\uff0c\u53ea\u9700\u8981\u8bb0\u5f55redo log\uff08\u987a\u5e8f\u5199\uff09\uff0c\u6240\u4ee5\u901f\u5ea6\u5f88\u5feb\u3002"),(0,a.kt)("p",null,"\u7ebf\u7a0b1\uff1a"),(0,a.kt)("p",null,"1\u3001\u4e0d\u65ad\u7684\u5bf9flush\u94fe\u8868\u7684\u810f\u9875\u8fdb\u884c\u5237\u76d8\uff0c\u5bf9\u54cd\u5e94\u65f6\u95f4\u6ca1\u6709\u8fc7\u9ad8\u8981\u6c42\u3002"),(0,a.kt)("p",null,"\u7ebf\u7a0b2\uff1a"),(0,a.kt)("p",null,"1\u3001\u4e0d\u65ad\u7684\u8fdb\u884ccheckpoin\u64cd\u4f5c\uff0c\u4fdd\u8bc1redo log\u53ef\u4ee5\u53ca\u65f6\u5199\u5165\u3002"),(0,a.kt)("h4",{id:"5\u7cfb\u7edf\u5d29\u6e83\u7684\u5f71\u54cd"},"5\u3001\u7cfb\u7edf\u5d29\u6e83\u7684\u5f71\u54cd"),(0,a.kt)("p",null,"\uff081\uff09",(0,a.kt)("strong",{parentName:"p"},"log buffer\u4e2d\u7684\u65e5\u5fd7\u4e22\u5931\uff0c"),"log buffer\u4e2d\u7684\u65e5\u5fd7\u4f1a\u5728\u6bcf\u6b21\u4e8b\u52a1\u524d\u8fdb\u884c\u5237\u76d8\uff0c\u5982\u679c\u5728\u4e8b\u52a1\u8fdb\u884c\u4e2d\u5d29\u6e83\uff0c\u4e8b\u52a1\u672c\u6765\u5c31\u9700\u8981\u56de\u6eda\u3002"),(0,a.kt)("p",null,"\uff082\uff09",(0,a.kt)("strong",{parentName:"p"},"buffer pool\u4e2d\u7684\u810f\u9875\u4e22\u5931"),"\uff0c\u5d29\u6e83\u540e\u53ef\u4ee5\u901a\u8fc7redo log\u6062\u590d\uff0c\u901a\u8fc7checkpoint\u64cd\u4f5c\uff0c\u6211\u4eec\u53ef\u4ee5\u786e\u4fdd\uff0c\u5185\u5b58\u4e2d\u810f\u9875\u5bf9\u5e94\u7684\u8bb0\u5f55\u90fd\u4f1a\u5728redo log\u65e5\u5fd7\u4e2d\u5b58\u5728\u3002"),(0,a.kt)("p",null,"redo log\u4fdd\u8bc1\u4e86\u5d29\u6e83\u540e\uff0c\u6570\u636e\u4e0d\u4e22\u5931\uff0c\u4f46\u662f\u4e00\u4e2a\u4e8b\u52a1\u8fdb\u884c\u4e2d\uff0c\u5982\u679c\u4e00\u90e8\u5206redo log\u5df2\u7ecf\u5237\u76d8\uff0c\u90a3\u4e48\u7cfb\u7edf\u4f1a\u5c06\u672c\u5e94\u56de\u6eda\u7684\u6570\u636e\u540c\u6837\u6062\u590d\uff0c\u4e3a\u4e86\u89e3\u51b3\u56de\u6eda\u7684\u95ee\u9898\uff0cinnodb\u63d0\u51fa\u4e86undo log\u3002"),(0,a.kt)("h3",{id:"\u56dbundo-log\u65e5\u5fd7"},"\u56db\u3001undo log\u65e5\u5fd7"),(0,a.kt)("h4",{id:"1\u6982\u8ff0-1"},"1\u3001\u6982\u8ff0"),(0,a.kt)("p",null,"undo log\uff08\u4e5f\u53eb\u64a4\u9500\u65e5\u5fd7\u6216\u8005\u56de\u6eda\u65e5\u5fd7\uff09\uff0c\u4ed6\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u4e3a\u4e86\u5b9e\u73b0\u56de\u6eda\u64cd\u4f5c\u3002\u540c\u65f6\uff0c\u4ed6\u662fMVCC\u591a\u7248\u672c\u63a7\u5236\u7684\u6838\u5fc3\u6a21\u5757\u3002undo log\u4fdd\u5b58\u5728\u5171\u4eab\u8868\u7a7a\u95f4\u3010ibdata1\u6587\u4ef6\u3011\u4e2d\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220511132907318-a045fd84.png",alt:"image-20220511132907318"}),"image-20220511132907318"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u6ce8\u610f\uff1a"),"8.0\u4ee5\u540eundolog\u6709\u4e86\u72ec\u7acb\u7684\u8868\u7a7a\u95f4\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220511132953019-0170b963.png",alt:"image-20220511132953019"}),"image-20220511132953019"),(0,a.kt)("p",null,"\u5728\u8bb2undo log\u4e4b\u524d\u9700\u8981\u5148\u4e86\u89e3\u884c\u6570\u636e\u4e2d\u7684\u4e24\u4e2a\u9690\u85cf\u5217\uff1a"),(0,a.kt)("h4",{id:"2\u4e8b\u52a1idtrx_id"},"2\u3001\u4e8b\u52a1id\uff08trx_id\uff09"),(0,a.kt)("p",null,"\u6211\u4eec\u5df2\u7ecf\u8bb2\u8fc7\uff0c\u5728innodb\u7684\u884c\u6570\u636e\u4e2d\uff0c\u4f1a\u81ea\u52a8\u6dfb\u52a0\u4e24\u4e2a\u9690\u85cf\u5217\uff0c\u4e00\u4e2a\u662f\u3010trx_id\u3011\uff0c\u4e00\u4e2a\u662f\u3010roll_pointer\u3011\uff0c\u672c\u7ae0\u8282\u4f1a\u8be6\u7ec6\u4ecb\u7ecd\u8fd9\u4e24\u5217\u7684\u5177\u4f53\u4f5c\u7528\uff0c\u5982\u679c\u8be5\u8868\u4e2d\u6ca1\u6709\u5b9a\u4e49\u4e3b\u952e\uff0c\u4e5f\u6ca1\u6709\u5b9a\u4e49\u3010\u975e\u7a7a\u552f\u4e00\u3011\u5217\uff0c\u5219\u8fd8\u4f1a\u751f\u6210\u4e00\u4e2a\u9690\u85cf\u5217\u3010row_id\u3011\uff0c\u8fd9\u4e2a\u6211\u4eec\u4e4b\u95f4\u4e5f\u8bb2\u8fc7\uff0c\u662f\u4e3a\u4e86\u751f\u6210\u805a\u7c07\u7d22\u5f15\u4f7f\u7528\u7684\u3002"),(0,a.kt)("p",null,"\u4e8b\u52a1id\u662f\u4e00\u4e2a\u81ea\u589e\u7684\u5168\u5c40\u53d8\u91cf\uff0c\u5982\u679c\u4e00\u4e2a\u3010\u4e8b\u52a1\u3011\u5bf9\u4efb\u610f\u8868\u505a\u4e86\u3010\u589e\u5220\u6539\u3011\u7684\u64cd\u4f5c\uff0c\u90a3\u4e48innodb\u5c31\u4f1a\u7ed9\u4ed6\u5206\u914d\u4e00\u4e2a\u72ec\u4e00\u65e0\u4e8c\u7684\u4e8b\u52a1id\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u51b7\u77e5\u8bc6\uff1a")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4e8b\u52a1id\u4fdd\u5b58\u5728\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u3010MAX_TRX_ID\u3011\u4e0a\uff0c\u6bcf\u6b21\u4e8b\u52a1\u9700\u8981\u5206\u914d\u4e8b\u52a1id\uff0c\u5c31\u4f1a\u4ece\u8fd9\u4e2a\u5168\u5c40\u53d8\u91cf\u4e2d\u83b7\u53d6\uff0c\u7136\u540e\u81ea\u589e1\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u8be5\u53d8\u91cf\u6bcf\u6b21\u81ea\u589e\u5230256\u7684\u500d\u6570\u4f1a\u8fdb\u884c\u4e00\u4e2a\u843d\u76d8\uff08\u4fdd\u5b58\u5728\u8868\u7a7a\u95f4\u9875\u53f7\u4e3a5\u7684\u9875\u9762\u4e2d\uff09\uff0c\u53d1\u751f\u670d\u52a1\u505c\u6b62\u6216\u8005\u7cfb\u7edf\u5d29\u6e83\u540e\uff0c\u518d\u8d77\u542f\u52a8\u670d\u52a1\uff0c\u4f1a\u8bfb\u53d6\u8fd9\u4e2a\u6570\u5b57\uff0c\u7136\u540e\u518d\u52a0256\u3002\u8fd9\u6837\u505a\u65e2\u4fdd\u8bc1\u4e0d\u4f1a\u6709\u592a\u591aI/O\u64cd\u4f5c\uff0c\u8fd8\u80fd\u4fdd\u8bc1id\u7684\u6709\u5e8f\u589e\u957f\u3002\u6bd4\u5982\uff1a\u8bfb\u5230256\u8fdb\u884c\u843d\u76d8\uff0c\u540e\u6765\u6709\u6da8\u5230302\uff0c\u7a81\u7136\u5d29\u6e83\u4e86\uff0c\u4e0b\u6b21\u542f\u52a8\u540e\uff0c\u7b2c\u4e00\u4e2a\u4e8b\u52a1\u7684id\u5c31\u662f256+256=512\uff0c\u4fdd\u8bc1\u65b0\u7684\u4e8b\u52a1id\u4e00\u5b9a\u5927\u3002")),(0,a.kt)("h4",{id:"3roll_pointer"},"3\u3001roll_pointer"),(0,a.kt)("p",null,"undo log\u5728\u8bb0\u5f55\u65e5\u5fd7\u65f6\u662f\u8fd9\u6837\u8bb0\u5f55\u7684\uff0c\u6bcf\u6b21\u4fee\u6539\u6570\u636e\uff0c\u90fd\u4f1a\u5c06\u4fee\u6539\u7684\u6570\u636e\u6807\u8bb0\u4e00\u4e2a\u3010\u65b0\u7684\u7248\u672c\u3011\uff0c\u540c\u65f6\uff0c\u8fd9\u4e2a\u7248\u672c\u7684\u6570\u636e\u7684\u5730\u5740\u4f1a\u4fdd\u5b58\u5728\u4fee\u6539\u4e4b\u524d\u7684\u6570\u636e\u7684roll_pointer\u5217\u4e2d\uff0c\u5982\u4e0b\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220512155454781-dbad9b39.png",alt:"image-20220512155454781"}),"image-20220512155454781"),(0,a.kt)("h4",{id:"4\u5206\u7c7b"},"4\u3001\u5206\u7c7b"),(0,a.kt)("p",null,"\u5f53\u6211\u4eec\u5bf9\u6570\u636e\u5e93\u7684\u6570\u636e\u8fdb\u884c\u4e00\u4e2a\u64cd\u4f5c\u65f6\u5fc5\u987b\u8bb0\u5f55\u4e4b\u524d\u7684\u4fe1\u606f\uff0c\u5c06\u6765\u624d\u80fd\u3010\u6094\u68cb\u3011\uff0c\u5982\u4e0b\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u63d2\u5165\u4e00\u6761\u6570\u636e\u65f6\uff0c\u81f3\u5c11\u8981\u628a\u8fd9\u6761\u6570\u636e\u7684\u4e3b\u952e\u8bb0\u5f55\u4e0b\u6765\uff0c\u4ee5\u540e\u4e0d\u60f3\u8981\u4e86\u76f4\u63a5\u6839\u636e\u4e3b\u952e\u5220\u9664\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u5220\u9664\u4e00\u6761\u6570\u636e\u65f6\uff0c\u81f3\u5c11\u8981\u628a\u8fd9\u4e2a\u6570\u636e\u6240\u6709\u7684\u5185\u5bb9\u5168\u90e8\u8bb0\u5f55\u4e0b\u6765\uff0c\u4ee5\u540e\u624d\u80fd\u5168\u91cf\u6062\u590d\u3002\u4f46\u4e8b\u5b9e\u4e0a\u4e0d\u9700\u8981\uff0c\u6bcf\u884c\u6570\u636e\u90fd\u6709\u4e00\u4e2adelete_flag\uff0c\u4e8b\u52a1\u4e2d\u5c06\u5176\u7f6e1\uff0c\u8bb0\u5f55id\uff0c\u5982\u9700\u8981\u56de\u6eda\u6839\u636eid\u590d\u539f\u5373\u53ef\uff0c\u63d0\u4ea4\u4e8b\u52a1\u540e\u53c8purge\u7ebf\u7a0b\u5904\u7406\u5783\u573e\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u4fee\u6539\u4e00\u6761\u6570\u636e\u65f6\uff0c\u81f3\u5c11\u8981\u5c06\u4fee\u6539\u524d\u540e\u7684\u6570\u636e\u90fd\u4fdd\u5b58\u4e0b\u6765\u3002")),(0,a.kt)("p",null,"innodb\u5c06undo log\u5206\u4e3a\u4e24\u7c7b\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4e00\u7c7b\u65e5\u5fd7\u53ea\u8bb0\u5f55\u63d2\u5165\u7c7b\u578b\u7684\u64cd\u4f5c\uff08insert\uff09"),(0,a.kt)("li",{parentName:"ul"},"\u4e00\u7c7b\u65e5\u5fd7\u53ea\u8bb0\u5f55\u4fee\u6539\u7c7b\u578b\u7684\u64cd\u4f5c\uff08delete\uff0cupdate\uff09")),(0,a.kt)("p",null,"\u4ec0\u4e48\u5206\u4e3a\u8fd9\u4e24\u7c7b\u5462\uff1f"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u63d2\u5165\u578b\u7684\u8bb0\u5f55\u4e0d\u9700\u8981\u8bb0\u5f55\u7248\u672c\uff0c\u4e8b\u52a1\u63d0\u4ea4\u4ee5\u540e\u8fd9\u4e00\u7247\u7a7a\u95f4\u5c31\u53ef\u4ee5\u91cd\u590d\u5229\u7528\u4e86\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u4fee\u6539\u578b\u7684\u5fc5\u987b\u5c06\u6bcf\u6b21\u4fee\u6539\u4f5c\u4e3a\u4e00\u4e2a\u7248\u672c\u8bb0\u5f55\u4e0b\u6765\uff0c\u5373\u4f7f\u5f53\u524d\u4e8b\u52a1\u5df2\u7ecf\u63d0\u4ea4\uff0c\u4e5f\u4e0d\u4e00\u5b9a\u80fd\u56de\u6536\u7a7a\u95f4\uff0c\u5e94\u4e3a\u5176\u4ed6\u4e8b\u52a1\u53ef\u80fd\u5728\u7528\u3002")),(0,a.kt)("h4",{id:"5\u7269\u7406\u5b58\u50a8\u7ed3\u6784"},"5\u3001\u7269\u7406\u5b58\u50a8\u7ed3\u6784"),(0,a.kt)("p",null,"undo\u540c\u6837\u662f\u4ee5\u9875\u7684\u5f62\u5f0f\u8fdb\u884c\u5b58\u50a8\u7684\uff0c\u591a\u4e2a\u9875\u662f\u4f7f\u7528\u94fe\u8868\u7684\u5f62\u5f0f\u8fdb\u884c\u7ba1\u7406\uff0c\u9488\u5bf9\u3010\u666e\u901a\u8868\u548c\u96f6\u65f6\u8868\u3011\uff0c\u3010\u63d2\u5165\u578b\u548c\u4fee\u6539\u578b\u3011\u7684\u6570\u636e\uff0c\u4e00\u4e2a\u4e8b\u52a1\u53ef\u80fd\u4f1a\u4ea7\u751f\u4ee5\u4e0b\u56db\u79cd\u94fe\u8868\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220511190027272-aa4a4815.png",alt:"image-20220511190027272"}),"image-20220511190027272"),(0,a.kt)("p",null,"\u8fd9\u662f\u7269\u7406\u5b58\u50a8\u6a21\u578b\uff0c\u5206\u6210\u56db\u79cd\u7c7b\u578b\uff0c\u662f\u4e3a\u4e86\u66f4\u597d\u7684\u7ba1\u7406\u3002"),(0,a.kt)("h4",{id:"6\u8bb0\u5f55\u6d41\u7a0b"},"6\u3001\u8bb0\u5f55\u6d41\u7a0b"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u5f00\u542f\u4e8b\u52a1\uff0c\u6267\u884c\u3010\u589e\u5220\u6539\u3011\u65f6\u83b7\u5f97\u3010\u4e8b\u52a1id\u3011\u3002")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u5728\u7cfb\u7edf\u8868\u7a7a\u95f4\u4e2d\u7b2c5\u53f7\u9875\u4e2d\uff0c\u5206\u914d\u4e00\u4e2a\u56de\u6eda\u6bb5\uff0c\u56de\u6eda\u6bb5\u662f\u8f6e\u52a8\u5206\u914d\u7684\uff0c\u6bd4\u5982\uff0c\u5f53\u524d\u4e8b\u52a1\u4f7f\u7528\u7b2c5\u4e2a\u56de\u6eda\u6bb5\uff0c\u4e0b\u4e2a\u4e8b\u52a1\u5c31\u4f7f\u7528\u7b2c6\u4e2a\u3002"),(0,a.kt)("p",{parentName:"li"},"\u3010\u56de\u6eda\u6bb5\u3011\u662f\u4e00\u4e2a\u3010\u6570\u636e\u9875\u3011\uff0c\u91cc\u8fb9\u5212\u5206\u4e861024\u4e2aundo slot\uff0c\u7528\u6765\u5b58\u50a8\u65e5\u5fd7\u94fe\u8868\u7684\u5934\u8282\u70b9\u5730\u5740\u3002")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u5728\u5f53\u524d\u56de\u6eda\u6bb5\u7684cached\u94fe\u8868\uff08\u56de\u6536\u53ef\u590d\u7528\u7684\uff09\u548c\u7a7a\u95f2solt\u4e2d\uff0c\u627e\u5230\u4e00\u4e2a\u53ef\u7528\u7684slot\uff0c\u627e\u4e0d\u5230\u5c31\u62a5\u9519\u3002")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u521b\u5efa\u6216\u590d\u7528\u4e00\u4e2aundo log\u9875\uff0c\u4f5c\u4e3afirst undo page\uff0c\u5e76\u628a\u4ed6\u7684\u5730\u5740\u5199\u5165undo solt\u4e2d\u3002"))),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220511150345487-f4cdf002.png",alt:"image-20220511150345487"}),"image-20220511150345487"),(0,a.kt)("h4",{id:"7\u56de\u6eda\u8fc7\u7a0b"},"7\u3001\u56de\u6eda\u8fc7\u7a0b"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u670d\u52a1\u518d\u6b21\u542f\u52a8\u65f6\uff0c\u901a\u8fc7\u8868\u7a7a\u95f45\u53f7\u9875\u9762\u5b9a\u4f4d\u5230128\u4e2a\u56de\u6eda\u6bb5\u7684\u4f4d\u7f6e\uff0c"),(0,a.kt)("li",{parentName:"ol"},"\u904d\u5386\u6240\u6709\u7684slot\uff0c\u627e\u5230\u6240\u6709\u72b6\u6001\u4e0d\u4e3a\u7a7a\u95f2\u7684slot\uff0c\u5e76\u4e14\u901a\u8fc7undolog\u7684\u6807\u8bb0\u4e3a\u627e\u5230\u73b0\u5728\u6d3b\u8dc3\uff08\u672a\u63d0\u4ea4\uff09\u7684\u6240\u6709\u7684\u4e8b\u52a1id"),(0,a.kt)("li",{parentName:"ol"},"\u6839\u636eundo log\u7684\u8bb0\u5f55\uff0c\u5c06\u6570\u636e\u5168\u90e8\u56de\u6eda")),(0,a.kt)("h2",{id:"\u7b2c\u4e5d\u7ae0\u9694\u79bb\u7ea7\u522b\u548cmvcc"},"\u7b2c\u4e5d\u7ae0\u3001\u9694\u79bb\u7ea7\u522b\u548cMVCC"),(0,a.kt)("p",null,"\u3010MVCC\u3011\uff0c\u5168\u79f0Multi-Version Concurrency Control\uff0c\u5373\u3010\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236\u3011\u3002MVCC\u5728MySQL InnoDB\u4e2d\u7684\u5b9e\u73b0\u4e3b\u8981\u662f\u4e3a\u4e86\u63d0\u9ad8\u6570\u636e\u5e93\u7684\u5e76\u53d1\u6027\u80fd\uff0c\u7528\u66f4\u597d\u7684\u65b9\u5f0f\u53bb\u5904\u7406\u3010\u8bfb-\u5199\u51b2\u7a81\u3011\uff0c\u505a\u5230\u5373\u4f7f\u6709\u3010\u8bfb\u5199\u51b2\u7a81\u3011\u65f6\uff0c\u4e5f\u80fd\u505a\u5230\u4e0d\u52a0\u9501\uff0c\u975e\u963b\u585e\u5e76\u53d1\u8bfb\uff0c\u5b66\u4e60mvcc\u4e4b\u524d\u6211\u4eec\u9700\u8981\u5b66\u4e60\u4e00\u4e9b\u65b0\u7684\u6982\u5ff5\u3002"),(0,a.kt)("h3",{id:"\u4e00read-view\u8bfb\u89c6\u56fe"},"\u4e00\u3001Read View\uff08\u8bfb\u89c6\u56fe\uff09"),(0,a.kt)("p",null,"\u5728\u5b66\u4e60MVCC\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236\u4e4b\u524d\uff0c\u6211\u4eec\u5fc5\u987b\u5148\u4e86\u89e3\u4e00\u4e0b\uff0c\u4ec0\u4e48\u662fMySQL InnoDB\u4e0b\u7684\u3010\u5f53\u524d\u8bfb\u3011\u548c\u3010\u5feb\u7167\u8bfb\u3011\uff0c\u6211\u4eec\u90fd\u77e5\u9053undo log\u4f1a\u8bb0\u5f55\u4e00\u4e2a\u4e8b\u52a1\u5bf9\u4e00\u6761\u6570\u636e\u7684\u6240\u6709\u4fee\u6539\uff0c\u5e76\u5f62\u6210\u7248\u672c\u94fe\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5f53\u524d\u8bfb"),"\uff1a\u50cfselect lock in share mode\uff08\u9501\uff09\u3001 select for update\u3001 update\u3001insert\u3001delete\uff08\u6392\u4ed6\u9501\uff09\u8fd9\u4e9b\u64cd\u4f5c\u90fd\u662f\u3010\u5f53\u524d\u8bfb\u3011\uff0c\u4ed6\u8bfb\u53d6\u7684\u662f\u8bb0\u5f55\u7684\u3010\u6700\u65b0\u7248\u672c\u3011\uff0c\u8bfb\u53d6\u65f6\u8fd8\u8981\u4fdd\u8bc1\u5176\u4ed6\u3010\u5e76\u53d1\u4e8b\u52a1\u3011\u4e0d\u80fd\u4fee\u6539\u5f53\u524d\u8bb0\u5f55\uff0c\u4f1a\u5bf9\u8bfb\u53d6\u7684\u8bb0\u5f55\u8fdb\u884c\u52a0\u9501\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5feb\u7167\u8bfb"),"\uff1a\u50cf\u4e0d\u52a0\u9501\u7684select\u64cd\u4f5c\u5c31\u662f\u5feb\u7167\u8bfb\uff0c\u5373\u4e0d\u52a0\u9501\u7684\u3010\u975e\u963b\u585e\u8bfb\u3011\uff1b\u5feb\u7167\u8bfb\u7684\u524d\u63d0\u662f\u3010\u9694\u79bb\u7ea7\u522b\u4e0d\u662f\u4e32\u884c\u7ea7\u522b\u3011\uff0c\u4e32\u884c\u7ea7\u522b\u4e0b\u7684\u5feb\u7167\u8bfb\u4f1a\u3010\u9000\u5316\u6210\u5f53\u524d\u8bfb\u3011\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5feb\u7167\u8bfb\u8bfb\u53d6\u7684\u662f\u3010\u5feb\u7167\u3011\uff0c\u4ed6\u662f\u901a\u8fc7readView\u5b9e\u73b0\u7684\u3002")),(0,a.kt)("h4",{id:"1\u5b9e\u73b0\u539f\u7406"},"1\u3001\u5b9e\u73b0\u539f\u7406"),(0,a.kt)("p",null,"Read View\u5c31\u662f\u4e8b\u52a1\u8fdb\u884c\u3010\u5feb\u7167\u8bfb\u3011\u7684\u65f6\u5019\u751f\u4ea7\u7684\u3010\u8bfb\u89c6\u56fe\u3011(Read View)\uff0c\u5728\u8be5\u4e8b\u52a1\u3010\u6267\u884c\u5feb\u7167\u8bfb\u3011\u7684\u90a3\u4e00\u523b\uff0c\u4f1a\u751f\u6210\u6570\u636e\u5e93\u7cfb\u7edf\u5f53\u524d\u7684\u4e00\u4e2a\u5feb\u7167\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u6ce8\u610f\uff1a"),"\u3010\u5feb\u7167\u3011\u4e0d\u662f\u8bf4\u5c06\u6570\u636e\u5e93\u590d\u5236\u4e00\u4efd\uff0c\u3010Read View\u3011\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u505a\u3010\u53ef\u89c1\u6027\u5224\u65ad\u3011\uff0c \u5feb\u7167\u7684\u5b9e\u73b0\u903b\u8f91\u662f\u901a\u8fc7undo log\u7684\u3010\u7248\u672c\u94fe\u3011\uff0c\u914d\u5408\u4e00\u4e9b\u3010\u53c2\u6570\u3011\uff0c\u6bd4\u5982\u4e8b\u52a1id\uff0c\u6765\u786e\u5b9a\u5f53\u524d\u4e8b\u52a1\u53ef\u4ee5\u8bfb\u53d6\u7684\u7248\u672c\u3002"),(0,a.kt)("h4",{id:"2readview\u7684\u7ed3\u6784"},"2\u3001readView\u7684\u7ed3\u6784"),(0,a.kt)("p",null,"\u4e3e\u4e00\u4e2a\u5217\u5b50\uff0c\u5f53\u524d\u6709\u4e8b\u52a1id\u4e3a12\u300113\u300114\u300116\u300120\u7684\u4e94\u4e2a\u4e8b\u52a1\uff0c\u4ed6\u4eec\u5728\u540c\u65f6\u4fee\u6539\u4e00\u6761\u6570\u636e\uff0c\u6b64\u65f6\uff0c\u4e8b\u52a113\u53d1\u751f\u8bfb\u53d6\u884c\u4e3a\uff0c\u5728\u3010\u4e8b\u52a113\u3011\u8bfb\u53d6\u4e4b\u524d\u3010\u4e8b\u52a114\u3011\u5df2\u7ecf\u63d0\u4ea4\uff0c\u5f53\u524d\u573a\u666f\u4e0b\uff0c\u5c06\u4ea7\u751f\u4e00\u4e2areadview\u5982\u4e0b\uff1a"),(0,a.kt)("p",null,"\u4e00\u4e2areadView\u5c31\u662f\u4e00\u4e2a\u3010\u7ed3\u6784\u4f53\u3011\uff0c\u4f60\u751a\u81f3\u53ef\u4ee5\u7406\u89e3\u6210\u4e3ajava\u91cc\u7684\u5b9e\u4f8b\uff08readview\uff09\u548c\u5c5e\u6027\uff0c\u5305\u542b\u5c5e\u6027\u5982\u4e0b\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"m_ids\uff1a\u751f\u6210\u8be5readview\u65f6\uff0c\u5f53\u524d\u7cfb\u7edf\u4e2d\u3010\u6d3b\u8dc3\u7684\u4e8b\u52a1\u3011id\u5217\u8868\u3002\u5bf9\u4e8e\u5f53\u524d\u6848\u4f8b\uff0c\u56e0\u4e3a14\u5df2\u7ecf\u63d0\u4ea4\uff0c\u5c31\u4e0d\u6d3b\u8dc3\u4e86\uff0c\u6240\u4ee5\u8be5\u53d8\u91cf\u7684\u503c\u4e3a","[12,13,16,20]","\u3002"),(0,a.kt)("li",{parentName:"ul"},"min_trx_id\uff1a\u5f53\u524d\u7cfb\u7edf\u3010\u6d3b\u8dc3\u4e8b\u52a1\u3011\u4e2d\u6700\u5c0f\u7684\u3010\u4e8b\u52a1id\u3011\uff0c\u4ed6\u4e5f\u662fm_ids\u7684\u6700\u5c0f\u503c\uff0c\u5f53\u524d\u6848\u4f8b\u7684\u503c\u5c31\u662f12\u3002"),(0,a.kt)("li",{parentName:"ul"},"max_trx_id\uff1a\u5f53\u524d\u7cfb\u7edf\u4e2d\u8ba1\u5212\u5206\u914d\u7ed9\u4e0b\u4e00\u4e2a\u4e8b\u52a1\u7684id\uff0c\u4ed6\u53ef\u80fd\u662fm_ids\u7684\u6700\u5927\u503c+1\uff0c\u4e5f\u53ef\u80fd\u6bd4\u4ed6\u5927\u3002\u5f53\u524d\u6848\u4f8b\u503c\u5047\u8bbe\u4e3a22\u3002"),(0,a.kt)("li",{parentName:"ul"},"creator_trx_id\uff1a\u751f\u6210\u8fd9\u4e2areadView\u7684\u4e8b\u52a1id\uff0c\u5f53\u524d\u6848\u4f8b\u7684\u503c\u4e3a12\u3002")),(0,a.kt)("p",null,"\u4ee5\u4e0areadview\u914d\u5408undo log\u5c31\u53ef\u4ee5\u5f62\u6210\u4e00\u4e2a\u3010\u5feb\u7167\u3011\uff0c\u90a3\u4ed6\u662f\u600e\u4e48\u8bfb\u53d6\u7684\u5462\uff1f"),(0,a.kt)("h3",{id:"\u4e8c\u5feb\u7167\u8bfb\u539f\u7406\u89e3\u6790"},"\u4e8c\u3001\u5feb\u7167\u8bfb\u539f\u7406\u89e3\u6790"),(0,a.kt)("p",null,"\u5728\u4e00\u4e2a\u4e8b\u52a1\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u4f1a\u6839\u636e\u5f53\u524d\u6570\u636e\u5f62\u6210\u4e00\u4e2areadview\uff0c\u8bfb\u53d6\u65f6\u4f1a\u6309\u7167\u4ee5\u4e0b\u903b\u8f91\u8fdb\u884c\u8bfb\u53d6\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u5982\u679c\u3010\u88ab\u8bbf\u95ee\u6570\u636e\u7684\u4e8b\u52a1trx_id\u3011\u548creadView\u4e2d\u7684\u3010creator_trx_id\u503c\u3011\u76f8\u540c\uff0c\u610f\u5473\u7740\u81ea\u5df1\u5728\u8bbf\u95ee\u81ea\u5df1\u4fee\u6539\u8fc7\u7684\u8bb0\u5f55\uff0c\u5f53\u7136\u53ef\u4ee5\u88ab\u8bbf\u95ee\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u5982\u679c\u3010\u88ab\u8bbf\u95ee\u6570\u636e\u7684\u4e8b\u52a1trx_id\u3011\u5c0f\u4e8ereadView\u4e2d\u7684\u3010min_trx_id\u3011\u503c\uff0c\u8bf4\u660e\u751f\u6210\u8fd9\u4e2a\u7248\u672c\u6570\u636e\u7684\u4e8b\u52a1\uff0c\u5728\u751f\u6210readview\u524d\u5df2\u7ecf\u63d0\u4ea4\uff0c\u8fd9\u6837\u7684\u6570\u636e\u4e5f\u53ef\u4ee5\u8bbf\u95ee\u3002"),(0,a.kt)("p",{parentName:"li"},"  ",(0,a.kt)("strong",{parentName:"p"},"\u901a\u4fd7\u4e00\u70b9\uff1a"),"\u8fd9\u4e2a\u6570\u636e\u4e4b\u524d\u88ab\u5176\u4ed6\u7684\u4e8b\u52a1\u4fee\u6539\u8fc7\uff0c\u4f46\u662f\u4e8b\u52a1\u5df2\u7ecf\u63d0\u4ea4\uff0c\u6240\u4ee5\u8fd9\u4e2a\u7248\u672c\u7684\u6570\u636e\u662f\u53ef\u4ee5\u4f7f\u7528\u7684\uff0c\u8fd9\u6837\u4e0d\u4f1a\u4ea7\u751f\u810f\u8bfb\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u5982\u679c\u3010\u88ab\u8bbf\u95ee\u6570\u636e\u7684\u4e8b\u52a1trx_id\u3011\u5927\u4e8e\u7b49\u4e8ereadView\u4e2d\u7684max_trx_id\u503c\uff0c\u8bf4\u660e\u751f\u6210\u8fd9\u4e2a\u7248\u672c\u6570\u636e\u7684\u4e8b\u52a1\uff0c\u662f\u5728\u751f\u6210readview\u540e\u5f00\u542f\uff0c\u8fd9\u6837\u7684\u6570\u636e\u4e0d\u5e94\u8be5\u88ab\u8bbf\u95ee\u3002"),(0,a.kt)("p",{parentName:"li"},"  ",(0,a.kt)("strong",{parentName:"p"},"\u901a\u4fd7\u4e00\u70b9\uff1a"),"\u4f60\u8bfb\u53d6\u6570\u636e\u4e4b\u540e\uff0c\u6709\u4eba\u4fee\u6539\u4e86\u5f53\u524d\u6570\u636e\uff0c\u90a3\u4eba\u5bb6\u540e\u8fb9\u4fee\u6539\u7684\u6570\u636e\uff0c\u4f60\u4e5f\u4e0d\u80fd\u8bfb\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u5982\u679c\u3010\u88ab\u8bbf\u95ee\u6570\u636e\u7684\u4e8b\u52a1trx_id\u3011\u5982\u679c\u5728min_trx_id\u548cmax_trx_id\u8303\u56f4\u5185\uff0c\u5219\u9700\u8981\u5224\u65ad\u662f\u4e0d\u662f\u5728\u3010m_ids\u3011\u4e2d\uff08\u76ee\u7684\u662f\u5224\u65ad\u8fd9\u4e2a\u6570\u636e\u662f\u4e0d\u662f\u5df2\u7ecf\u63d0\u4ea4\uff09\u3002\u5982\u679c\u5728\uff0c\u8bf4\u660e\u751f\u6210\u8fd9\u4e2a\u7248\u672c\u7684\u4e8b\u52a1\u8fd8\u662f\u6d3b\u8dc3\u7684\uff0c\u6ca1\u6709\u63d0\u4ea4\u7684\u4e8b\u52a1\u4ea7\u751f\u7684\u6570\u636e\u5f53\u7136\u4e0d\u80fd\u8bfb\uff0c\u5982\u679c\u4e0d\u5728\uff0c\u8bf4\u660e\u4e8b\u52a1\u5df2\u7ecf\u63d0\u4ea4\uff0c\u8be5\u6570\u636e\u53ef\u4ee5\u88ab\u8bbf\u95ee\u3002"),(0,a.kt)("p",{parentName:"li"},"  ",(0,a.kt)("strong",{parentName:"p"},"\u901a\u4fd7\u4e00\u70b9\uff1a"),"\u8fd9\u4e2a\u6570\u636e\u88ab\u73b0\u5728\u6d3b\u8dc3\u7684\u5176\u4ed6\u4e8b\u52a1\u6b63\u5728\u4fee\u6539\u4e2d\uff0c\u8bfb\u53d6\u65f6\u8981\u770b\u6b64\u65f6\u8fd9\u4e2a\u4e8b\u52a1\u662f\u4e0d\u662f\u5df2\u7ecf\u63d0\u4ea4\uff0c\u76ee\u7684\u4e5f\u662f\u4e3a\u4e86\u4e0d\u8981\u8bfb\u53d6\u522b\u4eba\u672a\u63d0\u4ea4\u7684\u4e8b\u52a1\u3002"))),(0,a.kt)("p",null,"\u6211\u4eec\u7528\u4e0b\u8fb9\u7684\u6848\u4f8b\u6765\u770b\u4e00\u4e0b\u8fd9\u4e2a\u8fc7\u7a0b\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220512152116264-d7d80219.png",alt:"image-20220512152116264"}),"image-20220512152116264"),(0,a.kt)("h3",{id:"\u4e09\u89e3\u51b3\u810f\u8bfb\u548c\u4e0d\u53ef\u91cd\u590d\u8bfb"},"\u4e09\u3001\u89e3\u51b3\u810f\u8bfb\u548c\u4e0d\u53ef\u91cd\u590d\u8bfb"),(0,a.kt)("p",null,"\u5bf9\u4e8eRU\u9694\u79bb\u7ea7\u522b\u7684\u4e8b\u52a1\u6765\u8bf4\uff0c\u7531\u4e8e\u53ef\u4ee5\u8bfb\u53d6\u5230\u672a\u63d0\u4ea4\u7684\u4e8b\u52a1\uff0c\u6240\u6709\u76f4\u63a5\u8bfb\u53d6\u3010\u6700\u65b0\u7684\u8bb0\u5f55\u3011\uff08\u5f53\u524d\u8bfb\uff09\u5c31\u53ef\u4ee5\uff0c\u5bf9\u4e8eserializable\u7684\u4e8b\u52a1\u6765\u8bf4\uff0c\u5fc5\u987b\u4f7f\u7528\u52a0\u9501\u7684\u65b9\u5f0f\u6765\u8bbf\u95ee\u3002"),(0,a.kt)("h4",{id:"1\u89e3\u51b3\u810f\u8bfb"},"1\u3001\u89e3\u51b3\u810f\u8bfb"),(0,a.kt)("p",null,"\u5148\u601d\u8003\u4e00\u4e2a\u95ee\u9898\uff0c\u810f\u8bfb\u6307\u7684\u662f\u5728\u5f53\u524d\u4e8b\u52a1\u4e2d\u8bfb\u53d6\u5230\u4e86\u5176\u4ed6\u4e8b\u52a1\u672a\u63d0\u4ea4\u7684\u6570\u636e\uff0c\u90a3\u89e3\u51b3\u7684\u601d\u8def\u662f\u4ec0\u4e48\uff1a"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff081\uff09\u6ca1\u6709undo+mvcc")),(0,a.kt)("p",null,"\u4e00\u4e2a\u4e8b\u52a1\u8bfb\u53d6\u4e86\u6570\u636e\u4e4b\u540e\uff0c\u7acb\u9a6c\u7ed9\u8fd9\u4e2a\u6570\u636e\u52a0\u5199\u9501\uff0c\u4e0d\u5141\u8bb8\u5176\u4ed6\u4e8b\u52a1\u8fdb\u884c\u4fee\u6539\uff0c\u8fd9\u662f\u52a0\u9501\u89e3\u51b3\u810f\u8bfb\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff082\uff09\u4f7f\u7528undo+mvcc")),(0,a.kt)("p",null,"\u6240\u6709\u4e8b\u52a1\u5bf9\u6570\u636e\u7684\u4fee\u6539\uff0c\u8bb0\u5f55\u6210\u7248\u672c\u94fe\uff0c\u4f7f\u7528readview\u8fdb\u884c\u7248\u672c\u9009\u62e9\uff0c\u6bcf\u4e2a\u4e8b\u52a1\u53ea\u80fd\u8bfb\u53d6\u6ee1\u8db3\u6761\u4ef6\u7684\u6570\u636e\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u4e0d\u9700\u8981\u52a0\u9501\u3002"),(0,a.kt)("p",null,"\u4f7f\u7528mvcc\u5f88\u597d\u7684\u89e3\u51b3\u4e86\u3010\u8bfb\u5199\u64cd\u4f5c\u3011\u7684\u5e76\u53d1\u6267\u884c\uff0c\u800c\u4e14\u91c7\u7528\u4e86\u65e0\u9501\u673a\u5236\u3002"),(0,a.kt)("h4",{id:"2\u89e3\u51b3\u4e0d\u53ef\u91cd\u590d\u8bfb"},"2\u3001\u89e3\u51b3\u4e0d\u53ef\u91cd\u590d\u8bfb"),(0,a.kt)("p",null,"RC\u548cRR\u4e24\u4e2a\u9694\u79bb\u7ea7\u522b\u89e3\u51b3\u4e0d\u53ef\u91cd\u590d\u8bfb\u662f\u901a\u8fc7\u751f\u6210readview\u65f6\u95f4\u4e0d\u540c"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff081\uff09RC\u9694\u79bb\u7ea7\u522b"),"\uff0c\u540c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u3010\u6bcf\u6b21\u8bfb\u53d6\u6570\u636e\u65f6\u90fd\u751f\u6210\u4e00\u4e2a\u65b0\u7684ReadView\u3011\uff0c\u4e24\u6b21\u8bfb\u53d6\u65f6\uff0c\u5982\u679c\u4e2d\u95f4\u6709\u5176\u4ed6\u4e8b\u52a1\u8fdb\u884c\u63d0\u4ea4\uff0c\u53ef\u80fd\u4f1a\u751f\u6210\u4e24\u4e2a\u4e0d\u540c\u7684readview\uff0c\u5bfc\u81f4\u5f53\u524d\u4e8b\u52a1\u4e2d\uff0c\u4e24\u6b21\u8bfb\u53d6\u7684\u6570\u636e\u4e0d\u4e00\u81f4\uff0c\u8fd9\u5c31\u662f\u4e0d\u53ef\u91cd\u590d\u8bfb\u3002\u5177\u4f53\u7684\u6267\u884c\u6d41\u7a0b\u5982\u4e0b\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220512154853148-129aabc5.png",alt:"image-20220512154853148"}),"image-20220512154853148"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\uff082\uff09RR\u9694\u79bb\u7ea7\u522b"),"\uff0c\u540c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u3010\u53ea\u5728\u7b2c\u4e00\u6b21\u8bfb\u53d6\u6570\u636e\u65f6\u751f\u6210\u4e00\u4e2aReadView\u3011\uff0c\u4ee5\u540e\u8fd9\u4e2a\u4e8b\u52a1\u4e2d\u4e00\u76f4\u4f7f\u7528\u8fd9\u4e2areadview\uff0c\u90a3\u4e48\u540c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u5c31\u80fd\u4fdd\u8bc1\u591a\u6b21\u8bfb\u53d6\u7684\u6570\u636e\u662f\u4e00\u81f4\u7684\uff0c\u5177\u4f53\u7684\u6267\u884c\u6d41\u7a0b\u5982\u4e0b\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220512155222410-cf20dd90.png",alt:"image-20220512155222410"}),"image-20220512155222410"),(0,a.kt)("h4",{id:"3\u89e3\u51b3\u5e7b\u8bfb"},"3\u3001\u89e3\u51b3\u5e7b\u8bfb"),(0,a.kt)("p",null,"\u4ed6\u662f\u901a\u8fc7\u95f4\u9699\u9501\u5b9e\u73b0\u7684\uff0c\u4e00\u65e6\u9501\u5b9a\u67d0\u4e00\u4e2a\u8303\u56f4\u7684\u6570\u636e\uff0c\u5c31\u4f1a\u5bf9\u8fd9\u4e2a\u8303\u56f4\u7684\u6570\u636e\u52a0\u9501\uff0c\u95f4\u9699\u9501\u4fdd\u8bc1\u6211\u4eec",(0,a.kt)("strong",{parentName:"p"},"\u4e0d\u80fd\u5728\u8fd9\u4e2a\u8303\u56f4\u5185\u63d2\u5165\u65b0\u7684\u6570\u636e\u3002")),(0,a.kt)("h2",{id:"\u7b2c\u5341\u7ae0-\u5176\u4ed6\u77e5\u8bc6"},"\u7b2c\u5341\u7ae0 \u5176\u4ed6\u77e5\u8bc6"),(0,a.kt)("h3",{id:"\u4e00\u89e6\u53d1\u5668"},"\u4e00\u3001\u89e6\u53d1\u5668"),(0,a.kt)("p",null,"\u4e0e\u8868\u6709\u5173\u7684\u6570\u636e\u5bf9\u8c61\uff0c\u5728\u6ee1\u8db3\u67d0\u79cd\u6761\u4ef6\u7684\u65f6\u5019\uff0c\u88ab\u52a8\u6267\u884c\u7684SQL\u8bed\u53e5\u3002"),(0,a.kt)("h4",{id:"1\u89e6\u53d1\u5668\u7684\u7279\u6027"},"1\u3001\u89e6\u53d1\u5668\u7684\u7279\u6027"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u6709begin\u3001end\u7684\u7ed3\u6784\u4f53\uff08\u591a\u6761sql\u8bed\u53e5\uff09"),(0,a.kt)("li",{parentName:"ol"},"\u9700\u8981\u6307\u5b9a\u89e6\u53d1\u7684\u6761\u4ef6\uff1aINSERT\uff0cUPDATE\uff0cDELETE"),(0,a.kt)("li",{parentName:"ol"},"\u6709\u6307\u5b9a\u7684\u89e6\u53d1\u65f6\u95f4\uff1aBEFORE\uff0cAFTER")),(0,a.kt)("h4",{id:"2\u89e6\u53d1\u5668\u7684\u521b\u5efa"},"2\u3001\u89e6\u53d1\u5668\u7684\u521b\u5efa"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5355\u6761\u4e1a\u52a1\u903b\u8f91\u7684\u89e6\u53d1\u5668\u521b\u5efa")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-mysql"},"/*\nCREATE TRIGGER \u89e6\u53d1\u5668\u540d\u79f0 BEFORE|AFTER INSERT|UPDATE|DELETE ON \u8868\u540d\nFOR EACH ROW \u4e1a\u52a1\u903b\u8f91\n*/\n#\u5f53b_user\u8868\u4e2d\u63d2\u5165\u6570\u636e\u540e\uff0cb_log\u8868\u4e2d\u4e5f\u63d2\u5165\u4e00\u6761\u6570\u636e\nCREATE TRIGGER trigger_insert AFTER INSERT ON b_user\nFOR EACH ROW INSERT INTO b_log(\u5b57\u6bb5) VALUES('\u63d2\u5165\u6570\u636e')\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u591a\u6761\u4e1a\u52a1\u903b\u8f91\u7684\u89e6\u53d1\u5668")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-mysql"},"/*\nDELIMITER $\nCREATE TRIGGER \u89e6\u53d1\u5668\u540d\u79f0 BEFORE|AFTER INSERT|UPDATE|DELETE ON \u8868\u540d\nFOR EACH ROW\nBIGIN\nINSERT...;\nUPDATE...;\nEND;$\n*/\n#\u5728b_user\u8868\u4e2d\u63d2\u5165\u6570\u636e\u524d\uff0cb_log\u8868\u4e2d\u63d2\u51652\u6761\u6570\u636e\nDELIMITER $\nCREATE TRIGGER trigger_ insert_before BEFORE INSERT ON b_user\nFOR EACH ROW\nBEGIN\nINSERT INTO b_log(comments,name) values('insert1' \uff0cNEW.name);\nINSERT INTO b_log(comments,name) values('insert2' , NEW.name) ;\nEND;$\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u603b\u7ed3")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"BEFORE|AFTER INSERT\u7528\u4e8e\u83b7\u53d6\u5c06\u8981\u63d2\u5165\u7684\u6570\u636e"),(0,a.kt)("li",{parentName:"ul"},"BEFORE|AFTER UPDATE|DELETE\u7528\u4e8e\u83b7\u53d6\u5df2\u7ecf\u4fee\u6539\u6216\u5220\u9664\u7684\u6570\u636e")),(0,a.kt)("h4",{id:"3\u5220\u9664\u89e6\u53d1\u5668"},"3\u3001\u5220\u9664\u89e6\u53d1\u5668"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-mysql"},"DROP TRIGGER \u89e6\u53d1\u5668\u540d\u79f0\n")),(0,a.kt)("h3",{id:"\u4e8c\u5b58\u50a8\u8fc7\u7a0b"},"\u4e8c\u3001\u5b58\u50a8\u8fc7\u7a0b"),(0,a.kt)("h4",{id:"1-\u53d8\u91cf"},"1\u3001 \u53d8\u91cf"),(0,a.kt)("h5",{id:"11-\u7cfb\u7edf\u53d8\u91cf"},"1.1 \u7cfb\u7edf\u53d8\u91cf"),(0,a.kt)("p",null,"\u7531mysql\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u63d0\u4f9b\u7684\uff0c\u53d8\u91cf\u540d\u79f0\u56fa\u5b9a\uff0c\u53ef\u4ee5\u4fee\u6539\u548c\u67e5\u770b\u503c\uff0c\u5206\u4e3a",(0,a.kt)("strong",{parentName:"p"},"\u5168\u5c40\u53d8\u91cf"),"\u548c",(0,a.kt)("strong",{parentName:"p"},"\u4f1a\u8bdd\u53d8\u91cf")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u5168\u5c40\u53d8\u91cf"),"\uff1a\u5f53mysql\u670d\u52a1\u6ca1\u6709\u91cd\u542f\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u67e5\u770b\u548c\u4fee\u6539\u7684\u53d8\u91cf"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u4f1a\u8bdd\u53d8\u91cf"),"\uff1a\u548cMySQL\u8fde\u63a5\u5f62\u6210\u7684\u4f1a\u8bdd\uff0c\u751f\u547d\u5468\u671f\u5728\u6574\u4e2a\u4f1a\u8bdd\u8fc7\u7a0b\u4e2d"),(0,a.kt)("p",null,"\u5168\u5c40\u53d8\u91cf\u7528global\u4fee\u9970\uff0c\u4f1a\u8bdd\u53d8\u91cf\u7528session\u4fee\u9970\uff0c\u901a\u5e38session\u53ef\u4ee5\u7701\u7565"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u67e5\u770b\u7cfb\u7edf\u53d8\u91cf")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-mysql"},"SHOW GLOBAL variables; -- \u67e5\u770b\u5168\u5c40\u53d8\u91cf\nSHOW SESSION variables; -- \u67e5\u770b\u4f1a\u8bdd\u53d8\u91cf\nSHOW variables; -- \u67e5\u770b\u4f1a\u8bdd\u53d8\u91cf\nSHOW GLOBAL variables like '%dir%'; -- \u6a21\u7cca\u67e5\u8be2\u73af\u5883\u53d8\u91cf\nSELECT @@datadir; -- \u67e5\u770b\u5168\u5c40\u7cfb\u7edf\u53d8\u91cf\nSELECT @@session_track_transaction_info;\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4fee\u6539\u7cfb\u7edf\u53d8\u91cf")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-mysql"},"SHOW GLOBAL variables like 'autocommit'; -- \u5168\u5c40\u7cfb\u7edf\u53d8\u91cf\u4e2d\u4e3a\u81ea\u52a8\u63d0\u4ea4\u4e8b\u52a1\nSET GLOBAL autocommit=0; -- \u5c06\u5168\u5c40\u7684\u81ea\u52a8\u63d0\u4ea4\u7684\u4e8b\u52a1\u6539\u4e3a\u624b\u52a8\u63d0\u4ea4\nSHOW SESSION variables link 'autocommit'; -- \u67e5\u770b\u4f1a\u8bdd\u53d8\u91cf\u4e2d\u81ea\u52a8\u63d0\u4ea4\u4e8b\u52a1\nSET SESSION autocommit=0; -- \u5c06\u4f1a\u8bdd\u53d8\u91cf\u4e2d\u81ea\u52a8\u63d0\u4ea4\u7684\u4e8b\u52a1\u6539\u4e3a\u624b\u52a8\u63d0\u4ea4\nSET @@session.autocommit=1;\nSET @@global.autocommit=1;\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u5168\u5c40\u53d8\u91cf"),"\u5728\u4fee\u6539\u540e\uff0c\u5728\u4e0d\u540c\u7684\u4f1a\u8bdd\u4e2d\u90fd\u4f1a\u7acb\u5373\u751f\u6548\uff0c\u4f46\u662f\u5728\u91cd\u65b0\u542f\u52a8mysql\u670d\u52a1\u540e\uff0c\u5168\u5c40\u53d8\u91cf\u4f1a\u6062\u590d\u4e3a\u9ed8\u8ba4\u503c\uff0c\u5982\u679c\u60f3\u8ba9\u5168\u5c40\u53d8\u91cf\u4f9d\u65e7\u6709\u6548\uff0c\u9700\u8981\u53bb\u4fee\u6539.ini\u6587\u4ef6\uff08MySQL\u914d\u7f6e\u6587\u4ef6\uff09"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u4f1a\u8bdd\u53d8\u91cf"),"\u5728\u4fee\u6539\u540e\u53ea\u5bf9\u5f53\u524d\u4f1a\u8bdd\u6709\u6548\u3002\u4e00\u822c\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u4fee\u6539\u4f1a\u8bdd\u53d8\u91cf\u3002\u5982\uff1a\u5b57\u7b26\u7f16\u7801\u683c\u5f0f\u7b49\u53ef\u4ee5\u5728ini\u6587\u4ef6\u4e2d\u8fdb\u884c\u8bbe\u7f6e"),(0,a.kt)("h5",{id:"12-\u7528\u6237\u53d8\u91cf"},"1.2 \u7528\u6237\u53d8\u91cf"),(0,a.kt)("p",null,"MySQL\u5141\u8bb8\u7528\u6237\u81ea\u5b9a\u4e49\u53d8\u91cf\uff0c\u5206\u4e3a\u7528\u6237\u53d8\u91cf\u548c\u5c40\u90e8\u53d8\u91cf"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u7528\u6237\u53d8\u91cf"),(0,a.kt)("p",{parentName:"li"},"  \u4f5c\u7528\u57df\uff1a\u5f53\u524d\u4f1a\u8bdd\u6709\u6548"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"```mysql\n#\u8bbe\u7f6e\u65b9\u5f0f1\uff0c\u5148\u53bb\u58f0\u660e\u5e76\u521d\u59cb\u5316\u7528\u6237\u53d8\u91cf\uff0c\u8d4b\u503c\u64cd\u4f5c\u65e2\u53ef\u4ee5\u4f7f\u7528=\u8fdb\u884c\u8d4b\u503c\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528:=\u8fdb\u884c\u8d4b\u503c\nSET @\u53d8\u91cf\u540d=\u503c;\nSET @\u53d8\u91cf\u540d:=\u503c;\nSELECT @\u53d8\u91cf\u540d:=\u503c;\n#\u8bbe\u7f6e\u65b9\u5f0f2\nSELECT \u5b57\u6bb5 into @\u53d8\u91cf\u540d FROM \u8868\u540d;\n```\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u5c40\u90e8\u53d8\u91cf"),(0,a.kt)("p",{parentName:"li"},"  \u4f5c\u7528\u57df\uff1a\u5728begin end\u7684\u7ed3\u6784\u4f53\u4e2d\uff0c\u58f0\u660e\u5fc5\u987b\u662fbegin end\u7ed3\u6784\u4f53\u7684\u7b2c\u4e00\u53e5"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"```mysql\n#\u58f0\u660e\u65b9\u5f0f\uff0c\u5fc5\u987b\u5728begin\u540e\u9762\u4ece\u7b2c\u4e00\u884c\u5f00\u59cb\nDECLARE \u53d8\u91cf\u540d \u7c7b\u578b;\nDECLARE \u53d8\u91cf\u540d \u7c7b\u578b DEFAULT \u503c;\n\n#\u5c40\u90e8\u53d8\u91cf\u7684\u8d4b\u503c\nSET \u53d8\u91cf\u540d:=\u503c;\nSELECT @\u53d8\u91cf\u540d:=\u503c;\nSELECT \u5b57\u6bb5 into \u53d8\u91cf\u540d FROM \u8868\u540d;\n```\n")),(0,a.kt)("h4",{id:"2\u5b58\u50a8\u8fc7\u7a0b\u7684\u521b\u5efa"},"2\u3001\u5b58\u50a8\u8fc7\u7a0b\u7684\u521b\u5efa"),(0,a.kt)("p",null,"\u5b58\u50a8\u8fc7\u7a0b\u662f\u4e00\u7ec4\u5df2\u7ecf\u9884\u5148\u7f16\u8bd1\u597d\u7684sql\u8bed\u53e5\u7684\u96c6\u5408\uff0c\u7406\u89e3\u4e3a\u6279\u5904\u7406\u8bed\u53e5\uff08\u589e\u52a0\u6d41\u7a0b\u63a7\u5236\u8bed\u53e5\uff09\uff0c\u4e00\u822c\u5728\u590d\u6742\u903b\u8f91\u4e2d\u624d\u4f1a\u4f7f\u7528\u5b58\u50a8\u8fc7\u7a0b"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u5b58\u50a8\u8fc7\u7a0b\u7684\u4f18\u70b9"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\u63d0\u4f9b\u4e86\u4ee3\u7801\u7684\u53ef\u7528\u6027"),(0,a.kt)("li",{parentName:"ul"},"\u7b80\u5316\u4e86\u6570\u636e\u5e93\u64cd\u4f5c\uff0c\u5c06\u4e1a\u52a1\u903b\u8f91\u7684\u7ec6\u8282\u9690\u85cf\u5728\u5b58\u50a8\u8fc7\u7a0b\u4e2d"),(0,a.kt)("li",{parentName:"ul"},"\u51cf\u5c11\u4e86\u7f16\u8bd1\u6b21\u6570\uff0c\u51cf\u5c11\u4e86\u7f51\u7edcIO\u7684\u6b21\u6570\uff0c\u4ece\u800c\u63d0\u9ad8\u64cd\u4f5c\u6548\u7387"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u5b58\u50a8\u8fc7\u7a0b\u7684\u521b\u5efa"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"```mysql\n/*\nDELIMITER $\nCREATE PROCEDURE \u5b58\u50a8\u8fc7\u7a0b\u7684\u540d\u79f0(\u53c2\u6570\u5217\u8868)\nBEGIN\n\u5c40\u90e8\u53d8\u91cf\u7684\u5b9a\u4e49\n\u591a\u6761sql\u8bed\u53e5\n\u6d41\u7a0b\u63a7\u5236\u8bed\u53e5\nEND;$\n*/\n```\n\n\u5982\u679c\u5b58\u50a8\u8fc7\u7a0b\u4e2d\u53ea\u6709\u4e00\u6761SQL\u8bed\u53e5\u53ef\u4ee5\u7701\u7565BEGIN END\n\n\u53c2\u6570\u5217\u8868\n\n| \u53c2\u6570\u6a21\u5f0f | \u5f62\u53c2\u540d\u79f0 | \u53c2\u6570\u7c7b\u578b                                          |\n| -------- | -------- | ------------------------------------------------- |\n| IN       | username | mysql\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u7c7b\u578b\uff08\u6570\u503c\u578b\uff0c\u5b57\u7b26\u578b\uff0c\u65e5\u671f\u578b\uff09 |\n| OUT      | pwd      | mysql\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u7c7b\u578b\uff08\u6570\u503c\u578b\uff0c\u5b57\u7b26\u578b\uff0c\u65e5\u671f\u578b\uff09 |\n| INOUT    | xxx      | mysql\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u7c7b\u578b\uff08\u6570\u503c\u578b\uff0c\u5b57\u7b26\u578b\uff0c\u65e5\u671f\u578b\uff09 |\n\nIN\uff1a\u58f0\u660e\u8be5\u53c2\u6570\u662f\u4e00\u4e2a\u8f93\u5165\u59d3\u53c2\u6570\uff08\u7c7b\u4f3c\u4e8ejava\u4e2d\u7684\u5f62\u53c2\uff09\n\nOUT\uff1a\u58f0\u660e\u8be5\u53c2\u6570\u4e3a\u4e00\u4e2a\u8f93\u51fa\u578b\u53c2\u6570\uff08\u7c7b\u4f3c\u4e8ejava\u4e2d\u7684\u8fd4\u56de\u503c\uff09\uff0c\u5728\u4e00\u4e2a\u5b58\u50a8\u8fc7\u7a0b\u4e2d\u53ef\u4ee5\u5b9a\u4e49\u591a\u4e2aout\u7c7b\u578b\u7684\u53c2\u6570\n\nINOUT\uff1a\u58f0\u660e\u8be5\u53c2\u6570\u53ef\u4ee5\u4e3a\u8f93\u5165\u578b\u53c2\u6570\uff0c\u4e5f\u53ef\u4ee5\u4e3a\u8f93\u51fa\u578b\u53c2\u6570\n\n- \u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\n\n    \n\n    ```mysql\n    CALL \u5b58\u50a8\u8fc7\u7a0b\u7684\u540d\u79f0(\u5b9e\u53c2\u5217\u8868) \n    -- \u5b9e\u53c2\u5217\u8868\u4e2d\u5305\u542b\u7531\u8f93\u51fa\u7c7b\u578b\u7684\u53c2\u6570\n    ```\n\n- \u5b58\u50a8\u8fc7\u7a0b\u6f14\u793a\n\n    - \u65e0\u53c2\u7684\u5b58\u50a8\u8fc7\u7a0b\n\n        \n\n        ```mysql\n        #\u7528\u4e8e\u5411b_user\u8868\u4e2d\u63d2\u51652\u6761\u6570\u636e\n        DELIMITER $\n        CREATE PROCEDURE pro_insert()\n        BEGIN\n        INSERT INTO b_user(name,sex) VALUES('1','1');\n        INSERT INTO b_user(name,sex) VALUES('2','2');\n        END;$\n        \n        CALL pro_insert();\n        ```\n\n    - \u5e26\u6709IN\u6a21\u5f0f\u53c2\u6570\u7684\u5b58\u50a8\u8fc7\u7a0b\n\n        \n\n        ```mysql\n        #\u7528\u4e8e\u5411b_user\u63d2\u51652\u6761\u6570\u636e\uff0c\u6027\u522b\u7531\u5ba2\u6237\u8f93\u5165\n        DELIMITER $\n        CREATE PROCEDURE pro_insert2(IN sex CHAR(1))\n        BEGIN\n        INSERT INTO b_user(name,sex) VALUES('1',sex);\n        INSERT INTO b_user(name,sex) VALUES('2',sex);\n        END;$\n        \n        CALl pro_insert2('\u7537');\n        ```\n\n    - \u591a\u4e2a\u5e26\u6709IN\u53c2\u6570\u7684\u5b58\u50a8\u8fc7\u7a0b\n\n        \n\n        ```mysql\n        #\u7528\u4e8e\u5411b_user\u63d2\u51652\u6761\u6570\u636e\uff0c\u7528\u6237\u540d\u548c\u5bc6\u7801\u7531\u5ba2\u6237\u8f93\u5165\n        DELIMITER $\n        CREATE PROCEDURE pro_insert3(IN name VARCHAR(10),IN sex VARCHAR(20))\n        BEGIN\n        INSERT INTO b_user(name,sex) VALUES(name,sex);\n        INSERT INTO b_user(name,sex) VALUES(name,sex);\n        END;$\n        \n        CALL pro_insert2('uname','\u7537');\n        ```\n\n    - \u5e26IN\uff0cOUT\u53c2\u6570\u7684\u5b58\u50a8\u8fc7\u7a0b\n\n        \n\n        ```mysql\n        #\u5224\u65ad\u7528\u6237\u767b\u5f55\uff0c\u5982\u679c\u7528\u6237\u540d\u548c\u5bc6\u7801\u8f93\u5165\u6b63\u786e\u767b\u5f55\u6210\u529f\uff0c\u5426\u5219\u767b\u5f55\u5931\u8d25\n        #\u6839\u636e\u8f93\u5165\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u4f5c\u4e3a\u6761\u4ef6\u53bbb_user\u8868\u4e2d\u67e5\u8be2\uff0c\u5982\u679c\u67e5\u8be2\u603b\u884c\u6570==1\uff0c\u5219\u8ba4\u4e3a\u767b\u5f55\u6210\u529f\uff0c\u8ba9result\u8fd4\u56de\u767b\u5f55\u6210\u529f\uff0c\u5426\u5219\u767b\u5f55\u5931\u8d25\n        DELIMITER $\n        CREATE PROCEDURE pro_login(IN name VARCHAR(20),IN pwd VARCHAR(20),OUT result VARCHAR(20))\n        BEGIN\n        DECLARE total INT DEFAULT 0;-- \u7528\u4e8e\u5b58\u653e\u67e5\u8be2\u603b\u884c\u6570\n        select count(*) from b_user u where u.name=name and u.pwd=pwd;-- \u5c06\u67e5\u8be2\u7ed3\u679c\u8d4b\u503c\u7ed9total\u5c40\u90e8\u53d8\u91cf\n        SET result:=IF(total=1,'\u767b\u5f55\u6210\u529f','\u767b\u5f55\u5931\u8d25');\n        END;$\n        #\u5b58\u50a8\u8fc7\u7a0b\u5982\u4f55\u6267\u884c\n        -- \u89e3\u51b3\u5224\u65ad\uff0c\u4f7f\u7528\u81ea\u5b9a\u4e49\u53d8\u91cf\n        SET @result:='';\n        CAll pro_login('\u674e\u56db','123',@result);\n        select @result;\n        ```\n\n    - \u5220\u9664\u5b58\u50a8\u8fc7\u7a0b\n\n        \n\n        ```mysql\n        DROP PROCEDURE \u5b58\u50a8\u8fc7\u7a0b\u540d\u79f0\n        ```\n\n    - \u67e5\u770b\u5b58\u50a8\u8fc7\u7a0b\n\n        \n\n        ```mysql\n        SHOW CREATE PROCEDURE \u5b58\u50a8\u8fc7\u7a0b\u540d\u79f0;\n        ```\n\n    - \u4fee\u6539\u5b58\u50a8\u8fc7\u7a0b\n\n        \n\n        ```mysql\n        DROP\n        CREATE\n        ```\n")),(0,a.kt)("h5",{id:"21-\u6d41\u7a0b\u63a7\u5236\u8bed\u53e5"},"2.1 \u6d41\u7a0b\u63a7\u5236\u8bed\u53e5"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u9009\u62e9\u7ed3\u6784")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"IF\u51fd\u6570"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\u529f\u80fd\uff1a\u4e09\u76ee\u8fd0\u7b97"),(0,a.kt)("li",{parentName:"ul"},"\u8bed\u6cd5\uff1aIF(\u903b\u8f91\u8868\u8fbe\u5f0f\uff0c\u8868\u8fbe\u5f0f1\uff0c\u8868\u8fbe\u5f0f2)"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"IF\u7ed3\u6784"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u529f\u80fd\uff1a\u5b9e\u73b0\u591a\u8def\u9009\u62e9")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u6ce8\u610f\uff1a\u53ea\u80fd\u7528\u5728BEGIN END\u7ed3\u6784\u4f53\u4e2d"))))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"    ```mysql\n    /*\n    IF \u903b\u8f91\u8868\u8fbe\u5f0f THEN \u8bed\u53e51;\n    ELSEIF \u903b\u8f91\u8868\u8fbe\u5f0f2 THEN \u8bed\u53e52;\n    ...\n    ELSE \u8bed\u53e5n;\n    END IF;\n    */\n    ```\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"CASE\u7ed3\u6784"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\u7b49\u503c\u9009\u62e9")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"```mysql\nCASE \u5b57\u6bb5|\u53d8\u91cf|\u8868\u8fbe\u5f0f\nWHEN \u503c THEN \u503c|\u8bed\u53e5\nWHEN \u503c THEN \u503c\n...\nELSE \u503c\nEND\n```\n\n- \u4e0d\u7b49\u503c\u9009\u62e9\n\n\n\n```mysql\nCASE\nWHEN \u903b\u8f91\u8868\u8fbe\u5f0f THEN \u8bed\u53e51\n...\nELSE \u8bed\u53e5n\nEND\n```\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u5faa\u73af\u7ed3\u6784")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"WHILE")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"```mysql\n/*\nWHILE \u903b\u8f91\u8868\u8fbe\u5f0f DO\n\u5faa\u73af\u4f53\nEND WHILE;\n*/\n#\u9700\u6c42\uff1a\u521b\u5efa\u5b58\u50a8\u8fc7\u7a0b\uff0c\u8f93\u5165\u4e00\u4e2a\u503c\uff0c\u8fd4\u56de1\u5230\u8be5\u503c\u7684\u548c\n#\u5206\u6790\uff1a\u4e00\u4e2a\u8f93\u5165\u53c2\u6570\uff0c\u4e00\u4e2a\u8fd4\u56de\u503c\uff0c\u5728\u7ed3\u6784\u4f53\u4e2d\uff0c\u4ece1\u5faa\u73af\u5230\u8f93\u5165\u7684\u503c\uff0c\u6c42\u548c\nDELIMITER //\nCREATE PROCEDURE pro_sum(IN input INT,OUT total INT)\nBEGIN\nDECLARE i INT DEFAULT 1;\nDECLARE sum_ INT DEFAULT 0;\nWHILE i<=input do\nSET sum_=sum_+i;\nSET i=i+1;\nEND WHILE;\nSET totle:=sum_;\nEND;//\n\nSET @result=0;\nCALL por_sun(10,@result);\nSELECT @result;\n```\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"LOOP")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"```mysql\n#Loopnaem\u662f\u5b9a\u4e49\u7684\u5faa\u73af\u540d\u79f0\uff0c\u4e3a\u4e86\u8df3\u51fa\u5faa\u73af\u65f6\u6307\u5b9a\u8df3\u51fa\u7684\u5faa\u73af\nloopname:LOOP;\n    IF \u903b\u8f91\u8868\u8fbe\u5f0f THEN\n    LEAVE loopname; -- \u8df3\u51fa\u5f53\u524d\u6307\u5b9a\u7684\u5faa\u73af\uff0c\u7c7b\u4f3c\u4e8ejava\u4e2d\u7684break\n    END IF;\nEND LOOP;\n\nDElIMITER //\nCREATE PROCEDURE pro_sum_loop(IN input INT,OUT total INT)\nBEGIN \nDECLARE i INT DEFAULT 1;\nDECLARE sum_ INT DEFAULT 0;\na:LOOP;\nSET sum_:=sum_+i;\nSET i:=i+1;\nIF i>input THEN\nLEAVE a;\nEND IF;\nEND LOOP;\nSET total:=sum_;\nEND;//\n\nSET @result=0;\nCALL por_sum_loop(10,@result);\nSELECT @result;\n```\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"REPEAT")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"```mysql\nREPEAT\n\u5faa\u73af\u4f53\nUNTIL \u903b\u8f91\u8868\u8fbe\u5f0f -- \u5f53\u6ee1\u8db3\u903b\u8f91\u8868\u8fbe\u5f0f\uff0c\u8df3\u51fa\u5faa\u73af\nEND REPEAT;\n\nDELIMITER //\nCREATE PROCEDURE pro_sum_loop(IN input INT,OUT total INT)\nBEGIN \nDECLARE i INT DEFAULT 1;\nDECLARE sum_ INT DEFAULT 0;\nREPEAT\nSET sum_:=sum_+i;\nSET i:=i+1\nUNTIL i>input\nEND REPEAT;\nSET total:=sum_;\nEND;//\n\nSET @result=0;\nCALL por_sum_loop(10,@result);\nSELECT @result;\n```\n")),(0,a.kt)("h3",{id:"\u4e09\u5b58\u50a8\u51fd\u6570"},"\u4e09\u3001\u5b58\u50a8\u51fd\u6570"),(0,a.kt)("p",null,"\u51fd\u6570\u4e5f\u662f\u4e00\u7ec4\u9884\u5148\u7f16\u8bd1\u597d\u7684sql\u7684\u96c6\u5408\uff0c\u57fa\u672c\u548c\u5b58\u50a8\u8fc7\u7a0b\u76f8\u4f3c"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u51fd\u6570\u548c\u5b58\u50a8\u8fc7\u7a0b\u7684\u533a\u522b")),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u5b58\u50a8\u8fc7\u7a0b\u53ef\u4ee5\u67090\u4e2a\uff0c1\u4e2a\u6216\u591a\u4e2a\u8fd4\u56de\u503c\uff0c\u9002\u7528\u4e8einsert\u3001update\u3001delete\u64cd\u4f5c"),(0,a.kt)("li",{parentName:"ol"},"\u51fd\u6570\u53ea\u80fd\u6709\u4e00\u4e2a\u8fd4\u56de\u503c\uff0c\u9002\u7528\u4e8e\u5728\u5904\u7406\u6570\u636e\u4ee5\u540e\uff0c\u8fd4\u56de\u4e00\u4e2a\u5df2\u77e5\u7684\u7ed3\u679c")),(0,a.kt)("h4",{id:"1\u521b\u5efa\u51fd\u6570"},"1\u3001\u521b\u5efa\u51fd\u6570"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-mysql"},"CREATE FUNCTION \u51fd\u6570\u540d\u79f0(\u53c2\u6570\u5217\u8868) RETURNS \u8fd4\u56de\u7c7b\u578b BINLOG\u53c2\u6570\nBEGIN\n\u51fd\u6570\u4f53\nEND\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u53c2\u6570\u5217\u8868"),"\uff1a\u53c2\u6570\u540d\u79f0 \u53c2\u6570\u7c7b\u578b"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"BINLOG\u53c2\u6570")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"NO SQL\uff1a\u51fd\u6570\u4f53\u4e2d\u6ca1\u6709sql\u8bed\u53e5\uff0c \u4e5f\u4e0d\u4f1a\u6539\u53c2\u6570"),(0,a.kt)("li",{parentName:"ul"},"READS SQL DATE\uff1a\u51fd\u6570\u4f53\u4e2d\u5b58\u5728sql\u8bed\u53e5\uff0c\u4f46\u662f\u6574\u4e2a\u6570\u636e\u662f\u53ea\u8bfb\u7684\uff0c\u4e0d\u4f1a\u4fee\u6539\u6570\u636e"),(0,a.kt)("li",{parentName:"ul"},"MODIFIES SQL DATE \uff1a\u51fd\u6570\u4f53\u4e2d\u5b58\u5728SQL\u8bed\u53e5\uff0c\u5e76\u4e14\u4f1a\u4fee\u6539\u6570\u636e"),(0,a.kt)("li",{parentName:"ul"},"CONTAINS SQL\uff1a\u51fd\u6570\u4f53\u4e2d\u5305\u542b\u6709SQL\u8bed\u53e5")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u51fd\u6570\u4f53"),"\uff1a\u5728\u51fd\u6570\u4f53\u6c47\u603b\u5fc5\u987b\u5305\u542breturn\u8bed\u53e5\uff0c\u5c06return\u653e\u5728\u51fd\u6570\u4f53\u6700\u540e\u4e00\u884c\u6267\u884c"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-mysql"},"#\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u7528\u4e8e\u6c42\u4e24\u6570\u4e4b\u548c\nDELIMITER //\nCREATE FUNCTION sum_(input1 INT,input2 INT) RETURNS INT NO SQL\nBEGIN\nreturn input1+input2;\nEND;//\n")),(0,a.kt)("h4",{id:"2\u4f7f\u7528\u51fd\u6570"},"2\u3001\u4f7f\u7528\u51fd\u6570"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-mysql"},"SELECT \u51fd\u6570\u540d(\u53c2\u6570\u5217\u8868);\n")),(0,a.kt)("h4",{id:"3\u67e5\u770b\u51fd\u6570"},"3\u3001\u67e5\u770b\u51fd\u6570"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-mysql"},"SHOW CREATE FUNCTION \u51fd\u6570\u540d;\n")),(0,a.kt)("h4",{id:"4\u5220\u9664\u51fd\u6570"},"4\u3001\u5220\u9664\u51fd\u6570"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-mysql"},"DROP FUNCTION \u51fd\u6570\u540d;\n")),(0,a.kt)("h3",{id:"\u56db\u5b9a\u65f6\u4efb\u52a1"},"\u56db\u3001\u5b9a\u65f6\u4efb\u52a1"),(0,a.kt)("h4",{id:"1\u67e5\u770b\u5b9a\u65f6\u7b56\u7565\u662f\u5426\u5f00\u542f"},"1\u3001\u67e5\u770b\u5b9a\u65f6\u7b56\u7565\u662f\u5426\u5f00\u542f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"show variables like '%event_sche%';\n")),(0,a.kt)("p",null,"\u5f00\u542f\u5b9a\u65f6\u7b56\u7565\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"set global event_scheduler=1;\n")),(0,a.kt)("h4",{id:"2\u521b\u5efa\u5b9a\u65f6\u4efb\u52a1"},"2\u3001\u521b\u5efa\u5b9a\u65f6\u4efb\u52a1"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"create event run_event\non schedule every 1 minute\non completion preserve disable\ndo call test_procedure ();\n")),(0,a.kt)("p",null,"1\u3001create event day_event\uff1a\u662f\u521b\u5efa\u540d\u4e3arun_event\u7684\u4e8b\u4ef6 2\u3001\u521b\u5efa\u5468\u671f\u5b9a\u65f6\u7684\u89c4\u5219\uff0c\u610f\u601d\u662f\u6bcf\u5206\u949f\u6267\u884c\u4e00\u6b21 3\u3001on completion preserve disable\u662f\u8868\u793a\u521b\u5efa\u540e\u5e76\u4e0d\u5f00\u59cb\u751f\u6548\u3002 4\u3001do call test_procedure ()\u662f\u8be5event(\u4e8b\u4ef6)\u7684\u64cd\u4f5c\u5185\u5bb9"),(0,a.kt)("h4",{id:"3\u5b9a\u65f6\u4efb\u52a1\u64cd\u4f5c"},"3\u3001\u5b9a\u65f6\u4efb\u52a1\u64cd\u4f5c"),(0,a.kt)("p",null,"1\u3001\u67e5\u770b\u5b9a\u671f\u4efb\u52a1"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT event_name,event_definition,interval_value,interval_field,status \nFROM information_schema.EVENTS;\n")),(0,a.kt)("p",null,"2\u3001\u5f00\u542f\u6216\u5173\u95ed\u5b9a\u65f6\u4efb\u52a1"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"alter event run_event on completion preserve enable;//\u5f00\u542f\u5b9a\u65f6\u4efb\u52a1\nalter event run_event on completion preserve disable;//\u5173\u95ed\u5b9a\u65f6\u4efb\u52a1\n")),(0,a.kt)("h4",{id:"4\u5b9a\u65f6\u89c4\u5219"},"4\u3001\u5b9a\u65f6\u89c4\u5219"),(0,a.kt)("p",null,"1\u3001\u5468\u671f\u6267\u884c\u2013\u5173\u952e\u5b57 EVERY \u5355\u4f4d\u6709\uff1asecond\u3001minute\u3001hour\u3001day\u3001week(\u5468)\u3001quarter(\u5b63\u5ea6)\u3001month\u3001year"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"on schedule every 1 week //\u6bcf\u5468\u6267\u884c1\u6b21\n")),(0,a.kt)("p",null,"2\u3001\u5728\u5177\u4f53\u67d0\u4e2a\u65f6\u95f4\u6267\u884c\u2013\u5173\u952e\u5b57 AT"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"on schedule at current_timestamp()+interval 5 day //5\u5929\u540e\u6267\u884c\non schedule at '2019-01-01 00:00:00' //\u57282019\u5e741\u67081\u65e5\uff0c0\u70b9\u6574\u6267\u884c\n")),(0,a.kt)("p",null,"3\u3001\u5728\u67d0\u4e2a\u65f6\u95f4\u6bb5\u6267\u884c\u2013\u5173\u952e\u5b57STARTS ENDS"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql"},"on schedule every 1 day starts current_timestamp()+interval 5 day ends current_timestamp()+interval 1 month //5\u5929\u540e\u5f00\u59cb\u6bcf\u5929\u90fd\u6267\u884c\u6267\u884c\u5230\u4e0b\u4e2a\u6708\u5e95\non schedule every 1 day ends current_timestamp()+interval 5 day //\u4ece\u73b0\u5728\u8d77\u6bcf\u5929\u6267\u884c\uff0c\u6267\u884c5\u5929\n")),(0,a.kt)("h2",{id:"\u9644\u5f55"},"\u9644\u5f55\uff1a"),(0,a.kt)("p",null,"1\u3001\u914d\u7f6e\u6587\u4ef6\u7684\u4e3e\u4f8b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ini"},'#[client]\n#MySQL\u9ed8\u8ba4\u5bc6\u7801\n#password=88888888\n[mysqld]\n#MySQL\u4ee5\u4ec0\u4e48\u7528\u6237\u8fd0\u884c\n#user=mysql\n#MySQL\u8fd0\u884c\u5728\u54ea\u4e2a\u7aef\u53e3\n#port=3306\n#\u6539\u53c2\u6570\u6307\u5b9a\u4e86\u5b89\u88c5MySQL\u7684\u5b89\u88c5\u8def\u5f84\uff0c\u586b\u5199\u5168\u8def\u5f84\u53ef\u4ee5\u89e3\u51b3\u76f8\u5bf9\u8def\u5f84\u6240\u9020\u6210\u7684\u95ee\u9898\n#basedir\n#\u6307\u5b9aMySQL\u7684\u6570\u636e\u5e93\u6587\u4ef6\u653e\u5728\u4ec0\u4e48\u8def\u5f84\u4e0b\ndatadir=/usr/local/mysql/data\n#mysql\u4ee5socket\u65b9\u5f0f\u8fd0\u884c\u7684sock\u6587\u4ef6\u4f4d\u7f6e\nsocket=/usr/local/mysql/mysql.sock\n#\u662f\u5426\u652f\u6301\u7b26\u53f7\u94fe\u63a5\uff0c\u5373\u6570\u636e\u5e93\u6216\u8868\u53ef\u4ee5\u5b58\u50a8\u5728my.cnf\u4e2d\u6307\u5b9adatadir\u4e4b\u5916\u7684\u5206\u533a\u6216\u8005\u76ee\u5f55\uff0c\u4e3a0\u4e0d\u5f00\u542f\nsymbolic-links=0\n#\u670d\u52a1\u5668\u4f7f\u7528\u7684\u5b57\u7b26\u96c6\ncharacter-set-server=utf8\n#\u9ed8\u8ba4\u5b58\u50a8\u5f15\u64ce\ndefault-storage-engine=INNODB\n#\u8868\u793a\u9ed8\u8ba4\u5c06\u65e5\u5fd7\u6587\u4ef6\u5b58\u5165\u6587\u4ef6\uff0c\u9ed8\u8ba4\u503c\u662f\'FILE\' \n#\u5982\u679c\u65f6\u5019log-output=TABLE\u8868\u793a\u5c06\u65e5\u5fd7\u5b58\u5165\u6570\u636e\u5e93\uff0c\u8fd9\u6837\u65e5\u5fd7\u4fe1\u606f\u5c31\u4f1a\u88ab\u5199\u5165\u5230mysql.slow_log\u8868\u4e2d\nlog-output=FILE\n#1\u5f00\u542f\uff0c0\u5173\u95ed \u5c06\u6240\u6709\u5230\u8fbeMySQL Server\u7684SQL\u8bed\u53e5\u8bb0\u5f55\u4e0b\u6765\ngeneral-log=0\n#\u8bbe\u7f6e\u65e5\u5fd7\u6587\u4ef6\u4fdd\u5b58\u4f4d\u7f6e\ngeneral_log_file="JOYWANG.log"\n#\u6162\u67e5\u8be2\u65e5\u5fd7\u662f\u5426\u5f00\u542f1,0\nslow-query-log=1\n#\u6162\u67e5\u8be2\u65e5\u5fd7\u6587\u4ef6\u4fdd\u5b58\nslow_query_log_file="JOYWANG-slow.log"\n#\u6162\u67e5\u8be2\u65e5\u5fd7\u8bbe\u7f6e\u65f6\u95f4\u5355\u4f4d\u79d2 S\nlong_query_time=10\n#\u662f\u5426\u542f\u7528\u9519\u8bef\u65e5\u5fd7\u7684\u529f\u80fd\u548c\u9519\u8bef\u65e5\u5fd7\u7684\u5b58\u50a8\u4f4d\u7f6e\nlog-error="JOYWANG.err"\n#\u5982\u679c\u4e0d\u8bbe\u7f6e\u5219server-id\u662f\u6839\u636e\u670d\u52a1\u5668ip\u5730\u5740\u540e2\u4f4d\u751f\u6210\u7684\uff0c\u9ed8\u8ba40\u62161\n#\u5f53\u914d\u7f6eMySQL\u590d\u5236\u65f6\uff0c\u662f\u5fc5\u586b\u9879\uff0c\u7528\u6765\u533a\u5206\u590d\u5236\u62d3\u6251\u4e2d\u7684\u5404\u4e2a\u5b9e\u4f8b\nserver-id=1\n#\u9650\u5236\u5bfc\u5165\u548c\u5bfc\u51fa\u7684\u76ee\u5f55\u6743\u9650NULL\u8868\u793a\u7981\u6b62\u3001\u5982\u679c\u662f\u6587\u4ef6\u76ee\u5f55\uff0c\u5141\u8bb8\u8be5\u76ee\u5f55\u4e0b\u6587\u4ef6\uff08\u6d4b\u8bd5\u5b50\u76ee\u5f55\u4e0d\u884c\uff09\u3001\u5982\u679c\u4e3a\u7a7a\u5219\u8868\u793a\u4e0d\u9650\u5236\u76ee\u5f55\uff0c\u4e00\u5b9a\u8981\u6709\u7b49\u53f7\uff0c\u5426\u5219mysql\u65e0\u6cd5\u542f\u52a8\nsecure-file-priv=\n#\u6700\u5927\u5e76\u53d1\u8fde\u63a5\u6570\uff0cmysql\u4f1a\u4e3a\u6bcf\u4e2a\u8fde\u63a5\u63d0\u4f9b\u7f13\u51b2\u533a\uff0c\u4f1a\u5f00\u9500\u8d8a\u591a\u7684\u5185\u5b58\uff0c\u6240\u4ee5\u8981\u9002\u5f53\u7684\u8c03\u6574\u8be5\u503c\uff0c\u4e0d\u80fd\u76f2\u76ee\u7684\u63d0\u9ad8\u8bbe\u7f6e\u503c\nmax_connections=151\n#\u6307\u5b9a\u9ad8\u901f\u7f13\u5b58\u7684\u5927\u5c0f\uff0c\u6bcf\u5f53MySQL\u8bbf\u95ee\u4e00\u4e2a\u8868\u65f6\uff0c\u5982\u679c\u5728\u8868\u7f13\u51b2\u533a\u4e2d\u8fd8\u6709\u7a7a\u95f4\uff0c\u8be5\u8868\u5c31\u88ab\u6253\u5f00\u5e76\u653e\u5165\u5176\u4e2d\uff0c\u8fd9\u6837\u53ef\u4ee5\u66f4\u5feb\u5730\u8bbf\u95ee\u8868\u5185\u5bb9\u5355\u4f4dM\ntable_open_cache=2000\n#\u589e\u52a0\u4e00\u5f20\u4e34\u65f6\u8868\u5927\u5c0f\uff0c\u63d0\u9ad8\u67e5\u8be2\u901f\u5ea6\ntmp_table_size=16M\n#\u7ebf\u7a0b\u6c60\u7f13\u5b58\u5927\u5c0f\uff0c\u5f53\u5ba2\u6237\u7aef\u65ad\u5f00\u8fde\u63a5\u540e\uff0c\u5c06\u5f53\u524d\u7ebf\u7a0b\u7f13\u5b58\u8d77\u6765\uff0c\u5f53\u5728\u63a5\u5230\u65b0\u7684\u8fde\u63a5\u8bf7\u6c42\u65f6\u5feb\u901f\u54cd\u5e94\uff0c\u65e0\u9700\u521b\u5efa\u65b0\u7684\u7ebf\u7a0b\nthread_cache_size=10\n#MySQL\u91cd\u5efa\u7d22\u5f15\u65f6\u5141\u8bb8\u4f7f\u7528\u7684\u4e34\u65f6\u6587\u4ef6\u6700\u5927\u5927\u5c0f\nMyIsam_max_sort_file_size=100G\n#\u8bbe\u7f6e\u5728REPAIR TABLE\uff0c\u6216\u8005\u7528 CREATE INDEX \u521b\u5efa\u7d22\u5f15\u6216 ALTER TABLE \u7684\u8fc7\u7a0b\u4e2d\u6392\u5e8f\u7d22\u5f15\u6240\u5206\u914d\u7684\u7f13\u51b2\u533a\u5927\u5c0f\u3002\u53ef\u8bbe\u7f6e\u8303\u56f44Bytes \u81f3 4GB\uff0c\u9ed8\u8ba4\u4e3a8MB\u3002\nMyIsam_sort_buffer_size=8M\n#\u6307\u5b9a\u7d22\u5f15\u7f13\u51b2\u533a\u7684\u5927\u5c0f\uff0c\u51b3\u5b9a\u4e86\u7d22\u5f15\u5904\u7406\u7684\u901f\u5ea6\uff0c\u5c24\u5176\u662f\u7d22\u5f15\u8bfb\u7684\u901f\u5ea6\uff0c\u5efa\u8bae\u8bbe\u7f6e\u6210\u7269\u7406\u5185\u5b58\u76841/4\uff0c\u751a\u81f3\u7269\u7406\u5185\u5b58\u768430%-40%\uff0c\u5982\u679c\u8bbe\u7f6e\u592a\u5927\uff0c\u7cfb\u7edf\u5c31\u4f1a\u9891\u7e41\u7684\u6362\u9875\uff0c\u964d\u4f4e\u7cfb\u7edf\u6027\u80fd\nkey_buffer_size=8M\n#MySQL\u8bfb\u5165\u7f13\u51b2\u533a\u5927\u5c0f\uff0c\u5bf9\u8868\u8fdb\u884c\u987a\u5e8f\u626b\u63cf\u7684\u8bf7\u6c42\u5c06\u5206\u914d\u4e00\u4e2a\u8bfb\u5165\u7f13\u51b2\u533a\uff0cMySQL\u4f1a\u4e3a\u5b83\u5206\u914d\u4e00\u6bb5\u5185\u5b58\u7f13\u51b2\u533a\u3002read_buffer_size\u53d8\u91cf\u63a7\u5236\u8fd9\u4e00\u7f13\u51b2\u533a\u7684\u5927\u5c0f\u3002\u5982\u679c\u5bf9\u8868\u7684\u987a\u5e8f\u626b\u63cf\u8bf7\u6c42\u975e\u5e38\u9891\u7e41\uff0c\u5e76\u4e14\u4f60\u8ba4\u4e3a\u9891\u7e41\u626b\u63cf\u8fdb\u884c\u5f97\u592a\u6162\uff0c\u53ef\u4ee5\u901a\u8fc7\u589e\u52a0\u8be5\u53d8\u91cf\u503c\u4ee5\u53ca\u5185\u5b58\u7f13\u51b2\u533a\u5927\u5c0f\u63d0\u9ad8\u5176\u6027\u80fd\u3002\nread_buffer_size=0\n#\u53c2\u6570\u7528\u5728sort\u67e5\u8be2\u4e4b\u540e \uff0c\u4ee5\u4fdd\u8bc1\u83b7\u53d6\u4ee5\u987a\u5e8f\u7684\u65b9\u5f0f\u83b7\u53d6\u5230\u67e5\u8be2\u7684\u6570\u636e\u3002\u5982\u679c\u4f60\u6709\u5f88\u591aorder by \u67e5\u8be2\u8bed\u53e5\uff0c\u589e\u957f\u8fd9\u503c\u80fd\u591f\u63d0\u5347\u6027\u80fd\nread_rnd_buffer_size=0\n#0\uff1alog buffer\u5c06\u6bcf\u79d2\u4e00\u6b21\u5730\u5199\u5165log file\u4e2d\uff0c\u5e76\u4e14log file\u7684flush(\u5237\u5230\u78c1\u76d8)\u64cd\u4f5c\u540c\u65f6\u8fdb\u884c\u3002\u8be5\u6a21\u5f0f\u4e0b\u5728\u4e8b\u52a1\u63d0\u4ea4\u7684\u65f6\u5019\uff0c\u4e0d\u4f1a\u4e3b\u52a8\u89e6\u53d1\u5199\u5165\u78c1\u76d8\u7684\u64cd\u4f5c\u3002\n#1\uff1a\u6bcf\u6b21\u4e8b\u52a1\u63d0\u4ea4\u65f6MySQL\u90fd\u4f1a\u628alog buffer\u7684\u6570\u636e\u5199\u5165log file\uff0c\u5e76\u4e14flush(\u5237\u5230\u78c1\u76d8)\u4e2d\u53bb\uff0c\u8be5\u6a21\u5f0f\u4e3a\u7cfb\u7edf\u9ed8\u8ba4\u3002\n#2\uff1a\u6bcf\u6b21\u4e8b\u52a1\u63d0\u4ea4\u65f6MySQL\u90fd\u4f1a\u628alog buffer\u7684\u6570\u636e\u5199\u5165log file\uff0c\u4f46\u662fflush(\u5237\u5230\u78c1\u76d8)\u64cd\u4f5c\u5e76\u4e0d\u4f1a\u540c\u65f6\u8fdb\u884c\u3002\u8be5\u6a21\u5f0f\u4e0b\uff0cMySQL\u4f1a\u6bcf\u79d2\u6267\u884c\u4e00\u6b21 flush(\u5237\u5230\u78c1\u76d8)\u64cd\u4f5c\u3002\ninnodb_flush_log_at_trx_commit=1\n#\u786e\u4fdd\u6709\u8db3\u591f\u5927\u7684\u65e5\u5fd7\u7f13\u51b2\u533a\u6765\u4fdd\u5b58\u810f\u6570\u636e\u5728\u88ab\u5199\u5165\u5230\u65e5\u5fd7\u6587\u4ef6\u4e4b\u524d\ninnodb_log_buffer_size=1M\n#\u6307\u5b9a\u8868\u6570\u636e\u548c\u7d22\u5f15\u5b58\u50a8\u7684\u7a7a\u95f4\uff0c\u53ef\u4ee5\u662f\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u6587\u4ef6\u3002\u6700\u540e\u4e00\u4e2a\u6570\u636e\u6587\u4ef6\u5fc5\u987b\u662f\u81ea\u52a8\u6269\u5145\u7684\uff0c\u4e5f\u53ea\u6709\u6700\u540e\u4e00\u4e2a\u6587\u4ef6\u5141\u8bb8\u81ea\u52a8\u6269\u5145\u3002\u8fd9\u6837\uff0c\u5f53\u7a7a\u95f4\u7528\u5b8c\u540e\uff0c\u81ea\u52a8\u6269\u5145\u6570\u636e\u6587\u4ef6\u5c31\u4f1a\u81ea\u52a8\u589e\u957f\uff08\u4ee58MB\u4e3a\u5355\u4f4d\uff09\u4ee5\u5bb9\u7eb3\u989d\u5916\u7684\u6570\u636e\u3002\u4f8b\u5982\uff1a innodb_data_file_path=/disk1/ibdata1:900M;/disk2/ibdata2:50M:autoextend\u4e24\u4e2a\u6570\u636e\u6587\u4ef6\u653e\u5728\u4e0d\u540c\u7684\u78c1\u76d8\u4e0a\u3002\u6570\u636e\u9996\u5148\u653e\u5728ibdata1\u4e2d\uff0c\u5f53\u8fbe\u5230900M\u4ee5\u540e\uff0c\u6570\u636e\u5c31\u653e\u5728ibdata2\u4e2d\u3002\u4e00\u65e6\u8fbe\u523050MB\uff0cibdata2\u5c06\u4ee5 8MB\u4e3a\u5355\u4f4d\u81ea\u52a8\u589e\u957f\u3002\u5982\u679c\u78c1\u76d8\u6ee1\u4e86\uff0c\u9700\u8981\u5728\u53e6\u5916\u7684\u78c1\u76d8\u4e0a\u9762\u589e\u52a0\u4e00\u4e2a\u6570\u636e\u6587\u4ef6\u3002\ninnodb_data_file_path=/disk1/ibdata1:900M;/disk2/ibdata2:50M:autoextend\n#\u8fd9\u662fInnoDB\u6700\u91cd\u8981\u7684\u8bbe\u7f6e\uff0c\u5bf9InnoDB\u6027\u80fd\u6709\u51b3\u5b9a\u6027\u7684\u5f71\u54cd\u3002\u9ed8\u8ba4\u7684\u8bbe\u7f6e\u53ea\u67098M\uff0c\u6240\u4ee5\u9ed8\u8ba4\u7684\u6570\u636e\u5e93\u8bbe\u7f6e\u4e0b\u9762InnoDB\u6027\u80fd\u5f88\u5dee\u3002\u5728\u53ea\u6709InnoDB\u5b58\u50a8\u5f15\u64ce\u7684\u6570\u636e\u5e93\u670d\u52a1\u5668\u4e0a\u9762\uff0c\u53ef\u4ee5\u8bbe\u7f6e60-80%\u7684\u5185\u5b58\u3002\u66f4\u7cbe\u786e\u4e00\u70b9\uff0c\u5728\u5185\u5b58\u5bb9\u91cf\u5141\u8bb8\u7684\u60c5\u51b5\u4e0b\u9762\u8bbe\u7f6e\u6bd4InnoDB tablespaces\u592710%\u7684\u5185\u5b58\u5927\u5c0f\u3002\ninnodb_buffer_pool_size=8M\n#\u653e\u7f6e\u8868\u7a7a\u95f4\u6570\u636e\u7684\u76ee\u5f55\uff0c\u9ed8\u8ba4\u5728mysql\u7684\u6570\u636e\u76ee\u5f55\uff0c\u8bbe\u7f6e\u5230\u548cMySQL\u5b89\u88c5\u6587\u4ef6\u4e0d\u540c\u7684\u5206\u533a\u53ef\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002\ninnodb_data_home_dir=\n#\u8be5\u53c2\u6570\u51b3\u5b9a\u4e86recovery speed\u3002\u592a\u5927\u7684\u8bddrecovery\u5c31\u4f1a\u6bd4\u8f83\u6162\uff0c\u592a\u5c0f\u4e86\u5f71\u54cd\u67e5\u8be2\u6027\u80fd\uff0c\u4e00\u822c\u53d6256M\u53ef\u4ee5\u517c\u987e\u6027\u80fd\u548crecovery\u7684\u901f\u5ea6\ninnodb_log_file_size=48M\n#\u8be5\u53c2\u6570\u8bbe\u5b9a\u4e86\u4e8b\u52a1\u63d0\u4ea4\u65f6\u5185\u5b58\u4e2dlog\u4fe1\u606f\u7684\u5904\u7406\u3002\n1) =1\u65f6\uff0c\u5728\u6bcf\u4e2a\u4e8b\u52a1\u63d0\u4ea4\u65f6\uff0c\u65e5\u5fd7\u7f13\u51b2\u88ab\u5199\u5230\u65e5\u5fd7\u6587\u4ef6\uff0c\u5bf9\u65e5\u5fd7\u6587\u4ef6\u505a\u5230\u78c1\u76d8\u64cd\u4f5c\u7684\u5237\u65b0\u3002Truly ACID\u3002\u901f\u5ea6\u6162\u3002\n2) =2\u65f6\uff0c\u5728\u6bcf\u4e2a\u4e8b\u52a1\u63d0\u4ea4\u65f6\uff0c\u65e5\u5fd7\u7f13\u51b2\u88ab\u5199\u5230\u6587\u4ef6\uff0c \u4f46\u4e0d\u5bf9\u65e5\u5fd7\u6587\u4ef6\u505a\u5230\u78c1\u76d8\u64cd\u4f5c\u7684\u5237\u65b0\u3002\u53ea\u6709\u64cd\u4f5c\u7cfb\u7edf\u5d29\u6e83\u6216\u6389\u7535\u624d\u4f1a\u5220\u9664\u6700\u540e\u4e00\u79d2\u7684\u4e8b\u52a1\uff0c\u4e0d\u7136\u4e0d\u4f1a\u4e22\u5931\u4e8b\u52a1\u3002\n3) =0\u65f6\uff0c \u65e5\u5fd7\u7f13\u51b2\u6bcf\u79d2\u4e00\u6b21\u5730\u88ab\u5199\u5230\u65e5\u5fd7\u6587\u4ef6\uff0c\u5e76\u4e14\u5bf9\u65e5\u5fd7\u6587\u4ef6\u505a\u5230\u78c1\u76d8\u64cd\u4f5c\u7684\u5237\u65b0\u3002\u4efb\u4f55mysqld\u8fdb\u7a0b\u7684\u5d29\u6e83\u4f1a\u5220\u9664\u5d29\u6e83\u524d\u6700\u540e\u4e00\u79d2\u7684\u4e8b\u52a1\ninnodb_flush_logs_at_trx_commit=2\n#\u8bbe\u7f6eInnoDB\u540c\u6b65IO\u7684\u65b9\u5f0f\uff1a\n) Default \u2013 \u4f7f\u7528fsync\uff08\uff09\u3002\n2) O_SYNC \u4ee5sync\u6a21\u5f0f\u6253\u5f00\u6587\u4ef6\uff0c\u901a\u5e38\u6bd4\u8f83\u6162\u3002\n3) O_DIRECT\uff0c\u5728Linux\u4e0a\u4f7f\u7528Direct IO\u3002\u53ef\u4ee5\u663e\u8457\u63d0\u9ad8\u901f\u5ea6\uff0c\u7279\u522b\u662f\u5728RAID\u7cfb\u7edf\u4e0a\u3002\u907f\u514d\u989d\u5916\u7684\u6570\u636e\u590d\u5236\u548cdouble buffering\uff08mysql buffering \u548cOS buffering\uff09\u3002\ninnodb_flush_method=Default\n#InnoDB kernel\u6700\u5927\u7684\u7ebf\u7a0b\u6570\u3002\n1) \u6700\u5c11\u8bbe\u7f6e\u4e3a(num_disks+num_cpus)*2\u3002\n2) \u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u62101000\u6765\u7981\u6b62\u8fd9\u4e2a\u9650\u5236\ninnodb_thread_concurrency=25\n#\u6b64\u914d\u7f6e\u9879\u4f5c\u7528\u4e3b\u8981\u662f\u5f53tablespace \u7a7a\u95f4\u5df2\u7ecf\u6ee1\u4e86\u540e\uff0c\u9700\u8981MySQL\u7cfb\u7edf\u9700\u8981\u81ea\u52a8\u6269\u5c55\u591a\u5c11\u7a7a\u95f4\uff0c\u6bcf\u6b21tablespace \u6269\u5c55\u90fd\u4f1a\u8ba9\u5404\u4e2aSQL \u5904\u4e8e\u7b49\u5f85\u72b6\u6001\u3002\u589e\u52a0\u81ea\u52a8\u6269\u5c55Size\u53ef\u4ee5\u51cf\u5c11tablespace\u81ea\u52a8\u6269\u5c55\u6b21\u6570\u3002\ninnodb_autoextend_increment=64\n#\u53ef\u4ee5\u5f00\u542f\u591a\u4e2a\u5185\u5b58\u7f13\u51b2\u6c60\uff0c\u628a\u9700\u8981\u7f13\u51b2\u7684\u6570\u636ehash\u5230\u4e0d\u540c\u7684\u7f13\u51b2\u6c60\u4e2d\uff0c\u8fd9\u6837\u53ef\u4ee5\u5e76\u884c\u7684\u5185\u5b58\u8bfb\u5199\u3002\ninnodb_buffer_pool_instances=8\n#\u8fd9\u4e2a\u53c2\u6570\u8bbe\u7f6e\u4e3a\u4e00\u79cdtickets,\u9ed8\u8ba4\u662f5000\uff0c\u6211\u4e5f\u4e0d\u6e05\u695a\u5230\u5e95\u5b83\u4ee3\u8868\u591a\u4e45\uff0c\u4ece\u5b98\u65b9\u6587\u6863\u6765\u770b\u5b83\u548c\u4e8b\u7269\u5904\u7406\u7684\u884c\u6570\u6709\u5173\uff0c\u5927\u4e8b\u7269\u9700\u8981\u5904\u7406\u7684\u884c\u6570\u81ea\u7136\u66f4\u591a\uff0c\u5c0f\u4e8b\u7269\u5f53\u7136\u4e5f\u5c31\u8d8a\u5c11\u81f3\u5c11\u6211\u4eec\u53ef\u4ee5\u60f3\u6210\u83b7\u5f97CPU\u7684\u65f6\u95f4\uff0c\u5e72\u6d3b\u671f\u95f4\u4ed6\u4f1a\u4e0d\u65ad\u51cf\u5c11\uff0c\u5982\u679c\u51cf\u5c11\u52300\uff0c\u8fd9\u4e2a\u7ebf\u7a0b\u5c06\u88ab\u63d0\u51fainnodb\u5c42\u6b21\uff0c\u8fdb\u5165\u524d\u9762\u8bf4\u7684\u7b49\u5f85\u961f\u5217\uff0c\u5f53\u7136\u4e5f\u5c31\u5728\u961f\u5c3e\u90e8\u4e86\uff0c\u8fd9\u91cc\u5047\u8bbe\u6709\u4e00\u4e2a\u5c0f\u7684\u4e8b\u7269\u6b63\u5728\u6392\u961f\u8fdb\u5165innodb\u5c42\uff0c\u53c8\u6216\u8005\u5b83\u5df2\u7ecf\u8fdb\u5165\u4e86innodb\u5c42\u6ca1\u6709\u83b7\u5f97CPU\u65f6\u95f4\u8f6e\u7247\uff0c\u7a81\u7136\u4e00\u4e2a\u5927\u7684\u4e8b\u7269tickets\u8017\u5c3d\u88ab\u63d0\u51fa\u4e86innodb\u5c42\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5c0f\u4e8b\u7269\u5c31\u81ea\u7136\u800c\u7136\u80fd\u591f\u83b7\u5f97CPU\u8f6e\u7247\u5e72\u6d3b\uff0c\u800c\u5c0f\u4e8b\u7269\u6267\u884c\u975e\u5e38\u5feb\uff0c\u6267\u884c\u5b8c\u6210\u540e\uff0c\u53e6\u5916\u7684\u4e8b\u7269\u53c8\u80fd\u5c3d\u5feb\u7684\u83b7\u5f97CPU\u5e72\u6d3b\uff0c\u4e0d\u4f1a\u7531\u4e8eOS\u7ebf\u7a0b\u8c03\u5ea6\u4e0d\u5747\u5300\u7684\u95ee\u9898\u800c\u9020\u6210\u7684\u5c0f\u4e8b\u7269\u9965\u997f\u95ee\u9898\uff0c\u8fd9\u5f88\u597d\u7406\u89e3\u3002\u4e5f\u5c31\u662f\u524d\u9762\u6211\u8bf4\u7684\u4e0e\u5176\u4f9d\u8d56OS\u7684\u8c03\u5ea6\u7b56\u7565\u4e0d\u5982\u81ea\u5df1\u8bbe\u7f6e\u4e00\u79cd\u89c4\u5219\uff0c\u8ba9\u7528\u5230\u4e86\u4e00\u5b9a\u65f6\u95f4\u8f6e\u7247\u7684\u7ebf\u7a0b\u5148\u5904\u4e8e\u7761\u7720\u6001\u653e\u5f03CPU\u7684\u4f7f\u7528\ninnodb_concurrency_tickets=5000\ninnodb_old_blocks_time=1000\ninnodb_open_files=300\ninnodb_stats_on_metadata=0\n#\u53ef\u4ee5\u5b58\u50a8\u6bcf\u4e2aInnoDB\u8868\u548c\u5b83\u7684\u7d22\u5f15\u5728\u5b83\u81ea\u5df1\u7684\u6587\u4ef6\u4e2d\u3002\ninnodb_file_per_table=1\n#\u5982\u679c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u8fd0\u884c\u5728READ-COMMITED\u9694\u79bb\u7ea7\u522b\uff0c\u505a\u6b64\u8bbe\u5b9a\u4f1a\u6709\u4e00\u5b9a\u7684\u6027\u80fd\u63d0\u5347\u3002\ntransaction-isolation=READ-COMITTED\n#\u8fd9\u4e2a\u53c2\u6570\u7528\u6765\u8868\u793a \u9875\u8bfb\u53d6\u5230mid\u4f4d\u7f6e\u540e\uff0c\u9700\u8981\u7b49\u5f85\u591a\u4e45\u624d\u4f1a\u88ab\u52a0\u5165\u5230LRU\u5217\u8868\u7684\u70ed\u7aef\u3002\u4f7fLRU\u5217\u8868\u4e2d\u7684\u70ed\u70b9\u6570\u636e\u4e0d\u88ab\u5237\u51fa\ninnodb_checksum_algorithm=0\n#MySQL\u6682\u65f6\u505c\u6b62\u56de\u7b54\u65b0\u8bf7\u6c42\u4e4b\u524d\u7684\u77ed\u65f6\u95f4\u5185\u591a\u5c11\u4e2a\u8bf7\u6c42\u53ef\u4ee5\u88ab\u5b58\u5728\u5806\u6808\u4e2d\nback_log=80\nflush_time=0\n#\u5982\u679c\u6309\u7167\u68c0\u7d22\u7684\u6027\u80fd\u65b9\u5f0f\u6765\u7ec6\u5206\uff0c\u90a3\u4e48\u65e0\u8bba\u662f\u4e24\u8868 INNER JOIN \u8fd8\u662f\u591a\u8868 INNER JOIN\uff0c\u90fd\u5927\u81f4\u53ef\u4ee5\u5206\u4e3a\u4ee5\u4e0b\u51e0\u7c7b\uff1a1.JOIN KEY \u6709\u7d22\u5f15\uff0c\u4e3b\u952e2.JOIN KEY \u6709\u7d22\u5f15\uff0c \u4e8c\u7ea7\u7d22\u5f153.JOIN KEY \u65e0\u7d22\u5f15\uff1bJOIN BUFFER \u662f MySQL \u7528\u6765\u7f13\u5b58\u4ee5\u4e0a\u7b2c\u4e8c\u3001\u7b2c\u4e09\u8fd9\u4e24\u7c7b JOIN \u68c0\u7d22\u7684\u4e00\u4e2a BUFFER \u5185\u5b58\u533a\u57df\u5757\u3002\njoin_buffer_size=256K\n#\u53ef\u4ee5\u589e\u5927\u6b64\u503c\u4ee5\u4fbf\u4e8eserver\u7aef\u63a5\u6536\u66f4\u5927\u7684SQL\nmax_allowed_packet=4M\n#\u540c\u4e00\u4e3b\u673a\u6700\u5927\u8fde\u7eed\u8bf7\u6c42\u9519\u8bef\u6b21\u6570\uff0c\u5982\u679c\u8fd8\u6ca1\u6210\u529f\u5efa\u7acb\u8fde\u63a5\uff0cmysql\u670d\u52a1\u5668\u4f1a\u7ec4\u7ec7\u8fd9\u53f0\u4e3b\u673a\u540e\u7eed\u7684\u6240\u6709\u8bf7\u6c42\nmax_connect_errors=100\n#\u9650\u5236mysqld\u80fd\u6253\u5f00\u6587\u4ef6\u7684\u6700\u5927\u6570\nopen_files_limit=4161\n#\u4e00\u4e2aconnection\u7ea7\u53c2\u6570\uff0c\u5728\u6bcf\u4e2aconnection\u7b2c\u4e00\u6b21\u9700\u8981\u4f7f\u7528\u8fd9\u4e2abuffer\u7684\u65f6\u5019\uff0c\u4e00\u6b21\u6027\u5206\u914d\u8bbe\u7f6e\u7684\u5185\u5b58\nsort_buffer_size=256K\n#\u5c31\u662f\u63a7\u5236\u603bfrm\u6587\u4ef6\u7684\u6570\u91cf\uff0c\u8fd8\u662f\u4e2ahash\u8868\uff0c\u5185\u90e8\u7ef4\u62a4\u3002\u5982\u679c\u6253\u5f00\u7684\u8868\u5b9e\u4f8b\u7684\u6570\u91cf\u8d85\u8fc7\u4e86table_definition_cache\u8bbe\u7f6e\uff0cLRU\u673a\u5236\u5c06\u5f00\u59cb\u6807\u8bb0\u8868\u5b9e\u4f8b\u4ee5\u8fdb\u884c\u6e05\u9664\uff0c\u5e76\u6700\u7ec8\u5c06\u5b83\u4eec\u4ece\u6570\u636e\u5b57\u5178\u7f13\u5b58\u4e2d\u5220\u9664\u3002\u7b80\u5355\u901a\u4fd7\u70b9frm\u6587\u4ef6\u6709\u591a\u5c11\uff0c\u5c31\u8bbe\u7f6e\u591a\u5c11\u4e86\ntable_definition_cache=1400\n#\u6307\u5b9a\u57fa\u4e8e\u884c\u7684\u4e8c\u8fdb\u5236\u65e5\u5fd7\u4e8b\u4ef6\u7684\u6700\u5927\u5927\u5c0f\nbinlog_row_event_max_size=8K\n#\u672c\u53c2\u6570\u7528\u4e8e\u4e3b\u4ece\u5e93\u4e2d\u914d\u7f6e\u4ece\u5e93\u5927\u4e8e0\u4f5c\u7528\u4e3a\u6bcf\u4e2a\u547d\u4ee4\u4e4b\u540e\u5237\u76d8\uff0c\u5c0f\u4e0e0\u4f5c\u4e3a\u4e3a\u6c38\u4e0d\u5237\u76d8\uff0c\u9ed8\u8ba4\u5747\u4e3a1000\nsync_master_info=10000\n#\u8fd9\u4e2a\u53c2\u6570\u548csync_binlog\u662f\u4e00\u6837\u7684\uff0c\u5f53\u8bbe\u7f6e\u4e3a1\u65f6\uff0cslave\u7684I/O\u7ebf\u7a0b\u6bcf\u6b21\u63a5\u6536\u5230master\u53d1\u9001\u8fc7\u6765\u7684binlog\u65e5\u5fd7\u90fd\u8981\u5199\u5165\u7cfb\u7edf\u7f13\u51b2\u533a\uff0c\u7136\u540e\u5237\u5165relay log\u4e2d\u7ee7\u65e5\u5fd7\u91cc\uff0c\u8fd9\u6837\u662f\u6700\u5b89\u5168\u7684\uff0c\u56e0\u4e3a\u5728\u5d29\u6e83\u7684\u65f6\u5019\uff0c\u4f60\u6700\u591a\u4f1a\u4e22\u5931\u4e00\u4e2a\u4e8b\u52a1\uff0c\u4f46\u4f1a\u9020\u6210\u78c1\u76d8\u7684\u5927\u91cfI/O\u3002\u5f53\u8bbe\u7f6e\u4e3a0\u65f6\uff0c\u5e76\u4e0d\u662f\u9a6c\u4e0a\u5c31\u5237\u5165\u4e2d\u7ee7\u65e5\u5fd7\u91cc\uff0c\u800c\u662f\u7531\u64cd\u4f5c\u7cfb\u7edf\u51b3\u5b9a\u4f55\u65f6\u6765\u5199\u5165\uff0c\u867d\u7136\u5b89\u5168\u6027\u964d\u4f4e\u4e86\uff0c\u4f46\u51cf\u5c11\u4e86\u5927\u91cf\u7684\u78c1\u76d8I/O\u64cd\u4f5c\u3002\u8fd9\u4e2a\u503c\u9ed8\u8ba4\u662f0\uff0c\u53ef\u52a8\u6001\u4fee\u6539\uff0c\u5efa\u8bae\u91c7\u7528\u9ed8\u8ba4\u503c\u3002\nsync_relay_log=10000\n#\u8fd9\u4e2a\u53c2\u6570\u548csync_relay_log\u53c2\u6570\u4e00\u6837\uff0c\u5f53\u8bbe\u7f6e\u4e3a1\u65f6\uff0cslave\u7684I/O\u7ebf\u7a0b\u6bcf\u6b21\u63a5\u6536\u5230master\u53d1\u9001\u8fc7\u6765\u7684binlog\u65e5\u5fd7\u90fd\u8981\u5199\u5165\u7cfb\u7edf\u7f13\u51b2\u533a\uff0c\u7136\u540e\u5237\u5165relay-log.info\u91cc\uff0c\u8fd9\u6837\u662f\u6700\u5b89\u5168\u7684\uff0c\u56e0\u4e3a\u5728\u5d29\u6e83\u7684\u65f6\u5019\uff0c\u4f60\u6700\u591a\u4f1a\u4e22\u5931\u4e00\u4e2a\u4e8b\u52a1\uff0c\u4f46\u4f1a\u9020\u6210\u78c1\u76d8\u7684\u5927\u91cfI/O\u3002\u5f53\u8bbe\u7f6e\u4e3a0\u65f6\uff0c\u5e76\u4e0d\u662f\u9a6c\u4e0a\u5c31\u5237\u5165relay-log.info\u91cc\uff0c\u800c\u662f\u7531\u64cd\u4f5c\u7cfb\u7edf\u51b3\u5b9a\u4f55\u65f6\u6765\u5199\u5165\uff0c\u867d\u7136\u5b89\u5168\u6027\u964d\u4f4e\u4e86\uff0c\u4f46\u51cf\u5c11\u4e86\u5927\u91cf\u7684\u78c1\u76d8I/O\u64cd\u4f5c\u3002\u8fd9\u4e2a\u503c\u9ed8\u8ba4\u662f0\uff0c\u53ef\u52a8\u6001\u4fee\u6539\uff0c\u5efa\u8bae\u91c7\u7528\u9ed8\u8ba4\u503c\nsync_relay_log_info=10000\n#\u53c2\u6570\u4e0d\u53ef\u52a8\u6001\u4fee\u6539\uff0c\u5fc5\u987b\u91cd\u542f\u6570\u636e\u5e93\n#1:\u5b58\u50a8\u5728\u78c1\u76d8\u662f\u5c0f\u5199\uff0c\u6bd4\u8f83\u65f6\u4e0d\u533a\u5206\u5927\u5c0f\u5199\n#2:\u5b58\u50a8\u4e3a\u7ed9\u5b9a\u7684\u5927\u5c0f\u5199\u4f46\u662f\u6bd4\u8f83\u65f6\u662f\u5c0f\u5199\n#0:\u5b58\u50a8\u4e3a\u7ed9\u5b9a\u7684\u5927\u5c0f\u5199\u548c\u6bd4\u8f83\u65f6\u533a\u5206\u5927\u5c0f\u5199\u7684\nlower_case_table_names = 1\n#ONLY_FULL_GROUP_BY\uff1a\u5f52\u4e8eGROUP BY\u805a\u5408\u64cd\u4f5c\uff0c\u5982\u679c\u5728SELECT\u4e2d\u7684\u5217\uff0c\u6ca1\u6709\u5728GROUP BY\u4e2d\u51fa\u73b0\uff0c\u90a3\u4e48\u8fd9\u4e2aSQL\u662f\u4e0d\u5408\u6cd5\u7684\uff0c\u56e0\u4e3a\u5217\u4e0d\u5728GROUP BY\u4ece\u53e5\u4e2d\n#NO_AUTO_VALUE_ON_ZERO\uff1a\u8be5\u503c\u5f71\u54cd\u81ea\u589e\u5e38\u70c8\u7684\u63d2\u5165\u3002\u9ed8\u8ba4\u8bbe\u7f6e\u4e0b\uff0c\u63d2\u51650\u6216\u8005NULL\u4ee3\u8868\u751f\u6210\u4e0b\u4e00\u4e2a\u81ea\u589e\u957f\u503c\u3002\u5982\u679c\u7528\u6237\u5e0c\u671b\u63d2\u5165\u7684\u503c\u4e3a0\uff0c\u800c\u8be5\u5217\u53c8\u662f\u81ea\u589e\u957f\u7684\uff0c\u90a3\u4e48\u8fd9\u4e2a\u9009\u9879\u5c31\u6709\u7528\u4e86\n#STRICT_TRANS_TABLES\uff1a\u5982\u679c\u4e00\u4e2a\u503c\u4e0d\u80fd\u63d2\u5165\u5230\u4e00\u4e2a\u4e8b\u7269\u4e2d\uff0c\u5219\u4e2d\u65ad\u5f53\u524d\u64cd\u4f5c\uff0c\u5bf9\u975e\u4e8b\u7269\u4e0d\u505a\u9650\u5236\n#NO_ZERO_IN_DATE\uff1a\u5728\u4e25\u683c\u6a21\u5f0f\u4e0b\uff0c\u4e0d\u5141\u8bb8\u65e5\u671f\u548c\u6708\u4efd\u4e3a\u96f6\n#NO_ZERO_DATE\uff1amysql\u4e0d\u5141\u8bb8\u63d2\u5165\u96f6\u65e5\u671f\uff0c\u63d2\u5165\u96f6\u65e5\u671f\u4f1a\u629b\u51fa\u9519\u8bef\u800c\u4e0d\u662f\u8b66\u544a\n#ERROR_FOR_DIVISION_BY_ZERO\uff1a\u5728insert\u6216update\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u6570\u636e\u88ab\u6e05\u9664\uff0c\u5219\u4ea7\u751f\u9519\u8bef\u800c\u975e\u8b66\u544a\u3002\u5982\u679c\u672a\u7ed9\u51fa\u8be5\u6a21\u5f0f\uff0c\u90a3\u4e48\u6570\u636e\u88ab\u6e05\u9664\u65f6Mysql\u8fd4\u56deNULL\n#NO_AUTO_CREATE_USER\uff1a\u7981\u6b62GRANT\u521b\u5efa\u5bc6\u7801\u4e3a\u7a7a\u7684\u7528\u6237\n#NO_ENGINE_SUBSTITUTION\uff1a\u5982\u679c\u9700\u8981\u7684\u5b58\u50a8\u5f15\u64ce\u88ab\u7981\u7528\u6216\u672a\u7f16\u8bd1\uff0c\u90a3\u4e48\u629b\u51fa\u9519\u8bef\u3002\u4e0d\u8bbe\u7f6e\u6b64\u503c\u65f6\uff0c\u7528\u9ed8\u8ba4\u7684\u5b58\u50a8\u5f15\u64ce\u66ff\u4ee3\uff0c\u5e76\u629b\u51fa\u4e00\u4e2a\u5f02\u5e38\n#PIPES_AS_CONCAT\uff1a\u5c06\u201c||\u201d\u662f\u4e3a\u5b57\u7b26\u4e32\u7684\u94fe\u63a5\u64cd\u4f5c\u7b26\u800c\u975e\u8fd0\u7b97\u7b26\uff0c\u8fd9\u548cOracle\u6570\u636e\u5e93\u662f\u4e00\u6837\u662f\uff0c\u4e5f\u548c\u5b57\u7b26\u4e32\u7684\u62fc\u63a5\u51fd\u6570Concat\u76f8\u7c7b\u4f3c\n#ANSI_QUOTES\uff1a\u4e0d\u80fd\u7528\u53cc\u5f15\u53f7\u6765\u5f15\u7528\u5b57\u7b26\u4e32\uff0c\u56e0\u4e3a\u5b83\u88ab\u89e3\u91ca\u4e3a\u8bc6\u522b\u7b26\nsql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NOAUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\n')))}k.isMDXComponent=!0}}]);