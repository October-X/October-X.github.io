"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6270],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>k});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),p=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=p(e.components);return a.createElement(s.Provider,{value:n},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(t),d=r,k=u["".concat(s,".").concat(d)]||u[d]||m[d]||o;return t?a.createElement(k,l(l({ref:n},c),{},{components:t})):a.createElement(k,l({ref:n},c))}));function k(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,l=new Array(o);l[0]=d;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i[u]="string"==typeof e?e:r,l[1]=i;for(var p=2;p<o;p++)l[p]=t[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},4806:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var a=t(7462),r=(t(7294),t(3905));const o={},l="\u5176\u4ed6Composition API",i={unversionedId:"vue3/\u5176\u4ed6Composition API",id:"vue3/\u5176\u4ed6Composition API",title:"\u5176\u4ed6Composition API",description:"1.shallowReactive \u4e0e shallowRef",source:"@site/docs/vue3/4.\u5176\u4ed6Composition API.md",sourceDirName:"vue3",slug:"/vue3/\u5176\u4ed6Composition API",permalink:"/docs/vue3/\u5176\u4ed6Composition API",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/vue3/4.\u5176\u4ed6Composition API.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"vue3",previous:{title:"\u5e38\u7528Composition API",permalink:"/docs/vue3/\u5e38\u7528 Composition API"},next:{title:"\u65b0\u7684\u7ec4\u4ef6",permalink:"/docs/vue3/\u65b0\u7684\u7ec4\u4ef6"}},s={},p=[{value:"1.shallowReactive \u4e0e shallowRef",id:"1shallowreactive-\u4e0e-shallowref",level:2},{value:"2.readonly \u4e0e shallowReadonly",id:"2readonly-\u4e0e-shallowreadonly",level:2},{value:"3.toRaw \u4e0e markRaw",id:"3toraw-\u4e0e-markraw",level:2},{value:"4.customRef",id:"4customref",level:2},{value:"5.provide \u4e0e inject",id:"5provide-\u4e0e-inject",level:2},{value:"6.\u54cd\u5e94\u5f0f\u6570\u636e\u7684\u5224\u65ad",id:"6\u54cd\u5e94\u5f0f\u6570\u636e\u7684\u5224\u65ad",level:2}],c={toc:p};function u(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"\u5176\u4ed6composition-api"},"\u5176\u4ed6Composition API"),(0,r.kt)("h2",{id:"1shallowreactive-\u4e0e-shallowref"},"1.shallowReactive \u4e0e shallowRef"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"shallowReactive\uff1a\u53ea\u5904\u7406\u5bf9\u8c61\u6700\u5916\u5c42\u5c5e\u6027\u7684\u54cd\u5e94\u5f0f\uff08\u6d45\u54cd\u5e94\u5f0f\uff09\u3002 "),(0,r.kt)("li",{parentName:"ul"},"shallowRef\uff1a\u53ea\u5904\u7406\u57fa\u672c\u6570\u636e\u7c7b\u578b\u7684\u54cd\u5e94\u5f0f, \u4e0d\u8fdb\u884c\u5bf9\u8c61\u7684\u54cd\u5e94\u5f0f\u5904\u7406\u3002 "),(0,r.kt)("li",{parentName:"ul"},"\u4ec0\u4e48\u65f6\u5019\u4f7f\u7528? ",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u6709\u4e00\u4e2a\u5bf9\u8c61\u6570\u636e\uff0c\u7ed3\u6784\u6bd4\u8f83\u6df1, \u4f46\u53d8\u5316\u65f6\u53ea\u662f\u5916\u5c42\u5c5e\u6027\u53d8\u5316 ===> shallowReactive\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u6709\u4e00\u4e2a\u5bf9\u8c61\u6570\u636e\uff0c\u540e\u7eed\u529f\u80fd\u4e0d\u4f1a\u4fee\u6539\u8be5\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\uff0c\u800c\u662f\u751f\u65b0\u7684\u5bf9\u8c61\u6765\u66ff\u6362 ===> shallowRef\u3002")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <h2>\u5f53\u524d\u7684y\u662f:{{ x.y }}</h2>\n  <button @click=\"x = {y : 888}\">\u70b9\u6211\u66ff\u6362x</button>\n  <button @click=\"x.y++\">\u70b9\u6211y+1</button>\n  <hr/>\n  <h4>{{ person }}</h4>\n  <h2>\u59d3\u540d:{{ name }}</h2>\n  <h2>\u5e74\u9f84:{{ age }}</h2>\n  <h2>\u85aa\u8d44:{{ job.j1.salary }}K</h2>\n  <button @click=\"name = name + '~'\">\u4fee\u6539\u59d3\u540d</button>\n  <button @click=\"age++\">\u589e\u957f\u5e74\u9f84</button>\n  <button @click=\"job.j1.salary++\">\u589e\u957f\u85aa\u8d44</button>\n</template>\n\n<script>\nimport {ref,reactive, toRefs, shallowReactive, shallowRef} from 'vue';\nexport default {\n  name: 'Demo',\n  setup(){\n    //shallowReactive\u53ea\u8003\u8651\u5bf9\u8c61\u7c7b\u578b\u7684\u7b2c\u4e00\u5c42\u6570\u636e\u54cd\u5e94\u5f0f\n    // let person = shallowReactive({\n    //   name: '\u5f20\u4e09',\n    //   age: 18,\n    //   job:{\n    //     j1:{\n    //       salary: 20\n    //     }\n    //   }\n    // });\n\n    let person = reactive({\n      name: '\u5f20\u4e09',\n      age: 18,\n      job:{\n        j1:{\n          salary: 20\n        }\n      }\n    });\n\n    // let x = ref(0);\n\n    //\u4f20\u9012\u57fa\u672c\u7c7b\u578b\u6765\u8bf4,ref\u4e0eshallowRef\u57fa\u672c\u662f\u6ca1\u4ec0\u4e48\u533a\u522b\u7684\n    // let x = shallowRef(0);\n    //\u4f46\u6ce8\u610f\u5bf9\u8c61\u7c7b\u578bshallowRef\u4e0d\u53bb\u5904\u7406\uff0c\u800cref\u5e95\u5c42\u56de\u53bb\u501f\u52a9reactive\u751f\u6210proxy\u5bf9\u8c61(getter/setter)\n    //\u4f46\u6ce8\u610f\u4e0d\u7ba1\u662fshallowR\u8fd8\u662f\u975eshallow, \u7b2c\u4e00\u5c42\u90fd\u662f\u54cd\u5e94\u5f0f\u7684(\u4e0d\u5982\u4e0b\u9762\u7684x\u4f9d\u7136\u662f\u54cd\u5e94\u5f0f\u6570\u636e)\n    let x = shallowRef({ y: 0 });\n\n    console.log(x);\n\n    // let x = ref({ y: 0 })\n\n    return {\n      person,\n      ...toRefs(person),\n      x,\n    };\n\n  }\n}\n<\/script>\n\n<style>\n</style>\n\n\n")),(0,r.kt)("h2",{id:"2readonly-\u4e0e-shallowreadonly"},"2.readonly \u4e0e shallowReadonly"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"readonly: \u8ba9\u4e00\u4e2a\u54cd\u5e94\u5f0f\u6570\u636e\u53d8\u4e3a\u53ea\u8bfb\u7684\uff08\u6df1\u53ea\u8bfb\uff09\u3002"),(0,r.kt)("li",{parentName:"ul"},"shallowReadonly\uff1a\u8ba9\u4e00\u4e2a\u54cd\u5e94\u5f0f\u6570\u636e\u53d8\u4e3a\u53ea\u8bfb\u7684\uff08\u6d45\u53ea\u8bfb\uff09\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5e94\u7528\u573a\u666f: \u4e0d\u5e0c\u671b\u6570\u636e(\u5c24\u5176\u662f\u8fd9\u4e2a\u6570\u636e\u662f\u6765\u81ea\u4e0e\u5176\u4ed6\u7ec4\u4ef6\u65f6)\u88ab\u4fee\u6539\u65f6\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <h2>\u5f53\u524d\u6c42\u548c\u4e3a:{{ sum }}</h2>\n  <button @click=\"sum++\">sum+1</button>\n  <hr/>\n  <h2>\u59d3\u540d:{{ name }}</h2>\n  <h2>\u5e74\u9f84:{{ age }}</h2>\n  <h2>\u85aa\u8d44:{{ job.j1.salary }}K</h2>\n  <button @click=\"name = name + '~'\">\u4fee\u6539\u59d3\u540d</button>\n  <button @click=\"age++\">\u589e\u957f\u5e74\u9f84</button>\n  <button @click=\"job.j1.salary++\">\u589e\u957f\u85aa\u8d44</button>\n</template>\n\n<script>\nimport {ref,reactive, toRefs, readonly, shallowReadonly} from 'vue';\nexport default {\n  name: 'Demo',\n  setup(){\n\n    let sum = ref(0);\n\n    let person = reactive({\n      name: '\u5f20\u4e09',\n      age: 18,\n      job:{\n        j1:{\n          salary: 20\n        }\n      }\n    });\n\n    // person = readonly(person); //\u6b64\u65f6person\u91cc\u9762\u7684\u5c5e\u6027\u503c\u90fd\u4e0d\u5141\u8bb8\u4fee\u6539\n    //person = shallowReadonly(person); //\u7b2c\u4e00\u5c42\u4e0d\u80fd\u6539(name,age), \u4f46j1\u548csalary\u4ecd\u7136\u53ef\u4ee5\u6539\u52a8\n\n    // sum = readonly(sum); //\u540c\u7406\n    // sum = shallowReadonly(sum)\n\n    return {\n      sum,\n      ...toRefs(person),\n    };\n\n  }\n}\n<\/script>\n\n<style>\n</style>\n\n\n")),(0,r.kt)("h2",{id:"3toraw-\u4e0e-markraw"},"3.toRaw \u4e0e markRaw"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"toRaw\uff1a ",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4f5c\u7528\uff1a\u5c06\u4e00\u4e2a\u7531",(0,r.kt)("inlineCode",{parentName:"li"},"reactive"),"\u751f\u6210\u7684",(0,r.kt)("strong",{parentName:"li"},"\u54cd\u5e94\u5f0f\u5bf9\u8c61"),"\u8f6c\u4e3a",(0,r.kt)("strong",{parentName:"li"},"\u666e\u901a\u5bf9\u8c61"),"\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u573a\u666f\uff1a\u7528\u4e8e\u8bfb\u53d6\u54cd\u5e94\u5f0f\u5bf9\u8c61\u5bf9\u5e94\u7684\u666e\u901a\u5bf9\u8c61\uff0c\u5bf9\u8fd9\u4e2a\u666e\u901a\u5bf9\u8c61\u7684\u6240\u6709\u64cd\u4f5c\uff0c\u4e0d\u4f1a\u5f15\u8d77\u9875\u9762\u66f4\u65b0\u3002"))),(0,r.kt)("li",{parentName:"ul"},"markRaw\uff1a ",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u4f5c\u7528\uff1a\u6807\u8bb0\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4f7f\u5176\u6c38\u8fdc\u4e0d\u4f1a\u518d\u6210\u4e3a\u54cd\u5e94\u5f0f\u5bf9\u8c61\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5e94\u7528\u573a\u666f: ",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"\u6709\u4e9b\u503c\u4e0d\u5e94\u88ab\u8bbe\u7f6e\u4e3a\u54cd\u5e94\u5f0f\u7684\uff0c\u4f8b\u5982\u590d\u6742\u7684\u7b2c\u4e09\u65b9\u7c7b\u5e93\u7b49\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u5f53\u6e32\u67d3\u5177\u6709\u4e0d\u53ef\u53d8\u6570\u636e\u6e90\u7684\u5927\u5217\u8868\u65f6\uff0c\u8df3\u8fc7\u54cd\u5e94\u5f0f\u8f6c\u6362\u53ef\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002")))))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <h2>\u5f53\u524d\u6c42\u548c\u4e3a:{{ sum }}</h2>\n  <button @click="sum++">sum+1</button>\n  <hr/>\n  <h2>\u59d3\u540d:{{ name }}</h2>\n  <h2>\u5e74\u9f84:{{ age }}</h2>\n  <h2>\u85aa\u8d44:{{ job.j1.salary }}K</h2>\n  <h3 v-show="person.car">\u5ea7\u9a7e\u4fe1\u606f:{{ person.car }}</h3>\n  <button @click="name = name + \'~\'">\u4fee\u6539\u59d3\u540d</button>\n  <button @click="age++">\u589e\u957f\u5e74\u9f84</button>\n  <button @click="job.j1.salary++">\u589e\u957f\u85aa\u8d44</button>\n  <button @click="showRawPerson">\u8f93\u51fa\u6700\u539f\u59cb\u7684person</button>\n  <button @click="addCar">\u7ed9\u4eba\u6dfb\u52a0\u4e00\u53f0\u8f66</button>\n  <button @click="person.car && (person.car.name +=\'!\') ">\u6362\u8f66\u540d</button>\n  <button @click="changePrice">\u6362\u4ef7\u683c</button>\n</template>\n\n<script>\nimport {markRaw, reactive, ref, toRaw, toRefs} from \'vue\';\n\nexport default {\n  name: \'Demo\',\n  setup(){\n\n    let sum = ref(0);\n\n    let person = reactive({\n      name: \'\u5f20\u4e09\',\n      age: 18,\n      job:{\n        j1:{\n          salary: 20\n        }\n      }\n    });\n\n    //ref reactive(\u54cd\u5e94\u5f0f)\n\n    const showRawPerson = () => {\n       const  p = toRaw(person);\n       // console.log(person); //proxy\u4ee3\u7406\u5bf9\u8c61 Proxy {....}\n       p.age++; //\u6ce8\u610f\u6b64\u65f6\u9875\u9762\u4e0d\u4f1a\u518d\u53d1\u751f\u53d8\u5316\u4e86,\u666e\u666e\u901a\u901a\u7684\u5bf9\u8c61\u4e0d\u662f\u54cd\u5e94\u5f0f\n       console.log(p); //\u539f\u59cb\u5bf9\u8c61\u6570\u636e  {....}\n\n      // const sum  = toRaw(sum);\n      // console.log(sum); //undefined //\u8fd9\u6761\u8def\u8d70\u4e0d\u901a,toRaw\u53ea\u5904\u7406reactive\u5bf9\u8c61\n    }\n\n    const addCar = () => {\n      person.car = markRaw({\n         name: \'benz\',\n         price: 40\n       }); //\u5728\u54cd\u5e94\u5f0f\u7684\u5bf9\u8c61\u8eab\u4e0a\u6dfb\u52a0\u4efb\u4f55\u5c5e\u6027\u90fd\u662f\u54cd\u5e94\u5f0f\u7684\uff0c\u7ecf\u8fc7markRaw\u4e00\u5305\u88c5\u5c31\u53d8\u6210\u6700\u539f\u59cb\u7684\u6570\u636e\u5c31\u4e0d\u4f1a\u518d\u505a\u54cd\u5e94\n    }\n\n\n    const changePrice = () => {\n      person.car?.price && person.car.price++;\n      console.log(person?.car?.price);\n    }\n\n    return {\n      sum,\n      person,\n      ...toRefs(person),\n      showRawPerson,\n      addCar,\n      changePrice\n    };\n\n  }\n}\n<\/script>\n\n<style>\n</style>\n\n\n')),(0,r.kt)("h2",{id:"4customref"},"4.customRef"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4f5c\u7528\uff1a\u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684 ref\uff0c\u5e76\u5bf9\u5176\u4f9d\u8d56\u9879\u8ddf\u8e2a\u548c\u66f4\u65b0\u89e6\u53d1\u8fdb\u884c\u663e\u5f0f\u63a7\u5236\u3002 "),(0,r.kt)("li",{parentName:"ul"},"customRef\u53ef\u4ee5\u3002\u7406\u89e3\u4e3a\u662f\u624b\u52a8\u6321\u7684\u8f66\uff0c\u800c\u9ed8\u8ba4\u7684ref\u662f\u81ea\u52a8\u6321\u7684\u8f66"),(0,r.kt)("li",{parentName:"ul"},"\u5b9e\u73b0\u9632\u6296\u6548\u679c\uff1a ")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n    <input type=\"text\" v-model=\"keyword\">\n    <h3>{{keyword}}</h3>\n</template>\n\n<script>\n    import {ref,customRef} from 'vue'\n    export default {\n        name:'Demo',\n        setup(){\n            // let keyword = ref('hello') //\u4f7f\u7528Vue\u51c6\u5907\u597d\u7684\u5185\u7f6eref\n            //\u81ea\u5b9a\u4e49\u4e00\u4e2amyRef\n            function myRef(value,delay){\n                let timer\n                //\u901a\u8fc7customRef\u53bb\u5b9e\u73b0\u81ea\u5b9a\u4e49\n                return customRef((track,trigger)=>{\n                    return{\n                        get(){\n                            track() //\u544a\u8bc9Vue\u8fd9\u4e2avalue\u503c\u662f\u9700\u8981\u88ab\u201c\u8ffd\u8e2a\u201d\u7684\n                            return value\n                        },\n                        set(newValue){\n                            clearTimeout(timer)\n                            timer = setTimeout(()=>{\n                                value = newValue\n                                trigger() //\u544a\u8bc9Vue\u53bb\u66f4\u65b0\u754c\u9762\n                            },delay)\n                        }\n                    }\n                })\n            }\n            let keyword = myRef('hello',500) //\u4f7f\u7528\u7a0b\u5e8f\u5458\u81ea\u5b9a\u4e49\u7684ref\n            return {\n                keyword\n            }\n        }\n    }\n<\/script>\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  \x3c!--vue3\u7684\u7ec4\u4ef6\u6a21\u7248\u7ed3\u6784\u53ef\u4ee5\u6ca1\u6709\u6839\u6807\u7b7e--\x3e\n  <input v-model=\"keyWord\"/>\n  <h3>{{ keyWord }}</h3>\n</template>\n\n<script>\nimport { ref, customRef} from 'vue';\nexport default {\n  name: 'App',\n  setup(){\n    // let keyWord = ref('hello'); //\u4f7f\u7528vue\u63d0\u4f9b\u7684\u5185\u7f6eref,\n    let keyWord = myRef('hello'); //\u4f7f\u7528\u81ea\u5b9a\u4e49ref\n\n    //\u81ea\u5b9a\u4e49ref(customRef)\n    function myRef(value){\n      return customRef((track, trigger) => {\n         let timer;\n         return {\n           get(){\n              console.log(`\u4ecemyRef\u8fd9\u4e2a\u5bb9\u5668\u8bfb\u53d6\u6570\u636e,data:${value}`);\n              track(); //\u901a\u77e5\u8ffd\u8e2avalue\u7684\u53d8\u5316(\u8ddfgetter\u5546\u91cf\u4e00\u4e0b\u8ba9\u5b83\u660e\u786e\u4f60\u8fd9\u4e2avalue\u662f\u6709\u7528\u7684)\n              return value; //\u8bfb\u53d6\u7684\u65f6\u5019\u5c31\u4f1a\u8c03\u7528get\n           },\n           set(nv){\n             console.log(`myRef\u5bb9\u5668\u4e2d\u7684\u6570\u636e\u88ab\u4fee\u6539,data\u6539\u4e3a${nv}`);\n             clearTimeout(timer);\n             timer = setTimeout(() => {\n               value = nv;\n               trigger(); //trigger\u901a\u77e5vue\u91cd\u65b0\u89e3\u6790\u6a21\u7248 //\u9632\u6296\n             },500);\n           }\n         }\n      });\n    }\n\n    return {\n      keyWord,\n    }\n  }\n}\n<\/script>\n\n<style>\n</style>\n\n")),(0,r.kt)("h2",{id:"5provide-\u4e0e-inject"},"5.provide \u4e0e inject"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221206200555317.png",alt:"image-20221206200555317"})),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221206200602809.png",alt:"image-20221206200602809"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4f5c\u7528\uff1a\u5b9e\u73b0",(0,r.kt)("strong",{parentName:"li"},"\u7956\u4e0e\u540e\u4ee3\u7ec4\u4ef6\u95f4"),"\u901a\u4fe1 \u3002\uff08\u5f53\u7136\u7236\u5b50\u4e4b\u95f4\u4e5f\u53ef\u4ee5\uff0c\u4f46\u662f\u7236\u5b50\u4e4b\u95f4\u8fd8\u662f\u5efa\u8bae\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"li"},"props"),"\uff09"),(0,r.kt)("li",{parentName:"ul"},"\u5957\u8def\uff1a\u7236\u7ec4\u4ef6\u6709\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"li"},"provide")," \u9009\u9879\u6765\u63d0\u4f9b\u6570\u636e\uff0c\u540e\u4ee3\u7ec4\u4ef6\u6709\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"li"},"inject")," \u9009\u9879\u6765\u5f00\u59cb\u4f7f\u7528\u8fd9\u4e9b\u6570\u636e \u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5177\u4f53\u5199\u6cd5\uff1a ")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u7956\u7ec4\u4ef6\u4e2d\uff1a ")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"setup(){\n    ......\n    let car = reactive({name:'\u5954\u9a70',price:'40\u4e07'})\n    provide('car',car)\n    ......\n}\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"\u540e\u4ee3\u7ec4\u4ef6\u4e2d\uff1a ")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"setup(props,context){\n    ......\n    const car = inject('car')\n    return {car}\n    ......\n}\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"/App.vue")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <div class=\"app\">\n    <h2>app(\u7956) {{ name }}---{{ price }}</h2>\n    <Child/>\n  </div>\n</template>\n\n<script>\nimport Child from \"./components/Child\";\nimport {reactive, toRefs, provide} from \"vue\";\nexport default {\n  name: 'App',\n  components: {Child},\n  setup(){\n    let car = reactive({\n      name: 'benz',\n      price: 40\n    });\n    provide('car', car); //\u7ed9\u81ea\u5df1\u7684\u540e\u4ee3\u7ec4\u4ef6\u9012\u6570\u636e \u540e\u4ee3\u90fd\u53ef\u4ee5\n    return {\n      ...toRefs(car)\n    }\n  }\n}\n<\/script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n.app{\n  background: grey;\n  padding: 10px;\n}\n</style>\n\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"/components/child.vue")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <div class="child">\n    <h2>child(\u5b50)</h2>\n    <Son/>\n  </div>\n</template>\n\n<script>\nimport Son from "./Son";\nimport { inject } from "vue";\n\nexport default {\n  name: "Child",\n  components: {Son},\n  setup() {\n    console.log(\'@@@@ Car \', inject(\'car\'))\n  }\n}\n<\/script>\n\n<style scoped>\n   .child{\n     background: skyblue;\n     padding: 10px;\n   }\n</style>\n\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"/components/son.vue")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <div class="son">\n    <h2>son(\u5b59)</h2>\n    <h3>\u4eceapp\u7ec4\u4ef6\u83b7\u53d6\u7684\u6570\u636e:{{ car.name }} --- {{ car.price }}</h3>\n  </div>\n</template>\n\n<script>\nimport { inject } from "vue";\nexport default {\n  name: "Son",\n  setup(){\n    let car = inject(\'car\'); //\u83b7\u53d6\u6570\u636e\n    console.log(car); //\u54cd\u5e94\u5f0f\u6570\u636e\n    return {\n      car\n    }\n  }\n}\n<\/script>\n\n<style scoped>\n  .son{\n    background: orange;\n    padding: 10px;\n  }\n</style>\n\n')),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://cdn.nlark.com/yuque/0/2022/png/26296167/1661999838640-52f541ba-3d5b-4d18-a84b-edcabb9c7eee.png#clientId=u06553b14-da9c-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=306&id=ud90c2f73&margin=%5Bobject%20Object%5D&name=image.png&originHeight=382&originWidth=871&originalType=binary&ratio=1&rotation=0&showTitle=false&size=114863&status=done&style=none&taskId=u3ebd3b28-7515-43b5-8860-4652346ffbc&title=&width=696.8",alt:"image.png"})),(0,r.kt)("h2",{id:"6\u54cd\u5e94\u5f0f\u6570\u636e\u7684\u5224\u65ad"},"6.\u54cd\u5e94\u5f0f\u6570\u636e\u7684\u5224\u65ad"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"isRef: "),"\u68c0\u67e5\u4e00\u4e2a\u503c\u662f\u5426\u4e3a\u4e00\u4e2a ref \u5bf9\u8c61"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"isReactive: "),"\u68c0\u67e5\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662f\u7531 ",(0,r.kt)("inlineCode",{parentName:"li"},"reactive")," \u521b\u5efa\u7684\u54cd\u5e94\u5f0f\u4ee3\u7406"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"isReadonly: "),"\u68c0\u67e5\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662f\u7531 ",(0,r.kt)("inlineCode",{parentName:"li"},"readonly")," \u521b\u5efa\u7684\u53ea\u8bfb\u4ee3\u7406"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"isProxy: "),"\u68c0\u67e5\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662f\u7531 ",(0,r.kt)("inlineCode",{parentName:"li"},"reactive")," \u6216\u8005 ",(0,r.kt)("inlineCode",{parentName:"li"},"readonly")," \u65b9\u6cd5\u521b\u5efa\u7684\u4ee3\u7406")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <div class=\"app\">\n  </div>\n</template>\n\n<script>\nimport {reactive, readonly, ref, toRefs, isRef, isReactive, isReadonly, isProxy} from \"vue\";\nexport default {\n  name: 'App',\n  setup(){\n\n    let car = reactive({\n      name: '\u5b9d\u9a6c',\n      price: 40\n    });\n\n    let sum = ref(0);\n\n    let car2 = readonly(car); ///readonly\u4f9d\u7136\u8fd4\u56de\u4ee3\u7406\u7c7b\u578b\u7684\u5bf9\u8c61\u53ea\u4e0d\u8fc7\u5b83\u4e0d\u80fd\u518d\u6539\u800c\u5df2\n\n    console.log(isRef(sum), isReactive(car), isReadonly(car2), isProxy(car), isProxy(car2), isProxy(sum));\n\n  }\n}\n<\/script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n.app{\n  background: grey;\n  padding: 10px;\n}\n</style>\n\n")))}u.isMDXComponent=!0}}]);