"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[42],{3905:(e,t,l)=>{l.d(t,{Zo:()=>u,kt:()=>g});var a=l(7294);function n(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}function r(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,a)}return l}function s(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?r(Object(l),!0).forEach((function(t){n(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):r(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}function p(e,t){if(null==e)return{};var l,a,n=function(e,t){if(null==e)return{};var l,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)l=r[a],t.indexOf(l)>=0||(n[l]=e[l]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)l=r[a],t.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(e,l)&&(n[l]=e[l])}return n}var i=a.createContext({}),k=function(e){var t=a.useContext(i),l=t;return e&&(l="function"==typeof e?e(t):s(s({},t),e)),l},u=function(e){var t=k(e.components);return a.createElement(i.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},o=a.forwardRef((function(e,t){var l=e.components,n=e.mdxType,r=e.originalType,i=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),m=k(l),o=n,g=m["".concat(i,".").concat(o)]||m[o]||d[o]||r;return l?a.createElement(g,s(s({ref:t},u),{},{components:l})):a.createElement(g,s({ref:t},u))}));function g(e,t){var l=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=l.length,s=new Array(r);s[0]=o;var p={};for(var i in t)hasOwnProperty.call(t,i)&&(p[i]=t[i]);p.originalType=e,p[m]="string"==typeof e?e:n,s[1]=p;for(var k=2;k<r;k++)s[k]=l[k];return a.createElement.apply(null,s)}return a.createElement.apply(null,l)}o.displayName="MDXCreateElement"},5458:(e,t,l)=>{l.r(t),l.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>m,frontMatter:()=>r,metadata:()=>p,toc:()=>k});var a=l(7462),n=(l(7294),l(3905));const r={},s="4.Redis",p={unversionedId:"Java/\u6846\u67b6/Redis",id:"Java/\u6846\u67b6/Redis",title:"4.Redis",description:"\u8bfe\u7a0b\u76ee\u6807",source:"@site/docs/Java/6.\u6846\u67b6/4.Redis.md",sourceDirName:"Java/6.\u6846\u67b6",slug:"/Java/\u6846\u67b6/Redis",permalink:"/docs/Java/\u6846\u67b6/Redis",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Java/6.\u6846\u67b6/4.Redis.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"Java",previous:{title:"3.SpringMVC",permalink:"/docs/Java/\u6846\u67b6/SpringMVC"},next:{title:"5.SSM\u9879\u76ee",permalink:"/docs/Java/\u6846\u67b6/SSM\u9879\u76ee"}},i={},k=[{value:"\u7b2c\u4e00\u7ae0 NoSQL\u6570\u636e\u5e93\u53d1\u5c55\u5386\u53f2\u7b80\u4ecb",id:"\u7b2c\u4e00\u7ae0-nosql\u6570\u636e\u5e93\u53d1\u5c55\u5386\u53f2\u7b80\u4ecb",level:2},{value:"1\u3001 Web\u7684\u5386\u53f2\u53d1\u5c55\u5386\u7a0b",id:"1-web\u7684\u5386\u53f2\u53d1\u5c55\u5386\u7a0b",level:3},{value:"2\u3001\u4ec0\u4e48\u662fNoSQL",id:"2\u4ec0\u4e48\u662fnosql",level:3},{value:"3\u3001NoSQL\u7684\u7279\u70b9 \u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u8865\u5145",id:"3nosql\u7684\u7279\u70b9-\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u8865\u5145",level:3},{value:"4\u3001NoSQL\u6570\u636e\u5e93",id:"4nosql\u6570\u636e\u5e93",level:3},{value:"\u7b2c\u4e8c\u7ae0 Redis\u4ecb\u7ecd",id:"\u7b2c\u4e8c\u7ae0-redis\u4ecb\u7ecd",level:2},{value:"1\u3001Redis\u7684\u57fa\u672c\u4ecb\u7ecd",id:"1redis\u7684\u57fa\u672c\u4ecb\u7ecd",level:3},{value:"2\u3001Redis\u7684\u5e94\u7528\u573a\u666f",id:"2redis\u7684\u5e94\u7528\u573a\u666f",level:3},{value:"2.1 \u53d6\u6700\u65b0N\u4e2a\u6570\u636e\u7684\u64cd\u4f5c",id:"21-\u53d6\u6700\u65b0n\u4e2a\u6570\u636e\u7684\u64cd\u4f5c",level:4},{value:"2.2.\u6392\u884c\u699c\u5e94\u7528\uff0c\u53d6TOP N\u64cd\u4f5c",id:"22\u6392\u884c\u699c\u5e94\u7528\u53d6top-n\u64cd\u4f5c",level:4},{value:"2.3\u9700\u8981\u7cbe\u51c6\u8bbe\u5b9a\u8fc7\u671f\u65f6\u95f4\u7684\u5e94\u7528",id:"23\u9700\u8981\u7cbe\u51c6\u8bbe\u5b9a\u8fc7\u671f\u65f6\u95f4\u7684\u5e94\u7528",level:4},{value:"2.4\u8ba1\u6570\u5668\u5e94\u7528",id:"24\u8ba1\u6570\u5668\u5e94\u7528",level:4},{value:"2.5Uniq\u64cd\u4f5c\uff0c\u83b7\u53d6\u67d0\u6bb5\u65f6\u95f4\u6240\u6709\u6570\u636e\u6392\u91cd\u503c",id:"25uniq\u64cd\u4f5c\u83b7\u53d6\u67d0\u6bb5\u65f6\u95f4\u6240\u6709\u6570\u636e\u6392\u91cd\u503c",level:4},{value:"2.6\u5b9e\u65f6\u7cfb\u7edf\uff0c\u53cd\u5783\u573e\u7cfb\u7edf",id:"26\u5b9e\u65f6\u7cfb\u7edf\u53cd\u5783\u573e\u7cfb\u7edf",level:4},{value:"2.7\u7f13\u5b58",id:"27\u7f13\u5b58",level:4},{value:"3\u3001Redis\u7684\u7279\u70b9",id:"3redis\u7684\u7279\u70b9",level:3},{value:"\u7b2c\u4e09\u7ae0 Redis\u5355\u673a\u73af\u5883\u5b89\u88c5",id:"\u7b2c\u4e09\u7ae0-redis\u5355\u673a\u73af\u5883\u5b89\u88c5",level:2},{value:"1\u3001Windows\u7248Redis\u5b89\u88c5\uff08\u4e86\u89e3\uff09",id:"1windows\u7248redis\u5b89\u88c5\u4e86\u89e3",level:3},{value:"2\u3001Linux\u7248Redis\u5b89\u88c5(\u8fd0\u7ef4)",id:"2linux\u7248redis\u5b89\u88c5\u8fd0\u7ef4",level:3},{value:"2.1 \u4e0b\u8f7dredis\u5b89\u88c5\u5305",id:"21-\u4e0b\u8f7dredis\u5b89\u88c5\u5305",level:4},{value:"2.2 \u89e3\u538bredis\u538b\u7f29\u5305\u5230\u6307\u5b9a\u76ee\u5f55",id:"22-\u89e3\u538bredis\u538b\u7f29\u5305\u5230\u6307\u5b9a\u76ee\u5f55",level:4},{value:"2.3 \u5b89\u88c5C\u7a0b\u5e8f\u8fd0\u884c\u73af\u5883",id:"23-\u5b89\u88c5c\u7a0b\u5e8f\u8fd0\u884c\u73af\u5883",level:4},{value:"2.4 \u5b89\u88c5\u8f83\u65b0\u7248\u672c\u7684tcl",id:"24-\u5b89\u88c5\u8f83\u65b0\u7248\u672c\u7684tcl",level:4},{value:"2.5 \u7f16\u8bd1redis",id:"25-\u7f16\u8bd1redis",level:4},{value:"2.6 \u542f\u52a8redis",id:"26-\u542f\u52a8redis",level:4},{value:"2.7 \u5173\u95edredis",id:"27-\u5173\u95edredis",level:4},{value:"2.8 \u8fde\u63a5redis\u5ba2\u6237\u7aef",id:"28-\u8fde\u63a5redis\u5ba2\u6237\u7aef",level:4},{value:"3\u3001Redis Desktop Manager",id:"3redis-desktop-manager",level:3},{value:"\u7b2c\u56db\u7ae0 Redis\u7684\u6570\u636e\u7c7b\u578b",id:"\u7b2c\u56db\u7ae0-redis\u7684\u6570\u636e\u7c7b\u578b",level:2},{value:"1\u3001\u5bf9\u5b57\u7b26\u4e32string\u7684\u64cd\u4f5c",id:"1\u5bf9\u5b57\u7b26\u4e32string\u7684\u64cd\u4f5c",level:3},{value:"2\u3001\u5bf9hash\u5217\u8868\u7684\u64cd\u4f5c",id:"2\u5bf9hash\u5217\u8868\u7684\u64cd\u4f5c",level:3},{value:"3\u3001\u5bf9list\u5217\u8868\u7684\u64cd\u4f5c",id:"3\u5bf9list\u5217\u8868\u7684\u64cd\u4f5c",level:3},{value:"4\u3001\u5bf9set\u96c6\u5408\u7684\u64cd\u4f5c",id:"4\u5bf9set\u96c6\u5408\u7684\u64cd\u4f5c",level:3},{value:"5\u3001\u5bf9key\u7684\u64cd\u4f5c",id:"5\u5bf9key\u7684\u64cd\u4f5c",level:3},{value:"6\u3001\u5bf9ZSet\u7684\u64cd\u4f5c-\u91cd\u8981\uff08\u70ed\u641c\uff09",id:"6\u5bf9zset\u7684\u64cd\u4f5c-\u91cd\u8981\u70ed\u641c",level:3},{value:"7\u3001\u5bf9\u4f4d\u56feBitMaps\u7684\u64cd\u4f5c",id:"7\u5bf9\u4f4d\u56febitmaps\u7684\u64cd\u4f5c",level:3},{value:"7.1 \u8bbe\u7f6e\u503c",id:"71-\u8bbe\u7f6e\u503c",level:4},{value:"7.2 \u83b7\u53d6\u503c",id:"72-\u83b7\u53d6\u503c",level:4},{value:"7.3 \u83b7\u53d6Bitmaps\u6307\u5b9a\u8303\u56f4\u503c\u4e3a1\u7684\u4e2a\u6570",id:"73-\u83b7\u53d6bitmaps\u6307\u5b9a\u8303\u56f4\u503c\u4e3a1\u7684\u4e2a\u6570",level:4},{value:"7.4 Bitmaps\u95f4\u7684\u8fd0\u7b97",id:"74-bitmaps\u95f4\u7684\u8fd0\u7b97",level:4},{value:"8\u3001\u5bf9HyperLogLog\u7ed3\u6784\u7684\u64cd\u4f5c",id:"8\u5bf9hyperloglog\u7ed3\u6784\u7684\u64cd\u4f5c",level:3},{value:"8.1 \u5e94\u7528\u573a\u666f",id:"81-\u5e94\u7528\u573a\u666f",level:4},{value:"8.2 UV\u8ba1\u7b97\u793a\u4f8b",id:"82-uv\u8ba1\u7b97\u793a\u4f8b",level:4},{value:"8.3 HyperLogLog\u4e3a\u4ec0\u4e48\u9002\u5408\u505a\u5927\u91cf\u6570\u636e\u7684\u7edf\u8ba1",id:"83-hyperloglog\u4e3a\u4ec0\u4e48\u9002\u5408\u505a\u5927\u91cf\u6570\u636e\u7684\u7edf\u8ba1",level:4},{value:"\u7b2c\u4e94\u7ae0 Redis Java API\u64cd\u4f5c",id:"\u7b2c\u4e94\u7ae0-redis-java-api\u64cd\u4f5c",level:2},{value:"1\u3001\u521b\u5efamaven\u5de5\u7a0b\u5e76\u5bfc\u5165\u4f9d\u8d56",id:"1\u521b\u5efamaven\u5de5\u7a0b\u5e76\u5bfc\u5165\u4f9d\u8d56",level:3},{value:"1.1 \u521b\u5efaMaven\u5de5\u7a0b",id:"11-\u521b\u5efamaven\u5de5\u7a0b",level:4},{value:"1.2 \u5bfc\u5165POM\u4f9d\u8d56",id:"12-\u5bfc\u5165pom\u4f9d\u8d56",level:4},{value:"2\u3001\u521b\u5efa\u5305\u7ed3\u6784\u548c\u7c7b",id:"2\u521b\u5efa\u5305\u7ed3\u6784\u548c\u7c7b",level:3},{value:"3\u3001\u8fde\u63a5\u4ee5\u53ca\u5173\u95edredis\u5ba2\u6237\u7aef",id:"3\u8fde\u63a5\u4ee5\u53ca\u5173\u95edredis\u5ba2\u6237\u7aef",level:3},{value:"4\u3001\u64cd\u4f5cstring\u7c7b\u578b\u6570\u636e",id:"4\u64cd\u4f5cstring\u7c7b\u578b\u6570\u636e",level:3},{value:"5\u3001\u64cd\u4f5chash\u5217\u8868\u7c7b\u578b\u6570\u636e",id:"5\u64cd\u4f5chash\u5217\u8868\u7c7b\u578b\u6570\u636e",level:3},{value:"6\u3001\u64cd\u4f5clist\u7c7b\u578b\u6570\u636e",id:"6\u64cd\u4f5clist\u7c7b\u578b\u6570\u636e",level:3},{value:"7\u3001\u64cd\u4f5cset\u7c7b\u578b\u7684\u6570\u636e",id:"7\u64cd\u4f5cset\u7c7b\u578b\u7684\u6570\u636e",level:3},{value:"\u7b2c\u4e00\u7ae0 Redis\u7684\u6301\u4e45\u5316",id:"\u7b2c\u4e00\u7ae0-redis\u7684\u6301\u4e45\u5316",level:2},{value:"1\u3001RDB\u6301\u4e45\u5316\u65b9\u6848",id:"1rdb\u6301\u4e45\u5316\u65b9\u6848",level:3},{value:"1.1 \u4ecb\u7ecd",id:"11-\u4ecb\u7ecd",level:4},{value:"1.2 RDB\u65b9\u6848\u4f18\u70b9",id:"12-rdb\u65b9\u6848\u4f18\u70b9",level:4},{value:"1.3 RDB\u65b9\u6848\u7f3a\u70b9",id:"13-rdb\u65b9\u6848\u7f3a\u70b9",level:4},{value:"1.4 RDB\u914d\u7f6e",id:"14-rdb\u914d\u7f6e",level:4},{value:"2\u3001AOF\u6301\u4e45\u5316\u65b9\u6848",id:"2aof\u6301\u4e45\u5316\u65b9\u6848",level:3},{value:"2.1 \u4ecb\u7ecd",id:"21-\u4ecb\u7ecd",level:4},{value:"2.2 \u5f00\u542fAOF",id:"22-\u5f00\u542faof",level:4},{value:"2.3 \u914d\u7f6eAOF",id:"23-\u914d\u7f6eaof",level:4},{value:"2.4 AOF rewrite",id:"24-aof-rewrite",level:4},{value:"2.5 AOF\u4f18\u70b9",id:"25-aof\u4f18\u70b9",level:4},{value:"2.6 AOF\u7684\u7f3a\u70b9",id:"26-aof\u7684\u7f3a\u70b9",level:4},{value:"3\u3001RDB or AOF",id:"3rdb-or-aof",level:3},{value:"\u7b2c\u4e8c\u7ae0 Redis \u4e8b\u52a1",id:"\u7b2c\u4e8c\u7ae0-redis-\u4e8b\u52a1",level:2},{value:"1\u3001Redis\u4e8b\u52a1\u7b80\u4ecb",id:"1redis\u4e8b\u52a1\u7b80\u4ecb",level:3},{value:"2\u3001 Redis\u4e8b\u52a1\u6f14\u793a",id:"2-redis\u4e8b\u52a1\u6f14\u793a",level:3},{value:"3\u3001\u4e3a\u4ec0\u4e48Redis\u4e0d\u652f\u6301\u4e8b\u52a1\u56de\u6eda\uff1f",id:"3\u4e3a\u4ec0\u4e48redis\u4e0d\u652f\u6301\u4e8b\u52a1\u56de\u6eda",level:3},{value:"\u7b2c\u4e09\u7ae0 \u6570\u636e\u5220\u9664\u4e0e\u6dd8\u6c70\u7b56\u7565",id:"\u7b2c\u4e09\u7ae0-\u6570\u636e\u5220\u9664\u4e0e\u6dd8\u6c70\u7b56\u7565",level:2},{value:"1\u3001\u8fc7\u671f\u6570\u636e",id:"1\u8fc7\u671f\u6570\u636e",level:3},{value:"<strong>1.1 Redis\u4e2d\u7684\u6570\u636e\u7279\u5f81</strong>",id:"11-redis\u4e2d\u7684\u6570\u636e\u7279\u5f81",level:4},{value:"1.2 \u65f6\u6548\u6027\u6570\u636e\u7684\u5b58\u50a8\u7ed3\u6784",id:"12-\u65f6\u6548\u6027\u6570\u636e\u7684\u5b58\u50a8\u7ed3\u6784",level:4},{value:"2\u3001\u6570\u636e\u5220\u9664\u7b56\u7565",id:"2\u6570\u636e\u5220\u9664\u7b56\u7565",level:3},{value:"2.1 \u6570\u636e\u5220\u9664\u7b56\u7565\u7684\u76ee\u6807",id:"21-\u6570\u636e\u5220\u9664\u7b56\u7565\u7684\u76ee\u6807",level:4},{value:"2.2 \u5b9a\u65f6\u5220\u9664",id:"22-\u5b9a\u65f6\u5220\u9664",level:4},{value:"2.3 \u60f0\u6027\u5220\u9664",id:"23-\u60f0\u6027\u5220\u9664",level:4},{value:"2.4 \u5b9a\u671f\u5220\u9664",id:"24-\u5b9a\u671f\u5220\u9664",level:4},{value:"2.5 \u5220\u9664\u7b56\u7565\u5bf9\u6bd4",id:"25-\u5220\u9664\u7b56\u7565\u5bf9\u6bd4",level:4},{value:"3\u3001\u6570\u636e\u6dd8\u6c70\u7b56\u7565\uff08\u9010\u51fa\u7b97\u6cd5\uff09-\u9762\u8bd5",id:"3\u6570\u636e\u6dd8\u6c70\u7b56\u7565\u9010\u51fa\u7b97\u6cd5-\u9762\u8bd5",level:3},{value:"3.1 \u6dd8\u6c70\u7b56\u7565\u6982\u8ff0",id:"31-\u6dd8\u6c70\u7b56\u7565\u6982\u8ff0",level:4},{value:"3.2 \u7b56\u7565\u914d\u7f6e",id:"32-\u7b56\u7565\u914d\u7f6e",level:4},{value:"\u7b2c\u56db\u7ae0 Redis\u7684\u4e3b\u4ece\u590d\u5236\u67b6\u6784",id:"\u7b2c\u56db\u7ae0-redis\u7684\u4e3b\u4ece\u590d\u5236\u67b6\u6784",level:2},{value:"1\u3001\u4e3b\u4ece\u590d\u5236\u7b80\u4ecb",id:"1\u4e3b\u4ece\u590d\u5236\u7b80\u4ecb",level:3},{value:"1.1 \u9ad8\u53ef\u7528",id:"11-\u9ad8\u53ef\u7528",level:4},{value:"1.2 \u4e3b\u4ece\u590d\u5236\u6982\u5ff5",id:"12-\u4e3b\u4ece\u590d\u5236\u6982\u5ff5",level:4},{value:"1.3 \u4e3b\u4ece\u590d\u5236\u7684\u4f5c\u7528",id:"13-\u4e3b\u4ece\u590d\u5236\u7684\u4f5c\u7528",level:4},{value:"2\u3001\u4e3b\u4ece\u590d\u5236\u5de5\u4f5c\u6d41\u7a0b",id:"2\u4e3b\u4ece\u590d\u5236\u5de5\u4f5c\u6d41\u7a0b",level:3},{value:"2.1 \u4e3b\u4ece\u590d\u5236\u7684\u5de5\u4f5c\u6d41\u7a0b\uff08\u4e09\u4e2a\u9636\u6bb5\uff09",id:"21-\u4e3b\u4ece\u590d\u5236\u7684\u5de5\u4f5c\u6d41\u7a0b\u4e09\u4e2a\u9636\u6bb5",level:4},{value:"2.2 \u6d41\u7a0b\u66f4\u65b0(\u5168\u91cf\u590d\u5236/\u90e8\u5206\u590d\u5236)",id:"22-\u6d41\u7a0b\u66f4\u65b0\u5168\u91cf\u590d\u5236\u90e8\u5206\u590d\u5236",level:4},{value:"2.3 \u5fc3\u8df3\u673a\u5236",id:"23-\u5fc3\u8df3\u673a\u5236",level:4},{value:"3\u3001\u642d\u5efa\u4e3b\u4ece\u67b6\u6784",id:"3\u642d\u5efa\u4e3b\u4ece\u67b6\u6784",level:3},{value:"3.1\u80cc\u666f",id:"31\u80cc\u666f",level:4},{value:"3.2 \u64cd\u4f5c",id:"32-\u64cd\u4f5c",level:4},{value:"4\u3001\u4e3b\u4ece\u590d\u5236\u5e38\u89c1\u95ee\u9898-\u67b6\u6784\u5e08",id:"4\u4e3b\u4ece\u590d\u5236\u5e38\u89c1\u95ee\u9898-\u67b6\u6784\u5e08",level:3},{value:"4.1 \u9891\u7e41\u7684\u5168\u91cf\u590d\u5236",id:"41-\u9891\u7e41\u7684\u5168\u91cf\u590d\u5236",level:4},{value:"4.2 \u9891\u7e41\u7684\u7f51\u7edc\u4e2d\u65ad",id:"42-\u9891\u7e41\u7684\u7f51\u7edc\u4e2d\u65ad",level:4},{value:"4.3 \u6570\u636e\u4e0d\u4e00\u81f4",id:"43-\u6570\u636e\u4e0d\u4e00\u81f4",level:4},{value:"\u7b2c\u4e94\u7ae0 Redis\u4e2d\u7684Sentinel\u67b6\u6784",id:"\u7b2c\u4e94\u7ae0-redis\u4e2d\u7684sentinel\u67b6\u6784",level:2},{value:"1\u3001\u54e8\u5175\u7b80\u4ecb",id:"1\u54e8\u5175\u7b80\u4ecb",level:3},{value:"1.1 \u54e8\u5175\u6982\u5ff5",id:"11-\u54e8\u5175\u6982\u5ff5",level:4},{value:"1.2 \u54e8\u5175\u4f5c\u7528",id:"12-\u54e8\u5175\u4f5c\u7528",level:4},{value:"2\u3001\u542f\u7528\u54e8\u5175",id:"2\u542f\u7528\u54e8\u5175",level:3},{value:"3\u3001\u642d\u5efa\u54e8\u5175",id:"3\u642d\u5efa\u54e8\u5175",level:3},{value:"4\u3001java\u4ee3\u7801\u94fe\u63a5sentinel",id:"4java\u4ee3\u7801\u94fe\u63a5sentinel",level:3},{value:"4.1 \u539f\u751f",id:"41-\u539f\u751f",level:4},{value:"4.2 springboot\uff08\u540e\u8fb9\u5b66\u4e86springboot\u5c31\u77e5\u9053\u4e86\uff09",id:"42-springboot\u540e\u8fb9\u5b66\u4e86springboot\u5c31\u77e5\u9053\u4e86",level:4},{value:"5\u3001\u54e8\u5175\u5de5\u4f5c\u539f\u7406-\u9762\u8bd5",id:"5\u54e8\u5175\u5de5\u4f5c\u539f\u7406-\u9762\u8bd5",level:3},{value:"5.1 \u76d1\u63a7",id:"51-\u76d1\u63a7",level:4},{value:"5.2 \u901a\u77e5",id:"52-\u901a\u77e5",level:4},{value:"5.3 \u6545\u969c\u8f6c\u79fb",id:"53-\u6545\u969c\u8f6c\u79fb",level:4},{value:"\u7b2c\u516d\u7ae0 Redis cluster\u96c6\u7fa4",id:"\u7b2c\u516d\u7ae0-redis-cluster\u96c6\u7fa4",level:2},{value:"1\u3001\u96c6\u7fa4\u7b80\u4ecb",id:"1\u96c6\u7fa4\u7b80\u4ecb",level:3},{value:"2\u3001Cluster\u96c6\u7fa4\u7ed3\u6784\u8bbe\u8ba1",id:"2cluster\u96c6\u7fa4\u7ed3\u6784\u8bbe\u8ba1",level:3},{value:"3\u3001Cluster\u96c6\u7fa4\u7ed3\u6784\u642d\u5efa",id:"3cluster\u96c6\u7fa4\u7ed3\u6784\u642d\u5efa",level:3},{value:"4\u3001java\u64cd\u4f5c",id:"4java\u64cd\u4f5c",level:3},{value:"\u7b2c\u4e03\u7ae0 Redis\u9ad8\u9891\u9762\u8bd5\u9898",id:"\u7b2c\u4e03\u7ae0-redis\u9ad8\u9891\u9762\u8bd5\u9898",level:2},{value:"1\u3001\u7f13\u5b58\u9884\u70ed",id:"1\u7f13\u5b58\u9884\u70ed",level:3},{value:"2\u3001\u7f13\u5b58\u96ea\u5d29",id:"2\u7f13\u5b58\u96ea\u5d29",level:3},{value:"3\u3001\u7f13\u5b58\u51fb\u7a7f",id:"3\u7f13\u5b58\u51fb\u7a7f",level:3},{value:"4\u3001\u7f13\u5b58\u7a7f\u900f",id:"4\u7f13\u5b58\u7a7f\u900f",level:3},{value:"5\u3001Redis\u7684\u547d\u540d\u89c4\u8303",id:"5redis\u7684\u547d\u540d\u89c4\u8303",level:3},{value:"6\u3001\u6027\u80fd\u6307\u6807\u76d1\u63a7",id:"6\u6027\u80fd\u6307\u6807\u76d1\u63a7",level:3},{value:"\u7b2c\u516b\u7ae0 \u5e38\u89c1\u95ee\u9898",id:"\u7b2c\u516b\u7ae0-\u5e38\u89c1\u95ee\u9898",level:2}],u={toc:k};function m(e){let{components:t,...l}=e;return(0,n.kt)("wrapper",(0,a.Z)({},u,l,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"4redis"},"4.Redis"),(0,n.kt)("h1",{id:"redis\u57fa\u7840"},"Redis\u57fa\u7840"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u8bfe\u7a0b\u76ee\u6807")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u80fd\u591f\u638c\u63e1Redis\u4e0d\u540c\u6570\u636e\u7c7b\u578b\u64cd\u4f5c"),(0,n.kt)("li",{parentName:"ul"},"\u80fd\u591f\u4f7f\u7528Java API\u64cd\u4f5cRedis"),(0,n.kt)("li",{parentName:"ul"},"\u80fd\u591f\u7406\u89e3Redis\u7684\u4e24\u79cd\u6301\u4e45\u5316\u65b9\u5f0f")),(0,n.kt)("h2",{id:"\u7b2c\u4e00\u7ae0-nosql\u6570\u636e\u5e93\u53d1\u5c55\u5386\u53f2\u7b80\u4ecb"},"\u7b2c\u4e00\u7ae0 NoSQL\u6570\u636e\u5e93\u53d1\u5c55\u5386\u53f2\u7b80\u4ecb"),(0,n.kt)("h3",{id:"1-web\u7684\u5386\u53f2\u53d1\u5c55\u5386\u7a0b"},"1\u3001 Web\u7684\u5386\u53f2\u53d1\u5c55\u5386\u7a0b"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"web1.0\u65f6\u4ee3\u7b80\u4ecb")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"web 1.0\u662f\u4ee5\u7f16\u8f91\u4e3a\u7279\u5f81\uff0c\u7f51\u7ad9\u63d0\u4f9b\u7ed9\u7528\u6237\u7684\u5185\u5bb9\u662f\u7f51\u7ad9\u7f16\u8f91\u8fdb\u884c\u7f16\u8f91\u5904\u7406\u540e\u63d0\u4f9b\u7684\uff0c\u7528\u6237\u9605\u8bfb\u7f51\u7ad9\u63d0\u4f9b\u7684\u5185\u5bb9"),(0,n.kt)("li",{parentName:"ul"},"\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u7f51\u7ad9\u5230\u7528\u6237\u7684",(0,n.kt)("strong",{parentName:"li"},"\u5355\u5411\u884c\u4e3a")),(0,n.kt)("li",{parentName:"ul"},"web1.0\u65f6\u4ee3\u7684\u4ee3\u8868\u7ad9\u70b9\u4e3a\u65b0\u6d6a\uff0c\u641c\u72d0\uff0c\u7f51\u6613\u4e09\u5927\u95e8\u6237")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220221094917807-b34acc5d.png",alt:"image-20220221094917807"}),"image-20220221094917807"),(0,n.kt)("p",null,"\u6027\u80fd\u8981\u6c42\uff1a\u57fa\u672c\u4e0a\u5c31\u662f\u4e00\u4e9b\u7b80\u5355\u7684\u9759\u6001\u9875\u9762\u6e32\u67d3\uff0c\u4e0d\u4f1a\u6d89\u53ca\u592a\u591a\u590d\u6742\u4e1a\u52a1\u903b\u8f91\uff0c\u529f\u80fd\u7b80\u5355\u5355\u4e00\uff0c\u57fa\u672c\u4e0a\u670d\u52a1\u5668\u6027\u80fd\u4e0d\u4f1a\u6709\u592a\u5927\u538b\u529b"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220221095144975-8a2c46de.png",alt:"image-20220221095144975"}),"image-20220221095144975"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"web2.0\u65f6\u4ee3\u7b80\u4ecb")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u66f4\u6ce8\u91cd\u7528\u6237\u7684",(0,n.kt)("strong",{parentName:"li"},"\u4ea4\u4e92"),"\u4f5c\u7528\uff0c\u7528\u6237\u65e2\u662f\u7f51\u7ad9\u5185\u5bb9\u7684\u6d88\u8d39\u8005\uff08\u6d4f\u89c8\u8005\uff09\uff0c\u4e5f\u662f\u7f51\u7ad9\u5185\u5bb9\u7684\u5236\u9020\u8005"),(0,n.kt)("li",{parentName:"ul"},"\u52a0\u5f3a\u4e86\u7f51\u7ad9\u4e0e\u7528\u6237\u4e4b\u95f4\u7684",(0,n.kt)("strong",{parentName:"li"},"\u4e92\u52a8"),"\uff0c\u7f51\u7ad9\u5185\u5bb9\u57fa\u4e8e\u7528\u6237\u63d0\u4f9b\uff08\u5fae\u535a\u3001\u5929\u6daf\u793e\u533a\u3001\u81ea\u5a92\u4f53\uff09 \u5927\u6570\u636e\u63a8\u8350"),(0,n.kt)("li",{parentName:"ul"},"\u7f51\u7ad9\u7684\u8bf8\u591a\u529f\u80fd\u4e5f\u7531\u7528\u6237\u53c2\u4e0e\u5efa\u8bbe\uff0c\u5b9e\u73b0\u4e86\u7f51\u7ad9\u4e0e\u7528\u6237\u53cc\u5411\u7684\u4ea4\u6d41\u4e0e\u53c2\u4e0e"),(0,n.kt)("li",{parentName:"ul"},"\u7528\u6237\u5728web2.0\u7f51\u7ad9\u7cfb\u7edf\u5185\u62e5\u6709\u81ea\u5df1\u7684\u6570\u636e\uff0c\u5e76\u5b8c\u5168\u57fa\u4e8eWEB\uff0c\u6240\u6709\u529f\u80fd\u90fd\u80fd\u901a\u8fc7\u6d4f\u89c8\u5668\u5b8c\u6210\u3002")),(0,n.kt)("p",null,"\u6027\u80fd\u8981\u6c42\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u968f\u7740Web2.0\u65f6\u4ee3\u5230\u6765\uff0c\u7528\u6237\u8bbf\u95ee\u91cf\u5927\u5e45\u63d0\u5347\uff0c\u540c\u65f6\u4ea7\u751f\u5927\u91cf\u7528\u6237\u6570\u636e\u3002\u52a0\u4e0a\u540e\u6765\u79fb\u52a8\u8bbe\u5907\u666e\u53ca\uff0c\u6240\u6709\u7684\u4e92\u8054\u7f51\u5e73\u53f0\u90fd\u9762\u4e34\u4e86\u5de8\u5927\u7684\u6027\u80fd\u6311\u6218\u3002",(0,n.kt)("strong",{parentName:"li"},"\u6570\u636e\u5e93\u670d\u52a1\u5668\u538b\u529b\u8d8a\u6765\u8d8a\u5927")),(0,n.kt)("li",{parentName:"ul"},"\u5982\u4f55\u5e94\u5bf9\u6570\u636e\u5e93\u7684\u538b\u529b\u6210\u4e3a\u7684\u5173\u952e\u3002\u4e0d\u7ba1\u4efb\u4f55\u5e94\u7528\uff0c\u6570\u636e\u59cb\u7ec8\u662f\u6838\u5fc3\u3002\u4f20\u7edf\u5173\u7cfb\u578b\u6570\u636e\u5e93\u6839\u672c\u65e0\u6cd5\u627f\u8f7d\u8f83\u9ad8\u7684\u5e76\u53d1\uff0c\u6b64\u65f6\u4eba\u4eec\u5c31\u5f00\u59cb",(0,n.kt)("strong",{parentName:"li"},"\u7528Redis\u5f53\u6210\u7f13\u5b58\uff0c\u6765\u7f13\u89e3\u6570\u636e\u5e93\u7684\u538b\u529b"))),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220221095725704-25182916.png",alt:"image-20220221095725704"}),"image-20220221095725704"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220221095934553-3f4dfa55.png",alt:"image-20220221095934553"}),"image-20220221095934553"),(0,n.kt)("h3",{id:"2\u4ec0\u4e48\u662fnosql"},"2\u3001\u4ec0\u4e48\u662fNoSQL"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'NoSQL\u6700\u5e38\u89c1\u7684\u89e3\u91ca\u662f"non-relational"\uff0c \u5f88\u591a\u4eba\u4e5f\u8bf4\u5b83\u662f"Not Only SQL"'),(0,n.kt)("li",{parentName:"ul"},"NoSQL\u4ec5\u4ec5\u662f\u4e00\u4e2a\u6982\u5ff5\uff0c\u6cdb\u6307\u975e\u5173\u7cfb\u578b\u7684\u6570\u636e\u5e93"),(0,n.kt)("li",{parentName:"ul"},"\u533a\u522b\u4e8e\u5173\u7cfb\u6570\u636e\u5e93\uff0c\u5b83\u4eec\u4e0d\u4fdd\u8bc1\u5173\u7cfb\u6570\u636e\u7684ACID\u7279\u6027"),(0,n.kt)("li",{parentName:"ul"},"NoSQL\u662f\u4e00\u9879\u5168\u65b0\u7684\u6570\u636e\u5e93\u9769\u547d\u6027\u8fd0\u52a8\uff0c\u63d0\u5021\u8fd0\u7528\u975e\u5173\u7cfb\u578b\u7684\u6570\u636e\u5b58\u50a8\uff0c\u76f8\u5bf9\u4e8e\u94fa\u5929\u76d6\u5730\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93\u8fd0\u7528\uff0c\u8fd9\u4e00\u6982\u5ff5\u65e0\u7591\u662f\u4e00\u79cd\u5168\u65b0\u7684\u601d\u7ef4\u7684\u6ce8\u5165")),(0,n.kt)("h3",{id:"3nosql\u7684\u7279\u70b9-\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u8865\u5145"},"3\u3001NoSQL\u7684\u7279\u70b9 \u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u8865\u5145"),(0,n.kt)("p",null,"\u5e94\u7528\u573a\u666f\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u9ad8\u5e76\u53d1\u7684\u8bfb\u5199 10w/s"),(0,n.kt)("li",{parentName:"ul"},"\u6d77\u91cf\u6570\u636e\u8bfb\u5199"),(0,n.kt)("li",{parentName:"ul"},"\u9ad8\u53ef\u6269\u5c55\u6027 \u4e0d\u9650\u5236\u8bed\u8a00\u3001lua\u811a\u672c\u589e\u5f3a"),(0,n.kt)("li",{parentName:"ul"},"\u901f\u5ea6\u5feb")),(0,n.kt)("p",null,"\u4e0d\u9002\u7528\u573a\u666f\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u9700\u8981\u4e8b\u52a1\u652f\u6301")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u57fa\u4e8esql\u7684\u7ed3\u6784\u5316\u67e5\u8be2\u5b58\u50a8\uff0c\u5904\u7406\u590d\u6742\u7684\u5173\u7cfb\uff0c\u9700\u8981\u5373\u5e2d\u67e5\u8be2\uff08\u7528\u6237\u81ea\u5b9a\u4e49\u67e5\u8be2\u6761\u4ef6\u7684\u67e5\u8be2\uff09"),(0,n.kt)("p",{parentName:"li"},"  \u653f\u5e9c\u94f6\u884c\u91d1\u878d\u9879\u76ee\uff0c\u8fd8\u662f\u4f7f\u7528\u5173\u7cfb\u578b\u6570\u636e\u5e93\u3002oracle"))),(0,n.kt)("h3",{id:"4nosql\u6570\u636e\u5e93"},"4\u3001NoSQL\u6570\u636e\u5e93"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"memcache")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5f88\u65e9\u51fa\u73b0\u7684NoSql\u6570\u636e\u5e93"),(0,n.kt)("li",{parentName:"ul"},"\u6570\u636e\u90fd\u5728\u5185\u5b58\u4e2d\uff0c\u4e00\u822c\u4e0d\u6301\u4e45\u5316"),(0,n.kt)("li",{parentName:"ul"},"\u652f\u6301\u7b80\u5355\u7684key-value\u6a21\u5f0f"),(0,n.kt)("li",{parentName:"ul"},"\u4e00\u822c\u662f\u4f5c\u4e3a\u7f13\u5b58\u6570\u636e\u5e93\u8f85\u52a9\u6301\u4e45\u5316\u7684\u6570\u636e\u5e93")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"redis\u4ecb\u7ecd")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u51e0\u4e4e\u8986\u76d6\u4e86Memcached\u7684\u7edd\u5927\u90e8\u5206\u529f\u80fd"),(0,n.kt)("li",{parentName:"ul"},"\u6570\u636e\u90fd\u5728\u5185\u5b58\u4e2d\uff0c\u652f\u6301\u6301\u4e45\u5316\uff0c\u4e3b\u8981\u7528\u4f5c\u5907\u4efd\u6062\u590d"),(0,n.kt)("li",{parentName:"ul"},"\u9664\u4e86\u652f\u6301\u7b80\u5355\u7684key-value\u6a21\u5f0f\uff0c\u8fd8\u652f\u6301\u591a\u79cd\u6570\u636e\u7ed3\u6784\u7684\u5b58\u50a8\uff0c\u6bd4\u5982 list\u3001set\u3001hash\u3001zset\u7b49\u3002"),(0,n.kt)("li",{parentName:"ul"},"\u4e00\u822c\u662f\u4f5c\u4e3a\u7f13\u5b58\u6570\u636e\u5e93\u8f85\u52a9\u6301\u4e45\u5316\u7684\u6570\u636e\u5e93"),(0,n.kt)("li",{parentName:"ul"},"\u73b0\u5728\u5e02\u9762\u4e0a\u7528\u5f97\u975e\u5e38\u591a\u7684\u4e00\u6b3e\u5185\u5b58\u6570\u636e\u5e93")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"mongoDB\u4ecb\u7ecd")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u9ad8\u6027\u80fd\u3001\u5f00\u6e90\u3001\u6a21\u5f0f\u81ea\u7531(schema free)\u7684\u6587\u6863\u578b\u6570\u636e\u5e93"),(0,n.kt)("li",{parentName:"ul"},"\u6570\u636e\u90fd\u5728\u5185\u5b58\u4e2d\uff0c \u5982\u679c\u5185\u5b58\u4e0d\u8db3\uff0c\u628a\u4e0d\u5e38\u7528\u7684\u6570\u636e\u4fdd\u5b58\u5230\u786c\u76d8"),(0,n.kt)("li",{parentName:"ul"},"\u867d\u7136\u662fkey-value\u6a21\u5f0f\uff0c\u4f46\u662f\u5bf9value\uff08\u5c24\u5176\u662fjson\uff09\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u67e5\u8be2\u529f\u80fd"),(0,n.kt)("li",{parentName:"ul"},"\u652f\u6301\u4e8c\u8fdb\u5236\u6570\u636e\u53ca\u5927\u578b\u5bf9\u8c61"),(0,n.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u6839\u636e\u6570\u636e\u7684\u7279\u70b9\u66ff\u4ee3RDBMS\uff0c\u6210\u4e3a\u72ec\u7acb\u7684\u6570\u636e\u5e93\u3002\u6216\u8005\u914d\u5408RDBMS\uff0c\u5b58\u50a8\u7279\u5b9a\u7684\u6570\u636e\u3002")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u5217\u5f0f\u5b58\u50a8HBase\u4ecb\u7ecd")),(0,n.kt)("p",null,"HBase\u662f",(0,n.kt)("strong",{parentName:"p"},"Hadoop"),"\u9879\u76ee\u4e2d\u7684\u6570\u636e\u5e93\u3002\u5b83\u7528\u4e8e\u9700\u8981\u5bf9\u5927\u91cf\u7684\u6570\u636e\u8fdb\u884c\u968f\u673a\u3001\u5b9e\u65f6\u8bfb\u5199\u64cd\u4f5c\u7684\u573a\u666f\u4e2d\u3002HBase\u7684\u76ee\u6807\u5c31\u662f\u5904\u7406\u6570\u636e\u91cf\u975e\u5e38\u5e9e\u5927\u7684\u8868\uff0c\u53ef\u4ee5\u7528\u666e\u901a\u7684\u8ba1\u7b97\u673a\u5904\u7406\u8d85\u8fc710\u4ebf\u884c\u6570\u636e\uff0c\u8fd8\u53ef\u5904\u7406\u6709\u6570\u767e\u4e07\u5217\u5143\u7d20\u7684\u6570\u636e\u8868\u3002"),(0,n.kt)("h2",{id:"\u7b2c\u4e8c\u7ae0-redis\u4ecb\u7ecd"},"\u7b2c\u4e8c\u7ae0 Redis\u4ecb\u7ecd"),(0,n.kt)("p",null,"redis\u5b98\u7f51\u5730\u5740\uff1a"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://redis.io/"},"https://redis.io/open in new window")),(0,n.kt)("p",null,"\u4e2d\u6587\u7f51\u7ad9"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"http://www.redis.cn/"},"http://www.redis.cn/open in new window")),(0,n.kt)("h3",{id:"1redis\u7684\u57fa\u672c\u4ecb\u7ecd"},"1\u3001Redis\u7684\u57fa\u672c\u4ecb\u7ecd"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Redis\u662f\u5f53\u524d\u6bd4\u8f83\u70ed\u95e8\u7684NoSQL\u7cfb\u7edf\u4e4b\u4e00"),(0,n.kt)("li",{parentName:"ul"},"\u5b83\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u3001\u4f7f\u7528ANSI C\u8bed\u8a00\u7f16\u5199\u7684",(0,n.kt)("strong",{parentName:"li"},"key-value"),"\u5b58\u50a8\u7cfb\u7edf\uff08\u533a\u522b\u4e8eMySQL\u7684\u4e8c\u7ef4\u8868\u683c\u5f62\u5f0f\u5b58\u50a8\uff09"),(0,n.kt)("li",{parentName:"ul"},"\u548cMemcache\u7c7b\u4f3c\uff0c\u4f46\u5f88\u5927\u7a0b\u5ea6\u8865\u507f\u4e86Memcache\u7684\u4e0d\u8db3\uff0cRedis\u6570\u636e\u90fd\u662f\u7f13\u5b58\u5728\u8ba1\u7b97\u673a",(0,n.kt)("strong",{parentName:"li"},"\u5185\u5b58"),"\u4e2d\uff0c\u4e0d\u540c\u7684\u662f\uff0cMemcache\u53ea\u80fd\u5c06\u6570\u636e\u7f13\u5b58\u5230\u5185\u5b58\u4e2d\uff0c\u65e0\u6cd5\u81ea\u52a8\u5b9a\u671f\u5199\u5165\u786c\u76d8\uff0c\u8fd9\u5c31\u8868\u793a\uff0c\u4e00\u65ad\u7535\u6216\u91cd\u542f\uff0c\u5185\u5b58\u6e05\u7a7a\uff0c\u6570\u636e\u4e22\u5931")),(0,n.kt)("h3",{id:"2redis\u7684\u5e94\u7528\u573a\u666f"},"2\u3001Redis\u7684\u5e94\u7528\u573a\u666f"),(0,n.kt)("h4",{id:"21-\u53d6\u6700\u65b0n\u4e2a\u6570\u636e\u7684\u64cd\u4f5c"},"2.1 \u53d6\u6700\u65b0N\u4e2a\u6570\u636e\u7684\u64cd\u4f5c"),(0,n.kt)("p",null,"\u6bd4\u5982\u5178\u578b\u7684\u53d6\u7f51\u7ad9\u6700\u65b0\u6587\u7ae0\uff0c\u53ef\u4ee5\u5c06\u6700\u65b0\u76845000\u6761\u8bc4\u8bbaID\u653e\u5728Redis\u7684List\u96c6\u5408\u4e2d\uff0c\u5e76\u5c06\u8d85\u51fa\u96c6\u5408\u90e8\u5206\u4ece\u6570\u636e\u5e93\u83b7\u53d6"),(0,n.kt)("h4",{id:"22\u6392\u884c\u699c\u5e94\u7528\u53d6top-n\u64cd\u4f5c"},"2.2.\u6392\u884c\u699c\u5e94\u7528\uff0c\u53d6TOP N\u64cd\u4f5c"),(0,n.kt)("p",null,"\u8fd9\u4e2a\u9700\u6c42\u4e0e\u4e0a\u9762\u9700\u6c42\u7684\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e\uff0c\u524d\u9762\u64cd\u4f5c\u4ee5\u65f6\u95f4\u4e3a\u6743\u91cd\uff0c\u8fd9\u4e2a\u662f\u4ee5\u67d0\u4e2a\u6761\u4ef6\u4e3a\u6743\u91cd\uff0c\u6bd4\u5982\u6309\u9876\u7684\u6b21\u6570\u6392\u5e8f\uff0c\u53ef\u4ee5\u4f7f\u7528Redis\u7684sorted set\uff0c\u5c06\u8981\u6392\u5e8f\u7684\u503c\u8bbe\u7f6e\u6210sorted set\u7684score\uff0c\u5c06\u5177\u4f53\u7684\u6570\u636e\u8bbe\u7f6e\u6210\u76f8\u5e94\u7684value\uff0c\u6bcf\u6b21\u53ea\u9700\u8981\u6267\u884c\u4e00\u6761ZADD\u547d\u4ee4\u5373\u53ef\u3002"),(0,n.kt)("h4",{id:"23\u9700\u8981\u7cbe\u51c6\u8bbe\u5b9a\u8fc7\u671f\u65f6\u95f4\u7684\u5e94\u7528"},"2.3\u9700\u8981\u7cbe\u51c6\u8bbe\u5b9a\u8fc7\u671f\u65f6\u95f4\u7684\u5e94\u7528"),(0,n.kt)("p",null,"\u6bd4\u5982\u53ef\u4ee5\u628a\u4e0a\u9762\u8bf4\u5230\u7684sorted set\u7684score\u503c\u8bbe\u7f6e\u6210\u8fc7\u671f\u65f6\u95f4\u7684\u65f6\u95f4\u6233\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u7b80\u5355\u5730\u901a\u8fc7\u8fc7\u671f\u65f6\u95f4\u6392\u5e8f\uff0c\u5b9a\u65f6\u6e05\u9664\u8fc7\u671f\u6570\u636e\u4e86\uff0c\u4e0d\u4ec5\u662f\u6e05\u9664Redis\u4e2d\u7684\u8fc7\u671f\u6570\u636e\uff0c\u4f60\u5b8c\u5168\u53ef\u4ee5\u628aRedis\u91cc\u8fd9\u4e2a\u8fc7\u671f\u65f6\u95f4\u5f53\u6210\u662f\u5bf9\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u7d22\u5f15\uff0c\u7528Redis\u6765\u627e\u51fa\u54ea\u4e9b\u6570\u636e\u9700\u8981\u8fc7\u671f\u5220\u9664\uff0c\u7136\u540e\u518d\u7cbe\u51c6\u5730\u4ece\u6570\u636e\u5e93\u4e2d\u5220\u9664\u76f8\u5e94\u7684\u8bb0\u5f55\u3002"),(0,n.kt)("h4",{id:"24\u8ba1\u6570\u5668\u5e94\u7528"},"2.4\u8ba1\u6570\u5668\u5e94\u7528"),(0,n.kt)("p",null,"Redis\u7684\u547d\u4ee4\u90fd\u662f\u539f\u5b50\u6027\u7684\uff0c\u4f60\u53ef\u4ee5\u8f7b\u677e\u5730\u5229\u7528INCR\uff0cDECR\u547d\u4ee4\u6765\u6784\u5efa\u8ba1\u6570\u5668\u7cfb\u7edf\u3002"),(0,n.kt)("h4",{id:"25uniq\u64cd\u4f5c\u83b7\u53d6\u67d0\u6bb5\u65f6\u95f4\u6240\u6709\u6570\u636e\u6392\u91cd\u503c"},"2.5Uniq\u64cd\u4f5c\uff0c\u83b7\u53d6\u67d0\u6bb5\u65f6\u95f4\u6240\u6709\u6570\u636e\u6392\u91cd\u503c"),(0,n.kt)("p",null,"\u8fd9\u4e2a\u4f7f\u7528Redis\u7684set\u6570\u636e\u7ed3\u6784\u6700\u5408\u9002\u4e86\uff0c\u53ea\u9700\u8981\u4e0d\u65ad\u5730\u5c06\u6570\u636e\u5f80set\u4e2d\u6254\u5c31\u884c\u4e86\uff0cset\u610f\u4e3a\u96c6\u5408\uff0c\u6240\u4ee5\u4f1a\u81ea\u52a8\u6392\u91cd\u3002"),(0,n.kt)("h4",{id:"26\u5b9e\u65f6\u7cfb\u7edf\u53cd\u5783\u573e\u7cfb\u7edf"},"2.6\u5b9e\u65f6\u7cfb\u7edf\uff0c\u53cd\u5783\u573e\u7cfb\u7edf"),(0,n.kt)("p",null,"\u901a\u8fc7\u4e0a\u9762\u8bf4\u5230\u7684set\u529f\u80fd\uff0c\u4f60\u53ef\u4ee5\u77e5\u9053\u4e00\u4e2a\u7ec8\u7aef\u7528\u6237\u662f\u5426\u8fdb\u884c\u4e86\u67d0\u4e2a\u64cd\u4f5c\uff0c\u53ef\u4ee5\u627e\u5230\u5176\u64cd\u4f5c\u7684\u96c6\u5408\u5e76\u8fdb\u884c\u5206\u6790\u7edf\u8ba1\u5bf9\u6bd4\u7b49\u3002\u6ca1\u6709\u505a\u4e0d\u5230\uff0c\u53ea\u6709\u60f3\u4e0d\u5230\u3002"),(0,n.kt)("h4",{id:"27\u7f13\u5b58"},"2.7\u7f13\u5b58"),(0,n.kt)("p",null,"\u5c06\u6570\u636e\u76f4\u63a5\u5b58\u653e\u5230\u5185\u5b58\u4e2d\uff0c\u6027\u80fd\u4f18\u4e8eMemcached\uff0c\u6570\u636e\u7ed3\u6784\u66f4\u591a\u6837\u5316\u3002"),(0,n.kt)("h3",{id:"3redis\u7684\u7279\u70b9"},"3\u3001Redis\u7684\u7279\u70b9"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u9ad8\u6548\u6027 \uff08\u5185\u5b58\uff09",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Redis\u8bfb\u53d6\u7684\u901f\u5ea6\u662f30w\u6b21/s\uff0c\u5199\u7684\u901f\u5ea6\u662f10w\u6b21/s"))),(0,n.kt)("li",{parentName:"ul"},"\u539f\u5b50\u6027 (\u4e3b\u903b\u8f91\u7ebf\u7a0b\u662f\u5355\u7ebf\u7a0b)",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Redis\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u662f\u539f\u5b50\u6027\u7684\uff0c\u540c\u65f6Redis\u8fd8\u652f\u6301\u5bf9\u51e0\u4e2a\u64cd\u4f5c\u5168\u5e76\u540e\u7684\u539f\u5b50\u6027\u6267\u884c\u3002 pipline"))),(0,n.kt)("li",{parentName:"ul"},"\u652f\u6301\u591a\u79cd\u6570\u636e\u7ed3\u6784",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"string\uff08\u5b57\u7b26\u4e32\uff09 a->b \u914d\u7f6e color--\x3e red"),(0,n.kt)("li",{parentName:"ul"},"list\uff08\u5217\u8868\uff09 a->list \u6d88\u606f\u961f\u5217 msg---\x3e",'["hello","ydlclass","itlils"]'),(0,n.kt)("li",{parentName:"ul"},"hash\uff08\u54c8\u5e0c\uff09 a->map \u8d2d\u7269\u8f66 1-----\x3e",'["1"=>"\u5243\u987b\u5200"\uff0c\u201c2\u201d=>\u201c\u7535\u8111\u201d]'),(0,n.kt)("li",{parentName:"ul"},"set\uff08\u96c6\u5408\uff09 a->set \u53bb\u91cd quchong--\x3e",'["\u5317\u4eac"\uff0c\u201c\u5c71\u897f\u201d\uff0c\u201c\u6cb3\u5317\u201c]'),(0,n.kt)("li",{parentName:"ul"},"zset(\u6709\u5e8f\u96c6\u5408) a->sorted set \u6392\u884c\u699c top10->",'[\u201dxx\u62ff\u4e86\u91d1\u724c,10\u201c,"\u8dd1\u8def\u4e86,9.5"]'))),(0,n.kt)("li",{parentName:"ul"},"\u7a33\u5b9a\u6027\uff1a\u6301\u4e45\u5316\uff0c\u4e3b\u4ece\u590d\u5236\uff08\u96c6\u7fa4\uff09"),(0,n.kt)("li",{parentName:"ul"},"\u5176\u4ed6\u7279\u6027\uff1a\u652f\u6301\u8fc7\u671f\u65f6\u95f4\uff0c\u652f\u6301\u4e8b\u52a1\uff0c\u6d88\u606f\u8ba2\u9605\u3002")),(0,n.kt)("h2",{id:"\u7b2c\u4e09\u7ae0-redis\u5355\u673a\u73af\u5883\u5b89\u88c5"},"\u7b2c\u4e09\u7ae0 Redis\u5355\u673a\u73af\u5883\u5b89\u88c5"),(0,n.kt)("h3",{id:"1windows\u7248redis\u5b89\u88c5\u4e86\u89e3"},"1\u3001Windows\u7248Redis\u5b89\u88c5\uff08\u4e86\u89e3\uff09"),(0,n.kt)("p",null,"Windows\u7248\u7684\u5b89\u88c5\u6bd4\u8f83\u7b80\u5355\uff0c\u89e3\u538bRedis\u538b\u7f29\u5305\u5b8c\u6210\u5373\u5b89\u88c5\u5b8c\u6bd5\uff0c\u5b89\u88c5\u7684\u6ce8\u610f\u4e8b\u9879\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u89e3\u538b\u7684\u76ee\u5f55\u4e0d\u8981\u6709\u4e2d\u6587"),(0,n.kt)("li",{parentName:"ul"},"\u76ee\u5f55\u7ed3\u6784\u5c42\u6b21\u4e0d\u8981\u592a\u6df1"),(0,n.kt)("li",{parentName:"ul"},"\u786c\u76d8\u7a7a\u95f4\u5269\u4f59\u7a7a\u95f4\u6700\u5c11\u8981\u5927\u4e8e\u4f60\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5efa\u8bae20G\u4ee5\u4e0a")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Redis \u76ee\u5f55\u7ed3\u6784\uff1a")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220221113608544-0f55f1a7.png",alt:"image-20220221113608544"}),"image-20220221113608544"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Redis \u670d\u52a1\u542f\u52a8\u4e0e\u5173\u95ed\uff1a")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"1\u3001\u542f\u52a8\u670d\u52a1\u5668\uff1acmd  redis-server.exe redis.windows.conf\n2\u3001\u9ed8\u8ba4\u7aef\u53e3\u53f7\uff1a6379\n3\u3001\u5173\u95ed\u670d\u52a1\u5668\uff1a\u76f4\u63a5\u5173\u95ed\u7a97\u53e3      \n")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220221154039579-f5185c60.png",alt:"image-20220221154039579"}),"image-20220221154039579"),(0,n.kt)("p",null,"\u8fd0\u884c\u3010",(0,n.kt)("strong",{parentName:"p"},"redis-cli.exe"),"\u3011\u5ba2\u6237\u7aef\uff1a"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220221154221476-e612c4fa.png",alt:"image-20220221154221476"}),"image-20220221154221476"),(0,n.kt)("p",null,"redis\u7aef\u53e3\u53f7 6379\u6765\u5386\uff1a"),(0,n.kt)("p",null,"\u5149\u660e\u7248\u672c\uff1a\u53d1\u660eredis\u7684\u4eba\uff0c\u53ef\u7231\u5973\u513f\u3002MERZ,\u4e5d\u5bab\u683c---6379\u3002 \u7a0b\u5e8f\u5458\u7684\u6d6a\u6f2b\u3002"),(0,n.kt)("p",null,"\u6697\u9ed1\u7248\u672c\uff1aMERZ\u821e\u5973--\u611a\u8822\u3002 \u53d1\u660e\u8005\u518d\u611a\u8822\u7684\u4eba\uff0c\u4e5f\u5e94\u8be5\u4f1a\u4f7f\u7528redis\u3002"),(0,n.kt)("h3",{id:"2linux\u7248redis\u5b89\u88c5\u8fd0\u7ef4"},"2\u3001Linux\u7248Redis\u5b89\u88c5(\u8fd0\u7ef4)"),(0,n.kt)("h4",{id:"21-\u4e0b\u8f7dredis\u5b89\u88c5\u5305"},"2.1 \u4e0b\u8f7dredis\u5b89\u88c5\u5305"),(0,n.kt)("p",null,"\u670d\u52a1\u5668\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u4e0b\u8f7dredis\u5b89\u88c5\u5305"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"cd  /export/software  \nwget  http://download.redis.io/releases/redis-6.2.6.tar.gz \n")),(0,n.kt)("h4",{id:"22-\u89e3\u538bredis\u538b\u7f29\u5305\u5230\u6307\u5b9a\u76ee\u5f55"},"2.2 \u89e3\u538bredis\u538b\u7f29\u5305\u5230\u6307\u5b9a\u76ee\u5f55"),(0,n.kt)("p",null,"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u89e3\u538bredis"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"cd /export/software  \ntar -zxvf redis-6.2.6.tar.gz -C \n")),(0,n.kt)("h4",{id:"23-\u5b89\u88c5c\u7a0b\u5e8f\u8fd0\u884c\u73af\u5883"},"2.3 \u5b89\u88c5C\u7a0b\u5e8f\u8fd0\u884c\u73af\u5883"),(0,n.kt)("p",null,"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5C\u7a0b\u5e8f\u8fd0\u884c\u73af\u5883"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"yum  -y install gcc-c++  \n")),(0,n.kt)("h4",{id:"24-\u5b89\u88c5\u8f83\u65b0\u7248\u672c\u7684tcl"},"2.4 \u5b89\u88c5\u8f83\u65b0\u7248\u672c\u7684tcl"),(0,n.kt)("p",null,"\u4e0b\u8f7d\u5b89\u88c5\u8f83\u65b0\u7248\u672c\u7684tcl"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u4f7f\u7528\u538b\u7f29\u5305\u8fdb\u884c\u5b89\u88c5")),(0,n.kt)("p",null,"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u4e0b\u8f7dtcl\u5b89\u88c5\u5305"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"cd  /export/software  \nwget  http://downloads.sourceforge.net/tcl/tcl8.6.1-src.tar.gz  \n\u89e3\u538btcl  \ntar  -zxvf tcl8.6.1-src.tar.gz -C ../server/  \n\u8fdb\u5165\u6307\u5b9a\u76ee\u5f55  \ncd  ../server/tcl8.6.1/unix/  \n./configure  \nmake && make install  \n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u5728\u7ebf\u5b89\u88c5tcl\uff08\u63a8\u8350\uff09")),(0,n.kt)("p",null,"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5728\u7ebf\u5b89\u88c5tcl"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"yum -y   install tcl \n")),(0,n.kt)("h4",{id:"25-\u7f16\u8bd1redis"},"2.5 \u7f16\u8bd1redis"),(0,n.kt)("p",null,"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb\u884c\u7f16\u8bd1\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"cd /export/server/redis-6.2.6/  \n#\u6216\u8005\u4f7f\u7528\u547d\u4ee4 make \u8fdb\u884c\u7f16\u8bd1  \nmake MALLOC=libc     \nmake test && make install PREFIX=/export/server/redis-6.2.6  \n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u4fee\u6539redis\u914d\u7f6e\u6587\u4ef6")),(0,n.kt)("p",null,"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u4fee\u6539redis\u914d\u7f6e\u6587\u4ef6"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},'cd  /export/server/redis-6.2.6/  \nmkdir  -p /export/server/redis-6.2.6/log  \nmkdir  -p /export/server/redis-6.2.6/data     \n\nvim  redis.conf  \n#  \u4fee\u6539\u7b2c61\u884c  \nbind  localhost  \n#  \u4fee\u6539\u7b2c128\u884c  \u540e\u53f0 \ndaemonize  yes  \n#  \u4fee\u6539\u7b2c163\u884c  \nlogfile  "/export/server/redis-6.2.6/log/redis.log"  \n#  \u4fee\u6539\u7b2c247\u884c  \ndir  /export/server/redis-6.2.6/data  \n')),(0,n.kt)("h4",{id:"26-\u542f\u52a8redis"},"2.6 \u542f\u52a8redis"),(0,n.kt)("p",null,"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u542f\u52a8redis"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"cd /export/server/redis-6.2.6/  \nbin/redis-server redis.conf  \n")),(0,n.kt)("h4",{id:"27-\u5173\u95edredis"},"2.7 \u5173\u95edredis"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"bin/redis-cli  -h localhost shutdown  \n")),(0,n.kt)("h4",{id:"28-\u8fde\u63a5redis\u5ba2\u6237\u7aef"},"2.8 \u8fde\u63a5redis\u5ba2\u6237\u7aef"),(0,n.kt)("p",null,"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fde\u63a5redis\u5ba2\u6237\u7aef"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"cd  /export/server/redis-6.2.6/  \nbin/redis-cli -h localhost\n")),(0,n.kt)("h3",{id:"3redis-desktop-manager"},"3\u3001Redis Desktop Manager"),(0,n.kt)("p",null,"\u4e00\u6b3e\u57fa\u4e8eQt5\u7684\u8de8\u5e73\u53f0Redis\u684c\u9762\u7ba1\u7406\u8f6f\u4ef6\uff0c\u652f\u6301\uff1aWindows 7+\u3001Mac OS X 10.10+\u3001 Ubuntu 14+\uff0c\u7279\u70b9\uff1a C++ \u7f16\u5199\uff0c\u54cd\u5e94\u8fc5\u901f\uff0c\u6027\u80fd\u597d\u3002"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"\u4e0b\u8f7d\u5730\u5740\uff1ahttp://docs.redisdesktop.com/en/latest/install/#windows \n")),(0,n.kt)("p",null,"\u5b89\u88c5\u5ba2\u6237\u7aef\uff0c\u8fde\u63a5Redis\u670d\u52a1\uff1a"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220221172023223-b4b6c761.png",alt:"image-20220221172023223"}),"image-20220221172023223"),(0,n.kt)("p",null,"\u5907\u6ce8\u8bf4\u660e\uff1aRedis Desktoo Manager\u8001\u7248\u672c\u514d\u8d39\uff0c\u65b0\u7248\u672c\u6536\u8d39"),(0,n.kt)("h2",{id:"\u7b2c\u56db\u7ae0-redis\u7684\u6570\u636e\u7c7b\u578b"},"\u7b2c\u56db\u7ae0 Redis\u7684\u6570\u636e\u7c7b\u578b"),(0,n.kt)("p",null,"redis\u5f53\u4e2d\u4e00\u5171\u652f\u6301\u4e94\u79cd\u6570\u636e\u7c7b\u578b\uff0c\u5206\u522b\u662f\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"string\u5b57\u7b26\u4e32"),(0,n.kt)("li",{parentName:"ul"},"list\u5217\u8868"),(0,n.kt)("li",{parentName:"ul"},"set\u96c6\u5408"),(0,n.kt)("li",{parentName:"ul"},"hash\u8868"),(0,n.kt)("li",{parentName:"ul"},"zset\u6709\u5e8f\u96c6\u5408")),(0,n.kt)("p",null,"\u901a\u8fc7\u8fd9\u4e94\u79cd\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5404\u79cd\u4e0d\u540c\u7684\u529f\u80fd\uff0c\u4e5f\u53ef\u4ee5\u5e94\u7528\u5728\u5404\u79cd\u4e0d\u540c\u7684\u573a\u666f\u3002"),(0,n.kt)("p",null,"Redis\u5f53\u4e2d\u5404\u79cd\u6570\u636e\u7c7b\u578b\u7ed3\u6784\u5982\u4e0b\u56fe\uff1a"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220221173742206-487ce47b.png",alt:"image-20220221173742206"}),"image-20220221173742206"),(0,n.kt)("p",null,"\u6240\u6709\u64cd\u4f5c\u770b\u5b98\u7f51\uff1a"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220221121347943-a4bcd577.png",alt:"image-20220221121347943"}),"image-20220221121347943"),(0,n.kt)("p",null,"\u6216\u8005\u7b26\u5408\u8fc7\u4eba\u9605\u8bfb\u4e60\u60ef\uff1a",(0,n.kt)("a",{parentName:"p",href:"https://www.runoob.com/redis/redis-keys.html"},"https://www.runoob.com/redis/redis-keys.htmlopen in new window")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220221121448715-c32d4886.png",alt:"image-20220221121448715"}),"image-20220221121448715"),(0,n.kt)("h3",{id:"1\u5bf9\u5b57\u7b26\u4e32string\u7684\u64cd\u4f5c"},"1\u3001\u5bf9\u5b57\u7b26\u4e32string\u7684\u64cd\u4f5c"),(0,n.kt)("p",null,"\u4e0b\u8868\u5217\u51fa\u4e86\u5e38\u7528\u7684 redis \u5b57\u7b26\u4e32\u547d\u4ee4"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"\u5e8f\u53f7"),(0,n.kt)("th",{parentName:"tr",align:null},"\u547d\u4ee4\u53ca\u63cf\u8ff0"),(0,n.kt)("th",{parentName:"tr",align:null},"\u793a\u4f8b"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"1"),(0,n.kt)("td",{parentName:"tr",align:null},"SET key value \u8bbe\u7f6e\u6307\u5b9a key \u7684\u503c"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aSET hello world")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"2"),(0,n.kt)("td",{parentName:"tr",align:null},"GET key \u83b7\u53d6\u6307\u5b9a key \u7684\u503c\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aGET hello")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"4"),(0,n.kt)("td",{parentName:"tr",align:null},"GETSET key value \u5c06\u7ed9\u5b9a key \u7684\u503c\u8bbe\u4e3a value \uff0c\u5e76\u8fd4\u56de key \u7684\u65e7\u503c(old value)\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aGETSET hello world2")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"5"),(0,n.kt)("td",{parentName:"tr",align:null},"MGET key1 ","[key2..]"," \u83b7\u53d6\u6240\u6709(\u4e00\u4e2a\u6216\u591a\u4e2a)\u7ed9\u5b9a key \u7684\u503c\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aMGET hello world")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"6"),(0,n.kt)("td",{parentName:"tr",align:null},"SETEX key seconds value \u5c06\u503c value \u5173\u8054\u5230 key \uff0c\u5e76\u5c06 key \u7684\u8fc7\u671f\u65f6\u95f4\u8bbe\u4e3a seconds (\u4ee5\u79d2\u4e3a\u5355\u4f4d)\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aSETEX hello 10 world3")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"7"),(0,n.kt)("td",{parentName:"tr",align:null},"SETNX key value \u53ea\u6709\u5728 key \u4e0d\u5b58\u5728\u65f6\u8bbe\u7f6e key \u7684\u503c\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aSETNX ydlclass redisvalue")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"9"),(0,n.kt)("td",{parentName:"tr",align:null},"STRLEN key \u8fd4\u56de key \u6240\u50a8\u5b58\u7684\u5b57\u7b26\u4e32\u503c\u7684\u957f\u5ea6\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aSTRLEN ydlclass")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"10"),(0,n.kt)("td",{parentName:"tr",align:null},"MSET key value ","[key value ]"," \u540c\u65f6\u8bbe\u7f6e\u4e00\u4e2a\u6216\u591a\u4e2a key-value \u5bf9\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aMSET ydlclass2 ydlclassvalue2 ydlclass3 ydlclassvalue3")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"12"),(0,n.kt)("td",{parentName:"tr",align:null},"MSETNX key value key value \u540c\u65f6\u8bbe\u7f6e\u4e00\u4e2a\u6216\u591a\u4e2a key-value \u5bf9\uff0c\u5f53\u4e14\u4ec5\u5f53\u6240\u6709\u7ed9\u5b9a key \u90fd\u4e0d\u5b58\u5728\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aMSETNX ydlclass4 ydlclassvalue4 ydlclass5 ydlclassvalue5")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"13"),(0,n.kt)("td",{parentName:"tr",align:null},"PSETEX key milliseconds value\u8fd9\u4e2a\u547d\u4ee4\u548c SETEX \u547d\u4ee4\u76f8\u4f3c\uff0c\u4f46\u5b83\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\u8bbe\u7f6e key \u7684\u751f\u5b58\u65f6\u95f4\uff0c\u800c\u4e0d\u662f\u50cf SETEX \u547d\u4ee4\u90a3\u6837\uff0c\u4ee5\u79d2\u4e3a\u5355\u4f4d\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aPSETEX ydlclass6 6000 ydlclass6value")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"14"),(0,n.kt)("td",{parentName:"tr",align:null},"INCR key \u5c06 key \u4e2d\u50a8\u5b58\u7684\u6570\u5b57\u503c\u589e\u4e00\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1a set ydlclass7 1 INCR ydlclass7 GET ydlclass7")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"15"),(0,n.kt)("td",{parentName:"tr",align:null},"INCRBY key increment \u5c06 key \u6240\u50a8\u5b58\u7684\u503c\u52a0\u4e0a\u7ed9\u5b9a\u7684\u589e\u91cf\u503c\uff08increment\uff09"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aINCRBY ydlclass7 2 get ydlclass7")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"16"),(0,n.kt)("td",{parentName:"tr",align:null},"INCRBYFLOAT key increment \u5c06 key \u6240\u50a8\u5b58\u7684\u503c\u52a0\u4e0a\u7ed9\u5b9a\u7684\u6d6e\u70b9\u589e\u91cf\u503c\uff08increment\uff09"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aINCRBYFLOAT ydlclass7 0.8")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"17"),(0,n.kt)("td",{parentName:"tr",align:null},"DECR key \u5c06 key \u4e2d\u50a8\u5b58\u7684\u6570\u5b57\u503c\u51cf\u4e00\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1a set ydlclass8 1 DECR ydlclass8 GET ydlclass8")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"18"),(0,n.kt)("td",{parentName:"tr",align:null},"DECRBY key decrement key \u6240\u50a8\u5b58\u7684\u503c\u51cf\u53bb\u7ed9\u5b9a\u7684\u51cf\u91cf\u503c\uff08decrement\uff09"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aDECRBY ydlclass8 3")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"19"),(0,n.kt)("td",{parentName:"tr",align:null},"APPEND key value \u5982\u679c key \u5df2\u7ecf\u5b58\u5728\u5e76\u4e14\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c APPEND \u547d\u4ee4\u5c06\u6307\u5b9a\u7684 value \u8ffd\u52a0\u5230\u8be5 key \u539f\u6765\u503c\uff08value\uff09\u7684\u672b\u5c3e\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aAPPEND ydlclass8 hello")))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"1 \u8bbe\u7f6e\u503c \u83b7\u53d6\u503c\nset ydlclass value\nget ydlclass\n2 mset mget \u4e00\u6b21\u6027\u64cd\u4f5c\u591a\u7ec4\u6570\u636e\nmset ydlclass value ydlclass1 value1 ydlclass2 value2\nmget ydlclass ydlclass1 ydlclass2\n3 \u6ca1\u6709\u8fd9\u4e2a\u952e\u6211\u4eec\u624d\u8bbe\u7f6e\nsetnx dlclass value\n4 \u5c06key\u7684\u503c \u52a0\u4e00\uff0c\u51cf\u4e00\nincr stock \ndecr stock\n5\u8bbe\u7f6e a\u503c\u5b58\u6d3b\u65f6\u95f45\u79d2\uff0c\u503c\u662fb    \u9a8c\u8bc1\u7801\nsetex a 5 b\n")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220222092133130-08156d43.png",alt:"image-20220222092133130"}),"image-20220222092133130"),(0,n.kt)("h3",{id:"2\u5bf9hash\u5217\u8868\u7684\u64cd\u4f5c"},"2\u3001\u5bf9hash\u5217\u8868\u7684\u64cd\u4f5c"),(0,n.kt)("p",null,"Redis hash \u662f\u4e00\u4e2astring\u7c7b\u578b\u7684field\u548cvalue\u7684\u6620\u5c04\u8868\uff0chash\u7279\u522b\u9002\u5408\u7528\u4e8e\u5b58\u50a8\u5bf9\u8c61\u3002"),(0,n.kt)("p",null,"Redis \u4e2d\u6bcf\u4e2a hash \u53ef\u4ee5\u5b58\u50a8 2\u768432 - 1 \u952e\u503c\u5bf9\uff0840\u591a\u4ebf\uff09"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220222093710264-1f090a74.png",alt:"image-20220222093710264"}),"image-20220222093710264"),(0,n.kt)("p",null,"\u4e0b\u8868\u5217\u51fa\u4e86 redis hash \u57fa\u672c\u7684\u76f8\u5173\u547d\u4ee4\uff1a"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"\u5e8f\u53f7"),(0,n.kt)("th",{parentName:"tr",align:null},"\u547d\u4ee4\u53ca\u63cf\u8ff0"),(0,n.kt)("th",{parentName:"tr",align:null},"\u793a\u4f8b"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"1"),(0,n.kt)("td",{parentName:"tr",align:null},"HSET key field value \u5c06\u54c8\u5e0c\u8868 key \u4e2d\u7684\u5b57\u6bb5 field \u7684\u503c\u8bbe\u4e3a value \u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aHSET key1 field1 value1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"2"),(0,n.kt)("td",{parentName:"tr",align:null},"HSETNX key field value \u53ea\u6709\u5728\u5b57\u6bb5 field \u4e0d\u5b58\u5728\u65f6\uff0c\u8bbe\u7f6e\u54c8\u5e0c\u8868\u5b57\u6bb5\u7684\u503c\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aHSETNX key1 field2 value2")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"3"),(0,n.kt)("td",{parentName:"tr",align:null},"HMSET key field1 value1 ","[field2 value2 ]"," \u540c\u65f6\u5c06\u591a\u4e2a field-value (\u57df-\u503c)\u5bf9\u8bbe\u7f6e\u5230\u54c8\u5e0c\u8868 key \u4e2d\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aHMSET key1 field3 value3 field4 value4")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"4"),(0,n.kt)("td",{parentName:"tr",align:null},"HEXISTS key field \u67e5\u770b\u54c8\u5e0c\u8868 key \u4e2d\uff0c\u6307\u5b9a\u7684\u5b57\u6bb5\u662f\u5426\u5b58\u5728\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1a HEXISTS key1 field4 HEXISTS key1 field6")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"5"),(0,n.kt)("td",{parentName:"tr",align:null},"HGET key field \u83b7\u53d6\u5b58\u50a8\u5728\u54c8\u5e0c\u8868\u4e2d\u6307\u5b9a\u5b57\u6bb5\u7684\u503c\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aHGET key1 field4")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"6"),(0,n.kt)("td",{parentName:"tr",align:null},"HGETALL key \u83b7\u53d6\u5728\u54c8\u5e0c\u8868\u4e2d\u6307\u5b9a key \u7684\u6240\u6709\u5b57\u6bb5\u548c\u503c"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aHGETALL key1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"7"),(0,n.kt)("td",{parentName:"tr",align:null},"HKEYS key \u83b7\u53d6\u6240\u6709\u54c8\u5e0c\u8868\u4e2d\u7684\u5b57\u6bb5"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aHKEYS key1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"8"),(0,n.kt)("td",{parentName:"tr",align:null},"HLEN key \u83b7\u53d6\u54c8\u5e0c\u8868\u4e2d\u5b57\u6bb5\u7684\u6570\u91cf"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aHLEN key1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"9"),(0,n.kt)("td",{parentName:"tr",align:null},"HMGET key field1 ","[field2]"," \u83b7\u53d6\u6240\u6709\u7ed9\u5b9a\u5b57\u6bb5\u7684\u503c"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aHMGET key1 field3 field4")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"10"),(0,n.kt)("td",{parentName:"tr",align:null},"HINCRBY key field increment \u4e3a\u54c8\u5e0c\u8868 key \u4e2d\u7684\u6307\u5b9a\u5b57\u6bb5\u7684\u6574\u6570\u503c\u52a0\u4e0a\u589e\u91cf increment \u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1a HSET key2 field1 1 HINCRBY key2 field1 1 HGET key2 field1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"11"),(0,n.kt)("td",{parentName:"tr",align:null},"HINCRBYFLOAT key field increment \u4e3a\u54c8\u5e0c\u8868 key \u4e2d\u7684\u6307\u5b9a\u5b57\u6bb5\u7684\u6d6e\u70b9\u6570\u503c\u52a0\u4e0a\u589e\u91cf increment \u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aHINCRBYFLOAT key2 field1 0.8")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"12"),(0,n.kt)("td",{parentName:"tr",align:null},"HVALS key \u83b7\u53d6\u54c8\u5e0c\u8868\u4e2d\u6240\u6709\u503c"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aHVALS key1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"13"),(0,n.kt)("td",{parentName:"tr",align:null},"HDEL key field1 ","[field2]"," \u5220\u9664\u4e00\u4e2a\u6216\u591a\u4e2a\u54c8\u5e0c\u8868\u5b57\u6bb5"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1a HDEL key1 field3 HVALS key1")))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"1\u8bbe\u7f6e\u503c \u83b7\u53d6\u503c\nhset user username itlils\nhset user age 18\nhget user username\n2\u6279\u91cf\nhmset user1 username itnanls age 19 \n3\u83b7\u53d6\u6240\u6709\u7684\u952e\u503c\u5bf9\nhgetall user\n4\u83b7\u53d6\u6240\u6709\u5c0fkey\nhkeys  user\n5\u83b7\u53d6\u6240\u6709\u503c\nHVALS user\n6\u5220\u9664 \nhdel user age\n")),(0,n.kt)("h3",{id:"3\u5bf9list\u5217\u8868\u7684\u64cd\u4f5c"},"3\u3001\u5bf9list\u5217\u8868\u7684\u64cd\u4f5c"),(0,n.kt)("p",null,"Redis\u5217\u8868\u662f\u7b80\u5355\u7684\u5b57\u7b26\u4e32\u5217\u8868\uff0c\u6309\u7167\u63d2\u5165",(0,n.kt)("strong",{parentName:"p"},"\u987a\u5e8f"),"\u6392\u5e8f\u3002\u4f60\u53ef\u4ee5\u6dfb\u52a0\u4e00\u4e2a\u5143\u7d20\u5230\u5217\u8868\u7684\u5934\u90e8\uff08\u5de6\u8fb9\uff09\u6216\u8005\u5c3e\u90e8\uff08\u53f3\u8fb9\uff09"),(0,n.kt)("p",null,"\u4e00\u4e2a\u5217\u8868\u6700\u591a\u53ef\u4ee5\u5305\u542b 2\u768432 - 1 \u4e2a\u5143\u7d20 (4294967295, \u6bcf\u4e2a\u5217\u8868\u8d85\u8fc740\u4ebf\u4e2a\u5143\u7d20)\u3002"),(0,n.kt)("p",null,"\u4e0b\u8868\u5217\u51fa\u4e86\u5217\u8868\u76f8\u5173\u7684\u57fa\u672c\u547d\u4ee4\uff1a"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"\u5e8f\u53f7")),(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"\u547d\u4ee4\u53ca\u63cf\u8ff0")),(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"\u793a\u4f8b")))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"1"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"LPUSH key value1 ","[value2]")," \u5c06\u4e00\u4e2a\u6216\u591a\u4e2a\u503c\u63d2\u5165\u5230\u5217\u8868\u5934\u90e8"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aLPUSH list1 value1 value2")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"2"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"LRANGE key start stop")," \u67e5\u770blist\u5f53\u4e2d\u6240\u6709\u7684\u6570\u636e"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aLRANGE list1 0 -1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"3"),(0,n.kt)("td",{parentName:"tr",align:null},"LPUSHX key value \u5c06\u4e00\u4e2a\u503c\u63d2\u5165\u5230\u5df2\u5b58\u5728\u7684\u5217\u8868\u5934\u90e8"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aLPUSHX list1 value3 LINDEX list1 0")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"4"),(0,n.kt)("td",{parentName:"tr",align:null},"RPUSH key value1 ","[value2]"," \u5728\u5217\u8868\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u6216\u591a\u4e2a\u503c\u5230\u5c3e\u90e8"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1a RPUSH list1 value4 value5 LRANGE list1 0 -1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"5"),(0,n.kt)("td",{parentName:"tr",align:null},"RPUSHX key value \u4e3a\u5df2\u5b58\u5728\u7684\u5217\u8868\u6dfb\u52a0\u5355\u4e2a\u503c\u5230\u5c3e\u90e8"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aRPUSHX list1 value6")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"6"),(0,n.kt)("td",{parentName:"tr",align:null},"LINSERT key BEFORE","|","AFTER pivot value \u5728\u5217\u8868\u7684\u5143\u7d20\u524d\u6216\u8005\u540e\u63d2\u5165\u5143\u7d20"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aLINSERT list1 BEFORE value3 beforevalue3")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"7"),(0,n.kt)("td",{parentName:"tr",align:null},"LINDEX key index \u901a\u8fc7\u7d22\u5f15\u83b7\u53d6\u5217\u8868\u4e2d\u7684\u5143\u7d20"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aLINDEX list1 0")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"8"),(0,n.kt)("td",{parentName:"tr",align:null},"LSET key index value \u901a\u8fc7\u7d22\u5f15\u8bbe\u7f6e\u5217\u8868\u5143\u7d20\u7684\u503c"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aLSET list1 0 hello")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"9"),(0,n.kt)("td",{parentName:"tr",align:null},"LLEN key \u83b7\u53d6\u5217\u8868\u957f\u5ea6"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aLLEN list1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"10"),(0,n.kt)("td",{parentName:"tr",align:null},"LPOP key \u79fb\u51fa\u5e76\u83b7\u53d6\u5217\u8868\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aLPOP list1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"11"),(0,n.kt)("td",{parentName:"tr",align:null},"RPOP key \u79fb\u9664\u5217\u8868\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\uff0c\u8fd4\u56de\u503c\u4e3a\u79fb\u9664\u7684\u5143\u7d20\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aRPOP list1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"12"),(0,n.kt)("td",{parentName:"tr",align:null},"BLPOP key1 ","[key2 ]"," timeout \u79fb\u51fa\u5e76\u83b7\u53d6\u5217\u8868\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\uff0c \u5982\u679c\u5217\u8868\u6ca1\u6709\u5143\u7d20\u4f1a\u963b\u585e\u5217\u8868\u76f4\u5230\u7b49\u5f85\u8d85\u65f6\u6216\u53d1\u73b0\u53ef\u5f39\u51fa\u5143\u7d20\u4e3a\u6b62\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aBLPOP list1 2000")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"13"),(0,n.kt)("td",{parentName:"tr",align:null},"BRPOP key1 ","[key2 ]"," timeout \u79fb\u51fa\u5e76\u83b7\u53d6\u5217\u8868\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\uff0c \u5982\u679c\u5217\u8868\u6ca1\u6709\u5143\u7d20\u4f1a\u963b\u585e\u5217\u8868\u76f4\u5230\u7b49\u5f85\u8d85\u65f6\u6216\u53d1\u73b0\u53ef\u5f39\u51fa\u5143\u7d20\u4e3a\u6b62\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aBRPOP list1 2000")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"14"),(0,n.kt)("td",{parentName:"tr",align:null},"RPOPLPUSH source destination \u79fb\u9664\u5217\u8868\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\uff0c\u5e76\u5c06\u8be5\u5143\u7d20\u6dfb\u52a0\u5230\u53e6\u4e00\u4e2a\u5217\u8868\u5e76\u8fd4\u56de"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aRPOPLPUSH list1 list2")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"15"),(0,n.kt)("td",{parentName:"tr",align:null},"BRPOPLPUSH source destination timeout \u4ece\u5217\u8868\u4e2d\u5f39\u51fa\u4e00\u4e2a\u503c\uff0c\u5c06\u5f39\u51fa\u7684\u5143\u7d20\u63d2\u5165\u5230\u53e6\u5916\u4e00\u4e2a\u5217\u8868\u4e2d\u5e76\u8fd4\u56de\u5b83\uff1b \u5982\u679c\u5217\u8868\u6ca1\u6709\u5143\u7d20\u4f1a\u963b\u585e\u5217\u8868\u76f4\u5230\u7b49\u5f85\u8d85\u65f6\u6216\u53d1\u73b0\u53ef\u5f39\u51fa\u5143\u7d20\u4e3a\u6b62\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aBRPOPLPUSH list1 list2 2000")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"16"),(0,n.kt)("td",{parentName:"tr",align:null},"LTRIM key start stop \u5bf9\u4e00\u4e2a\u5217\u8868\u8fdb\u884c\u4fee\u526a(trim)\uff0c\u5c31\u662f\u8bf4\uff0c\u8ba9\u5217\u8868\u53ea\u4fdd\u7559\u6307\u5b9a\u533a\u95f4\u5185\u7684\u5143\u7d20\uff0c\u4e0d\u5728\u6307\u5b9a\u533a\u95f4\u4e4b\u5185\u7684\u5143\u7d20\u90fd\u5c06\u88ab\u5220\u9664\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aLTRIM list1 0 2")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"17"),(0,n.kt)("td",{parentName:"tr",align:null},"DEL key1 key2 \u5220\u9664\u6307\u5b9akey\u7684\u5217\u8868"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aDEL list2")))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"1 \u8bbe\u7f6e\u503c\nlpush list1 1 2 3 4 1\nrpush list1 6\n2\u67e5\u770b\u6570\u636e\nlrange list1 0 -1\n3 \u79fb\u9664\u6570\u636e\nlpop list1\nrpop list1\n")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220222111528778-c9270e16.png",alt:"image-20220222111528778"}),"image-20220222111528778"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220222111615583-5fc7824f.png",alt:"image-20220222111615583"}),"image-20220222111615583"),(0,n.kt)("h3",{id:"4\u5bf9set\u96c6\u5408\u7684\u64cd\u4f5c"},"4\u3001\u5bf9set\u96c6\u5408\u7684\u64cd\u4f5c"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Redis \u7684 Set \u662f String \u7c7b\u578b\u7684",(0,n.kt)("strong",{parentName:"li"},"\u65e0\u5e8f"),"\u96c6\u5408\u3002\u96c6\u5408\u6210\u5458\u662f",(0,n.kt)("strong",{parentName:"li"},"\u552f\u4e00"),"\u7684\uff0c\u8fd9\u5c31\u610f\u5473\u7740\u96c6\u5408\u4e2d\u4e0d\u80fd\u51fa\u73b0\u91cd\u590d\u7684\u6570\u636e"),(0,n.kt)("li",{parentName:"ul"},"Redis \u4e2d\u96c6\u5408\u662f\u901a\u8fc7\u54c8\u5e0c\u8868\u5b9e\u73b0\u7684\uff0c\u6240\u4ee5\u6dfb\u52a0\uff0c\u5220\u9664\uff0c\u67e5\u627e\u7684\u590d\u6742\u5ea6\u90fd\u662f O(1)\u3002"),(0,n.kt)("li",{parentName:"ul"},"\u96c6\u5408\u4e2d\u6700\u5927\u7684\u6210\u5458\u6570\u4e3a 2\u768432 - 1 (4294967295, \u6bcf\u4e2a\u96c6\u5408\u53ef\u5b58\u50a840\u591a\u4ebf\u4e2a\u6210\u5458)\u3002")),(0,n.kt)("p",null,"\u4e0b\u8868\u5217\u51fa\u4e86 Redis \u96c6\u5408\u57fa\u672c\u547d\u4ee4\uff1a"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"\u5e8f\u53f7")),(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"\u547d\u4ee4\u53ca\u63cf\u8ff0")),(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"\u793a\u4f8b")))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"1"),(0,n.kt)("td",{parentName:"tr",align:null},"SADD key member1 ","[member2]"," \u5411\u96c6\u5408\u6dfb\u52a0\u4e00\u4e2a\u6216\u591a\u4e2a\u6210\u5458"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aSADD set1 setvalue1 setvalue2")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"2"),(0,n.kt)("td",{parentName:"tr",align:null},"SMEMBERS key \u8fd4\u56de\u96c6\u5408\u4e2d\u7684\u6240\u6709\u6210\u5458"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aSMEMBERS set1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"3"),(0,n.kt)("td",{parentName:"tr",align:null},"SCARD key \u83b7\u53d6\u96c6\u5408\u7684\u6210\u5458\u6570"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aSCARD set1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"4"),(0,n.kt)("td",{parentName:"tr",align:null},"SDIFF key1 ","[key2]"," \u8fd4\u56de\u7ed9\u5b9a\u6240\u6709\u96c6\u5408\u7684\u5dee\u96c6"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1a SADD set2 setvalue2 setvalue3 SDIFF set1 set2")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"5"),(0,n.kt)("td",{parentName:"tr",align:null},"SDIFFSTORE destination key1 ","[key2]"," \u8fd4\u56de\u7ed9\u5b9a\u6240\u6709\u96c6\u5408\u7684\u5dee\u96c6\u5e76\u5b58\u50a8\u5728 destination \u4e2d"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aSDIFFSTORE set3 set1 set2")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"6"),(0,n.kt)("td",{parentName:"tr",align:null},"SINTER key1 ","[key2]"," \u8fd4\u56de\u7ed9\u5b9a\u6240\u6709\u96c6\u5408\u7684\u4ea4\u96c6"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aSINTER set1 set2")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"7"),(0,n.kt)("td",{parentName:"tr",align:null},"SINTERSTORE destination key1 ","[key2]"," \u8fd4\u56de\u7ed9\u5b9a\u6240\u6709\u96c6\u5408\u7684\u4ea4\u96c6\u5e76\u5b58\u50a8\u5728 destination \u4e2d"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aSINTERSTORE set4 set1 set2")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"8"),(0,n.kt)("td",{parentName:"tr",align:null},"SISMEMBER key member \u5224\u65ad member \u5143\u7d20\u662f\u5426\u662f\u96c6\u5408 key \u7684\u6210\u5458"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aSISMEMBER set1 setvalue1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"9"),(0,n.kt)("td",{parentName:"tr",align:null},"SMOVE source destination member \u5c06 member \u5143\u7d20\u4ece source \u96c6\u5408\u79fb\u52a8\u5230 destination \u96c6\u5408"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aSMOVE set1 set2 setvalue1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"10"),(0,n.kt)("td",{parentName:"tr",align:null},"SPOP key \u79fb\u9664\u5e76\u8fd4\u56de\u96c6\u5408\u4e2d\u7684\u4e00\u4e2a\u968f\u673a\u5143\u7d20"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aSPOP set2")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"11"),(0,n.kt)("td",{parentName:"tr",align:null},"SRANDMEMBER key ","[count]"," \u8fd4\u56de\u96c6\u5408\u4e2d\u4e00\u4e2a\u6216\u591a\u4e2a\u968f\u673a\u6570"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aSRANDMEMBER set2 2")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"12"),(0,n.kt)("td",{parentName:"tr",align:null},"SREM key member1 ","[member2]"," \u79fb\u9664\u96c6\u5408\u4e2d\u4e00\u4e2a\u6216\u591a\u4e2a\u6210\u5458"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aSREM set2 setvalue1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"13"),(0,n.kt)("td",{parentName:"tr",align:null},"SUNION key1 ","[key2]","] \u8fd4\u56de\u6240\u6709\u7ed9\u5b9a\u96c6\u5408\u7684\u5e76\u96c6"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aSUNION set1 set2")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"14"),(0,n.kt)("td",{parentName:"tr",align:null},"SUNIONSTORE destination key1 ","[key2]"," \u6240\u6709\u7ed9\u5b9a\u96c6\u5408\u7684\u5e76\u96c6\u5b58\u50a8\u5728 destination \u96c6\u5408\u4e2d"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aSUNIONSTORE set5 set1 set2")))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"1\u6dfb\u52a0\u6570\u636e\nsadd set1 1 2 3 4 5\n2\u83b7\u53d6\u6570\u636e\nsmembers set1\n3\u83b7\u53d6\u6210\u5458\u6570\u91cf\nscard set1\n4\u4e1a\u52a1 uv \u5f53\u5929\u767b\u9646\u7528\u6237\u6570\nsadd uv:20220222 001 002 003 002\nscard uv:20220222\n")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220222112938308-febf8597.png",alt:"image-20220222112938308"}),"image-20220222112938308"),(0,n.kt)("h3",{id:"5\u5bf9key\u7684\u64cd\u4f5c"},"5\u3001\u5bf9key\u7684\u64cd\u4f5c"),(0,n.kt)("p",null,"\u4e0b\u8868\u7ed9\u51fa\u4e86\u4e0e Redis \u952e\u76f8\u5173\u7684\u57fa\u672c\u547d\u4ee4\uff1a"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"\u5e8f\u53f7"),(0,n.kt)("th",{parentName:"tr",align:null},"\u547d\u4ee4\u53ca\u63cf\u8ff0"),(0,n.kt)("th",{parentName:"tr",align:null},"\u793a\u4f8b"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"1"),(0,n.kt)("td",{parentName:"tr",align:null},"DEL key \u8be5\u547d\u4ee4\u7528\u4e8e\u5728 key \u5b58\u5728\u65f6\u5220\u9664 key\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1adel ydlclass5")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"2"),(0,n.kt)("td",{parentName:"tr",align:null},"DUMP key \u5e8f\u5217\u5316\u7ed9\u5b9a key \uff0c\u5e76\u8fd4\u56de\u88ab\u5e8f\u5217\u5316\u7684\u503c\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aDUMP key1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"3"),(0,n.kt)("td",{parentName:"tr",align:null},"EXISTS key \u68c0\u67e5\u7ed9\u5b9a key \u662f\u5426\u5b58\u5728\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aexists ydlclass")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"4"),(0,n.kt)("td",{parentName:"tr",align:null},"EXPIRE key seconds \u4e3a\u7ed9\u5b9a key \u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\uff0c\u4ee5\u79d2\u8ba1\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aexpire ydlclass 5")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"6"),(0,n.kt)("td",{parentName:"tr",align:null},"PEXPIRE key milliseconds \u8bbe\u7f6e key \u7684\u8fc7\u671f\u65f6\u95f4\u4ee5\u6beb\u79d2\u8ba1\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1aPEXPIRE set3 3000")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"8"),(0,n.kt)("td",{parentName:"tr",align:null},"KEYS pattern \u67e5\u627e\u6240\u6709\u7b26\u5408\u7ed9\u5b9a\u6a21\u5f0f( pattern)\u7684 key \u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1akeys *")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"10"),(0,n.kt)("td",{parentName:"tr",align:null},"PERSIST key \u79fb\u9664 key \u7684\u8fc7\u671f\u65f6\u95f4\uff0ckey \u5c06\u6301\u4e45\u4fdd\u6301\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1apersist set2")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"11"),(0,n.kt)("td",{parentName:"tr",align:null},"PTTL key \u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\u8fd4\u56de key \u7684\u5269\u4f59\u7684\u8fc7\u671f\u65f6\u95f4\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1apttl set2")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"12"),(0,n.kt)("td",{parentName:"tr",align:null},"TTL key \u4ee5\u79d2\u4e3a\u5355\u4f4d\uff0c\u8fd4\u56de\u7ed9\u5b9a key \u7684\u5269\u4f59\u751f\u5b58\u65f6\u95f4(TTL, time to live)\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1attl set2")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"13"),(0,n.kt)("td",{parentName:"tr",align:null},"RANDOMKEY \u4ece\u5f53\u524d\u6570\u636e\u5e93\u4e2d\u968f\u673a\u8fd4\u56de\u4e00\u4e2a key \u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1a randomkey")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"14"),(0,n.kt)("td",{parentName:"tr",align:null},"RENAME key newkey \u4fee\u6539 key \u7684\u540d\u79f0"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1arename set5 set8")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"15"),(0,n.kt)("td",{parentName:"tr",align:null},"RENAMENX key newkey \u4ec5\u5f53 newkey \u4e0d\u5b58\u5728\u65f6\uff0c\u5c06 key \u6539\u540d\u4e3a newkey \u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1arenamenx set8 set10")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"16"),(0,n.kt)("td",{parentName:"tr",align:null},"TYPE key \u8fd4\u56de key \u6240\u50a8\u5b58\u7684\u503c\u7684\u7c7b\u578b\u3002"),(0,n.kt)("td",{parentName:"tr",align:null},"\u793a\u4f8b\uff1atype set10")))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"1\u5220\u9664\ndel user1\n2\u67e5\u770b\u6240\u6709\u7684key  \nkeys *     \u751f\u4ea7\u73af\u5883\u4e0b\uff0c\u522b\u7528\n3\u5b58\u5728key\nexists user1\n4\u5b58\u6d3b\u65f6\u95f4\nexpire ydlclass 5\n5\u5269\u4f59\u5b58\u6d3b\u65f6\u95f4   \u767b\u9646\u7eed\u671f\npttl user1\n6\u968f\u673a\u83b7\u53d6 key\nrandomkey\n")),(0,n.kt)("h3",{id:"6\u5bf9zset\u7684\u64cd\u4f5c-\u91cd\u8981\u70ed\u641c"},"6\u3001\u5bf9ZSet\u7684\u64cd\u4f5c-\u91cd\u8981\uff08\u70ed\u641c\uff09"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Redis\u6709\u5e8f\u96c6\u5408\u548c\u96c6\u5408\u4e00\u6837\u4e5f\u662fstring\u7c7b\u578b\u5143\u7d20\u7684\u96c6\u5408,\u4e14\u4e0d\u5141\u8bb8\u91cd\u590d\u7684\u6210\u5458"),(0,n.kt)("li",{parentName:"ul"},"\u5b83\u7528\u6765\u4fdd\u5b58\u9700\u8981\u6392\u5e8f\u7684\u6570\u636e\uff0c\u4f8b\u5982\u6392\u884c\u699c\uff0c\u4e00\u4e2a\u73ed\u7684\u8bed\u6587\u6210\u7ee9\uff0c\u4e00\u4e2a\u516c\u53f8\u7684\u5458\u5de5\u5de5\u8d44\uff0c\u4e00\u4e2a\u8bba\u575b\u7684\u5e16\u5b50\u7b49\u3002"),(0,n.kt)("li",{parentName:"ul"},"\u6709\u5e8f\u96c6\u5408\u4e2d\uff0c\u6bcf\u4e2a\u5143\u7d20\u90fd\u5e26\u6709score\uff08\u6743\u91cd\uff09\uff0c\u4ee5\u6b64\u6765\u5bf9\u5143\u7d20\u8fdb\u884c\u6392\u5e8f"),(0,n.kt)("li",{parentName:"ul"},"\u5b83\u6709\u4e09\u4e2a\u5143\u7d20\uff1akey\u3001member\u548cscore\u3002\u4ee5\u8bed\u6587\u6210\u7ee9\u4e3a\u4f8b\uff0ckey\u662f\u8003\u8bd5\u540d\u79f0\uff08\u671f\u4e2d\u8003\u8bd5\u3001\u671f\u672b\u8003\u8bd5\u7b49\uff09\uff0cmember\u662f\u5b66\u751f\u540d\u5b57\uff0cscore\u662f\u6210\u7ee9\u3002",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u4e92\u8054\u7f51\uff0c\u5fae\u535a\u70ed\u641c\uff0c\u6700\u70ed\u65b0\u95fb\uff0c\u7edf\u8ba1\u7f51\u7ad9pv")))),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"#")),(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"\u547d\u4ee4\u53ca\u63cf\u8ff0")),(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"\u793a\u4f8b")))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"1"),(0,n.kt)("td",{parentName:"tr",align:null},"ZADD key score1 member1 ","[score2 member2]"," \u5411\u6709\u5e8f\u96c6\u5408\u6dfb\u52a0\u4e00\u4e2a\u6216\u591a\u4e2a\u6210\u5458\uff0c\u6216\u8005\u66f4\u65b0\u5df2\u5b58\u5728\u6210\u5458\u7684\u5206\u6570"),(0,n.kt)("td",{parentName:"tr",align:null},"\u5411ZSet\u4e2d\u6dfb\u52a0\u9875\u9762\u7684PV\u503c ZADD pv_zset 120 page1.html 100 page2.html 140 page3.html")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"2"),(0,n.kt)("td",{parentName:"tr",align:null},"ZCARD key \u83b7\u53d6\u6709\u5e8f\u96c6\u5408\u7684\u6210\u5458\u6570"),(0,n.kt)("td",{parentName:"tr",align:null},"\u83b7\u53d6\u6240\u6709\u7684\u7edf\u8ba1PV\u9875\u9762\u6570\u91cf ZCARD pv_zset")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"3"),(0,n.kt)("td",{parentName:"tr",align:null},"ZCOUNT key min max \u8ba1\u7b97\u5728\u6709\u5e8f\u96c6\u5408\u4e2d\u6307\u5b9a\u533a\u95f4\u5206\u6570\u7684\u6210\u5458\u6570"),(0,n.kt)("td",{parentName:"tr",align:null},"\u83b7\u53d6PV\u5728120-140\u5728\u4e4b\u95f4\u7684\u9875\u9762\u6570\u91cf ZCOUNT pv_zset 120 140")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"4"),(0,n.kt)("td",{parentName:"tr",align:null},"ZINCRBY key increment member \u6709\u5e8f\u96c6\u5408\u4e2d\u5bf9\u6307\u5b9a\u6210\u5458\u7684\u5206\u6570\u52a0\u4e0a\u589e\u91cf increment"),(0,n.kt)("td",{parentName:"tr",align:null},"\u7ed9page1.html\u7684PV\u503c+1 ZINCRBY pv_zset 1 page1.html")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"5"),(0,n.kt)("td",{parentName:"tr",align:null},"ZINTERSTORE destination numkeys key ","[key ...]"," \u8ba1\u7b97\u7ed9\u5b9a\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u6709\u5e8f\u96c6\u7684\u4ea4\u96c6\u5e76\u5c06\u7ed3\u679c\u96c6\u5b58\u50a8\u5728\u65b0\u7684\u6709\u5e8f\u96c6\u5408 key \u4e2d"),(0,n.kt)("td",{parentName:"tr",align:null},"\u521b\u5efa\u4e24\u4e2a\u4fdd\u5b58PV\u7684ZSET\uff1a ZADD pv_zset1 10 page1.html 20 page2.html ZADD pv_zset2 5 page1.html 10 page2.html ZINTERSTORE pv_zset_result 2 pv_zset1 pv_zset2")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"7"),(0,n.kt)("td",{parentName:"tr",align:null},"ZRANGE key start stop ","[WITHSCORES]"," \u901a\u8fc7\u7d22\u5f15\u533a\u95f4\u8fd4\u56de\u6709\u5e8f\u96c6\u5408\u6307\u5b9a\u533a\u95f4\u5185\u7684\u6210\u5458"),(0,n.kt)("td",{parentName:"tr",align:null},"\u83b7\u53d6\u6240\u6709\u7684\u5143\u7d20\uff0c\u5e76\u53ef\u4ee5\u8fd4\u56de\u6bcf\u4e2akey\u5bf9\u4e00\u4e2a\u7684score ZRANGE pv_zset_result 0 -1 WITHSCORES")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"9"),(0,n.kt)("td",{parentName:"tr",align:null},"ZRANGEBYSCORE key min max ","[WITHSCORES][LIMIT]"," \u901a\u8fc7\u5206\u6570\u8fd4\u56de\u6709\u5e8f\u96c6\u5408\u6307\u5b9a\u533a\u95f4\u5185\u7684\u6210\u5458"),(0,n.kt)("td",{parentName:"tr",align:null},"\u83b7\u53d6ZSET\u4e2d120-140\u4e4b\u95f4\u7684\u6240\u6709\u5143\u7d20 ZRANGEBYSCORE pv_zset 120 140")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"10"),(0,n.kt)("td",{parentName:"tr",align:null},"ZRANK key member \u8fd4\u56de\u6709\u5e8f\u96c6\u5408\u4e2d\u6307\u5b9a\u6210\u5458\u7684\u7d22\u5f15"),(0,n.kt)("td",{parentName:"tr",align:null},"\u83b7\u53d6page1.html\u7684pv\u6392\u540d\uff08\u5347\u5e8f\uff09 ZRANK pv_zset page3.html")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"11"),(0,n.kt)("td",{parentName:"tr",align:null},"ZREM key member ","[member ...]"," \u79fb\u9664\u6709\u5e8f\u96c6\u5408\u4e2d\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u6210\u5458"),(0,n.kt)("td",{parentName:"tr",align:null},"\u79fb\u9664page1.html ZREM pv_zset page1.html")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"15"),(0,n.kt)("td",{parentName:"tr",align:null},"ZREVRANGE key start stop ","[WITHSCORES]"," \u8fd4\u56de\u6709\u5e8f\u96c6\u4e2d\u6307\u5b9a\u533a\u95f4\u5185\u7684\u6210\u5458\uff0c\u901a\u8fc7\u7d22\u5f15\uff0c\u5206\u6570\u4ece\u9ad8\u5230\u4f4e"),(0,n.kt)("td",{parentName:"tr",align:null},"\u6309\u7167PV\u964d\u5e8f\u83b7\u53d6\u9875\u9762 ZREVRANGE pv_zset 0 -1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"17"),(0,n.kt)("td",{parentName:"tr",align:null},"ZREVRANK key member \u8fd4\u56de\u6709\u5e8f\u96c6\u5408\u4e2d\u6307\u5b9a\u6210\u5458\u7684\u6392\u540d\uff0c\u6709\u5e8f\u96c6\u6210\u5458\u6309\u5206\u6570\u503c\u9012\u51cf(\u4ece\u5927\u5230\u5c0f)\u6392\u5e8f"),(0,n.kt)("td",{parentName:"tr",align:null},"\u83b7\u53d6page2.html\u7684pv\u6392\u540d\uff08\u964d\u5e8f\uff09 ZREVRANK pv_zset page2.html")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"18"),(0,n.kt)("td",{parentName:"tr",align:null},"ZSCORE key member \u8fd4\u56de\u6709\u5e8f\u96c6\u4e2d\uff0c\u6210\u5458\u7684\u5206\u6570\u503c"),(0,n.kt)("td",{parentName:"tr",align:null},"\u83b7\u53d6page3.html\u7684\u5206\u6570\u503c ZSCORE pv_zset page3.html")))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"1\u6dfb\u52a0\nzadd pv 100 page1.html 200 page2.html 300 page3.html\n2\u67e5\u770b\nzcard pv\n3\u67e5\u8be2\u6307\u5b9a\u6743\u91cd\u8303\u56f4\u7684\u6210\u5458\u6570\nZCOUNT pv 150 500\n4\u589e\u52a0\u6743\u91cd\nZINCRBY pv 1 page1.html\n5\u4ea4\u96c6\nZADD pv_zset1 10 page1.html 20  page2.html\nZADD pv_zset2 5 page1.html 10  page2.html\nZINTERSTORE pv_zset_result 2 pv_zset1  pv_zset2\n6\u6210\u5458\u7684\u5206\u6570\u503c\nZSCORE pv_zset page3.html   \n7 \u83b7\u53d6\u4e0b\u6807\u8303\u56f4\u5185\u7684\u6210\u5458\u3002 \u6392\u5e8f\uff0c\u9ed8\u8ba4\u6743\u91cd\u7531\u4f4e\u5230\u9ad8\nZRANGE pv 0 -1\n8\u83b7\u53d6\u7531\u9ad8\u5230\u4f4e\u7684\u51e0\u4e2a\u6210\u5458\uff08reverse\uff09\u4f7f\u7528\u6700\u591a\u7684\n\u6548\u7387\u5f88\u9ad8\uff0c\u56e0\u4e3a\u672c\u8eabzset\u5c31\u662f\u6392\u597d\u5e8f\u7684\u3002\nZREVRANGE key start stop\n")),(0,n.kt)("h3",{id:"7\u5bf9\u4f4d\u56febitmaps\u7684\u64cd\u4f5c"},"7\u3001\u5bf9\u4f4d\u56feBitMaps\u7684\u64cd\u4f5c"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u8ba1\u7b97\u673a\u6700\u5c0f\u7684\u5b58\u50a8\u5355\u4f4d\u662f\u4f4dbit\uff0cBitmaps\u662f\u9488\u5bf9\u4f4d\u7684\u64cd\u4f5c\u7684\uff0c\u76f8\u8f83\u4e8eString\u3001Hash\u3001Set\u7b49\u5b58\u50a8\u65b9\u5f0f\u66f4\u52a0\u8282\u7701\u7a7a\u95f4")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Bitmaps\u4e0d\u662f\u4e00\u79cd\u6570\u636e\u7ed3\u6784\uff0c\u64cd\u4f5c\u662f\u57fa\u4e8eString\u7ed3\u6784\u7684\uff0c\u4e00\u4e2aString\u6700\u5927\u53ef\u4ee5\u5b58\u50a8512M\uff0c\u90a3\u4e48\u4e00\u4e2aBitmaps\u5219\u53ef\u4ee5\u8bbe\u7f6e2^32\u4e2a\u4f4d")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Bitmaps\u5355\u72ec\u63d0\u4f9b\u4e86\u4e00\u5957\u547d\u4ee4\uff0c\u6240\u4ee5\u5728Redis\u4e2d\u4f7f\u7528Bitmaps\u548c\u4f7f\u7528\u5b57\u7b26\u4e32\u7684\u65b9\u6cd5\u4e0d\u592a\u76f8\u540c\u3002\u53ef\u4ee5",(0,n.kt)("strong",{parentName:"p"},"\u628aBitmaps\u60f3\u8c61\u6210\u4e00\u4e2a\u4ee5\u4f4d\u4e3a\u5355\u4f4d\u7684\u6570\u7ec4"),"\uff0c\u6570\u7ec4\u7684\u6bcf\u4e2a\u5355\u5143",(0,n.kt)("strong",{parentName:"p"},"\u53ea\u80fd\u5b58\u50a80\u548c1"),"\uff0c\u6570\u7ec4\u7684\u4e0b\u6807\u5728Bitmaps\u4e2d\u53eb\u505a\u504f\u79fb\u91cfoffset"),(0,n.kt)("p",{parentName:"li"},"  ",(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220222170630408-2b02c8a7.png",alt:"image-20220222170630408"}),"image-20220222170630408")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"BitMaps \u547d\u4ee4\u8bf4\u660e\uff1a",(0,n.kt)("strong",{parentName:"p"},"\u5c06\u6bcf\u4e2a\u72ec\u7acb\u7528\u6237\u662f\u5426\u8bbf\u95ee\u8fc7\u7f51\u7ad9\u5b58\u653e\u5728Bitmaps\u4e2d\uff0c \u5c06\u8bbf\u95ee\u7684\u7528\u6237\u8bb0\u505a1\uff0c \u6ca1\u6709\u8bbf\u95ee\u7684\u7528\u6237\u8bb0\u505a0\uff0c \u7528\u504f\u79fb\u91cf\u4f5c\u4e3a\u7528\u6237\u7684id")," \u3002"),(0,n.kt)("p",{parentName:"li"},"  unique:users:2022-04-05 0 1 0 0"))),(0,n.kt)("h4",{id:"71-\u8bbe\u7f6e\u503c"},"7.1 \u8bbe\u7f6e\u503c"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"SETBIT key offset value  \n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"setbit"),"\u547d\u4ee4\u8bbe\u7f6e\u7684vlaue\u53ea\u80fd\u662f",(0,n.kt)("strong",{parentName:"p"},"0"),"\u6216",(0,n.kt)("strong",{parentName:"p"},"1"),"\u4e24\u4e2a\u503c"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u8bbe\u7f6e\u952e\u7684\u7b2coffset\u4e2a\u4f4d\u7684\u503c\uff08\u4ece0\u7b97\u8d77\uff09\uff0c\u5047\u8bbe\u73b0\u5728\u670920\u4e2a\u7528\u6237\uff0c",(0,n.kt)("strong",{parentName:"p"},"uid=0\uff0c5\uff0c11\uff0c15\uff0c19"),"\u7684\u7528\u6237\u5bf9\u7f51\u7ad9\u8fdb\u884c\u4e86\u8bbf\u95ee\uff0c \u90a3\u4e48\u5f53\u524dBitmaps\u521d\u59cb\u5316\u7ed3\u679c\u5982\u56fe\u6240\u793a"),(0,n.kt)("p",{parentName:"li"},"  ",(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220222171326788-dcfd2234.png",alt:"image-20220222171326788"}),"image-20220222171326788")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5177\u4f53\u64cd\u4f5c\u8fc7\u7a0b\u5982\u4e0b\uff0c ",(0,n.kt)("strong",{parentName:"p"},"unique:users:2022-04-05"),"\u4ee3\u88682022-04-05\u8fd9\u5929\u7684\u72ec\u7acb\u8bbf\u95ee\u7528\u6237\u7684Bitmaps"))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"```text\n setbit unique:users:2022-04-05 0  1  \n setbit unique:users:2022-04-05 5 1  \n setbit unique:users:2022-04-05 11 1  \n setbit unique:users:2022-04-05 15 1  \n setbit unique:users:2022-04-05 19 1 \n```\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5f88\u591a\u5e94\u7528\u7684\u7528\u6237id\u4ee5\u4e00\u4e2a\u6307\u5b9a\u6570\u5b57\uff08\u4f8b\u598210000\uff09 \u5f00\u5934\uff0c \u76f4\u63a5\u5c06\u7528\u6237id\u548cBitmaps\u7684\u504f\u79fb\u91cf\u5bf9\u5e94\u52bf\u5fc5\u4f1a\u9020\u6210\u4e00\u5b9a\u7684\u6d6a\u8d39\uff0c \u901a\u5e38\u7684\u505a\u6cd5\u662f\u6bcf\u6b21\u505asetbit\u64cd\u4f5c\u65f6\u5c06\u7528\u6237id\u51cf\u53bb\u8fd9\u4e2a\u6307\u5b9a\u6570\u5b57\u3002"),(0,n.kt)("p",{parentName:"li"},"  10000000 10000005 10000011")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5728\u7b2c\u4e00\u6b21\u521d\u59cb\u5316Bitmaps\u65f6\uff0c \u5047\u5982\u504f\u79fb\u91cf\u975e\u5e38\u5927\uff0c \u90a3\u4e48\u6574\u4e2a\u521d\u59cb\u5316\u8fc7\u7a0b\u6267\u884c\u4f1a\u6bd4\u8f83\u6162\uff0c \u53ef\u80fd\u4f1a\u9020\u6210Redis\u7684\u963b\u585e\u3002"))),(0,n.kt)("h4",{id:"72-\u83b7\u53d6\u503c"},"7.2 \u83b7\u53d6\u503c"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"GETBIT key offset\n")),(0,n.kt)("p",null,"\u83b7\u53d6\u952e\u7684\u7b2coffset\u4f4d\u7684\u503c\uff08\u4ece0\u5f00\u59cb\u7b97\uff09\uff0c\u4f8b\uff1a\u4e0b\u9762\u64cd\u4f5c\u83b7\u53d6id=8\u7684\u7528\u6237\u662f\u5426\u57282022-04-05\u8fd9\u5929\u8bbf\u95ee\u8fc7\uff0c \u8fd4\u56de0\u8bf4\u660e\u6ca1\u6709\u8bbf\u95ee\u8fc7\u3002"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"getbit unique:users:2022-04-05 8\n")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220222171409985-ce0a3e4b.png",alt:"image-20220222171409985"}),"image-20220222171409985"),(0,n.kt)("h4",{id:"73-\u83b7\u53d6bitmaps\u6307\u5b9a\u8303\u56f4\u503c\u4e3a1\u7684\u4e2a\u6570"},"7.3 \u83b7\u53d6Bitmaps\u6307\u5b9a\u8303\u56f4\u503c\u4e3a1\u7684\u4e2a\u6570"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"BITCOUNT key [start end] \n")),(0,n.kt)("p",null,"\u4f8b\uff1a\u4e0b\u9762\u64cd\u4f5c\u8ba1\u7b972022-04-05\u8fd9\u5929\u7684\u72ec\u7acb\u8bbf\u95ee\u7528\u6237\u6570\u91cf\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"bitcount unique:users:2022-04-05  \n")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220222171507374-103ab048.png",alt:"image-20220222171507374"}),"image-20220222171507374"),(0,n.kt)("h4",{id:"74-bitmaps\u95f4\u7684\u8fd0\u7b97"},"7.4 Bitmaps\u95f4\u7684\u8fd0\u7b97"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"BITOP operation destkey key [key, \u2026] \n")),(0,n.kt)("p",null,"bitop\u662f\u4e00\u4e2a\u590d\u5408\u64cd\u4f5c\uff0c \u5b83\u53ef\u4ee5\u505a\u591a\u4e2aBitmaps\u7684and\uff08\u4ea4\u96c6\uff09 \u3001 or\uff08\u5e76\u96c6\uff09 \u3001 not\uff08\u975e\uff09 \u3001 xor\uff08\u5f02\u6216\uff09 \u64cd\u4f5c\u5e76\u5c06\u7ed3\u679c\u4fdd\u5b58\u5728destkey\u4e2d\u3002"),(0,n.kt)("p",null,"\u9700\u6c42\uff1a\u5047\u8bbe2022-04-04\u8bbf\u95ee\u7f51\u7ad9\u7684userid=1\uff0c 2\uff0c 5\uff0c 9\uff0c \u5982\u56fe3-13\u6240\u793a\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"setbit unique:users:2022-04-04 1 1  \nsetbit  unique:users:2022-04-04 2 1  \nsetbit  unique:users:2022-04-04 5 1  \nsetbit  unique:users:2022-04-04 9 1  \n")),(0,n.kt)("p",null,"\u4f8b1\uff1a\u4e0b\u9762\u64cd\u4f5c\u8ba1\u7b97\u51fa2022-04-04\u548c2022-04-05\u4e24\u5929\u90fd\u8bbf\u95ee\u8fc7\u7f51\u7ad9\u7684\u7528\u6237\u6570\u91cf\uff0c \u5982\u4e0b\u6240\u793a\u3002"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"bitop and unique:users:and:2022-04-04_05  unique:users:2022-04-04 unique:users:2022-04-05  \nbitcount unique:users:and:2022-04-04_05\n")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220222172009994-8449f625.png",alt:"image-20220222172009994"}),"image-20220222172009994"),(0,n.kt)("p",null,"\u4f8b2\uff1a\u5982\u679c\u60f3\u7b97\u51fa2022-04-04\u548c2022-04-05\u4efb\u610f\u4e00\u5929\u90fd\u8bbf\u95ee\u8fc7\u7f51\u7ad9\u7684\u7528\u6237\u6570\u91cf\uff08\u4f8b\u5982\u6708\u6d3b\u8dc3\u5c31\u662f\u7c7b\u4f3c\u8fd9\u79cd\uff09 \uff0c \u53ef\u4ee5\u4f7f\u7528or\u6c42\u5e76\u96c6\uff0c \u5177\u4f53\u547d\u4ee4\u5982\u4e0b\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"}," bitop or unique:users:or:2022-04-04_05  unique:users:2022-04-04 unique:users:2022-04-05  \n bitcount unique:users:or:2022-04-04_05\n")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220222172134891-231c6e16.png",alt:"image-20220222172134891"}),"image-20220222172134891"),(0,n.kt)("h3",{id:"8\u5bf9hyperloglog\u7ed3\u6784\u7684\u64cd\u4f5c"},"8\u3001\u5bf9HyperLogLog\u7ed3\u6784\u7684\u64cd\u4f5c"),(0,n.kt)("h4",{id:"81-\u5e94\u7528\u573a\u666f"},"8.1 \u5e94\u7528\u573a\u666f"),(0,n.kt)("p",null,"HyperLogLog\u5e38\u7528\u4e8e\u5927\u6570\u636e\u91cf\u7684\u7edf\u8ba1\uff0c\u6bd4\u5982\u9875\u9762\u8bbf\u95ee\u91cf\u7edf\u8ba1\u6216\u8005\u7528\u6237\u8bbf\u95ee\u91cf\u7edf\u8ba1\u3002"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"\u8981\u7edf\u8ba1\u4e00\u4e2a\u9875\u9762\u7684\u8bbf\u95ee\u91cf\uff08PV\uff09\uff0c\u53ef\u4ee5\u76f4\u63a5\u7528redis\u8ba1\u6570\u5668\u6216\u8005\u76f4\u63a5\u5b58\u6570\u636e\u5e93\u90fd\u53ef\u4ee5\u5b9e\u73b0\uff0c\u5982\u679c\u8981\u7edf\u8ba1\u4e00\u4e2a\u9875\u9762\u7684\u7528\u6237\u8bbf\u95ee\u91cf\uff08UV\uff09\uff0c\u4e00\u4e2a\u7528\u6237\u4e00\u5929\u5185\u5982\u679c\u8bbf\u95ee\u591a\u6b21\u7684\u8bdd\uff0c\u4e5f\u53ea\u80fd\u7b97\u4e00\u6b21\uff0c\u8fd9\u6837\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528SET\u96c6\u5408\u6765\u505a\uff0c\u56e0\u4e3aSET\u96c6\u5408\u662f\u6709**\u53bb\u91cd**\u529f\u80fd\u7684\uff0ckey\u5b58\u50a8\u9875\u9762\u5bf9\u5e94\u7684\u5173\u952e\u5b57\uff0cvalue\u5b58\u50a8\u5bf9\u5e94\u7684userid\uff0c\u8fd9\u79cd\u65b9\u6cd5\u662f\u53ef\u884c\u7684\u3002\u4f46\u5982\u679c\u8bbf\u95ee\u91cf\u8f83\u591a\uff0c\u5047\u5982\u6709\u51e0\u5343\u4e07\u7684\u8bbf\u95ee\u91cf\uff0c\u8fd9\u5c31\u9ebb\u70e6\u4e86\u3002\u4e3a\u4e86\u7edf\u8ba1\u8bbf\u95ee\u91cf\uff0c\u8981\u9891\u7e41\u521b\u5efaSET\u96c6\u5408\u5bf9\u8c61\u3002\n")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220222174354773-ec4613e5.png",alt:"image-20220222174354773"}),"image-20220222174354773"),(0,n.kt)("p",null,"Redis\u5b9e\u73b0HyperLogLog\u7b97\u6cd5\uff0cHyperLogLog \u8fd9\u4e2a\u6570\u636e\u7ed3\u6784\u7684\u53d1\u660e\u4eba \u662fPhilippe Flajolet\uff08\u83f2\u5229\u666e\xb7\u5f17\u62c9\u82e5\u83b1\uff09\u6559\u6388\u3002Redis \u5728 2.8.9 \u7248\u672c\u6dfb\u52a0\u4e86 HyperLogLog \u7ed3\u6784\u3002"),(0,n.kt)("h4",{id:"82-uv\u8ba1\u7b97\u793a\u4f8b"},"8.2 UV\u8ba1\u7b97\u793a\u4f8b"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"node1.ydlclass.cn:6379> help @hyperloglog      \n\nPFADD  key element [element ...]   \nsummary:  Adds the specified elements to the specified HyperLogLog.   \nsince:  2.8.9      \n\nPFCOUNT  key [key ...]   \nsummary:  Return the approximated cardinality\uff08\u57fa\u6570\uff09 of the set(s) observed by the HyperLogLog at  key(s).   \nsince:  2.8.9      \n\nPFMERGE  destkey sourcekey [sourcekey ...]   \nsummary:  Merge N different HyperLogLogs into a single one.   \nsince:  2.8.9  \n")),(0,n.kt)("p",null,"Redis\u96c6\u6210\u7684HyperLogLog\u4f7f\u7528\u8bed\u6cd5\u4e3b\u8981\u6709pfadd\u548cpfcount\uff0c\u987e\u540d\u601d\u4e49\uff0c\u4e00\u4e2a\u662f\u6765\u6dfb\u52a0\u6570\u636e\uff0c\u4e00\u4e2a\u662f\u6765\u7edf\u8ba1\u7684\u3002\u4e3a\u4ec0\u4e48\u7528",(0,n.kt)("strong",{parentName:"p"},"pf"),"\uff1f\u662f\u56e0\u4e3aHyperLogLog \u8fd9\u4e2a\u6570\u636e\u7ed3\u6784\u7684\u53d1\u660e\u4eba \u662fPhilippe Flajolet\u6559\u6388 \uff0c\u6240\u4ee5\u7528\u53d1\u660e\u4eba\u7684\u82f1\u6587\u7f29\u5199\uff0c\u8fd9\u6837\u5bb9\u6613\u8bb0\u4f4f\u8fd9\u4e2a\u8bed\u6cd5\u4e86\u3002"),(0,n.kt)("p",null,"\u4e0b\u9762\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u793a\u4f8b\uff0c\u6765\u6f14\u793a\u5982\u4f55\u8ba1\u7b97uv\u3002"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},'node1.ydlclass.cn:6379> pfadd uv user1  \n(integer) 1  \nnode1.ydlclass.cn:6379> keys *  \n1) "uv"  \nnode1.ydlclass.cn:6379> pfcount uv  \n(integer) 1  \nnode1.ydlclass.cn:6379> pfadd uv user2  \n(integer) 1  \nnode1.ydlclass.cn:6379> pfcount uv  \n(integer) 2  \nnode1.ydlclass.cn:6379> pfadd uv user3  \n(integer) 1  \nnode1.ydlclass.cn:6379> pfcount uv  \n(integer) 3  \nnode1.ydlclass.cn:6379> pfadd uv user4  \n(integer) 1  \nnode1.ydlclass.cn:6379> pfcount uv  \n(integer) 4  \nnode1.ydlclass.cn:6379> pfadd uv user5 user6  user7 user8 user9 user10  \n(integer) 1  node1.ydlclass.cn:6379> pfcount uv  \n(integer) 10  \n')),(0,n.kt)("p",null,"HyperLogLog\u7b97\u6cd5\u4e00\u5f00\u59cb\u5c31\u662f\u4e3a\u4e86\u5927\u6570\u636e\u91cf\u7684\u7edf\u8ba1\u800c\u53d1\u660e\u7684\uff0c\u6240\u4ee5\u5f88\u9002\u5408\u90a3\u79cd\u6570\u636e\u91cf\u5f88\u5927\uff0c\u7136\u540e\u53c8\u6ca1\u8981\u6c42\u4e0d\u80fd\u6709\u4e00\u70b9\u8bef\u5dee\u7684\u8ba1\u7b97\uff0cHyperLogLog \u63d0\u4f9b\u4e0d\u7cbe\u786e\u7684\u53bb\u91cd\u8ba1\u6570\u65b9\u6848\uff0c\u867d\u7136\u4e0d\u7cbe\u786e\u4f46\u662f\u4e5f\u4e0d\u662f\u975e\u5e38\u4e0d\u7cbe\u786e\uff0c\u6807\u51c6\u8bef\u5dee\u662f 0.81%\uff0c\u4e0d\u8fc7\u8fd9\u5bf9\u4e8e\u9875\u9762\u7528\u6237\u8bbf\u95ee\u91cf\u662f\u6ca1\u5f71\u54cd\u7684\uff0c\u56e0\u4e3a\u8fd9\u79cd\u7edf\u8ba1\u53ef\u80fd\u662f\u8bbf\u95ee\u91cf\u975e\u5e38\u5de8\u5927\uff0c\u4f46\u662f\u53c8\u6ca1\u5fc5\u8981\u505a\u5230\u7edd\u5bf9\u51c6\u786e\uff0c\u8bbf\u95ee\u91cf\u5bf9\u51c6\u786e\u7387\u8981\u6c42\u6ca1\u90a3\u4e48\u9ad8\uff0c\u4f46\u662f\u6027\u80fd\u5b58\u50a8\u65b9\u9762\u8981\u6c42\u5c31\u6bd4\u8f83\u9ad8\u4e86\uff0c\u800cHyperLogLog\u6b63\u597d\u7b26\u5408\u8fd9\u79cd\u8981\u6c42\uff0c\u4e0d\u4f1a\u5360\u7528\u592a\u591a\u5b58\u50a8\u7a7a\u95f4\uff0c\u540c\u65f6\u6027\u80fd\u4e0d\u9519"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"pfadd"),"\u548c",(0,n.kt)("strong",{parentName:"p"},"pfcount"),"\u5e38\u7528\u4e8e\u7edf\u8ba1\uff0c\u9700\u6c42\uff1a\u5047\u5982\u4e24\u4e2a\u9875\u9762\u5f88\u76f8\u8fd1\uff0c\u73b0\u5728\u60f3\u7edf\u8ba1\u8fd9\u4e24\u4e2a\u9875\u9762\u7684\u7528\u6237\u8bbf\u95ee\u91cf\u5462\uff1f\u8fd9\u91cc\u5c31\u53ef\u4ee5\u7528",(0,n.kt)("strong",{parentName:"p"},"pfmerge"),"\u5408\u5e76\u7edf\u8ba1\u4e86\uff0c\u8bed\u6cd5\u5982\u4f8b\u5b50\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"node1.ydlclass.cn:6379> pfadd page1 user1 user2  user3 user4 user5  \n(integer) 1  \nnode1.ydlclass.cn:6379> pfadd page2 user1 user2  user3 user6 user7  \n(integer) 1  \nnode1.ydlclass.cn:6379> pfmerge page1+page2  page1 page2  \nOK  \nnode1.ydlclass.cn:6379> pfcount page1+page2  \n(integer) 7\n")),(0,n.kt)("h4",{id:"83-hyperloglog\u4e3a\u4ec0\u4e48\u9002\u5408\u505a\u5927\u91cf\u6570\u636e\u7684\u7edf\u8ba1"},"8.3 HyperLogLog\u4e3a\u4ec0\u4e48\u9002\u5408\u505a\u5927\u91cf\u6570\u636e\u7684\u7edf\u8ba1"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Redis HyperLogLog \u662f\u7528\u6765\u505a\u57fa\u6570\u7edf\u8ba1\u7684\u7b97\u6cd5\uff0cHyperLogLog \u7684\u4f18\u70b9\u662f\uff0c\u5728\u8f93\u5165\u5143\u7d20\u7684\u6570\u91cf\u6216\u8005\u4f53\u79ef\u975e\u5e38\u975e\u5e38\u5927\u65f6\uff0c\u8ba1\u7b97\u57fa\u6570\u6240\u9700\u7684\u7a7a\u95f4\u603b\u662f\u56fa\u5b9a\u7684\u3001\u5e76\u4e14\u662f\u5f88\u5c0f\u7684\u3002"),(0,n.kt)("li",{parentName:"ul"},"\u5728 Redis \u91cc\u9762\uff0c\u6bcf\u4e2a HyperLogLog \u952e\u53ea\u9700\u8981\u82b1\u8d39 12 KB \u5185\u5b58\uff0c\u5c31\u53ef\u4ee5\u8ba1\u7b97\u63a5\u8fd1 2^64 \u4e2a\u4e0d\u540c\u5143\u7d20\u7684\u57fa\u6570\u3002\u8fd9\u548c\u8ba1\u7b97\u57fa\u6570\u65f6\uff0c\u5143\u7d20\u8d8a\u591a\u8017\u8d39\u5185\u5b58\u5c31\u8d8a\u591a\u7684\u96c6\u5408\u5f62\u6210\u9c9c\u660e\u5bf9\u6bd4\u3002"),(0,n.kt)("li",{parentName:"ul"},"\u4f46\u662f\uff0c\u56e0\u4e3a HyperLogLog \u53ea\u4f1a\u6839\u636e\u8f93\u5165\u5143\u7d20\u6765\u8ba1\u7b97\u57fa\u6570\uff0c\u800c\u4e0d\u4f1a\u50a8\u5b58\u8f93\u5165\u5143\u7d20\u672c\u8eab\uff0c\u6240\u4ee5 HyperLogLog \u4e0d\u80fd\u50cf\u96c6\u5408\u90a3\u6837\uff0c\u8fd4\u56de\u8f93\u5165\u7684\u5404\u4e2a\u5143\u7d20\u3002")),(0,n.kt)("p",null,"\u4ec0\u4e48\u662f\u57fa\u6570\uff1f"),(0,n.kt)("p",null,"\u6bd4\u5982\uff1a\u6570\u636e\u96c6{1, 3, 5, 7, 5, 7, 8}\uff0c\u90a3\u4e48\u8fd9\u4e2a\u6570\u636e\u96c6\u7684\u57fa\u6570\u96c6{1, 3, 5, 7, 8}\uff0c\u57fa\u6570\uff08\u4e0d\u91cd\u590d\u5143\u7d20\uff09\u4e3a5\u3002\u57fa\u6570\u4f30\u8ba1\u5c31\u662f\u5728\u8bef\u5dee\u53ef\u63a5\u53d7\u7684\u8303\u56f4\u5185\uff0c\u5feb\u901f\u8ba1\u7b97\u57fa\u6570\u3002"),(0,n.kt)("h2",{id:"\u7b2c\u4e94\u7ae0-redis-java-api\u64cd\u4f5c"},"\u7b2c\u4e94\u7ae0 Redis Java API\u64cd\u4f5c"),(0,n.kt)("p",null,"Redis\u4e0d\u4ec5\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u884c\u8fdb\u884c\u64cd\u4f5c\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7JavaAPI\u64cd\u4f5c\uff0c\u901a\u8fc7\u4f7f\u7528Java API\u6765\u5bf9Redis\u6570\u636e\u5e93\u4e2d\u7684\u5404\u79cd\u6570\u636e\u7c7b\u578b\u64cd\u4f5c\u3002"),(0,n.kt)("h3",{id:"1\u521b\u5efamaven\u5de5\u7a0b\u5e76\u5bfc\u5165\u4f9d\u8d56"},"1\u3001\u521b\u5efamaven\u5de5\u7a0b\u5e76\u5bfc\u5165\u4f9d\u8d56"),(0,n.kt)("h4",{id:"11-\u521b\u5efamaven\u5de5\u7a0b"},"1.1 \u521b\u5efaMaven\u5de5\u7a0b"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"groupId"),(0,n.kt)("th",{parentName:"tr",align:null},"com.ydlclass"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"artifactId"),(0,n.kt)("td",{parentName:"tr",align:null},"redis_op")))),(0,n.kt)("h4",{id:"12-\u5bfc\u5165pom\u4f9d\u8d56"},"1.2 \u5bfc\u5165POM\u4f9d\u8d56"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-xml"},"<dependencies>\n    <dependency>\n        <groupId>redis.clients</groupId>\n        <artifactId>jedis</artifactId>\n        <version>2.9.0</version>\n    </dependency>\n    <dependency>\n        <groupId>junit</groupId>\n        <artifactId>junit</artifactId>\n        <version>4.12</version>\n        <scope>test</scope>\n    </dependency>\n    <dependency>\n        <groupId>org.testng</groupId>\n        <artifactId>testng</artifactId>\n        <version>6.14.3</version>\n        <scope>test</scope>\n    </dependency>\n</dependencies>\n<build>\n    <plugins>\n        <plugin>\n            <groupId>org.apache.maven.plugins</groupId>\n            <artifactId>maven-compiler-plugin</artifactId>\n            <version>3.0</version>\n            <configuration>\n                <source>1.8</source>\n                <target>1.8</target>\n                <encoding>UTF-8</encoding>\n                \x3c!--    <verbal>true</verbal>--\x3e\n            </configuration>\n        </plugin>\n    </plugins>\n</build>\n")),(0,n.kt)("h3",{id:"2\u521b\u5efa\u5305\u7ed3\u6784\u548c\u7c7b"},"2\u3001\u521b\u5efa\u5305\u7ed3\u6784\u548c\u7c7b"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u5728test\u76ee\u5f55\u521b\u5efa com.ydlclass.redis.api_test \u5305\u7ed3\u6784"),(0,n.kt)("li",{parentName:"ol"},"\u521b\u5efaRedisTest\u7c7b")),(0,n.kt)("h3",{id:"3\u8fde\u63a5\u4ee5\u53ca\u5173\u95edredis\u5ba2\u6237\u7aef"},"3\u3001\u8fde\u63a5\u4ee5\u53ca\u5173\u95edredis\u5ba2\u6237\u7aef"),(0,n.kt)("p",null,"\u56e0\u4e3a\u540e\u7eed\u6d4b\u8bd5\u90fd\u9700\u8981\u7528\u5230Redis\u8fde\u63a5\uff0c\u6240\u4ee5\uff0c\u6211\u4eec\u5148\u521b\u5efa\u4e00\u4e2aJedisPool\u7528\u4e8e\u83b7\u53d6Redis\u8fde\u63a5\u3002\u6b64\u5904\uff0c\u6211\u4eec\u57fa\u4e8eTestNG\u6765\u6d4b\u8bd5\u5404\u7c7b\u7684API\u3002\u4f7f\u7528@BeforeTest\u5728\u6267\u884c\u6d4b\u8bd5\u7528\u4f8b\u524d\uff0c\u521b\u5efaRedis\u8fde\u63a5\u6c60\u3002\u4f7f\u7528@AfterTest\u5728\u6267\u884c\u6d4b\u8bd5\u7528\u4f8b\u540e\uff0c\u5173\u95ed\u8fde\u63a5\u6c60\u3002"),(0,n.kt)("p",null,"\u5b9e\u73b0\u6b65\u9aa4\uff1a"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u521b\u5efaJedisPoolConfig\u914d\u7f6e\u5bf9\u8c61\uff0c\u6307\u5b9a\u6700\u5927\u7a7a\u95f2\u8fde\u63a5\u4e3a10\u4e2a\u3001\u6700\u5927\u7b49\u5f85\u65f6\u95f4\u4e3a3000\u6beb\u79d2\u3001\u6700\u5927\u8fde\u63a5\u6570\u4e3a50\u3001\u6700\u5c0f\u7a7a\u95f2\u8fde\u63a55\u4e2a")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u521b\u5efaJedisPool")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u4f7f\u7528@Test\u6ce8\u89e3\uff0c\u7f16\u5199\u6d4b\u8bd5\u7528\u4f8b\uff0c\u67e5\u770bRedis\u4e2d\u6240\u6709\u7684key"),(0,n.kt)("p",{parentName:"li"}," a) \u4eceRedis\u8fde\u63a5\u6c60\u83b7\u53d6Redis\u8fde\u63a5"),(0,n.kt)("p",{parentName:"li"}," b) \u8c03\u7528keys\u65b9\u6cd5\u83b7\u53d6\u6240\u6709\u7684key"),(0,n.kt)("p",{parentName:"li"}," c) \u904d\u5386\u6253\u5370\u6240\u6709key"))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-java"},'package com.ydlclass.redis.api_test;\n\nimport org.junit.After;\nimport org.testng.annotations.AfterTest;\nimport org.testng.annotations.BeforeTest;\nimport org.testng.annotations.Test;\nimport redis.clients.jedis.Jedis;\nimport redis.clients.jedis.JedisPool;\nimport redis.clients.jedis.JedisPoolConfig;\n\nimport java.util.List;\nimport java.util.Set;\n\n/**\n * 1.   \u521b\u5efaJedisPoolConfig\u914d\u7f6e\u5bf9\u8c61\uff0c\u6307\u5b9a\u6700\u5927\u7a7a\u95f2\u8fde\u63a5\u4e3a10\u4e2a\u3001\u6700\u5927\u7b49\u5f85\u65f6\u95f4\u4e3a3000\u6beb\u79d2\u3001\u6700\u5927\u8fde\u63a5\u6570\u4e3a50\u3001\u6700\u5c0f\u7a7a\u95f2\u8fde\u63a55\u4e2a\n * 2.   \u521b\u5efaJedisPool\n * 3.   \u4f7f\u7528@Test\u6ce8\u89e3\uff0c\u7f16\u5199\u6d4b\u8bd5\u7528\u4f8b\uff0c\u67e5\u770bRedis\u4e2d\u6240\u6709\u7684key\n * a)   \u4eceRedis\u8fde\u63a5\u6c60\u83b7\u53d6Redis\u8fde\u63a5\n * b)   \u8c03\u7528keys\u65b9\u6cd5\u83b7\u53d6\u6240\u6709\u7684key\n * c)   \u904d\u5386\u6253\u5370\u6240\u6709key\n */\npublic class RedisTest {\n\n    private JedisPool jedisPool;\n\n    @BeforeTest\n    public void beforeTest() {\n        // JedisPoolConfig\u914d\u7f6e\u5bf9\u8c61\n        JedisPoolConfig config = new JedisPoolConfig();\n        // \u6307\u5b9a\u6700\u5927\u7a7a\u95f2\u8fde\u63a5\u4e3a10\u4e2a\n        config.setMaxIdle(10);\n        // \u6700\u5c0f\u7a7a\u95f2\u8fde\u63a55\u4e2a\n        config.setMinIdle(5);\n        // \u6700\u5927\u7b49\u5f85\u65f6\u95f4\u4e3a3000\u6beb\u79d2\n        config.setMaxWaitMillis(3000);\n        // \u6700\u5927\u8fde\u63a5\u6570\u4e3a50\n        config.setMaxTotal(50);\n\n        jedisPool = new JedisPool(config, "192.168.200.131", 6379);\n    }\n\n    @Test\n    public void keysTest() {\n        // \u4eceRedis\u8fde\u63a5\u6c60\u83b7\u53d6Redis\u8fde\u63a5\n        Jedis jedis = jedisPool.getResource();\n        // \u8c03\u7528keys\u65b9\u6cd5\u83b7\u53d6\u6240\u6709\u7684key\n        Set<String> keySet = jedis.keys("*");\n\n        for (String key : keySet) {\n            System.out.println(key);\n        }\n    }\n\n\n    @AfterTest\n    public void afterTest() {\n        // \u5173\u95ed\u8fde\u63a5\u6c60\n        jedisPool.close();\n    }\n}\n')),(0,n.kt)("h3",{id:"4\u64cd\u4f5cstring\u7c7b\u578b\u6570\u636e"},"4\u3001\u64cd\u4f5cstring\u7c7b\u578b\u6570\u636e"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u6dfb\u52a0\u4e00\u4e2astring\u7c7b\u578b\u6570\u636e\uff0ckey\u4e3apv\uff0c\u7528\u4e8e\u4fdd\u5b58pv\u7684\u503c\uff0c\u521d\u59cb\u503c\u4e3a0"),(0,n.kt)("li",{parentName:"ol"},"\u67e5\u8be2\u8be5key\u5bf9\u5e94\u7684\u6570\u636e"),(0,n.kt)("li",{parentName:"ol"},"\u4fee\u6539pv\u4e3a1000"),(0,n.kt)("li",{parentName:"ol"},"\u5b9e\u73b0\u6574\u5f62\u6570\u636e\u539f\u5b50\u81ea\u589e\u64cd\u4f5c +1"),(0,n.kt)("li",{parentName:"ol"},"\u5b9e\u73b0\u6574\u5f62\u8be5\u6570\u636e\u539f\u5b50\u81ea\u589e\u64cd\u4f5c +1000")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-java"},'@Test\n    public void stringTest() {\n        // \u83b7\u53d6Jedis\u8fde\u63a5\n        Jedis jedis = jedisPool.getResource();\n\n        // 1.\u6dfb\u52a0\u4e00\u4e2astring\u7c7b\u578b\u6570\u636e\uff0ckey\u4e3apv\uff0c\u7528\u4e8e\u4fdd\u5b58pv\u7684\u503c\uff0c\u521d\u59cb\u503c\u4e3a0\n        jedis.set("pv", "0");\n\n        // 2.\u67e5\u8be2\u8be5key\u5bf9\u5e94\u7684\u6570\u636e\n        System.out.println("pv:" + jedis.get("pv"));\n\n        // 3.\u4fee\u6539pv\u4e3a1000\n        jedis.set("pv", "1000");\n\n        // 4.\u5b9e\u73b0\u6574\u5f62\u6570\u636e\u539f\u5b50\u81ea\u589e\u64cd\u4f5c +1\n        jedis.incr("pv");\n\n        // 5.\u5b9e\u73b0\u6574\u5f62\u8be5\u6570\u636e\u539f\u5b50\u81ea\u589e\u64cd\u4f5c +1000\n        jedis.incrBy("pv", 1000);\n\n        System.out.println(jedis.get("pv"));\n\n        // \u5c06jedis\u5bf9\u8c61\u653e\u56de\u5230\u8fde\u63a5\u6c60\n        jedis.close();\n    }\n')),(0,n.kt)("h3",{id:"5\u64cd\u4f5chash\u5217\u8868\u7c7b\u578b\u6570\u636e"},"5\u3001\u64cd\u4f5chash\u5217\u8868\u7c7b\u578b\u6570\u636e"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u5f80Hash\u7ed3\u6784\u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u5546\u54c1\u5e93\u5b58"),(0,n.kt)("p",{parentName:"li"},"a) iphone11 => 10000"),(0,n.kt)("p",{parentName:"li"},"b) macbookpro => 9000")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u83b7\u53d6Hash\u4e2d\u6240\u6709\u7684\u5546\u54c1")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u65b0\u589e3000\u4e2amacbookpro\u5e93\u5b58")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u5220\u9664\u6574\u4e2aHash\u7684\u6570\u636e"))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-java"},'@Test\n    public void testHash(){\n        //\u4ece\u6c60\u5b50\u91cc\u54ea\u4e00\u4e2a\u8fde\u63a5\n        Jedis jedis = jedisPool.getResource();\n\n        //1. \u5f80Hash\u7ed3\u6784\u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u5546\u54c1\u5e93\u5b58 goods\n        //   a)   iphone13 => 10000\n        //   b)   macbookpro => 9000\n        jedis.hset("goods", "iphone13", "10000");\n        jedis.hset("goods", "macbookpro", "9000");\n        //2. \u83b7\u53d6Hash\u4e2d\u6240\u6709\u7684\u5546\u54c1\n        Set<String> goods = jedis.hkeys("goods");\n        for (String good : goods) {\n            System.out.println(good);\n        }\n        //3. \u65b0\u589e3000\u4e2amacbookpro\u5e93\u5b58\n        //String hget = jedis.hget("goods", "macbookpro");\n        //int stock=Integer.parseInt(hget)+3000;\n        //jedis.hset("goods", "macbookpro", stock+"");\n        jedis.hincrBy("goods", "macbookpro", 3000);\n\n        String hget = jedis.hget("goods", "macbookpro");\n        System.out.println(hget);\n\n        //4. \u5220\u9664\u6574\u4e2aHash\u7684\u6570\u636e\n        jedis.del("goods");\n    }\n')),(0,n.kt)("h3",{id:"6\u64cd\u4f5clist\u7c7b\u578b\u6570\u636e"},"6\u3001\u64cd\u4f5clist\u7c7b\u578b\u6570\u636e"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u5411list\u7684\u5de6\u8fb9\u63d2\u5165\u4ee5\u4e0b\u4e09\u4e2a\u624b\u673a\u53f7\u7801\uff1a18511310002\u300118912301233\u300118123123314"),(0,n.kt)("li",{parentName:"ol"},"\u4ece\u53f3\u8fb9\u79fb\u9664\u4e00\u4e2a\u624b\u673a\u53f7\u7801"),(0,n.kt)("li",{parentName:"ol"},"\u83b7\u53d6list\u6240\u6709\u7684\u503c")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-java"},'@Test\n    public void listTest() {\n        // \u83b7\u53d6Jedis\u8fde\u63a5\n        Jedis jedis = jedisPool.getResource();\n\n        // 1.   \u5411list\u7684\u5de6\u8fb9\u63d2\u5165\u4ee5\u4e0b\u4e09\u4e2a\u624b\u673a\u53f7\u7801\uff1a18511310001\u300118912301231\u300118123123312\n        jedis.lpush("tel_list", "18511310001", "18912301231", "18123123312");\n\n        // 2.   \u4ece\u53f3\u8fb9\u79fb\u9664\u4e00\u4e2a\u624b\u673a\u53f7\u7801\n        jedis.rpop("tel_list");\n\n        // 3.   \u83b7\u53d6list\u6240\u6709\u7684\u503c\n        List<String> telList = jedis.lrange("tel_list", 0, -1);\n        for (String tel : telList) {\n            System.out.println(tel);\n        }\n\n        jedis.close();\n    }\n')),(0,n.kt)("h3",{id:"7\u64cd\u4f5cset\u7c7b\u578b\u7684\u6570\u636e"},"7\u3001\u64cd\u4f5cset\u7c7b\u578b\u7684\u6570\u636e"),(0,n.kt)("p",null,"\u4f7f\u7528set\u6765\u4fdd\u5b58uv\u503c\uff0c\u4e3a\u4e86\u65b9\u4fbf\u8ba1\u7b97\uff0c\u5c06\u7528\u6237\u540d\u4fdd\u5b58\u5230uv\u4e2d\u3002"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u5f80\u4e00\u4e2aset\u4e2d\u6dfb\u52a0\u9875\u9762 page1 \u7684uv\uff0c\u7528\u6237user1\u8bbf\u95ee\u4e00\u6b21\u8be5\u9875\u9762"),(0,n.kt)("li",{parentName:"ol"},"user2\u8bbf\u95ee\u4e00\u6b21\u8be5\u9875\u9762"),(0,n.kt)("li",{parentName:"ol"},"user1\u518d\u6b21\u8bbf\u95ee\u4e00\u6b21\u8be5\u9875\u9762"),(0,n.kt)("li",{parentName:"ol"},"\u6700\u540e\u83b7\u53d6 page1\u7684uv\u503c")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-java"},'@Test\n    public void setTest(){\n        // \u83b7\u53d6Jedis\u8fde\u63a5\n        Jedis jedis = jedisPool.getResource();\n\n        // \u6c42UV\u5c31\u662f\u6c42\u72ec\u7acb\u6709\u591a\u5c11\u4e2a\uff08\u4e0d\u91cd\u590d\uff09\n        // 1.   \u5f80\u4e00\u4e2aset\u4e2d\u6dfb\u52a0\u9875\u9762 page1 \u7684uv\uff0c\u7528\u6237user1\u8bbf\u95ee\u4e00\u6b21\u8be5\u9875\u9762\n        jedis.sadd("uv", "user1");\n        // jedis.sadd("uv", "user3");\n        // jedis.sadd("uv", "user1");\n        // 2.   user2\u8bbf\u95ee\u4e00\u6b21\u8be5\u9875\u9762\n        jedis.sadd("uv", "user2");\n\n        // 3.   user1\u518d\u6b21\u8bbf\u95ee\u4e00\u6b21\u8be5\u9875\u9762\n        jedis.sadd("uv", "user1");\n\n        // 4.   \u6700\u540e\u83b7\u53d6 page1\u7684uv\u503c\n        System.out.println("uv:" + jedis.scard("uv"));\n\n        jedis.close();\n    }\n')),(0,n.kt)("p",null,"\u4f5c\u4e1a\uff1a"),(0,n.kt)("p",null,"jedis\u64cd\u4f5cbitmap\uff0cHyperLogLog\u3002\u81ea\u5df1\u505a\u4e00\u4e0b\u3002"),(0,n.kt)("h1",{id:"redis\u8fdb\u9636"},"Redis\u8fdb\u9636"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u8bfe\u7a0b\u76ee\u6807"),"(\u9762\u8bd5\u3001\u8fd0\u7ef4)"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u80fd\u591f\u7406\u89e3Redis\u7684\u6301\u4e45\u5316")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u80fd\u591f\u7406\u89e3Redis\u7684\u4e3b\u4ece\u590d\u5236\u67b6\u6784")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u80fd\u591f\u7406\u89e3Redis\u7684Sentinel\u67b6\u6784")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u80fd\u591f\u7406\u89e3Redis cluster\u96c6\u7fa4\u67b6\u6784")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"redis\u7f13\u5b58\u5e38\u89c1\u9762\u8bd5\u9898")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5e38\u89c1\u95ee\u9898"))),(0,n.kt)("h2",{id:"\u7b2c\u4e00\u7ae0-redis\u7684\u6301\u4e45\u5316"},"\u7b2c\u4e00\u7ae0 Redis\u7684\u6301\u4e45\u5316"),(0,n.kt)("p",null,"\u7531\u4e8eredis\u662f\u4e00\u4e2a\u5185\u5b58\u6570\u636e\u5e93\uff0c\u6240\u6709\u7684\u6570\u636e\u90fd\u662f\u4fdd\u5b58\u5728\u5185\u5b58\u5f53\u4e2d\u7684\uff0c\u5185\u5b58\u5f53\u4e2d\u7684\u6570\u636e\u6781\u6613\u4e22\u5931\uff0c\u6240\u4ee5redis\u7684\u6570\u636e\u6301\u4e45\u5316\u5c31\u663e\u5f97\u5c24\u4e3a\u91cd\u8981\uff0c\u5728redis\u5f53\u4e2d\uff0c\u63d0\u4f9b\u4e86\u4e24\u79cd\u6570\u636e\u6301\u4e45\u5316\u7684\u65b9\u5f0f\uff0c\u5206\u522b\u4e3a",(0,n.kt)("strong",{parentName:"p"},"RDB"),"\u4ee5\u53ca",(0,n.kt)("strong",{parentName:"p"},"AOF"),"\uff0c\u4e14Redis\u9ed8\u8ba4\u5f00\u542f\u7684\u6570\u636e\u6301\u4e45\u5316\u65b9\u5f0f\u4e3aRDB\u65b9\u5f0f\u3002"),(0,n.kt)("h3",{id:"1rdb\u6301\u4e45\u5316\u65b9\u6848"},"1\u3001RDB\u6301\u4e45\u5316\u65b9\u6848"),(0,n.kt)("h4",{id:"11-\u4ecb\u7ecd"},"1.1 \u4ecb\u7ecd"),(0,n.kt)("p",null,"Redis\u4f1a\u5b9a\u671f\u4fdd\u5b58\u6570\u636e\u5feb\u7167\u81f3\u4e00\u4e2arbd\u6587\u4ef6\u4e2d\uff0c\u5e76\u5728\u542f\u52a8\u65f6\u81ea\u52a8\u52a0\u8f7drdb\u6587\u4ef6\uff0c\u6062\u590d\u4e4b\u524d\u4fdd\u5b58\u7684\u6570\u636e\u3002"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220301090011542-cda9bec9.png",alt:"image-20220301090011542"}),"image-20220301090011542"),(0,n.kt)("p",null,"\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6eRedis\u8fdb\u884c\u5feb\u7167\u4fdd\u5b58\u7684\u65f6\u673a\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"save [seconds] [changes]  \n")),(0,n.kt)("p",null,"\u610f\u4e3a\u5728seconds\u79d2\u5185\u5982\u679c\u53d1\u751f\u4e86changes\u6b21\u6570\u636e\u4fee\u6539\uff0c\u5219\u8fdb\u884c\u4e00\u6b21RDB\u5feb\u7167\u4fdd\u5b58\uff0c\u4f8b\u5982"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"save  60 100\nsave  600 500\n")),(0,n.kt)("p",null,"\u4f1a\u8ba9Redis\u6bcf60\u79d2\u68c0\u67e5\u4e00\u6b21\u6570\u636e\u53d8\u66f4\u60c5\u51b5\uff0c\u5982\u679c\u53d1\u751f\u4e86100\u6b21\u6216\u4ee5\u4e0a\u7684\u6570\u636e\u53d8\u66f4\uff0c\u5219\u8fdb\u884cRDB\u5feb\u7167\u4fdd\u5b58\u3002\u53ef\u4ee5\u914d\u7f6e\u591a\u6761save\u6307\u4ee4\uff0c\u8ba9Redis\u6267\u884c\u591a\u7ea7\u7684\u5feb\u7167\u4fdd\u5b58\u7b56\u7565\u3002Redis\u9ed8\u8ba4\u5f00\u542fRDB\u5feb\u7167\u3002\u4e5f\u53ef\u4ee5\u901a\u8fc7SAVE\u6216\u8005BGSAVE\u547d\u4ee4\u624b\u52a8\u89e6\u53d1RDB\u5feb\u7167\u4fdd\u5b58\u3002SAVE \u548c BGSAVE \u4e24\u4e2a\u547d\u4ee4\u90fd\u4f1a\u8c03\u7528 rdbSave \u51fd\u6570\uff0c\u4f46\u5b83\u4eec\u8c03\u7528\u7684\u65b9\u5f0f\u5404\u6709\u4e0d\u540c\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"SAVE \u76f4\u63a5\u8c03\u7528 rdbSave \uff0c\u963b\u585e Redis \u4e3b\u8fdb\u7a0b\uff0c\u76f4\u5230\u4fdd\u5b58\u5b8c\u6210\u4e3a\u6b62\u3002\u5728\u4e3b\u8fdb\u7a0b\u963b\u585e\u671f\u95f4\uff0c\u670d\u52a1\u5668\u4e0d\u80fd\u5904\u7406\u5ba2\u6237\u7aef\u7684\u4efb\u4f55\u8bf7\u6c42\u3002"),(0,n.kt)("li",{parentName:"ul"},"BGSAVE \u5219 fork \u51fa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u5b50\u8fdb\u7a0b\u8d1f\u8d23\u8c03\u7528 rdbSave \uff0c\u5e76\u5728\u4fdd\u5b58\u5b8c\u6210\u4e4b\u540e\u5411\u4e3b\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7\uff0c\u901a\u77e5\u4fdd\u5b58\u5df2\u5b8c\u6210\u3002 Redis \u670d\u52a1\u5668\u5728BGSAVE \u6267\u884c\u671f\u95f4\u4ecd\u7136\u53ef\u4ee5\u7ee7\u7eed\u5904\u7406\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u3002")),(0,n.kt)("h4",{id:"12-rdb\u65b9\u6848\u4f18\u70b9"},"1.2 RDB\u65b9\u6848\u4f18\u70b9"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u5bf9\u6027\u80fd\u5f71\u54cd\u6700\u5c0f\u3002\u5982\u524d\u6587\u6240\u8ff0\uff0cRedis\u5728\u4fdd\u5b58RDB\u5feb\u7167\u65f6\u4f1afork\u51fa\u5b50\u8fdb\u7a0b\u8fdb\u884c\uff0c\u51e0\u4e4e\u4e0d\u5f71\u54cdRedis\u5904\u7406\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u6548\u7387\u3002"),(0,n.kt)("li",{parentName:"ol"},"\u6bcf\u6b21\u5feb\u7167\u4f1a\u751f\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u6570\u636e\u5feb\u7167\u6587\u4ef6\uff0c\u6240\u4ee5\u53ef\u4ee5\u8f85\u4ee5\u5176\u4ed6\u624b\u6bb5\u4fdd\u5b58\u591a\u4e2a\u65f6\u95f4\u70b9\u7684\u5feb\u7167\uff08\u4f8b\u5982\u628a\u6bcf\u59290\u70b9\u7684\u5feb\u7167\u5907\u4efd\u81f3\u5176\u4ed6\u5b58\u50a8\u5a92\u4ecb\u4e2d\uff09\uff0c\u4f5c\u4e3a\u975e\u5e38\u53ef\u9760\u7684\u707e\u96be\u6062\u590d\u624b\u6bb5\u3002"),(0,n.kt)("li",{parentName:"ol"},"\u4f7f\u7528RDB\u6587\u4ef6\u8fdb\u884c\u6570\u636e\u6062\u590d\u6bd4\u4f7f\u7528AOF\u8981\u5feb\u5f88\u591a\u3002")),(0,n.kt)("h4",{id:"13-rdb\u65b9\u6848\u7f3a\u70b9"},"1.3 RDB\u65b9\u6848\u7f3a\u70b9"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u5feb\u7167\u662f\u5b9a\u671f\u751f\u6210\u7684\uff0c\u6240\u4ee5\u5728Redis crash\u65f6\u6216\u591a\u6216\u5c11\u4f1a\u4e22\u5931\u4e00\u90e8\u5206\u6570\u636e"),(0,n.kt)("li",{parentName:"ol"},"\u5982\u679c\u6570\u636e\u96c6\u975e\u5e38\u5927\u4e14CPU\u4e0d\u591f\u5f3a\uff08\u6bd4\u5982\u5355\u6838CPU\uff09\uff0cRedis\u5728fork\u5b50\u8fdb\u7a0b\u65f6\u53ef\u80fd\u4f1a\u6d88\u8017\u76f8\u5bf9\u8f83\u957f\u7684\u65f6\u95f4\uff0c\u5f71\u54cdRedis\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\u7684\u80fd\u529b")),(0,n.kt)("h4",{id:"14-rdb\u914d\u7f6e"},"1.4 RDB\u914d\u7f6e"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u4fee\u6539redis\u7684\u914d\u7f6e\u6587\u4ef6")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"cd  \n/export/server/redis-6.2.6/  \nvim  redis.conf  \n# \u7b2c \u884c  \nsave  900 1  \nsave  300 10  \nsave  60 10000  \nsave 5 1  \n")),(0,n.kt)("p",null,"\u8fd9\u4e09\u4e2a\u9009\u9879\u662fredis\u7684\u914d\u7f6e\u6587\u4ef6\u9ed8\u8ba4\u81ea\u5e26\u7684\u5b58\u50a8\u673a\u5236\u3002\u8868\u793a\u6bcf\u9694\u591a\u5c11\u79d2\uff0c\u6709\u591a\u5c11\u4e2akey\u53d1\u751f\u53d8\u5316\u5c31\u751f\u6210\u4e00\u4efddump.rdb\u6587\u4ef6\uff0c\u4f5c\u4e3aredis\u7684\u5feb\u7167\u6587\u4ef6"),(0,n.kt)("p",null,"\u4f8b\u5982\uff1asave 60 10000 \u8868\u793a\u572860\u79d2\u5185\uff0c\u670910000\u4e2akey\u53d1\u751f\u53d8\u5316\uff0c\u5c31\u4f1a\u751f\u6210\u4e00\u4efdredis\u7684\u5feb\u7167"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u91cd\u65b0\u542f\u52a8redis\u670d\u52a1")),(0,n.kt)("p",null,"\u6bcf\u6b21\u751f\u6210\u65b0\u7684dump.rdb\u90fd\u4f1a\u8986\u76d6\u6389\u4e4b\u524d\u7684\u8001\u7684\u5feb\u7167"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"}," ps -ef | grep redis  \n bin/redis-cli -h 192.168.200.131 shutdown  \n bin/redis-server redis.conf \n")),(0,n.kt)("h3",{id:"2aof\u6301\u4e45\u5316\u65b9\u6848"},"2\u3001AOF\u6301\u4e45\u5316\u65b9\u6848"),(0,n.kt)("h4",{id:"21-\u4ecb\u7ecd"},"2.1 \u4ecb\u7ecd"),(0,n.kt)("p",null,"\u91c7\u7528AOF\u6301\u4e45\u65b9\u5f0f\u65f6\uff0cRedis\u4f1a\u628a\u6bcf\u4e00\u4e2a\u5199\u8bf7\u6c42\u90fd\u8bb0\u5f55\u5728\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\u91cc\u3002\u5728Redis\u91cd\u542f\u65f6\uff0c\u4f1a\u628aAOF\u6587\u4ef6\u4e2d\u8bb0\u5f55\u7684\u6240\u6709\u5199\u64cd\u4f5c\u987a\u5e8f\u6267\u884c\u4e00\u904d\uff0c\u786e\u4fdd\u6570\u636e\u6062\u590d\u5230\u6700\u65b0\u3002"),(0,n.kt)("h4",{id:"22-\u5f00\u542faof"},"2.2 \u5f00\u542fAOF"),(0,n.kt)("p",null,"AOF\u9ed8\u8ba4\u662f\u5173\u95ed\u7684\uff0c\u5982\u8981\u5f00\u542f\uff0c\u8fdb\u884c\u5982\u4e0b\u914d\u7f6e\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"  # \u7b2c594\u884c  \n  appendonly  yes \n")),(0,n.kt)("h4",{id:"23-\u914d\u7f6eaof"},"2.3 \u914d\u7f6eAOF"),(0,n.kt)("p",null,"AOF\u63d0\u4f9b\u4e86\u4e09\u79cdfsync\u914d\u7f6e\uff1aalways/everysec/no\uff0c\u901a\u8fc7\u914d\u7f6e\u9879","[appendfsync]","\u6307\u5b9a\uff1a"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"appendfsync no"),"\uff1a\u4e0d\u8fdb\u884cfsync\uff0c\u5c06flush\u6587\u4ef6\u7684\u65f6\u673a\u4ea4\u7ed9OS\u51b3\u5b9a\uff0c\u901f\u5ea6\u6700\u5feb"),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"appendfsync always"),"\uff1a\u6bcf\u5199\u5165\u4e00\u6761\u65e5\u5fd7\u5c31\u8fdb\u884c\u4e00\u6b21fsync\u64cd\u4f5c\uff0c\u6570\u636e\u5b89\u5168\u6027\u6700\u9ad8\uff0c\u4f46\u901f\u5ea6\u6700\u6162"),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"appendfsync everysec"),"\uff1a\u6298\u4e2d\u7684\u505a\u6cd5\uff0c\u4ea4\u7531\u540e\u53f0\u7ebf\u7a0b\u6bcf\u79d2fsync\u4e00\u6b21")),(0,n.kt)("h4",{id:"24-aof-rewrite"},"2.4 AOF rewrite"),(0,n.kt)("p",null,"\u968f\u7740AOF\u4e0d\u65ad\u5730\u8bb0\u5f55\u5199\u64cd\u4f5c\u65e5\u5fd7\uff0c\u56e0\u4e3a\u6240\u6709\u7684\u5199\u64cd\u4f5c\u90fd\u4f1a\u8bb0\u5f55\uff0c\u6240\u4ee5\u5fc5\u5b9a\u4f1a\u51fa\u73b0\u4e00\u4e9b\u65e0\u7528\u7684\u65e5\u5fd7\u3002\u5927\u91cf\u65e0\u7528\u7684\u65e5\u5fd7\u4f1a\u8ba9AOF\u6587\u4ef6\u8fc7\u5927\uff0c\u4e5f\u4f1a\u8ba9\u6570\u636e\u6062\u590d\u7684\u65f6\u95f4\u8fc7\u957f\u3002\u4e0d\u8fc7Redis\u63d0\u4f9b\u4e86AOF rewrite\u529f\u80fd\uff0c\u53ef\u4ee5\u91cd\u5199AOF\u6587\u4ef6\uff0c\u53ea\u4fdd\u7559\u80fd\u591f\u628a\u6570\u636e\u6062\u590d\u5230\u6700\u65b0\u72b6\u6001\u7684\u6700\u5c0f\u5199\u64cd\u4f5c\u96c6\u3002"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220301093017307-cc8b332a.png",alt:"image-20220301093017307"}),"image-20220301093017307"),(0,n.kt)("p",null,"AOF rewrite\u53ef\u4ee5\u901a\u8fc7BGREWRITEAOF\u547d\u4ee4\u89e6\u53d1\uff0c\u4e5f\u53ef\u4ee5\u914d\u7f6eRedis\u5b9a\u671f\u81ea\u52a8\u8fdb\u884c\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"  auto-aof-rewrite-percentage 100  \n  auto-aof-rewrite-min-size 64mb  \n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Redis\u5728\u6bcf\u6b21AOF rewrite\u65f6\uff0c\u4f1a\u8bb0\u5f55\u5b8c\u6210rewrite\u540e\u7684AOF\u65e5\u5fd7\u5927\u5c0f\uff0c\u5f53AOF\u65e5\u5fd7\u5927\u5c0f\u5728\u8be5\u57fa\u7840\u4e0a\u589e\u957f\u4e86100%\u540e\uff0c\u81ea\u52a8\u8fdb\u884cAOF rewrite 32m---\x3e10\u4e07--\x3e64M---\x3e40M--100\u4e07--80--\u300b50M--\x3e>100m"),(0,n.kt)("li",{parentName:"ul"},"auto-aof-rewrite-min-size\u6700\u5f00\u59cb\u7684AOF\u6587\u4ef6\u5fc5\u987b\u8981\u89e6\u53d1\u8fd9\u4e2a\u6587\u4ef6\u624d\u89e6\u53d1\uff0c\u540e\u9762\u7684\u6bcf\u6b21\u91cd\u5199\u5c31\u4e0d\u4f1a\u6839\u636e\u8fd9\u4e2a\u53d8\u91cf\u4e86\u3002\u8be5\u53d8\u91cf\u4ec5\u521d\u59cb\u5316\u542f\u52a8Redis\u6709\u6548\u3002")),(0,n.kt)("h4",{id:"25-aof\u4f18\u70b9"},"2.5 AOF\u4f18\u70b9"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u6700\u5b89\u5168\uff0c\u5728\u542f\u7528appendfsync\u4e3aalways\u65f6\uff0c\u4efb\u4f55\u5df2\u5199\u5165\u7684\u6570\u636e\u90fd\u4e0d\u4f1a\u4e22\u5931\uff0c\u4f7f\u7528\u5728\u542f\u7528appendfsync everysec\u4e5f\u81f3\u591a\u53ea\u4f1a\u4e22\u59311\u79d2\u7684\u6570\u636e"),(0,n.kt)("li",{parentName:"ol"},"AOF\u6587\u4ef6\u5728\u53d1\u751f\u65ad\u7535\u7b49\u95ee\u9898\u65f6\u4e5f\u4e0d\u4f1a\u635f\u574f\uff0c\u5373\u4f7f\u51fa\u73b0\u4e86\u67d0\u6761\u65e5\u5fd7\u53ea\u5199\u5165\u4e86\u4e00\u534a\u7684\u60c5\u51b5\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528redis-check-aof\u5de5\u5177\u8f7b\u677e\u4fee\u590d"),(0,n.kt)("li",{parentName:"ol"},"AOF\u6587\u4ef6\u6613\u8bfb\uff0c\u53ef\u4fee\u6539\uff0c\u5728\u8fdb\u884c\u67d0\u4e9b\u9519\u8bef\u7684\u6570\u636e\u6e05\u9664\u64cd\u4f5c\u540e\uff0c\u53ea\u8981AOF\u6587\u4ef6\u6ca1\u6709rewrite\uff0c\u5c31\u53ef\u4ee5\u628aAOF\u6587\u4ef6\u5907\u4efd\u51fa\u6765\uff0c\u628a\u9519\u8bef\u7684\u547d\u4ee4\u5220\u9664\uff0c\u7136\u540e\u6062\u590d\u6570\u636e\u3002")),(0,n.kt)("h4",{id:"26-aof\u7684\u7f3a\u70b9"},"2.6 AOF\u7684\u7f3a\u70b9"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"AOF\u6587\u4ef6\u901a\u5e38\u6bd4RDB\u6587\u4ef6\u66f4\u5927"),(0,n.kt)("li",{parentName:"ol"},"\u6027\u80fd\u6d88\u8017\u6bd4RDB\u9ad8"),(0,n.kt)("li",{parentName:"ol"},"\u6570\u636e\u6062\u590d\u901f\u5ea6\u6bd4RDB\u6162")),(0,n.kt)("p",null,"Redis\u7684\u6570\u636e\u6301\u4e45\u5316\u5de5\u4f5c\u672c\u8eab\u5c31\u4f1a\u5e26\u6765\u5ef6\u8fdf\uff0c\u9700\u8981\u6839\u636e\u6570\u636e\u7684\u5b89\u5168\u7ea7\u522b\u548c\u6027\u80fd\u8981\u6c42\u5236\u5b9a\u5408\u7406\u7684\u6301\u4e45\u5316\u7b56\u7565\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"AOF + fsync always\u7684\u8bbe\u7f6e\u867d\u7136\u80fd\u591f\u7edd\u5bf9\u786e\u4fdd\u6570\u636e\u5b89\u5168\uff0c\u4f46\u6bcf\u4e2a\u64cd\u4f5c\u90fd\u4f1a\u89e6\u53d1\u4e00\u6b21fsync\uff0c\u4f1a\u5bf9Redis\u7684\u6027\u80fd\u6709\u6bd4\u8f83\u660e\u663e\u7684\u5f71\u54cd"),(0,n.kt)("li",{parentName:"ul"},"AOF + fsync every second\u662f\u6bd4\u8f83\u597d\u7684\u6298\u4e2d\u65b9\u6848\uff0c\u6bcf\u79d2fsync\u4e00\u6b21"),(0,n.kt)("li",{parentName:"ul"},"AOF + fsync never\u4f1a\u63d0\u4f9bAOF\u6301\u4e45\u5316\u65b9\u6848\u4e0b\u7684\u6700\u4f18\u6027\u80fd")),(0,n.kt)("p",null,"\u4f7f\u7528RDB\u6301\u4e45\u5316\u901a\u5e38\u4f1a\u63d0\u4f9b\u6bd4\u4f7f\u7528AOF\u66f4\u9ad8\u7684\u6027\u80fd\uff0c\u4f46\u9700\u8981\u6ce8\u610fRDB\u7684\u7b56\u7565\u914d\u7f6e"),(0,n.kt)("h3",{id:"3rdb-or-aof"},"3\u3001RDB or AOF"),(0,n.kt)("p",null,"\u6bcf\u4e00\u6b21RDB\u5feb\u7167\u548cAOF Rewrite\u90fd\u9700\u8981Redis\u4e3b\u8fdb\u7a0b\u8fdb\u884cfork\u64cd\u4f5c\u3002fork\u64cd\u4f5c\u672c\u8eab\u53ef\u80fd\u4f1a\u4ea7\u751f\u8f83\u9ad8\u7684\u8017\u65f6\uff0c\u4e0eCPU\u548cRedis\u5360\u7528\u7684\u5185\u5b58\u5927\u5c0f\u6709\u5173\u3002\u6839\u636e\u5177\u4f53\u7684\u60c5\u51b5\u5408\u7406\u914d\u7f6eRDB\u5feb\u7167\u548cAOF Rewrite\u65f6\u673a\uff0c\u907f\u514d\u8fc7\u4e8e\u9891\u7e41\u7684fork\u5e26\u6765\u7684\u5ef6\u8fdf\u3002"),(0,n.kt)("p",null,"Redis\u5728fork\u5b50\u8fdb\u7a0b\u65f6\u9700\u8981\u5c06\u5185\u5b58\u5206\u9875\u8868\u62f7\u8d1d\u81f3\u5b50\u8fdb\u7a0b\uff0c\u4ee5\u5360\u7528\u4e8624GB\u5185\u5b58\u7684Redis\u5b9e\u4f8b\u4e3a\u4f8b\uff0c\u5171\u9700\u8981\u62f7\u8d1d48MB\u7684\u6570\u636e\u3002\u5728\u4f7f\u7528\u5355Xeon 2.27Ghz\u7684\u7269\u7406\u673a\u4e0a\uff0c\u8fd9\u4e00fork\u64cd\u4f5c\u8017\u65f6216ms\u3002"),(0,n.kt)("p",null,"\u672c\u4eba\u4ee5\u524d\u7684\u516c\u53f8\uff0c\u6700\u540e\u7684\u4ece\u673a\u4e0a\uff0crdb aof\u90fd\u5f00\u542f\u3002"),(0,n.kt)("h2",{id:"\u7b2c\u4e8c\u7ae0-redis-\u4e8b\u52a1"},"\u7b2c\u4e8c\u7ae0 Redis \u4e8b\u52a1"),(0,n.kt)("h3",{id:"1redis\u4e8b\u52a1\u7b80\u4ecb"},"1\u3001Redis\u4e8b\u52a1\u7b80\u4ecb"),(0,n.kt)("p",null,"Redis \u4e8b\u52a1\u7684\u672c\u8d28\u662f\u4e00\u7ec4\u547d\u4ee4\u7684\u96c6\u5408\u3002\u4e8b\u52a1\u652f\u6301\u4e00\u6b21\u6267\u884c\u591a\u4e2a\u547d\u4ee4\uff0c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u6240\u6709\u547d\u4ee4\u90fd\u4f1a\u88ab\u5e8f\u5217\u5316\u3002\u5728\u4e8b\u52a1\u6267\u884c\u8fc7\u7a0b\uff0c\u4f1a\u6309\u7167\u987a\u5e8f\u4e32\u884c\u5316\u6267\u884c\u961f\u5217\u4e2d\u7684\u547d\u4ee4\uff0c\u5176\u4ed6\u5ba2\u6237\u7aef\u63d0\u4ea4\u7684\u547d\u4ee4\u8bf7\u6c42\u4e0d\u4f1a\u63d2\u5165\u5230\u4e8b\u52a1\u6267\u884c\u547d\u4ee4\u5e8f\u5217\u4e2d\u3002"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220301144547489-6e4445b9.png",alt:"image-20220301144547489"}),"image-20220301144547489"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u603b\u7ed3\u8bf4\uff1aRedis\u4e8b\u52a1\u5c31\u662f\u4e00\u6b21\u6027\u3001\u987a\u5e8f\u6027\u3001\u6392\u4ed6\u6027\u7684\u6267\u884c\u4e00\u4e2a\u961f\u5217\u4e2d\u7684\u4e00\u7cfb\u5217\u547d\u4ee4")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Redis\u4e8b\u52a1\u6ca1\u6709\u9694\u79bb\u7ea7\u522b\u7684\u6982\u5ff5"))),(0,n.kt)("p",null,"\u6279\u91cf\u64cd\u4f5c\u5728\u53d1\u9001 EXEC \u547d\u4ee4\u524d\u88ab\u653e\u5165\u961f\u5217\u7f13\u5b58\uff0c\u5e76\u4e0d\u4f1a\u88ab\u5b9e\u9645\u6267\u884c\uff0c\u4e5f\u5c31\u4e0d\u5b58\u5728\u4e8b\u52a1\u5185\u7684\u67e5\u8be2\u8981\u770b\u5230\u4e8b\u52a1\u91cc\u7684\u66f4\u65b0\uff0c\u4e8b\u52a1\u5916\u67e5\u8be2\u4e0d\u80fd\u770b\u5230\u3002"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Redis\u4e0d\u4fdd\u8bc1\u539f\u5b50\u6027"))),(0,n.kt)("p",null,"Redis\u4e2d\uff0c\u5355\u6761\u547d\u4ee4\u662f\u539f\u5b50\u6027\u6267\u884c\u7684\uff0c\u4f46\u4e8b\u52a1\u4e0d\u4fdd\u8bc1\u539f\u5b50\u6027\uff0c\u4e14\u6ca1\u6709\u56de\u6eda\u3002\u4e8b\u52a1\u4e2d\u4efb\u610f\u547d\u4ee4\u6267\u884c\u5931\u8d25\uff0c\u5176\u4f59\u7684\u547d\u4ee4\u4ecd\u4f1a\u88ab\u6267\u884c\u3002"),(0,n.kt)("p",null,"\u4e00\u4e2a\u4e8b\u52a1\u4ece\u5f00\u59cb\u5230\u6267\u884c\u4f1a\u7ecf\u5386\u4ee5\u4e0b\u4e09\u4e2a\u9636\u6bb5\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u7b2c\u4e00\u9636\u6bb5\uff1a\u5f00\u59cb\u4e8b\u52a1"),(0,n.kt)("li",{parentName:"ul"},"\u7b2c\u4e8c\u9636\u6bb5\uff1a\u547d\u4ee4\u5165\u961f"),(0,n.kt)("li",{parentName:"ul"},"\u7b2c\u4e09\u9636\u6bb5\uff1a\u6267\u884c\u4e8b\u52a1")),(0,n.kt)("p",null,"Redis\u4e8b\u52a1\u76f8\u5173\u547d\u4ee4\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"MULTI")),(0,n.kt)("p",null,"\u5f00\u542f\u4e8b\u52a1\uff0credis\u4f1a\u5c06\u540e\u7eed\u7684\u547d\u4ee4\u9010\u4e2a\u653e\u5165\u961f\u5217\u4e2d\uff0c\u7136\u540e\u4f7f\u7528EXEC\u547d\u4ee4\u6765\u539f\u5b50\u5316\u6267\u884c\u8fd9\u4e2a\u547d\u4ee4\u961f\u5217"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"EXEC")),(0,n.kt)("p",null,"\u6267\u884c\u4e8b\u52a1\u4e2d\u7684\u6240\u6709\u64cd\u4f5c\u547d\u4ee4"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"DISCARD")),(0,n.kt)("p",null,"\u53d6\u6d88\u4e8b\u52a1\uff0c\u653e\u5f03\u6267\u884c\u4e8b\u52a1\u5757\u4e2d\u7684\u6240\u6709\u547d\u4ee4"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"WATCH")),(0,n.kt)("p",null,"\u76d1\u89c6\u4e00\u4e2a\u6216\u591a\u4e2akey\uff0c\u5982\u679c\u4e8b\u52a1\u5728\u6267\u884c\u524d\uff0c\u8fd9\u4e2akey\uff08\u6216\u591a\u4e2akey\uff09\u88ab\u5176\u4ed6\u547d\u4ee4\u4fee\u6539\uff0c\u5219\u4e8b\u52a1\u88ab\u4e2d\u65ad\uff0c\u4e0d\u4f1a\u6267\u884c\u4e8b\u52a1\u4e2d\u7684\u4efb\u4f55\u547d\u4ee4"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"UNWATCH")),(0,n.kt)("p",null,"\u53d6\u6d88WATCH\u5bf9\u6240\u6709key\u7684\u76d1\u89c6"),(0,n.kt)("h3",{id:"2-redis\u4e8b\u52a1\u6f14\u793a"},"2\u3001 Redis\u4e8b\u52a1\u6f14\u793a"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"1.")," MULTI\u5f00\u59cb\u4e00\u4e2a\u4e8b\u52a1\uff1a\u7ed9k1\u3001k2\u5206\u522b\u8d4b\u503c\uff0c\u5728\u4e8b\u52a1\u4e2d\u4fee\u6539k1\u3001k2\uff0c\u6267\u884c\u4e8b\u52a1\u540e\uff0c\u67e5\u770bk1\u3001k2\u503c\u90fd\u88ab\u4fee\u6539\u3002"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},'192.168.200.131:6379> set key1 v1\nOK\n192.168.200.131:6379> set key2 v2\nOK\n192.168.200.131:6379> multi\nOK\n192.168.200.131:6379(TX)> set key1 11\nQUEUED\n192.168.200.131:6379(TX)> set key2 22\nQUEUED\n192.168.200.131:6379(TX)> exec\n1) OK\n2) OK\n192.168.200.131:6379> get key1\n"11"\n192.168.200.131:6379> get key2\n"22"\n192.168.200.131:6379> \n')),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"2.")," \u4e8b\u52a1\u5931\u8d25\u5904\u7406\uff1a\u8bed\u6cd5\u9519\u8bef\uff08\u7f16\u8bd1\u5668\u9519\u8bef\uff09\uff0c\u5728\u5f00\u542f\u4e8b\u52a1\u540e\uff0c\u4fee\u6539k1\u503c\u4e3a11\uff0ck2\u503c\u4e3a22\uff0c\u4f46k2\u8bed\u6cd5\u9519\u8bef\uff0c\u6700\u7ec8\u5bfc\u81f4\u4e8b\u52a1\u63d0\u4ea4\u5931\u8d25\uff0ck1\u3001k2\u4fdd\u7559\u539f\u503c\u3002"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},'192.168.200.131:6379> set key1 v1\nOK\n192.168.200.131:6379> set key2 v2\nOK\n192.168.200.131:6379> multi\nOK\n192.168.200.131:6379(TX)> set key1 11\nQUEUED\n192.168.200.131:6379(TX)> sets key2 22\n(error) ERR unknown command `sets`, with args beginning with: `key2`, `22`, \n192.168.200.131:6379(TX)> exec\n(error) EXECABORT Transaction discarded because of previous errors.\n192.168.200.131:6379> get key1\n"v1"\n192.168.200.131:6379> get key2\n"v2"\n192.168.200.131:6379> \n')),(0,n.kt)("p",null,"3.Redis\u7c7b\u578b\u9519\u8bef\uff08\u8fd0\u884c\u65f6\u9519\u8bef\uff09\uff0c\u5728\u5f00\u542f\u4e8b\u52a1\u540e\uff0c\u4fee\u6539k1\u503c\u4e3a11\uff0ck2\u503c\u4e3a22\uff0c\u4f46\u5c06k2\u7684\u7c7b\u578b\u4f5c\u4e3aList\uff0c\u5728\u8fd0\u884c\u65f6\u68c0\u6d4b\u7c7b\u578b\u9519\u8bef\uff0c\u6700\u7ec8\u5bfc\u81f4\u4e8b\u52a1\u63d0\u4ea4\u5931\u8d25\uff0c\u6b64\u65f6\u4e8b\u52a1\u5e76\u6ca1\u6709\u56de\u6eda\uff0c\u800c\u662f\u8df3\u8fc7\u9519\u8bef\u547d\u4ee4\u7ee7\u7eed\u6267\u884c\uff0c \u7ed3\u679ck1\u503c\u6539\u53d8\u3001k2\u4fdd\u7559\u539f\u503c\u3002"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},'192.168.200.131:6379> set key1 v1\nOK\n192.168.200.131:6379> set key2 v2\nOK\n192.168.200.131:6379> multi\nOK\n192.168.200.131:6379(TX)> set key1 11\nQUEUED\n192.168.200.131:6379(TX)> lpush key2 22\nQUEUED\n192.168.200.131:6379(TX)> exec\n1) OK\n2) (error) WRONGTYPE Operation against a key holding the wrong kind of value\n192.168.200.131:6379> get key1\n"11"\n192.168.200.131:6379> get key2\n"v2"\n192.168.200.131:6379> \n')),(0,n.kt)("p",null,"4 ",(0,n.kt)("strong",{parentName:"p"},"DISCARD"),"\u53d6\u6d88\u4e8b\u52a1"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},'192.168.200.131:6379> set key1 v1\nOK\n192.168.200.131:6379> set key2 v2\nOK\n192.168.200.131:6379> multi  \nOK  \n192.168.200.131:6379> set key1 v1  \nQUEUED  \n192.168.200.131:6379> set key2 v2  \nQUEUED  \n192.168.200.131:6379> discard  \nOK  \n192.168.200.131:6379> get key1  \n"v1"\n192.168.200.131:6379> get key2  \n"v2" \n')),(0,n.kt)("h3",{id:"3\u4e3a\u4ec0\u4e48redis\u4e0d\u652f\u6301\u4e8b\u52a1\u56de\u6eda"},"3\u3001\u4e3a\u4ec0\u4e48Redis\u4e0d\u652f\u6301\u4e8b\u52a1\u56de\u6eda\uff1f"),(0,n.kt)("p",null,"\u591a\u6570\u4e8b\u52a1\u5931\u8d25\u662f\u7531\u8bed\u6cd5\u9519\u8bef\u6216\u8005\u6570\u636e\u7ed3\u6784\u7c7b\u578b\u9519\u8bef\u5bfc\u81f4\u7684\uff0c\u8bed\u6cd5\u9519\u8bef\u8bf4\u660e\u5728\u547d\u4ee4\u5165\u961f\u524d\u5c31\u8fdb\u884c\u68c0\u6d4b\u7684\uff0c\u800c\u7c7b\u578b\u9519\u8bef\u662f\u5728\u6267\u884c\u65f6\u68c0\u6d4b\u7684\uff0cRedis\u4e3a\u63d0\u5347\u6027\u80fd\u800c\u91c7\u7528\u8fd9\u79cd\u7b80\u5355\u7684\u4e8b\u52a1\uff0c\u8fd9\u662f\u4e0d\u540c\u4e8e\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\uff0c\u7279\u522b\u8981\u6ce8\u610f\u533a\u5206\u3002Redis\u4e4b\u6240\u4ee5\u4fdd\u6301\u8fd9\u6837\u7b80\u6613\u7684\u4e8b\u52a1\uff0c\u5b8c\u5168\u662f\u4e3a\u4e86\u4fdd\u8bc1\u9ad8\u5e76\u53d1\u4e0b\u7684\u6838\u5fc3\u95ee\u9898\u2014\u2014",(0,n.kt)("strong",{parentName:"p"},"\u6027\u80fd"),"\u3002"),(0,n.kt)("h2",{id:"\u7b2c\u4e09\u7ae0-\u6570\u636e\u5220\u9664\u4e0e\u6dd8\u6c70\u7b56\u7565"},"\u7b2c\u4e09\u7ae0 \u6570\u636e\u5220\u9664\u4e0e\u6dd8\u6c70\u7b56\u7565"),(0,n.kt)("h3",{id:"1\u8fc7\u671f\u6570\u636e"},"1\u3001\u8fc7\u671f\u6570\u636e"),(0,n.kt)("h4",{id:"11-redis\u4e2d\u7684\u6570\u636e\u7279\u5f81"},(0,n.kt)("strong",{parentName:"h4"},"1.1 Redis\u4e2d\u7684\u6570\u636e\u7279\u5f81")),(0,n.kt)("p",null,"Redis\u662f\u4e00\u79cd\u5185\u5b58\u7ea7\u6570\u636e\u5e93\uff0c\u6240\u6709\u6570\u636e\u5747\u5b58\u653e\u5728\u5185\u5b58\u4e2d\uff0c\u5185\u5b58\u4e2d\u7684\u6570\u636e\u53ef\u4ee5\u901a\u8fc7TTL\u6307\u4ee4\u83b7\u53d6\u5176\u72b6\u6001"),(0,n.kt)("p",null,"TTL\u8fd4\u56de\u7684\u503c\u6709\u4e09\u79cd\u60c5\u51b5\uff1a\u6b63\u6570\uff0c-1\uff0c-2"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"\u6b63\u6570"),"\uff1a\u4ee3\u8868\u8be5\u6570\u636e\u5728\u5185\u5b58\u4e2d\u8fd8\u80fd\u5b58\u6d3b\u7684\u65f6\u95f4"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"-1"),"\uff1a\u6c38\u4e45\u6709\u6548\u7684\u6570\u636e"),(0,n.kt)("li",{parentName:"ul"},"-",(0,n.kt)("strong",{parentName:"li"},"2")," \uff1a\u5df2\u7ecf\u8fc7\u671f\u7684\u6570\u636e \u6216\u88ab\u5220\u9664\u7684\u6570\u636e \u6216 \u672a\u5b9a\u4e49\u7684\u6570\u636e")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u5220\u9664\u7b56\u7565\u5c31\u662f\u9488\u5bf9\u5df2\u8fc7\u671f\u6570\u636e\u7684\u5904\u7406\u7b56\u7565"),"\uff0c\u5df2\u8fc7\u671f\u7684\u6570\u636e\u662f\u771f\u7684\u5c31\u7acb\u5373\u5220\u9664\u4e86\u5417\uff1f\u5176\u5b9e\u4e5f\u4e0d\u662f\uff0c\u6211\u4eec\u4f1a\u6709\u591a\u79cd\u5220\u9664\u7b56\u7565\uff0c\u662f\u5206\u60c5\u51b5\u7684\uff0c\u5728\u4e0d\u540c\u7684\u573a\u666f\u4e0b\u4f7f\u7528\u4e0d\u540c\u7684\u5220\u9664\u65b9\u5f0f\u4f1a\u6709\u4e0d\u540c\u6548\u679c\uff0c\u8fd9\u4e5f\u6b63\u662f\u6211\u4eec\u8981\u5c06\u7684\u6570\u636e\u7684\u5220\u9664\u7b56\u7565\u7684\u95ee\u9898\u3002"),(0,n.kt)("h4",{id:"12-\u65f6\u6548\u6027\u6570\u636e\u7684\u5b58\u50a8\u7ed3\u6784"},"1.2 \u65f6\u6548\u6027\u6570\u636e\u7684\u5b58\u50a8\u7ed3\u6784"),(0,n.kt)("p",null,"\u5728Redis\u4e2d\uff0c\u5982\u4f55\u7ed9\u6570\u636e\u8bbe\u7f6e\u5b83\u7684\u5931\u6548\u5468\u671f\u5462\uff1f\u6570\u636e\u7684\u65f6\u6548\u5728redis\u4e2d\u5982\u4f55\u5b58\u50a8\u5462\uff1f\u770b\u4e0b\u56fe\uff1a"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220301155949303-d7b1315e.png",alt:"image-20220301155949303"}),"image-20220301155949303"),(0,n.kt)("p",null,"\u8fc7\u671f\u6570\u636e\u662f\u4e00\u5757\u72ec\u7acb\u7684\u5b58\u50a8\u7a7a\u95f4\uff0cHash\u7ed3\u6784\uff0cfield\u662f\u5185\u5b58\u5730\u5740\uff0cvalue\u662f\u8fc7\u671f\u65f6\u95f4\uff0c\u4fdd\u5b58\u4e86\u6240\u6709key\u7684\u8fc7\u671f\u63cf\u8ff0\uff0c\u5728\u6700\u7ec8\u8fdb\u884c\u8fc7\u671f\u5904\u7406\u7684\u65f6\u5019\uff0c\u5bf9\u8be5\u7a7a\u95f4\u7684\u6570\u636e\u8fdb\u884c\u68c0\u6d4b\uff0c \u5f53\u65f6\u95f4\u5230\u671f\u4e4b\u540e\u901a\u8fc7field\u627e\u5230\u5185\u5b58\u8be5\u5730\u5740\u5904\u7684\u6570\u636e\uff0c\u7136\u540e\u8fdb\u884c\u76f8\u5173\u64cd\u4f5c\u3002"),(0,n.kt)("h3",{id:"2\u6570\u636e\u5220\u9664\u7b56\u7565"},"2\u3001\u6570\u636e\u5220\u9664\u7b56\u7565"),(0,n.kt)("h4",{id:"21-\u6570\u636e\u5220\u9664\u7b56\u7565\u7684\u76ee\u6807"},"2.1 \u6570\u636e\u5220\u9664\u7b56\u7565\u7684\u76ee\u6807"),(0,n.kt)("p",null,"\u5728\u5185\u5b58\u5360\u7528\u4e0eCPU\u5360\u7528\u4e4b\u95f4\u5bfb\u627e\u4e00\u79cd\u5e73\u8861\uff0c\u987e\u6b64\u5931\u5f7c\u90fd\u4f1a\u9020\u6210\u6574\u4f53redis\u6027\u80fd\u7684\u4e0b\u964d\uff0c\u751a\u81f3\u5f15\u53d1\u670d\u52a1\u5668\u5b95\u673a\u6216 \u5185\u5b58\u6cc4\u9732"),(0,n.kt)("p",null,"\u9488\u5bf9\u8fc7\u671f\u6570\u636e\u8981\u8fdb\u884c\u5220\u9664\u7684\u65f6\u5019\u90fd\u6709\u54ea\u4e9b\u5220\u9664\u7b56\u7565\u5462\uff1f"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"1.\u5b9a\u65f6\u5220\u9664"),(0,n.kt)("li",{parentName:"ul"},"2.\u60f0\u6027\u5220\u9664"),(0,n.kt)("li",{parentName:"ul"},"3.\u5b9a\u671f\u5220\u9664")),(0,n.kt)("h4",{id:"22-\u5b9a\u65f6\u5220\u9664"},"2.2 \u5b9a\u65f6\u5220\u9664"),(0,n.kt)("p",null,"\u521b\u5efa\u4e00\u4e2a\u5b9a\u65f6\u5668\uff0c\u5f53key\u8bbe\u7f6e\u6709\u8fc7\u671f\u65f6\u95f4\uff0c\u4e14\u8fc7\u671f\u65f6\u95f4\u5230\u8fbe\u65f6\uff0c\u7531\u5b9a\u65f6\u5668\u4efb\u52a1\u7acb\u5373\u6267\u884c\u5bf9\u952e\u7684\u5220\u9664\u64cd\u4f5c"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"\u4f18\u70b9"),"\uff1a\u8282\u7ea6\u5185\u5b58\uff0c\u5230\u65f6\u5c31\u5220\u9664\uff0c\u5feb\u901f\u91ca\u653e\u6389\u4e0d\u5fc5\u8981\u7684\u5185\u5b58\u5360\u7528"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"\u7f3a\u70b9"),"\uff1aCPU\u538b\u529b\u5f88\u5927\uff0c\u65e0\u8bbaCPU\u6b64\u65f6\u8d1f\u8f7d\u91cf\u591a\u9ad8\uff0c\u5747\u5360\u7528CPU\uff0c\u4f1a\u5f71\u54cdredis\u670d\u52a1\u5668\u54cd\u5e94\u65f6\u95f4\u548c\u6307\u4ee4\u541e\u5410\u91cf"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"\u603b\u7ed3"),"\uff1a\u7528\u5904\u7406\u5668\u6027\u80fd\u6362\u53d6\u5b58\u50a8\u7a7a\u95f4\uff08\u62ff\u65f6\u95f4\u6362\u7a7a\u95f4\uff09")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220301160603403-9177abba.png",alt:"image-20220301160603403"}),"image-20220301160603403"),(0,n.kt)("h4",{id:"23-\u60f0\u6027\u5220\u9664"},"2.3 \u60f0\u6027\u5220\u9664"),(0,n.kt)("p",null,"\u6570\u636e\u5230\u8fbe\u8fc7\u671f\u65f6\u95f4\uff0c\u4e0d\u505a\u5904\u7406\u3002\u7b49\u4e0b\u6b21\u8bbf\u95ee\u8be5\u6570\u636e\u65f6\uff0c\u6211\u4eec\u9700\u8981\u5224\u65ad"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u5982\u679c\u672a\u8fc7\u671f\uff0c\u8fd4\u56de\u6570\u636e"),(0,n.kt)("li",{parentName:"ol"},"\u53d1\u73b0\u5df2\u8fc7\u671f\uff0c\u5220\u9664\uff0c\u8fd4\u56de\u4e0d\u5b58\u5728")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"\u4f18\u70b9"),"\uff1a\u8282\u7ea6CPU\u6027\u80fd\uff0c\u53d1\u73b0\u5fc5\u987b\u5220\u9664\u7684\u65f6\u5019\u624d\u5220\u9664"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"\u7f3a\u70b9"),"\uff1a\u5185\u5b58\u538b\u529b\u5f88\u5927\uff0c\u51fa\u73b0\u957f\u671f\u5360\u7528\u5185\u5b58\u7684\u6570\u636e"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"\u603b\u7ed3"),"\uff1a\u7528\u5b58\u50a8\u7a7a\u95f4\u6362\u53d6\u5904\u7406\u5668\u6027\u80fd\uff08\u62ff\u65f6\u95f4\u6362\u7a7a\u95f4\uff09")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220301160952139-505dca30.png",alt:"image-20220301160952139"}),"image-20220301160952139"),(0,n.kt)("h4",{id:"24-\u5b9a\u671f\u5220\u9664"},"2.4 \u5b9a\u671f\u5220\u9664"),(0,n.kt)("p",null,"\u5b9a\u65f6\u5220\u9664\u548c\u60f0\u6027\u5220\u9664\u8fd9\u4e24\u79cd\u65b9\u6848\u90fd\u662f\u8d70\u7684\u6781\u7aef\uff0c\u90a3\u6709\u6ca1\u6709\u6298\u4e2d\u65b9\u6848\uff1f"),(0,n.kt)("p",null,"\u6211\u4eec\u6765\u8bb2redis\u7684\u5b9a\u671f\u5220\u9664\u65b9\u6848\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Redis\u542f\u52a8\u670d\u52a1\u5668\u521d\u59cb\u5316\u65f6\uff0c\u8bfb\u53d6\u914d\u7f6eserver.hz\u7684\u503c\uff0c\u9ed8\u8ba4\u4e3a10"),(0,n.kt)("li",{parentName:"ul"},"\u6bcf\u79d2\u949f\u6267\u884cserver.hz\u6b21",(0,n.kt)("strong",{parentName:"li"},"serverCron()"),"--------\x3e",(0,n.kt)("strong",{parentName:"li"},"databasesCron()"),"---------\x3e",(0,n.kt)("strong",{parentName:"li"},"activeExpireCycle()")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"activeExpireCycle()"),"\u5bf9\u6bcf\u4e2aexpires","[*]","\u9010\u4e00\u8fdb\u884c\u68c0\u6d4b\uff0c\u6bcf\u6b21\u6267\u884c\u8017\u65f6\uff1a250ms/server.hz"),(0,n.kt)("li",{parentName:"ul"},"\u5bf9\u67d0\u4e2aexpires","[*]","\u68c0\u6d4b\u65f6\uff0c\u968f\u673a\u6311\u9009W\u4e2akey\u68c0\u6d4b")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-markdown"},"  \u5982\u679ckey\u8d85\u65f6\uff0c\u5220\u9664key\n\n  \u5982\u679c\u4e00\u8f6e\u4e2d\u5220\u9664\u7684key\u7684\u6570\u91cf>W*25%\uff0c\u5faa\u73af\u8be5\u8fc7\u7a0b\n\n  \u5982\u679c\u4e00\u8f6e\u4e2d\u5220\u9664\u7684key\u7684\u6570\u91cf\u2264W*25%\uff0c\u68c0\u67e5\u4e0b\u4e00\u4e2aexpires[*]\uff0c0-15\u5faa\u73af\n\n  W\u53d6\u503c=ACTIVE_EXPIRE_CYCLE_LOOKUPS_PER_LOOP\u5c5e\u6027\u503c\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u53c2\u6570current_db\u7528\u4e8e\u8bb0\u5f55",(0,n.kt)("strong",{parentName:"li"},"activeExpireCycle()")," \u8fdb\u5165\u54ea\u4e2aexpires","[*]"," \u6267\u884c"),(0,n.kt)("li",{parentName:"ul"},"\u5982\u679cactiveExpireCycle()\u6267\u884c\u65f6\u95f4\u5230\u671f\uff0c\u4e0b\u6b21\u4ececurrent_db\u7ee7\u7eed\u5411\u4e0b\u6267\u884c")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220301161537712-6ff3de8f.png",alt:"image-20220301161537712"}),"image-20220301161537712"),(0,n.kt)("p",null,"\u603b\u7684\u6765\u8bf4\uff1a\u5b9a\u671f\u5220\u9664\u5c31\u662f\u5468\u671f\u6027\u8f6e\u8be2redis\u5e93\u4e2d\u7684\u65f6\u6548\u6027\u6570\u636e\uff0c\u91c7\u7528\u968f\u673a\u62bd\u53d6\u7684\u7b56\u7565\uff0c\u5229\u7528\u8fc7\u671f\u6570\u636e\u5360\u6bd4\u7684\u65b9\u5f0f\u63a7\u5236\u5220\u9664\u9891\u5ea6"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"\u7279\u70b91"),"\uff1aCPU\u6027\u80fd\u5360\u7528\u8bbe\u7f6e\u6709\u5cf0\u503c\uff0c\u68c0\u6d4b\u9891\u5ea6\u53ef\u81ea\u5b9a\u4e49\u8bbe\u7f6e"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"\u7279\u70b92"),"\uff1a\u5185\u5b58\u538b\u529b\u4e0d\u662f\u5f88\u5927\uff0c\u957f\u671f\u5360\u7528\u5185\u5b58\u7684\u51b7\u6570\u636e\u4f1a\u88ab\u6301\u7eed\u6e05\u7406"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"\u603b\u7ed3"),"\uff1a\u5468\u671f\u6027\u62bd\u67e5\u5b58\u50a8\u7a7a\u95f4\uff08\u968f\u673a\u62bd\u67e5\uff0c\u91cd\u70b9\u62bd\u67e5\uff09")),(0,n.kt)("h4",{id:"25-\u5220\u9664\u7b56\u7565\u5bf9\u6bd4"},"2.5 \u5220\u9664\u7b56\u7565\u5bf9\u6bd4"),(0,n.kt)("p",null,"1\uff1a\u5b9a\u65f6\u5220\u9664\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-markdown"},"\u8282\u7ea6\u5185\u5b58\uff0c\u65e0\u5360\u7528,\n\u4e0d\u5206\u65f6\u6bb5\u5360\u7528CPU\u8d44\u6e90\uff0c\u9891\u5ea6\u9ad8,\n\u62ff\u65f6\u95f4\u6362\u7a7a\u95f4\n")),(0,n.kt)("p",null,"2\uff1a\u60f0\u6027\u5220\u9664\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-markdown"},"\u5185\u5b58\u5360\u7528\u4e25\u91cd\n\u5ef6\u65f6\u6267\u884c\uff0cCPU\u5229\u7528\u7387\u9ad8\n\u62ff\u7a7a\u95f4\u6362\u65f6\u95f4\n")),(0,n.kt)("p",null,"3\uff1a\u5b9a\u671f\u5220\u9664\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-markdown"},"\u5185\u5b58\u5b9a\u671f\u968f\u673a\u6e05\u7406\n\u6bcf\u79d2\u82b1\u8d39\u56fa\u5b9a\u7684CPU\u8d44\u6e90\u7ef4\u62a4\u5185\u5b58\n\u968f\u673a\u62bd\u67e5\uff0c\u91cd\u70b9\u62bd\u67e5\n")),(0,n.kt)("h3",{id:"3\u6570\u636e\u6dd8\u6c70\u7b56\u7565\u9010\u51fa\u7b97\u6cd5-\u9762\u8bd5"},"3\u3001\u6570\u636e\u6dd8\u6c70\u7b56\u7565\uff08\u9010\u51fa\u7b97\u6cd5\uff09-\u9762\u8bd5"),(0,n.kt)("h4",{id:"31-\u6dd8\u6c70\u7b56\u7565\u6982\u8ff0"},"3.1 \u6dd8\u6c70\u7b56\u7565\u6982\u8ff0"),(0,n.kt)("p",null,"\u4ec0\u4e48\u53eb\u6570\u636e\u6dd8\u6c70\u7b56\u7565\uff1f\u4ec0\u4e48\u6837\u7684\u5e94\u7528\u573a\u666f\u9700\u8981\u7528\u5230\u6570\u636e\u6dd8\u6c70\u7b56\u7565\uff1f"),(0,n.kt)("p",null,"\u5f53\u65b0\u6570\u636e\u8fdb\u5165redis\u65f6\uff0c\u5982\u679c\u5185\u5b58\u4e0d\u8db3\u600e\u4e48\u529e\uff1f\u5728\u6267\u884c\u6bcf\u4e00\u4e2a\u547d\u4ee4\u524d\uff0c\u4f1a\u8c03\u7528",(0,n.kt)("strong",{parentName:"p"},"freeMemoryIfNeeded()"),"\u68c0\u6d4b\u5185\u5b58\u662f\u5426\u5145\u8db3\u3002\u5982\u679c\u5185\u5b58\u4e0d\u6ee1\u8db3\u65b0 \u52a0\u5165\u6570\u636e\u7684\u6700\u4f4e\u5b58\u50a8\u8981\u6c42\uff0credis\u8981\u4e34\u65f6\u5220\u9664\u4e00\u4e9b\u6570\u636e\u4e3a\u5f53\u524d\u6307\u4ee4\u6e05\u7406\u5b58\u50a8\u7a7a\u95f4\u3002\u6e05\u7406\u6570\u636e\u7684\u7b56\u7565\u79f0\u4e3a\u9010\u51fa\u7b97\u6cd5\u3002"),(0,n.kt)("p",null,"\u6ce8\u610f\uff1a\u9010\u51fa\u6570\u636e\u7684\u8fc7\u7a0b\u4e0d\u662f100%\u80fd\u591f\u6e05\u7406\u51fa\u8db3\u591f\u7684\u53ef\u4f7f\u7528\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5982\u679c\u4e0d\u6210\u529f\u5219\u53cd\u590d\u6267\u884c\u3002\u5f53\u5bf9\u6240\u6709\u6570\u636e\u5c1d\u8bd5\u5b8c\u6bd5\uff0c \u5982\u4e0d\u80fd\u8fbe\u5230\u5185\u5b58\u6e05\u7406\u7684\u8981\u6c42\uff0c\u5c06\u51fa\u73b0\u9519\u8bef\u4fe1\u606f\u5982\u4e0b"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"(error) OOM command not allowed when used memory >'maxmemory'\n")),(0,n.kt)("h4",{id:"32-\u7b56\u7565\u914d\u7f6e"},"3.2 \u7b56\u7565\u914d\u7f6e"),(0,n.kt)("p",null,"\u5f71\u54cd\u6570\u636e\u6dd8\u6c70\u7684\u76f8\u5173\u914d\u7f6e\u5982\u4e0b\uff1a"),(0,n.kt)("p",null,"1\uff1a\u6700\u5927\u53ef\u4f7f\u7528\u5185\u5b58\uff0c\u5373\u5360\u7528\u7269\u7406\u5185\u5b58\u7684\u6bd4\u4f8b\uff0c\u9ed8\u8ba4\u503c\u4e3a0\uff0c\u8868\u793a\u4e0d\u9650\u5236\u3002\u751f\u4ea7\u73af\u5883\u4e2d\u6839\u636e\u9700\u6c42\u8bbe\u5b9a\uff0c\u901a\u5e38\u8bbe\u7f6e\u572850%\u4ee5\u4e0a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"maxmemory ?mb\n")),(0,n.kt)("p",null,"2\uff1a\u6bcf\u6b21\u9009\u53d6\u5f85\u5220\u9664\u6570\u636e\u7684\u4e2a\u6570\uff0c\u91c7\u7528\u968f\u673a\u83b7\u53d6\u6570\u636e\u7684\u65b9\u5f0f\u4f5c\u4e3a\u5f85\u68c0\u6d4b\u5220\u9664\u6570\u636e"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"maxmemory-samples count\n")),(0,n.kt)("p",null,"3\uff1a\u5bf9\u6570\u636e\u8fdb\u884c\u5220\u9664\u7684\u9009\u62e9\u7b56\u7565"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"maxmemory-policy policy\n")),(0,n.kt)("p",null,"\u90a3\u6570\u636e\u5220\u9664\u7684\u7b56\u7565policy\u5230\u5e95\u6709\u51e0\u79cd\u5462\uff1f\u4e00\u5171\u662f",(0,n.kt)("strong",{parentName:"p"},"3\u7c7b8\u79cd")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u7b2c\u4e00\u7c7b"),"\uff1a\u68c0\u6d4b\u6613\u5931\u6570\u636e\uff08\u53ef\u80fd\u4f1a\u8fc7\u671f\u7684\u6570\u636e\u96c6server.db","[i]",".expires \uff09 \u540c\u4e00\u4e2a\u5e93"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"volatile-lru\uff1a\u6311\u9009\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u7684\u6570\u636e\u6dd8\u6c70      least recently used\nvolatile-lfu\uff1a\u6311\u9009\u6700\u8fd1\u4f7f\u7528\u6b21\u6570\u6700\u5c11\u7684\u6570\u636e\u6dd8\u6c70   least frequently used\nvolatile-ttl\uff1a\u6311\u9009\u5c06\u8981\u8fc7\u671f\u7684\u6570\u636e\u6dd8\u6c70\nvolatile-random\uff1a\u4efb\u610f\u9009\u62e9\u6570\u636e\u6dd8\u6c70\n")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220301165415119-641eb2c1.png",alt:"image-20220301165415119"}),"image-20220301165415119"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220301165653750-55840293.png",alt:"image-20220301165653750"}),"image-20220301165653750"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220301165809327-31f8b609.png",alt:"image-20220301165809327"}),"image-20220301165809327"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220301165856280-0a278466.png",alt:"image-20220301165856280"}),"image-20220301165856280"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u7b2c\u4e8c\u7c7b"),"\uff1a\u68c0\u6d4b\u5168\u5e93\u6570\u636e\uff08\u6240\u6709\u6570\u636e\u96c6server.db","[i]",".dict \uff09"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"allkeys-lru\uff1a\u6311\u9009\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u7684\u6570\u636e\u6dd8\u6c70\nallkeLyRs-lfu\uff1a\uff1a\u6311\u9009\u6700\u8fd1\u4f7f\u7528\u6b21\u6570\u6700\u5c11\u7684\u6570\u636e\u6dd8\u6c70\nallkeys-random\uff1a\u4efb\u610f\u9009\u62e9\u6570\u636e\u6dd8\u6c70\uff0c\u76f8\u5f53\u4e8e\u968f\u673a\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u7b2c\u4e09\u7c7b"),"\uff1a\u653e\u5f03\u6570\u636e\u9a71\u9010"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"no-enviction\uff08\u9a71\u9010\uff09\uff1a\u7981\u6b62\u9a71\u9010\u6570\u636e(redis4.0\u4e2d\u9ed8\u8ba4\u7b56\u7565)\uff0c\u4f1a\u5f15\u53d1OOM(Out Of Memory)\n")),(0,n.kt)("p",null,"\u6ce8\u610f\uff1a\u8fd9\u4e9b\u7b56\u7565\u662f\u914d\u7f6e\u5230\u54ea\u4e2a\u5c5e\u6027\u4e0a\uff1f\u600e\u4e48\u914d\u7f6e\uff1f\u5982\u4e0b\u6240\u793a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"maxmemory-policy volatile-lru\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u6570\u636e\u6dd8\u6c70\u7b56\u7565\u914d\u7f6e\u4f9d\u636e")),(0,n.kt)("p",null,"\u4f7f\u7528INFO\u547d\u4ee4\u8f93\u51fa\u76d1\u63a7\u4fe1\u606f\uff0c\u67e5\u8be2\u7f13\u5b58 hit \u548c miss \u7684\u6b21\u6570\uff0c\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u8c03\u4f18Redis\u914d\u7f6e"),(0,n.kt)("h2",{id:"\u7b2c\u56db\u7ae0-redis\u7684\u4e3b\u4ece\u590d\u5236\u67b6\u6784"},"\u7b2c\u56db\u7ae0 Redis\u7684\u4e3b\u4ece\u590d\u5236\u67b6\u6784"),(0,n.kt)("h3",{id:"1\u4e3b\u4ece\u590d\u5236\u7b80\u4ecb"},"1\u3001\u4e3b\u4ece\u590d\u5236\u7b80\u4ecb"),(0,n.kt)("h4",{id:"11-\u9ad8\u53ef\u7528"},"1.1 \u9ad8\u53ef\u7528"),(0,n.kt)("p",null,"\u9996\u5148\u6211\u4eec\u8981\u7406\u89e3\u4e92\u8054\u7f51\u5e94\u7528\u56e0\u4e3a\u5176\u72ec\u6709\u7684\u7279\u6027\u6211\u4eec\u6f14\u5316\u51fa\u7684",(0,n.kt)("strong",{parentName:"p"},"\u4e09\u9ad8"),"\u67b6\u6784"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u9ad8\u5e76\u53d1"),(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("p",{parentName:"blockquote"},"\u5e94\u7528\u8981\u63d0\u4f9b\u67d0\u4e00\u4e1a\u52a1\u8981\u80fd\u652f\u6301\u5f88\u591a\u5ba2\u6237\u7aef\u540c\u65f6\u8bbf\u95ee\u7684\u80fd\u529b\uff0c\u6211\u4eec\u79f0\u4e3a\u5e76\u53d1\uff0c\u9ad8\u5e76\u53d1\u610f\u601d\u5c31\u5f88\u660e\u786e\u4e86"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u9ad8\u6027\u80fd"),(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("p",{parentName:"blockquote"},"\u6027\u80fd\u5e26\u7ed9\u6211\u4eec\u6700\u76f4\u89c2\u7684\u611f\u53d7\u5c31\u662f\uff1a\u901f\u5ea6\u5feb\uff0c\u65f6\u95f4\u77ed"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u9ad8\u53ef\u7528"))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u53ef\u7528\u6027"),"\uff1a\u4e00\u5e74\u4e2d\u5e94\u7528\u670d\u52a1\u6b63\u5e38\u8fd0\u884c\u7684\u65f6\u95f4\u5360\u5168\u5e74\u65f6\u95f4\u7684\u767e\u5206\u6bd4\uff0c\u5982\u4e0b\u56fe\uff1a\u8868\u793a\u4e86\u5e94\u7528\u670d\u52a1\u5728\u5168\u5e74\u5b95\u673a\u7684\u65f6\u95f4"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/5-f4499923.png",alt:"img"})),(0,n.kt)("p",null,"\u6211\u4eec\u628a\u8fd9\u4e9b\u65f6\u95f4\u52a0\u5728\u4e00\u8d77\u5c31\u662f\u5168\u5e74\u5e94\u7528\u670d\u52a1\u4e0d\u53ef\u7528\u7684\u65f6\u95f4\uff0c\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u5e94\u7528\u670d\u52a1\u5168\u5e74\u53ef\u7528\u7684\u65f6\u95f4"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"4\u5c0f\u65f627\u520615\u79d2+11\u520636\u79d2+2\u520616\u79d2=4\u5c0f\u65f641\u52067\u79d2=16867\u79d2"),(0,n.kt)("p",{parentName:"blockquote"},"1\u5e74=365",(0,n.kt)("em",{parentName:"p"},"24"),"60*60=31536000\u79d2"),(0,n.kt)("p",{parentName:"blockquote"},"\u53ef\u7528\u6027=\uff0831536000-16867\uff09/31536000*100%=99.9465151%")),(0,n.kt)("p",null,"\u4e1a\u754c\u53ef\u7528\u6027\u76ee\u6807",(0,n.kt)("strong",{parentName:"p"},"5\u4e2a9\uff0c\u537399.999%"),"\uff0c\u5373\u670d\u52a1\u5668\u5e74\u5b95\u673a\u65f6\u957f\u4f4e\u4e8e315\u79d2\uff0c\u7ea65.25\u5206\u949f"),(0,n.kt)("p",null,"\u652f\u4ed8\u5b9d"),(0,n.kt)("p",null,"Amazon \u534a\u5929\u5b95\u673a \u5168\u740360% \u4e91\u670d\u52a1\u5668\u4e0a"),(0,n.kt)("h4",{id:"12-\u4e3b\u4ece\u590d\u5236\u6982\u5ff5"},"1.2 \u4e3b\u4ece\u590d\u5236\u6982\u5ff5"),(0,n.kt)("p",null,"\u77e5\u9053\u4e86\u4e09\u9ad8\u7684\u6982\u5ff5\u4e4b\u540e\uff0c\u6211\u4eec\u60f3\uff1a\u4f60\u7684\u201cRedis\u201d\u662f\u5426\u9ad8\u53ef\u7528\uff1f\u90a3\u6211\u4eec\u8981\u6765\u5206\u6790\u5355\u673aredis\u7684\u98ce\u9669\u4e0e\u95ee\u9898"),(0,n.kt)("p",null,"\u95ee\u98981.\u673a\u5668\u6545\u969c"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u73b0\u8c61\uff1a\u786c\u76d8\u6545\u969c\u3001\u7cfb\u7edf\u5d29\u6e83"),(0,n.kt)("li",{parentName:"ul"},"\u672c\u8d28\uff1a\u6570\u636e\u4e22\u5931\uff0c\u5f88\u53ef\u80fd\u5bf9\u4e1a\u52a1\u9020\u6210\u707e\u96be\u6027\u6253\u51fb"),(0,n.kt)("li",{parentName:"ul"},"\u7ed3\u8bba\uff1a\u57fa\u672c\u4e0a\u4f1a\u653e\u5f03\u4f7f\u7528redis.")),(0,n.kt)("p",null,"\u95ee\u98982.\u5bb9\u91cf\u74f6\u9888"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u73b0\u8c61\uff1a\u5185\u5b58\u4e0d\u8db3\uff0c\u4ece16G\u5347\u7ea7\u523064G\uff0c\u4ece64G\u5347\u7ea7\u5230128G\uff0c\u65e0\u9650\u5347\u7ea7\u5185\u5b58"),(0,n.kt)("li",{parentName:"ul"},"\u672c\u8d28\uff1a\u7a77\uff0c\u786c\u4ef6\u6761\u4ef6\u8ddf\u4e0d\u4e0a"),(0,n.kt)("li",{parentName:"ul"},"\u7ed3\u8bba\uff1a\u653e\u5f03\u4f7f\u7528redis")),(0,n.kt)("p",null,"\u7ed3\u8bba\uff1a"),(0,n.kt)("p",null,"\u4e3a\u4e86\u907f\u514d\u5355\u70b9Redis\u670d\u52a1\u5668\u6545\u969c\uff0c\u51c6\u5907\u591a\u53f0\u670d\u52a1\u5668\uff0c\u4e92\u76f8\u8fde\u901a\u3002\u5c06\u6570\u636e\u590d\u5236\u591a\u4e2a\u526f\u672c\u4fdd\u5b58\u5728\u4e0d\u540c\u7684\u670d\u52a1\u5668\u4e0a\uff0c\u8fde\u63a5\u5728\u4e00\u8d77\uff0c\u5e76\u4fdd\u8bc1\u6570\u636e\u662f\u540c\u6b65\u7684\u3002\u5373\u4f7f\u6709\u5176\u4e2d\u4e00\u53f0\u670d\u52a1\u5668\u5b95\u673a\uff0c\u5176\u4ed6\u670d\u52a1\u5668\u4f9d\u7136\u53ef\u4ee5\u7ee7\u7eed\u63d0\u4f9b\u670d\u52a1\uff0c\u5b9e\u73b0Redis\u7684\u9ad8\u53ef\u7528\uff0c\u540c\u65f6\u5b9e\u73b0\u6570\u636e\u5197\u4f59\u5907\u4efd\u3002"),(0,n.kt)("p",null,"\u591a\u53f0\u670d\u52a1\u5668\u8fde\u63a5\u65b9\u6848\uff1a"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220301173728213-faff35ea.png",alt:"image-20220301173728213"}),"image-20220301173728213"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u63d0\u4f9b\u6570\u636e\u65b9\uff1a",(0,n.kt)("strong",{parentName:"li"},"master"))),(0,n.kt)("p",null,"\u4e3b\u670d\u52a1\u5668\uff0c\u4e3b\u8282\u70b9\uff0c\u4e3b\u5e93\u4e3b\u5ba2\u6237\u7aef"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u63a5\u6536\u6570\u636e\u65b9\uff1a",(0,n.kt)("strong",{parentName:"li"},"slave"))),(0,n.kt)("p",null,"\u4ece\u670d\u52a1\u5668\uff0c\u4ece\u8282\u70b9\uff0c\u4ece\u5e93"),(0,n.kt)("p",null,"\u4ece\u5ba2\u6237\u7aef"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u9700\u8981\u89e3\u51b3\u7684\u95ee\u9898\uff1a")),(0,n.kt)("p",null,"\u6570\u636e\u540c\u6b65\uff08master\u7684\u6570\u636e\u590d\u5236\u5230slave\u4e2d\uff09"),(0,n.kt)("p",null,"\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u6765\u89e3\u91ca\u4e3b\u4ece\u590d\u5236\u7684\u6982\u5ff5\uff1a"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u6982\u5ff5\uff1a\u4e3b\u4ece\u590d\u5236\u5373\u5c06master\u4e2d\u7684\u6570\u636e\u5373\u65f6\u3001\u6709\u6548\u7684\u590d\u5236\u5230slave\u4e2d")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u7279\u5f81"),"\uff1a\u4e00\u4e2amaster\u53ef\u4ee5\u62e5\u6709\u591a\u4e2aslave\uff0c\u4e00\u4e2aslave\u53ea\u5bf9\u5e94\u4e00\u4e2amaster"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u804c\u8d23"),"\uff1amaster\u548cslave\u5404\u81ea\u7684\u804c\u8d23\u4e0d\u4e00\u6837"),(0,n.kt)("p",null,"master:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-markdown"},"\u5199\u6570\u636e\n\u6267\u884c\u5199\u64cd\u4f5c\u65f6\uff0c\u5c06\u51fa\u73b0\u53d8\u5316\u7684\u6570\u636e\u81ea\u52a8\u540c\u6b65\u5230slave\n\u8bfb\u6570\u636e\uff08\u53ef\u5ffd\u7565\uff09\n")),(0,n.kt)("p",null,"slave:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-markdown"},"\u8bfb\u6570\u636e\n\u5199\u6570\u636e\uff08\u7981\u6b62\uff09\n")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220301173950207-7cde7a23.png",alt:"image-20220301173950207"}),"image-20220301173950207"),(0,n.kt)("h4",{id:"13-\u4e3b\u4ece\u590d\u5236\u7684\u4f5c\u7528"},"1.3 \u4e3b\u4ece\u590d\u5236\u7684\u4f5c\u7528"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u8bfb\u5199\u5206\u79bb\uff1amaster\u5199\u3001slave\u8bfb\uff0c\u63d0\u9ad8\u670d\u52a1\u5668\u7684\u8bfb\u5199\u8d1f\u8f7d\u80fd\u529b"),(0,n.kt)("li",{parentName:"ul"},"\u8d1f\u8f7d\u5747\u8861\uff1a\u57fa\u4e8e\u4e3b\u4ece\u7ed3\u6784\uff0c\u914d\u5408\u8bfb\u5199\u5206\u79bb\uff0c\u7531slave\u5206\u62c5master\u8d1f\u8f7d\uff0c\u5e76\u6839\u636e\u9700\u6c42\u7684\u53d8\u5316\uff0c\u6539\u53d8slave\u7684\u6570 \u91cf\uff0c\u901a\u8fc7\u591a\u4e2a\u4ece\u8282\u70b9\u5206\u62c5\u6570\u636e\u8bfb\u53d6\u8d1f\u8f7d\uff0c\u5927\u5927\u63d0\u9ad8Redis\u670d\u52a1\u5668\u5e76\u53d1\u91cf\u4e0e\u6570\u636e\u541e\u5410\u91cf"),(0,n.kt)("li",{parentName:"ul"},"\u6545\u969c\u6062\u590d\uff1a\u5f53master\u51fa\u73b0\u95ee\u9898\u65f6\uff0c\u7531slave\u63d0\u4f9b\u670d\u52a1\uff0c\u5b9e\u73b0\u5feb\u901f\u7684\u6545\u969c\u6062\u590d"),(0,n.kt)("li",{parentName:"ul"},"\u6570\u636e\u5197\u4f59\uff1a\u5b9e\u73b0\u6570\u636e\u70ed\u5907\u4efd\uff0c\u662f\u6301\u4e45\u5316\u4e4b\u5916\u7684\u4e00\u79cd\u6570\u636e\u5197\u4f59\u65b9\u5f0f"),(0,n.kt)("li",{parentName:"ul"},"\u9ad8\u53ef\u7528\u57fa\u77f3\uff1a\u57fa\u4e8e\u4e3b\u4ece\u590d\u5236\uff0c\u6784\u5efa\u54e8\u5175\u6a21\u5f0f\u4e0e\u96c6\u7fa4\uff0c\u5b9e\u73b0Redis\u7684\u9ad8\u53ef\u7528\u65b9\u6848")),(0,n.kt)("h3",{id:"2\u4e3b\u4ece\u590d\u5236\u5de5\u4f5c\u6d41\u7a0b"},"2\u3001\u4e3b\u4ece\u590d\u5236\u5de5\u4f5c\u6d41\u7a0b"),(0,n.kt)("p",null,"\u4e3b\u4ece\u590d\u5236\u8fc7\u7a0b\u5927\u4f53\u53ef\u4ee5\u5206\u4e3a3\u4e2a\u9636\u6bb5"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5efa\u7acb\u8fde\u63a5\u9636\u6bb5\uff08\u5373\u51c6\u5907\u9636\u6bb5\uff09"),(0,n.kt)("li",{parentName:"ul"},"\u6570\u636e\u540c\u6b65\u9636\u6bb5"),(0,n.kt)("li",{parentName:"ul"},"\u547d\u4ee4\u4f20\u64ad\u9636\u6bb5\uff08\u53cd\u590d\u540c\u6b65\uff09")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220301175309628-8e0b266c.png",alt:"image-20220301175309628"}),"image-20220301175309628"),(0,n.kt)("p",null,"\u800c\u547d\u4ee4\u7684\u4f20\u64ad\u5176\u5b9e\u67094\u79cd\uff0c\u5206\u522b\u5982\u4e0b\uff1a"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220301175429148-3685a75f.png",alt:"image-20220301175429148"}),"image-20220301175429148"),(0,n.kt)("h4",{id:"21-\u4e3b\u4ece\u590d\u5236\u7684\u5de5\u4f5c\u6d41\u7a0b\u4e09\u4e2a\u9636\u6bb5"},"2.1 \u4e3b\u4ece\u590d\u5236\u7684\u5de5\u4f5c\u6d41\u7a0b\uff08\u4e09\u4e2a\u9636\u6bb5\uff09"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u9636\u6bb5\u4e00\uff1a\u5efa\u7acb\u8fde\u63a5")),(0,n.kt)("p",null,"\u5efa\u7acbslave\u5230master\u7684\u8fde\u63a5\uff0c\u4f7fmaster\u80fd\u591f\u8bc6\u522bslave\uff0c\u5e76\u4fdd\u5b58slave\u7aef\u53e3\u53f7"),(0,n.kt)("p",null,"\u6d41\u7a0b\u5982\u4e0b\uff1a"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u6b65\u9aa41\uff1a\u8bbe\u7f6emaster\u7684\u5730\u5740\u548c\u7aef\u53e3\uff0c\u4fdd\u5b58master\u4fe1\u606f"),(0,n.kt)("li",{parentName:"ol"},"\u6b65\u9aa42\uff1a\u5efa\u7acbsocket\u8fde\u63a5"),(0,n.kt)("li",{parentName:"ol"},"\u6b65\u9aa43\uff1a\u53d1\u9001ping\u547d\u4ee4\uff08\u5b9a\u65f6\u5668\u4efb\u52a1\uff09"),(0,n.kt)("li",{parentName:"ol"},"\u6b65\u9aa44\uff1a\u8eab\u4efd\u9a8c\u8bc1"),(0,n.kt)("li",{parentName:"ol"},"\u6b65\u9aa45\uff1a\u53d1\u9001slave\u7aef\u53e3\u4fe1\u606f")),(0,n.kt)("p",null,"\u81f3\u6b64\uff0c\u4e3b\u4ece\u8fde\u63a5\u6210\u529f\uff01"),(0,n.kt)("p",null,"\u5f53\u524d\u72b6\u6001\uff1a"),(0,n.kt)("p",null,"slave\uff1a\u4fdd\u5b58master\u7684\u5730\u5740\u4e0e\u7aef\u53e3"),(0,n.kt)("p",null,"master\uff1a\u4fdd\u5b58slave\u7684\u7aef\u53e3"),(0,n.kt)("p",null,"\u603b\u4f53\uff1a\u4e4b\u95f4\u521b\u5efa\u4e86\u8fde\u63a5\u7684socket"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220301180213179-69b85b61.png",alt:"image-20220301180213179"}),"image-20220301180213179"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"master\u548cslave\u4e92\u8054")),(0,n.kt)("p",null,"\u63a5\u4e0b\u6765\u5c31\u8981\u901a\u8fc7\u67d0\u79cd\u65b9\u5f0f\u5c06master\u548cslave\u8fde\u63a5\u5230\u4e00\u8d77"),(0,n.kt)("p",null,"\u65b9\u5f0f\u4e00\uff1a\u5ba2\u6237\u7aef\u53d1\u9001\u547d\u4ee4"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"slaveof masterip masterport\n")),(0,n.kt)("p",null,"\u65b9\u5f0f\u4e8c\uff1a\u542f\u52a8\u670d\u52a1\u5668\u53c2\u6570"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"redis-server --slaveof masterip masterport\n")),(0,n.kt)("p",null,"\u65b9\u5f0f\u4e09\uff1a\u670d\u52a1\u5668\u914d\u7f6e\uff08",(0,n.kt)("strong",{parentName:"p"},"\u4e3b\u6d41\u65b9\u5f0f"),"\uff09"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"slaveof masterip masterport\n")),(0,n.kt)("p",null,"slave\u7cfb\u7edf\u4fe1\u606f"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"master_link_down_since_seconds\nmasterhost & masterport\n")),(0,n.kt)("p",null,"master\u7cfb\u7edf\u4fe1\u606f"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"uslave_listening_port(\u591a\u4e2a)\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u4e3b\u4ece\u65ad\u5f00\u8fde\u63a5")),(0,n.kt)("p",null,"\u65ad\u5f00slave\u4e0emaster\u7684\u8fde\u63a5\uff0cslave\u65ad\u5f00\u8fde\u63a5\u540e\uff0c\u4e0d\u4f1a\u5220\u9664\u5df2\u6709\u6570\u636e\uff0c\u53ea\u662f\u4e0d\u518d\u63a5\u53d7master\u53d1\u9001\u7684\u6570\u636e"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"slaveof no one\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u6388\u6743\u8bbf\u95ee")),(0,n.kt)("p",null,"master\u5ba2\u6237\u7aef\u53d1\u9001\u547d\u4ee4\u8bbe\u7f6e\u5bc6\u7801"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"requirepass password\n")),(0,n.kt)("p",null,"master\u914d\u7f6e\u6587\u4ef6\u8bbe\u7f6e\u5bc6\u7801"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"config set requirepass password\nconfig get requirepass\n")),(0,n.kt)("p",null,"slave\u5ba2\u6237\u7aef\u53d1\u9001\u547d\u4ee4\u8bbe\u7f6e\u5bc6\u7801"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"auth password\n")),(0,n.kt)("p",null,"slave\u914d\u7f6e\u6587\u4ef6\u8bbe\u7f6e\u5bc6\u7801"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"masterauth password\n")),(0,n.kt)("p",null,"slave\u542f\u52a8\u670d\u52a1\u5668\u8bbe\u7f6e\u5bc6\u7801"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"redis-server \u2013a password\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u9636\u6bb5\u4e8c\uff1a\u6570\u636e\u540c\u6b65")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5728slave\u521d\u6b21\u8fde\u63a5master\u540e\uff0c\u590d\u5236master\u4e2d\u7684\u6240\u6709\u6570\u636e\u5230slave"),(0,n.kt)("li",{parentName:"ul"},"\u5c06slave\u7684\u6570\u636e\u5e93\u72b6\u6001\u66f4\u65b0\u6210master\u5f53\u524d\u7684\u6570\u636e\u5e93\u72b6\u6001")),(0,n.kt)("p",null,"\u540c\u6b65\u8fc7\u7a0b\u5982\u4e0b\uff1a"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u6b65\u9aa41\uff1a\u8bf7\u6c42\u540c\u6b65\u6570\u636e"),(0,n.kt)("li",{parentName:"ol"},"\u6b65\u9aa42\uff1a\u521b\u5efaRDB\u540c\u6b65\u6570\u636e"),(0,n.kt)("li",{parentName:"ol"},"\u6b65\u9aa43\uff1a\u6062\u590dRDB\u540c\u6b65\u6570\u636e"),(0,n.kt)("li",{parentName:"ol"},"\u6b65\u9aa44\uff1a\u8bf7\u6c42\u90e8\u5206\u540c\u6b65\u6570\u636e"),(0,n.kt)("li",{parentName:"ol"},"\u6b65\u9aa45\uff1a\u6062\u590d\u90e8\u5206\u540c\u6b65\u6570\u636e")),(0,n.kt)("p",null,"\u81f3\u6b64\uff0c\u6570\u636e\u540c\u6b65\u5de5\u4f5c\u5b8c\u6210\uff01"),(0,n.kt)("p",null,"\u5f53\u524d\u72b6\u6001\uff1a"),(0,n.kt)("p",null,"slave\uff1a\u5177\u6709master\u7aef\u5168\u90e8\u6570\u636e\uff0c\u5305\u542bRDB\u8fc7\u7a0b\u63a5\u6536\u7684\u6570\u636e"),(0,n.kt)("p",null,"master\uff1a\u4fdd\u5b58slave\u5f53\u524d\u6570\u636e\u540c\u6b65\u7684\u4f4d\u7f6e"),(0,n.kt)("p",null,"\u603b\u4f53\uff1a\u4e4b\u95f4\u5b8c\u6210\u4e86\u6570\u636e\u514b\u9686"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220301230944836-c1284320.png",alt:"image-20220301230944836"}),"image-20220301230944836"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u6570\u636e\u540c\u6b65\u9636\u6bb5master\u8bf4\u660e")),(0,n.kt)("p",null,"1\uff1a\u5982\u679cmaster\u6570\u636e\u91cf\u5de8\u5927\uff0c\u6570\u636e\u540c\u6b65\u9636\u6bb5\u5e94\u907f\u5f00\u6d41\u91cf\u9ad8\u5cf0\u671f\uff0c\u907f\u514d\u9020\u6210master\u963b\u585e\uff0c\u5f71\u54cd\u4e1a\u52a1\u6b63\u5e38\u6267\u884c"),(0,n.kt)("p",null,"2\uff1a\u590d\u5236\u7f13\u51b2\u533a\u5927\u5c0f\u8bbe\u5b9a\u4e0d\u5408\u7406\uff0c\u4f1a\u5bfc\u81f4\u6570\u636e\u6ea2\u51fa\u3002\u5982\u8fdb\u884c\u5168\u91cf\u590d\u5236\u5468\u671f\u592a\u957f\uff0c\u8fdb\u884c\u90e8\u5206\u590d\u5236\u65f6\u53d1\u73b0\u6570\u636e\u5df2\u7ecf\u5b58\u5728\u4e22\u5931\u7684\u60c5\u51b5\uff0c\u5fc5\u987b\u8fdb\u884c\u7b2c\u4e8c\u6b21\u5168\u91cf\u590d\u5236\uff0c\u81f4\u4f7fslave\u9677\u5165\u6b7b\u5faa\u73af\u72b6\u6001\u3002"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"repl-backlog-size ?mb\n")),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"master\u5355\u673a\u5185\u5b58\u5360\u7528\u4e3b\u673a\u5185\u5b58\u7684\u6bd4\u4f8b\u4e0d\u5e94\u8fc7\u5927\uff0c\u5efa\u8bae\u4f7f\u752850%-70%\u7684\u5185\u5b58\uff0c\u7559\u4e0b30%-50%\u7684\u5185\u5b58\u7528\u4e8e\u6267 \u884cbgsave\u547d\u4ee4\u548c\u521b\u5efa\u590d\u5236\u7f13\u51b2\u533a")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u6570\u636e\u540c\u6b65\u9636\u6bb5slave\u8bf4\u660e")),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u4e3a\u907f\u514dslave\u8fdb\u884c\u5168\u91cf\u590d\u5236\u3001\u90e8\u5206\u590d\u5236\u65f6\u670d\u52a1\u5668\u54cd\u5e94\u963b\u585e\u6216\u6570\u636e\u4e0d\u540c\u6b65\uff0c\u5efa\u8bae\u5173\u95ed\u6b64\u671f\u95f4\u7684\u5bf9\u5916\u670d\u52a1")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"}," slave-serve-stale-data yes|no\n")),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u6570\u636e\u540c\u6b65\u9636\u6bb5\uff0cmaster\u53d1\u9001\u7ed9slave\u4fe1\u606f\u53ef\u4ee5\u7406\u89e3master\u662fslave\u7684\u4e00\u4e2a\u5ba2\u6237\u7aef\uff0c\u4e3b\u52a8\u5411slave\u53d1\u9001\u547d\u4ee4"),(0,n.kt)("li",{parentName:"ol"},"\u591a\u4e2aslave\u540c\u65f6\u5bf9master\u8bf7\u6c42\u6570\u636e\u540c\u6b65\uff0cmaster\u53d1\u9001\u7684RDB\u6587\u4ef6\u589e\u591a\uff0c\u4f1a\u5bf9\u5e26\u5bbd\u9020\u6210\u5de8\u5927\u51b2\u51fb\uff0c\u5982\u679cmaster\u5e26\u5bbd\u4e0d\u8db3\uff0c\u56e0\u6b64\u6570\u636e\u540c\u6b65\u9700\u8981\u6839\u636e\u4e1a\u52a1\u9700\u6c42\uff0c\u9002\u91cf\u9519\u5cf0"),(0,n.kt)("li",{parentName:"ol"},"slave\u8fc7\u591a\u65f6\uff0c\u5efa\u8bae\u8c03\u6574\u62d3\u6251\u7ed3\u6784\uff0c\u7531\u4e00\u4e3b\u591a\u4ece\u7ed3\u6784\u53d8\u4e3a\u6811\u72b6\u7ed3\u6784\uff0c\u4e2d\u95f4\u7684\u8282\u70b9\u65e2\u662fmaster\uff0c\u4e5f\u662f slave\u3002\u6ce8\u610f\u4f7f\u7528\u6811\u72b6\u7ed3\u6784\u65f6\uff0c\u7531\u4e8e\u5c42\u7ea7\u6df1\u5ea6\uff0c\u5bfc\u81f4\u6df1\u5ea6\u8d8a\u9ad8\u7684slave\u4e0e\u6700\u9876\u5c42master\u95f4\u6570\u636e\u540c\u6b65\u5ef6\u8fdf\u8f83\u5927\uff0c\u6570\u636e\u4e00\u81f4\u6027\u53d8\u5dee\uff0c\u5e94\u8c28\u614e\u9009\u62e9")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220301231525873-be3ebd68.png",alt:"image-20220301231525873"}),"image-20220301231525873"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u751f\u4ea7\u73af\u5883"),"\uff1a\u4e00\u5f00\u59cb\uff0c\u60f3\u597dredis\u67b6\u6784\uff0c\u4e00\u5f00\u59cb\u5c31\u628an\u4e3bm\u4ece\u7684redis\u670d\u52a1\u90fd\u542f\u52a8\u8d77\u6765\u3002"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u9636\u6bb5\u4e09\uff1a\u547d\u4ee4\u4f20\u64ad")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5f53master\u6570\u636e\u5e93\u72b6\u6001\u88ab\u4fee\u6539\u540e\uff0c\u5bfc\u81f4\u4e3b\u4ece\u670d\u52a1\u5668\u6570\u636e\u5e93\u72b6\u6001\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u9700\u8981\u8ba9\u4e3b\u4ece\u6570\u636e\u540c\u6b65\u5230\u4e00\u81f4\u7684\u72b6\u6001\uff0c\u540c\u6b65\u7684\u52a8\u4f5c\u79f0\u4e3a",(0,n.kt)("strong",{parentName:"li"},"\u547d\u4ee4\u4f20\u64ad")),(0,n.kt)("li",{parentName:"ul"},"master\u5c06\u63a5\u6536\u5230\u7684\u6570\u636e\u53d8\u66f4\u547d\u4ee4\u53d1\u9001\u7ed9slave\uff0cslave\u63a5\u6536\u547d\u4ee4\u540e\u6267\u884c\u547d\u4ee4")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u547d\u4ee4\u4f20\u64ad\u9636\u6bb5\u7684\u90e8\u5206\u590d\u5236")),(0,n.kt)("p",null,"\u547d\u4ee4\u4f20\u64ad\u9636\u6bb5\u51fa\u73b0\u4e86\u65ad\u7f51\u73b0\u8c61\uff1a"),(0,n.kt)("p",null,"\u7f51\u7edc\u95ea\u65ad\u95ea\u8fde\uff1a\u5ffd\u7565"),(0,n.kt)("p",null,"\u77ed\u65f6\u95f4\u7f51\u7edc\u4e2d\u65ad\uff1a\u90e8\u5206\u590d\u5236"),(0,n.kt)("p",null,"\u957f\u65f6\u95f4\u7f51\u7edc\u4e2d\u65ad\uff1a\u5168\u91cf\u590d\u5236"),(0,n.kt)("p",null,"\u8fd9\u91cc\u6211\u4eec\u4e3b\u8981\u6765\u770b\u90e8\u5206\u590d\u5236\uff0c\u90e8\u5206\u590d\u5236\u7684\u4e09\u4e2a\u6838\u5fc3\u8981\u7d20"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u670d\u52a1\u5668\u7684\u8fd0\u884c id\uff08run id\uff09"),(0,n.kt)("li",{parentName:"ol"},"\u4e3b\u670d\u52a1\u5668\u7684\u590d\u5236\u79ef\u538b\u7f13\u51b2\u533a"),(0,n.kt)("li",{parentName:"ol"},"\u4e3b\u4ece\u670d\u52a1\u5668\u7684\u590d\u5236\u504f\u79fb\u91cf")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u670d\u52a1\u5668\u8fd0\u884cID\uff08runid\uff09")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-markdown"},"\u6982\u5ff5\uff1a\u670d\u52a1\u5668\u8fd0\u884cID\u662f\u6bcf\u4e00\u53f0\u670d\u52a1\u5668\u6bcf\u6b21\u8fd0\u884c\u7684\u8eab\u4efd\u8bc6\u522b\u7801\uff0c\u4e00\u53f0\u670d\u52a1\u5668\u591a\u6b21\u8fd0\u884c\u53ef\u4ee5\u751f\u6210\u591a\u4e2a\u8fd0\u884cid\n\n\u7ec4\u6210\uff1a\u8fd0\u884cid\u753140\u4f4d\u5b57\u7b26\u7ec4\u6210\uff0c\u662f\u4e00\u4e2a\u968f\u673a\u7684\u5341\u516d\u8fdb\u5236\u5b57\u7b26\n\u4f8b\u5982\uff1afdc9ff13b9bbaab28db42b3d50f852bb5e3fcdce\n\n\u4f5c\u7528\uff1a\u8fd0\u884cid\u88ab\u7528\u4e8e\u5728\u670d\u52a1\u5668\u95f4\u8fdb\u884c\u4f20\u8f93\uff0c\u8bc6\u522b\u8eab\u4efd\n\u5982\u679c\u60f3\u4e24\u6b21\u64cd\u4f5c\u5747\u5bf9\u540c\u4e00\u53f0\u670d\u52a1\u5668\u8fdb\u884c\uff0c\u5fc5\u987b\u6bcf\u6b21\u64cd\u4f5c\u643a\u5e26\u5bf9\u5e94\u7684\u8fd0\u884cid\uff0c\u7528\u4e8e\u5bf9\u65b9\u8bc6\u522b\n\n\u5b9e\u73b0\u65b9\u5f0f\uff1a\u8fd0\u884cid\u5728\u6bcf\u53f0\u670d\u52a1\u5668\u542f\u52a8\u65f6\u81ea\u52a8\u751f\u6210\u7684\uff0cmaster\u5728\u9996\u6b21\u8fde\u63a5slave\u65f6\uff0c\u4f1a\u5c06\u81ea\u5df1\u7684\u8fd0\u884cID\u53d1\u9001\u7ed9slave\uff0c\nslave\u4fdd\u5b58\u6b64ID\uff0c\u901a\u8fc7info Server\u547d\u4ee4\uff0c\u53ef\u4ee5\u67e5\u770b\u8282\u70b9\u7684runid\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u590d\u5236\u7f13\u51b2\u533a")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-markdown"},"\u6982\u5ff5\uff1a\u590d\u5236\u7f13\u51b2\u533a\uff0c\u53c8\u540d\u590d\u5236\u79ef\u538b\u7f13\u51b2\u533a\uff0c\u662f\u4e00\u4e2a\u5148\u8fdb\u5148\u51fa\uff08FIFO\uff09\u7684\u961f\u5217\uff0c\u7528\u4e8e\u5b58\u50a8\u670d\u52a1\u5668\u6267\u884c\u8fc7\u7684\u547d\u4ee4\uff0c\u6bcf\u6b21\u4f20\u64ad\u547d\u4ee4\uff0cmaster\u90fd\u4f1a\u5c06\u4f20\u64ad\u7684\u547d\u4ee4\u8bb0\u5f55\u4e0b\u6765\uff0c\u5e76\u5b58\u50a8\u5728\u590d\u5236\u7f13\u51b2\u533a\n    \u590d\u5236\u7f13\u51b2\u533a\u9ed8\u8ba4\u6570\u636e\u5b58\u50a8\u7a7a\u95f4\u5927\u5c0f\u662f1M\n    \u5f53\u5165\u961f\u5143\u7d20\u7684\u6570\u91cf\u5927\u4e8e\u961f\u5217\u957f\u5ea6\u65f6\uff0c\u6700\u5148\u5165\u961f\u7684\u5143\u7d20\u4f1a\u88ab\u5f39\u51fa\uff0c\u800c\u65b0\u5143\u7d20\u4f1a\u88ab\u653e\u5165\u961f\u5217\n\u4f5c\u7528\uff1a\u7528\u4e8e\u4fdd\u5b58master\u6536\u5230\u7684\u6240\u6709\u6307\u4ee4\uff08\u4ec5\u5f71\u54cd\u6570\u636e\u53d8\u66f4\u7684\u6307\u4ee4\uff0c\u4f8b\u5982set\uff0cselect\uff09\n\n\u6570\u636e\u6765\u6e90\uff1a\u5f53master\u63a5\u6536\u5230\u4e3b\u5ba2\u6237\u7aef\u7684\u6307\u4ee4\u65f6\uff0c\u9664\u4e86\u5c06\u6307\u4ee4\u6267\u884c\uff0c\u4f1a\u5c06\u8be5\u6307\u4ee4\u5b58\u50a8\u5230\u7f13\u51b2\u533a\u4e2d\n")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220301234749157-54f0dc33.png",alt:"image-20220301234749157"}),"image-20220301234749157"),(0,n.kt)("p",null,"\u590d\u5236\u7f13\u51b2\u533a\u5185\u90e8\u5de5\u4f5c\u539f\u7406\uff1a"),(0,n.kt)("p",null,"\u7ec4\u6210"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u504f\u79fb\u91cf"),(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("p",{parentName:"blockquote"},"\u6982\u5ff5\uff1a\u4e00\u4e2a\u6570\u5b57\uff0c\u63cf\u8ff0\u590d\u5236\u7f13\u51b2\u533a\u4e2d\u7684\u6307\u4ee4\u5b57\u8282\u4f4d\u7f6e"),(0,n.kt)("p",{parentName:"blockquote"},"\u5206\u7c7b\uff1a"),(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},"master\u590d\u5236\u504f\u79fb\u91cf\uff1a\u8bb0\u5f55\u53d1\u9001\u7ed9\u6240\u6709slave\u7684\u6307\u4ee4\u5b57\u8282\u5bf9\u5e94\u7684\u4f4d\u7f6e\uff08\u591a\u4e2a\uff09"),(0,n.kt)("li",{parentName:"ul"},"slave\u590d\u5236\u504f\u79fb\u91cf\uff1a\u8bb0\u5f55slave\u63a5\u6536master\u53d1\u9001\u8fc7\u6765\u7684\u6307\u4ee4\u5b57\u8282\u5bf9\u5e94\u7684\u4f4d\u7f6e\uff08\u4e00\u4e2a\uff09")),(0,n.kt)("p",{parentName:"blockquote"},"\u4f5c\u7528\uff1a\u540c\u6b65\u4fe1\u606f\uff0c\u6bd4\u5bf9master\u4e0eslave\u7684\u5dee\u5f02\uff0c\u5f53slave\u65ad\u7ebf\u540e\uff0c\u6062\u590d\u6570\u636e\u4f7f\u7528"),(0,n.kt)("p",{parentName:"blockquote"},"\u6570\u636e\u6765\u6e90\uff1a"),(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},"master\u7aef\uff1a\u53d1\u9001\u4e00\u6b21\u8bb0\u5f55\u4e00\u6b21"),(0,n.kt)("li",{parentName:"ul"},"slave\u7aef\uff1a\u63a5\u6536\u4e00\u6b21\u8bb0\u5f55\u4e00\u6b21")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u5b57\u8282\u503c"))),(0,n.kt)("p",null,"\u5de5\u4f5c\u539f\u7406"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u901a\u8fc7offset\u533a\u5206\u4e0d\u540c\u7684slave\u5f53\u524d\u6570\u636e\u4f20\u64ad\u7684\u5dee\u5f02"),(0,n.kt)("li",{parentName:"ul"},"master\u8bb0\u5f55\u5df2\u53d1\u9001\u7684\u4fe1\u606f\u5bf9\u5e94\u7684offset"),(0,n.kt)("li",{parentName:"ul"},"slave\u8bb0\u5f55\u5df2\u63a5\u6536\u7684\u4fe1\u606f\u5bf9\u5e94\u7684offset")),(0,n.kt)("h4",{id:"22-\u6d41\u7a0b\u66f4\u65b0\u5168\u91cf\u590d\u5236\u90e8\u5206\u590d\u5236"},"2.2 \u6d41\u7a0b\u66f4\u65b0(\u5168\u91cf\u590d\u5236/\u90e8\u5206\u590d\u5236)"),(0,n.kt)("p",null,"\u6211\u4eec\u518d\u6b21\u7684\u603b\u7ed3\u4e00\u4e0b\u4e3b\u4ece\u590d\u5236\u7684\u4e09\u4e2a\u9636\u6bb5\u7684\u5de5\u4f5c\u6d41\u7a0b\uff1a"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302004108225-246adaf9.png",alt:"image-20220302004108225"}),"image-20220302004108225"),(0,n.kt)("h4",{id:"23-\u5fc3\u8df3\u673a\u5236"},"2.3 \u5fc3\u8df3\u673a\u5236"),(0,n.kt)("p",null,"\u4ec0\u4e48\u662f\u5fc3\u8df3\u673a\u5236\uff1f"),(0,n.kt)("p",null,"\u8fdb\u5165\u547d\u4ee4\u4f20\u64ad\u9636\u6bb5\u5019\uff0cmaster\u4e0eslave\u95f4\u9700\u8981\u8fdb\u884c\u4fe1\u606f\u4ea4\u6362\uff0c\u4f7f\u7528\u5fc3\u8df3\u673a\u5236\u8fdb\u884c\u7ef4\u62a4\uff0c\u5b9e\u73b0\u53cc\u65b9\u8fde\u63a5\u4fdd\u6301\u5728\u7ebf"),(0,n.kt)("p",null,"master\u5fc3\u8df3\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5185\u90e8\u6307\u4ee4\uff1aPING"),(0,n.kt)("li",{parentName:"ul"},"\u5468\u671f\uff1a\u7531repl-ping-slave-period\u51b3\u5b9a\uff0c\u9ed8\u8ba410\u79d2"),(0,n.kt)("li",{parentName:"ul"},"\u4f5c\u7528\uff1a\u5224\u65adslave\u662f\u5426\u5728\u7ebf"),(0,n.kt)("li",{parentName:"ul"},"\u67e5\u8be2\uff1aINFO replication \u83b7\u53d6slave\u6700\u540e\u4e00\u6b21\u8fde\u63a5\u65f6\u95f4\u95f4\u9694\uff0clag\u9879\u7ef4\u6301\u57280\u62161\u89c6\u4e3a\u6b63\u5e38")),(0,n.kt)("p",null,"slave\u5fc3\u8df3\u4efb\u52a1"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5185\u90e8\u6307\u4ee4\uff1aREPLCONF ACK"),(0,n.kt)("li",{parentName:"ul"},"\u5468\u671f\uff1a1\u79d2"),(0,n.kt)("li",{parentName:"ul"},"\u4f5c\u75281\uff1a\u6c47\u62a5slave\u81ea\u5df1\u7684\u590d\u5236\u504f\u79fb\u91cf\uff0c\u83b7\u53d6\u6700\u65b0\u7684\u6570\u636e\u53d8\u66f4\u6307\u4ee4"),(0,n.kt)("li",{parentName:"ul"},"\u4f5c\u75282\uff1a\u5224\u65admaster\u662f\u5426\u5728\u7ebf")),(0,n.kt)("p",null,"\u5fc3\u8df3\u9636\u6bb5\u6ce8\u610f\u4e8b\u9879\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5f53slave\u591a\u6570\u6389\u7ebf\uff0c\u6216\u5ef6\u8fdf\u8fc7\u9ad8\u65f6\uff0cmaster\u4e3a\u4fdd\u969c\u6570\u636e\u7a33\u5b9a\u6027\uff0c\u5c06\u62d2\u7edd\u6240\u6709\u4fe1\u606f\u540c\u6b65")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"min-slaves-to-write 2\nmin-slaves-max-lag 8\n")),(0,n.kt)("p",null,"slave\u6570\u91cf\u5c11\u4e8e2\u4e2a\uff0c\u6216\u8005\u6240\u6709slave\u7684\u5ef6\u8fdf\u90fd\u5927\u4e8e\u7b49\u4e8e8\u79d2\u65f6\uff0c\u5f3a\u5236\u5173\u95edmaster\u5199\u529f\u80fd\uff0c\u505c\u6b62\u6570\u636e\u540c\u6b65"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"slave\u6570\u91cf\u7531slave\u53d1\u9001REPLCONF ACK\u547d\u4ee4\u505a\u786e\u8ba4"),(0,n.kt)("li",{parentName:"ul"},"slave\u5ef6\u8fdf\u7531slave\u53d1\u9001REPLCONF ACK\u547d\u4ee4\u505a\u786e\u8ba4")),(0,n.kt)("p",null,"\u81f3\u6b64\uff1a\u6211\u4eec\u53ef\u4ee5\u603b\u7ed3\u51fa\u5b8c\u6574\u7684\u4e3b\u4ece\u590d\u5236\u6d41\u7a0b\uff1a"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302005829154-38f96bf0.png",alt:"image-20220302005829154"}),"image-20220302005829154"),(0,n.kt)("h3",{id:"3\u642d\u5efa\u4e3b\u4ece\u67b6\u6784"},"3\u3001\u642d\u5efa\u4e3b\u4ece\u67b6\u6784"),(0,n.kt)("h4",{id:"31\u80cc\u666f"},"3.1\u80cc\u666f"),(0,n.kt)("p",null,"\u771f\u5b9e\u7684\u751f\u4ea7\u73af\u5883\uff0c\u4e3b\u4ece\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u7269\u7406\u5730\u65b9"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302012314515-f6cc7dc0.png",alt:"image-20220302012314515"}),"image-20220302012314515"),(0,n.kt)("p",null,"\u6559\u5b66"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302012434561-6cd0b2ba.png",alt:"image-20220302012434561"}),"image-20220302012434561"),(0,n.kt)("h4",{id:"32-\u64cd\u4f5c"},"3.2 \u64cd\u4f5c"),(0,n.kt)("p",null,"1\u590d\u5236\u4e24\u5957redis redis6380 redis 6381"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"cp redis-6.2.6/ redis6380\ncp redis-6.2.6/ redis6381\n")),(0,n.kt)("p",null,"2\u5206\u522b\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},'port 6380\npidfile /var/run/redis_6380.pid\nlogfile "/export/server/redis6380/log/redis.log"\ndir /export/server/redis6380/data\n')),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},'port 6381\npidfile /var/run/redis_6381.pid\nlogfile "/export/server/redis6381/log/redis.log"\ndir /export/server/redis6381/data\n')),(0,n.kt)("p",null,"3",(0,n.kt)("strong",{parentName:"p"},"\u542f\u52a8"),"\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"./bin/redis-server redis.conf slaveof 192.168.200.131 6379\n")),(0,n.kt)("p",null,"4\u6548\u679c"),(0,n.kt)("p",null,"\u767b\u96466380"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"./bin/redis-cli -h 192.168.200.131 -p 6380\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"info \n")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302013403949-808c2bb5.png",alt:"image-20220302013403949"}),"image-20220302013403949"),(0,n.kt)("p",null,"5\u6d4b\u8bd5"),(0,n.kt)("p",null," 1 \u4e3b\u8282\u70b9\u5199\u6570\u636e\uff0c\u4ece\u8282\u70b9\u83b7\u53d6\u6570\u636e"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAT4AAAA8CAYAAAD/h9aPAAAKhUlEQVR4nO2d308TWRvHvzN5/wPuWnizG3bvWKtIoQQl2WxMjFdQSGW92I0k/kpwg1JiwHBllBgQiZIIrwlGL15rw68rYrJ5YwI2xRZFfLlziZsX2j9j5r2YznTazkxPh1bU+X4SL5wezjxnzpnvec6POY9UV1enwoHwg20MBjcw3XYBS7Jsmy4wvIqZnnqkJ5twfUG2vKYofZh+M4KW9Dg6/4gBABTlOKLLt1CfAVqCe8Z9lKM3EX8UgQ+F9xa1hxBC7PhHtTLanjiDjk9zSER3sB7VrqnqPpYvN2Hqvb1AyfJbTD7fQyLaDlXdy19/fxuRtpeILs/jWmoH10x/o6ZeUfQIIa6Rynl8hBDyrUG3iRDiOSh8hBDPQeEjhHgOCh8hxHNQ+AghnoPCRwjxHBQ+QojnoPARQjwHhY8Q4jkofIQQz0HhI4R4DgofIcRzUPgIIYdGYHgVa8k5hBXls96XwkfIN46i9GEquY3Y8PHDNuWLQfg8Pv1gUL8kFRw2apcGAFQ1aXlgqH5AqY6aeYGr3bewfYAz9kTsA2Achhp0sLG4HACQWTyPvom3rmwTLW+pbftYuXK65DxD0XSVUO75Kb1zSETbC6451ZtofQjbV6beROwrzqOYkvSC7Zl8fZStQUU5juuL23g9BsSXMvbpeueQmD2L7L2fcDJ0BCdDRzCdDmHwzeMCNzYwvIqHoQQGWptwMnQEHa13sOmL4OHyGAIu3F1R+/R7J1Kj8C31GzZ2tl8qFD2LcnRcfgGE5131mKLlNZ9Ord/36hLQPbuDqd7K04ki+vzkhUvG/bRynMcKrMohXh+iiNSbiH2yHMP19kBBOr1O0qqK7MbLvOgJtmd6U18nZYWvd2YerRv96Oy5jV2bNIrSh+mhENTUnYKefWFgHJsIIXIjaFzbnjiDzp7bRgOT5RieLmUAXwd+aa68ACL2AVrvPRL2Iz3Z5Oi59XaGoGZe4GncdPHdS6SygC90umJxFi1v78wIWrJxXB34t3Ft6+4YljMqWn7Nv7yi6UQRfX7FaCdnb1iUo7L8dOFYW7xpabtovYnaZ8WxG7+hBRmk/kwbNom2Z70+/T1PsPagT9g+J/Rnsr7xAesbH7CWXMX1oxbPJtfJ2KULDK9ifeMDEqlRBCUJ/p4nRtr1jQ+uxVo5ehMxk33rGx9cdbqFBAvLUqVnaUdZ4Vv6I1C+wTU3wgcgu/ex6IeP2BcUDEmqR/0P5axxaR+AY6c64MvGCwXNgt29DOD7JxoLrv6Ieh+AzO6BhuNmzOVVlD6cCKLA4wAARC6i2y8Z9oimqwTR52fFse8bAOzh73cHyC/yszb0tBEo0XoTta8YRenD72E/kH6WnyqosD1vT5xBx2QSUuuorYCLYuXRn2h7hvoxqxHCPLoy9p7/9sSZAo82s3i+wNN1U++K0ofpMWC8Le8JDyzuo2XopaU4iyBJ7biWeoL65z8ZI6xscKSmXnR13uJ3u8haZS6/xd8Co53GBj9UdR/7f1XFmhIU5Th+CfmBzC4aZ/7r2Ott3X2GTYQw+EarSKMhYgPTJi/rIJSUV3/RPqWNNIHhVbweAu5PJgE04LvmCtJ9BnRPLLv0r4PNecVfIa2qQDaB/xQJVCX15tY+3dtbmTfVrYv2LC9c0l5YXwQPi4bDFZGr4821vD2yHMN106ghb3dhmzQ8/85z7u4tgJUt2jvjR+upoMNfOmOeB5bf30Y87W6EJUpVhE+WY3idBnzhWyWu9rVW64lkHaV3Tktj7nFrhNQ6ihNrznN3+jyQ3nsmUqNaVLiiOSW3iJQ3/GAbD0MJXG27gAXYe8Oi6aqFeYiTmD0LXzaO8bvp8n/ogP68O4teJjMi9ebGPktvD+7bsxYgqx8r2XzHWTE50Q1G7edsjQ4hXRh0yxBmf2PNBKMWqGoSr4s8euuRV/WomtIs/RHAdNqP7tkdo1cewRjup+xjGekrcaqarJo3ZY02VC2eszF6lvBFo4fW51cehvdwv7VJW4wIjlRlHqN8ec9hKrmNyF5/gRCUesOi6aqL/P42+kyLA1c3OjCTcreoIoZ4vbmxz9Lby+GmPZuRpHp09VfueclyDINt/VjOqAhGd2zm+LTnIrWOFnjB6xsfNGGuoWAA+blD/Z8+h/g1UbXwkoDWWJZM/9di5lrMSSG3VWAo9Jm2CGhzMy0Wv+zuZYCg2d7csDZnk4wYBts+Iro8j66hxwjH3dnqWF6jlx/VJvFNL3nhPJVgus+022Lr7hiWQ/Po6jwHLMRqcAexenNjX97bG7f1vCtpz3qe+rTI/Vb3bVqW32KqJ4ApU57dszuoN4aDueeSuWPEp7bIxNW9y2EVP1u30VeTO9aG2r4ikYvo8uVXy3TsgoVboQ9fDrK72xgCBH8uyaOxwQ9k/5dbgcwtYhj/L/p7l/aVK68+tCpeTS4e0oimq9Q+92jPq3QRQBynVV3xeqvcPidvzxab9gzkvPnUqLbiXsWOXPMAx5FWVfi+D+auVTqkzS3KNPx4IFv0dlay66HKOLXnalEz4QsMryIRbcfmvcKNtZWIHqCt6vklCZLUjhMR9/YszMeRLdqKoM+3bT7XNq3qwiL5z+J3072UozcRCcKyIsrZJ1rehfm4NjE+kx8eHbtxC12+wpdTNJ2ofQehd0bzbuIHmecrs6orUm+V2mc3t+eEXXs2/6am7jjOVYqg9M6VzF0Wb7cBrNuBHfkO5DfXK68F+ZjqSjl6E3GHTeFucGrP1aJsQHGrHfE65p3uJV8npKzd8PCDbdsJYqsvAcoJh6h95rz8Zb54KC4LYP/lRjn7Kimv6JcClXxRUK3nZ/VMrOq4kvoATMPDbFzoKxCtvKX1JmqfOa3TFyWi7dkY5i31u94WVPbegl/w6Fi1VW2YPq9te3JIV47ifDTbxoAxbf9mxflZfCVVjS+5ylFW+Agh5FuDHx0SQjwHhY8Q4jkofIQQz0HhI4R4DgofIcRzUPgIIZ6DwkcI8RwUPkKI56DwEUI8B4WPEOI5KHyEEM9B4SOEeA4KHyHEc1D4CCGeQ0j4iuN8WsWfCD8oPeXXOP33gCH3CCGkmpQVPv1IbXMU+47JJILRHccQf4rSh+lHEfjS4wc+lZYQQqqJoxopynFEf9UiyptPVpUXLmFgcb8kypUZ/djv2kZPI4SQynF2w5pPo9VXGNxYZ+vPBLIIWcZxCAyvYjCYwcqVWkdPI4SQynFUpWOnOuBDxjpWay4koh75yaB5DCNhv2VQFkII+RIQiKsrHqtVktpxbbYdmcXztkFcCCHksBFQpwZ8ZxH2zwpVTeL+ZBL+nie20esJIeSwcRS+rU97kKR61P9g8WNzI3wAsp+KYqrGL2BgcR8tQy8PFMOTEEJqhbPHF3+FtKqipbM0aHFvvxar9bVFRPWtu2NYyfrR9eix7aovIYQcFo7CJ8sxPF3KQGodLRi6BoZXtUj296xXbWX5LSa7x7GJEAbfUPwIIV8WZRc3tifOoOPTHBLRHaxHtWuquo/ly02Oq7ayHMPglUbEH0Uw+OYx0MatLYSQLwOprq5OPWwjCCHkc0IXjBDiOSh8hBDPQeEjhHgOCh8hxHNQ+AghnuP/nmU9wG1ZBy8AAAAASUVORK5CYII=",alt:"image-20220302013937793"}),"image-20220302013937793"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARkAAAA9CAYAAACZWh2DAAAJiElEQVR4nO2dz08b1xbHv2P1P8jOhqpPtLs0hoCNEQlSFUWKsiLGciiLVkFq0ieFKAmgCJBXEUEImqCA9EIrETWLBCwwWaFI1VMlEgtiQxL3dZeiVz0Y/xnjtxjPMDMe23cGDybw/UgssK/vnHvP3HPPPfeXdOrUqQJOOMHhNcxGdzHT/gNSPl+9xSlBUXox83YEbfkkBq7cR85jGY96fdSbw9SH0jyG5L/iQKofvVPbpu+Cw2uY62lAdvo07i4fXT19Vm8B6o0Sm8dcTwPklcSRa1CK0oqh1QVcCUiQV66ha2obOGIyniTqoo93O8gDaItcQlDJ6gZNUXrxfTSAgryEX5MAjvBrIZ1UT0brBQAc+Z7gsKEnc7QwGjcjhcwDdN1a1D2rkCSVyaGYXl46FE/Yyok1MoSQw4HdFCHEU2hkCCGeQiNDCPEUGhlCiKfQyBBCPIVGhhDiKTQyhBBPoZEhhHgKjQwhxFNoZAg5RihKLx5u5LA43FpvUXRsN0hqOz8DklR2X48xDQAUChu2e12Me4SA2uyfEJEPQMmeDjsZreUAAHnlWsmOV1FEy1sq2x5e/vMSHn5wl84J1epPic0jPdRh+qyS3kT1ISxfFb05kU9Uv17UM1Ex1aCitOLuSg5vEkAyJZf9kRKbR/rJVeR/+hrnI2dwPnIGM9kIbr/9BVFF0dMFh9cwG0njZvg0zkfOoDP8AFv+OGZXEwga0okiKp/27HRmFP5Uvy5jV8cNs4GxKUfnj0tAdMFVTyBaXv2ogOyE/tyBFHDlyZ94GHOeThTR+vMt39Cfp5bjGl7Crhzi+hBFRG/C8gnq14k+jpqX8ClgMjKxuQWEN/vR1TOOnTI/UJRezAxGUMg8MPVYyzcnsIUI4vdC+me5qcvo6hnXexefbxG/pmTA34kLZ50LKyIfoPZeI9EAstOnK3oksa7I/lZ5jXevkMkD/sglx4ZQtLyxueJZJDef65+9n0xgVS6g7dv9hiKaThTR+rPi821j+sWmTTmc5ac10vWVMVvZRfUmLJ+gfkXrWdNnoOcp1h/3CstXCaV5DIsbObze/MP0t76xhrvNpQa93PfB4TW83vwD6cwoQpKEQM9TU35uDaOdfE47OJORSd0KVlfu2Sb4AeR3P1q++Ig9wcYpSQ1o+NKRnOLyAWi52Al/Pml+uWzY2ZUB/+doMn36FRr8AOSdmm2JN5ZXUXpxLgTkN1+Z849fV7fyF+URTecE0fqzo+UfjQB28fe7A+QX/0YdjpTpZET1JiqfiH6d1nNu6jI6pzcghUfLGktRjAdSaR7ZqlwoGaqpntYCuuXynlZu6rLuPWcLBcgr10zenhu9K0ovZhLARPu+J3hzZQ9tg69MBq4azltR8RCdkox82/hbwGNuagygUNjD3l+OnyyEorTiQiQAyDtomvtPRWv+fvIZthDB7bdqpeluMzYxY+jVDkJJeTUj/d+sniY4vIY3g8Cj6Q0AjfjirIN0h4DmYeRTPx/sfJnk78gWCkA+jX+/M3/lRG+i8gnp10U9+5ZvoPPHJeT9ccxaQgROaLnYCT82kZxUn+3zbWP6fhJ5BEydcMu970reSd3T6upz9WwRfL5F3DV45upzn2ELAYQvhir80pKPmwe/yQL+6P0Sd+1OuPKhOUpsXk2TfeZ5QE0Kj+LceuWxuM+3iLsdQb1XSGdG0ZadKIkBuEWkvNHHOcxG0hho/wHLKO/liaarFUY3Of3kKvz5JCYms9V/WAGtvrssL64REb2JyudGv6L17Pswjnh7P17m942YF+jGN/u7OS6ldeqBpgN5U4eBq5aUuhXETDaAK0/+1HubESTwKFP+/CttRqBQ2KiZl2CP6g5bY0a+D+NIZgF/9Lre82gxgtnoLh6FT6uB2tCIq3Gnlerl7cPDjRziu/2mRlfq5Ymmqy2+D+Po7Qjuu+ebnZjLuAs4iyGuN1H5nOnXfT1LUgO6+517FO9/SyNviGMqSiuGEnH4sYk3+pBRrRcpPFoSt7kTdjdsdoIW69H+tJiPE1yf8Zu6FUTK8L96RKDN2BbFsedgpOw0d21RY0NtNt/s7MpAyChv0XUuyuTDIm63f8TQ6gK6B39BNOlO1orlLQ43Q0OjaoDT0KDMcQXBdIc0w/p+MoHVyAK6u/qA5UUPniCmN1H5RPW7LKoPSz0bh16Pwi7f6S8/V6fWe57idY/6UUFewkC7cSq+WC+yetSmLR61J7uDyrVy+x3kUzvp4tfR7ZeR+c3ssmrBLb9B2eXQXOD1jXnX41zdjQx9U5JHU2MAyP+vOBNSDADq/1t+71K+auXVhpvWWQ+rWyyazql87lHrqzTgL06l2SVxvYnKJ6ZfV/Ucm1eHXvkkBlx2morSiqFv1VlaY4DWOpR0PiwqTsA0fuVYJqt8FyKB0tk5F9TEyASH15Ae6sDWT+bFS04MDKAGwgKSBEnqwLm4e3mWF5ImNxTYj49svVB7Ce3lkgJX8b3hWUrzGOIh2L5c1eQTLe/yQlINGs7tu9gt9+6j2y/j5cJzx+lE5TsIsTm1104eJC5TZXZJRG+i8jnRr5N61t71QuZBxdhSNSoZVSt28lXP97sDxYn0fAy6UprHkBQ4sNyK6SBxu5WUGsYVlSWrWjP2rlz0ca5sMNhuhWa1RioqnzGvQJUVnNayAOVX/FaTz0l5RVdMi6YTkc+tfgF7HTvRByB2X5GI3kTlK5fWdsWvQD3rQwWbO5DcUOmWAevK6XJp7Vcvl95u4GYVuzUfVRcJIKGujxLNj7cVEFIHKhnc6OMcbofkY7Ot4dMvASGfItr6HJuJkp1d2fMlCocJjQwh9aA4q2VdIV9yM+QxgMMlQupEtZshjws0MoQQT+FwiRDiKTQyhBBPoZEhhHgKjQwhxFNoZAghnkIjQwjxFBoZQoin0MgQQjzF9koU7SR0/XwSy/kfweE1oTNLRPMjhBxf6MkQQjzFZGT2Tw0rHjmo3Uzg8nqQWudHCPn0YEsnhHiKqw2SweE1zEZ3MdP+M74wnpx1zHaPEkIOjmtPRpI6cCfzFA0vvtbvx8mHRnhPMCHExIGGS8ZzSPX7cVzcIU0IOb64NjKFwobhAioV+7uHCSEnGQZ+CSGeQiNDCPGUmhmZSjfuEUJOLjWzBpVuNiSEnFxcrZOx3rYH2N8YSAghvK2AEOIpdDsIIZ5CI0MI8RQaGUKIp9DIEEI8hUaGEOIpNDKEEE+hkSGEeMpn9RaAkJPI8+fVV8b39fUdgiTeQ0+GEOIp/wcC1FDgUZXBZAAAAABJRU5ErkJggg==",alt:"image-20220302013945167"}),"image-20220302013945167"),(0,n.kt)("p",null," 2\u4ece\u8282\u70b9\u4e0d\u80fd\u5199\u6570\u636e"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302014003296-0487766a.png",alt:"image-20220302014003296"}),"image-20220302014003296"),(0,n.kt)("h3",{id:"4\u4e3b\u4ece\u590d\u5236\u5e38\u89c1\u95ee\u9898-\u67b6\u6784\u5e08"},"4\u3001\u4e3b\u4ece\u590d\u5236\u5e38\u89c1\u95ee\u9898-\u67b6\u6784\u5e08"),(0,n.kt)("h4",{id:"41-\u9891\u7e41\u7684\u5168\u91cf\u590d\u5236"},"4.1 \u9891\u7e41\u7684\u5168\u91cf\u590d\u5236"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u4f34\u968f\u7740\u7cfb\u7edf\u7684\u8fd0\u884c\uff0cmaster\u7684\u6570\u636e\u91cf\u4f1a\u8d8a\u6765\u8d8a\u5927\uff0c\u4e00\u65e6master\u91cd\u542f\uff0crunid\u5c06\u53d1\u751f\u53d8\u5316\uff0c\u4f1a\u5bfc\u81f4\u5168\u90e8slave\u7684\u5168\u91cf\u590d\u5236\u64cd\u4f5c")),(0,n.kt)("p",null,"\u5185\u90e8\u4f18\u5316\u8c03\u6574\u65b9\u6848\uff1a"),(0,n.kt)("p",null,"1\uff1amaster\u5185\u90e8\u521b\u5efamaster_replid\u53d8\u91cf\uff0c\u4f7f\u7528runid\u76f8\u540c\u7684\u7b56\u7565\u751f\u6210\uff0c\u957f\u5ea641\u4f4d\uff0c\u5e76\u53d1\u9001\u7ed9\u6240\u6709slave"),(0,n.kt)("p",null,"2\uff1a\u5728master\u5173\u95ed\u65f6\u6267\u884c\u547d\u4ee4shutdown save\uff0c\u8fdb\u884cRDB\u6301\u4e45\u5316,\u5c06runid\u4e0eoffset\u4fdd\u5b58\u5230RDB\u6587\u4ef6\u4e2d"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-markdown"},"repl-id  repl-offset\n\n\u901a\u8fc7redis-check-rdb\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u8be5\u4fe1\u606f\n")),(0,n.kt)("p",null,"3\uff1amaster\u91cd\u542f\u540e\u52a0\u8f7dRDB\u6587\u4ef6\uff0c\u6062\u590d\u6570\u636e\uff0c\u91cd\u542f\u540e\uff0c\u5c06RDB\u6587\u4ef6\u4e2d\u4fdd\u5b58\u7684repl-id\u4e0erepl-offset\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-markdown"},"master_repl_id=repl  master_repl_offset =repl-offset\n\n\u901a\u8fc7info\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u8be5\u4fe1\u606f\n")),(0,n.kt)("p",null,"\u4f5c\u7528\uff1a\u672c\u673a\u4fdd\u5b58\u4e0a\u6b21runid\uff0c\u91cd\u542f\u540e\u6062\u590d\u8be5\u503c\uff0c\u4f7f\u6240\u6709slave\u8ba4\u4e3a\u8fd8\u662f\u4e4b\u524d\u7684master"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u7b2c\u4e8c\u79cd\u51fa\u73b0\u9891\u7e41\u5168\u91cf\u590d\u5236\u7684\u95ee\u9898\u73b0\u8c61\uff1a\u7f51\u7edc\u73af\u5883\u4e0d\u4f73\uff0c\u51fa\u73b0\u7f51\u7edc\u4e2d\u65ad\uff0cslave\u4e0d\u63d0\u4f9b\u670d\u52a1")),(0,n.kt)("p",null,"\u95ee\u9898\u539f\u56e0\uff1a\u590d\u5236\u7f13\u51b2\u533a\u8fc7\u5c0f\uff0c\u65ad\u7f51\u540eslave\u7684offset\u8d8a\u754c\uff0c\u89e6\u53d1\u5168\u91cf\u590d\u5236"),(0,n.kt)("p",null,"\u6700\u7ec8\u7ed3\u679c\uff1aslave\u53cd\u590d\u8fdb\u884c\u5168\u91cf\u590d\u5236"),(0,n.kt)("p",null,"\u89e3\u51b3\u65b9\u6848\uff1a\u4fee\u6539\u590d\u5236\u7f13\u51b2\u533a\u5927\u5c0f"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"repl-backlog-size 20mb\n")),(0,n.kt)("p",null,"\u5efa\u8bae\u8bbe\u7f6e\u5982\u4e0b\uff1a"),(0,n.kt)("p",null,"1.\u6d4b\u7b97\u4ecemaster\u5230slave\u7684\u91cd\u8fde\u5e73\u5747\u65f6\u957fsecond 10s"),(0,n.kt)("p",null,"2.\u83b7\u53d6master\u5e73\u5747\u6bcf\u79d2\u4ea7\u751f\u5199\u547d\u4ee4\u6570\u636e\u603b\u91cfwrite_size_per_second 10w"),(0,n.kt)("p",null,"3.\u6700\u4f18\u590d\u5236\u7f13\u51b2\u533a\u7a7a\u95f4 = 2 ",(0,n.kt)("em",{parentName:"p"}," second ")," write_size_per_second 10w*10b 20mb"),(0,n.kt)("h4",{id:"42-\u9891\u7e41\u7684\u7f51\u7edc\u4e2d\u65ad"},"4.2 \u9891\u7e41\u7684\u7f51\u7edc\u4e2d\u65ad"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u95ee\u9898\u73b0\u8c61\uff1amaster\u7684CPU\u5360\u7528\u8fc7\u9ad8 \u6216 slave\u9891\u7e41\u65ad\u5f00\u8fde\u63a5")),(0,n.kt)("p",null,"\u95ee\u9898\u539f\u56e0"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-markdown"},"slave\u6bcf1\u79d2\u53d1\u9001REPLCONFACK\u547d\u4ee4\u5230master\n\n\u5f53slave\u63a5\u5230\u4e86\u6162\u67e5\u8be2\u65f6\uff08keys * \uff0chgetall\u7b49\uff09\uff0c\u4f1a\u5927\u91cf\u5360\u7528CPU\u6027\u80fd\n\nmaster\u6bcf1\u79d2\u8c03\u7528\u590d\u5236\u5b9a\u65f6\u51fd\u6570replicationCron()\uff0c\u6bd4\u5bf9slave\u53d1\u73b0\u957f\u65f6\u95f4\u6ca1\u6709\u8fdb\u884c\u54cd\u5e94\n")),(0,n.kt)("p",null,"\u6700\u7ec8\u7ed3\u679c\uff1amaster\u5404\u79cd\u8d44\u6e90\uff08\u8f93\u51fa\u7f13\u51b2\u533a\u3001\u5e26\u5bbd\u3001\u8fde\u63a5\u7b49\uff09\u88ab\u4e25\u91cd\u5360\u7528"),(0,n.kt)("p",null,"\u89e3\u51b3\u65b9\u6848\uff1a\u901a\u8fc7\u8bbe\u7f6e\u5408\u7406\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u786e\u8ba4\u662f\u5426\u91ca\u653eslave"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"repl-timeout seconds \n")),(0,n.kt)("p",null,"\u8be5\u53c2\u6570\u5b9a\u4e49\u4e86\u8d85\u65f6\u65f6\u95f4\u7684\u9608\u503c\uff08\u9ed8\u8ba460\u79d2\uff09\uff0c\u8d85\u8fc7\u8be5\u503c\uff0c\u91ca\u653eslave"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u95ee\u9898\u73b0\u8c61\uff1aslave\u4e0emaster\u8fde\u63a5\u65ad\u5f00")),(0,n.kt)("p",null,"\u95ee\u9898\u539f\u56e0"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-markdown"},"master\u53d1\u9001ping\u6307\u4ee4\u9891\u5ea6\u8f83\u4f4e \n\nmaster\u8bbe\u5b9a\u8d85\u65f6\u65f6\u95f4\u8f83\u77ed\n\nping\u6307\u4ee4\u5728\u7f51\u7edc\u4e2d\u5b58\u5728\u4e22\u5305\n")),(0,n.kt)("p",null,"\u89e3\u51b3\u65b9\u6848\uff1a\u63d0\u9ad8ping\u6307\u4ee4\u53d1\u9001\u7684\u9891\u5ea6"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"repl-ping-slave-period seconds\n")),(0,n.kt)("p",null,"\u8d85\u65f6\u65f6\u95f4repl-time\u7684\u65f6\u95f4\u81f3\u5c11\u662fping\u6307\u4ee4\u9891\u5ea6\u76845\u523010\u500d\uff0c\u5426\u5219slave\u5f88\u5bb9\u6613\u5224\u5b9a\u8d85\u65f6"),(0,n.kt)("h4",{id:"43-\u6570\u636e\u4e0d\u4e00\u81f4"},"4.3 \u6570\u636e\u4e0d\u4e00\u81f4"),(0,n.kt)("p",null,"\u95ee\u9898\u73b0\u8c61\uff1a\u591a\u4e2aslave\u83b7\u53d6\u76f8\u540c\u6570\u636e\u4e0d\u540c\u6b65"),(0,n.kt)("p",null,"\u95ee\u9898\u539f\u56e0\uff1a\u7f51\u7edc\u4fe1\u606f\u4e0d\u540c\u6b65\uff0c\u6570\u636e\u53d1\u9001\u6709\u5ef6\u8fdf"),(0,n.kt)("p",null,"\u89e3\u51b3\u65b9\u6848"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-markdown"},"\u4f18\u5316\u4e3b\u4ece\u95f4\u7684\u7f51\u7edc\u73af\u5883\uff0c\u901a\u5e38\u653e\u7f6e\u5728\u540c\u4e00\u4e2a\u673a\u623f\u90e8\u7f72\uff0c\u5982\u4f7f\u7528\u963f\u91cc\u4e91\u7b49\u4e91\u670d\u52a1\u5668\u65f6\u8981\u6ce8\u610f\u6b64\u73b0\u8c61\n\u62c9\u4e13\u7ebf\u3002vpn\u30024m 10\u4e07 2\u4e07/\u5e74\n\u76d1\u63a7\u4e3b\u4ece\u8282\u70b9\u5ef6\u8fdf\uff08\u901a\u8fc7offset\uff09\u5224\u65ad\uff0c\u5982\u679cslave\u5ef6\u8fdf\u8fc7\u5927\uff0c\u6682\u65f6\u5c4f\u853d\u7a0b\u5e8f\u5bf9\u8be5slave\u7684\u6570\u636e\u8bbf\u95ee\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"slave-serve-stale-data  yes|no\n")),(0,n.kt)("p",null,"\u5f00\u542f\u540e\u4ec5\u54cd\u5e94info\u3001slaveof\u7b49\u5c11\u6570\u547d\u4ee4\uff08\u614e\u7528\uff0c\u9664\u975e\u5bf9\u6570\u636e\u4e00\u81f4\u6027\u8981\u6c42\u5f88\u9ad8\uff09"),(0,n.kt)("h2",{id:"\u7b2c\u4e94\u7ae0-redis\u4e2d\u7684sentinel\u67b6\u6784"},"\u7b2c\u4e94\u7ae0 Redis\u4e2d\u7684Sentinel\u67b6\u6784"),(0,n.kt)("h3",{id:"1\u54e8\u5175\u7b80\u4ecb"},"1\u3001\u54e8\u5175\u7b80\u4ecb"),(0,n.kt)("h4",{id:"11-\u54e8\u5175\u6982\u5ff5"},"1.1 \u54e8\u5175\u6982\u5ff5"),(0,n.kt)("p",null,"\u9996\u5148\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u4e1a\u52a1\u573a\u666f\uff1a\u5982\u679credis\u7684master\u5b95\u673a\u4e86\uff0c\u6b64\u65f6\u5e94\u8be5\u600e\u4e48\u529e\uff1f"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302102545262-f56e9299.png",alt:"image-20220302102545262"}),"image-20220302102545262"),(0,n.kt)("p",null,"\u90a3\u6b64\u65f6\u6211\u4eec\u53ef\u80fd\u9700\u8981\u4ece\u4e00\u5806\u7684slave\u4e2d\u91cd\u65b0\u9009\u4e3e\u51fa\u4e00\u4e2a\u65b0\u7684master\uff0c\u90a3\u8fd9\u4e2a\u64cd\u4f5c\u8fc7\u7a0b\u662f\u4ec0\u4e48\u6837\u7684\u5462\uff1f\u8fd9\u91cc\u9762\u4f1a\u6709\u4ec0\u4e48\u95ee\u9898\u51fa\u73b0\u5462\uff1f"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302103036396-bee14874.png",alt:"image-20220302103036396"}),"image-20220302103036396"),(0,n.kt)("p",null,"\u8981\u5b9e\u73b0\u8fd9\u4e9b\u529f\u80fd\uff0c\u6211\u4eec\u5c31\u9700\u8981redis\u7684\u54e8\u5175\uff0c\u90a3\u54e8\u5175\u662f\u4ec0\u4e48\u5462\uff1f"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u54e8\u5175")),(0,n.kt)("p",null,"\u54e8\u5175(sentinel) \u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u7cfb\u7edf\uff0c\u7528\u4e8e\u5bf9\u4e3b\u4ece\u7ed3\u6784\u4e2d\u7684\u6bcf\u53f0\u670d\u52a1\u5668\u8fdb\u884c",(0,n.kt)("strong",{parentName:"p"},"\u76d1\u63a7"),"\uff0c\u5f53\u51fa\u73b0\u6545\u969c\u65f6\u901a\u8fc7",(0,n.kt)("strong",{parentName:"p"},"\u6295\u7968"),"\u673a\u5236",(0,n.kt)("strong",{parentName:"p"},"\u9009\u62e9"),"\u65b0\u7684master\u5e76\u5c06\u6240\u6709slave\u8fde\u63a5\u5230\u65b0\u7684master\u3002"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302103622950-c52453fb.png",alt:"image-20220302103622950"}),"image-20220302103622950"),(0,n.kt)("h4",{id:"12-\u54e8\u5175\u4f5c\u7528"},"1.2 \u54e8\u5175\u4f5c\u7528"),(0,n.kt)("p",null,"\u54e8\u5175\u7684\u4f5c\u7528\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u76d1\u63a7\uff1a\u76d1\u63a7master\u548cslave"),(0,n.kt)("p",{parentName:"li"},"  \u4e0d\u65ad\u7684\u68c0\u67e5master\u548cslave\u662f\u5426\u6b63\u5e38\u8fd0\u884c"),(0,n.kt)("p",{parentName:"li"},"  master\u5b58\u6d3b\u68c0\u6d4b\u3001master\u4e0eslave\u8fd0\u884c\u60c5\u51b5\u68c0\u6d4b")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u901a\u77e5\uff08\u63d0\u9192\uff09\uff1a\u5f53\u88ab\u76d1\u63a7\u7684\u670d\u52a1\u5668\u51fa\u73b0\u95ee\u9898\u65f6\uff0c\u5411\u5176\u4ed6\uff08\u54e8\u5175\u95f4\uff0c\u5ba2\u6237\u7aef\uff09\u53d1\u9001\u901a\u77e5")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("strong",{parentName:"p"},"\u81ea\u52a8\u6545\u969c\u8f6c\u79fb"),"\uff1a\u65ad\u5f00master\u4e0eslave\u8fde\u63a5\uff0c\u9009\u53d6\u4e00\u4e2aslave\u4f5c\u4e3amaster\uff0c\u5c06\u5176\u4ed6slave\u8fde\u63a5\u65b0\u7684master\uff0c\u5e76\u544a\u77e5\u5ba2\u6237\u7aef\u65b0\u7684\u670d\u52a1\u5668\u5730\u5740"))),(0,n.kt)("p",null,"\u6ce8\u610f\uff1a\u54e8\u5175\u4e5f\u662f\u4e00\u53f0redis\u670d\u52a1\u5668\uff0c\u53ea\u662f\u4e0d\u63d0\u4f9b\u6570\u636e\u76f8\u5173\u670d\u52a1\uff0c\u901a\u5e38\u54e8\u5175\u7684\u6570\u91cf\u914d\u7f6e\u4e3a\u5355\u6570"),(0,n.kt)("h3",{id:"2\u542f\u7528\u54e8\u5175"},"2\u3001\u542f\u7528\u54e8\u5175"),(0,n.kt)("p",null,"\u914d\u7f6e\u54e8\u5175"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u914d\u7f6e\u4e00\u62d6\u4e8c\u7684\u4e3b\u4ece\u7ed3\u6784\uff08\u5229\u7528\u4e4b\u524d\u7684\u65b9\u5f0f\u542f\u52a8\u5373\u53ef\uff09"),(0,n.kt)("li",{parentName:"ul"},"\u914d\u7f6e\u4e09\u4e2a\u54e8\u5175\uff08\u914d\u7f6e\u76f8\u540c\uff0c\u7aef\u53e3\u4e0d\u540c\uff09\uff0c\u53c2\u770bsentinel.conf")),(0,n.kt)("p",null,"\u7aef\u53e3\u53f7"),(0,n.kt)("p",null,"1\uff1a\u8bbe\u7f6e\u54e8\u5175\u76d1\u542c\u7684\u4e3b\u670d\u52a1\u5668\u4fe1\u606f\uff0c sentinel_number\u8868\u793a\u53c2\u4e0e\u6295\u7968\u7684\u54e8\u5175\u6570\u91cf"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"sentinel monitor master_name  master_host   master_port  sentinel_number\n")),(0,n.kt)("p",null,"2\uff1a\u8bbe\u7f6e\u5224\u5b9a\u670d\u52a1\u5668\u5b95\u673a\u65f6\u957f\uff0c\u8be5\u8bbe\u7f6e\u63a7\u5236\u662f\u5426\u8fdb\u884c\u4e3b\u4ece\u5207\u6362"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"sentinel down-after-milliseconds master_name    million_seconds\n")),(0,n.kt)("p",null,"3\uff1a\u8bbe\u7f6e\u6545\u969c\u5207\u6362\u7684\u6700\u5927\u8d85\u65f6\u65f6\u957f"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"sentinel failover-timeout master_name   million_seconds\n")),(0,n.kt)("p",null,"4\uff1a\u8bbe\u7f6e\u4e3b\u4ece\u5207\u6362\u540e\uff0c\u540c\u65f6\u8fdb\u884c\u6570\u636e\u540c\u6b65\u7684slave\u6570\u91cf\uff0c\u6570\u503c\u8d8a\u5927\uff0c\u8981\u6c42\u7f51\u7edc\u8d44\u6e90\u8d8a\u9ad8\uff0c\u6570\u503c\u8d8a\u5c0f\uff0c\u540c\u6b65\u65f6\u95f4\u8d8a\u957f"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"sentinel parallel-syncs master_name sync_slave_number\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u542f\u52a8\u54e8\u5175")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"redis-sentinel filename\n")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302104544164-3d435347.png",alt:"image-20220302104544164"}),"image-20220302104544164"),(0,n.kt)("h3",{id:"3\u642d\u5efa\u54e8\u5175"},"3\u3001\u642d\u5efa\u54e8\u5175"),(0,n.kt)("p",null,"1copy\u51fa\u4e09\u4efd redis\u8fd0\u884c\u5305"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"cp -R redis6380 sentinel26379\ncp -R redis6380 sentinel26380\ncp -R redis6380 sentinel26381\n")),(0,n.kt)("p",null,"2\u5206\u522b\u4fee\u6539sentinel.conf"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},'port 26379\ndaemonize yes\npidfile "/var/run/redis-sentinel26379.pid"\nlogfile "/export/server/sentinel26379/log/log.log"\ndir "/export/server/sentinel26379/data"\nsentinel monitor mymaster 192.168.200.131 6379 2\n\nsentinel resolve-hostnames no\nsentinel announce-hostnames no\n')),(0,n.kt)("p",null,"3\u5206\u522b\u542f\u52a8sentinel"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"./bin/redis-sentinel sentinel.conf\n")),(0,n.kt)("p",null,"4\u94fe\u63a5sentinel"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"./bin/redis-cli -h 192.168.200.131 -p 26379\n")),(0,n.kt)("p",null,"5\u67e5\u770b\u72b6\u6001"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"info\n")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302110746701-c9ec465a.png",alt:"image-20220302110746701"}),"image-20220302110746701"),(0,n.kt)("p",null,"6\u5c1d\u8bd5\u6545\u969c\u8fc1\u79fb \u6740\u6389\u4e3b"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302110908938-9c6e40af.png",alt:"image-20220302110908938"}),"image-20220302110908938"),(0,n.kt)("p",null,"\u767b\u96466380 info"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302111026272-956dbe47.png",alt:"image-20220302111026272"}),"image-20220302111026272"),(0,n.kt)("p",null,"7\u5c1d\u8bd56379\u6062\u590d"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302111129319-70363eb6.png",alt:"image-20220302111129319"}),"image-20220302111129319"),(0,n.kt)("p",null,"\u767b\u96466380 info"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302111212240-2f02e206.png",alt:"image-20220302111212240"}),"image-20220302111212240"),(0,n.kt)("h3",{id:"4java\u4ee3\u7801\u94fe\u63a5sentinel"},"4\u3001java\u4ee3\u7801\u94fe\u63a5sentinel"),(0,n.kt)("h4",{id:"41-\u539f\u751f"},"4.1 \u539f\u751f"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u5728 \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7c7b ReidsSentinelTest"),(0,n.kt)("li",{parentName:"ol"},"\u6784\u5efaJedisPoolConfig\u914d\u7f6e\u5bf9\u8c61"),(0,n.kt)("li",{parentName:"ol"},"\u521b\u5efa\u4e00\u4e2aHashSet\uff0c\u7528\u6765\u4fdd\u5b58\u54e8\u5175\u8282\u70b9\u914d\u7f6e\u4fe1\u606f\uff08\u8bb0\u5f97\u4e00\u5b9a\u8981\u5199\u7aef\u53e3\u53f7\uff09"),(0,n.kt)("li",{parentName:"ol"},"\u6784\u5efaJedisSentinelPool\u8fde\u63a5\u6c60"),(0,n.kt)("li",{parentName:"ol"},"\u4f7f\u7528sentinelPool\u8fde\u63a5\u6c60\u83b7\u53d6\u8fde\u63a5")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-java"},'package com.ydlclass.redis;\n\nimport org.testng.annotations.AfterTest;\nimport org.testng.annotations.BeforeTest;\nimport org.testng.annotations.Test;\nimport redis.clients.jedis.Jedis;\nimport redis.clients.jedis.JedisPoolConfig;\nimport redis.clients.jedis.JedisSentinelPool;\n\nimport java.util.HashSet;\nimport java.util.Set;\n\n/**\n * @Created by IT\u674e\u8001\u5e08\n * \u516c\u4e3b\u53f7 \u201cIT\u674e\u54e5\u4ea4\u670b\u53cb\u201d\n * \u4e2a\u4eba\u5fae itlils\n */\npublic class ReidsSentinelTest {\n    JedisSentinelPool jedisSentinelPool;\n\n    //1. \u5728 \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7c7b ReidsSentinelTest\n    //2. \u6784\u5efaJedisPoolConfig\u914d\u7f6e\u5bf9\u8c61\n    //3. \u521b\u5efa\u4e00\u4e2aHashSet\uff0c\u7528\u6765\u4fdd\u5b58\u54e8\u5175\u8282\u70b9\u914d\u7f6e\u4fe1\u606f\uff08\u8bb0\u5f97\u4e00\u5b9a\u8981\u5199\u7aef\u53e3\u53f7\uff09\n    //4. \u6784\u5efaJedisSentinelPool\u8fde\u63a5\u6c60\n    //5. \u4f7f\u7528sentinelPool\u8fde\u63a5\u6c60\u83b7\u53d6\u8fde\u63a5\n    @BeforeTest\n    public void beforeTest(){\n        //\u521b\u5efajedis\u8fde\u63a5\u6c60\n        JedisPoolConfig config=new JedisPoolConfig();\n        //\u6700\u5927\u7a7a\u95f2\u8fde\u63a5\n        config.setMaxIdle(10);\n        //\u6700\u5c0f\u7a7a\u95f2\u8fde\u63a5\n        config.setMinIdle(5);\n        //\u6700\u5927\u7a7a\u95f2\u65f6\u95f4\n        config.setMaxWaitMillis(3000);\n        //\u6700\u5927\u8fde\u63a5\u6570\n        config.setMaxTotal(50);\n\n\n        Set<String> sentinels=new HashSet<>();\n        sentinels.add("192.168.200.131:26379");\n        sentinels.add("192.168.200.131:26380");\n        sentinels.add("192.168.200.131:26381");\n\n        jedisSentinelPool= new JedisSentinelPool("mymaster",sentinels,config);\n    }\n\n    @Test\n    public void keysTest(){\n        Jedis jedis = jedisSentinelPool.getResource();\n        Set<String> keys = jedis.keys("*");\n        for (String key : keys) {\n            System.out.println(key);\n        }\n    }\n\n\n    @AfterTest\n    public void afterTest(){\n        jedisSentinelPool.close();\n    }\n\n}\n')),(0,n.kt)("h4",{id:"42-springboot\u540e\u8fb9\u5b66\u4e86springboot\u5c31\u77e5\u9053\u4e86"},"4.2 springboot\uff08\u540e\u8fb9\u5b66\u4e86springboot\u5c31\u77e5\u9053\u4e86\uff09"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"spring:\n  redis:\n    sentinel:\n      nodes: 192.168.200.131:26379,192.168.200.131:26380,192.168.200.131:26381 //\u54e8\u5175\u7684ip\u548c\u7aef\u53e3\n      master: mymaster //\u8fd9\u4e2a\u5c31\u662f\u54e8\u5175\u914d\u7f6e\u6587\u4ef6\u4e2d sentinel monitor mymaster 192.168.200.131 6379 2 \u914d\u7f6e\u7684mymaster\n")),(0,n.kt)("h3",{id:"5\u54e8\u5175\u5de5\u4f5c\u539f\u7406-\u9762\u8bd5"},"5\u3001\u54e8\u5175\u5de5\u4f5c\u539f\u7406-\u9762\u8bd5"),(0,n.kt)("p",null,"\u54e8\u5175\u5728\u8fdb\u884c\u4e3b\u4ece\u5207\u6362\u8fc7\u7a0b\u4e2d\u7ecf\u5386\u4e09\u4e2a\u9636\u6bb5"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u76d1\u63a7"),(0,n.kt)("li",{parentName:"ul"},"\u901a\u77e5"),(0,n.kt)("li",{parentName:"ul"},"\u6545\u969c\u8f6c\u79fb")),(0,n.kt)("h4",{id:"51-\u76d1\u63a7"},"5.1 \u76d1\u63a7"),(0,n.kt)("p",null,"\u7528\u4e8e\u540c\u6b65\u5404\u4e2a\u8282\u70b9\u7684\u72b6\u6001\u4fe1\u606f"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/19-969b0caf.png",alt:"img"})),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u83b7\u53d6\u5404\u4e2asentinel\u7684\u72b6\u6001\uff08\u662f\u5426\u5728\u7ebf\uff09"),(0,n.kt)("li",{parentName:"ul"},"\u83b7\u53d6master\u7684\u72b6\u6001")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-markdown"},"master\u5c5e\u6027\n    prunid\n    prole\uff1amaster\n\u5404\u4e2aslave\u7684\u8be6\u7ec6\u4fe1\u606f    \n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u83b7\u53d6\u6240\u6709slave\u7684\u72b6\u6001\uff08\u6839\u636emaster\u4e2d\u7684slave\u4fe1\u606f\uff09")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-markdown"},"slave\u5c5e\u6027\n    prunid\n    prole\uff1aslave\n    pmaster_host\u3001master_port\n    poffset\n")),(0,n.kt)("p",null,"\u5176\u5185\u90e8\u7684\u5de5\u4f5c\u539f\u7406\u5177\u4f53\u5982\u4e0b\uff1a"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/20-a4cf1d89.png",alt:"img"})),(0,n.kt)("h4",{id:"52-\u901a\u77e5"},"5.2 \u901a\u77e5"),(0,n.kt)("p",null,"sentinel\u5728\u901a\u77e5\u9636\u6bb5\u8981\u4e0d\u65ad\u7684\u53bb\u83b7\u53d6master/slave\u7684\u4fe1\u606f\uff0c\u7136\u540e\u5728\u5404\u4e2asentinel\u4e4b\u95f4\u8fdb\u884c\u5171\u4eab\uff0c\u5177\u4f53\u7684\u6d41\u7a0b\u5982\u4e0b\uff1a"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/21-68000204.png",alt:"img"})),(0,n.kt)("h4",{id:"53-\u6545\u969c\u8f6c\u79fb"},"5.3 \u6545\u969c\u8f6c\u79fb"),(0,n.kt)("p",null,"\u5f53master\u5b95\u673a\u540esentinel\u662f\u5982\u4f55\u77e5\u6653\u5e76\u5224\u65ad\u51famaster\u662f\u771f\u7684\u5b95\u673a\u4e86\u5462\uff1f\u6211\u4eec\u6765\u770b\u5177\u4f53\u7684\u64cd\u4f5c\u6d41\u7a0b"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/22-2e32d530.png",alt:"img"})),(0,n.kt)("p",null,"\u5f53sentinel\u8ba4\u5b9amaster\u4e0b\u7ebf\u4e4b\u540e\uff0c\u6b64\u65f6\u9700\u8981\u51b3\u5b9a\u66f4\u6362master\uff0c\u90a3\u8fd9\u4ef6\u4e8b\u7531\u54ea\u4e2asentinel\u6765\u505a\u5462\uff1f\u8fd9\u65f6\u5019sentinel\u4e4b\u95f4\u8981\u8fdb\u884c\u9009\u4e3e\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/23-8628dbef.png",alt:"img"})),(0,n.kt)("p",null,"\u5728\u9009\u4e3e\u7684\u65f6\u5019\u6bcf\u4e00\u4e2a\u4eba\u624b\u91cc\u90fd\u6709\u4e00\u7968\uff0c\u800c\u6bcf\u4e00\u4e2a\u4eba\u7684\u53c8\u90fd\u60f3\u5f53\u8fd9\u4e2a\u5904\u7406\u4e8b\u6545\u7684\u4eba\uff0c\u90a3\u600e\u4e48\u529e\uff1f\u5927\u5bb6\u5c31\u5f00\u59cb\u62a2\uff0c\u4e8e\u662f\u6bcf\u4e2a\u4eba\u90fd\u4f1a\u53d1\u51fa\u4e00\u4e2a\u6307\u4ee4\uff0c\u5728\u5185\u7f51\u91cc\u8fb9\u544a\u8bc9\u5927\u5bb6\u6211\u8981\u5f53\u9009\u4e3e\u4eba\uff0c\u6bd4\u5982\u8bf4\u73b0\u5728\u7684sentinel1\u548csentinel4\u53d1\u51fa\u8fd9\u4e2a\u9009\u4e3e\u6307\u4ee4\u4e86\uff0c\u90a3\u4e48sentinel2\u65e2\u80fd\u63a5\u5230sentinel1\u7684\u4e5f\u80fd\u63a5\u5230sentinel4\u7684\uff0c\u63a5\u5230\u4e86\u4ed6\u4eec\u7684\u7533\u8bf7\u4ee5\u540e\u5462\uff0csentinel2\u4ed6\u5c31\u4f1a\u628a\u4ed6\u7684\u4e00\u7968\u6295\u7ed9\u5176\u4e2d\u4e00\u65b9\uff0c\u6295\u7ed9\u8c01\u5462\uff1f\u8c01\u5148\u8fc7\u6765\u6211\u6295\u7ed9\u8c01\uff0c\u5047\u8bbesentinel1\u5148\u8fc7\u6765\uff0c\u6240\u4ee5\u8fd9\u4e2a\u7968\u5c31\u7ed9\u5230\u4e86sentinel1\u3002\u90a3\u4e48\u7ed9\u8fc7\u53bb\u4ee5\u540e\u5462\uff0c\u73b0\u5728sentinel1\u5c31\u62ff\u5230\u4e86\u4e00\u7968\uff0c\u6309\u7167\u8fd9\u6837\u7684\u4e00\u79cd\u5f62\u5f0f\uff0c\u6700\u7ec8\u4f1a\u6709\u4e00\u4e2a\u9009\u4e3e\u7ed3\u679c\u3002\u5bf9\u5e94\u7684\u9009\u4e3e\u6700\u7ec8\u5f97\u7968\u591a\u7684\uff0c\u90a3\u81ea\u7136\u5c31\u6210\u4e3a\u4e86\u5904\u7406\u4e8b\u6545\u7684\u4eba\u3002\u9700\u8981\u6ce8\u610f\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u6709\u53ef\u80fd\u4f1a\u5b58\u5728\u5931\u8d25\u7684\u73b0\u8c61\uff0c\u5c31\u662f\u4e00\u8f6e\u9009\u4e3e\u5b8c\u6ca1\u6709\u9009\u53d6\uff0c\u90a3\u5c31\u4f1a\u63a5\u7740\u8fdb\u884c\u7b2c\u4e8c\u8f6e\u7b2c\u4e09\u8f6e\u76f4\u5230\u5b8c\u6210\u9009\u4e3e\u3002"),(0,n.kt)("p",null,"\u63a5\u4e0b\u6765\u5c31\u662f\u7531\u9009\u4e3e\u80dc\u51fa\u7684sentinel\u53bb\u4eceslave\u4e2d\u9009\u4e00\u4e2a\u65b0\u7684master\u51fa\u6765\u7684\u5de5\u4f5c\uff0c\u8fd9\u4e2a\u6d41\u7a0b\u662f\u4ec0\u4e48\u6837\u7684\u5462\uff1f"),(0,n.kt)("p",null,"\u9996\u5148\u5b83\u6709\u4e00\u4e2a\u5728\u670d\u52a1\u5668\u5217\u8868\u4e2d\u6311\u9009\u5907\u9009master\u7684\u539f\u5219"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4e0d\u5728\u7ebf\u7684OUT")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u54cd\u5e94\u6162\u7684OUT")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4e0e\u539fmaster\u65ad\u5f00\u65f6\u95f4\u4e45\u7684OUT")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"\u4f18\u5148\u539f\u5219"),(0,n.kt)("p",{parentName:"li"},"   \u4f18\u5148\u7ea7  offset  runid"))),(0,n.kt)("p",null,"\u9009\u51fa\u65b0\u7684master\u4e4b\u540e\uff0c\u53d1\u9001\u6307\u4ee4\uff08 sentinel \uff09\u7ed9\u5176\u4ed6\u7684slave\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5411\u65b0\u7684master\u53d1\u9001slaveof no one"),(0,n.kt)("li",{parentName:"ul"},"\u5411\u5176\u4ed6slave\u53d1\u9001slaveof \u65b0masterIP\u7aef\u53e3")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u603b\u7ed3"),"\uff1a\u6545\u969c\u8f6c\u79fb\u9636\u6bb5"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u53d1\u73b0\u95ee\u9898\uff0c\u4e3b\u89c2\u4e0b\u7ebf\u4e0e\u5ba2\u89c2\u4e0b\u7ebf"),(0,n.kt)("li",{parentName:"ol"},"\u7ade\u9009\u8d1f\u8d23\u4eba"),(0,n.kt)("li",{parentName:"ol"},"\u4f18\u9009\u65b0master"),(0,n.kt)("li",{parentName:"ol"},"\u65b0master\u4e0a\u4efb\uff0c\u5176\u4ed6slave\u5207\u6362master\uff0c\u539fmaster\u4f5c\u4e3aslave\u6545\u969c\u6062\u590d\u540e\u8fde\u63a5")),(0,n.kt)("h2",{id:"\u7b2c\u516d\u7ae0-redis-cluster\u96c6\u7fa4"},"\u7b2c\u516d\u7ae0 Redis cluster\u96c6\u7fa4"),(0,n.kt)("p",null,"\u73b0\u72b6\u95ee\u9898\uff1a\u4e1a\u52a1\u53d1\u5c55\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u5cf0\u503c\u74f6\u9888"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"redis\u63d0\u4f9b\u7684\u670d\u52a1OPS\u53ef\u4ee5\u8fbe\u523010\u4e07/\u79d2\uff0c\u5f53\u524d\u4e1a\u52a1OPS\u5df2\u7ecf\u8fbe\u523010\u4e07/\u79d2"),(0,n.kt)("li",{parentName:"ul"},"\u5185\u5b58\u5355\u673a\u5bb9\u91cf\u8fbe\u5230256G\uff0c\u5f53\u524d\u4e1a\u52a1\u9700\u6c42\u5185\u5b58\u5bb9\u91cf1T"),(0,n.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u96c6\u7fa4\u7684\u65b9\u5f0f\u53ef\u4ee5\u5feb\u901f\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898")),(0,n.kt)("h3",{id:"1\u96c6\u7fa4\u7b80\u4ecb"},"1\u3001\u96c6\u7fa4\u7b80\u4ecb"),(0,n.kt)("p",null,"\u96c6\u7fa4\u5c31\u662f\u4f7f\u7528\u7f51\u7edc\u5c06\u82e5\u5e72\u53f0\u8ba1\u7b97\u673a\u8054\u901a\u8d77\u6765\uff0c\u5e76\u63d0\u4f9b\u7edf\u4e00\u7684\u7ba1\u7406\u65b9\u5f0f\uff0c\u4f7f\u5176\u5bf9\u5916\u5448\u73b0\u5355\u673a\u7684\u670d\u52a1\u6548\u679c"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302132753862-6cedb441.png",alt:"image-20220302132753862"}),"image-20220302132753862"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u96c6\u7fa4\u4f5c\u7528\uff1a")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5206\u6563\u5355\u53f0\u670d\u52a1\u5668\u7684\u8bbf\u95ee\u538b\u529b\uff0c\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861"),(0,n.kt)("li",{parentName:"ul"},"\u5206\u6563\u5355\u53f0\u670d\u52a1\u5668\u7684\u5b58\u50a8\u538b\u529b\uff0c\u5b9e\u73b0\u53ef\u6269\u5c55\u6027"),(0,n.kt)("li",{parentName:"ul"},"\u964d\u4f4e\u5355\u53f0\u670d\u52a1\u5668\u5b95\u673a\u5e26\u6765\u7684\u4e1a\u52a1\u707e\u96be")),(0,n.kt)("h3",{id:"2cluster\u96c6\u7fa4\u7ed3\u6784\u8bbe\u8ba1"},"2\u3001Cluster\u96c6\u7fa4\u7ed3\u6784\u8bbe\u8ba1"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u6570\u636e\u5b58\u50a8\u8bbe\u8ba1\uff1a")),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u901a\u8fc7\u7b97\u6cd5\u8bbe\u8ba1\uff0c\u8ba1\u7b97\u51fakey\u5e94\u8be5\u4fdd\u5b58\u7684\u4f4d\u7f6e")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u5c06\u6240\u6709\u7684\u5b58\u50a8\u7a7a\u95f4\u8ba1\u5212\u5207\u5272\u621016384\u4efd\uff0c\u6bcf\u53f0\u4e3b\u673a\u4fdd\u5b58\u4e00\u90e8\u5206"),(0,n.kt)("p",{parentName:"li"},"\u6ce8\u610f\uff1a\u6bcf\u4efd\u4ee3\u8868\u7684\u662f\u4e00\u4e2a\u5b58\u50a8\u7a7a\u95f4\uff0c\u4e0d\u662f\u4e00\u4e2akey\u7684\u4fdd\u5b58\u7a7a\u95f4")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"\u5c06key\u6309\u7167\u8ba1\u7b97\u51fa\u7684\u7ed3\u679c\u653e\u5230\u5bf9\u5e94\u7684\u5b58\u50a8\u7a7a\u95f4"))),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/26-da9a3613.png",alt:"img"})),(0,n.kt)("p",null,"\u90a3redis\u7684\u96c6\u7fa4\u662f\u5982\u4f55\u589e\u5f3a\u53ef\u6269\u5c55\u6027\u7684\u5462\uff1f\u8b6c\u5982\u6211\u4eec\u8981\u589e\u52a0\u4e00\u4e2a\u96c6\u7fa4\u8282\u70b9"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/27-4f8e2dee.png",alt:"img"})),(0,n.kt)("p",null,"\u5f53\u6211\u4eec\u67e5\u627e\u6570\u636e\u65f6\uff0c\u96c6\u7fa4\u662f\u5982\u4f55\u64cd\u4f5c\u7684\u5462\uff1f"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5404\u4e2a\u6570\u636e\u5e93\u76f8\u4e92\u901a\u4fe1\uff0c\u4fdd\u5b58\u5404\u4e2a\u5e93\u4e2d\u69fd\u7684\u7f16\u53f7\u6570\u636e"),(0,n.kt)("li",{parentName:"ul"},"\u4e00\u6b21\u547d\u4e2d\uff0c\u76f4\u63a5\u8fd4\u56de"),(0,n.kt)("li",{parentName:"ul"},"\u4e00\u6b21\u672a\u547d\u4e2d\uff0c\u544a\u77e5\u5177\u4f53\u4f4d\u7f6e")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/28-3bf29c16.png",alt:"img"})),(0,n.kt)("h3",{id:"3cluster\u96c6\u7fa4\u7ed3\u6784\u642d\u5efa"},"3\u3001Cluster\u96c6\u7fa4\u7ed3\u6784\u642d\u5efa"),(0,n.kt)("p",null,"\u9996\u5148\u8981\u660e\u786e\u7684\u51e0\u4e2a\u8981\u70b9\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u914d\u7f6e\u670d\u52a1\u5668\uff083\u4e3b3\u4ece\uff09"),(0,n.kt)("li",{parentName:"ul"},"\u5efa\u7acb\u901a\u4fe1\uff08Meet\uff09"),(0,n.kt)("li",{parentName:"ul"},"\u5206\u69fd\uff08Slot\uff09"),(0,n.kt)("li",{parentName:"ul"},"\u642d\u5efa\u4e3b\u4ece\uff08master-slave\uff09")),(0,n.kt)("p",null,"1 \u521b\u5efa6\u4e2aredis\u5355\u4f53\u670d\u52a1 7001-7006\u3002\u4fee\u6539redis.conf"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},'port 7001\nbind 192.168.200.131\nprotected-mode no\ndaemonize yes\npidfile /var/run/redis_7001.pid\nlogfile "/export/server/redis7001/log/redis.log"\ndir /export/server/redis7001/data/\nappendonly yes\ncluster-enabled yes\ncluster-config-file nodes-7001.conf\ncluster-node-timeout 15000\n')),(0,n.kt)("p",null,"2\u8ba9\u516d\u53f0\u673a\u5668\u7ec4\u6210\u96c6\u7fa4"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"redis-cli --cluster create 192.168.200.131:7001 192.168.200.131:7002 192.168.200.131:7003 192.168.200.131:7004 192.168.200.131:7005 192.168.200.131:7006 --cluster-replicas 1\n")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302135214723-38e37ba6.png",alt:"image-20220302135214723"}),"image-20220302135214723"),(0,n.kt)("p",null,"\u8f93\u5165yes"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302135233706-46e631b4.png",alt:"image-20220302135233706"}),"image-20220302135233706"),(0,n.kt)("p",null,"\u5ba2\u6237\u7aef\u8fde\u63a5cluster"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"./redis-cli -c -h 192.168.200.131 -p 7001\n")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302135704897-011e34a9.png",alt:"image-20220302135704897"}),"image-20220302135704897"),(0,n.kt)("p",null,"\u8bbe\u7f6e\u503c\uff0c\u8df3\u8f6c\u5230\u6b63\u786e\u7684\u670d\u52a1\u5668\u4e0a\u3002"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Cluster\u914d\u7f6e")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u662f\u5426\u542f\u7528cluster\uff0c\u52a0\u5165cluster\u8282\u70b9")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"cluster-enabled yes|no\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"cluster\u914d\u7f6e\u6587\u4ef6\u540d\uff0c\u8be5\u6587\u4ef6\u5c5e\u4e8e\u81ea\u52a8\u751f\u6210\uff0c\u4ec5\u7528\u4e8e\u5feb\u901f\u67e5\u627e\u6587\u4ef6\u5e76\u67e5\u8be2\u6587\u4ef6\u5185\u5bb9")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"cluster-config-file filename\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u8282\u70b9\u670d\u52a1\u54cd\u5e94\u8d85\u65f6\u65f6\u95f4\uff0c\u7528\u4e8e\u5224\u5b9a\u8be5\u8282\u70b9\u662f\u5426\u4e0b\u7ebf\u6216\u5207\u6362\u4e3a\u4ece\u8282\u70b9")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"cluster-node-timeout milliseconds\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"master\u8fde\u63a5\u7684slave\u6700\u5c0f\u6570\u91cf")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"cluster-migration-barrier min_slave_number\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Cluster\u8282\u70b9\u64cd\u4f5c\u547d\u4ee4")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u67e5\u770b\u96c6\u7fa4\u8282\u70b9\u4fe1\u606f")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"cluster nodes\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u66f4\u6539slave\u6307\u5411\u65b0\u7684master")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"cluster replicate master-id\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u53d1\u73b0\u4e00\u4e2a\u65b0\u8282\u70b9\uff0c\u65b0\u589emaster")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"cluster meet ip:port\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5ffd\u7565\u4e00\u4e2a\u6ca1\u6709solt\u7684\u8282\u70b9")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"cluster forget server_id\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u624b\u52a8\u6545\u969c\u8f6c\u79fb")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"cluster failover\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u96c6\u7fa4\u64cd\u4f5c\u547d\u4ee4\uff1a")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u521b\u5efa\u96c6\u7fa4")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"redis-cli \u2013-cluster create masterhost1:masterport1 masterhost2:masterport2  masterhost3:masterport3 [masterhostn:masterportn \u2026] slavehost1:slaveport1  slavehost2:slaveport2 slavehost3:slaveport3 -\u2013cluster-replicas n\n")),(0,n.kt)("p",null,"\u6ce8\u610f\uff1amaster\u4e0eslave\u7684\u6570\u91cf\u8981\u5339\u914d\uff0c\u4e00\u4e2amaster\u5bf9\u5e94n\u4e2aslave\uff0c\u7531\u6700\u540e\u7684\u53c2\u6570n\u51b3\u5b9a"),(0,n.kt)("p",null,"master\u4e0eslave\u7684\u5339\u914d\u987a\u5e8f\u4e3a\u7b2c\u4e00\u4e2amaster\u4e0e\u524dn\u4e2aslave\u5206\u4e3a\u4e00\u7ec4\uff0c\u5f62\u6210\u4e3b\u4ece\u7ed3\u6784"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u6dfb\u52a0master\u5230\u5f53\u524d\u96c6\u7fa4\u4e2d\uff0c\u8fde\u63a5\u65f6\u53ef\u4ee5\u6307\u5b9a\u4efb\u610f\u73b0\u6709\u8282\u70b9\u5730\u5740\u4e0e\u7aef\u53e3")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"redis-cli --cluster add-node new-master-host:new-master-port now-host:now-port\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u6dfb\u52a0slave")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"redis-cli --cluster add-node new-slave-host:new-slave-port master-host:master-port --cluster-slave --cluster-master-id masterid\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5220\u9664\u8282\u70b9\uff0c\u5982\u679c\u5220\u9664\u7684\u8282\u70b9\u662fmaster\uff0c\u5fc5\u987b\u4fdd\u969c\u5176\u4e2d\u6ca1\u6709\u69fdslot")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"redis-cli --cluster del-node del-slave-host:del-slave-port del-slave-id\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u91cd\u65b0\u5206\u69fd\uff0c\u5206\u69fd\u662f\u4ece\u5177\u6709\u69fd\u7684master\u4e2d\u5212\u5206\u4e00\u90e8\u5206\u7ed9\u5176\u4ed6master\uff0c\u8fc7\u7a0b\u4e2d\u4e0d\u521b\u5efa\u65b0\u7684\u69fd")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"redis-cli --cluster reshard new-master-host:new-master:port --cluster-from src-  master-id1, src-master-id2, src-master-idn --cluster-to target-master-id --  cluster-slots slots\n")),(0,n.kt)("p",null,"\u6ce8\u610f\uff1a\u5c06\u9700\u8981\u53c2\u4e0e\u5206\u69fd\u7684\u6240\u6709masterid\u4e0d\u5206\u5148\u540e\u987a\u5e8f\u6dfb\u52a0\u5230\u53c2\u6570\u4e2d\uff0c\u4f7f\u7528\uff0c\u5206\u9694"),(0,n.kt)("p",null,"\u6307\u5b9a\u76ee\u6807\u5f97\u5230\u7684\u69fd\u7684\u6570\u91cf\uff0c\u6240\u6709\u7684\u69fd\u5c06\u5e73\u5747\u4ece\u6bcf\u4e2a\u6765\u6e90\u7684master\u5904\u83b7\u53d6"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u91cd\u65b0\u5206\u914d\u69fd\uff0c\u4ece\u5177\u6709\u69fd\u7684master\u4e2d\u5206\u914d\u6307\u5b9a\u6570\u91cf\u7684\u69fd\u5230\u53e6\u4e00\u4e2amaster\u4e2d\uff0c\u5e38\u7528\u4e8e\u6e05\u7a7a\u6307\u5b9amaster\u4e2d\u7684\u69fd")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"redis-cli --cluster reshard src-master-host:src-master-port --cluster-from src-  master-id --cluster-to target-master-id --cluster-slots slots --cluster-yes\n")),(0,n.kt)("h3",{id:"4java\u64cd\u4f5c"},"4\u3001java\u64cd\u4f5c"),(0,n.kt)("p",null,"1\u539f\u751f"),(0,n.kt)("p",null,"JedisCluster"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},'package com.ydlclass.redis;\n\nimport org.testng.annotations.AfterTest;\nimport org.testng.annotations.BeforeTest;\nimport org.testng.annotations.Test;\nimport redis.clients.jedis.HostAndPort;\nimport redis.clients.jedis.JedisCluster;\nimport redis.clients.jedis.JedisPoolConfig;\n\nimport java.io.IOException;\nimport java.util.HashSet;\nimport java.util.Set;\n\n/**\n * @Created by IT\u674e\u8001\u5e08\n * \u516c\u4e3b\u53f7 \u201cIT\u674e\u54e5\u4ea4\u670b\u53cb\u201d\n * \u4e2a\u4eba\u5fae itlils\n */\npublic class RedisClusterTest {\n    JedisCluster jedisCluster;\n\n    @BeforeTest\n    public void beforeTest(){\n        //\u521b\u5efajedis\u8fde\u63a5\u6c60\n        JedisPoolConfig config=new JedisPoolConfig();\n        //\u6700\u5927\u7a7a\u95f2\u8fde\u63a5\n        config.setMaxIdle(10);\n        //\u6700\u5c0f\u7a7a\u95f2\u8fde\u63a5\n        config.setMinIdle(5);\n        //\u6700\u5927\u7a7a\u95f2\u65f6\u95f4\n        config.setMaxWaitMillis(3000);\n        //\u6700\u5927\u8fde\u63a5\u6570\n        config.setMaxTotal(50);\n\n        Set<HostAndPort> nodes=new HashSet<>();\n        nodes.add(new HostAndPort("192.168.200.131", 7001));\n        nodes.add(new HostAndPort("192.168.200.131", 7002));\n        nodes.add(new HostAndPort("192.168.200.131", 7003));\n        nodes.add(new HostAndPort("192.168.200.131", 7004));\n        nodes.add(new HostAndPort("192.168.200.131", 7005));\n        nodes.add(new HostAndPort("192.168.200.131", 7006));\n\n        jedisCluster= new JedisCluster(nodes,config);\n    }\n\n    @Test\n    public void addTest(){\n        jedisCluster.set("c", "d");\n        String str = jedisCluster.get("c");\n        System.out.println(str);\n    }\n    \n    @AfterTest\n    public void afterTest(){\n        try {\n            jedisCluster.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n')),(0,n.kt)("p",null,"2springboot"),(0,n.kt)("p",null,"\u914d\u7f6e\u6587\u4ef6"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"spring:\n  redis:\n    pool:\n      max-idle: 100\n      min-idle: 1\n      max-active: 1000\n      max-wait: -1\n    cluster:\n      nodes:\n        - 192.168.200.131:7001\n        - 192.168.200.131:7002\n        - 192.168.200.131:7003\n        - 192.168.200.131:7004\n        - 192.168.200.131:7005\n        - 192.168.200.131:7006\n    database: 0\n    timeout: 15000\n    connect-timeout: 5000\n")),(0,n.kt)("h2",{id:"\u7b2c\u4e03\u7ae0-redis\u9ad8\u9891\u9762\u8bd5\u9898"},"\u7b2c\u4e03\u7ae0 Redis\u9ad8\u9891\u9762\u8bd5\u9898"),(0,n.kt)("h3",{id:"1\u7f13\u5b58\u9884\u70ed"},"1\u3001\u7f13\u5b58\u9884\u70ed"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u573a\u666f"),"\uff1a\u201c\u5b95\u673a\u201d"),(0,n.kt)("p",null,"\u670d\u52a1\u5668\u542f\u52a8\u540e\u8fc5\u901f\u5b95\u673a"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u95ee\u9898\u6392\u67e5"),"\uff1a"),(0,n.kt)("p",null,"1.\u8bf7\u6c42\u6570\u91cf\u8f83\u9ad8\uff0c\u5927\u91cf\u7684\u8bf7\u6c42\u8fc7\u6765\u4e4b\u540e\u90fd\u9700\u8981\u53bb\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\u6570\u636e\uff0c\u4f46\u662f\u7f13\u5b58\u4e2d\u53c8\u6ca1\u6709\uff0c\u6b64\u65f6\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u627e\u6570\u636e\u7136\u540e\u5c06\u6570\u636e\u518d\u5b58\u5165\u7f13\u5b58\uff0c\u9020\u6210\u4e86\u77ed\u671f\u5185\u5bf9redis\u7684\u9ad8\u5f3a\u5ea6\u64cd\u4f5c\u4ece\u800c\u5bfc\u81f4\u95ee\u9898"),(0,n.kt)("p",null,"2.\u4e3b\u4ece\u4e4b\u95f4\u6570\u636e\u541e\u5410\u91cf\u8f83\u5927\uff0c\u6570\u636e\u540c\u6b65\u64cd\u4f5c\u9891\u5ea6\u8f83\u9ad8"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u89e3\u51b3\u65b9\u6848\uff1a")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u524d\u7f6e\u51c6\u5907\u5de5\u4f5c\uff1a")),(0,n.kt)("p",null,"1.\u65e5\u5e38\u4f8b\u884c\u7edf\u8ba1\u6570\u636e\u8bbf\u95ee\u8bb0\u5f55\uff0c\u7edf\u8ba1\u8bbf\u95ee\u9891\u5ea6\u8f83\u9ad8\u7684\u70ed\u70b9\u6570\u636e"),(0,n.kt)("p",null,"2.\u5229\u7528LRU\u6570\u636e\u5220\u9664\u7b56\u7565\uff0c\u6784\u5efa\u6570\u636e\u7559\u5b58\u961f\u5217\u4f8b\u5982\uff1astorm\u4e0ekafka\u914d\u5408"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u51c6\u5907\u5de5\u4f5c\uff1a")),(0,n.kt)("p",null,"1.\u5c06\u7edf\u8ba1\u7ed3\u679c\u4e2d\u7684\u6570\u636e\u5206\u7c7b\uff0c\u6839\u636e\u7ea7\u522b\uff0credis\u4f18\u5148\u52a0\u8f7d\u7ea7\u522b\u8f83\u9ad8\u7684\u70ed\u70b9\u6570\u636e"),(0,n.kt)("p",null,"2.\u5229\u7528\u5206\u5e03\u5f0f\u591a\u670d\u52a1\u5668\u540c\u65f6\u8fdb\u884c\u6570\u636e\u8bfb\u53d6\uff0c\u63d0\u901f\u6570\u636e\u52a0\u8f7d\u8fc7\u7a0b"),(0,n.kt)("p",null,"3.\u70ed\u70b9\u6570\u636e\u4e3b\u4ece\u540c\u65f6\u9884\u70ed"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5b9e\u65bd\uff1a")),(0,n.kt)("p",null,"4.\u4f7f\u7528\u811a\u672c\u7a0b\u5e8f\u56fa\u5b9a\u89e6\u53d1\u6570\u636e\u9884\u70ed\u8fc7\u7a0b"),(0,n.kt)("p",null,"5.\u5982\u679c\u6761\u4ef6\u5141\u8bb8\uff0c\u4f7f\u7528\u4e86CDN\uff08\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\uff09\uff0c\u6548\u679c\u4f1a\u66f4\u597d"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302143005379-de9b1aa7.png",alt:"image-20220302143005379"}),"image-20220302143005379"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u603b\u7684\u6765\u8bf4"),"\uff1a\u7f13\u5b58\u9884\u70ed\u5c31\u662f\u7cfb\u7edf\u542f\u52a8\u524d\uff0c\u63d0\u524d\u5c06\u76f8\u5173\u7684\u7f13\u5b58\u6570\u636e\u76f4\u63a5\u52a0\u8f7d\u5230\u7f13\u5b58\u7cfb\u7edf\u3002\u907f\u514d\u5728\u7528\u6237\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u5148\u67e5\u8be2\u6570\u636e\u5e93\uff0c\u7136\u540e\u518d\u5c06\u6570\u636e\u7f13\u5b58\u7684\u95ee\u9898\uff01\u7528\u6237\u76f4\u63a5\u67e5\u8be2\u4e8b\u5148\u88ab\u9884\u70ed\u7684\u7f13\u5b58\u6570\u636e\uff01"),(0,n.kt)("h3",{id:"2\u7f13\u5b58\u96ea\u5d29"},"2\u3001\u7f13\u5b58\u96ea\u5d29"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u573a\u666f"),"\uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u5d29\u6e83\uff0c\u4e00\u8fde\u4e32\u7684\u573a\u666f\u4f1a\u968f\u4e4b\u513f\u6765"),(0,n.kt)("p",null,"1.\u7cfb\u7edf\u5e73\u7a33\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u5ffd\u7136\u6570\u636e\u5e93\u8fde\u63a5\u91cf\u6fc0\u589e"),(0,n.kt)("p",null,"2.\u5e94\u7528\u670d\u52a1\u5668\u65e0\u6cd5\u53ca\u65f6\u5904\u7406\u8bf7\u6c42"),(0,n.kt)("p",null,"3.\u5927\u91cf408\uff0c500\u9519\u8bef\u9875\u9762\u51fa\u73b0"),(0,n.kt)("p",null,"4.\u5ba2\u6237\u53cd\u590d\u5237\u65b0\u9875\u9762\u83b7\u53d6\u6570\u636e"),(0,n.kt)("p",null,"5.\u6570\u636e\u5e93\u5d29\u6e83"),(0,n.kt)("p",null,"6.\u5e94\u7528\u670d\u52a1\u5668\u5d29\u6e83"),(0,n.kt)("p",null,"7.\u91cd\u542f\u5e94\u7528\u670d\u52a1\u5668\u65e0\u6548"),(0,n.kt)("p",null,"8.Redis\u670d\u52a1\u5668\u5d29\u6e83"),(0,n.kt)("p",null,"9.Redis\u96c6\u7fa4\u5d29\u6e83"),(0,n.kt)("p",null,"10.\u91cd\u542f\u6570\u636e\u5e93\u540e\u518d\u6b21\u88ab\u77ac\u95f4\u6d41\u91cf\u653e\u5012"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u95ee\u9898\u6392\u67e5"),"\uff1a"),(0,n.kt)("p",null,"1.\u5728\u4e00\u4e2a\u8f83\u77ed\u7684\u65f6\u95f4\u5185\uff0c\u7f13\u5b58\u4e2d\u8f83\u591a\u7684key\u96c6\u4e2d\u8fc7\u671f"),(0,n.kt)("p",null,"2.\u6b64\u5468\u671f\u5185\u8bf7\u6c42\u8bbf\u95ee\u8fc7\u671f\u7684\u6570\u636e\uff0credis\u672a\u547d\u4e2d\uff0credis\u5411\u6570\u636e\u5e93\u83b7\u53d6\u6570\u636e"),(0,n.kt)("p",null,"3.\u6570\u636e\u5e93\u540c\u65f6\u63a5\u6536\u5230\u5927\u91cf\u7684\u8bf7\u6c42\u65e0\u6cd5\u53ca\u65f6\u5904\u7406"),(0,n.kt)("p",null,"4.Redis\u5927\u91cf\u8bf7\u6c42\u88ab\u79ef\u538b\uff0c\u5f00\u59cb\u51fa\u73b0\u8d85\u65f6\u73b0\u8c61"),(0,n.kt)("p",null,"5.\u6570\u636e\u5e93\u6d41\u91cf\u6fc0\u589e\uff0c\u6570\u636e\u5e93\u5d29\u6e83"),(0,n.kt)("p",null,"6.\u91cd\u542f\u540e\u4ecd\u7136\u9762\u5bf9\u7f13\u5b58\u4e2d\u65e0\u6570\u636e\u53ef\u7528"),(0,n.kt)("p",null,"7.Redis\u670d\u52a1\u5668\u8d44\u6e90\u88ab\u4e25\u91cd\u5360\u7528\uff0cRedis\u670d\u52a1\u5668\u5d29\u6e83"),(0,n.kt)("p",null,"8.Redis\u96c6\u7fa4\u5448\u73b0\u5d29\u584c\uff0c\u96c6\u7fa4\u74e6\u89e3"),(0,n.kt)("p",null,"9.\u5e94\u7528\u670d\u52a1\u5668\u65e0\u6cd5\u53ca\u65f6\u5f97\u5230\u6570\u636e\u54cd\u5e94\u8bf7\u6c42\uff0c\u6765\u81ea\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u6570\u91cf\u8d8a\u6765\u8d8a\u591a\uff0c\u5e94\u7528\u670d\u52a1\u5668\u5d29\u6e83"),(0,n.kt)("p",null,"10.\u5e94\u7528\u670d\u52a1\u5668\uff0credis\uff0c\u6570\u636e\u5e93\u5168\u90e8\u91cd\u542f\uff0c\u6548\u679c\u4e0d\u7406\u60f3"),(0,n.kt)("p",null,"\u603b\u800c\u8a00\u4e4b\u5c31\u4e24\u70b9\uff1a\u77ed\u65f6\u95f4\u8303\u56f4\u5185\uff0c\u5927\u91cfkey\u96c6\u4e2d\u8fc7\u671f"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302143411228-bb434b73.png",alt:"image-20220302143411228"}),"image-20220302143411228"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u89e3\u51b3\u65b9\u6848")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u601d\u8def\uff1a")),(0,n.kt)("p",null,"1.\u66f4\u591a\u7684\u9875\u9762\u9759\u6001\u5316\u5904\u7406"),(0,n.kt)("p",null,"2.\u6784\u5efa\u591a\u7ea7\u7f13\u5b58\u67b6\u6784"),(0,n.kt)("p",null," Nginx\u7f13\u5b58+redis\u7f13\u5b58+ehcache\u7f13\u5b58"),(0,n.kt)("p",null,"3.\u68c0\u6d4bMysql\u4e25\u91cd\u8017\u65f6\u4e1a\u52a1\u8fdb\u884c\u4f18\u5316"),(0,n.kt)("p",null," \u5bf9\u6570\u636e\u5e93\u7684\u74f6\u9888\u6392\u67e5\uff1a\u4f8b\u5982\u8d85\u65f6\u67e5\u8be2\u3001\u8017\u65f6\u8f83\u9ad8\u4e8b\u52a1\u7b49"),(0,n.kt)("p",null,"4.\u707e\u96be\u9884\u8b66\u673a\u5236"),(0,n.kt)("p",null," \u76d1\u63a7redis\u670d\u52a1\u5668\u6027\u80fd\u6307\u6807"),(0,n.kt)("p",null," CPU\u5360\u7528\u3001CPU\u4f7f\u7528\u7387"),(0,n.kt)("p",null," \u5185\u5b58\u5bb9\u91cf"),(0,n.kt)("p",null," \u67e5\u8be2\u5e73\u5747\u54cd\u5e94\u65f6\u95f4"),(0,n.kt)("p",null," \u7ebf\u7a0b\u6570"),(0,n.kt)("p",null,"5.\u9650\u6d41\u3001\u964d\u7ea7"),(0,n.kt)("p",null,"\u77ed\u65f6\u95f4\u8303\u56f4\u5185\u727a\u7272\u4e00\u4e9b\u5ba2\u6237\u4f53\u9a8c\uff0c\u9650\u5236\u4e00\u90e8\u5206\u8bf7\u6c42\u8bbf\u95ee\uff0c\u964d\u4f4e\u5e94\u7528\u670d\u52a1\u5668\u538b\u529b\uff0c\u5f85\u4e1a\u52a1\u4f4e\u901f\u8fd0\u8f6c\u540e\u518d\u9010\u6b65\u653e\u5f00\u8bbf\u95ee"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u843d\u5730\u5b9e\u8df5\uff1a")),(0,n.kt)("p",null,"1.LRU\u4e0eLFU\u5207\u6362"),(0,n.kt)("p",null,"2.\u6570\u636e\u6709\u6548\u671f\u7b56\u7565\u8c03\u6574"),(0,n.kt)("p",null," \u6839\u636e\u4e1a\u52a1\u6570\u636e\u6709\u6548\u671f\u8fdb\u884c\u5206\u7c7b\u9519\u5cf0\uff0cA\u7c7b90\u5206\u949f\uff0cB\u7c7b80\u5206\u949f\uff0cC\u7c7b70\u5206\u949f"),(0,n.kt)("p",null," \u8fc7\u671f\u65f6\u95f4\u4f7f\u7528\u56fa\u5b9a\u65f6\u95f4+\u968f\u673a\u503c\u7684\u5f62\u5f0f\uff0c\u7a00\u91ca\u96c6\u4e2d\u5230\u671f\u7684key\u7684\u6570\u91cf"),(0,n.kt)("p",null,"3.\u8d85\u70ed\u6570\u636e\u4f7f\u7528\u6c38\u4e45key"),(0,n.kt)("p",null,"4.\u5b9a\u671f\u7ef4\u62a4\uff08\u81ea\u52a8+\u4eba\u5de5\uff09"),(0,n.kt)("p",null," \u5bf9\u5373\u5c06\u8fc7\u671f\u6570\u636e\u505a\u8bbf\u95ee\u91cf\u5206\u6790\uff0c\u786e\u8ba4\u662f\u5426\u5ef6\u65f6\uff0c\u914d\u5408\u8bbf\u95ee\u91cf\u7edf\u8ba1\uff0c\u505a\u70ed\u70b9\u6570\u636e\u7684\u5ef6\u65f6"),(0,n.kt)("p",null,"5.\u52a0\u9501\uff1a\u614e\u7528\uff01"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u603b\u7684\u6765\u8bf4"),"\uff1a\u7f13\u5b58\u96ea\u5d29\u5c31\u662f\u77ac\u95f4\u8fc7\u671f\u6570\u636e\u91cf\u592a\u5927\uff0c\u5bfc\u81f4\u5bf9\u6570\u636e\u5e93\u670d\u52a1\u5668\u9020\u6210\u538b\u529b\u3002\u5982\u80fd\u591f\u6709\u6548\u907f\u514d\u8fc7\u671f\u65f6\u95f4\u96c6\u4e2d\uff0c\u53ef\u4ee5\u6709\u6548\u89e3\u51b3\u96ea\u5d29\u73b0\u8c61\u7684 \u51fa\u73b0\uff08\u7ea640%\uff09\uff0c\u914d\u5408\u5176\u4ed6\u7b56\u7565\u4e00\u8d77\u4f7f\u7528\uff0c\u5e76\u76d1\u63a7\u670d\u52a1\u5668\u7684\u8fd0\u884c\u6570\u636e\uff0c\u6839\u636e\u8fd0\u884c\u8bb0\u5f55\u505a\u5feb\u901f\u8c03\u6574\u3002"),(0,n.kt)("h3",{id:"3\u7f13\u5b58\u51fb\u7a7f"},"3\u3001\u7f13\u5b58\u51fb\u7a7f"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u573a\u666f"),"\uff1a\u8fd8\u662f\u6570\u636e\u5e93\u670d\u52a1\u5668\u5d29\u6e83\uff0c\u4f46\u662f\u8ddf\u4e4b\u524d\u7684\u573a\u666f\u6709\u70b9\u4e0d\u592a\u4e00\u6837"),(0,n.kt)("p",null,"1.\u7cfb\u7edf\u5e73\u7a33\u8fd0\u884c\u8fc7\u7a0b\u4e2d"),(0,n.kt)("p",null,"2.\u6570\u636e\u5e93\u8fde\u63a5\u91cf\u77ac\u95f4\u6fc0\u589e"),(0,n.kt)("p",null,"3.Redis\u670d\u52a1\u5668\u65e0\u5927\u91cfkey\u8fc7\u671f"),(0,n.kt)("p",null,"4.Redis\u5185\u5b58\u5e73\u7a33\uff0c\u65e0\u6ce2\u52a8"),(0,n.kt)("p",null,"5.Redis\u670d\u52a1\u5668CPU\u6b63\u5e38"),(0,n.kt)("p",null,"6.\u6570\u636e\u5e93\u5d29\u6e83"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u95ee\u9898\u6392\u67e5\uff1a")),(0,n.kt)("p",null,"1.Redis\u4e2d\u67d0\u4e2akey\u8fc7\u671f\uff0c\u8be5key\u8bbf\u95ee\u91cf\u5de8\u5927"),(0,n.kt)("p",null,"2.\u591a\u4e2a\u6570\u636e\u8bf7\u6c42\u4ece\u670d\u52a1\u5668\u76f4\u63a5\u538b\u5230Redis\u540e\uff0c\u5747\u672a\u547d\u4e2d"),(0,n.kt)("p",null,"3.Redis\u5728\u77ed\u65f6\u95f4\u5185\u53d1\u8d77\u4e86\u5927\u91cf\u5bf9\u6570\u636e\u5e93\u4e2d\u540c\u4e00\u6570\u636e\u7684\u8bbf\u95ee"),(0,n.kt)("p",null,"\u603b\u800c\u8a00\u4e4b\u5c31\u4e24\u70b9\uff1a\u5355\u4e2akey\u9ad8\u70ed\u6570\u636e\uff0ckey\u8fc7\u671f"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302143844340-c120484c.png",alt:"image-20220302143844340"}),"image-20220302143844340"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u89e3\u51b3\u65b9\u6848"),"\uff1a"),(0,n.kt)("p",null,"1.\u9884\u5148\u8bbe\u5b9a"),(0,n.kt)("p",null," \u4ee5\u7535\u5546\u4e3a\u4f8b\uff0c\u6bcf\u4e2a\u5546\u5bb6\u6839\u636e\u5e97\u94fa\u7b49\u7ea7\uff0c\u6307\u5b9a\u82e5\u5e72\u6b3e\u4e3b\u6253\u5546\u54c1\uff0c\u5728\u8d2d\u7269\u8282\u671f\u95f4\uff0c\u52a0\u5927\u6b64\u7c7b\u4fe1\u606fkey\u7684\u8fc7\u671f\u65f6\u957f \u6ce8\u610f\uff1a\u8d2d\u7269\u8282\u4e0d\u4ec5\u4ec5\u6307\u5f53\u5929\uff0c\u4ee5\u53ca\u540e\u7eed\u82e5\u5e72\u5929\uff0c\u8bbf\u95ee\u5cf0\u503c\u5448\u73b0\u9010\u6e10\u964d\u4f4e\u7684\u8d8b\u52bf"),(0,n.kt)("p",null,"2.\u73b0\u573a\u8c03\u6574"),(0,n.kt)("p",null," \u76d1\u63a7\u8bbf\u95ee\u91cf\uff0c\u5bf9\u81ea\u7136\u6d41\u91cf\u6fc0\u589e\u7684\u6570\u636e\u5ef6\u957f\u8fc7\u671f\u65f6\u95f4\u6216\u8bbe\u7f6e\u4e3a\u6c38\u4e45\u6027key"),(0,n.kt)("p",null,"3.\u540e\u53f0\u5237\u65b0\u6570\u636e"),(0,n.kt)("p",null," \u542f\u52a8\u5b9a\u65f6\u4efb\u52a1\uff0c\u9ad8\u5cf0\u671f\u6765\u4e34\u4e4b\u524d\uff0c\u5237\u65b0\u6570\u636e\u6709\u6548\u671f\uff0c\u786e\u4fdd\u4e0d\u4e22\u5931"),(0,n.kt)("p",null,"4.\u4e8c\u7ea7\u7f13\u5b58"),(0,n.kt)("p",null," \u8bbe\u7f6e\u4e0d\u540c\u7684\u5931\u6548\u65f6\u95f4\uff0c\u4fdd\u969c\u4e0d\u4f1a\u88ab\u540c\u65f6\u6dd8\u6c70\u5c31\u884c"),(0,n.kt)("p",null,"5.\u52a0\u9501"),(0,n.kt)("p",null," \u5206\u5e03\u5f0f\u9501\uff0c\u9632\u6b62\u88ab\u51fb\u7a7f\uff0c\u4f46\u662f\u8981\u6ce8\u610f\u4e5f\u662f\u6027\u80fd\u74f6\u9888\uff0c\u614e\u91cd\uff01"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u603b\u7684\u6765\u8bf4"),"\uff1a\u7f13\u5b58\u51fb\u7a7f\u5c31\u662f\u5355\u4e2a\u9ad8\u70ed\u6570\u636e\u8fc7\u671f\u7684\u77ac\u95f4\uff0c\u6570\u636e\u8bbf\u95ee\u91cf\u8f83\u5927\uff0c\u672a\u547d\u4e2dredis\u540e\uff0c\u53d1\u8d77\u4e86\u5927\u91cf\u5bf9\u540c\u4e00\u6570\u636e\u7684\u6570\u636e\u5e93\u8bbf\u95ee\uff0c\u5bfc\u81f4\u5bf9\u6570 \u636e\u5e93\u670d\u52a1\u5668\u9020\u6210\u538b\u529b\u3002\u5e94\u5bf9\u7b56\u7565\u5e94\u8be5\u5728\u4e1a\u52a1\u6570\u636e\u5206\u6790\u4e0e\u9884\u9632\u65b9\u9762\u8fdb\u884c\uff0c\u914d\u5408\u8fd0\u884c\u76d1\u63a7\u6d4b\u8bd5\u4e0e\u5373\u65f6\u8c03\u6574\u7b56\u7565\uff0c\u6bd5\u7adf\u5355\u4e2akey\u7684\u8fc7 \u671f\u76d1\u63a7\u96be\u5ea6\u8f83\u9ad8\uff0c\u914d\u5408\u96ea\u5d29\u5904\u7406\u7b56\u7565\u5373\u53ef\u3002"),(0,n.kt)("h3",{id:"4\u7f13\u5b58\u7a7f\u900f"},"4\u3001\u7f13\u5b58\u7a7f\u900f"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u573a\u666f"),"\uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u53c8\u5d29\u6e83\u4e86\uff0c\u8ddf\u4e4b\u524d\u7684\u4e00\u6837\u5417\uff1f"),(0,n.kt)("p",null,"1.\u7cfb\u7edf\u5e73\u7a33\u8fd0\u884c\u8fc7\u7a0b\u4e2d"),(0,n.kt)("p",null,"2.\u5e94\u7528\u670d\u52a1\u5668\u6d41\u91cf\u968f\u65f6\u95f4\u589e\u91cf\u8f83\u5927"),(0,n.kt)("p",null,"3.Redis\u670d\u52a1\u5668\u547d\u4e2d\u7387\u968f\u65f6\u95f4\u9010\u6b65\u964d\u4f4e"),(0,n.kt)("p",null,"4.Redis\u5185\u5b58\u5e73\u7a33\uff0c\u5185\u5b58\u65e0\u538b\u529b"),(0,n.kt)("p",null,"5.Redis\u670d\u52a1\u5668CPU\u5360\u7528\u6fc0\u589e"),(0,n.kt)("p",null,"6.\u6570\u636e\u5e93\u670d\u52a1\u5668\u538b\u529b\u6fc0\u589e"),(0,n.kt)("p",null,"7.\u6570\u636e\u5e93\u5d29\u6e83"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u95ee\u9898\u6392\u67e5\uff1a")),(0,n.kt)("p",null,"1.Redis\u4e2d\u5927\u9762\u79ef\u51fa\u73b0\u672a\u547d\u4e2d"),(0,n.kt)("p",null,"2.\u51fa\u73b0\u975e\u6b63\u5e38URL\u8bbf\u95ee"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20220302144257762-00e6718b.png",alt:"image-20220302144257762"}),"image-20220302144257762"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u95ee\u9898\u5206\u6790"),"\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u83b7\u53d6\u7684\u6570\u636e\u5728\u6570\u636e\u5e93\u4e2d\u4e5f\u4e0d\u5b58\u5728\uff0c\u6570\u636e\u5e93\u67e5\u8be2\u672a\u5f97\u5230\u5bf9\u5e94\u6570\u636e"),(0,n.kt)("li",{parentName:"ul"},"Redis\u83b7\u53d6\u5230null\u6570\u636e\u672a\u8fdb\u884c\u6301\u4e45\u5316\uff0c\u76f4\u63a5\u8fd4\u56de"),(0,n.kt)("li",{parentName:"ul"},"\u4e0b\u6b21\u6b64\u7c7b\u6570\u636e\u5230\u8fbe\u91cd\u590d\u4e0a\u8ff0\u8fc7\u7a0b"),(0,n.kt)("li",{parentName:"ul"},"\u51fa\u73b0\u9ed1\u5ba2\u653b\u51fb\u670d\u52a1\u5668")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u89e3\u51b3\u65b9\u6848"),"\uff1a"),(0,n.kt)("p",null,"1.\u7f13\u5b58null"),(0,n.kt)("p",null," \u5bf9\u67e5\u8be2\u7ed3\u679c\u4e3anull\u7684\u6570\u636e\u8fdb\u884c\u7f13\u5b58\uff08\u957f\u671f\u4f7f\u7528\uff0c\u5b9a\u671f\u6e05\u7406\uff09\uff0c\u8bbe\u5b9a\u77ed\u65f6\u9650\uff0c\u4f8b\u598230-60\u79d2\uff0c\u6700\u9ad85\u5206\u949f"),(0,n.kt)("p",null,"2.\u767d\u540d\u5355\u7b56\u7565"),(0,n.kt)("p",null," \u63d0\u524d\u9884\u70ed\u5404\u79cd\u5206\u7c7b\u6570\u636eid\u5bf9\u5e94\u7684bitmaps\uff0cid\u4f5c\u4e3abitmaps\u7684offset\uff0c\u76f8\u5f53\u4e8e\u8bbe\u7f6e\u4e86\u6570\u636e\u767d\u540d\u5355\u3002\u5f53\u52a0\u8f7d\u6b63\u5e38\u6570\u636e\u65f6\u653e\u884c\uff0c\u52a0\u8f7d\u5f02\u5e38\u6570\u636e\u65f6\u76f4\u63a5\u62e6\u622a\uff08\u6548\u7387\u504f\u4f4e\uff09"),(0,n.kt)("p",null," \u4f7f\u7528\u5e03\u9686\u8fc7\u6ee4\u5668\uff08\u6709\u5173\u5e03\u9686\u8fc7\u6ee4\u5668\u7684\u547d\u4e2d\u95ee\u9898\u5bf9\u5f53\u524d\u72b6\u51b5\u53ef\u4ee5\u5ffd\u7565\uff09"),(0,n.kt)("p",null,"2.\u5b9e\u65bd\u76d1\u63a7"),(0,n.kt)("p",null," \u5b9e\u65f6\u76d1\u63a7redis\u547d\u4e2d\u7387\uff08\u4e1a\u52a1\u6b63\u5e38\u8303\u56f4\u65f6\uff0c\u901a\u5e38\u4f1a\u6709\u4e00\u4e2a\u6ce2\u52a8\u503c\uff09\u4e0enull\u6570\u636e\u7684\u5360\u6bd4"),(0,n.kt)("p",null," \u975e\u6d3b\u52a8\u65f6\u6bb5\u6ce2\u52a8\uff1a\u901a\u5e38\u68c0\u6d4b3-5\u500d\uff0c\u8d85\u8fc75\u500d\u7eb3\u5165\u91cd\u70b9\u6392\u67e5\u5bf9\u8c61"),(0,n.kt)("p",null," \u6d3b\u52a8\u65f6\u6bb5\u6ce2\u52a8\uff1a\u901a\u5e38\u68c0\u6d4b10-50\u500d\uff0c\u8d85\u8fc750\u500d\u7eb3\u5165\u91cd\u70b9\u6392\u67e5\u5bf9\u8c61"),(0,n.kt)("p",null," \u6839\u636e\u500d\u6570\u4e0d\u540c\uff0c\u542f\u52a8\u4e0d\u540c\u7684\u6392\u67e5\u6d41\u7a0b\u3002\u7136\u540e\u4f7f\u7528\u9ed1\u540d\u5355\u8fdb\u884c\u9632\u63a7\uff08\u8fd0\u8425\uff09"),(0,n.kt)("p",null,"4.key\u52a0\u5bc6"),(0,n.kt)("p",null," \u95ee\u9898\u51fa\u73b0\u540e\uff0c\u4e34\u65f6\u542f\u52a8\u9632\u707e\u4e1a\u52a1key\uff0c\u5bf9key\u8fdb\u884c\u4e1a\u52a1\u5c42\u4f20\u8f93\u52a0\u5bc6\u670d\u52a1\uff0c\u8bbe\u5b9a\u6821\u9a8c\u7a0b\u5e8f\uff0c\u8fc7\u6765\u7684key\u6821\u9a8c"),(0,n.kt)("p",null," \u4f8b\u5982\u6bcf\u5929\u968f\u673a\u5206\u914d60\u4e2a\u52a0\u5bc6\u4e32\uff0c\u6311\u90092\u52303\u4e2a\uff0c\u6df7\u6dc6\u5230\u9875\u9762\u6570\u636eid\u4e2d\uff0c\u53d1\u73b0\u8bbf\u95eekey\u4e0d\u6ee1\u8db3\u89c4\u5219\uff0c\u9a73\u56de\u6570\u636e\u8bbf\u95ee\u3002"),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"\u603b\u7684\u6765\u8bf4"),"\uff1a\u7f13\u5b58\u51fb\u7a7f\u662f\u6307\u8bbf\u95ee\u4e86\u4e0d\u5b58\u5728\u7684\u6570\u636e\uff0c\u8df3\u8fc7\u4e86\u5408\u6cd5\u6570\u636e\u7684redis\u6570\u636e\u7f13\u5b58\u9636\u6bb5\uff0c\u6bcf\u6b21\u8bbf\u95ee\u6570\u636e\u5e93\uff0c\u5bfc\u81f4\u5bf9\u6570\u636e\u5e93\u670d\u52a1\u5668\u9020\u6210\u538b\u529b\u3002\u901a\u5e38\u6b64\u7c7b\u6570\u636e\u7684\u51fa\u73b0\u91cf\u662f\u4e00\u4e2a\u8f83\u4f4e\u7684\u503c\uff0c\u5f53\u51fa\u73b0\u6b64\u7c7b\u60c5\u51b5\u4ee5\u6bd2\u653b\u6bd2\uff0c\u5e76\u53ca\u65f6\u62a5\u8b66\u3002\u5e94\u5bf9\u7b56\u7565\u5e94\u8be5\u5728\u4e34\u65f6\u9884\u6848\u9632\u8303\u65b9\u9762\u591a\u505a\u6587\u7ae0\u3002"),(0,n.kt)("p",null,"\u65e0\u8bba\u662f\u9ed1\u540d\u5355\u8fd8\u662f\u767d\u540d\u5355\uff0c\u90fd\u662f\u5bf9\u6574\u4f53\u7cfb\u7edf\u7684\u538b\u529b\uff0c\u8b66\u62a5\u89e3\u9664\u540e\u5c3d\u5feb\u79fb\u9664\u3002"),(0,n.kt)("h3",{id:"5redis\u7684\u547d\u540d\u89c4\u8303"},"5\u3001Redis\u7684\u547d\u540d\u89c4\u8303"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u7edf\u4e00\u7684\u547d\u540d\u89c4\u8303",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u4e00\u822c\u4f7f\u7528\u4e1a\u52a1\u540d(\u6216\u6570\u636e\u5e93\u540d)\u4e3a\u524d\u7f00\uff0c\u7528\u5192\u53f7\u5206\u9694\uff0c\u4f8b\u5982\uff0c\u4e1a\u52a1\u540d:\u8868\u540d:id\u3002"),(0,n.kt)("li",{parentName:"ul"},"\u4f8b\u5982\uff1ashop:usr:msg_code\uff08\u7535\u5546:\u7528\u6237:\u9a8c\u8bc1\u7801\uff09"))),(0,n.kt)("li",{parentName:"ul"},"\u63a7\u5236key\u540d\u79f0\u7684\u957f\u5ea6\uff0c\u4e0d\u8981\u4f7f\u7528\u8fc7\u957f\u7684key",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5728\u4fdd\u8bc1\u8bed\u4e49\u6e05\u6670\u7684\u60c5\u51b5\u4e0b\uff0c\u5c3d\u91cf\u51cf\u5c11Key\u7684\u957f\u5ea6\u3002\u6709\u4e9b\u5e38\u7528\u5355\u8bcd\u53ef\u4f7f\u7528\u7f29\u5199\uff0c\u4f8b\u5982\uff0cuser\u7f29\u5199\u4e3au\uff0cmessages\u7f29\u5199\u4e3amsg\u3002"))),(0,n.kt)("li",{parentName:"ul"},"\u540d\u79f0\u4e2d\u4e0d\u8981\u5305\u542b\u7279\u6b8a\u5b57\u7b26",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"\u5305\u542b\u7a7a\u683c\u3001\u5355\u53cc\u5f15\u53f7\u4ee5\u53ca\u5176\u4ed6\u8f6c\u4e49\u5b57\u7b26")))),(0,n.kt)("h3",{id:"6\u6027\u80fd\u6307\u6807\u76d1\u63a7"},"6\u3001\u6027\u80fd\u6307\u6807\u76d1\u63a7"),(0,n.kt)("p",null,"redis\u4e2d\u7684\u76d1\u63a7\u6307\u6807\u5982\u4e0b\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u6027\u80fd\u6307\u6807\uff1aPerformance")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u54cd\u5e94\u8bf7\u6c42\u7684\u5e73\u5747\u65f6\u95f4:"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"latency\n")),(0,n.kt)("p",{parentName:"blockquote"},"\u5e73\u5747\u6bcf\u79d2\u5904\u7406\u8bf7\u6c42\u603b\u6570"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"instantaneous_ops_per_sec\n")),(0,n.kt)("p",{parentName:"blockquote"},"\u7f13\u5b58\u67e5\u8be2\u547d\u4e2d\u7387\uff08\u901a\u8fc7\u67e5\u8be2\u603b\u6b21\u6570\u4e0e\u67e5\u8be2\u5f97\u5230\u975enil\u6570\u636e\u603b\u6b21\u6570\u8ba1\u7b97\u800c\u6765\uff09"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"hit_rate(calculated)\n"))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u5185\u5b58\u6307\u6807\uff1aMemory")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u5f53\u524d\u5185\u5b58\u4f7f\u7528\u91cf"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"used_memory\n")),(0,n.kt)("p",{parentName:"blockquote"},"\u5185\u5b58\u788e\u7247\u7387\uff08\u5173\u7cfb\u5230\u662f\u5426\u8fdb\u884c\u788e\u7247\u6574\u7406\uff09"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"mem_fragmentation_ratio\n")),(0,n.kt)("p",{parentName:"blockquote"},"\u4e3a\u907f\u514d\u5185\u5b58\u6ea2\u51fa\u5220\u9664\u7684key\u7684\u603b\u6570\u91cf"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"evicted_keys\n")),(0,n.kt)("p",{parentName:"blockquote"},"\u57fa\u4e8e\u963b\u585e\u64cd\u4f5c\uff08BLPOP\u7b49\uff09\u5f71\u54cd\u7684\u5ba2\u6237\u7aef\u6570\u91cf"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"blocked_clients\n"))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u57fa\u672c\u6d3b\u52a8\u6307\u6807\uff1aBasic_activity")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u5f53\u524d\u5ba2\u6237\u7aef\u8fde\u63a5\u603b\u6570"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"connected_clients\n")),(0,n.kt)("p",{parentName:"blockquote"},"\u5f53\u524d\u8fde\u63a5slave\u603b\u6570"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"connected_slaves\n")),(0,n.kt)("p",{parentName:"blockquote"},"\u6700\u540e\u4e00\u6b21\u4e3b\u4ece\u4fe1\u606f\u4ea4\u6362\u8ddd\u73b0\u5728\u7684\u79d2"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"master_last_io_seconds_ago\n")),(0,n.kt)("p",{parentName:"blockquote"},"key\u7684\u603b\u6570"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"keyspace\n"))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u6301\u4e45\u6027\u6307\u6807\uff1aPersistence")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u5f53\u524d\u670d\u52a1\u5668\u6700\u540e\u4e00\u6b21RDB\u6301\u4e45\u5316\u7684\u65f6\u95f4"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"rdb_last_save_time\n")),(0,n.kt)("p",{parentName:"blockquote"},"\u5f53\u524d\u670d\u52a1\u5668\u6700\u540e\u4e00\u6b21RDB\u6301\u4e45\u5316\u540e\u6570\u636e\u53d8\u5316\u603b\u91cf"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"rdb_changes_since_last_save\n"))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u9519\u8bef\u6307\u6807\uff1aError")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u88ab\u62d2\u7edd\u8fde\u63a5\u7684\u5ba2\u6237\u7aef\u603b\u6570\uff08\u57fa\u4e8e\u8fbe\u5230\u6700\u5927\u8fde\u63a5\u503c\u7684\u56e0\u7d20\uff09"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"rejected_connections\n")),(0,n.kt)("p",{parentName:"blockquote"},"key\u672a\u547d\u4e2d\u7684\u603b\u6b21\u6570"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"keyspace_misses\n")),(0,n.kt)("p",{parentName:"blockquote"},"\u4e3b\u4ece\u65ad\u5f00\u7684\u79d2\u6570"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"master_link_down_since_seconds\n"))),(0,n.kt)("p",null,"\u8981\u5bf9redis\u7684\u76f8\u5173\u6307\u6807\u8fdb\u884c\u76d1\u63a7\uff0c\u6211\u4eec\u53ef\u4ee5\u91c7\u7528\u4e00\u4e9b\u7528\u5177\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"CloudInsight Redis"),(0,n.kt)("li",{parentName:"ul"},"Prometheus"),(0,n.kt)("li",{parentName:"ul"},"Redis-stat"),(0,n.kt)("li",{parentName:"ul"},"Redis-faina"),(0,n.kt)("li",{parentName:"ul"},"RedisLive"),(0,n.kt)("li",{parentName:"ul"},"zabbix")),(0,n.kt)("p",null,"\u4e5f\u6709\u4e00\u4e9b\u547d\u4ee4\u5de5\u5177\uff1a"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"benchmark")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u6d4b\u8bd5\u5f53\u524d\u670d\u52a1\u5668\u7684\u5e76\u53d1\u6027\u80fd"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"redis-benchmark [-h ] [-p ] [-c ] [-n <requests]> [-k ]\n")),(0,n.kt)("p",{parentName:"blockquote"},"\u8303\u4f8b1\uff1a50\u4e2a\u8fde\u63a5\uff0c10000\u6b21\u8bf7\u6c42\u5bf9\u5e94\u7684\u6027\u80fd"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"redis-benchmark\n")),(0,n.kt)("p",{parentName:"blockquote"},"\u8303\u4f8b2\uff1a100\u4e2a\u8fde\u63a5\uff0c5000\u6b21\u8bf7\u6c42\u5bf9\u5e94\u7684\u6027\u80fd"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"redis-benchmark -c 100 -n 5000\n")),(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/29-ff859b17.png",alt:"img"}))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"redis-cli"),(0,n.kt)("p",{parentName:"li"},"   monitor\uff1a\u542f\u52a8\u670d\u52a1\u5668\u8c03\u8bd5\u4fe1\u606f"))),(0,n.kt)("blockquote",null,(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"monitor\n"))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"slowlog\uff1a\u6162\u65e5\u5fd7\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u83b7\u53d6\u6162\u67e5\u8be2\u65e5\u5fd7"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"slowlog [operator]\n")),(0,n.kt)("p",{parentName:"blockquote"}," get \uff1a\u83b7\u53d6\u6162\u67e5\u8be2\u65e5\u5fd7\u4fe1\u606f"),(0,n.kt)("p",{parentName:"blockquote"}," len \uff1a\u83b7\u53d6\u6162\u67e5\u8be2\u65e5\u5fd7\u6761\u76ee\u6570"),(0,n.kt)("p",{parentName:"blockquote"}," reset \uff1a\u91cd\u7f6e\u6162\u67e5\u8be2\u65e5\u5fd7"),(0,n.kt)("p",{parentName:"blockquote"},"\u76f8\u5173\u914d\u7f6e"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-properties"},"slowlog-log-slower-than 1000 #\u8bbe\u7f6e\u6162\u67e5\u8be2\u7684\u65f6\u95f4\u4e0b\u7ebf\uff0c\u5355\u4f4d\uff1a\u5fae\u5999\nslowlog-max-len 100 #\u8bbe\u7f6e\u6162\u67e5\u8be2\u547d\u4ee4\u5bf9\u5e94\u7684\u65e5\u5fd7\u663e\u793a\u957f\u5ea6\uff0c\u5355\u4f4d\uff1a\u547d\u4ee4\u6570\n"))),(0,n.kt)("h2",{id:"\u7b2c\u516b\u7ae0-\u5e38\u89c1\u95ee\u9898"},"\u7b2c\u516b\u7ae0 \u5e38\u89c1\u95ee\u9898"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"make: cc\uff1a\u547d\u4ee4\u672a\u627e\u5230\uff0cmake: *** ","[adlist.o]"," \u9519\u8bef 127")),(0,n.kt)("p",null,"\u89e3\u51b3\u65b9\u6cd5\uff1a\u5b89\u88c5gcc\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"yum install gcc\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Redis\u7f16\u8bd1\u9519\u8befKilling still running Redis server 4966")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"Killing still  running Redis server 4966   Killing still running Redis server 4971   Killing still running Redis server 4976   Killing still running Redis server 4978   Killing still running Redis server 4980   Killing still running Redis server 4983   Killing still running Redis server 4990   Killing still running Redis server 4991   Killing still running Redis server 4998   Killing still running Redis server 5001   Killing still running Redis server 5014   Killing still running Redis server 5134   Killing still running Redis server 5187   Killing still running Redis server 5208   Killing still running Redis server 5224   Killing still running Redis server 5253   Killing still running Redis server 5265   make[1]: *** [test] Error 1   make[1]: Leaving directory  `/opt/redis/redis-6.2.6/src'   make: *** [test] Error 2 \n")),(0,n.kt)("p",null,"\u89e3\u51b3\u65b9\u6848\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"  vim  tests/integration/replication-2.tc    \n")),(0,n.kt)("p",null,"\u5c06after 1000\u4fee\u6539\u4e3aafter 10000"),(0,n.kt)("p",null,"after\u662ftcl\u811a\u672c\u4e2d\u7684\u547d\u4ee4\uff0c\u8868\u793a\u5ef6\u8fdf\u7a0b\u5e8f\u6267\u884c\u6216\u8005\u5728\u540e\u53f0\u6267\u884c\u547d\u4ee4\u3002"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"MISCONF Redis is configured to save RDB snapshots")),(0,n.kt)("p",null,"\u5f02\u5e38\u4fe1\u606f\uff1a"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"redis.clients.jedis.exceptions.JedisDataException:  MISCONF Redis is configured to save RDB snapshots, but is currently not able  to persist on disk. Commands that may modify the data set are disabled.  Please check Redis logs for details about the error.  \n")),(0,n.kt)("p",null,"\u89e3\u51b3\u65b9\u6848\uff1a"),(0,n.kt)("p",null,"\u56e0\u4e3a\u5f3a\u5236\u5173\u95edRedis\u5feb\u7167\u5bfc\u81f4\u4e0d\u80fd\u6301\u4e45\u5316\u3002\u53ef\u4ee5\u4f7f\u7528kill -9\u518d\u6b21\u5f3a\u5236\u5173\u95ed\u6389redis\uff0c\u7136\u540e\u5728\u91cd\u65b0\u542f\u52a8\u3002"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Connection error: Connection refused")),(0,n.kt)("p",null,"\u4fee\u6539\u914d\u7f6e\u6587\u4ef6/etc/redis.conf\uff0c\u5e76\u6ce8\u91ca\u6389bind 127.0.0.1\u8fd9\u4e00\u884c"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Connection: Connection error: The remote host closed the connection")),(0,n.kt)("p",null,"\u4fee\u6539\u914d\u7f6e\u6587\u4ef6/etc/redis.conf\uff0c\u5c06protected-mode\u4e3ano\u3002"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Node 192.168.200.131:7002 is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.")),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"\u5148\u5c06redis \u8fdb\u7a0b\u5e72\u6389 ps -ef | grep redis kill pid"),(0,n.kt)("li",{parentName:"ol"},"\u5c06\u6bcf\u4e2a\u8282\u70b9\u4e0baof\u3001rdb\u3001nodes.conf\u672c\u5730\u5907\u4efd\u6587\u4ef6\u5220\u9664,redis.conf appendfilename \uff1b"),(0,n.kt)("li",{parentName:"ol"},"\u4e4b\u540e\u518d\u6267\u884c\u811a\u672c\uff0c\u6210\u529f\u6267\u884c\uff1b")))}m.isMDXComponent=!0}}]);