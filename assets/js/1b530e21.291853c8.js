"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[360],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>v});var r=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var a=r.createContext({}),c=function(e){var n=r.useContext(a),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},p=function(e){var n=c(e.components);return r.createElement(a.Provider,{value:n},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,o=e.originalType,a=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=c(t),d=i,v=m["".concat(a,".").concat(d)]||m[d]||u[d]||o;return t?r.createElement(v,l(l({ref:n},p),{},{components:t})):r.createElement(v,l({ref:n},p))}));function v(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var o=t.length,l=new Array(o);l[0]=d;var s={};for(var a in n)hasOwnProperty.call(n,a)&&(s[a]=n[a]);s.originalType=e,s[m]="string"==typeof e?e:i,l[1]=s;for(var c=2;c<o;c++)l[c]=t[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},190:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var r=t(7462),i=(t(7294),t(3905));const o={},l=void 0,s={unversionedId:"Interview/vue/\u957f\u5217\u8868\u4f18\u5316",id:"Interview/vue/\u957f\u5217\u8868\u4f18\u5316",title:"\u957f\u5217\u8868\u4f18\u5316",description:"vue-virtual-scroller",source:"@site/docs/Interview/vue/13.\u957f\u5217\u8868\u4f18\u5316.md",sourceDirName:"Interview/vue",slug:"/Interview/vue/\u957f\u5217\u8868\u4f18\u5316",permalink:"/docs/Interview/vue/\u957f\u5217\u8868\u4f18\u5316",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Interview/vue/13.\u957f\u5217\u8868\u4f18\u5316.md",tags:[],version:"current",sidebarPosition:13,frontMatter:{},sidebar:"study",previous:{title:"keep-alive",permalink:"/docs/Interview/vue/keep-alive"},next:{title:"\u6a21\u5f0f\u548c\u73af\u5883\u53d8\u91cf",permalink:"/docs/Interview/vue/\u6a21\u5f0f\u548c\u73af\u5883\u53d8\u91cf"}},a={},c=[],p={toc:c};function m(e){let{components:n,...t}=e;return(0,i.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/Akryum/vue-virtual-scroller"},"vue-virtual-scroller"),"\n\u8fd9\u4e2a\u4f7f\u7528",(0,i.kt)("inlineCode",{parentName:"p"},"RecycleScroller"),"\u6027\u80fd\u66f4\u4f73"),(0,i.kt)("p",null,"\u601d\u8def\uff1a\u53ea\u6709\u53ef\u89c6\u533a\u57df\u7684\u6570\u636e\u653e\u5728\u6e32\u67d3\u6c60\u4e2d\uff0c\u5e76\u4f7f\u7528\u504f\u79fb\u91cf\u8fdb\u884c\u6570\u636e\u7684\u6eda\u52a8\u3002\u8fd9\u6837\u5373\u4f7f\u67091000000\u6761\u6570\u636e\uff0c\u6211\u4eec\u771f\u5b9e\u6e32\u67d3\u53ea\u6709\u53ef\u89c6\u533a\u57df\u7684\u51e0\u5341\u6761\u6570\u636e\u3002\u8fbe\u5230\u6e32\u67d3\u6548\u7387\u7684\u63d0\u5347\u3002"),(0,i.kt)("p",null,"\u6211\u4eec\u4e4b\u524d\u6709\u4f7f\u7528\u8fc7\u8fd9\u4e2a\u61d2\u52a0\u8f7d\uff0c\u6211\u4eec\u4f7f\u7528\u61d2\u52a0\u8f7d\u7684\u540c\u65f6\u4e5f\u662f\u53ef\u4ee5\u7528\u8fd9\u4e2a\u65b9\u5f0f\u6765\u8fdb\u884c\u4f18\u5316\u3002"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"App.vue")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <div id="app">\n    <RecycleScroller\n      :items="items"\n      :itemSize="54"\n      class="scroller"\n      v-slot="{ item }"\n    >\n      <ListItem :item="item" />\n    </RecycleScroller>\n  </div>\n</template>\n\n<script>\nimport ListItem from \'./components/ListItem.vue\';\n// import RecycleScroller from \'./components/RecycleScroller\';\nimport { RecycleScroller } from \'vue-virtual-scroller\';//\u4f7f\u7528\u7b2c\u4e09\u65b9\u63d2\u4ef6\nimport \'vue-virtual-scroller/dist/vue-virtual-scroller.css\';\nvar items = [];\nfor (var i = 0; i < 10000; i++) {\n  items.push({\n    id: i + 1,\n    count: i + 1,\n  });\n}\nexport default {\n  components: { ListItem, RecycleScroller },\n  data() {\n    return {\n      items,\n    };\n  },\n};\n<\/script>\n\n<style>\n#app {\n  width: 100%;\n  margin: 0 auto;\n}\n.scroller {\n  width: 500px;\n  margin: 0 auto;\n  height: 500px;\n}\n</style>\n\n')),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"components/RecycleScroller.vue")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <div class="recycle-scroller-container" @scroll="setPool" ref="container">\n    <div class="recycle-scroller-wrapper" :style="{ height: `${totalSize}px` }">\n      <div\n        class="recycle-scroller-item"\n        v-for="poolItem in pool"\n        :key="poolItem.item[keyField]"\n        :style="{\n          transform: `translateY(${poolItem.position}px)`,\n        }"\n      >\n        <slot :item="poolItem.item"></slot>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nvar prev = 10,\n  next = 10;\nexport default {\n  props: {\n    // \u6570\u636e\u7684\u6570\u7ec4\n    items: {\n      type: Array,\n      default: () => [],\n    },\n    // \u6bcf\u6761\u6570\u636e\u7684\u9ad8\u5ea6\n    itemSize: {\n      type: Number,\n      default: 0,\n    },\n    keyField: {\n      // \u7ed9\u6211\u7684items\u6570\u7ec4\u4e2d\uff0c\u6bcf\u4e2a\u5bf9\u8c61\u54ea\u4e2a\u5c5e\u6027\u4ee3\u8868\u552f\u4e00\u4e14\u7a33\u5b9a\u7684\u7f16\u53f7\n      type: String,\n      default: \'id\',\n    },\n  },\n  data() {\n    return {\n      // { item: \u539f\u59cb\u6570\u636e, position: \u8be5\u6570\u636e\u5bf9\u5e94\u7684\u504f\u79fb\u4f4d\u7f6e }\n      pool: [], // \u6e32\u67d3\u6c60\uff0c\u4fdd\u5b58\u5f53\u524d\u9700\u8981\u6e32\u67d3\u7684\u6570\u636e\n    };\n  },\n  mounted() {\n    this.setPool();\n    window.vm = this;\n  },\n  computed: {\n    totalSize() {\n      return this.items.length * this.itemSize; // \u603b\u9ad8\u5ea6\n    },\n  },\n  methods: {\n    setPool() {\n      const scrollTop = this.$refs.container.scrollTop;\n      const height = this.$refs.container.clientHeight;\n      let startIndex = Math.floor(scrollTop / this.itemSize);\n      let endIndex = Math.ceil((scrollTop + height) / this.itemSize);\n      //\u6b64\u5904\u662f\u8bbe\u7f6e\u51cf\u5f31\u767d\u677f\u7684\u51fa\u73b0\uff0c\u6211\u4eec\u5c06\u6e32\u67d3\u6c60\u62c9\u5927\u4e00\u4e9b\u3002\n      startIndex -= prev;\n      if (startIndex < 0) {\n        startIndex = 0;\n      }\n      endIndex += next;\n      \n      const startPos = startIndex * this.itemSize;\n      this.pool = this.items.slice(startIndex, endIndex).map((it, i) => ({\n        item: it,\n        position: startPos + i * this.itemSize,\n      }));\n    },\n  },\n};\n<\/script>\n\n<style>\n.recycle-scroller-container {\n  overflow: auto;\n}\n.recycle-scroller-wrapper {\n  position: relative;\n}\n.recycle-scroller-item {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n}\n</style>\n\n')),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"components/ListItem.vue")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-vue"},'<template>\n  <div class="list-item">\n    <span>id{{ item.id }}</span>\n    <span>name{{ item.count }}</span>\n    <span>age{{ item.count }}</span>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    item: Object,\n  },\n};\n<\/script>\n\n<style scoped>\n.list-item {\n  text-align: center;\n  height: 54px;\n  padding: 1em;\n  box-sizing: border-box;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  box-shadow: 0 0 3px rgba(0, 0, 0, 0.5);\n}\n</style>\n')))}m.isMDXComponent=!0}}]);