"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2271],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>d});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var o=a.createContext({}),p=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},m=function(e){var t=p(e.components);return a.createElement(o.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},k=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,o=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),u=p(n),k=l,d=u["".concat(o,".").concat(k)]||u[k]||c[k]||r;return n?a.createElement(d,i(i({ref:t},m),{},{components:n})):a.createElement(d,i({ref:t},m))}));function d(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,i=new Array(r);i[0]=k;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s[u]="string"==typeof e?e:l,i[1]=s;for(var p=2;p<r;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}k.displayName="MDXCreateElement"},8659:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var a=n(7462),l=(n(7294),n(3905));const r={},i="Node\u6838\u5fc3",s={unversionedId:"nodejs/nodejs\u6838\u5fc3",id:"nodejs/nodejs\u6838\u5fc3",title:"Node\u6838\u5fc3",description:"1.Node\u6982\u8ff0",source:"@site/docs/nodejs/1.nodejs\u6838\u5fc3.md",sourceDirName:"nodejs",slug:"/nodejs/nodejs\u6838\u5fc3",permalink:"/docs/nodejs/nodejs\u6838\u5fc3",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/nodejs/1.nodejs\u6838\u5fc3.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"nodejs",previous:{title:"NodeJS",permalink:"/docs/nodejs"},next:{title:"MySql",permalink:"/docs/nodejs/mysql"}},o={},p=[{value:"1.Node\u6982\u8ff0",id:"1node\u6982\u8ff0",level:2},{value:"\u4ec0\u4e48\u662fNode",id:"\u4ec0\u4e48\u662fnode",level:3},{value:"\u6211\u4eec\u901a\u5e38\u7528Node\u5e72\u4ec0\u4e48",id:"\u6211\u4eec\u901a\u5e38\u7528node\u5e72\u4ec0\u4e48",level:3},{value:"2.\u5168\u5c40\u5bf9\u8c61",id:"2\u5168\u5c40\u5bf9\u8c61",level:2},{value:"\u771f\u6b63\u7684\u5168\u5c40\u5bf9\u8c61",id:"\u771f\u6b63\u7684\u5168\u5c40\u5bf9\u8c61",level:3},{value:"global",id:"global",level:4},{value:"console",id:"console",level:4},{value:"clearInterval\u3001setInterval",id:"clearintervalsetinterval",level:4},{value:"clearTimeout\u3001setTimeout",id:"cleartimeoutsettimeout",level:4},{value:"setImmediate",id:"setimmediate",level:4},{value:"process",id:"process",level:4},{value:"Buffer",id:"buffer",level:4},{value:"\u5e94\u7528\u573a\u666f",id:"\u5e94\u7528\u573a\u666f",level:5},{value:"<strong>Buffer \u5e38\u7528\u65b9\u6cd5</strong>",id:"buffer-\u5e38\u7528\u65b9\u6cd5",level:5},{value:"\u6a21\u5757\u7ea7\u522b\u7684\u5168\u5c40\u5bf9\u8c61",id:"\u6a21\u5757\u7ea7\u522b\u7684\u5168\u5c40\u5bf9\u8c61",level:3},{value:"__dirname",id:"__dirname",level:4},{value:"__filename",id:"__filename",level:4},{value:"exports",id:"exports",level:4},{value:"module",id:"module",level:4},{value:"require",id:"require",level:4},{value:"3.Node\u7684\u6a21\u5757\u5316\u7ec6\u8282",id:"3node\u7684\u6a21\u5757\u5316\u7ec6\u8282",level:2},{value:"\u6a21\u5757\u5316\u6982\u5ff5",id:"\u6a21\u5757\u5316\u6982\u5ff5",level:3},{value:"Node.js \u4e2d\u6a21\u5757\u7684\u5206\u7c7b",id:"nodejs-\u4e2d\u6a21\u5757\u7684\u5206\u7c7b",level:3},{value:"Node.js \u4e2d\u7684\u6a21\u5757\u4f5c\u7528\u57df",id:"nodejs-\u4e2d\u7684\u6a21\u5757\u4f5c\u7528\u57df",level:3},{value:"\u6a21\u5757\u4f5c\u7528\u57df\u7684\u6210\u5458",id:"\u6a21\u5757\u4f5c\u7528\u57df\u7684\u6210\u5458",level:3},{value:"CommonJS \u6a21\u5757\u5316\u89c4\u8303",id:"commonjs-\u6a21\u5757\u5316\u89c4\u8303",level:3},{value:"\u6a21\u5757\u52a0\u8f7d\u673a\u5236",id:"\u6a21\u5757\u52a0\u8f7d\u673a\u5236",level:3},{value:"\u5185\u7f6e\u6a21\u5757\u52a0\u8f7d",id:"\u5185\u7f6e\u6a21\u5757\u52a0\u8f7d",level:4},{value:"\u6a21\u5757\u7684\u67e5\u627e",id:"\u6a21\u5757\u7684\u67e5\u627e",level:3},{value:"4.Node\u4e2d\u7684es\u6a21\u5757\u5316",id:"4node\u4e2d\u7684es\u6a21\u5757\u5316",level:2},{value:"5.\u57fa\u672c\u5185\u7f6e\u6a21\u5757",id:"5\u57fa\u672c\u5185\u7f6e\u6a21\u5757",level:2},{value:"os",id:"os",level:3},{value:"path",id:"path",level:3},{value:"url",id:"url",level:3},{value:"util",id:"util",level:3},{value:"6. \u6587\u4ef6I/O",id:"6-\u6587\u4ef6io",level:2},{value:"\u6807\u8bc6\u4f4d",id:"\u6807\u8bc6\u4f4d",level:3},{value:"fs.readFile",id:"fsreadfile",level:3},{value:"fs.writeFile",id:"fswritefile",level:3},{value:"fs.appendFile",id:"fsappendfile",level:3},{value:"appendFileSync",id:"appendfilesync",level:4},{value:"appendFile",id:"appendfile",level:4},{value:"fs.copyFile",id:"fscopyfile",level:3},{value:"copyFileSync",id:"copyfilesync",level:4},{value:"copyFile",id:"copyfile",level:4},{value:"\u624b\u5199\u590d\u5236\u6587\u4ef6",id:"\u624b\u5199\u590d\u5236\u6587\u4ef6",level:4},{value:"fs.stat",id:"fsstat",level:3},{value:"fs.readdir",id:"fsreaddir",level:3},{value:"fs.mkdir",id:"fsmkdir",level:3},{value:"mkdirSync",id:"mkdirsync",level:4},{value:"mkdir",id:"mkdir",level:4},{value:"\u624b\u5199exist",id:"\u624b\u5199exist",level:3},{value:"file\u5bf9\u8c61\u7684\u5c01\u88c5\u53ca\u4e00\u4e9b\u65b9\u6cd5",id:"file\u5bf9\u8c61\u7684\u5c01\u88c5\u53ca\u4e00\u4e9b\u65b9\u6cd5",level:3},{value:"7. \u6587\u4ef6\u6d41",id:"7-\u6587\u4ef6\u6d41",level:2},{value:"\u4ec0\u4e48\u662f\u6d41",id:"\u4ec0\u4e48\u662f\u6d41",level:3},{value:"\u4e3a\u4ec0\u4e48\u9700\u8981\u6d41",id:"\u4e3a\u4ec0\u4e48\u9700\u8981\u6d41",level:3},{value:"\u4ec0\u4e48\u662f\u6587\u4ef6\u6d41",id:"\u4ec0\u4e48\u662f\u6587\u4ef6\u6d41",level:3},{value:"\u6587\u4ef6\u6d41\u7684\u521b\u5efa",id:"\u6587\u4ef6\u6d41\u7684\u521b\u5efa",level:3},{value:"fs.createReadStream(path, options)",id:"fscreatereadstreampath-options",level:4},{value:"fs.createWriteStream(path, options)",id:"fscreatewritestreampath-options",level:4},{value:"rs.pipe(ws)",id:"rspipews",level:3},{value:"\u590d\u5236\u6587\u4ef6",id:"\u590d\u5236\u6587\u4ef6",level:3},{value:"8. net\u6a21\u5757",id:"8-net\u6a21\u5757",level:2},{value:"\u56de\u987ehttp\u8bf7\u6c42",id:"\u56de\u987ehttp\u8bf7\u6c42",level:3},{value:"net\u6a21\u5757\u80fd\u5e72\u4ec0\u4e48",id:"net\u6a21\u5757\u80fd\u5e72\u4ec0\u4e48",level:3},{value:"9.HTTP\u6a21\u5757",id:"9http\u6a21\u5757",level:2},{value:"\u521b\u5efa\u5ba2\u6237\u7aef\u8bf7\u6c42\u63a5\u53e3",id:"\u521b\u5efa\u5ba2\u6237\u7aef\u8bf7\u6c42\u63a5\u53e3",level:2},{value:"\u521b\u5efa\u57fa\u672c Web \u670d\u52a1\u5668",id:"\u521b\u5efa\u57fa\u672c-web-\u670d\u52a1\u5668",level:3},{value:"\u5b9e\u73b0\u7b80\u964b\u8def\u7531\u6548\u679c",id:"\u5b9e\u73b0\u7b80\u964b\u8def\u7531\u6548\u679c",level:3},{value:"\u8bfb\u53d6\u6587\u4ef6\u7684\u8def\u7531\u6548\u679c",id:"\u8bfb\u53d6\u6587\u4ef6\u7684\u8def\u7531\u6548\u679c",level:3},{value:"10.HTTPS\u6a21\u5757",id:"10https\u6a21\u5757",level:2},{value:"\u670d\u52a1\u5668\u7ed3\u6784",id:"\u670d\u52a1\u5668\u7ed3\u6784",level:3},{value:"\u8bc1\u4e66\u51c6\u5907",id:"\u8bc1\u4e66\u51c6\u5907",level:3},{value:"\u65b9\u5f0f1\uff1a\u7f51\u4e0a\u8d2d\u4e70\u6743\u5a01\u673a\u6784\u8bc1\u4e66",id:"\u65b9\u5f0f1\u7f51\u4e0a\u8d2d\u4e70\u6743\u5a01\u673a\u6784\u8bc1\u4e66",level:4},{value:"\u65b9\u68482\uff1a\u672c\u5730\u4ea7\u751f\u8bc1\u4e66",id:"\u65b9\u68482\u672c\u5730\u4ea7\u751f\u8bc1\u4e66",level:4},{value:"\u5177\u4f53\u65b9\u6cd5",id:"\u5177\u4f53\u65b9\u6cd5",level:3},{value:"\u5b89\u88c5openssl",id:"\u5b89\u88c5openssl",level:4},{value:"\u751f\u6210CA\u79c1\u94a5",id:"\u751f\u6210ca\u79c1\u94a5",level:4},{value:"\u751f\u6210CA\u516c\u94a5\uff08\u8bc1\u4e66\u8bf7\u6c42\uff09",id:"\u751f\u6210ca\u516c\u94a5\u8bc1\u4e66\u8bf7\u6c42",level:4},{value:"\u751f\u6210CA\u8bc1\u4e66",id:"\u751f\u6210ca\u8bc1\u4e66",level:4},{value:"\u751f\u6210\u670d\u52a1\u5668\u79c1\u94a5",id:"\u751f\u6210\u670d\u52a1\u5668\u79c1\u94a5",level:4},{value:"\u751f\u6210\u670d\u52a1\u5668\u516c\u94a5",id:"\u751f\u6210\u670d\u52a1\u5668\u516c\u94a5",level:4},{value:"\u751f\u6210\u670d\u52a1\u5668\u8bc1\u4e66",id:"\u751f\u6210\u670d\u52a1\u5668\u8bc1\u4e66",level:4},{value:"\u6a21\u62df",id:"\u6a21\u62df",level:4},{value:"11.node\u751f\u547d\u5468\u671f",id:"11node\u751f\u547d\u5468\u671f",level:2},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:3},{value:"\u9762\u8bd5\u9898",id:"\u9762\u8bd5\u9898",level:3},{value:"\u98981",id:"\u98981",level:4},{value:"\u98982",id:"\u98982",level:4},{value:"\u98983",id:"\u98983",level:4},{value:"12. \u6269\u5c55EventEmitter",id:"12-\u6269\u5c55eventemitter",level:2},{value:"\u5c01\u88c5\u7f51\u7edc\u8bf7\u6c42\u6a21\u5757",id:"\u5c01\u88c5\u7f51\u7edc\u8bf7\u6c42\u6a21\u5757",level:3}],m={toc:p};function u(e){let{components:t,...n}=e;return(0,l.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"node\u6838\u5fc3"},"Node\u6838\u5fc3"),(0,l.kt)("h2",{id:"1node\u6982\u8ff0"},"1.Node\u6982\u8ff0"),(0,l.kt)("h3",{id:"\u4ec0\u4e48\u662fnode"},"\u4ec0\u4e48\u662fNode"),(0,l.kt)("p",null,"\u5b98\u7f51\uff1a",(0,l.kt)("a",{parentName:"p",href:"https://nodejs.org/en/"},"https://nodejs.org/en/")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Node\u662f\u4e00\u4e2aJS\u7684\u8fd0\u884c\u73af\u5883"),(0,l.kt)("li",{parentName:"ul"},"\u5b83\u6bd4\u6d4f\u89c8\u5668\u62e5\u6709\u66f4\u591a\u7684\u80fd\u529b",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6d4f\u89c8\u5668\u4e2d\u7684JS",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"web api \u63d0\u4f9b\u4e86\u64cd\u4f5c\u6d4f\u89c8\u5668\u7a97\u53e3\u548c\u9875\u9762\u7684\u80fd\u529b"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("img",{parentName:"li",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgs1664244887463.png",alt:"1664244887463"})),(0,l.kt)("li",{parentName:"ul"},"\u8fd9\u79cd\u80fd\u529b\u662f\u975e\u5e38\u6709\u9650\u7684"))),(0,l.kt)("li",{parentName:"ul"},"Node\u4e2d\u7684JS",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("img",{parentName:"li",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221030185803327.png",alt:"image-20221030185803327"})),(0,l.kt)("li",{parentName:"ul"},"Node Api \u51e0\u4e4e\u63d0\u4f9b\u4e86\u6240\u6709\u80fd\u505a\u7684\u4e8b"))),(0,l.kt)("li",{parentName:"ul"},"\u5206\u5c42\u7ed3\u6784\u5bf9\u6bd4\u56fe",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6d4f\u89c8\u5668\u63d0\u4f9b\u4e86\u6709\u9650\u7684\u80fd\u529b\uff0cJS\u53ea\u80fd\u4f7f\u7528\u6d4f\u89c8\u5668\u63d0\u4f9b\u7684\u529f\u80fd\u505a\u6709\u9650\u7684\u64cd\u4f5c"),(0,l.kt)("li",{parentName:"ul"},"Node\u63d0\u4f9b\u4e86\u5b8c\u6574\u7684\u63a7\u5236\u8ba1\u7b97\u673a\u7684\u80fd\u529b\uff0cNodeJS\u51e0\u4e4e\u53ef\u4ee5\u901a\u8fc7Node\u63d0\u4f9b\u7684\u63a5\u53e3\uff0c\u5b9e\u73b0\u5bf9\u6574\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u7684\u63a7\u5236")))))),(0,l.kt)("h3",{id:"\u6211\u4eec\u901a\u5e38\u7528node\u5e72\u4ec0\u4e48"},"\u6211\u4eec\u901a\u5e38\u7528Node\u5e72\u4ec0\u4e48"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5f00\u53d1\u684c\u9762\u5e94\u7528\u7a0b\u5e8f"),(0,l.kt)("li",{parentName:"ul"},"\u5f00\u53d1\u670d\u52a1\u5668\u5e94\u7528\u7a0b\u5e8f",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u7ed3\u67841",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("img",{parentName:"li",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221030185820122.png",alt:"image-20221030185820122"})),(0,l.kt)("li",{parentName:"ul"},"\u8fd9\u79cd\u7ed3\u6784\u901a\u5e38\u5e94\u7528\u5728\u5fae\u578b\u7684\u7ad9\u70b9\u4e0a"),(0,l.kt)("li",{parentName:"ul"},"Node\u670d\u52a1\u5668\u8981\u5b8c\u6210\u8bf7\u6c42\u7684\u5904\u7406\u3001\u54cd\u5e94\u3001\u548c\u6570\u636e\u5e93\u4ea4\u4e92\u3001\u5404\u79cd\u4e1a+++++++++++++++++++++++++"),(0,l.kt)("li",{parentName:"ul"},"\u52a1\u903b\u8f91"))),(0,l.kt)("li",{parentName:"ul"},"\u7ed3\u67842",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("img",{parentName:"li",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221030185827635.png",alt:"image-20221030185827635"})),(0,l.kt)("li",{parentName:"ul"},"\u8fd9\u79cd\u7ed3\u6784\u975e\u5e38\u5e38\u89c1\uff0c\u5e94\u7528\u5728\u5404\u79cd\u89c4\u6a21\u7684\u7ad9\u70b9\u4e0a"),(0,l.kt)("li",{parentName:"ul"},"Node\u670d\u52a1\u5668\u4e0d\u505a\u4efb\u4f55\u4e0e\u4e1a\u52a1\u903b\u8f91\u6709\u5173\u7684\u4e8b\u60c5\u3002\u7edd\u5927\u90e8\u5206\u65f6\u5019\uff0c\u53ea\u662f\u7b80\u5355\u7684\u8f6c\u53d1\u8bf7\u6c42\u3002\u4f46\u53ef\u80fd\u4f1a\u6709\u4e00\u4e9b\u989d\u5916\u7684\u529f\u80fd")))))),(0,l.kt)("h2",{id:"2\u5168\u5c40\u5bf9\u8c61"},"2.\u5168\u5c40\u5bf9\u8c61"),(0,l.kt)("h3",{id:"\u771f\u6b63\u7684\u5168\u5c40\u5bf9\u8c61"},"\u771f\u6b63\u7684\u5168\u5c40\u5bf9\u8c61"),(0,l.kt)("h4",{id:"global"},"global"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221030185851929.png",alt:"image-20221030185851929"})),(0,l.kt)("h4",{id:"console"},"console"),(0,l.kt)("p",null,"\u7528\u6765\u6253\u5370",(0,l.kt)("inlineCode",{parentName:"p"},"stdout"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"stderr")),(0,l.kt)("p",null,"\u6700\u5e38\u7528\u7684\u8f93\u5165\u5185\u5bb9\u7684\u65b9\u5f0f\uff1aconsole.log"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'console.log("hello");\n')),(0,l.kt)("p",null,"\u6e05\u7a7a\u63a7\u5236\u53f0\uff1aconsole.clear"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"console.clear\n")),(0,l.kt)("p",null,"\u6253\u5370\u51fd\u6570\u7684\u8c03\u7528\u6808\uff1aconsole.trace"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"function test() {\n    demo();\n}\n\nfunction demo() {\n    foo();\n}\n\nfunction foo() {\n    console.trace();\n}\n\ntest();\n")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221030185907034.png",alt:"image-20221030185907034"})),(0,l.kt)("h4",{id:"clearintervalsetinterval"},"clearInterval\u3001setInterval"),(0,l.kt)("p",null,"\u8bbe\u7f6e\u5b9a\u65f6\u5668\u4e0e\u6e05\u9664\u5b9a\u65f6\u5668"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"setInterval(callback, delay[, ...args])\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"callback"),"\u6bcf",(0,l.kt)("inlineCode",{parentName:"p"},"delay"),"\u6beb\u79d2\u91cd\u590d\u6267\u884c\u4e00\u6b21"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"clearInterval"),"\u5219\u4e3a\u5bf9\u5e94\u53d1\u53d6\u6d88\u5b9a\u65f6\u5668\u7684\u65b9\u6cd5"),(0,l.kt)("h4",{id:"cleartimeoutsettimeout"},"clearTimeout\u3001setTimeout"),(0,l.kt)("p",null,"\u8bbe\u7f6e\u5ef6\u65f6\u5668\u4e0e\u6e05\u9664\u5ef6\u65f6\u5668"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"setTimeout(callback,delay[,...args])\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"callback"),"\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"delay"),"\u6beb\u79d2\u540e\u6267\u884c\u4e00\u6b21"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"clearTimeout"),"\u5219\u4e3a\u5bf9\u5e94\u53d6\u6d88\u5ef6\u65f6\u5668\u7684\u65b9\u6cd5"),(0,l.kt)("h4",{id:"setimmediate"},"setImmediate"),(0,l.kt)("p",null,"\u8054\u7cfb\u751f\u547d\u5468\u671f\u6211\u4eec\u77e5\u9053setImmediate\u662f\u5728checked\u68c0\u67e5\u9636\u6bb5\u4e2d\u7684\uff0c\u800csetTimeout\u662f\u5728timers\u6a21\u5757\u4e2d\u7684\u3002"),(0,l.kt)("h4",{id:"process"},"process"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"cwd()"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u8fd4\u56de\u5f53\u524dnodejs\u8fdb\u7a0b\u7684\u5de5\u4f5c\u76ee\u5f55"),(0,l.kt)("li",{parentName:"ul"},"\u7edd\u5bf9\u8def\u5f84"),(0,l.kt)("li",{parentName:"ul"},"\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"li"},"Node")," \u6a21\u5757 ",(0,l.kt)("inlineCode",{parentName:"li"},"A")," \u901a\u8fc7 NPM \u53d1\u5e03\uff0c\u9879\u76ee ",(0,l.kt)("inlineCode",{parentName:"li"},"B")," \u4e2d\u4f7f\u7528\u4e86\u6a21\u5757 ",(0,l.kt)("inlineCode",{parentName:"li"},"A"),"\u3002\u5728 ",(0,l.kt)("inlineCode",{parentName:"li"},"A")," \u4e2d\u9700\u8981\u64cd\u4f5c ",(0,l.kt)("inlineCode",{parentName:"li"},"B")," \u9879\u76ee\u4e0b\u7684\u6587\u4ef6\u65f6\uff0c\u5c31\u53ef\u4ee5\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"process.cwd()")," \u6765\u83b7\u53d6 ",(0,l.kt)("inlineCode",{parentName:"li"},"B")," \u9879\u76ee\u7684\u8def\u5f84"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"exit()"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5f3a\u5236\u9000\u51fa\u5f53\u524dnode\u8fdb\u7a0b"),(0,l.kt)("li",{parentName:"ul"},"\u53ef\u4f20\u5165\u9000\u51fa\u7801\uff0c0\u8868\u793a\u6210\u529f\u9000\u51fa\uff0c\u9ed8\u8ba4\u4e3a0"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"argv"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u83b7\u53d6\u547d\u4ee4\u4e2d\u7684\u6240\u6709\u53c2\u6570")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5728\u7ec8\u7aef\u901a\u8fc7 Node \u6267\u884c\u547d\u4ee4\u7684\u65f6\u5019\uff0c\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"p"},"process.argv")," \u53ef\u4ee5\u83b7\u53d6\u4f20\u5165\u7684\u547d\u4ee4\u884c\u53c2\u6570\uff0c\u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u6570\u7ec4\uff1a"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"0: Node \u8def\u5f84\uff08\u4e00\u822c\u7528\u4e0d\u5230\uff0c\u76f4\u63a5\u5ffd\u7565\uff09"),(0,l.kt)("li",{parentName:"ul"},"1: \u88ab\u6267\u884c\u7684 JS \u6587\u4ef6\u8def\u5f84\uff08\u4e00\u822c\u7528\u4e0d\u5230\uff0c\u76f4\u63a5\u5ffd\u7565\uff09"),(0,l.kt)("li",{parentName:"ul"},"2~n: \u771f\u5b9e\u4f20\u5165\u547d\u4ee4\u7684\u53c2\u6570")),(0,l.kt)("p",{parentName:"li"},"\u6240\u4ee5\uff0c\u6211\u4eec\u53ea\u8981\u4ece ",(0,l.kt)("inlineCode",{parentName:"p"},"process.argv[2]")," \u5f00\u59cb\u83b7\u53d6\u5c31\u597d\u4e86"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const args = process.argv.slice(2);\n"))))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"process.nextTick()"),(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("p",{parentName:"blockquote"},"process.nextTick() \u662f\u5fae\u4efb\u52a1")),(0,l.kt)("p",{parentName:"li"},"\u6211\u4eec\u77e5\u9053",(0,l.kt)("inlineCode",{parentName:"p"},"NodeJs"),"\u662f\u57fa\u4e8e\u4e8b\u4ef6\u8f6e\u8be2\uff0c\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u540c\u4e00\u65f6\u95f4\u53ea\u4f1a\u5904\u7406\u4e00\u4ef6\u4e8b\u60c5"),(0,l.kt)("p",{parentName:"li"},"\u5728\u8fd9\u79cd\u5904\u7406\u6a21\u5f0f\u4e0b\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"process.nextTick()"),"\u5c31\u662f\u5b9a\u4e49\u51fa\u4e00\u4e2a\u52a8\u4f5c\uff0c\u5e76\u4e14\u8ba9\u8fd9\u4e2a\u52a8\u4f5c\u5728\u4e0b\u4e00\u4e2a\u4e8b\u4ef6\u8f6e\u8be2\u7684\u65f6\u95f4\u70b9\u4e0a\u6267\u884c"),(0,l.kt)("p",{parentName:"li"},"\u4f8b\u5982\u4e0b\u9762\u4f8b\u5b50\u5c06\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"p"},"foo"),"\u51fd\u6570\u5728\u4e0b\u4e00\u4e2a\u65f6\u95f4\u70b9\u8c03\u7528"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"function foo() {\n    console.error('foo');\n}\n\nprocess.nextTick(foo);\nconsole.error('bar');\n")),(0,l.kt)("p",{parentName:"li"},"\u8f93\u51fa\u7ed3\u679c\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"bar"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"foo")),(0,l.kt)("p",{parentName:"li"},"\u867d\u7136\u4e0b\u8ff0\u65b9\u5f0f\u4e5f\u80fd\u5b9e\u73b0\u540c\u6837\u6548\u679c\uff1a"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"setTimeout(foo, 0);\nconsole.log('bar');\n")),(0,l.kt)("p",{parentName:"li"},"\u4e24\u8005\u533a\u522b\u5728\u4e8e\uff1a"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"process.nextTick()\u4f1a\u5728\u8fd9\u4e00\u6b21event loop\u7684call stack\u6e05\u7a7a\u540e\uff08\u4e0b\u4e00\u6b21event loop\u5f00\u59cb\u524d\uff09\u518d\u8c03\u7528callback"),(0,l.kt)("li",{parentName:"ul"},"setTimeout()\u662f\u5e76\u4e0d\u77e5\u9053\u4ec0\u4e48\u65f6\u5019call stack\u6e05\u7a7a\u7684\uff0c\u6240\u4ee5\u4f55\u65f6\u8c03\u7528callback\u51fd\u6570\u662f\u4e0d\u786e\u5b9a\u7684"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"platform"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u83b7\u53d6\u5f53\u524d\u7684\u64cd\u4f5c\u7cfb\u7edf"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"kill(pid)"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6839\u636e\u8fdb\u7a0bID\u6740\u6b7b\u8fdb\u7a0b"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"env"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u83b7\u53d6\u73af\u5883\u53d8\u91cf\u5bf9\u8c61")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u4e00\u822c\u6211\u4eec\u4f1a\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"process.env")," \u4e0a\u6302\u8f7d\u4e00\u4e9b\u53d8\u91cf\u6807\u8bc6\u5f53\u524d\u7684\u73af\u5883\u3002\u6bd4\u5982\u6700\u5e38\u89c1\u7684\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"process.env.NODE_ENV")," \u533a\u5206 ",(0,l.kt)("inlineCode",{parentName:"p"},"development")," \u548c ",(0,l.kt)("inlineCode",{parentName:"p"},"production")),(0,l.kt)("p",{parentName:"li"},"\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"vue-cli")," \u7684\u6e90\u7801\u4e2d\u4e5f\u7ecf\u5e38\u4f1a\u770b\u5230 ",(0,l.kt)("inlineCode",{parentName:"p"},"process.env.VUE_CLI_DEBUG")," \u6807\u8bc6\u5f53\u524d\u662f\u4e0d\u662f ",(0,l.kt)("inlineCode",{parentName:"p"},"DEBUG")," \u6a21\u5f0f"))))),(0,l.kt)("h4",{id:"buffer"},"Buffer"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u7c7b\u578b\u5316\u6570\u7ec4\uff0c\u6570\u7ec4\u4e0d\u80fd\u5b58\u50a8\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0cBuffer \u662f\u4e13\u95e8\u5b58\u50a8\u4e8c\u8fdb\u5236\u6570\u636e\u7684\uff0cBuffer \u7684\u7ed3\u6784\u4e0e\u6570\u7ec4\u7c7b\u4f3c\uff0c\u64cd\u4f5c\u65b9\u6cd5\u4e5f\u4e0e\u6570\u7ec4\u7c7b\u4f3c"),(0,l.kt)("li",{parentName:"ul"},"\u7ee7\u627f\u81ea UInt8Array"),(0,l.kt)("li",{parentName:"ul"},"\u8ba1\u7b97\u673a\u4e2d\u5b58\u50a8\u7684\u57fa\u672c\u5355\u4f4d\uff1a\u5b57\u8282\uff0c\u6bcf\u4e2a\u5143\u7d20\u5360\u7528\u4e00\u4e2a\u5b57\u8282"),(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u65f6\u3001\u8f93\u51fa\u65f6\u53ef\u80fd\u9700\u8981\u7528\u5341\u516d\u8fdb\u5236\u8868\u793a"),(0,l.kt)("li",{parentName:"ul"},"Buffer \u662f\u5bf9\u5e95\u5c42\u5185\u5b58\u7684\u76f4\u63a5\u64cd\u4f5c\uff0c\u56e0\u6b64\u5927\u5c0f\u4e00\u65e6\u786e\u5b9a\u5c31\u4e0d\u80fd\u4fee\u6539"),(0,l.kt)("li",{parentName:"ul"},"Buffer \u5b58\u50a8\u7684\u662f\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u663e\u793a\u65f6\u4ee5 16 \u8fdb\u5236\u7684\u5f62\u5f0f\u663e\u793a")),(0,l.kt)("p",null,"\u6269\u5c55\uff1aJavaScript \u6570\u5b57\u5728\u8ba1\u7b97\u673a\u5360\u7684\u5185\u5b58\u662f8\u4e2a\u5b57\u8282\u3002"),(0,l.kt)("h5",{id:"\u5e94\u7528\u573a\u666f"},"\u5e94\u7528\u573a\u666f"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Buffer"),"\u7684\u5e94\u7528\u573a\u666f\u5e38\u5e38\u4e0e\u6d41\u7684\u6982\u5ff5\u8054\u7cfb\u5728\u4e00\u8d77\uff0c\u4f8b\u5982\u6709\u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"I/O\u64cd\u4f5c"),(0,l.kt)("li",{parentName:"ul"},"\u52a0\u5bc6\u89e3\u5bc6"),(0,l.kt)("li",{parentName:"ul"},"zlib.js")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"I/O\u64cd\u4f5c")),(0,l.kt)("p",null,"\u901a\u8fc7\u6d41\u7684\u5f62\u5f0f\uff0c\u5c06\u4e00\u4e2a\u6587\u4ef6\u7684\u5185\u5bb9\u8bfb\u53d6\u5230\u53e6\u5916\u4e00\u4e2a\u6587\u4ef6"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const fs = require('fs');\n\nconst inputStream = fs.createReadStream('input.txt'); // \u521b\u5efa\u53ef\u8bfb\u6d41\nconst outputStream = fs.createWriteStream('output.txt'); // \u521b\u5efa\u53ef\u5199\u6d41\n\ninputStream.pipe(outputStream); // \u7ba1\u9053\u8bfb\u5199\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u52a0\u89e3\u5bc6")),(0,l.kt)("p",null,"\u5728\u4e00\u4e9b\u52a0\u89e3\u5bc6\u7b97\u6cd5\u4e2d\u4f1a\u9047\u5230\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"Buffer"),"\uff0c\u4f8b\u5982 ",(0,l.kt)("inlineCode",{parentName:"p"},"crypto.createCipheriv")," \u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570 ",(0,l.kt)("inlineCode",{parentName:"p"},"key")," \u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"string")," \u6216 ",(0,l.kt)("inlineCode",{parentName:"p"},"Buffer")," \u7c7b\u578b"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"zlib.js")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"zlib.js")," \u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"Node.js")," \u7684\u6838\u5fc3\u5e93\u4e4b\u4e00\uff0c\u5176\u5229\u7528\u4e86\u7f13\u51b2\u533a\uff08",(0,l.kt)("inlineCode",{parentName:"p"},"Buffer"),"\uff09\u7684\u529f\u80fd\u6765\u64cd\u4f5c\u4e8c\u8fdb\u5236\u6570\u636e\u6d41\uff0c\u63d0\u4f9b\u4e86\u538b\u7f29\u6216\u89e3\u538b\u529f\u80fd"),(0,l.kt)("h5",{id:"buffer-\u5e38\u7528\u65b9\u6cd5"},(0,l.kt)("strong",{parentName:"h5"},"Buffer \u5e38\u7528\u65b9\u6cd5")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Buffer.from(str[, encoding])"),"\uff1a\u5c06\u4e00\u4e2a\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a Buffer"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Buffer.alloc(size)"),"\uff1a\u521b\u5efa\u6307\u5b9a\u5927\u5c0f\u7684 Buffer"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"Buffer.alloUnsafe(size)"),"\uff1a\u521b\u5efa\u6307\u5b9a\u5927\u5c0f\u7684 Buffer\uff0c\u53ef\u80fd\u5305\u542b\u654f\u611f\u6570\u636e\uff08\u5206\u914d\u5185\u5b58\u65f6\u4e0d\u4f1a\u6e05\u9664\u5185\u5b58\u6b8b\u7559\u7684\u6570\u636e\uff09"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"buf.toString()"),"\uff1a\u5c06 Buffer \u6570\u636e\u8f6c\u4e3a\u5b57\u7b26\u4e32")),(0,l.kt)("h3",{id:"\u6a21\u5757\u7ea7\u522b\u7684\u5168\u5c40\u5bf9\u8c61"},"\u6a21\u5757\u7ea7\u522b\u7684\u5168\u5c40\u5bf9\u8c61"),(0,l.kt)("p",null,"\u8fd9\u4e9b\u5168\u5c40\u5bf9\u8c61\u662f\u6a21\u5757\u4e2d\u7684\u53d8\u91cf\uff0c\u53ea\u662f\u6bcf\u4e2a\u6a21\u5757\u90fd\u6709\uff0c\u770b\u8d77\u6765\u5c31\u50cf\u5168\u5c40\u53d8\u91cf\uff0c\u50cf\u5728\u547d\u4ee4\u4ea4\u4e92\u4e2d\u662f\u4e0d\u53ef\u4ee5\u4f7f\u7528\uff0c\u5305\u62ec\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"__dirname"),(0,l.kt)("li",{parentName:"ul"},"__filename"),(0,l.kt)("li",{parentName:"ul"},"exports"),(0,l.kt)("li",{parentName:"ul"},"module"),(0,l.kt)("li",{parentName:"ul"},"require")),(0,l.kt)("h4",{id:"__dirname"},"__dirname"),(0,l.kt)("p",null,"\u83b7\u53d6\u5f53\u524d\u6587\u4ef6\u6240\u5728\u7684\u8def\u5f84\uff0c\u4e0d\u5305\u62ec\u540e\u9762\u7684\u6587\u4ef6\u540d"),(0,l.kt)("p",null,"\u4ece ",(0,l.kt)("inlineCode",{parentName:"p"},"/Users/mjr")," \u8fd0\u884c ",(0,l.kt)("inlineCode",{parentName:"p"},"node example.js"),"\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"console.log(__dirname);\n// \u6253\u5370: /Users/mjr\n")),(0,l.kt)("h4",{id:"__filename"},"__filename"),(0,l.kt)("p",null,"\u83b7\u53d6\u5f53\u524d\u6587\u4ef6\u6240\u5728\u7684\u8def\u5f84\u548c\u6587\u4ef6\u540d\u79f0\uff0c\u5305\u62ec\u540e\u9762\u7684\u6587\u4ef6\u540d\u79f0"),(0,l.kt)("p",null,"\u4ece ",(0,l.kt)("inlineCode",{parentName:"p"},"/Users/mjr")," \u8fd0\u884c ",(0,l.kt)("inlineCode",{parentName:"p"},"node example.js"),"\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"console.log(__filename);\n// \u6253\u5370: /Users/mjr/example.js\n")),(0,l.kt)("h4",{id:"exports"},"exports"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"module.exports")," \u7528\u4e8e\u6307\u5b9a\u4e00\u4e2a\u6a21\u5757\u6240\u5bfc\u51fa\u7684\u5185\u5bb9\uff0c\u5373\u53ef\u4ee5\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"p"},"require()")," \u8bbf\u95ee\u7684\u5185\u5bb9"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"exports.name = name;\nexports.age = age;\nexports.sayHello = sayHello;\n")),(0,l.kt)("h4",{id:"module"},"module"),(0,l.kt)("p",null,"\u5bf9\u5f53\u524d\u6a21\u5757\u7684\u5f15\u7528\uff0c\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"module.exports")," \u7528\u4e8e\u6307\u5b9a\u4e00\u4e2a\u6a21\u5757\u6240\u5bfc\u51fa\u7684\u5185\u5bb9\uff0c\u5373\u53ef\u4ee5\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"p"},"require()")," \u8bbf\u95ee\u7684\u5185\u5bb9"),(0,l.kt)("h4",{id:"require"},"require"),(0,l.kt)("p",null,"\u7528\u4e8e\u5f15\u5165\u6a21\u5757\u3001 ",(0,l.kt)("inlineCode",{parentName:"p"},"JSON"),"\u3001\u6216\u672c\u5730\u6587\u4ef6\u3002 \u53ef\u4ee5\u4ece ",(0,l.kt)("inlineCode",{parentName:"p"},"node_modules")," \u5f15\u5165\u6a21\u5757\u3002"),(0,l.kt)("p",null,"\u53ef\u4ee5\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\u5f15\u5165\u672c\u5730\u6a21\u5757\u6216",(0,l.kt)("inlineCode",{parentName:"p"},"JSON"),"\u6587\u4ef6\uff0c\u8def\u5f84\u4f1a\u6839\u636e",(0,l.kt)("inlineCode",{parentName:"p"},"__dirname"),"\u5b9a\u4e49\u7684\u76ee\u5f55\u540d\u6216\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u8fdb\u884c\u5904\u7406"),(0,l.kt)("h2",{id:"3node\u7684\u6a21\u5757\u5316\u7ec6\u8282"},"3.Node\u7684\u6a21\u5757\u5316\u7ec6\u8282"),(0,l.kt)("h3",{id:"\u6a21\u5757\u5316\u6982\u5ff5"},"\u6a21\u5757\u5316\u6982\u5ff5"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6a21\u5757\u5316\u662f\u6307\u89e3\u51b3\u4e00\u4e2a\u590d\u6742\u95ee\u9898\u65f6\uff0c\u81ea\u9876\u5411\u4e0b\u9010\u5c42\u628a\u7cfb\u7edf\u5212\u5206\u4e3a\u82e5\u5e72\u6a21\u5757\u7684\u8fc7\u7a0b\uff0c\u6a21\u5757\u662f\u53ef\u7ec4\u5408\u3001\u5206\u89e3\u548c\u66f4\u6362\u7684\u5355\u5143\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u6a21\u5757\u5316\u53ef\u63d0\u9ad8\u4ee3\u7801\u7684\u590d\u7528\u6027\u548c\u53ef\u7ef4\u62a4\u6027\uff0c\u5b9e\u73b0\u6309\u9700\u52a0\u8f7d\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u6a21\u5757\u5316\u89c4\u8303\u662f\u5bf9\u4ee3\u7801\u8fdb\u884c\u6a21\u5757\u5316\u62c6\u5206\u548c\u7ec4\u5408\u65f6\u9700\u8981\u9075\u5b88\u7684\u89c4\u5219\uff0c\u5982\u4f7f\u7528\u4f55\u79cd\u8bed\u6cd5\u683c\u5f0f\u5f15\u7528\u6a21\u5757\u548c\u5411\u5916\u66b4\u9732\u6210\u5458\u3002")),(0,l.kt)("h3",{id:"nodejs-\u4e2d\u6a21\u5757\u7684\u5206\u7c7b"},"Node.js \u4e2d\u6a21\u5757\u7684\u5206\u7c7b"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5185\u7f6e\u6a21\u5757"),(0,l.kt)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49\u6a21\u5757"),(0,l.kt)("li",{parentName:"ul"},"\u7b2c\u4e09\u65b9\u6a21\u5757")),(0,l.kt)("h3",{id:"nodejs-\u4e2d\u7684\u6a21\u5757\u4f5c\u7528\u57df"},"Node.js \u4e2d\u7684\u6a21\u5757\u4f5c\u7528\u57df"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u548c\u51fd\u6570\u4f5c\u7528\u57df\u7c7b\u4f3c\uff0c\u5728\u81ea\u5b9a\u4e49\u6a21\u5757\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u3001\u65b9\u6cd5\u7b49\u6210\u5458\uff0c\u53ea\u80fd\u5728\u5f53\u524d\u6a21\u5757\u5185\u88ab\u8bbf\u95ee\uff0c\u8fd9\u79cd\u6a21\u5757\u7ea7\u522b\u7684\u8bbf\u95ee\u9650\u5236\uff0c\u53eb\u505a\u6a21\u5757\u4f5c\u7528\u57df"),(0,l.kt)("li",{parentName:"ul"},"\u9632\u6b62\u5168\u5c40\u53d8\u91cf\u6c61\u67d3")),(0,l.kt)("h3",{id:"\u6a21\u5757\u4f5c\u7528\u57df\u7684\u6210\u5458"},"\u6a21\u5757\u4f5c\u7528\u57df\u7684\u6210\u5458"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49\u6a21\u5757\u4e2d\u90fd\u6709\u4e00\u4e2a ",(0,l.kt)("inlineCode",{parentName:"li"},"module")," \u5bf9\u8c61\uff0c\u5b58\u50a8\u4e86\u548c\u5f53\u524d\u6a21\u5757\u6709\u5173\u7684\u4fe1\u606f"),(0,l.kt)("li",{parentName:"ul"},"\u5728\u81ea\u5b9a\u4e49\u6a21\u5757\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"module.exports")," \u5bf9\u8c61\uff0c\u5c06\u6a21\u5757\u5185\u7684\u6210\u5458\u5171\u4eab\u51fa\u53bb\uff0c\u4f9b\u5916\u754c\u4f7f\u7528\u3002\u5bfc\u5165\u81ea\u5b9a\u4e49\u6a21\u5757\u65f6\uff0c\u5f97\u5230\u7684\u5c31\u662f ",(0,l.kt)("inlineCode",{parentName:"li"},"module.exports")," \u6307\u5411\u7684\u5bf9\u8c61\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"exports")," \u548c ",(0,l.kt)("inlineCode",{parentName:"li"},"module.exports")," \u6307\u5411\u540c\u4e00\u4e2a\u5bf9\u8c61\u3002\u6700\u7ec8\u5171\u4eab\u7684\u7ed3\u679c\uff0c\u4ee5 ",(0,l.kt)("inlineCode",{parentName:"li"},"module.exports")," \u6307\u5411\u7684\u5bf9\u8c61\u4e3a\u51c6\u3002")),(0,l.kt)("h3",{id:"commonjs-\u6a21\u5757\u5316\u89c4\u8303"},"CommonJS \u6a21\u5757\u5316\u89c4\u8303"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6bcf\u4e2a\u6a21\u5757\u5185\u90e8\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"module")," \u53d8\u91cf\u4ee3\u8868\u5f53\u524d\u6a21\u5757"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"module")," \u53d8\u91cf\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"module.exports")," \u662f\u5bf9\u5916\u7684\u63a5\u53e3"),(0,l.kt)("li",{parentName:"ul"},"\u52a0\u8f7d\u67d0\u4e2a\u6a21\u5757\u5373\u52a0\u8f7d\u8be5\u6a21\u5757\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"module.exports")," \u5c5e\u6027")),(0,l.kt)("h3",{id:"\u6a21\u5757\u52a0\u8f7d\u673a\u5236"},"\u6a21\u5757\u52a0\u8f7d\u673a\u5236"),(0,l.kt)("p",null,"\u6a21\u5757\u7b2c\u4e00\u6b21\u52a0\u8f7d\u540e\u4f1a\u88ab\u7f13\u5b58\uff0c\u5373\u591a\u6b21\u8c03\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"require()")," \u4e0d\u4f1a\u5bfc\u81f4\u6a21\u5757\u7684\u4ee3\u7801\u88ab\u6267\u884c\u591a\u6b21\uff0c\u63d0\u9ad8\u6a21\u5757\u52a0\u8f7d\u6548\u7387\u3002"),(0,l.kt)("h4",{id:"\u5185\u7f6e\u6a21\u5757\u52a0\u8f7d"},"\u5185\u7f6e\u6a21\u5757\u52a0\u8f7d"),(0,l.kt)("p",null,"\u5185\u7f6e\u6a21\u5757\u52a0\u8f7d\u4f18\u5148\u7ea7\u6700\u9ad8\uff08\u6bd4\u5982path\uff0cfs\uff0chttp\u7b49\u7b49\uff09\u3002"),(0,l.kt)("h3",{id:"\u6a21\u5757\u7684\u67e5\u627e"},"\u6a21\u5757\u7684\u67e5\u627e"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u7edd\u5bf9\u8def\u5f84",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6839\u636e\u7edd\u5bf9\u8def\u5f84\u76f4\u63a5\u52a0\u8f7d\u6a21\u5757"))),(0,l.kt)("li",{parentName:"ul"},"\u76f8\u5bf9\u8def\u5f84  ./  \u6216 ../",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u76f8\u5bf9\u4e8e\u5f53\u524d\u6a21\u5757"),(0,l.kt)("li",{parentName:"ul"},"\u8f6c\u6362\u4e3a\u7edd\u5bf9\u8def\u5f84"),(0,l.kt)("li",{parentName:"ul"},"\u52a0\u8f7d\u6a21\u5757"))),(0,l.kt)("li",{parentName:"ul"},"\u76f8\u5bf9\u8def\u5f84\u7684\u67e5\u627e\u8fc7\u7a0b",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u68c0\u67e5\u662f\u5426\u662f\u5185\u7f6e\u6a21\u5757\uff0c\u5982\uff1afs\u3001path\u7b49"),(0,l.kt)("li",{parentName:"ul"},"\u68c0\u67e5\u5f53\u524d\u76ee\u5f55\u4e2d\u7684node_modules"),(0,l.kt)("li",{parentName:"ul"},"\u68c0\u67e5\u4e0a\u7ea7\u76ee\u5f55\u4e2d\u7684node_modules"),(0,l.kt)("li",{parentName:"ul"},"\u8f6c\u6362\u4e3a\u7edd\u5bf9\u8def\u5f84"),(0,l.kt)("li",{parentName:"ul"},"\u52a0\u8f7d\u6a21\u5757"))),(0,l.kt)("li",{parentName:"ul"},"\u5173\u4e8e\u540e\u7f00\u540d",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u4e0d\u63d0\u4f9b\u540e\u7f00\u540d\uff0c\u81ea\u52a8\u8865\u5168"),(0,l.kt)("li",{parentName:"ul"},"js\u3001json\u3001node\u3001mjs\uff0c\u90fd\u6ca1\u6709\u5219\u62a5\u9519"))),(0,l.kt)("li",{parentName:"ul"},"\u5173\u4e8e\u6587\u4ef6\u540d",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u4ec5\u63d0\u4f9b\u76ee\u5f55\uff0c\u4e0d\u63d0\u4f9b\u6587\u4ef6\u540d\uff0c\u5219\u81ea\u52a8\u5bfb\u627e\u8be5\u76ee\u5f55\u4e2d\u7684index.js",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5728\u88ab\u52a0\u8f7d\u7684\u76ee\u5f55\u4e0b\u67e5\u627e ",(0,l.kt)("inlineCode",{parentName:"li"},"package.json")," \u7684\u6587\u4ef6\uff0c\u5e76\u5bfb\u627e ",(0,l.kt)("inlineCode",{parentName:"li"},"main")," \u5c5e\u6027\uff0c\u4f5c\u4e3a ",(0,l.kt)("inlineCode",{parentName:"li"},"require()")," \u52a0\u8f7d\u7684\u5165\u53e3"),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u6ca1\u6709 ",(0,l.kt)("inlineCode",{parentName:"li"},"package.json")," \u6587\u4ef6\uff0c\u6216\u8005 ",(0,l.kt)("inlineCode",{parentName:"li"},"main")," \u5165\u53e3\u4e0d\u5b58\u5728\u6216\u65e0\u6cd5\u89e3\u6790\uff0c\u5219 Node.js \u5c06\u4f1a\u8bd5\u56fe\u52a0\u8f7d\u76ee\u5f55\u4e0b\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"index.js")," \u6587\u4ef6\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u82e5\u5931\u8d25\u5219\u62a5\u9519"))),(0,l.kt)("li",{parentName:"ul"},"package.json\u4e2d\u7684main\u5b57\u6bb5\u53ef\u4ee5\u8fdb\u884c\u914d\u7f6e")))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"moudule\u5bf9\u8c61\u8bb0\u5f55\u5f53\u524d\u6a21\u5757\u7684\u4fe1\u606f")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"require\u5bf9\u8c61\u5f15\u7528\u6a21\u5757")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u5f53\u6267\u884c\u4e00\u4e2a\u6a21\u5757\u6216\u4f7f\u7528require\u65f6\uff0c\u4f1a\u5c06\u6a21\u5757\u653e\u7f6e\u5728\u4e00\u4e2a\u51fd\u6570\u73af\u5883\u4e2d")),(0,l.kt)("h2",{id:"4node\u4e2d\u7684es\u6a21\u5757\u5316"},"4.Node\u4e2d\u7684es\u6a21\u5757\u5316"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u76ee\u524d\uff0cNode\u4e2d\u7684ES\u6a21\u5757\u5316\u4ecd\u7136\u5904\u4e8e\u8bd5\u9a8c\u9636\u6bb5")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u6a21\u5757\u8981\u4e48\u662fcommonjs\uff0c\u8981\u4e48\u662fES"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"commonjs\uff1a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u90fd\u662fcommonjs")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"ES"),(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u6587\u4ef6\u540e\u7f00\u540d\u4e3a.mjs")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u6216\u8005\u5c06\u6700\u8fd1\u7684package.json\u4e2dtype\u7684\u503c\u662fmodule")))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5f53\u4f7f\u7528ES\u6a21\u5757\u5316\u8fd0\u884c\u65f6\uff0c\u5fc5\u987b\u6dfb\u52a0 --experimental-modules\u6807\u8bb0"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("img",{parentName:"li",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221030185923055.png",alt:"image-20221030185923055"}))))))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6ce8\u610f\u5343\u4e07\u4e0d\u8981\u6df7\u7528")),(0,l.kt)("h2",{id:"5\u57fa\u672c\u5185\u7f6e\u6a21\u5757"},"5.\u57fa\u672c\u5185\u7f6e\u6a21\u5757"),(0,l.kt)("p",null,"\u4e0b\u9762\u5efa\u8bae\u67e5\u770b\u5b98\u65b9\u6587\u6863"),(0,l.kt)("h3",{id:"os"},"os"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"EOL"),(0,l.kt)("li",{parentName:"ul"},"arch()"),(0,l.kt)("li",{parentName:"ul"},"cpus()"),(0,l.kt)("li",{parentName:"ul"},"freeman()"),(0,l.kt)("li",{parentName:"ul"},"homedir()"),(0,l.kt)("li",{parentName:"ul"},"hostname()"),(0,l.kt)("li",{parentName:"ul"},"tmpdir()")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://nodejs.org/dist/latest-v12.x/docs/api/os.html"},"https://nodejs.org/dist/latest-v12.x/docs/api/os.html")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'const os = require("os");\n\nconsole.log(os.EOL);\n\nconsole.log(os.arch())\n\nconsole.log(os.cpus().length);\n\nconsole.log(os.freemem() / 2 ** 30);\n\nconsole.log(os.homedir());\n\nconsole.log(os.hostname());\n\nconsole.log(os.tmpdir());\n')),(0,l.kt)("h3",{id:"path"},"path"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"basename \u53ef\u4ee5\u83b7\u53d6\u8def\u5f84\u4e2d\u7684\u6700\u540e\u4e00\u90e8\u5206\uff0c\u5e38\u901a\u8fc7\u8be5\u65b9\u6cd5\u83b7\u53d6\u8def\u5f84\u4e2d\u7684\u6587\u4ef6\u540d"),(0,l.kt)("li",{parentName:"ul"},"sep"),(0,l.kt)("li",{parentName:"ul"},"delimiter"),(0,l.kt)("li",{parentName:"ul"},"dirname \u83b7\u5f97\u76ee\u5f55\u540d"),(0,l.kt)("li",{parentName:"ul"},"extname \u83b7\u5f97\u6269\u5c55\u540d"),(0,l.kt)("li",{parentName:"ul"},"join \u8def\u5f84\u62fc\u63a5"),(0,l.kt)("li",{parentName:"ul"},"normalize"),(0,l.kt)("li",{parentName:"ul"},"relative"),(0,l.kt)("li",{parentName:"ul"},"resolve")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://nodejs.org/dist/latest-v12.x/docs/api/path.html"},"https://nodejs.org/dist/latest-v12.x/docs/api/path.html")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'const path = require("path");\n\nconst basename = path.basename("fdg/dfgdfg/adfaf/fdgdfgd/a.asf", ".html");\nconsole.log(basename);//a.asf,\u5982\u679c\u662fa.html\u8f93\u51fa\u7684\u5c31\u662fa\n\nconsole.log(path.sep);//\u8f93\u51fa\\\n\nconsole.log(process.env.PATH.split(path.delimiter));\n\nconst dir = path.dirname("a/b/c/d");\nconsole.log(dir);\n\nconst ext = path.extname("a/b/c/a.js");\nconsole.log(ext);\nconst basePath = "a/b";\nconst fullpath = path.join(basePath, "../", "d.js");\nconsole.log(fullpath);\n\nconst rel = path.relative(\'/data/orandea/test/aaa\', \'/data/orandea/impl/bbb\');\nconsole.log(rel)//\u8f93\u51fa\u7684\u662f..\\..\\impl\\bbb\uff0c\u4e5f\u5c31\u662f\u540e\u8005\u76f8\u5bf9\u4e8e\u524d\u8005\u7684\u76f8\u5bf9\u8def\u5f84\n\nconst absPath = path.resolve(__dirname, "./a.js");//\u62fc\u63a5\nconsole.log(absPath);//\n')),(0,l.kt)("h3",{id:"url"},"url"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://nodejs.org/dist/latest-v12.x/docs/api/url.html"},"https://nodejs.org/dist/latest-v12.x/docs/api/url.html")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'const URL = require("url");\n\nconst url = URL.parse("https://nodejs.org:80/a/b/c?t=3&u=5#abc");\nconsole.log(url);//\u8f93\u51fa\u7684\u5c31\u662f\u4e0b\u9762\u7684obj\nconsole.log(url.searchParams.has("a"));\nconsole.log(url.searchParams.has("t"));\nconsole.log(url.searchParams.get("t"));\n\nconst obj = {\n  href: "https://nodejs.org:80/a/b/c?t=3&u=5#abc",\n  origin: "https://nodejs.org:80",\n  protocol: "https:",\n  username: "",\n  password: "",\n  host: "nodejs.org:80",\n  hostname: "nodejs.org",\n  port: "80",\n  pathname: "/a/b/c",\n  search: "?t=3&u=5",\n  hash: "#abc"\n};\n\nconst url = URL.format(obj);\nconsole.log(url);\n')),(0,l.kt)("h3",{id:"util"},"util"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"callbackify"),(0,l.kt)("li",{parentName:"ul"},"inherits"),(0,l.kt)("li",{parentName:"ul"},"isDeepStrictEqual"),(0,l.kt)("li",{parentName:"ul"},"promisify")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u5efa\u8bae\u5148\u770b\u5b98\u65b9\u7684\u4f8b\u5b50")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://nodejs.org/dist/latest-v12.x/docs/api/util.html"},"https://nodejs.org/dist/latest-v12.x/docs/api/util.html")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'const util = require("util");\n\nasync function delay(duration = 1000) {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(duration);\n    }, duration);\n  });\n}\n\nconst delayCallback = util.callbackify(delay);\n\ndelayCallback(500, (err, d) => {\n  console.log(d);//500\n});\n\nfunction delayCallBack(duration, callback) {\n  setTimeout(() => {\n    callback(null, duration);\n  }, duration);\n}\n\nconst delay = util.promisify(delayCallBack);\n(async () => {\n  const r = await delay(500);//500\n  console.log(r);\n})();\n\nfunction demo1(data,callback) {\n  callback(null,data)\n}\n\nconst demo2 = util.promisify(demo1)\ndemo2(456).then((d)=>{\n  console.log(d);//456\n})\n\n\nconst obj1 = {\n  a: 1,\n  b: {\n    c: 3,\n    d: {\n      e: 5\n    }\n  }\n};\n\nconst obj2 = {\n  a: 1,\n  b: {\n    c: 3,\n    d: {\n      e: 5,\n      g: 6\n    }\n  }\n};\n\nconsole.log(util.isDeepStrictEqual(obj1, obj2));//false\n')),(0,l.kt)("h2",{id:"6-\u6587\u4ef6io"},"6. \u6587\u4ef6I/O"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"I/O\uff1ainput output"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5bf9\u5916\u90e8\u8bbe\u5907\u7684\u8f93\u5165\u8f93\u51fa"),(0,l.kt)("li",{parentName:"ul"},"\u5916\u90e8\u8bbe\u5907",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u78c1\u76d8"),(0,l.kt)("li",{parentName:"ul"},"\u7f51\u5361"),(0,l.kt)("li",{parentName:"ul"},"\u663e\u5361"),(0,l.kt)("li",{parentName:"ul"},"\u6253\u5370\u673a"),(0,l.kt)("li",{parentName:"ul"},"\u5176\u4ed6..."))),(0,l.kt)("li",{parentName:"ul"},"IO\u7684\u901f\u5ea6\u5f80\u5f80\u4f4e\u4e8e\u5185\u5b58\u548cCPU\u7684\u4ea4\u4e92\u901f\u5ea6"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"fs\u6a21\u5757 ",(0,l.kt)("a",{parentName:"p",href:"https://nodejs.org/dist/latest-v12.x/docs/api/fs.html"},"https://nodejs.org/dist/latest-v12.x/docs/api/fs.html")),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u8bfb\u53d6\u4e00\u4e2a\u6587\u4ef6",(0,l.kt)("inlineCode",{parentName:"li"},"fs.readFile()")),(0,l.kt)("li",{parentName:"ul"},"\u5411\u6587\u4ef6\u5199\u5165\u5185\u5bb9",(0,l.kt)("inlineCode",{parentName:"li"},"fs.writeFile()")),(0,l.kt)("li",{parentName:"ul"},"\u83b7\u53d6\u6587\u4ef6\u6216\u76ee\u5f55\u4fe1\u606f",(0,l.kt)("inlineCode",{parentName:"li"},"fs.stat")),(0,l.kt)("li",{parentName:"ul"},"\u83b7\u53d6\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u548c\u5b50\u76ee\u5f55",(0,l.kt)("inlineCode",{parentName:"li"},"fs.readdir()")),(0,l.kt)("li",{parentName:"ul"},"\u521b\u5efa\u76ee\u5f55",(0,l.kt)("inlineCode",{parentName:"li"},"fs.mkdir()")),(0,l.kt)("li",{parentName:"ul"},"\u5224\u65ad\u6587\u4ef6\u6216\u76ee\u5f55\u662f\u5426\u5b58\u5728",(0,l.kt)("inlineCode",{parentName:"li"},"fs.existsSync()"),",",(0,l.kt)("inlineCode",{parentName:"li"},"fs.exists()\u88ab\u5e9f\u5f03"),"\uff0c\u53ef\u4ee5\u81ea\u884c\u5c01\u88c5\u3002")),(0,l.kt)("p",{parentName:"li"},"\u4ee5\u4e0a\u65b9\u6cd5\u57fa\u672c\u90fd\u6709Sync\u7684\u65b9\u5f0f\uff0c\u4f46\u662f\u6211\u4eec\u4e00\u822c\u4e0d\u7528\u3002\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u4f7f\u7528\u5f02\u6b65\u3002"))),(0,l.kt)("h3",{id:"\u6807\u8bc6\u4f4d"},"\u6807\u8bc6\u4f4d"),(0,l.kt)("p",null,"\u6807\u8bc6\u4f4d\u4ee3\u8868\u7740\u5bf9\u6587\u4ef6\u7684\u64cd\u4f5c\u65b9\u5f0f\uff0c\u5982\u53ef\u8bfb\u3001\u53ef\u5199\u3001\u5373\u53ef\u8bfb\u53c8\u53ef\u5199\u7b49\u7b49\uff0c\u5982\u4e0b\u8868\u6240\u793a\uff1a"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u7b26\u53f7"),(0,l.kt)("th",{parentName:"tr",align:null},"\u542b\u4e49"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"r"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bfb\u53d6\u6587\u4ef6\uff0c\u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\u5219\u629b\u51fa\u5f02\u5e38\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"r+"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bfb\u53d6\u5e76\u5199\u5165\u6587\u4ef6\uff0c\u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\u5219\u629b\u51fa\u5f02\u5e38\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"rs"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bfb\u53d6\u5e76\u5199\u5165\u6587\u4ef6\uff0c\u6307\u793a\u64cd\u4f5c\u7cfb\u7edf\u7ed5\u5f00\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u7f13\u5b58\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"w"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5199\u5165\u6587\u4ef6\uff0c\u6587\u4ef6\u4e0d\u5b58\u5728\u4f1a\u88ab\u521b\u5efa\uff0c\u5b58\u5728\u5219\u6e05\u7a7a\u540e\u5199\u5165\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"wx"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5199\u5165\u6587\u4ef6\uff0c\u6392\u5b83\u65b9\u5f0f\u6253\u5f00\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"w+"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bfb\u53d6\u5e76\u5199\u5165\u6587\u4ef6\uff0c\u6587\u4ef6\u4e0d\u5b58\u5728\u5219\u521b\u5efa\u6587\u4ef6\uff0c\u5b58\u5728\u5219\u6e05\u7a7a\u540e\u5199\u5165\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"wx+"),(0,l.kt)("td",{parentName:"tr",align:null},"\u548c w+ \u7c7b\u4f3c\uff0c\u6392\u4ed6\u65b9\u5f0f\u6253\u5f00\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"a"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8ffd\u52a0\u5199\u5165\uff0c\u6587\u4ef6\u4e0d\u5b58\u5728\u5219\u521b\u5efa\u6587\u4ef6\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ax"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4e0e a \u7c7b\u4f3c\uff0c\u6392\u4ed6\u65b9\u5f0f\u6253\u5f00\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"a+"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bfb\u53d6\u5e76\u8ffd\u52a0\u5199\u5165\uff0c\u4e0d\u5b58\u5728\u5219\u521b\u5efa\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"ax+"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4e0e a+ \u7c7b\u4f3c\uff0c\u6392\u4ed6\u65b9\u5f0f\u6253\u5f00\u3002")))),(0,l.kt)("h3",{id:"fsreadfile"},"fs.readFile"),(0,l.kt)("p",null,"\u8bed\u6cd5\u683c\u5f0f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"fs.readFile(path[, options], callback)\n")),(0,l.kt)("p",null,"\u7531\u4e8ees6\u7684\u51fa\u73b0\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"fs.promises.readFile(path[, options])\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"path"),"\uff1a\u6587\u4ef6\u8def\u5f84"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"options"),"\uff1a\u914d\u7f6e\u9009\u9879\uff0c\u82e5\u662f\u5b57\u7b26\u4e32\u5219\u6307\u5b9a\u7f16\u7801\u683c\u5f0f",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"encoding"),"\uff1a\u7f16\u7801\u683c\u5f0f\uff0c\u9ed8\u8ba4\u4e3autf-8"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"flag"),"\uff1a\u6253\u5f00\u65b9\u5f0f\uff0c\u9ed8\u8ba4\u4e3ar"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"callback"),"\uff1a\u56de\u8c03\u51fd\u6570",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"err"),"\uff1a\u9519\u8bef\u4fe1\u606f"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"data"),"\uff1a\u8bfb\u53d6\u7684\u6570\u636e\uff0c\u5982\u679c\u672a\u6307\u5b9a\u7f16\u7801\u683c\u5f0f\u5219\u8fd4\u56de\u4e00\u4e2a Buffer")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'fs.promises.readFile(filename,\'utf-8\')//\u7b2c\u4e8c\u4e2a\u53c2\u6570\u7f16\u7801\nconst fs = require("fs");\nconst path = require("path");\n\nconst filename = path.resolve(__dirname, "./myfiles/1.txt");\n// fs.readFile(filename, "utf-8", (err, content) => {\n//   console.log(content);\n// });\n\n// Sync\u51fd\u6570\u662f\u540c\u6b65\u7684\uff0c\u4f1a\u5bfc\u81f4JS\u8fd0\u884c\u963b\u585e\uff0c\u6781\u5176\u5f71\u54cd\u6027\u80fd\n// \u901a\u5e38\uff0c\u5728\u7a0b\u5e8f\u542f\u52a8\u65f6\u8fd0\u884c\u6709\u9650\u7684\u6b21\u6570\u5373\u53ef\n\n// const content = fs.readFileSync(filename, "utf-8");\n// console.log(content);\n\nasync function test() {\n  const content = await fs.promises.readFile(filename, "utf-8");\n  console.log(content);\n}\n\ntest();\n')),(0,l.kt)("h3",{id:"fswritefile"},"fs.writeFile"),(0,l.kt)("p",null,"\u8bed\u6cd5\u683c\u5f0f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"fs.writeFile(file, data[, options], callback)\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"file"),"\uff1a\u6587\u4ef6\u8def\u5f84"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"data"),"\uff1a\u5199\u5165\u5185\u5bb9"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"options"),"\uff1a\u914d\u7f6e\u9009\u9879\uff0c\u5305\u542b ",(0,l.kt)("inlineCode",{parentName:"li"},"encoding\uff08\u9ed8\u8ba4utf-8\uff09, mode\uff08\u6743\u9650\u4f4d\u9ed8\u8ba4\u4e3a0o666\uff09, flag\uff08\u9ed8\u8ba4w\uff09"),"\uff1b\u82e5\u662f\u5b57\u7b26\u4e32\u5219\u6307\u5b9a\u7f16\u7801\u683c\u5f0f"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"callback"),"\uff1a\u56de\u8c03\u51fd\u6570")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'const fs = require("fs");\nconst path = require("path");\n\nconst filename = path.resolve(__dirname, "./myfiles/2.txt");\n\nasync function test() {\n  // await fs.promises.writeFile(filename, "\u963f\u65af\u987f\u53d1\u53d1\u653e\u5230\u53d1", {\n  //     encode:\'utf-8\'//\u9ed8\u8ba4\u5c31\u662f\u8fd9\u4e2a\n  //   flag: "a" //\u8ffd\u52a0\u5185\u5bb9\n  // });\n  const buffer = Buffer.from("abcde", "utf-8");\n  await fs.promises.writeFile(filename, buffer);\n  console.log("\u5199\u5165\u6210\u529f");\n}\n\ntest();\n')),(0,l.kt)("h3",{id:"fsappendfile"},"fs.appendFile"),(0,l.kt)("h4",{id:"appendfilesync"},"appendFileSync"),(0,l.kt)("p",null,"\u53c2\u6570\u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u5199\u5165\u6587\u4ef6\u7684\u8def\u5f84\u6216\u6587\u4ef6\u63cf\u8ff0\u7b26"),(0,l.kt)("li",{parentName:"ul"},"\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u5199\u5165\u7684\u6570\u636e\uff0c\u7c7b\u578b\u4e3a String \u6216 Buffer"),(0,l.kt)("li",{parentName:"ul"},"\u7b2c\u4e09\u4e2a\u53c2\u6570\u4e3a options\uff0c\u9ed8\u8ba4\u503c\u4e3a null\uff0c\u5176\u4e2d\u6709 encoding\uff08\u7f16\u7801\uff0c\u9ed8\u8ba4\u4e3a utf8\uff09\u3001 flag\uff08\u6807\u8bc6\u4f4d\uff0c\u9ed8\u8ba4\u4e3a a\uff09\u548c mode\uff08\u6743\u9650\u4f4d\uff0c\u9ed8\u8ba4\u4e3a 0o666\uff09\uff0c\u4e5f\u53ef\u76f4\u63a5\u4f20\u5165 encoding")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const fs = require("fs");\n\nfs.appendFileSync("3.txt", " world");\nlet data = fs.readFileSync("3.txt", "utf8");\n')),(0,l.kt)("h4",{id:"appendfile"},"appendFile"),(0,l.kt)("p",null,"\u5f02\u6b65\u8ffd\u52a0\u5199\u5165\u65b9\u6cd5 ",(0,l.kt)("inlineCode",{parentName:"p"},"appendFile")," \u4e0e ",(0,l.kt)("inlineCode",{parentName:"p"},"appendFileSync")," \u7684\u524d\u4e09\u4e2a\u53c2\u6570\u76f8\u540c\uff0c\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u4e3a\u56de\u8c03\u51fd\u6570\uff0c\u51fd\u6570\u5185\u6709\u4e00\u4e2a\u53c2\u6570 ",(0,l.kt)("inlineCode",{parentName:"p"},"err"),"\uff08\u9519\u8bef\uff09\uff0c\u56de\u8c03\u51fd\u6570\u5728\u6587\u4ef6\u8ffd\u52a0\u5199\u5165\u6570\u636e\u6210\u529f\u540e\u6267\u884c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const fs = require("fs");\n\nfs.appendFile("3.txt", " world", err => {\n    if (!err) {\n        fs.readFile("3.txt", "utf8", (err, data) => {\n            console.log(data); // Hello world\n        });\n    }\n});\n')),(0,l.kt)("h3",{id:"fscopyfile"},"fs.copyFile"),(0,l.kt)("h4",{id:"copyfilesync"},"copyFileSync"),(0,l.kt)("p",null,"\u540c\u6b65\u62f7\u8d1d"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const fs = require("fs");\n\nfs.copyFileSync("3.txt", "4.txt");\nlet data = fs.readFileSync("4.txt", "utf8");\n\nconsole.log(data); // Hello world\n')),(0,l.kt)("h4",{id:"copyfile"},"copyFile"),(0,l.kt)("p",null,"\u5f02\u6b65\u62f7\u8d1d"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const fs = require("fs");\n\nfs.copyFile("3.txt", "4.txt", () => {\n    fs.readFile("4.txt", "utf8", (err, data) => {\n        console.log(data); // Hello world\n    });\n});\n')),(0,l.kt)("h4",{id:"\u624b\u5199\u590d\u5236\u6587\u4ef6"},"\u624b\u5199\u590d\u5236\u6587\u4ef6"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'const fs = require("fs");\nconst path = require("path");\n\nasync function test() {\n  const fromFilename = path.resolve(__dirname, "./myfiles/1.jpeg");\n  const buffer = await fs.promises.readFile(fromFilename);\n  const toFilename = path.resolve(__dirname, "./myfiles/1.copy.jpeg");\n  await fs.promises.writeFile(toFilename, buffer);\n  console.log("copy success\uff01");\n}\n\ntest();\n')),(0,l.kt)("h3",{id:"fsstat"},"fs.stat"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'const fs = require("fs");\nconst path = require("path");\nconst filename = path.resolve(__dirname, "./myfiles/");\nasync function test() {\n  const stat = await fs.promises.stat(filename);\n  console.log(stat);\n  console.log("\u662f\u5426\u662f\u76ee\u5f55", stat.isDirectory());//true\n  console.log("\u662f\u5426\u662f\u6587\u4ef6", stat.isFile());//false\n}\n\ntest();\n')),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221030185943664.png",alt:"image-20221030185943664"})),(0,l.kt)("h3",{id:"fsreaddir"},"fs.readdir"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'const fs = require("fs");\nconst path = require("path");\nconst dirname = path.resolve(__dirname, "./myfiles/");\nasync function test() {\n  const pathes = await fs.promises.readdir(dirname);\n  console.log(pathes);\n}\n\ntest();\n')),(0,l.kt)("h3",{id:"fsmkdir"},"fs.mkdir"),(0,l.kt)("h4",{id:"mkdirsync"},"mkdirSync"),(0,l.kt)("p",null,"\u540c\u6b65\u521b\u5efa\uff0c\u53c2\u6570\u4e3a\u4e00\u4e2a\u76ee\u5f55\u7684\u8def\u5f84\uff0c\u6ca1\u6709\u8fd4\u56de\u503c\uff0c\u5728\u521b\u5efa\u76ee\u5f55\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5fc5\u987b\u4fdd\u8bc1\u4f20\u5165\u7684\u8def\u5f84\u524d\u9762\u7684\u6587\u4ef6\u76ee\u5f55\u90fd\u5b58\u5728\uff0c\u5426\u5219\u4f1a\u629b\u51fa\u5f02\u5e38"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'// \u5047\u8bbe\u5df2\u7ecf\u6709\u4e86 a \u6587\u4ef6\u5939\u548c a \u4e0b\u7684 b \u6587\u4ef6\u5939\nfs.mkdirSync("a/b/c")\n')),(0,l.kt)("h4",{id:"mkdir"},"mkdir"),(0,l.kt)("p",null,"\u5f02\u6b65\u521b\u5efa\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u56de\u8c03\u51fd\u6570"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'fs.mkdir("a/b/c", err => {\n    if (!err) console.log("\u521b\u5efa\u6210\u529f");\n});\n')),(0,l.kt)("p",null,"\u4f7f\u7528promise"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'const fs = require("fs");\nconst path = require("path");\nconst dirname = path.resolve(__dirname, "./myfiles/1");\nasync function test() {\n  await fs.promises.mkdir(dirname);\n  console.log("\u521b\u5efa\u76ee\u5f55\u6210\u529f");\n}\n\ntest();\n')),(0,l.kt)("h3",{id:"\u624b\u5199exist"},"\u624b\u5199exist"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'const fs = require("fs");\nconst path = require("path");\nconst dirname = path.resolve(__dirname, "./myfiles/3");\n\nasync function exists(filename) {\n  try {\n    await fs.promises.stat(filename);\n    return true;\n  } catch (err) {\n    if (err.code === "ENOENT") {\n      //\u6587\u4ef6\u4e0d\u5b58\u5728\n      return false;\n    }\n    throw err;\n  }\n}\n\nasync function test() {\n  const result = await exists(dirname);\n  if (result) {\n    console.log("\u76ee\u5f55\u5df2\u5b58\u5728\uff0c\u65e0\u9700\u64cd\u4f5c");\n  } else {\n    await fs.promises.mkdir(dirname);\n    console.log("\u76ee\u5f55\u521b\u5efa\u6210\u529f");\n  }\n}\n\ntest();\n')),(0,l.kt)("h3",{id:"file\u5bf9\u8c61\u7684\u5c01\u88c5\u53ca\u4e00\u4e9b\u65b9\u6cd5"},"file\u5bf9\u8c61\u7684\u5c01\u88c5\u53ca\u4e00\u4e9b\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'const fs = require("fs");\nconst path = require("path");\n\nconst fileName = path.resolve(__dirname, "../", "myfiles");\n\nclass File {\n  constructor(filename, name, ext, isFile, size, createTime, updateTime) {\n    this.filename = filename;\n    this.name = name;\n    this.ext = ext;\n    this.isFile = isFile;\n    this.size = size;\n    this.createTime = createTime;\n    this.updateTime = updateTime;\n  }\n\n  async getContent(encode) {\n    if (this.isFile) {\n      const content = await fs.promises.readFile(this.filename, encode);\n      return content;\n    }\n    return null;\n  }\n\n  async getChildren() {\n    if (this.isFile) {\n      return null;\n    } else {\n      let children = await fs.promises.readdir(this.filename);\n      children = children.map((item) =>\n        File.createFile(path.resolve(this.filename, item))\n      );\n      const result = await Promise.all(children);\n      return result;\n    }\n  }\n\n  static async createFile(filename) {\n    const stat = await fs.promises.stat(filename);\n    const name = path.basename(filename);\n    const ext = path.extname(filename);\n    const isFile = stat.isFile();\n    const size = stat.size;\n    const createTime = new Date(stat.birthtime);\n    const updateTime = new Date(stat.mtime);\n    return new File(filename, name, ext, isFile, size, createTime, updateTime);\n  }\n}\n\nasync function test() {\n  const result = await File.createFile(fileName);\n  //   console.log(result);\n  console.log(await result.getContent("utf-8"));\n  console.log(await result.getChildren());\n}\ntest();\n')),(0,l.kt)("h2",{id:"7-\u6587\u4ef6\u6d41"},"7. \u6587\u4ef6\u6d41"),(0,l.kt)("h3",{id:"\u4ec0\u4e48\u662f\u6d41"},"\u4ec0\u4e48\u662f\u6d41"),(0,l.kt)("p",null,"\u6d41\u662f\u6307\u6570\u636e\u7684\u6d41\u52a8\uff0c\u6570\u636e\u4ece\u4e00\u4e2a\u5730\u65b9\u7f13\u7f13\u7684\u6d41\u52a8\u5230\u53e6\u4e00\u4e2a\u5730\u65b9"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221030185958201.png",alt:"image-20221030185958201"})),(0,l.kt)("p",null,"\u6d41\u662f\u6709\u65b9\u5411\u7684"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u53ef\u8bfb\u6d41: Readable\uff08\u6570\u636e\u4ece\u6e90\u5934\u6d41\u5411\u5185\u5b58\uff09"),(0,l.kt)("li",{parentName:"ul"},"\u53ef\u5199\u6d41: Writable\uff08\u6570\u636e\u4ece\u5185\u5b58\u6d41\u5411\u6e90\u5934\uff09"),(0,l.kt)("li",{parentName:"ul"},"\u53cc\u5de5\u6d41\uff1aDuplex\uff08\u6570\u636e\u5373\u53ef\u4ece\u6e90\u5934\u6d41\u5411\u5185\u5b58\n\u53c8\u53ef\u4ece\u5185\u5b58\u6d41\u5411\u6e90\u5934\uff09")),(0,l.kt)("h3",{id:"\u4e3a\u4ec0\u4e48\u9700\u8981\u6d41"},"\u4e3a\u4ec0\u4e48\u9700\u8981\u6d41"),(0,l.kt)("p",null,"\u5176\u4ed6\u4ecb\u8d28\u548c\u5185\u5b58\u7684\u6570\u636e\u89c4\u6a21\u4e0d\u4e00\u81f4"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221030190007946.png",alt:"image-20221030190007946"})),(0,l.kt)("p",null,"\u5176\u4ed6\u4ecb\u8d28\u548c\u5185\u5b58\u7684\u6570\u636e\u5904\u7406\u80fd\u529b\u4e0d\u4e00\u81f4"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221030190014796.png",alt:"image-20221030190014796"})),(0,l.kt)("h3",{id:"\u4ec0\u4e48\u662f\u6587\u4ef6\u6d41"},"\u4ec0\u4e48\u662f\u6587\u4ef6\u6d41"),(0,l.kt)("p",null,"\u5185\u5b58\u6570\u636e\u548c\u78c1\u76d8\u6587\u4ef6\u6570\u636e\u4e4b\u95f4\u7684\u6d41\u52a8"),(0,l.kt)("h3",{id:"\u6587\u4ef6\u6d41\u7684\u521b\u5efa"},"\u6587\u4ef6\u6d41\u7684\u521b\u5efa"),(0,l.kt)("h4",{id:"fscreatereadstreampath-options"},"fs.createReadStream(path","[, options]",")"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u542b\u4e49\uff1a\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u53ef\u8bfb\u6d41\uff0c\u7528\u4e8e\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9"),(0,l.kt)("li",{parentName:"ul"},"path\uff1a\u8bfb\u53d6\u7684\u6587\u4ef6\u8def\u5f84"),(0,l.kt)("li",{parentName:"ul"},"options\uff1a\u53ef\u9009\u914d\u7f6e",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"encoding\uff1a\u7f16\u7801\u65b9\u5f0f"),(0,l.kt)("li",{parentName:"ul"},"start\uff1a\u8d77\u59cb\u5b57\u8282"),(0,l.kt)("li",{parentName:"ul"},"end\uff1a\u7ed3\u675f\u5b57\u8282"),(0,l.kt)("li",{parentName:"ul"},"highWaterMark\uff1a\u6bcf\u6b21\u8bfb\u53d6\u6570\u91cf"))),(0,l.kt)("li",{parentName:"ul"},"\u8fd4\u56de\uff1aReadable\u7684\u5b50\u7c7bReadStream ",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"rs.on(\u4e8b\u4ef6\u540d, \u5904\u7406\u51fd\u6570)",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"open",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6587\u4ef6\u6253\u5f00\u4e8b\u4ef6"),(0,l.kt)("li",{parentName:"ul"},"\u6587\u4ef6\u88ab\u6253\u5f00\u540e\u89e6\u53d1"))),(0,l.kt)("li",{parentName:"ul"},"error",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u53d1\u751f\u9519\u8bef\u65f6\u89e6\u53d1"))),(0,l.kt)("li",{parentName:"ul"},"close",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6587\u4ef6\u88ab\u5173\u95ed\u540e\u89e6\u53d1"),(0,l.kt)("li",{parentName:"ul"},"\u53ef\u901a\u8fc7rs.close\u624b\u52a8\u5173\u95ed"),(0,l.kt)("li",{parentName:"ul"},"\u6216\u6587\u4ef6\u8bfb\u53d6\u5b8c\u6210\u540e\u81ea\u52a8\u5173\u95ed",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"autoClose\u914d\u7f6e\u9879\u9ed8\u8ba4\u4e3atrue"))))),(0,l.kt)("li",{parentName:"ul"},"data",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u8bfb\u53d6\u5230\u4e00\u90e8\u5206\u6570\u636e\u540e\u89e6\u53d1"),(0,l.kt)("li",{parentName:"ul"},"\u6ce8\u518cdata\u4e8b\u4ef6\u540e\uff0c\u624d\u4f1a\u771f\u6b63\u5f00\u59cb\u8bfb\u53d6"),(0,l.kt)("li",{parentName:"ul"},"\u6bcf\u6b21\u8bfb\u53d6highWaterMark\u6307\u5b9a\u7684\u6570\u91cf"),(0,l.kt)("li",{parentName:"ul"},"\u56de\u8c03\u51fd\u6570\u4e2d\u4f1a\u9644\u5e26\u8bfb\u53d6\u5230\u7684\u6570\u636e",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u82e5\u6307\u5b9a\u4e86\u7f16\u7801\uff0c\u5219\u8bfb\u53d6\u5230\u7684\u6570\u636e\u4f1a\u81ea\u52a8\u6309\u7167\u7f16\u7801\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32"),(0,l.kt)("li",{parentName:"ul"},"\u82e5\u6ca1\u6709\u6307\u5b9a\u7f16\u7801\uff0c\u8bfb\u53d6\u5230\u7684\u6570\u636e\u662fBuffer"))))),(0,l.kt)("li",{parentName:"ul"},"end",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6240\u6709\u6570\u636e\u8bfb\u53d6\u5b8c\u6bd5\u540e\u89e6\u53d1"))))),(0,l.kt)("li",{parentName:"ul"},"rs.pause()",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6682\u505c\u8bfb\u53d6\uff0c \u4f1a\u89e6\u53d1pause\u4e8b\u4ef6"))),(0,l.kt)("li",{parentName:"ul"},"rs.resume()",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6062\u590d\u8bfb\u53d6\uff0c\u4f1a\u89e6\u53d1resume\u4e8b\u4ef6")))))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const fs = require("fs");\nconst path = require("path");\n\nconst filename = path.resolve(__dirname, "./abc.txt");\nconst rs = fs.createReadStream(filename, {\n  encoding: "utf-8",\n  highWaterMark: 1,//\u6bcf\u6b21\u8bfb\u53d6\u4e00\u4e2a\u5b57\u8282\n  autoClose: true //\u8bfb\u5b8c\u540e\u4f1a\u81ea\u52a8\u5b8c\u6bd5\uff0c\u9ed8\u8ba4\u4e3atrue\n});\n\nconsole.log(fs.existsSync(filename));\n\nrs.on("open", () => {\n  console.log("\u6587\u4ef6\u88ab\u6253\u5f00\u4e86");\n});\n\nrs.on("error", () => {\n  console.log("\u51fa\u9519\u4e86\uff01\uff01");\n});\n\nrs.on("close", () => {\n  console.log("\u6587\u4ef6\u5173\u95ed\u4e86");\n});\nrs.on("data", chunk => {\n  console.log("\u8bfb\u5230\u4e86\u4e00\u90e8\u5206\u6570\u636e\uff1a", chunk);\n  rs.pause(); //\u6682\u505c\n});\n\nrs.on("pause", () => {\n  console.log("\u6682\u505c\u4e86");\n  setTimeout(() => {\n    rs.resume();\n  }, 1000);\n});\n\nrs.on("resume", () => {\n  console.log("\u6062\u590d\u4e86");\n});\n\nrs.on("end", () => {\n  console.log("\u5168\u90e8\u6570\u636e\u8bfb\u53d6\u5b8c\u6bd5");\n});\n\n')),(0,l.kt)("h4",{id:"fscreatewritestreampath-options"},"fs.createWriteStream(path","[, options]",")"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"path\uff1a\u5199\u5165\u7684\u6587\u4ef6\u8def\u5f84"),(0,l.kt)("li",{parentName:"ul"},"options",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"flags\uff1a\u64cd\u4f5c\u6587\u4ef6\u7684\u65b9\u5f0f"),(0,l.kt)("li",{parentName:"ul"},"encoding\uff1a\u7f16\u7801\u65b9\u5f0f"),(0,l.kt)("li",{parentName:"ul"},"start\uff1a\u8d77\u59cb\u5b57\u8282"),(0,l.kt)("li",{parentName:"ul"},"highWaterMark\uff1a\u6bcf\u6b21\u6700\u591a\u5199\u5165\u7684\u5b57\u8282\u6570"))),(0,l.kt)("li",{parentName:"ul"},"\u8fd4\u56de\uff1aWritable\u7684\u5b57\u7c7bWriteStream",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"ws.on(\u4e8b\u4ef6\u540d, \u5904\u7406\u51fd\u6570)",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"open"),(0,l.kt)("li",{parentName:"ul"},"error"),(0,l.kt)("li",{parentName:"ul"},"close"))),(0,l.kt)("li",{parentName:"ul"},"ws.write(data)",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5199\u5165\u4e00\u7ec4\u6570\u636e"),(0,l.kt)("li",{parentName:"ul"},"data\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32\u6216Buffer"),(0,l.kt)("li",{parentName:"ul"},"\u8fd4\u56de\u4e00\u4e2aboolean\u503c",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"true\uff1a\u5199\u5165\u901a\u9053\u6ca1\u6709\u88ab\u586b\u6ee1\uff0c\u63a5\u4e0b\u6765\u7684\u6570\u636e\u53ef\u4ee5\u76f4\u63a5\u5199\u5165\uff0c\u65e0\u987b\u6392\u961f"),(0,l.kt)("li",{parentName:"ul"},"false\uff1a\u5199\u5165\u901a\u9053\u76ee\u524d\u5df2\u88ab\u586b\u6ee1\uff0c\u63a5\u4e0b\u6765\u7684\u6570\u636e\u5c06\u8fdb\u5165\u5199\u5165\u961f\u5217"))),(0,l.kt)("li",{parentName:"ul"},"\u5f53\u5199\u5165\u961f\u5217\u6e05\u7a7a\u65f6\uff0c\u4f1a\u89e6\u53d1drain\u4e8b\u4ef6"))),(0,l.kt)("li",{parentName:"ul"},"ws.end(","[data]",")",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u7ed3\u675f\u5199\u5165\uff0c\u5c06\u81ea\u52a8\u5173\u95ed\u6587\u4ef6",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u662f\u5426\u81ea\u52a8\u5173\u95ed\u53d6\u51b3\u4e8eautoClose\u914d\u7f6e"),(0,l.kt)("li",{parentName:"ul"},"\u9ed8\u8ba4\u4e3atrue"))),(0,l.kt)("li",{parentName:"ul"},"data\u662f\u53ef\u9009\u7684\uff0c\u8868\u793a\u5173\u95ed\u524d\u7684\u6700\u540e\u4e00\u6b21\u5199\u5165")))))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const fs = require("fs");\nconst path = require("path");\n\nconst filename = path.resolve(__dirname, "./temp/abc.txt");\n\nconst ws = fs.createWriteStream(filename, {\n  encoding: "utf-8",\n  highWaterMark: 16 * 1024\n});\n\nlet i = 0;\n//\u4e00\u76f4\u5199\uff0c\u76f4\u5230\u5230\u8fbe\u4e0a\u9650\uff0c\u6216\u65e0\u6cd5\u518d\u76f4\u63a5\u5199\u5165\nfunction write() {\n  let flag = true;\n  while (i < 1024 * 1024 * 10 && flag) {\n    flag = ws.write("a"); //\u5199\u5165a\uff0c\u5f97\u5230\u4e0b\u4e00\u6b21\u8fd8\u80fd\u4e0d\u80fd\u76f4\u63a5\u5199\n    i++;\n  }\n}\n\nwrite();\n\nws.on("drain", () => {\n  write();\n});\n\n')),(0,l.kt)("h3",{id:"rspipews"},"rs.pipe(ws)"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5c06\u53ef\u8bfb\u6d41\u8fde\u63a5\u5230\u53ef\u5199\u6d41"),(0,l.kt)("li",{parentName:"ul"},"\u8fd4\u56de\u53c2\u6570\u7684\u503c"),(0,l.kt)("li",{parentName:"ul"},"\u8be5\u65b9\u6cd5\u53ef\u89e3\u51b3\u80cc\u538b\u95ee\u9898")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6587\u4ef6\u7684\u590d\u5236")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const fs = require("fs");\nconst path = require("path");\n\n//\u65b9\u5f0f2\nasync function method2() {\n  const from = path.resolve(__dirname, "./temp/abc.txt");\n  const to = path.resolve(__dirname, "./temp/abc2.txt");\n  console.time("\u65b9\u5f0f2");\n\n  const rs = fs.createReadStream(from);\n  const ws = fs.createWriteStream(to);\n\n  rs.pipe(ws);\n\n  rs.on("close", () => {\n    console.timeEnd("\u65b9\u5f0f2");\n  });\n}\n\nmethod2();\n\n')),(0,l.kt)("h3",{id:"\u590d\u5236\u6587\u4ef6"},"\u590d\u5236\u6587\u4ef6"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const fs = require("fs");\nconst path = require("path");\n\n//\u65b9\u5f0f1\nasync function method1() {\n  const from = path.resolve(__dirname, "./temp/abc.txt");\n  const to = path.resolve(__dirname, "./temp/abc2.txt");\n  console.time("\u65b9\u5f0f1");\n  const content = await fs.promises.readFile(from);\n  await fs.promises.writeFile(to, content);\n  console.timeEnd("\u65b9\u5f0f1");\n  console.log("\u590d\u5236\u5b8c\u6210");\n}\n\n//\u65b9\u5f0f2\nasync function method2() {\n  const from = path.resolve(__dirname, "./temp/abc.txt");\n  const to = path.resolve(__dirname, "./temp/abc2.txt");\n  console.time("\u65b9\u5f0f2");\n\n  const rs = fs.createReadStream(from);\n  const ws = fs.createWriteStream(to);\n  rs.on("data", chunk => {\n    //\u8bfb\u5230\u4e00\u90e8\u5206\u6570\u636e\n    const flag = ws.write(chunk);\n    if (!flag) {\n      //\u8868\u793a\u4e0b\u4e00\u6b21\u5199\u5165\uff0c\u4f1a\u9020\u6210\u80cc\u538b\n      rs.pause(); //\u6682\u505c\u8bfb\u53d6\n    }\n  });\n\n  ws.on("drain", () => {\n    //\u53ef\u4ee5\u7ee7\u7eed\u5199\u4e86\n    rs.resume();\n  });\n\n  rs.on("close", () => {\n    //\u5199\u5b8c\u4e86\n    ws.end(); //\u5b8c\u6bd5\u5199\u5165\u6d41\n    console.timeEnd("\u65b9\u5f0f2");\n    console.log("\u590d\u5236\u5b8c\u6210");\n  });\n}\n\nmethod2();const fs = require("fs");\nconst path = require("path");\n\n//\u65b9\u5f0f1\nasync function method1() {\n  const from = path.resolve(__dirname, "./temp/abc.txt");\n  const to = path.resolve(__dirname, "./temp/abc2.txt");\n  console.time("\u65b9\u5f0f1");\n  const content = await fs.promises.readFile(from);\n  await fs.promises.writeFile(to, content);\n  console.timeEnd("\u65b9\u5f0f1");\n  console.log("\u590d\u5236\u5b8c\u6210");\n}\n\n//\u65b9\u5f0f2\nasync function method2() {\n  const from = path.resolve(__dirname, "./temp/abc.txt");\n  const to = path.resolve(__dirname, "./temp/abc2.txt");\n  console.time("\u65b9\u5f0f2");\n\n  const rs = fs.createReadStream(from);\n  const ws = fs.createWriteStream(to);\n  rs.on("data", chunk => {\n    //\u8bfb\u5230\u4e00\u90e8\u5206\u6570\u636e\n    const flag = ws.write(chunk);\n    if (!flag) {\n      //\u8868\u793a\u4e0b\u4e00\u6b21\u5199\u5165\uff0c\u4f1a\u9020\u6210\u80cc\u538b\n      rs.pause(); //\u6682\u505c\u8bfb\u53d6\n    }\n  });\n\n  ws.on("drain", () => {\n    //\u53ef\u4ee5\u7ee7\u7eed\u5199\u4e86\n    rs.resume();\n  });\n\n  rs.on("close", () => {\n    //\u5199\u5b8c\u4e86\n    ws.end(); //\u5b8c\u6bd5\u5199\u5165\u6d41\n    console.timeEnd("\u65b9\u5f0f2");\n    console.log("\u590d\u5236\u5b8c\u6210");\n  });\n}\n\nmethod2();\n')),(0,l.kt)("h2",{id:"8-net\u6a21\u5757"},"8. net\u6a21\u5757"),(0,l.kt)("h3",{id:"\u56de\u987ehttp\u8bf7\u6c42"},"\u56de\u987ehttp\u8bf7\u6c42"),(0,l.kt)("p",null,"\u666e\u901a\u6a21\u5f0f"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221030190030659.png",alt:"image-20221030190030659"})),(0,l.kt)("p",null,"\u957f\u8fde\u63a5\u6a21\u5f0f"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221030190037588.png",alt:"image-20221030190037588"})),(0,l.kt)("h3",{id:"net\u6a21\u5757\u80fd\u5e72\u4ec0\u4e48"},"net\u6a21\u5757\u80fd\u5e72\u4ec0\u4e48"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"net\u662f\u4e00\u4e2a\u901a\u4fe1\u6a21\u5757"),(0,l.kt)("li",{parentName:"ul"},"\u5229\u7528\u5b83\uff0c\u53ef\u4ee5\u5b9e\u73b0",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u8fdb\u7a0b\u95f4\u7684\u901a\u4fe1 IPC"),(0,l.kt)("li",{parentName:"ul"},"\u7f51\u7edc\u901a\u4fe1 TCP/IP"))),(0,l.kt)("li",{parentName:"ul"},"\u521b\u5efa\u5ba2\u6237\u7aef",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"net.createConnection(options[, connectListener])")),(0,l.kt)("li",{parentName:"ul"},"\u8fd4\u56de\uff1asocket",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("img",{parentName:"li",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221030190047816.png",alt:"image-20221030190047816"})),(0,l.kt)("li",{parentName:"ul"},"socket\u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u6587\u4ef6"),(0,l.kt)("li",{parentName:"ul"},"\u5728node\u4e2d\u8868\u73b0\u4e3a\u4e00\u4e2a\u53cc\u5de5\u6d41\u5bf9\u8c61"),(0,l.kt)("li",{parentName:"ul"},"\u901a\u8fc7\u5411\u6d41\u5199\u5165\u5185\u5bb9\u53d1\u9001\u6570\u636e"),(0,l.kt)("li",{parentName:"ul"},"\u901a\u8fc7\u76d1\u542c\u6d41\u7684\u5185\u5bb9\u83b7\u53d6\u6570\u636e"))))),(0,l.kt)("li",{parentName:"ul"},"\u521b\u5efa\u670d\u52a1\u5668",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"net.createServer()")),(0,l.kt)("li",{parentName:"ul"},"\u8fd4\u56de\uff1aserver\u5bf9\u8c61",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"net.createServer()"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u76d1\u542c\u5f53\u524d\u8ba1\u7b97\u673a\u4e2d\u67d0\u4e2a\u7aef\u53e3"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},'server.on("listening", ()=>{})'),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5f00\u59cb\u76d1\u542c\u7aef\u53e3\u540e\u89e6\u53d1\u7684\u4e8b\u4ef6"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},'server.on("connection", socket=>{})'),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5f53\u67d0\u4e2a\u8fde\u63a5\u5230\u6765\u65f6\uff0c\u89e6\u53d1\u8be5\u4e8b\u4ef6"),(0,l.kt)("li",{parentName:"ul"},"\u4e8b\u4ef6\u7684\u76d1\u542c\u51fd\u6570\u4f1a\u83b7\u5f97\u4e00\u4e2asocket\u5bf9\u8c61",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("img",{parentName:"li",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221030190101487.png",alt:"image-20221030190101487"}))))))))))),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"server.js")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const net = require("net");\nconst server = net.createServer();\nconst fs = require("fs");\nconst path = require("path");\n\nserver.listen(9527); // \u670d\u52a1\u5668\u76d1\u542c9527\u7aef\u53e3\n\nserver.on("listening", () => {\n  console.log("server listen 9527");\n});\n\nserver.on("connection", socket => {\n  console.log("\u6709\u5ba2\u6237\u7aef\u8fde\u63a5\u5230\u670d\u52a1\u5668");\n\n  socket.on("data", async chunk => {\n    // console.log(chunk.toString("utf-8"));\n    const filename = path.resolve(__dirname, "./hsq.jpg");\n    const bodyBuffer = await fs.promises.readFile(filename);\n    const headBuffer = Buffer.from(`HTTP/1.1 200 OK\nContent-Type: image/jpeg\n\n`,\n      "utf-8"\n    );\n    const result = Buffer.concat([headBuffer, bodyBuffer]);\n    socket.write(result);\n    socket.end();\n  });\n\n  socket.on("end", () => {\n    console.log("\u8fde\u63a5\u5173\u95ed\u4e86");\n  });\n});\n\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"client.js")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const net = require("net");\nconst socket = net.createConnection(\n  {\n    host: "duyi.ke.qq.com",\n    port: 80\n  },\n  () => {\n    console.log("\u8fde\u63a5\u6210\u529f");\n  }\n);\n\nvar receive = null;\n/**\n * \u63d0\u70bc\u51fa\u54cd\u5e94\u5b57\u7b26\u4e32\u7684\u6d88\u606f\u5934\u548c\u6d88\u606f\u4f53\n * @param {*} response\n */\nfunction parseResponse(response) {\n  const index = response.indexOf("\\r\\n\\r\\n");\n  const head = response.substring(0, index);\n  const body = response.substring(index + 2);\n  const headParts = head.split("\\r\\n");\n  const headerArray = headParts.slice(1).map(str => {\n    return str.split(":").map(s => s.trim());\n  });\n  const header = headerArray.reduce((a, b) => {\n    a[b[0]] = b[1];\n    return a;\n  }, {});\n  return {\n    header,\n    body: body.trimStart()\n  };\n}\n\nfunction isOver() {\n  //\u9700\u8981\u63a5\u6536\u7684\u6d88\u606f\u4f53\u7684\u603b\u5b57\u8282\u6570\n  const contentLength = +receive.header["Content-Length"];\n  const curReceivedLength = Buffer.from(receive.body, "utf-8").byteLength;\n  console.log(contentLength, curReceivedLength);\n  return curReceivedLength > contentLength;\n}\n\nsocket.on("data", chunk => {\n  const response = chunk.toString("utf-8");\n  if (!receive) {\n    //\u7b2c\u4e00\u6b21\n    receive = parseResponse(response);\n    if (isOver()) {\n      socket.end();\n    }\n    return;\n  }\n  receive.body += response;\n  if (isOver()) {\n    socket.end();\n    return;\n  }\n});\n\nsocket.write(`GET / HTTP/1.1\nHost: duyi.ke.qq.com\nConnection: keep-alive\n\n`);\n\nsocket.on("close", () => {\n  console.log(receive.body);\n  console.log("\u7ed3\u675f\u4e86\uff01");\n});\n\n')),(0,l.kt)("h2",{id:"9http\u6a21\u5757"},"9.HTTP\u6a21\u5757"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"http\u6a21\u5757\u5efa\u7acb\u5728net\u6a21\u5757\u4e4b\u4e0a"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u65e0\u987b\u624b\u52a8\u7ba1\u7406socket"),(0,l.kt)("li",{parentName:"ul"},"\u65e0\u987b\u624b\u52a8\u7ec4\u88c5\u6d88\u606f\u683c\u5f0f",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"http.request(url[, options][, callback])"),(0,l.kt)("a",{parentName:"li",href:"https://nodejs.org/dist/latest-v12.x/docs/api/http.html#http_http_request_url_options_callback"},"\u5b98\u65b9\u6587\u6863")))))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"http.createServer([options][, requestListener])"),(0,l.kt)("a",{parentName:"p",href:"https://nodejs.org/dist/latest-v12.x/docs/api/http.html#http_http_createserver_options_requestlistener"},"\u5b98\u65b9\u6587\u6863"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u603b\u7ed3"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u6211\u662f\u5ba2\u6237\u7aef",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u8bf7\u6c42\uff1aClientRequest\u5bf9\u8c61"),(0,l.kt)("li",{parentName:"ul"},"\u54cd\u5e94\uff1aIncomingMessage\u5bf9\u8c61"))),(0,l.kt)("li",{parentName:"ul"},"\u6211\u662f\u670d\u52a1\u5668",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u8bf7\u6c42\uff1aIncomingMessage\u5bf9\u8c61"),(0,l.kt)("li",{parentName:"ul"},"\u54cd\u5e94\uff1aServerResponse\u5bf9\u8c61")))))),(0,l.kt)("h2",{id:"\u521b\u5efa\u5ba2\u6237\u7aef\u8bf7\u6c42\u63a5\u53e3"},"\u521b\u5efa\u5ba2\u6237\u7aef\u8bf7\u6c42\u63a5\u53e3"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const http = require("http");\n\nconst request = http.request(\n  "http://localhost:5005/api/movie",\n  {\n    method: "GET",\n  },\n  (resp) => {\n    console.log("\u670d\u52a1\u5668\u54cd\u5e94\u7684\u72b6\u6001\u7801", resp.statusCode);\n    console.log("\u670d\u52a1\u5668\u54cd\u5e94\u5934", resp.headers);\n    let result = "";\n    resp.on("data", (chunk) => {\n      result += chunk.toString("utf-8");\n    });\n\n    resp.on("end", (chunk) => {\n      console.log(JSON.parse(result));\n    });\n  }\n);\n\nrequest.end(); //\u8868\u793a\u6d88\u606f\u4f53\u7ed3\u675f\n')),(0,l.kt)("h3",{id:"\u521b\u5efa\u57fa\u672c-web-\u670d\u52a1\u5668"},"\u521b\u5efa\u57fa\u672c Web \u670d\u52a1\u5668"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const http = require('http')\n\n// \u521b\u5efa web \u670d\u52a1\u5668\u5b9e\u4f8b\nconst server = http.createServer()\n\n// \u4e3a\u670d\u52a1\u5668\u5b9e\u4f8b\u7ed1\u5b9a request \u4e8b\u4ef6\uff0c\u76d1\u542c\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\nserver.on('request', function (req, res) {\n  const url = req.url\n  const method = req.method\n  const str = `Your request url is ${url}, and request method is ${method}`\n  console.log(str)\n\n  // \u8bbe\u7f6e Content-Type \u54cd\u5e94\u5934\uff0c\u89e3\u51b3\u4e2d\u6587\u4e71\u7801\u7684\u95ee\u9898\n  res.setHeader('Content-Type', 'text/html; charset=utf-8')\n  // \u5411\u5ba2\u6237\u7aef\u54cd\u5e94\u5185\u5bb9\n  res.end(str)\n})\n\nserver.listen(8080, function () {\n  console.log('server running at http://127.0.0.1:8080')\n})\n")),(0,l.kt)("h3",{id:"\u5b9e\u73b0\u7b80\u964b\u8def\u7531\u6548\u679c"},"\u5b9e\u73b0\u7b80\u964b\u8def\u7531\u6548\u679c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const http = require('http')\nconst server = http.createServer()\n\nserver.on('request', (req, res) => {\n  const url = req.url\n  // \u8bbe\u7f6e\u9ed8\u8ba4\u7684\u54cd\u5e94\u5185\u5bb9\u4e3a 404 Not found\n  let content = '<h1>404 Not found!</h1>'\n  // \u5224\u65ad\u7528\u6237\u8bf7\u6c42\u7684\u662f\u5426\u4e3a / \u6216 /index.html \u9996\u9875\n  // \u5224\u65ad\u7528\u6237\u8bf7\u6c42\u7684\u662f\u5426\u4e3a /about.html \u5173\u4e8e\u9875\u9762\n  if (url === '/' || url === '/index.html') {\n    content = '<h1>\u9996\u9875</h1>'\n  } else if (url === '/about.html') {\n    content = '<h1>\u5173\u4e8e\u9875\u9762</h1>'\n  }\n\n  res.setHeader('Content-Type', 'text/html; charset=utf-8')\n  res.end(content)\n})\n\nserver.listen(80, () => {\n  console.log('server running at http://127.0.0.1')\n})\n")),(0,l.kt)("h3",{id:"\u8bfb\u53d6\u6587\u4ef6\u7684\u8def\u7531\u6548\u679c"},"\u8bfb\u53d6\u6587\u4ef6\u7684\u8def\u7531\u6548\u679c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'//\u9759\u6001\u8d44\u6e90\u670d\u52a1\u5668\n// http://localhost:9527/index.html  -> public/index.html \u6587\u4ef6\u5185\u5bb9\n// http://localhost:9527/css/index.css  -> public/css/index.css \u6587\u4ef6\u5185\u5bb9\n\nconst http = require("http");\nconst URL = require("url");\nconst path = require("path");\nconst fs = require("fs");\n\nasync function getStat(filename) {\n  try {\n    return await fs.promises.stat(filename);\n  } catch {\n    return null;\n  }\n}\n\n/**\n * \u5f97\u5230\u8981\u5904\u7406\u7684\u6587\u4ef6\u5185\u5bb9\n */\nasync function getFileContent(url) {\n  const urlObj = URL.parse(url);\n  let filename; //\u8981\u5904\u7406\u7684\u6587\u4ef6\u8def\u5f84\n  filename = path.resolve(__dirname, "public", urlObj.pathname.substr(1));\n  let stat = await getStat(filename);\n  if (!stat) {\n    //\u6587\u4ef6\u4e0d\u5b58\u5728\n    return null;\n  } else if (stat.isDirectory()) {\n    //\u6587\u4ef6\u662f\u4e00\u4e2a\u76ee\u5f55\n    filename = path.resolve(\n      __dirname,\n      "public",\n      urlObj.pathname.substr(1),\n      "index.html"\n    );\n    stat = await getStat(filename);\n    if (!stat) {\n      return null;\n    } else {\n      return await fs.promises.readFile(filename);\n    }\n  } else {\n    return await fs.promises.readFile(filename);\n  }\n}\n\nasync function handler(req, res) {\n  const info = await getFileContent(req.url);\n  if (info) {\n    res.write(info);\n  } else {\n    res.statusCode = 404;\n    res.write("Resource is not exist");\n  }\n  res.end();\n}\n\nconst server = http.createServer(handler);\nserver.on("listening", () => {\n  console.log("server listen 6000");\n});\nserver.listen(6100);\n\n')),(0,l.kt)("h2",{id:"10https\u6a21\u5757"},"10.HTTPS\u6a21\u5757"),(0,l.kt)("h3",{id:"\u670d\u52a1\u5668\u7ed3\u6784"},"\u670d\u52a1\u5668\u7ed3\u6784"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221030190120028.png",alt:"image-20221030190120028"})),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221030190126732.png",alt:"image-20221030190126732"})),(0,l.kt)("h3",{id:"\u8bc1\u4e66\u51c6\u5907"},"\u8bc1\u4e66\u51c6\u5907"),(0,l.kt)("h4",{id:"\u65b9\u5f0f1\u7f51\u4e0a\u8d2d\u4e70\u6743\u5a01\u673a\u6784\u8bc1\u4e66"},"\u65b9\u5f0f1\uff1a\u7f51\u4e0a\u8d2d\u4e70\u6743\u5a01\u673a\u6784\u8bc1\u4e66"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u51c6\u5907\u597dmoney"),(0,l.kt)("li",{parentName:"ul"},"\u51c6\u5907\u597d\u670d\u52a1\u5668"),(0,l.kt)("li",{parentName:"ul"},"\u51c6\u5907\u597d\u57df\u540d"),(0,l.kt)("li",{parentName:"ul"},"\u8be5\u65b9\u5f0f\u5e94\u7528\u5728\u90e8\u7f72\u73af\u5883\u4e2d")),(0,l.kt)("h4",{id:"\u65b9\u68482\u672c\u5730\u4ea7\u751f\u8bc1\u4e66"},"\u65b9\u68482\uff1a\u672c\u5730\u4ea7\u751f\u8bc1\u4e66"),(0,l.kt)("p",null,"\u81ea\u5df1\u4f5c\u4e3a\u6743\u5a01\u673a\u6784\u53d1\u5e03\u8bc1\u4e66"),(0,l.kt)("h3",{id:"\u5177\u4f53\u65b9\u6cd5"},"\u5177\u4f53\u65b9\u6cd5"),(0,l.kt)("h4",{id:"\u5b89\u88c5openssl"},"\u5b89\u88c5openssl"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u4e0b\u8f7d\u6e90\u7801\uff0c\u81ea\u884c\u6784\u5efa",(0,l.kt)("a",{parentName:"p",href:"https://github.com/openssl/openssl"},"github"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u4e0b\u8f7dwindows\u5b89\u88c5\u5305",(0,l.kt)("a",{parentName:"p",href:"https://slproweb.com/products/Win32OpenSSL.html"},"\u94fe\u63a5"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"mac\u4e0b\u81ea\u5e26")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u901a\u8fc7\u8f93\u5165\u547d\u4ee4openssl\u6d4b\u8bd5"))),(0,l.kt)("h4",{id:"\u751f\u6210ca\u79c1\u94a5"},"\u751f\u6210CA\u79c1\u94a5"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"openssl genrsa -des3 -out ca-pri-key.pem 1024"),(0,l.kt)("li",{parentName:"ul"},"genrsa\uff1a\u5bc6\u94a5\u5bf9\u751f\u6210\u7b97\u6cd5"),(0,l.kt)("li",{parentName:"ul"},"-des3\uff1a\u4f7f\u7528\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5des3\u5bf9\u79c1\u94a5\u8fdb\u4e00\u6b65\u52a0\u5bc6",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u547d\u4ee4\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u4f1a\u8ba9\u7528\u6237\u8f93\u5165\u5bc6\u7801\uff0c\u8be5\u5bc6\u7801\u5c06\u4f5c\u4e3ades3\u7b97\u6cd5\u7684key"))),(0,l.kt)("li",{parentName:"ul"},"-out ca-pri-key.pem\uff1a\u5c06\u52a0\u5bc6\u540e\u7684\u79c1\u94a5\u4fdd\u5b58\u5230\u5f53\u524d\u76ee\u5f55\u7684ca-pri-key.pem\u6587\u4ef6\u4e2d",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"pem\uff1aPrivacy-Enhanced Mail (PEM) "))),(0,l.kt)("li",{parentName:"ul"},"1024\uff1a\u79c1\u94a5\u7684\u5b57\u8282\u6570")),(0,l.kt)("h4",{id:"\u751f\u6210ca\u516c\u94a5\u8bc1\u4e66\u8bf7\u6c42"},"\u751f\u6210CA\u516c\u94a5\uff08\u8bc1\u4e66\u8bf7\u6c42\uff09"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"openssl req -new -key ca-pri-key.pem -out ca-pub-key.pem"),(0,l.kt)("li",{parentName:"ul"},"\u901a\u8fc7\u79c1\u94a5\u6587\u4ef6ca-pri-key.pem\u4e2d\u7684\u5185\u5bb9\uff0c\u751f\u6210\u5bf9\u5e94\u7684\u516c\u94a5\uff0c\u4fdd\u5b58\u5230ca-pub-key.pem\u4e2d"),(0,l.kt)("li",{parentName:"ul"},"\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u8981\u4f7f\u7528\u4e4b\u524d\u8f93\u5165\u7684\u5bc6\u7801\u6765\u5b9e\u73b0\u5bf9\u79c1\u94a5\u6587\u4ef6\u7684\u89e3\u5bc6"),(0,l.kt)("li",{parentName:"ul"},"\u5176\u4ed6\u8f93\u5165\u4fe1\u606f",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Country Name\uff1a\u56fd\u5bb6\u540d  CN"),(0,l.kt)("li",{parentName:"ul"},"Province Name\uff1a\u7701\u4efd\u540d Sichuan"),(0,l.kt)("li",{parentName:"ul"},"Local Name\uff1a\u57ce\u5e02\u540d"),(0,l.kt)("li",{parentName:"ul"},"Company Name\uff1a\u516c\u53f8\u540d"),(0,l.kt)("li",{parentName:"ul"},"Unit Name\uff1a\u90e8\u95e8\u540d"),(0,l.kt)("li",{parentName:"ul"},"Common Name\uff1a\u7ad9\u70b9\u540d"),(0,l.kt)("li",{parentName:"ul"},"...")))),(0,l.kt)("h4",{id:"\u751f\u6210ca\u8bc1\u4e66"},"\u751f\u6210CA\u8bc1\u4e66"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"openssl x509 -req -in ca-pub-key.pem -signkey ca-pri-key.pem -out ca-cert.crt"),(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528X.509\u8bc1\u4e66\u6807\u51c6\uff0c\u901a\u8fc7\u8bc1\u4e66\u8bf7\u6c42\u6587\u4ef6ca-pub-key.pem\u751f\u6210\u8bc1\u4e66\uff0c\u5e76\u4f7f\u7528\u79c1\u94a5ca-pri-key.pem\u52a0\u5bc6\uff0c\u7136\u540e\u628a\u8bc1\u4e66\u4fdd\u5b58\u5230ca-cert.crt\u6587\u4ef6\u4e2d")),(0,l.kt)("h4",{id:"\u751f\u6210\u670d\u52a1\u5668\u79c1\u94a5"},"\u751f\u6210\u670d\u52a1\u5668\u79c1\u94a5"),(0,l.kt)("p",null,"openssl genrsa -out server-key.pem 1024"),(0,l.kt)("h4",{id:"\u751f\u6210\u670d\u52a1\u5668\u516c\u94a5"},"\u751f\u6210\u670d\u52a1\u5668\u516c\u94a5"),(0,l.kt)("p",null,"openssl req -new -key server-key.pem -out server-scr.pem"),(0,l.kt)("h4",{id:"\u751f\u6210\u670d\u52a1\u5668\u8bc1\u4e66"},"\u751f\u6210\u670d\u52a1\u5668\u8bc1\u4e66"),(0,l.kt)("p",null,"openssl x509 -req -CA ca-cert.crt -CAkey ca-pri-key.pem -CAcreateserial -in server-scr.pem -out server-cert.crt"),(0,l.kt)("h4",{id:"\u6a21\u62df"},"\u6a21\u62df"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221030190138180.png",alt:"image-20221030190138180"})),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"server.js")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'//\u9759\u6001\u8d44\u6e90\u670d\u52a1\u5668\n// http://localhost:9527/index.html  -> public/index.html \u6587\u4ef6\u5185\u5bb9\n// http://localhost:9527/css/index.css  -> public/css/index.css \u6587\u4ef6\u5185\u5bb9\n\nconst https = require("https");\nconst URL = require("url");\nconst path = require("path");\nconst fs = require("fs");\n\nasync function getStat(filename) {\n  try {\n    return await fs.promises.stat(filename);\n  } catch {\n    return null;\n  }\n}\n\n/**\n * \u5f97\u5230\u8981\u5904\u7406\u7684\u6587\u4ef6\u5185\u5bb9\n */\nasync function getFileContent(url) {\n  const urlObj = URL.parse(url);\n  let filename; //\u8981\u5904\u7406\u7684\u6587\u4ef6\u8def\u5f84\n  filename = path.resolve(__dirname, "public", urlObj.pathname.substr(1));\n  let stat = await getStat(filename);\n  if (!stat) {\n    //\u6587\u4ef6\u4e0d\u5b58\u5728\n    return null;\n  } else if (stat.isDirectory()) {\n    //\u6587\u4ef6\u662f\u4e00\u4e2a\u76ee\u5f55\n    filename = path.resolve(\n      __dirname,\n      "public",\n      urlObj.pathname.substr(1),\n      "index.html"\n    );\n    stat = await getStat(filename);\n    if (!stat) {\n      return null;\n    } else {\n      return await fs.promises.readFile(filename);\n    }\n  } else {\n    return await fs.promises.readFile(filename);\n  }\n}\n\nasync function handler(req, res) {\n  const info = await getFileContent(req.url);\n  if (info) {\n    res.write(info);\n  } else {\n    res.statusCode = 404;\n    res.write("Resource is not exist");\n  }\n  res.end();\n}\n\nconst server = https.createServer(\n  {\n    key: fs.readFileSync(path.resolve(__dirname, "./server-key.pem")), //\u79c1\u94a5\n    cert: fs.readFileSync(path.resolve(__dirname, "./server-cert.crt"))\n  },\n  handler\n);\nserver.on("listening", () => {\n  console.log("server listen 443");\n});\nserver.listen(443);\n')),(0,l.kt)("h2",{id:"11node\u751f\u547d\u5468\u671f"},"11.node\u751f\u547d\u5468\u671f"),(0,l.kt)("h3",{id:"\u603b\u7ed3"},"\u603b\u7ed3"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://october-x-image-host.oss-cn-hangzhou.aliyuncs.com/markdown-imgsimage-20221030190148221.png",alt:"image-20221030190148221"})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"timers\uff1a\u5b58\u653e\u8ba1\u65f6\u5668\u7684\u56de\u8c03\u51fd\u6570"),(0,l.kt)("li",{parentName:"ul"},"poll\uff1a\u8f6e\u8be2\u961f\u5217",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u9664\u4e86timers\u3001checks"),(0,l.kt)("li",{parentName:"ul"},"\u7edd\u5927\u90e8\u5206\u56de\u8c03\u90fd\u4f1a\u653e\u5165\u8be5\u961f\u5217"),(0,l.kt)("li",{parentName:"ul"},"\u6bd4\u5982\uff1a\u6587\u4ef6\u7684\u8bfb\u53d6\u3001\u76d1\u542c\u7528\u6237\u8bf7\u6c42"),(0,l.kt)("li",{parentName:"ul"},"\u8fd0\u4f5c\u65b9\u5f0f",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u5982\u679cpoll\u4e2d\u6709\u56de\u8c03\uff0c\u4f9d\u6b21\u6267\u884c\u56de\u8c03\uff0c\u76f4\u5230\u6e05\u7a7a\u961f\u5217"),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679cpoll\u4e2d\u6ca1\u6709\u56de\u8c03",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u7b49\u5f85\u5176\u4ed6\u961f\u5217\u4e2d\u51fa\u73b0\u56de\u8c03\uff0c\u7ed3\u675f\u8be5\u9636\u6bb5\uff0c\u8fdb\u5165\u4e0b\u4e00\u9636\u6bb5"),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u5176\u4ed6\u961f\u5217\u4e5f\u6ca1\u6709\u56de\u8c03\uff0c\u6301\u7eed\u7b49\u5f85\uff0c\u76f4\u5230\u51fa\u73b0\u56de\u8c03\u4e3a\u6b62"))))),(0,l.kt)("li",{parentName:"ul"},"check\uff1a\u68c0\u67e5\u9636\u6bb5",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528setImmediate\u7684\u56de\u8c03\u4f1a\u76f4\u63a5\u8fdb\u5165\u8fd9\u4e2a\u961f\u5217"))),(0,l.kt)("li",{parentName:"ul"},"\u4e8b\u4ef6\u5faa\u73af\u4e2d\uff0c\u6bcf\u6b21\u6253\u7b97\u6267\u884c\u4e00\u4e2a\u56de\u8c03\u4e4b\u524d\uff0c\u5fc5\u987b\u8981\u5148\u6e05\u7a7anextTick\u548cpromise\u961f\u5217")))),(0,l.kt)("h3",{id:"\u9762\u8bd5\u9898"},"\u9762\u8bd5\u9898"),(0,l.kt)("h4",{id:"\u98981"},"\u98981"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'setTimeout(() => {\n  console.log("setTimeout");\n}, 0);\n\nsetImmediate(() => {\n  console.log("setImmediate");\n});\n')),(0,l.kt)("p",null,"\u5176\u5b9e\u8fd9\u4e2a\u6211\u4eec\u77e5\u9053\u9700\u8981\u770b\u60c5\u51b5\u4e86\uff0c\u56e0\u4e3a\u4e8b\u4ef6\u5faa\u73af\u5f00\u59cb\uff0c\u4f1a\u5148\u7ecf\u8fc7timers\uff0c\u5982\u679c\u7535\u8111\u901f\u5ea6\u5feb\u7684\u8bdd\u5751\u4f60\u4f1a\u5148\u8f93\u51fasetTimeout\uff0c\u53cd\u4e4bsetImmediate\u3002\u6709\u4e24\u79cd\u60c5\u51b5\u3002"),(0,l.kt)("h4",{id:"\u98982"},"\u98982"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const fs = require("fs");\nfs.readFile("./index.js", () => {\n  setTimeout(() => console.log(1), 0);\n  setImmediate(() => console.log(2));\n});\n//\u8f93\u51fa2,1\n')),(0,l.kt)("p",null,"\u7a0b\u5e8f\u4f1a\u5728poll\u9636\u6bb5\u7b49\u5f85\u6587\u4ef6\u8bfb\u53d6\uff0c\u7136\u540e\u4f1a\u8fdb\u5165checked\u9636\u6bb5\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u4f1a\u6267\u884csetImmediate\uff0c\u7136\u540e\u518d\u6267\u884ctimers\u4e2d\u7684\u4e8b\u4ef6\u3002"),(0,l.kt)("h4",{id:"\u98983"},"\u98983"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'async function async1() {\n  console.log("async1 start");\n  await async2();\n  console.log("async1 end");\n}\nasync function async2() {\n  console.log("async2");\n}\nconsole.log("script start");\nsetTimeout(function() {\n  console.log("setTimeout0");\n}, 0);\nsetTimeout(function() {\n  console.log("setTimeout3");\n}, 3);\nsetImmediate(() => console.log("setImmediate"));\nprocess.nextTick(() => console.log("nextTick"));\nasync1();\nnew Promise(function(resolve) {\n  console.log("promise1");\n  resolve();\n  console.log("promise2");\n}).then(function() {\n  console.log("promise3");\n});\nconsole.log("script end");\n/*\nscript start\nasync1 start\nasync2\npromise1\npromise2\nscript end\nnextTick\nasync1 end\npromise3\nsetTimeout0\nsetImmediate\nsetTimeout3\n*/\n//\u6700\u540e\u4e24\u4e2a\u987a\u5e8f\u4e0d\u786e\u5b9a\uff0c\u539f\u56e0\u548c\u7b2c\u4e00\u9898\u4e00\u6837\n')),(0,l.kt)("h2",{id:"12-\u6269\u5c55eventemitter"},"12. ","[\u6269\u5c55]","EventEmitter"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"node\u4e8b\u4ef6\u7ba1\u7406\u7684\u901a\u7528\u673a\u5236"),(0,l.kt)("li",{parentName:"ul"},"\u5185\u90e8\u7ef4\u62a4\u591a\u4e2a\u4e8b\u4ef6\u961f\u5217")),(0,l.kt)("p",null,"\u5f88\u50cfvue\u7684\u7ec4\u4ef6\u4e8b\u4ef6\uff0c\u8bdd\u4e0d\u591a\u8bf4\uff0c\u76f4\u63a5\u4e0a\u4ee3\u7801"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const { EventEmitter } = require("events");\n// \u521b\u5efa\u4e00\u4e2a\u4e8b\u4ef6\u5904\u7406\u5bf9\u8c61\n// \u53ef\u4ee5\u6ce8\u518c\u4e8b\u4ef6\uff0c\u53ef\u4ee5\u89e6\u53d1\u4e8b\u4ef6\nconst ee = new EventEmitter();\n\nee.on("abc", () => {\n  console.log("abc\u4e8b\u4ef6\u89e6\u53d1\u4e861");\n});\nconst fn2 = () => {\n  console.log("abc\u4e8b\u4ef6\u89e6\u53d1\u4e862");\n}\nee.on("abc", fn2);\n\nee.once("abc", () => {\n  console.log("abc\u4e8b\u4ef6\u89e6\u53d1\u4e863", "\u8be5\u4e8b\u4ef6\u53ea\u89e6\u53d1\u4e00\u6b21");\n});\n\nee.on("bcd", () => {\n  console.log("bcd\u4e8b\u4ef6\u89e6\u53d1\u4e863");\n});\n\nee.emit("abc"); //\u89e6\u53d1\u540d\u4e3aabc\u7684\u4e8b\u4ef6\uff0c\u4f1a\u4f9d\u6b21\u8fd0\u884c\u6ce8\u518c\u7684\u4e8b\u4ef6\u51fd\u6570\uff0c\u4e5f\u662f\u53ef\u4ee5\u4f20\u53c2\u7684\u3002\nee.off("abc", fn2)//\u79fb\u9664fn2\nee.emit("abc"); //\u89e6\u53d1\u540d\u4e3aabc\u7684\u4e8b\u4ef6\uff0c\u4f1a\u4f9d\u6b21\u8fd0\u884c\u6ce8\u518c\u7684\u4e8b\u4ef6\u51fd\u6570\nee.emit("abc"); //\u89e6\u53d1\u540d\u4e3aabc\u7684\u4e8b\u4ef6\uff0c\u4f1a\u4f9d\u6b21\u8fd0\u884c\u6ce8\u518c\u7684\u4e8b\u4ef6\u51fd\u6570\nee.emit("bcd"); //\u89e6\u53d1\u540d\u4e3abcd\u7684\u4e8b\u4ef6\uff0c\u4f1a\u4f9d\u6b21\u8fd0\u884c\u6ce8\u518c\u7684\u4e8b\u4ef6\u51fd\u6570\n\nconsole.log("script end")\n')),(0,l.kt)("h3",{id:"\u5c01\u88c5\u7f51\u7edc\u8bf7\u6c42\u6a21\u5757"},"\u5c01\u88c5\u7f51\u7edc\u8bf7\u6c42\u6a21\u5757"),(0,l.kt)("p",null,"MyRequest.js"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'// \u53d1\u9001\u7f51\u7edc\u8bf7\u6c42\u6a21\u5757\nconst http = require("http");\nconst { EventEmitter } = require("events");\n\nmodule.exports = class extends EventEmitter {\n  constructor(url, options) {\n    super();\n    this.url = url;\n    this.options = options;\n  }\n\n  send(body = "") {\n    const request = http.request(this.url, this.options, res => {\n      let result = "";\n      res.on("data", chunk => {\n        result += chunk.toString("utf-8");\n      });\n      res.on("end", () => {\n        this.emit("res", res.headers, result);\n      });\n    });\n    request.write(body);\n    request.end();\n  }\n};\n\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const MyRequest = require("./MyRequest");\n\nconst request = new MyRequest("http://duyi.ke.qq.com");\n\nrequest.send();\n\nrequest.on("res", (headers, body) => {\n  console.log(headers);\n  console.log(body);\n});\n\n')))}u.isMDXComponent=!0}}]);