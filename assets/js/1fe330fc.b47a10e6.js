"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7933],{3905:(t,e,n)=>{n.d(e,{Zo:()=>u,kt:()=>c});var a=n(7294);function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e){if(null==t)return{};var n,a,l=function(t,e){if(null==t)return{};var n,a,l={},r=Object.keys(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||(l[n]=t[n]);return l}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}var s=a.createContext({}),d=function(t){var e=a.useContext(s),n=e;return t&&(n="function"==typeof t?t(e):p(p({},e),t)),n},u=function(t){var e=d(t.components);return a.createElement(s.Provider,{value:e},t.children)},o="mdxType",m={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},k=a.forwardRef((function(t,e){var n=t.components,l=t.mdxType,r=t.originalType,s=t.parentName,u=i(t,["components","mdxType","originalType","parentName"]),o=d(n),k=l,c=o["".concat(s,".").concat(k)]||o[k]||m[k]||r;return n?a.createElement(c,p(p({ref:e},u),{},{components:n})):a.createElement(c,p({ref:e},u))}));function c(t,e){var n=arguments,l=e&&e.mdxType;if("string"==typeof t||l){var r=n.length,p=new Array(r);p[0]=k;var i={};for(var s in e)hasOwnProperty.call(e,s)&&(i[s]=e[s]);i.originalType=t,i[o]="string"==typeof t?t:l,p[1]=i;for(var d=2;d<r;d++)p[d]=n[d];return a.createElement.apply(null,p)}return a.createElement.apply(null,n)}k.displayName="MDXCreateElement"},4465:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>s,contentTitle:()=>p,default:()=>o,frontMatter:()=>r,metadata:()=>i,toc:()=>d});var a=n(7462),l=(n(7294),n(3905));const r={},p="2.1 \u4e8c\u5962\u4ea4\u6613",i={unversionedId:"Java/\u9879\u76ee/2.1 \u4e8c\u5962\u4ea4\u6613",id:"Java/\u9879\u76ee/2.1 \u4e8c\u5962\u4ea4\u6613",title:"2.1 \u4e8c\u5962\u4ea4\u6613",description:"\u5143\u52a8\u529b\u4e8c\u5962\u4ea4\u6613\u5e73\u53f0\uff1a\u4e00\u7ebf\u4e92\u8054\u7f51\u5927\u5382\u7684\u4e00\u4e2a\u4e8c\u624b\u5962\u4f88\u54c1\u4ea4\u6613\u5e73\u53f0\u9879\u76ee",source:"@site/docs/Java/10.\u9879\u76ee/2.1 \u4e8c\u5962\u4ea4\u6613.md",sourceDirName:"Java/10.\u9879\u76ee",slug:"/Java/\u9879\u76ee/2.1 \u4e8c\u5962\u4ea4\u6613",permalink:"/docs/Java/\u9879\u76ee/2.1 \u4e8c\u5962\u4ea4\u6613",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Java/10.\u9879\u76ee/2.1 \u4e8c\u5962\u4ea4\u6613.md",tags:[],version:"current",frontMatter:{},sidebar:"Java",previous:{title:"4. \u5de5\u4f5c\u6d41",permalink:"/docs/Java/\u9879\u76ee/\u5de5\u4f5c\u6d41"},next:{title:"2.2 \u4e8c\u5962\u4ea4\u6613",permalink:"/docs/Java/\u9879\u76ee/2.2 \u4e8c\u5962\u4ea4\u6613"}},s={},d=[{value:"#\u5b66\u4e60\u76ee\u6807",id:"\u5b66\u4e60\u76ee\u6807",level:2},{value:"#1. \u8d70\u8fdb\u7535\u5546-\u9762\u8bd5\u4e86\u89e3",id:"1-\u8d70\u8fdb\u7535\u5546-\u9762\u8bd5\u4e86\u89e3",level:2},{value:"#1.1 \u7535\u5546\u884c\u4e1a\u5206\u6790",id:"11-\u7535\u5546\u884c\u4e1a\u5206\u6790",level:3},{value:"#1.2 \u7535\u5546\u7cfb\u7edf\u6280\u672f\u7279\u70b9",id:"12-\u7535\u5546\u7cfb\u7edf\u6280\u672f\u7279\u70b9",level:3},{value:"#1.3 \u4e3b\u8981\u7535\u5546\u6a21\u5f0f",id:"13-\u4e3b\u8981\u7535\u5546\u6a21\u5f0f",level:3},{value:"#2. \u5143\u52a8\u529b\u4e8c\u5962-\u9700\u6c42\u5206\u6790\u4e0e\u7cfb\u7edf\u8bbe\u8ba1",id:"2-\u5143\u52a8\u529b\u4e8c\u5962-\u9700\u6c42\u5206\u6790\u4e0e\u7cfb\u7edf\u8bbe\u8ba1",level:2},{value:"#2.1 \u9700\u6c42\u5206\u6790",id:"21-\u9700\u6c42\u5206\u6790",level:3},{value:"#2.2 \u7cfb\u7edf\u8bbe\u8ba1",id:"22-\u7cfb\u7edf\u8bbe\u8ba1",level:3},{value:"#2.2.1 \u524d\u540e\u7aef\u5206\u79bb",id:"221-\u524d\u540e\u7aef\u5206\u79bb",level:4},{value:"#2.2.2 \u6280\u672f\u67b6\u6784-\u9762\u8bd5",id:"222-\u6280\u672f\u67b6\u6784-\u9762\u8bd5",level:4},{value:"#2.2.3 \u7cfb\u7edf\u67b6\u6784\u56fe-\u9762\u8bd5",id:"223-\u7cfb\u7edf\u67b6\u6784\u56fe-\u9762\u8bd5",level:4},{value:"#3. \u5143\u52a8\u529b\u4e8c\u5962-\u6846\u67b6\u642d\u5efa",id:"3-\u5143\u52a8\u529b\u4e8c\u5962-\u6846\u67b6\u642d\u5efa",level:2},{value:"#3.1 \u73af\u5883\u51c6\u5907",id:"31-\u73af\u5883\u51c6\u5907",level:3},{value:"#\u5bfc\u5165\u865a\u62df\u673a",id:"\u5bfc\u5165\u865a\u62df\u673a",level:4},{value:"#1\u4fee\u6539vmware vmnet8",id:"1\u4fee\u6539vmware-vmnet8",level:4},{value:"#2\u4fee\u6539\u672c\u673avmnet8 \u5730\u5740",id:"2\u4fee\u6539\u672c\u673avmnet8-\u5730\u5740",level:4},{value:"#3\u542f\u52a8\u865a\u62df\u673a",id:"3\u542f\u52a8\u865a\u62df\u673a",level:4},{value:"#4xshell crt finalshell \u8fde\u63a5\u5230\u865a\u62df\u673a",id:"4xshell-crt-finalshell-\u8fde\u63a5\u5230\u865a\u62df\u673a",level:4},{value:"#3.2 \u9879\u76ee\u7ed3\u6784\u8bf4\u660e",id:"32-\u9879\u76ee\u7ed3\u6784\u8bf4\u660e",level:3},{value:"#3.3 \u7236\u5de5\u7a0b\u642d\u5efa",id:"33-\u7236\u5de5\u7a0b\u642d\u5efa",level:3},{value:"#3.3.1 \u4e00\u7ea7\u7236\u5de5\u7a0b\u642d\u5efa",id:"331-\u4e00\u7ea7\u7236\u5de5\u7a0b\u642d\u5efa",level:4},{value:"#3.3.2 \u4e8c\u7ea7\u7236\u5de5\u7a0b\u6a21\u5757\u642d\u5efa",id:"332-\u4e8c\u7ea7\u7236\u5de5\u7a0b\u6a21\u5757\u642d\u5efa",level:4},{value:"#3.4 Eureka\u5fae\u670d\u52a1\u642d\u5efa",id:"34-eureka\u5fae\u670d\u52a1\u642d\u5efa",level:3},{value:"#3.5 \u516c\u5171\u6a21\u5757\u642d\u5efa",id:"35-\u516c\u5171\u6a21\u5757\u642d\u5efa",level:3},{value:"#3.5.1 \u5168\u5c40\u516c\u5171\u6a21\u5757",id:"351-\u5168\u5c40\u516c\u5171\u6a21\u5757",level:4},{value:"#3.5.2 \u6570\u636e\u8bbf\u95ee\u516c\u5171\u6a21\u5757\u642d\u5efa",id:"352-\u6570\u636e\u8bbf\u95ee\u516c\u5171\u6a21\u5757\u642d\u5efa",level:4},{value:"#3.6 \u5546\u54c1\u5fae\u670d\u52a1\u642d\u5efa",id:"36-\u5546\u54c1\u5fae\u670d\u52a1\u642d\u5efa",level:3},{value:"#3.6.1 \u5546\u54c1\u5fae\u670d\u52a1API\u5de5\u7a0b\u642d\u5efa",id:"361-\u5546\u54c1\u5fae\u670d\u52a1api\u5de5\u7a0b\u642d\u5efa",level:4},{value:"#3.6.2 \u5fae\u670d\u52a1\u5de5\u7a0b\u642d\u5efa",id:"362-\u5fae\u670d\u52a1\u5de5\u7a0b\u642d\u5efa",level:4},{value:"#4. \u5546\u54c1\u5fae\u670d\u52a1-\u54c1\u724c\u589e\u5220\u6539\u67e5",id:"4-\u5546\u54c1\u5fae\u670d\u52a1-\u54c1\u724c\u589e\u5220\u6539\u67e5",level:2},{value:"#4.1 \u9700\u6c42\u5206\u6790",id:"41-\u9700\u6c42\u5206\u6790",level:3},{value:"#4.2 \u8868\u7ed3\u6784\u5206\u6790",id:"42-\u8868\u7ed3\u6784\u5206\u6790",level:3},{value:"#4.3 \u4ee3\u7801\u5b9e\u73b0",id:"43-\u4ee3\u7801\u5b9e\u73b0",level:3},{value:"#4.3.1 \u54c1\u724c\u5217\u8868",id:"431-\u54c1\u724c\u5217\u8868",level:4},{value:"#4.3.2 \u6839\u636eID\u67e5\u8be2\u54c1\u724c",id:"432-\u6839\u636eid\u67e5\u8be2\u54c1\u724c",level:4},{value:"#4.3.3 \u65b0\u589e\u54c1\u724c",id:"433-\u65b0\u589e\u54c1\u724c",level:4},{value:"#4.3.4 \u4fee\u6539\u54c1\u724c",id:"434-\u4fee\u6539\u54c1\u724c",level:4},{value:"#4.3.5 \u5220\u9664\u54c1\u724c",id:"435-\u5220\u9664\u54c1\u724c",level:4},{value:"#4.3.6 \u54c1\u724c\u5217\u8868\u6761\u4ef6\u67e5\u8be2",id:"436-\u54c1\u724c\u5217\u8868\u6761\u4ef6\u67e5\u8be2",level:4},{value:"#4.3.7 \u54c1\u724c\u5217\u8868\u5206\u9875\u67e5\u8be2",id:"437-\u54c1\u724c\u5217\u8868\u5206\u9875\u67e5\u8be2",level:4},{value:"#4.3.8 \u54c1\u724c\u5217\u8868\u6761\u4ef6+\u5206\u9875\u67e5\u8be2",id:"438-\u54c1\u724c\u5217\u8868\u6761\u4ef6\u5206\u9875\u67e5\u8be2",level:4},{value:"#5. \u516c\u5171\u5f02\u5e38\u5904\u7406",id:"5-\u516c\u5171\u5f02\u5e38\u5904\u7406",level:2},{value:"#\u5b66\u4e60\u76ee\u6807",id:"\u5b66\u4e60\u76ee\u6807-1",level:2},{value:"#1. \u8de8\u57df\u89e3\u51b3\u65b9\u6848CORS-\u9762\u8bd5",id:"1-\u8de8\u57df\u89e3\u51b3\u65b9\u6848cors-\u9762\u8bd5",level:2},{value:"#1.1 \u4ec0\u4e48\u662f\u8de8\u57df",id:"11-\u4ec0\u4e48\u662f\u8de8\u57df",level:3},{value:"#1.2 CORS\u7b80\u4ecb",id:"12-cors\u7b80\u4ecb",level:3},{value:"#2. \u5bfc\u5165\u57fa\u7840\u67b6\u6784\u9879\u76ee\uff08\u4e86\u89e3\uff09",id:"2-\u5bfc\u5165\u57fa\u7840\u67b6\u6784\u9879\u76ee\u4e86\u89e3",level:2},{value:"#2.1 \u5bfc\u5165\u9879\u76ee",id:"21-\u5bfc\u5165\u9879\u76ee",level:3},{value:"#3.\u89c4\u683c\u53c2\u6570\u4e0e\u5206\u7c7b\u7ba1\u7406\uff08\u540e\u53f0\uff09-\u91cd\u70b9",id:"3\u89c4\u683c\u53c2\u6570\u4e0e\u5206\u7c7b\u7ba1\u7406\u540e\u53f0-\u91cd\u70b9",level:2},{value:"#3.1 \u89c4\u683c\u53c2\u6570\u7ba1\u7406",id:"31-\u89c4\u683c\u53c2\u6570\u7ba1\u7406",level:3},{value:"#3.1.1 \u9700\u6c42\u5206\u6790",id:"311-\u9700\u6c42\u5206\u6790",level:4},{value:"#3.1.2 \u8868\u7ed3\u6784\u5206\u6790",id:"312-\u8868\u7ed3\u6784\u5206\u6790",level:4},{value:"#3.2 \u5206\u7c7b\u7ba1\u7406",id:"32-\u5206\u7c7b\u7ba1\u7406",level:3},{value:"#3.2.1 \u9700\u6c42\u5206\u6790",id:"321-\u9700\u6c42\u5206\u6790",level:4},{value:"#3.2.2 \u8868\u7ed3\u6784\u5206\u6790",id:"322-\u8868\u7ed3\u6784\u5206\u6790",level:4},{value:"#4.\u901a\u7528mapper\u81ea\u5b9a\u4e49\u65b9\u6cd5-\u91cd\u70b9\u638c\u63e1",id:"4\u901a\u7528mapper\u81ea\u5b9a\u4e49\u65b9\u6cd5-\u91cd\u70b9\u638c\u63e1",level:2},{value:"#4.1 \u6839\u636e\u5546\u54c1\u5206\u7c7b\u540d\u79f0\u67e5\u8be2\u54c1\u724c\u5217\u8868",id:"41-\u6839\u636e\u5546\u54c1\u5206\u7c7b\u540d\u79f0\u67e5\u8be2\u54c1\u724c\u5217\u8868",level:3},{value:"#4.1.1 \u8868\u7ed3\u6784\u5206\u6790",id:"411-\u8868\u7ed3\u6784\u5206\u6790",level:4},{value:"#4.1.2 \u4ee3\u7801\u5b9e\u73b0",id:"412-\u4ee3\u7801\u5b9e\u73b0",level:4},{value:"#4.2 \u6839\u636e\u5546\u54c1\u5206\u7c7b\u540d\u79f0\u67e5\u8be2\u89c4\u683c\u5217\u8868",id:"42-\u6839\u636e\u5546\u54c1\u5206\u7c7b\u540d\u79f0\u67e5\u8be2\u89c4\u683c\u5217\u8868",level:3},{value:"#4.2.1 \u8868\u7ed3\u6784\u5206\u6790",id:"421-\u8868\u7ed3\u6784\u5206\u6790",level:4},{value:"#4.2.2 \u4ee3\u7801\u5b9e\u73b0",id:"422-\u4ee3\u7801\u5b9e\u73b0",level:4},{value:"#5. \u5206\u5e03\u5f0f\u6587\u4ef6\u5b58\u50a8-FastDFS",id:"5-\u5206\u5e03\u5f0f\u6587\u4ef6\u5b58\u50a8-fastdfs",level:2},{value:"#5.1 FastDFS\u7b80\u4ecb",id:"51-fastdfs\u7b80\u4ecb",level:3},{value:"#5.1.1 FastDFS\u4f53\u7cfb\u7ed3\u6784",id:"511-fastdfs\u4f53\u7cfb\u7ed3\u6784",level:4},{value:"#5.1.2 \u4e0a\u4f20\u6d41\u7a0b",id:"512-\u4e0a\u4f20\u6d41\u7a0b",level:4},{value:"#5.2 FastDFS\u642d\u5efa-\u4e86\u89e3",id:"52-fastdfs\u642d\u5efa-\u4e86\u89e3",level:3},{value:"#5.3 \u6587\u4ef6\u5b58\u50a8\u5fae\u670d\u52a1",id:"53-\u6587\u4ef6\u5b58\u50a8\u5fae\u670d\u52a1",level:3},{value:"#5.4 \u6587\u4ef6\u4e0a\u4f20-\u91cd\u70b9",id:"54-\u6587\u4ef6\u4e0a\u4f20-\u91cd\u70b9",level:3},{value:"#5.4.1 \u6587\u4ef6\u4fe1\u606f\u5c01\u88c5",id:"541-\u6587\u4ef6\u4fe1\u606f\u5c01\u88c5",level:4},{value:"#5.4.2 \u6587\u4ef6\u64cd\u4f5c",id:"542-\u6587\u4ef6\u64cd\u4f5c",level:4},{value:"#5.4.3 \u6587\u4ef6\u4e0a\u4f20",id:"543-\u6587\u4ef6\u4e0a\u4f20",level:4},{value:"#5.5 Postman\u6d4b\u8bd5\u6587\u4ef6\u4e0a\u4f20",id:"55-postman\u6d4b\u8bd5\u6587\u4ef6\u4e0a\u4f20",level:3},{value:"#\u8bfe\u7a0b\u76ee\u6807",id:"\u8bfe\u7a0b\u76ee\u6807",level:2},{value:"#1.\u5fae\u670d\u52a1\u7f51\u5173Gateway \u8fc7\u6ee4+\u8def\u7531",id:"1\u5fae\u670d\u52a1\u7f51\u5173gateway-\u8fc7\u6ee4\u8def\u7531",level:2},{value:"#1.1 \u5fae\u670d\u52a1\u7f51\u5173\u6982\u8ff0-\u9762\u8bd5",id:"11-\u5fae\u670d\u52a1\u7f51\u5173\u6982\u8ff0-\u9762\u8bd5",level:3},{value:"#1.2 \u5fae\u670d\u52a1\u7f51\u5173\u5fae\u670d\u52a1\u642d\u5efa",id:"12-\u5fae\u670d\u52a1\u7f51\u5173\u5fae\u670d\u52a1\u642d\u5efa",level:3},{value:"#1.3 \u5fae\u670d\u52a1\u7f51\u5173\u8de8\u57df",id:"13-\u5fae\u670d\u52a1\u7f51\u5173\u8de8\u57df",level:3},{value:"#1.4 \u5fae\u670d\u52a1\u7f51\u5173\u8fc7\u6ee4\u5668",id:"14-\u5fae\u670d\u52a1\u7f51\u5173\u8fc7\u6ee4\u5668",level:3},{value:"#2 \u7f51\u5173\u9650\u6d41",id:"2-\u7f51\u5173\u9650\u6d41",level:2},{value:"#2.1 \u601d\u8def\u5206\u6790",id:"21-\u601d\u8def\u5206\u6790",level:3},{value:"#2.2 \u4ee4\u724c\u6876\u7b97\u6cd5",id:"22-\u4ee4\u724c\u6876\u7b97\u6cd5",level:3},{value:"#2.3 \u7f51\u5173\u9650\u6d41\u4ee3\u7801\u5b9e\u73b0",id:"23-\u7f51\u5173\u9650\u6d41\u4ee3\u7801\u5b9e\u73b0",level:3},{value:"#3. BCrypt\u5bc6\u7801\u52a0\u5bc6",id:"3-bcrypt\u5bc6\u7801\u52a0\u5bc6",level:2},{value:"#3.1 BCrypt\u5feb\u901f\u5165\u95e8",id:"31-bcrypt\u5feb\u901f\u5165\u95e8",level:3},{value:"#3.2 \u65b0\u589e\u7ba1\u7406\u5458\u5bc6\u7801\u52a0\u5bc6-\u638c\u63e1",id:"32-\u65b0\u589e\u7ba1\u7406\u5458\u5bc6\u7801\u52a0\u5bc6-\u638c\u63e1",level:3},{value:"#3.2.1 \u9700\u6c42\u4e0e\u8868\u7ed3\u6784\u5206\u6790",id:"321-\u9700\u6c42\u4e0e\u8868\u7ed3\u6784\u5206\u6790",level:4},{value:"#3.2.2 \u4ee3\u7801\u5b9e\u73b0",id:"322-\u4ee3\u7801\u5b9e\u73b0",level:4},{value:"#3.3 \u7ba1\u7406\u5458\u767b\u5f55\u5bc6\u7801\u9a8c\u8bc1",id:"33-\u7ba1\u7406\u5458\u767b\u5f55\u5bc6\u7801\u9a8c\u8bc1",level:3},{value:"#3.3.1 \u9700\u6c42\u5206\u6790",id:"331-\u9700\u6c42\u5206\u6790",level:4},{value:"#3.3.2 \u4ee3\u7801\u5b9e\u73b0",id:"332-\u4ee3\u7801\u5b9e\u73b0",level:4},{value:"#4.\u52a0\u5bc6\u7b97\u6cd5(\u4e86\u89e3)",id:"4\u52a0\u5bc6\u7b97\u6cd5\u4e86\u89e3",level:2},{value:"#4.1.\u53ef\u9006\u52a0\u5bc6\u7b97\u6cd5",id:"41\u53ef\u9006\u52a0\u5bc6\u7b97\u6cd5",level:3},{value:"#4.1.1. \u5bf9\u79f0\u52a0\u5bc6",id:"411-\u5bf9\u79f0\u52a0\u5bc6",level:4},{value:"#4.1.2. \u975e\u5bf9\u79f0\u52a0\u5bc6",id:"412-\u975e\u5bf9\u79f0\u52a0\u5bc6",level:4},{value:"#4.2.\u4e0d\u53ef\u9006\u52a0\u5bc6\u7b97\u6cd5",id:"42\u4e0d\u53ef\u9006\u52a0\u5bc6\u7b97\u6cd5",level:3},{value:"#4.3.Base64\u7f16\u7801",id:"43base64\u7f16\u7801",level:3},{value:"#5. JWT \u5b9e\u73b0\u5fae\u670d\u52a1\u9274\u6743",id:"5-jwt-\u5b9e\u73b0\u5fae\u670d\u52a1\u9274\u6743",level:2},{value:"#5.1 \u4ec0\u4e48\u662f\u5fae\u670d\u52a1\u9274\u6743",id:"51-\u4ec0\u4e48\u662f\u5fae\u670d\u52a1\u9274\u6743",level:3},{value:"#5.2 JWT",id:"52-jwt",level:3},{value:"#5.3 JJWT\u7b7e\u53d1\u4e0e\u9a8c\u8bc1token",id:"53-jjwt\u7b7e\u53d1\u4e0e\u9a8c\u8bc1token",level:3},{value:"#5.3.1 \u521b\u5efatoken",id:"531-\u521b\u5efatoken",level:4},{value:"#5.3.2 \u89e3\u6790token",id:"532-\u89e3\u6790token",level:4},{value:"#5.3.3 \u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4",id:"533-\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4",level:4},{value:"#5.3.4 \u81ea\u5b9a\u4e49claims",id:"534-\u81ea\u5b9a\u4e49claims",level:4},{value:"#5.4 \u5143\u52a8\u529b\u4e8c\u5962\u5fae\u670d\u52a1\u9274\u6743\u4ee3\u7801\u5b9e\u73b0-\u91cd\u70b9",id:"54-\u5143\u52a8\u529b\u4e8c\u5962\u5fae\u670d\u52a1\u9274\u6743\u4ee3\u7801\u5b9e\u73b0-\u91cd\u70b9",level:3},{value:"#5.4.1 \u601d\u8def\u5206\u6790-\u91cd\u70b9\u7406\u89e3",id:"541-\u601d\u8def\u5206\u6790-\u91cd\u70b9\u7406\u89e3",level:4},{value:"#5.4.2 \u7cfb\u7edf\u5fae\u670d\u52a1\u7b7e\u53d1token",id:"542-\u7cfb\u7edf\u5fae\u670d\u52a1\u7b7e\u53d1token",level:4},{value:"#5.4.3 \u7f51\u5173\u8fc7\u6ee4\u5668\u9a8c\u8bc1token",id:"543-\u7f51\u5173\u8fc7\u6ee4\u5668\u9a8c\u8bc1token",level:4},{value:"#\u5b66\u4e60\u76ee\u6807",id:"\u5b66\u4e60\u76ee\u6807-2",level:2},{value:"#1. \u5206\u5e03\u5f0fID\u751f\u6210\u89e3\u51b3\u65b9\u6848-\u9762\u8bd5",id:"1-\u5206\u5e03\u5f0fid\u751f\u6210\u89e3\u51b3\u65b9\u6848-\u9762\u8bd5",level:2},{value:"#\u4e3a\u4ec0\u4e48\u751f\u6210\u552f\u4e00ID",id:"\u4e3a\u4ec0\u4e48\u751f\u6210\u552f\u4e00id",level:3},{value:"#1.1 \u5206\u5e03\u5f0fID\u751f\u6210\u89e3\u51b3\u65b9\u6848",id:"11-\u5206\u5e03\u5f0fid\u751f\u6210\u89e3\u51b3\u65b9\u6848",level:3},{value:"#1.1.1 UUID",id:"111-uuid",level:4},{value:"#1.1.2 Redis",id:"112-redis",level:4},{value:"#1.1.3 \u5f00\u6e90\u7b97\u6cd5snowflake",id:"113-\u5f00\u6e90\u7b97\u6cd5snowflake",level:4},{value:"#1.2 snowflake\u5feb\u901f\u5165\u95e8-\u638c\u63e1",id:"12-snowflake\u5feb\u901f\u5165\u95e8-\u638c\u63e1",level:3},{value:"#1.2.1 \u5feb\u901f\u5165\u95e8",id:"121-\u5feb\u901f\u5165\u95e8",level:4},{value:"#1.2.2 \u914d\u7f6e\u5206\u5e03\u5f0fID\u751f\u6210\u5668",id:"122-\u914d\u7f6e\u5206\u5e03\u5f0fid\u751f\u6210\u5668",level:4},{value:"#2 \u65b0\u589e\u548c\u4fee\u6539\u5546\u54c1",id:"2-\u65b0\u589e\u548c\u4fee\u6539\u5546\u54c1",level:2},{value:"#2.1 \u6982\u5ff5\u4e0e\u8868\u7ed3\u6784\u5206\u6790",id:"21-\u6982\u5ff5\u4e0e\u8868\u7ed3\u6784\u5206\u6790",level:3},{value:"#2.1.1 SPU\u4e0eSKU\u6982\u5ff5",id:"211-spu\u4e0esku\u6982\u5ff5",level:4},{value:"#2.1.2 \u8868\u7ed3\u6784\u5206\u6790",id:"212-\u8868\u7ed3\u6784\u5206\u6790",level:4},{value:"#2.2 \u5b9e\u73b0\u601d\u8def",id:"22-\u5b9e\u73b0\u601d\u8def",level:3},{value:"#2.3 \u4ee3\u7801\u5b9e\u73b0-\u65e5\u5e38\u5de5\u4f5c",id:"23-\u4ee3\u7801\u5b9e\u73b0-\u65e5\u5e38\u5de5\u4f5c",level:3},{value:"#2.3.1 SPU\u4e0eSKU\u5217\u8868\u7684\u4fdd\u5b58",id:"231-spu\u4e0esku\u5217\u8868\u7684\u4fdd\u5b58",level:4},{value:"#2.3.2 \u54c1\u724c\u4e0e\u5206\u7c7b\u5173\u8054",id:"232-\u54c1\u724c\u4e0e\u5206\u7c7b\u5173\u8054",level:4},{value:"#2.3.3 \u6839\u636eID\u67e5\u8be2\u5546\u54c1",id:"233-\u6839\u636eid\u67e5\u8be2\u5546\u54c1",level:4},{value:"#2.3.4 \u4fdd\u5b58\u4fee\u6539",id:"234-\u4fdd\u5b58\u4fee\u6539",level:4},{value:"#3 \u5546\u54c1\u5ba1\u6838\u4e0e\u4e0a\u4e0b\u67b6-\u65e5\u5e38\u5de5\u4f5c",id:"3-\u5546\u54c1\u5ba1\u6838\u4e0e\u4e0a\u4e0b\u67b6-\u65e5\u5e38\u5de5\u4f5c",level:2},{value:"#3.1 \u9700\u6c42\u5206\u6790",id:"31-\u9700\u6c42\u5206\u6790",level:3},{value:"#3.2 \u5b9e\u73b0\u601d\u8def",id:"32-\u5b9e\u73b0\u601d\u8def",level:3},{value:"#3.3 \u4ee3\u7801\u5b9e\u73b0",id:"33-\u4ee3\u7801\u5b9e\u73b0",level:3},{value:"#3.3.1 \u5546\u54c1\u5ba1\u6838",id:"331-\u5546\u54c1\u5ba1\u6838",level:4},{value:"#3.3.2 \u4e0b\u67b6\u5546\u54c1",id:"332-\u4e0b\u67b6\u5546\u54c1",level:4},{value:"#3.3.3 \u4e0a\u67b6\u5546\u54c1",id:"333-\u4e0a\u67b6\u5546\u54c1",level:4},{value:"#4 \u5220\u9664\u4e0e\u8fd8\u539f\u5546\u54c1-\u65e5\u5e38\u5de5\u4f5c",id:"4-\u5220\u9664\u4e0e\u8fd8\u539f\u5546\u54c1-\u65e5\u5e38\u5de5\u4f5c",level:2},{value:"#4.1 \u9700\u6c42\u5206\u6790",id:"41-\u9700\u6c42\u5206\u6790-1",level:3},{value:"#4.2 \u5b9e\u73b0\u601d\u8def",id:"42-\u5b9e\u73b0\u601d\u8def",level:3},{value:"#4.3 \u4ee3\u7801\u5b9e\u73b0",id:"43-\u4ee3\u7801\u5b9e\u73b0-1",level:3},{value:"#4.3.1 \u903b\u8f91\u5220\u9664\u5546\u54c1",id:"431-\u903b\u8f91\u5220\u9664\u5546\u54c1",level:4},{value:"#4.3.2 \u8fd8\u539f\u88ab\u5220\u9664\u7684\u5546\u54c1",id:"432-\u8fd8\u539f\u88ab\u5220\u9664\u7684\u5546\u54c1",level:4},{value:"#4.3.3 \u7269\u7406\u5220\u9664\u5546\u54c1",id:"433-\u7269\u7406\u5220\u9664\u5546\u54c1",level:4},{value:"#\u5b66\u4e60\u76ee\u6807",id:"\u5b66\u4e60\u76ee\u6807-3",level:2},{value:"#1 Lua\u4ecb\u7ecd",id:"1-lua\u4ecb\u7ecd",level:2},{value:"#1.1 lua\u662f\u4ec0\u4e48",id:"11-lua\u662f\u4ec0\u4e48",level:3},{value:"#1.2 lua\u7684\u5b89\u88c5",id:"12-lua\u7684\u5b89\u88c5",level:3},{value:"#1.3 \u5feb\u901f\u5165\u95e8",id:"13-\u5feb\u901f\u5165\u95e8",level:3},{value:"#1.4 LUA\u7684\u57fa\u672c\u8bed\u6cd5",id:"14-lua\u7684\u57fa\u672c\u8bed\u6cd5",level:3},{value:"#1.4.1 \u6ce8\u91ca",id:"141-\u6ce8\u91ca",level:4},{value:"#1.4.2 \u5173\u952e\u5b57",id:"142-\u5173\u952e\u5b57",level:4},{value:"#1.4.3 \u5b9a\u4e49\u53d8\u91cf",id:"143-\u5b9a\u4e49\u53d8\u91cf",level:4},{value:"#1.4.4 Lua\u4e2d\u7684\u6570\u636e\u7c7b\u578b",id:"144-lua\u4e2d\u7684\u6570\u636e\u7c7b\u578b",level:4},{value:"#1.4.5 \u6d41\u7a0b\u63a7\u5236",id:"145-\u6d41\u7a0b\u63a7\u5236",level:4},{value:"#1.4.6 \u51fd\u6570",id:"146-\u51fd\u6570",level:4},{value:"#1.4.7 require \u51fd\u6570",id:"147-require-\u51fd\u6570",level:4},{value:"#2.nginx+lua+redis\u5b9e\u73b0\u5e7f\u544a\u7f13\u5b58-\u91cd\u70b9",id:"2nginxluaredis\u5b9e\u73b0\u5e7f\u544a\u7f13\u5b58-\u91cd\u70b9",level:2},{value:"#2.2 OpenResty",id:"22-openresty",level:3},{value:"#2.2.1 OpenResty\u4ecb\u7ecd",id:"221-openresty\u4ecb\u7ecd",level:4},{value:"#2.2.2 OpenResty\u5b89\u88c5",id:"222-openresty\u5b89\u88c5",level:4},{value:"#2.2.3 \u5b89\u88c5nginx",id:"223-\u5b89\u88c5nginx",level:4},{value:"#2.3 \u5b9e\u73b0\u601d\u8def",id:"23-\u5b9e\u73b0\u601d\u8def",level:3},{value:"#2.3.1 \u8868\u7ed3\u6784\u5206\u6790",id:"231-\u8868\u7ed3\u6784\u5206\u6790",level:4},{value:"#2.3.2 \u7f13\u5b58\u9884\u70ed\u4e0e\u4e8c\u7ea7\u7f13\u5b58\u67e5\u8be2",id:"232-\u7f13\u5b58\u9884\u70ed\u4e0e\u4e8c\u7ea7\u7f13\u5b58\u67e5\u8be2",level:4},{value:"#2.4 \u4ee3\u7801\u5b9e\u73b0",id:"24-\u4ee3\u7801\u5b9e\u73b0",level:3},{value:"#2.4.1 \u7f13\u5b58\u9884\u70ed",id:"241-\u7f13\u5b58\u9884\u70ed",level:4},{value:"#2.4.2 \u5e7f\u544a\u7f13\u5b58\u8bfb\u53d6",id:"242-\u5e7f\u544a\u7f13\u5b58\u8bfb\u53d6",level:4},{value:"#2.4.3 \u4e8c\u7ea7\u7f13\u5b58-\u52a0\u5165openresty\u672c\u5730\u7f13\u5b58",id:"243-\u4e8c\u7ea7\u7f13\u5b58-\u52a0\u5165openresty\u672c\u5730\u7f13\u5b58",level:4},{value:"#2.4.4 \u524d\u7aef\u9875\u9762\u5b9e\u73b0\uff08\u4e86\u89e3\uff09",id:"244-\u524d\u7aef\u9875\u9762\u5b9e\u73b0\u4e86\u89e3",level:4},{value:"#3 nginx\u9650\u6d41",id:"3-nginx\u9650\u6d41",level:2},{value:"#3.1 \u63a7\u5236\u901f\u7387",id:"31-\u63a7\u5236\u901f\u7387",level:3},{value:"#3.1.1 \u6f0f\u6876\u7b97\u6cd5\u5b9e\u73b0\u63a7\u5236\u901f\u7387\u9650\u6d41",id:"311-\u6f0f\u6876\u7b97\u6cd5\u5b9e\u73b0\u63a7\u5236\u901f\u7387\u9650\u6d41",level:4},{value:"#3.1.2 \u5904\u7406\u7a81\u53d1\u6d41\u91cf",id:"312-\u5904\u7406\u7a81\u53d1\u6d41\u91cf",level:4}],u={toc:d};function o(t){let{components:e,...n}=t;return(0,l.kt)("wrapper",(0,a.Z)({},u,n,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"21-\u4e8c\u5962\u4ea4\u6613"},"2.1 \u4e8c\u5962\u4ea4\u6613"),(0,l.kt)("p",null,"\u5143\u52a8\u529b\u4e8c\u5962\u4ea4\u6613\u5e73\u53f0\uff1a\u4e00\u7ebf\u4e92\u8054\u7f51\u5927\u5382\u7684\u4e00\u4e2a",(0,l.kt)("strong",{parentName:"p"},"\u4e8c\u624b\u5962\u4f88\u54c1\u4ea4\u6613\u5e73\u53f0"),"\u9879\u76ee"),(0,l.kt)("p",null,"\u603b\u517116\u7ae0 \uff1a\u6bcf\u7ae0\u90fd\u662f\u76f8\u5bf9\u72ec\u7acb\u7684\uff0c\u96be\u5ea6\u7531\u7b80\u5355\u5230\u590d\u6742\u3002"),(0,l.kt)("p",null,"\u524d\u7f6e\u6280\u672f\uff1aspringboot springcloud(alibaba) es rabbitmq \u652f\u4ed8 \u77ed\u4fe1"),(0,l.kt)("h2",{id:"\u5b66\u4e60\u76ee\u6807"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87"},"#"),"\u5b66\u4e60\u76ee\u6807"),(0,l.kt)("p",null,"\u76ee\u68071\uff1a\u4e86\u89e3\u7535\u5546\u7684\u6280\u672f\u7279\u70b9\u548c\u4e3b\u8981\u7535\u5546\u6a21\u5f0f"),(0,l.kt)("p",null,"\u76ee\u68072\uff1a\u7406\u89e3\u5143\u52a8\u529b\u4e8c\u5962\u5e73\u53f0\u7684\u9700\u6c42\u4e0e\u7cfb\u7edf\u8bbe\u8ba1"),(0,l.kt)("p",null,"\u76ee\u68073\uff1a\u80fd\u591f\u5b8c\u6210\u5143\u52a8\u529b\u4e8c\u5962\u5e73\u53f0\u5de5\u7a0b\u6846\u67b6\u7684\u642d\u5efa"),(0,l.kt)("p",null,"\u76ee\u68074\uff1a\u80fd\u591f\u5b8c\u6210\u5546\u54c1\u5fae\u670d\u52a1\u54c1\u724c\u589e\u5220\u6539\u67e5\u529f\u80fd"),(0,l.kt)("h2",{id:"1-\u8d70\u8fdb\u7535\u5546-\u9762\u8bd5\u4e86\u89e3"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-%E8%B5%B0%E8%BF%9B%E7%94%B5%E5%95%86-%E9%9D%A2%E8%AF%95%E4%BA%86%E8%A7%A3"},"#"),"1. \u8d70\u8fdb\u7535\u5546-\u9762\u8bd5\u4e86\u89e3"),(0,l.kt)("h3",{id:"11-\u7535\u5546\u884c\u4e1a\u5206\u6790"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-1-%E7%94%B5%E5%95%86%E8%A1%8C%E4%B8%9A%E5%88%86%E6%9E%90"},"#"),"1.1 \u7535\u5546\u884c\u4e1a\u5206\u6790"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6211\u56fd\u7535\u5546\u53d1\u5c55\u5f88\u5feb")),(0,l.kt)("p",null," ",(0,l.kt)("strong",{parentName:"p"},"\u840c\u82bd\u521d\u751f\u9636\u6bb5"),"\uff081991-1999 \u5e74\uff09\u3002EDI \u7535\u5b50\u5546\u52a1\u662f\u7535\u5546\u884c\u4e1a\u7684\u6700\u521d\u96cf\u5f62\u30021997 \u5e74\uff0c\u6211\u56fd\u6700\u65e9\u7684\u4e24\u5bb6\u7535\u5b50\u5546\u52a1\u516c\u53f8\uff1a\u4e2d\u56fd\u5546\u54c1\u4ea4\u6613\u4e2d\u5fc3\u548c\u4e2d\u56fd\u5316\u5de5\u7f51\u5206\u522b\u4e0a\u7ebf\uff0cB2B \u4e1a\u52a1\u5f00\u59cb\u9010\u6b65\u5f97\u5230\u53d1\u5c55\u30021999\u5e74\uff0c\u56fd\u5185\u7b2c\u4e00\u5bb6 C2C \u7535\u5546 8848 \u6b63\u5f0f\u6210\u7acb\u3002\u540c\u5e748 \u6708\uff0c\u6613\u8da3\u7f51\u6210\u7acb\u300211 \u6708\uff0c\u5f53\u5f53\u7f51\u6210\u7acb\u30021999 \u5e749 \u6708\uff0c\u62db\u5546\u94f6\u884c\u7387\u5148\u5728\u56fd\u5185\u5168\u9762\u542f\u52a8\u201c\u4e00\u7f51\u901a\u201d\u7f51\u4e0a\u94f6\u884c\u670d\u52a1\uff0c\u6210\u4e3a\u56fd\u5185\u9996\u5148\u5b9e\u73b0\u5168\u56fd\u8054\u901a\u201c\u7f51\u4e0a\u94f6\u884c\u201d\u7684\u5546\u4e1a\u94f6\u884c\u3002\u8fd9\u4e00\u65f6\u671f\u7684\u4e2d\u56fd\u7535\u5546\u884c\u4e1a\u4ecd\u5904\u4e8e\u840c\u82bd\u5f15\u5165\u9636\u6bb5\uff0c\u771f\u6b63\u7684\u4e92\u8054\u7f51\u5e94\u7528\u5e02\u573a\u8fd8\u6ca1\u6709\u5f62\u6210\u96cf\u5f62\uff0c\u7535\u5b50\u5546\u52a1\u73af\u5883\u8fdc\u672a\u6210\u719f\uff0c\u7f51\u7edc\u96f6\u552e\u4e5f\u624d\u521a\u521a\u8d77\u6b65\u3002"),(0,l.kt)("p",null," ",(0,l.kt)("strong",{parentName:"p"},"\u521d\u671f\u7ade\u4e89\u9636\u6bb5"),"\uff082000-2009\u5e74\uff09\u30022000 \u5e74\u56fd\u9645\u8303\u56f4\u5185\u7684\u4e92\u8054\u7f51\u6ce1\u6cab\u7834\u706d\u5bfc\u81f4\u4e86\u6211\u56fd\u7535\u5b50\u5546\u52a1\u4e5f\u53d7\u5230\u5de8\u5927\u7684\u5f71\u54cd\uff0c8848 \u9010\u6b65\u6ca1\u843d\uff0c\u6613\u8da3\u88ab eBay \u6536\u8d2d\uff0c\u4e00\u5927\u6279\u65b0\u5174\u7684\u7535\u5546\u7f51\u7ad9\u5173\u95ed\u3002\u4f46\u662f\u673a\u9047\u4e0e\u6311\u6218\u5e76\u5b58\uff0c2003 \u5e74\uff0c\u4e2d\u56fd\u7535\u5546\u53d1\u5c55\u53f2\u4e0a\u6700\u4e3a\u91cd\u8981\u7684\u4e24\u5bb6\u4f01\u4e1a\u6dd8\u5b9d\u7f51\u3001\u4eac\u4e1c\u76f8\u7ee7\u6210\u7acb\u3002\u6613\u8da3\u4e0e\u6dd8\u5b9d\u4e4b\u4e89\u662f\u7535\u5546\u53d1\u5c55\u53f2\u4e0a\u7b2c\u4e00\u6b21\u6fc0\u70c8\u7684\u540c\u4e1a\u7ade\u4e89\uff0c\u6dd8\u5b9d\u7f51\u4ee5\u514d\u8d39\u7b56\u7565\u4e0e\u884c\u4e1a\u8001\u5927\u6613\u8da3\u5f00\u5c55\u7ade\u4e89\uff0c\u5728 3 \u5e74\u7684\u65f6\u95f4\u91cc\uff0c\u6dd8\u5b9d\u5728\u8fd9\u6b21\u7ade\u4e89\u4e2d\u5927\u83b7\u5168\u80dc\u3002\u5728\u8fd9\u4e00\u9636\u6bb5\u4e2d\uff0cC2C \u4e5f\u9010\u6b65\u6210\u4e3a\u5f53\u65f6\u6211\u56fd\u7f51\u7edc\u8d2d\u7269\u5e02\u573a\uff08\u5305\u62ec B2C \u548c C2C\uff09\u7684\u4e3b\u6d41\u5546\u4e1a\u6a21\u5f0f\u30022008 \u5e74\u6211\u56fd\u6210\u4e3a\u5168\u7403\u7f51\u6c11\u6700\u591a\u7684\u56fd\u5bb6\uff0c\u7535\u5b50\u5546\u52a1\u4ea4\u6613\u989d\u7a81\u7834 3 \u4e07\u4ebf\u5143\uff0c2009 \u5e74\u7f51\u8d2d\u4eba\u6570\u7a81\u7834 1 \u4ebf\u3002"),(0,l.kt)("p",null," ",(0,l.kt)("strong",{parentName:"p"},"\u9ad8\u901f\u6210\u957f\u9636\u6bb5"),"\uff082010-2014 \u5e74\uff09\u30022010 \u5e74\uff0c\u6dd8\u5b9d\u8fce\u6765\u7b2c\u4e8c\u4e2a\u53cc\u5341\u4e00\u8d2d\u7269\u8282\uff0cGMV \u89c4\u6a21\u4ece 2009 \u5e74\u7684 0.5 \u4ebf\u5143\u731b\u589e\u81f3 9.36 \u4ebf\u5143\uff0c\u53cc\u5341\u4e00\u5f53\u5929\u5171\u6709 2100 \u4e07\u7528\u6237\u53c2\u4e0e\u4e86\u8fd9\u6b21\u5386\u53f2\u7ea7\u522b\u7684\u8d2d\u7269\u8282\uff0c\u5168\u5929\u8bde\u751f\u4e86 181 \u5bb6\u767e\u4e07\u7ea7\u5e97\u94fa\u3002 2011-2014 \u5e74\u7535\u5546\u4ea4\u6613\u989d\u7ee7\u7eed\u9ad8\u901f\u589e\u957f\uff0c\u5176\u4e2d\u7f51\u7edc\u8d2d\u7269\u5e02\u573a\u4f9d\u7136\u706b\u7206\uff0c\u5360\u793e\u4f1a\u5546\u54c1\u96f6\u552e\u603b\u989d\u7684\u6bd4\u4f8b\u5927\u5e45\u5ea6\u63d0\u9ad8\uff0c\u53cc\u5341\u4e00\u5df2\u7ecf\u6210\u4e3a\u884c\u4e1a\u72ec\u6709\u7684\u7f51\u7edc\u8d2d\u7269\u8282\u3002\u5728\u8fd9\u4e00\u65f6\u671f\uff0c\u82cf\u5b81\u6613\u8d2d\u3001\u4eac\u4e1c\u3001\u56fd\u7f8e\u7b49\u7535\u5546\u5de8\u5934\u53d1\u8d77\u4e86\u6700\u4e3a\u6fc0\u70c8\u7684\u7535\u5546\u4ef7\u683c\u6218\uff0c\u884c\u4e1a\u5728\u7ade\u4e89\u4e2d\u9ad8\u901f\u6210\u957f\u3002\u622a\u6b62 2014\u5e74\u5e74\u5e95\uff0c\u4e2d\u56fd\u7535\u5546\u884c\u4e1a\u5df2\u7ecf\u5168\u9762\u8d85\u8d8a\u6b27\u76df\u3001\u65e5\u672c\u7b49\u7ecf\u6d4e\u4f53\uff0c\u90e8\u5206\u9886\u57df\u751a\u81f3\u8d85\u8d8a\u4e86\u7f8e\u56fd\u3002"),(0,l.kt)("p",null," ",(0,l.kt)("strong",{parentName:"p"},"\u7a33\u5b9a\u53d1\u5c55\u9636\u6bb5"),"\uff082015-2017 \u5e74\uff09\u3002\u4ee5\u817e\u8baf\u548c\u4eac\u4e1c\u7684\u6218\u7565\u5408\u4f5c\u8fbe\u6210\u6210\u4e3a\u6807\u5fd7\uff0c2015 \u5e74\u8d77\uff0c\u8d44\u672c\u63a8\u52a8\u4e0b\u7684\u6fc0\u70c8\u7ade\u4e89\u6b63\u5f0f\u7ed3\u675f\uff0c\u591a\u9886\u57df\u7684\u7535\u5546\u5e73\u53f0\u7eb7\u7eb7\u8d70\u5411\u5408\u4f5c\u30022015 \u5e74\u51fa\u73b0\u7684\u4ece\u7f8e\u56e2\u5927\u4f17\u70b9\u8bc4\u3001\u643a\u7a0b\u53bb\u54ea\u513f\u3001\u6ef4\u6ef4\u5feb\u7684\u300158 \u4e0e\u8d76\u96c6\u7b49\u751f\u6d3b\u670d\u52a1\u7535\u5546\u5747\u5b9e\u73b0\u4e86\u5408\u5e76\u30022015-2017 \u5e74\u7f51\u8d2d\u4eba\u6570\u3001\u7535\u5546\u4ea4\u6613\u603b\u989d\u3001\u7f51\u7edc\u96f6\u552e\u4ea4\u6613\u989d\u4e0e 2010-2014 \u5e74\u76f8\u6bd4\u89c4\u6a21\u660e\u663e\u589e\u5927\uff0c\u4f46\u589e\u957f\u901f\u5ea6\u653e\u7f13\u3002\u7535\u5546\u5e02\u573a\u7531\u84dd\u6d77\u9010\u6e10\u53d8\u4e3a\u7ea2\u6d77\uff0c\u53d1\u5c55\u8fdb\u5165\u76f8\u5bf9\u7a33\u5b9a\u7684\u9636\u6bb5\u3002"),(0,l.kt)("p",null," ",(0,l.kt)("strong",{parentName:"p"},"\u65b0\u7684\u53d8\u5316\u9636\u6bb5"),"\uff082018-2020 \u5e74\uff09\u3002\u8fd9\u4e00\u9636\u6bb5\u4e4b\u524d\uff0c\u6dd8\u7cfb\u4e0e\u817e\u8baf\u7cfb\u4eac\u4e1c\u5df2\u7ecf\u57fa\u672c\u5750\u7a33\u4e86\u884c\u4e1a\u7684\u524d\u4e24\u4f4d\u5ea7\u6b21\uff0c\u968f\u7740\u884c\u4e1a\u53d1\u5c55\u9010\u6b65\u6210\u719f\uff0c\u4e24\u5bb6\u5de8\u5934\u7684\u89c4\u6a21\u9010\u6e10\u6269\u5927\uff0c\u6574\u4f53\u589e\u957f\u901f\u5ea6\u6162\u6162\u653e\u7f13\u3002\u8fdb\u5165 2018 \u5e74\uff0c\u62fc\u591a\u591a\u7684\u8fc5\u901f\u5d1b\u8d77\u6253\u7834\u4e86\u8fd9\u4e00\u5e73\u8861\uff0c2018 \u5e74\uff0c\u6210\u7acb\u4ec5 2 \u5e74\u7684\u62fc\u591a\u591a\u7684\u7528\u6237\u6570\u7a81\u7834 3 \u4ebf\uff0cGMV \u7a81\u7834 4700 \u4ebf\u30022019 \u5e74\uff0c\u62fc\u591a\u591a\u63a8\u51fa\u201c\u767e\u4ebf\u8865\u8d34\u201d\u8fd9\u4e00\u5728\u7535\u5546\u53d1\u5c55\u5386\u53f2\u4e0a\u5177\u6709\u91cd\u8981\u610f\u4e49\u7684\u8425\u9500\u6d3b\u52a8\uff0c\u4e5f\u62c9\u5f00\u4e86\u53c8\u4e00\u8f6e\u7535\u5546\u884c\u4e1a\u7684\u6fc0\u70c8\u7ade\u4e89\u3002\u4e5f\u662f\u5728 2018-2020 \u5e74\uff0c\u77ed\u89c6\u9891\u9886\u57df\u8fce\u6765\u7206\u53d1\uff0c\u4e24\u5927\u5de8\u5934\u7eb7\u7eb7\u5165\u5c40\u7535\u5546\u9886\u57df\uff0c\u6210\u4e3a\u884c\u4e1a\u5728\u51e0\u5e74\u5185\u5c11\u6709\u7684\u65b0\u8fdb\u5927\u578b\u73a9\u5bb6\u3002\u7535\u5546\u884c\u4e1a\u5728\u7ecf\u5386\u77ed\u6682\u51e0\u5e74\u7684\u5e73\u7a33\u540e\uff0c\u6301\u7eed\u8fce\u6765\u65b0\u7684\u53d8\u5316\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/1-1-3040cbb8.png",alt:"img"}),"img"),(0,l.kt)("p",null," \u6211\u4eec\u76ef\u4f4f\u4e00\u4e2a\u5782\u76f4\u884c\u4e1a\u505a"),(0,l.kt)("p",null," ",(0,l.kt)("strong",{parentName:"p"},"\u4e8c\u624b\u5962\u4f88\u54c1\u884c\u4e1a\u6210\u65b0\u84dd\u6d77")),(0,l.kt)("p",null," \u300a\u4e2d\u56fd\u4e8c\u624b\u5962\u4f88\u54c1\u5e02\u573a\u53d1\u5c55\u7814\u7a76\u62a5\u544a2020\u300b\uff08\u4ee5\u4e0b\u7b80\u79f0\u62a5\u544a\uff09\u663e\u793a\uff0c\u4e8c\u5962\u7684\u6d88\u8d39\u4e3b\u529b\u519b",(0,l.kt)("strong",{parentName:"p"},"\u5df2\u9010\u6e10\u4ece\u9ad8\u6536\u5165\u3001\u9ad8\u9636\u5c42\u7fa4\u4f53\u5411\u666e\u901a\u5927\u4f17\u9760\u62e2\uff0c\u5448\u73b0\u5e74\u8f7b\u5316\u8d8b\u52bf"),"\u30022019\u5e74\uff0c",(0,l.kt)("strong",{parentName:"p"},"76%\u7684\u4e8c\u5962"),"\u88ab36\u5c81\u4ee5\u4e0b\u7684\u4eba\u7fa4\u4e70\u8d70\u3002"),(0,l.kt)("p",null," \u5b9e\u4f53\u5e97\u751f\u610f\u5982\u706b\u5982\u837c\uff0c\u4e8c\u624b\u5962\u4f88\u54c1\u7ebf\u4e0a\u8d5b\u9053\u4e5f\u5f88\u706b\u70ed\uff0c\u523a\u6fc0\u4e86\u8d44\u672c\u7684\u5165\u5c40\u3002"),(0,l.kt)("p",null,"\u25cf\u53bb\u5e745\u670812\u65e5\uff0c\u4e8c\u624b\u5962\u4f88\u54c1\u6d41\u901a\u670d\u52a1\u5546\u80d6\u864e\u79d1\u6280\u5b8c\u62101.75\u4ebf\u5143B\u8f6e\u878d\u8d44\u3002\u636e\u6089\uff0c\u80d6\u864e\u6210\u7acb\u4e8e2015\u5e74\uff0c\u662f\u4e00\u5bb6\u95f2\u7f6e\u5962\u4f88\u54c1\u7ebf\u4e0a\u5e73\u53f0\u30022019\u5e74\u80d6\u864e\u8425\u6536\u7ea66\u4ebf\u5143\uff0cGMV\uff08\u7f51\u7ad9\u6210\u4ea4\u91d1\u989d\uff09\u8d85\u8fc710\u4ebf\u5143\u3002\u622a\u81f32020\u5e744\u6708\uff0c\u80d6\u864eAPP\u7528\u6237\u6570\u8d85\u8fc7120\u4e07\u3002"),(0,l.kt)("p",null,"\u25cf\u53e6\u4e00\u5bb6\u4e8c\u624b\u5962\u4f88\u54c1\u5e73\u53f0\u5983\u9c7c\u4e5f\u5728\u53bb\u5e742\u6708\u5b8c\u6210\u4e86\u5343\u4e07\u7f8e\u5143\u7684A\u8f6e\u878d\u8d44\u3002\u8bb0\u8005\u4e86\u89e3\u5230\uff0c\u76f8\u8f83\u4e8e\u80d6\u864e\uff0c\u5983\u9c7c\u66f4\u4e13\u6ce8\u4e8e\u4e8c\u624b\u5962\u4f88\u54c1\u76f4\u64ad\u7535\u5546\u3002\u65e9\u57282018\u5e74\uff0c\u5983\u9c7c\u5c31\u5f00\u59cb\u5728\u6dd8\u5b9d\u76f4\u64ad\u5356\u4e8c\u624b\u5962\u4f88\u54c1\u30022019\u5e74\u5983\u9c7c\u6574\u4f53\u9500\u552e\u989d\u8fd1\u5341\u4ebf\u5143\u3002\u572860\u540d\u81ea\u8425\u4e3b\u64ad\u4e2d\uff0c\u6708\u9500\u767e\u4e07\u7684\u9ad8\u8fbe50%\u4ee5\u4e0a\u3002"),(0,l.kt)("p",null,"\u25cf\u7ea2\u5e03\u6797\u4e5f\u662f\u4e8c\u624b\u5962\u4f88\u54c1\u8d5b\u9053\u4e2d\u7684\u4e00\u4e2a\u91cd\u91cf\u7ea7\u9009\u624b\u30022019\u5e748\u6708\uff0c\u7ea2\u5e03\u6797\u5df2\u5b8c\u6210\u4e24\u5343\u4e07\u7f8e\u5143B+\u8f6e\u878d\u8d44\u3002\u636e\u6089\uff0c\u7ea2\u5e03\u6797\u91c7\u53d6C2B2C\u6a21\u5f0f\uff0c\u4ece\u5356\u5bb6\u624b\u4e2d\u56de\u6536\uff0c\u7ecf\u8fc7\u9274\u5b9a\u548c\u91cd\u65b0\u5b9a\u4ef7\u4e4b\u540e\uff0c\u518d\u8fdb\u884c\u552e\u5356\u30022019\u5e74\uff0cPlum\u7ea2\u5e03\u6797\u5e73\u53f0\u4ea4\u6613\u91cf\u5b9e\u73b0\u4e86\u6570\u5341\u500d\u7684\u589e\u957f\uff0c\u6708GMV\uff08\u7f51\u7ad9\u6210\u4ea4\u91d1\u989d\uff09\u6570\u5343\u4e07\u3002"),(0,l.kt)("p",null,"\u25cf\u9664\u4e86\u5782\u76f4\u4e8c\u624b\u5962\u4f88\u54c1\u7535\u5546\u5916\uff0c\u8d8a\u6765\u8d8a\u591a\u7684\u65f6\u5c1a\u6216\u7535\u5546\u5e73\u53f0\u4e5f\u52a0\u5165\u4e86\u8fd9\u4e00\u8d5b\u9053\u3002\u4f8b\u5982\uff0c\u65f6\u5c1a\u7535\u5546\u5e73\u53f0\u5bfa\u5e93\u540c\u65f6\u552e\u5356\u5168\u65b0\u548c\u4e8c\u624b\u5962\u4f88\u54c1\uff0c\u4ee5\u5206\u7ea7\u6807\u6ce8\u533a\u5206\u4e24\u8005\uff1b\u5962\u4f88\u54c1\u670d\u52a1\u5e73\u53f0\u5305\u5927\u5e08\u7531\u5962\u4f88\u54c1\u517b\u62a4\u5207\u5165\uff0c\u540e\u5ef6\u5c55\u81f3\u4e8c\u624b\u5962\u4f88\u54c1\u548c\u65b0\u54c1\u4ea4\u6613\uff1b\u4eac\u4e1c2019\u5e747\u6708\u5f00\u8bbe\u4e86\u552e\u4ef7\u5962\u4f88\u54c1\u670d\u52a1\u4f53\u9a8c\u4e2d\u5fc3\u201c\u4eac\u4e1c\u5962\u62a4\u201d\uff0c\u5e97\u5185\u8bbe\u6709\u4e8c\u624b\u5962\u4f88\u54c1\u552e\u5356\u533a\u3002"),(0,l.kt)("h3",{id:"12-\u7535\u5546\u7cfb\u7edf\u6280\u672f\u7279\u70b9"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-2-%E7%94%B5%E5%95%86%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E7%89%B9%E7%82%B9"},"#"),"1.2 \u7535\u5546\u7cfb\u7edf\u6280\u672f\u7279\u70b9"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6280\u672f\u65b0"),"\uff1a\u5355\u4f53\u67b6\u6784-\u300b\u5fae\u670d\u52a1 dubbo mycat"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6280\u672f\u8303\u56f4\u5e7f"),": java go python \u963f\u91cc\u62db\u8058\u7269\u7406\u5b66\u535a\u58eb \u963f\u91cc\u4e91\uff0c\u6539\u8fdb\u5149\u7ea4\uff0c\u6c34\u51b7\u3001\u6cb9\u51b7\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u5206\u5e03\u5f0f"),"\uff1a\u5206\u5f00\u90e8\u7f72 user \u5317\u4eac\u673a\u623f"),(0,l.kt)("p",null," user \u4e0a\u6d77\u673a\u623f"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u9ad8\u5e76\u53d1"),": \u79d2\u6740 \u739b\u838e\u62c9\u8482 500w->500\u5757 100w\u8bf7\u6c42--\u300border"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u96c6\u7fa4"),": \u4e00\u4ef6\u4e8b\u513f->\u6309\u7167\u903b\u8f91\u5206\u6210\u591a\u4e2a\u5fae\u670d\u52a1 \u4e0b\u5355---\u51cf\u5e93\u5b5899\uff0810\u4efd\uff09 \u652f\u4ed8 \u7269\u6d41\u670d\u52a1"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u8d1f\u8f7d\u5747\u8861"),": 10wqps---- 5w-\u5317\u4eac 5w-\u4e0a\u6d77 F5 nginx"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u9ad8\u53ef\u7528"),": \u5317\u4eac\u673a\u623f \u4e0a\u6d77\u673a\u623f \u6df1\u5733\u673a\u623f"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6d77\u91cf\u6570\u636e"),"\uff1a1\u4ebf 10\u4ebf 100\u4ebf\u7684\u8ba2\u5355 TB----\x3ePB-----\x3eEB"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u4e1a\u52a1\u590d\u6742"),"\uff1a\u5927\u6570\u636e\u5206\u6790 \u6253\u6807\u7b7e \uff1a\u624b\u673a\u6dd8\u5b9d \u957f\u817f\u5c0f\u59d0\u59d0 ------\u300b \u624b\u673a\u6dd8\u5b9d \u5c0f\u7c73\u7ca5 \u536b\u751f\u7eb8"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u7cfb\u7edf\u5b89\u5168"),"\uff1a\u652f\u4ed8\u5b9d \u6539\u94b1\uff1a1\u8fdb\u53bb\u4e86 2\u8fdb\u6dd8\u5b9d\u4e86"),(0,l.kt)("h3",{id:"13-\u4e3b\u8981\u7535\u5546\u6a21\u5f0f"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-3-%E4%B8%BB%E8%A6%81%E7%94%B5%E5%95%86%E6%A8%A1%E5%BC%8F"},"#"),"1.3 \u4e3b\u8981\u7535\u5546\u6a21\u5f0f"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"B2B")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"B2B \uff08 Business to Business\uff09\u662f\u6307\u8fdb\u884c\u7535\u5b50\u5546\u52a1\u4ea4\u6613\u7684\u4f9b\u9700\u53cc\u65b9\u90fd\u662f\u5546\u5bb6\uff08\u6216\u4f01\u4e1a\u3001\u516c\u53f8\uff09\uff0c\u5979\uff08\u4ed6\uff09\u4eec\u4f7f\u7528\u4e86\u4e92\u8054\u7f51\u7684\u6280\u672f\u6216\u5404\u79cd\u5546\u52a1\u7f51\u7edc\u5e73\u53f0\uff0c\u5b8c\u6210\u5546\u52a1\u4ea4\u6613\u7684\u8fc7\u7a0b\u3002\u7535\u5b50\u5546\u52a1\u662f\u73b0\u4ee3 B2B marketing\u7684\u4e00\u79cd\u5177\u4f53\u4e3b\u8981\u7684\u8868\u73b0\u5f62\u5f0f\u3002\n\n\u6848\u4f8b\uff1a\u963f\u91cc\u5df4\u5df4\uff081688\uff09\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"C2C")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"C2C\u5373 Customer to Customer\uff0c\u610f\u601d\u5c31\u662f\u6d88\u8d39\u8005\u4e2a\u4eba\u95f4\u7684\u7535\u5b50\u5546\u52a1\u884c\u4e3a\u3002\u6bd4\u5982\u4e00\u4e2a\u6d88\u8d39\u8005\u6709\u4e00\u53f0\u7535\u8111\uff0c\u901a\u8fc7\u7f51\u7edc\u8fdb\u884c\u4ea4\u6613\uff0c\u628a\u5b83\u51fa\u552e\u7ed9\u53e6\u5916\u4e00\u4e2a\u6d88\u8d39\u8005\uff0c\u6b64\u79cd\u4ea4\u6613\u7c7b\u578b\u5c31\u79f0\u4e3aC2C\u7535\u5b50\u5546\u52a1\u3002\n\n\u6848\u4f8b\uff1a\u54b8\u9c7c\u3001\u8f6c\u8f6c\u3001\u74dc\u5b50\u4e8c\u624b\u8f66\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"B2C")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"B2C\u662fBusiness-to-Customer\u7684\u7f29\u5199\uff0c\u800c\u5176\u4e2d\u6587\u7b80\u79f0\u4e3a\u201c\u5546\u5bf9\u5ba2\u201d\u3002\u201c\u5546\u5bf9\u5ba2\u201d\u662f\u7535\u5b50\u5546\u52a1\u7684\u4e00\u79cd\u6a21\u5f0f\uff0c\u4e5f\u5c31\u662f\u901a\u5e38\u8bf4\u7684\u76f4\u63a5\u9762\u5411\u6d88\u8d39\u8005\u9500\u552e\u4ea7\u54c1\u548c\u670d\u52a1\u5546\u4e1a\u96f6\u552e\u6a21\u5f0f\u3002\u8fd9\u79cd\u5f62\u5f0f\u7684\u7535\u5b50\u5546\u52a1\u4e00\u822c\u4ee5\u7f51\u7edc\u96f6\u552e\u4e1a\u4e3a\u4e3b\uff0c\u4e3b\u8981\u501f\u52a9\u4e8e\u4e92\u8054\u7f51\u5f00\u5c55\u5728\u7ebf\u9500\u552e\u6d3b\u52a8\u3002B2C\u5373\u4f01\u4e1a\u901a\u8fc7\u4e92\u8054\u7f51\u4e3a\u6d88\u8d39\u8005\u63d0\u4f9b\u4e00\u4e2a\u65b0\u578b\u7684\u8d2d\u7269\u73af\u5883\u2014\u2014\u7f51\u4e0a\u5546\u5e97\uff0c\u6d88\u8d39\u8005\u901a\u8fc7\u7f51\u7edc\u5728\u7f51\u4e0a\u8d2d\u7269\u3001\u7f51\u4e0a\u652f\u4ed8\u7b49\u6d88\u8d39\u884c\u4e3a\u3002\n\n\u6848\u4f8b\uff1a\u552f\u54c1\u4f1a\u3001\u4e50\u8702\u7f51\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"C2B")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"C2B\uff08Consumer to Business\uff0c\u5373\u6d88\u8d39\u8005\u5230\u4f01\u4e1a\uff09\uff0c\u662f\u4e92\u8054\u7f51\u7ecf\u6d4e\u65f6\u4ee3\u65b0\u7684\u5546\u4e1a\u6a21\u5f0f\u3002\u8fd9\u4e00\u6a21\u5f0f\u6539\u53d8\u4e86\u539f\u6709\u751f\u4ea7\u8005\uff08\u4f01\u4e1a\u548c\u673a\u6784\uff09\u548c\u6d88\u8d39\u8005\u7684\u5173\u7cfb\uff0c\u662f\u4e00\u79cd\u6d88\u8d39\u8005\u8d21\u732e\u4ef7\u503c\uff08Create Value\uff09\uff0c \u4f01\u4e1a\u548c\u673a\u6784\u6d88\u8d39\u4ef7\u503c\uff08Consume Value\uff09\u3002\n\nC2B\u6a21\u5f0f\u548c\u6211\u4eec\u719f\u77e5\u7684\u4f9b\u9700\u6a21\u5f0f\uff08DSM, Demand SupplyModel\uff09\u6070\u6070\u76f8\u53cd\uff0c\u771f\u6b63\u7684C2B \u5e94\u8be5\u5148\u6709\u6d88\u8d39\u8005\u9700\u6c42\u4ea7\u751f\u800c\u540e\u6709\u4f01\u4e1a\u751f\u4ea7\uff0c\u5373\u5148\u6709\u6d88\u8d39\u8005\u63d0\u51fa\u9700\u6c42\uff0c\u540e\u6709\u751f\u4ea7\u4f01\u4e1a\u6309\u9700\u6c42\u7ec4\u7ec7\u751f\u4ea7\u3002\u901a\u5e38\u60c5\u51b5\u4e3a\u6d88\u8d39\u8005\u6839\u636e\u81ea\u8eab\u9700\u6c42\u5b9a\u5236\u4ea7\u54c1\u548c\u4ef7\u683c\uff0c\u6216\u4e3b\u52a8\u53c2\u4e0e\u4ea7\u54c1\u8bbe\u8ba1\u3001\u751f\u4ea7\u548c\u5b9a\u4ef7\uff0c\u4ea7\u54c1\u3001\u4ef7\u683c\u7b49\u5f70\u663e\u6d88\u8d39\u8005\u7684\u4e2a\u6027\u5316\u9700\u6c42\uff0c\u751f\u4ea7\u4f01\u4e1a\u8fdb\u884c\u5b9a\u5236\u5316\u751f\u4ea7\u3002\n\n\u6848\u4f8b\uff1a\u6d77\u5c14\u5546\u57ce\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"O2O")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"O2O\u5373Online To Offline\uff08\u5728\u7ebf\u79bb\u7ebf/\u7ebf\u4e0a\u5230\u7ebf\u4e0b\uff09\uff0c\u662f\u6307\u5c06\u7ebf\u4e0b\u7684\u5546\u52a1\u673a\u4f1a\u4e0e\u4e92\u8054\u7f51\u7ed3\u5408\uff0c\u8ba9\u4e92\u8054\u7f51\u6210\u4e3a\u7ebf\u4e0b\u4ea4\u6613\u7684\u5e73\u53f0\uff0c\u8fd9\u4e2a\u6982\u5ff5\u6700\u65e9\u6765\u6e90\u4e8e\u7f8e\u56fd\u3002O2O\u7684\u6982\u5ff5\u975e\u5e38\u5e7f\u6cdb\uff0c\u65e2\u53ef\u6d89\u53ca\u5230\u7ebf\u4e0a\uff0c\u53c8\u53ef\u6d89\u53ca\u5230\u7ebf\u4e0b,\u53ef\u4ee5\u901a\u79f0\u4e3aO2O\u3002\u4e3b\u6d41\u5546\u4e1a\u7ba1\u7406\u8bfe\u7a0b\u5747\u5bf9O2O\u8fd9\u79cd\u65b0\u578b\u7684\u5546\u4e1a\u6a21\u5f0f\u6709\u6240\u4ecb\u7ecd\u53ca\u5173\u6ce8\u3002\n\n\u6848\u4f8b\uff1a\u7f8e\u56e2\u3001\u997f\u4e86\u5417\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"F2C")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"F2C\u6307\u7684\u662fFactory to customer\uff0c\u5373\u4ece\u5382\u5546\u5230\u6d88\u8d39\u8005\u7684\u7535\u5b50\u5546\u52a1\u6a21\u5f0f\u3002\n\n\u6848\u4f8b\uff1a\u4ee3\u5de5\u5382\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"B2B2C")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"B2B2C\uff08Business to Business to Consumer\uff09\u662f\u4e00\u79cd\u7535\u5b50\u5546\u52a1\u7c7b\u578b\u7684\u7f51\u7edc\u8d2d\u7269\u5546\u4e1a\u6a21\u5f0f\uff0cB\u662fBUSINESS\u7684\u7b80\u79f0\uff0cC\u662fCUSTOMER\u7684\u7b80\u79f0\uff0c\u7b2c\u4e00\u4e2aB\u6307\u7684\u662f\u5546\u54c1\u6216\u670d\u52a1\u7684\u4f9b\u5e94\u5546\uff0c\u7b2c\u4e8c\u4e2aB\u6307\u7684\u662f\u4ece\u4e8b\u7535\u5b50\u5546\u52a1\u7684\u4f01\u4e1a\uff0cC\u5219\u662f\u8868\u793a\u6d88\u8d39\u8005\u3002\n\n\u6848\u4f8b\uff1a\u4eac\u4e1c\u5546\u57ce\u3001\u5929\u732b\u5546\u57ce\n")),(0,l.kt)("h2",{id:"2-\u5143\u52a8\u529b\u4e8c\u5962-\u9700\u6c42\u5206\u6790\u4e0e\u7cfb\u7edf\u8bbe\u8ba1"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-%E5%85%83%E5%8A%A8%E5%8A%9B%E4%BA%8C%E5%A5%A2-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90%E4%B8%8E%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1"},"#"),"2. \u5143\u52a8\u529b\u4e8c\u5962-\u9700\u6c42\u5206\u6790\u4e0e\u7cfb\u7edf\u8bbe\u8ba1"),(0,l.kt)("h3",{id:"21-\u9700\u6c42\u5206\u6790"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"},"#"),"2.1 \u9700\u6c42\u5206\u6790"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u7f51\u7ad9\u524d\u53f0"),"\uff1a\u9759\u6001\u539f\u578b\u5168\u6d41\u7a0b\u6f14\u793a\uff0c\u6253\u5f00",(0,l.kt)("inlineCode",{parentName:"p"},"\u8d44\u6599\\\u9759\u6001\u539f\u578b\\\u524d\u53f0"),"\uff0c\u9996\u9875",(0,l.kt)("inlineCode",{parentName:"p"},"index.html")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211008213033650-5c1f4ebd.png",alt:"image-20211008213033650"}),"image-20211008213033650"),(0,l.kt)("p",null,"\u91cc\u9762\u7684\u529f\u80fd\u53ef\u4ee5\u4f9d\u6b21\u70b9\u51fb\u641c\u7d22"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211008213132574-8642b22e.png",alt:"image-20211008213132574"}),"image-20211008213132574"),(0,l.kt)("p",null,"\u5546\u54c1\u8be6\u60c5\u9875\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211008213324214-36348d97.png",alt:"image-20211008213324214"}),"image-20211008213324214"),(0,l.kt)("p",null,"\u52a0\u5165\u8d2d\u7269\u8f66\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211008213351346-6be0602b.png",alt:"image-20211008213351346"}),"image-20211008213351346"),(0,l.kt)("p",null,"\u4e0b\u5355\u9875\u9762\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211008213417824-7650acc3.png",alt:"image-20211008213417824"}),"image-20211008213417824"),(0,l.kt)("p",null,"\u9009\u62e9\u652f\u4ed8\u9875\u9762\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211008213454485-15ab001b.png",alt:"image-20211008213454485"}),"image-20211008213454485"),(0,l.kt)("p",null,"\u5fae\u4fe1\u652f\u4ed8\u9875\u9762\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211008213510887-3f90e1a3.png",alt:"image-20211008213510887"}),"image-20211008213510887"),(0,l.kt)("p",null,"\u652f\u4ed8\u6210\u529f\u9875\u9762\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211008213530598-7bdd1dd2.png",alt:"image-20211008213530598"}),"image-20211008213530598"),(0,l.kt)("p",null,"\u8fd9\u4e00\u6574\u5957\u8d2d\u7269\u6d41\u7a0b\u3002"),(0,l.kt)("p",null,"\u8fd8\u5305\u62ec\u79d2\u6740\u6d41\u7a0b\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211008213622354-e29dfd25.png",alt:"image-20211008213622354"}),"image-20211008213622354"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u7f51\u7ad9\u7ba1\u7406\u540e\u53f0"),"\uff08\u5546\u5bb6\u6240\u89c1\u9875\u9762\uff09\uff1a"),(0,l.kt)("p",null,"\u9759\u6001\u539f\u578b\u6f14\u793a\uff0c\u6253\u5f00",(0,l.kt)("inlineCode",{parentName:"p"},"\u8d44\u6599\\\u9759\u6001\u539f\u578b\\\u540e\u53f0"),",\u9996\u9875",(0,l.kt)("inlineCode",{parentName:"p"},"\u767b\u5f55\u754c\u9762.html")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211008213828253-e0a325e9.png",alt:"image-20211008213828253"}),"image-20211008213828253"),(0,l.kt)("p",null,"\u5546\u5bb6\u6240\u89c1\u9875\u9762\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211008213901719-ee753e71.png",alt:"image-20211008213901719"}),"image-20211008213901719"),(0,l.kt)("p",null,"\u5176\u4e2d\u6709\u5546\u54c1\u7684\u4e0a\u4e0b\u67b6\u529f\u80fd\uff0c\u62a5\u8868\u7edf\u8ba1\u529f\u80fd\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u7684\u52a8\u529b\u4e8c\u5962\u5e73\u53f0\u91c7\u7528\u7684\u6a21\u5f0f\u4e3a\uff1a",(0,l.kt)("strong",{parentName:"p"},"B2B2C")," \u6a21\u5f0f\u3002"),(0,l.kt)("p",null,"\u8865\u5145\uff1a\u4f01\u4e1a\u5f00\u53d1\u6d41\u7a0b"),(0,l.kt)("p",null," 0 \u9879\u76ee\uff08\u4ea7\u54c1\uff09\u7ecf\u7406\u3002UI \u539f\u578b\u56fe \u9700\u6c42\u6587\u6863\uff1a\u767b\u5f55\u9875\u9762 \u5546\u54c1\u8be6\u60c5\u9875"),(0,l.kt)("p",null," 1\u9879\u76ee\u7ecf\u7406\u8ba9\u7f8e\u5de5\u505a\u51fa\u539f\u578b\u9875\u9762"),(0,l.kt)("p",null," 2\u9879\u76ee\u7ecf\u7406 \u62c9\u7740\u540e\u7aef\u5f00\u53d1 \u524d\u7aef\u5f00\u53d1\u5de5\u7a0b\u5e08 \u8ba8\u8bba"),(0,l.kt)("p",null," 3\u5b9a\u4e49\u4e1a\u52a1\uff08\u4e1a\u52a1\uff09\u63a5\u53e3 post ",(0,l.kt)("a",{parentName:"p",href:"http://ip/"},"http://ipopen in new window"),":port/goods/add ",(0,l.kt)("inlineCode",{parentName:"p"},"{name:\u624b\u8868,price:200}")),(0,l.kt)("p",null," 4\u524d\u540e\u7aef\u5206\u79bb\u5f00\u53d1"),(0,l.kt)("p",null," 5\u524d\u540e\u7aef\u8054\u8c03 dev \u670d\u52a1\u5668"),(0,l.kt)("p",null," 6\u6d4b\u8bd5\u73af\u5883\u53d1\u5e03\uff0c\u6d4b\u8bd5\u90e8\u95e8\u6d4b\u8bd5"),(0,l.kt)("p",null," 7\u9884\u53d1\u5e03\u73af\u5883\uff08\u4e1a\u52a1\u90e8\u95e8\u8001\u5927 \u3001\u6280\u672f\u90e8\u95e8\u8001\u5927\uff09"),(0,l.kt)("p",null," 8\u8fd0\u7ef4\u4eba\u5458 \u6b63\u5f0f\u4e0a\u7ebf \u751f\u4ea7\u73af\u5883"),(0,l.kt)("p",null," 9\u7ebf\u4e0abug\uff1a\u5feb\u901f\u4fee\u590d\uff0c\u5f53\u5929\u665a\u4e0a11-12 \u90e8\u7f72\u4e0a\u7ebf\u3002\u7a0b\u5e8f\u5458\u56de\u4e0d\u4e86\u5bb6\u539f\u56e0\u3002"),(0,l.kt)("h3",{id:"22-\u7cfb\u7edf\u8bbe\u8ba1"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-2-%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1"},"#"),"2.2 \u7cfb\u7edf\u8bbe\u8ba1"),(0,l.kt)("h4",{id:"221-\u524d\u540e\u7aef\u5206\u79bb"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-2-1-%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB"},"#"),"2.2.1 \u524d\u540e\u7aef\u5206\u79bb"),(0,l.kt)("p",null,"\u7f51\u7ad9\u540e\u53f0\u7684\u90e8\u5206\u91c7\u7528\u524d\u540e\u7aef\u5206\u79bb\u65b9\u5f0f\u3002"),(0,l.kt)("p",null,"\u4ee5\u524d\u7684JavaWeb\u9879\u76ee\u5927\u591a\u6570\u90fd\u662fjava\u7a0b\u5e8f\u5458\u53c8\u5f53\u7239\u53c8\u5f53\u5988\uff0c\u53c8\u641e\u524d\u7aefjsp\uff0c\u53c8\u641e\u540e\u7aef\u3002\u968f\u7740\u65f6\u4ee3\u7684\u53d1\u5c55\uff0c\u6e10\u6e10\u7684\u8bb8\u591a\u5927\u4e2d\u5c0f\u516c\u53f8\u5f00\u59cb\u628a\u524d\u540e\u7aef\u7684\u754c\u9650\u5206\u7684\u8d8a\u6765\u8d8a\u660e\u786e\uff0c\u524d\u7aef\u5de5\u7a0b\u5e08\u53ea\u7ba1\u524d\u7aef\u7684\u4e8b\u60c5\uff0c\u540e\u7aef\u5de5\u7a0b\u5e08\u53ea\u7ba1\u540e\u7aef\u7684\u4e8b\u60c5\u3002\u6b63\u6240\u8c13\u672f\u4e1a\u6709\u4e13\u653b\uff0c\u4e00\u4e2a\u4eba\u5982\u679c\u4ec0\u4e48\u90fd\u4f1a\uff0c\u90a3\u4e48\u4ed6\u6bd5\u7adf\u4ec0\u4e48\u90fd\u4e0d\u7cbe\u3002"),(0,l.kt)("p",null,"\u5bf9\u4e8e\u540e\u7aefjava\u5de5\u7a0b\u5e08\uff1a"),(0,l.kt)("p",null,"\u628a\u7cbe\u529b\u653e\u5728\u8bbe\u8ba1\u6a21\u5f0f\uff0cspring+springmvc\uff0clinux\uff0cmysql\u4e8b\u52a1\u9694\u79bb\u4e0e\u9501\u673a\u5236\uff0cmongodb\uff0chttp/tcp\uff0c\u591a\u7ebf\u7a0b\uff0c\u5206\u5e03\u5f0f\u67b6\u6784\uff0c\u5f39\u6027\u8ba1\u7b97\u67b6\u6784\uff0c\u5fae\u670d\u52a1\u67b6\u6784\uff0cjava\u6027\u80fd\u4f18\u5316\uff0c\u4ee5\u53ca\u76f8\u5173\u7684\u9879\u76ee\u7ba1\u7406\u7b49\u7b49\u3002"),(0,l.kt)("p",null,"\u5bf9\u4e8e\u524d\u7aef\u5de5\u7a0b\u5e08\uff1a"),(0,l.kt)("p",null,"\u628a\u7cbe\u529b\u653e\u5728html5\uff0ccss3\uff0cvuejs\uff0cwebpack\uff0cnodejs\uff0cGoogle V8\u5f15\u64ce\uff0cjavascript\u591a\u7ebf\u7a0b\uff0c\u6a21\u5757\u5316\uff0c\u9762\u5411\u5207\u9762\u7f16\u7a0b\uff0c\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u6d4f\u89c8\u5668\u517c\u5bb9\u6027\uff0c\u6027\u80fd\u4f18\u5316\u7b49\u7b49\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u5728\u672c\u8bfe\u7a0b\u4e2d\u63d0\u4f9b\u4e0e\u9879\u76ee\u8bfe\u7a0b\u914d\u5957\u7684\u7ba1\u7406\u540e\u53f0\u7684\u524d\u7aef\u4ee3\u7801\uff0c\u4f46\u662f\u4e0d\u8bb2\u89e3\u524d\u7aef\u7684\u5185\u5bb9\u3002\u8fd9\u6837\u6211\u4eec\u4f1a\u5c06\u66f4\u591a\u7684\u7cbe\u529b\u653e\u5728",(0,l.kt)("strong",{parentName:"p"},"\u540e\u7aef\u4ee3\u7801"),"\u7684\u5f00\u53d1\u4e0a\uff01"),(0,l.kt)("p",null,"\u4ee5\u5f80\uff1ajsp\u9875\u9762"),(0,l.kt)("p",null," \u7279\u70b9\uff1a\u5305\u542b\u540e\u7aef\u4ee3\u7801\uff0c\u9875\u9762html\u7b49\u6df7\u6742\u3002"),(0,l.kt)("p",null," \u7f3a\u70b9\uff1a\u4e0d\u5229\u4e8e\u5927\u578b\u9879\u76ee\u534f\u4f5c"),(0,l.kt)("p",null,"\u73b0\u5728\uff1a\u672f\u4e1a\u6709\u4e13\u653b\u3002"),(0,l.kt)("p",null," \u524d\u7aef\uff1a\u5404\u79cdjs\uff08angular.js vue.js react.js\uff09 ajax axios \u5f02\u6b65\u8bf7\u6c42\u3002"),(0,l.kt)("p",null," \u540e\u7aef\uff1aspring\u5168\u5bb6\u6876 \u4e2d\u95f4\u4ef6"),(0,l.kt)("p",null," \u4ea4\u4e92\u683c\u5f0f\uff1ajson"),(0,l.kt)("h4",{id:"222-\u6280\u672f\u67b6\u6784-\u9762\u8bd5"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-2-2-%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84-%E9%9D%A2%E8%AF%95"},"#"),"2.2.2 \u6280\u672f\u67b6\u6784-\u9762\u8bd5"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211009163750326-a3acf31d.png",alt:"image-20211009163750326"}),"image-20211009163750326"),(0,l.kt)("p",null,"\u9762\u8bd5\uff1a\u4f60\u4eec\u4e0a\u4e2a\u9879\u76ee\u4e2d\uff0c\u6280\u672f\u67b6\u6784\uff0c\u7528\u5230\u54ea\u4e9b\u6280\u672f\u5462\uff1f"),(0,l.kt)("h4",{id:"223-\u7cfb\u7edf\u67b6\u6784\u56fe-\u9762\u8bd5"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-2-3-%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%9B%BE-%E9%9D%A2%E8%AF%95"},"#"),"2.2.3 \u7cfb\u7edf\u67b6\u6784\u56fe-\u9762\u8bd5"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211009170804497-53dcc516.png",alt:"image-20211009170804497"}),"image-20211009170804497"),(0,l.kt)("p",null,"\u9762\u8bd5\uff1a\u4f60\u4eec\u4e0a\u4e2a\u9879\u76ee\u4e2d\uff0c\u4e1a\u52a1\u67b6\u6784\uff1f"),(0,l.kt)("h2",{id:"3-\u5143\u52a8\u529b\u4e8c\u5962-\u6846\u67b6\u642d\u5efa"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-%E5%85%83%E5%8A%A8%E5%8A%9B%E4%BA%8C%E5%A5%A2-%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA"},"#"),"3. \u5143\u52a8\u529b\u4e8c\u5962-\u6846\u67b6\u642d\u5efa"),(0,l.kt)("h3",{id:"31-\u73af\u5883\u51c6\u5907"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-1-%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"},"#"),"3.1 \u73af\u5883\u51c6\u5907"),(0,l.kt)("h4",{id:"\u5bfc\u5165\u865a\u62df\u673a"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#%E5%AF%BC%E5%85%A5%E8%99%9A%E6%8B%9F%E6%9C%BA"},"#"),"\u5bfc\u5165\u865a\u62df\u673a"),(0,l.kt)("p",null,"\u8865\u5145\uff1a\u865a\u62df\u673a\uff1a\u590d\u5236\u4e86\uff1f\u9009",(0,l.kt)("strong",{parentName:"p"},"\u79fb\u52a8"),"\u4e86\uff1f"),(0,l.kt)("p",null,"IP:192.168.200.128"),(0,l.kt)("p",null,"root 123456"),(0,l.kt)("p",null,"ifconfig \u663e\u793aip"),(0,l.kt)("p",null,"\u5bfc\u5165\u865a\u62df\u673a\uff1a\u6ce8\u610f\u4fee\u6539\u76f8\u5173\u53f7\u6bb5"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/2020-04-05-11-26-50-image-ffc91bef.png",alt:"img"})),(0,l.kt)("h4",{id:"1\u4fee\u6539vmware-vmnet8"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1%E4%BF%AE%E6%94%B9vmware-vmnet8"},"#"),"1\u4fee\u6539vmware vmnet8"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/2020-04-05-11-29-30-image-625bd38f.png",alt:"img"})),(0,l.kt)("p",null," \u5b50\u7f51IP:192.168.200.0"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/2020-04-05-11-30-22-image-cd0fe5f8.png",alt:"img"})),(0,l.kt)("p",null," DHCP\u8bbe\u7f6e\uff1a\u8d77\u59cb\u7ed3\u675f\u53f7\u6bb5 200"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/2020-04-05-11-30-51-image-045e73cc.png",alt:"img"})),(0,l.kt)("p",null," NAT\u8bbe\u7f6e\uff1a\u7f51\u5173 192.168.200.2"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/2020-04-05-11-31-25-image-d5610301.png",alt:"img"})),(0,l.kt)("h4",{id:"2\u4fee\u6539\u672c\u673avmnet8-\u5730\u5740"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2%E4%BF%AE%E6%94%B9%E6%9C%AC%E6%9C%BAvmnet8-%E5%9C%B0%E5%9D%80"},"#"),"2\u4fee\u6539\u672c\u673avmnet8 \u5730\u5740"),(0,l.kt)("p",null," \u53f3\u952e\u7f51\u7edc\u6253\u5f00\u5171\u4eab\u4e2d\u5fc3"),(0,l.kt)("p",null," \u4fee\u6539\u9002\u914d\u5668\u8bbe\u7f6e"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/2020-04-05-11-32-12-image-f586abdb.png",alt:"img"})),(0,l.kt)("p",null," vnet8\u7f51\u5361 \u53f3\u952e \u5c5e\u6027"),(0,l.kt)("p",null," ipv4\u534f\u8bae \u4fee\u6539"),(0,l.kt)("p",null," \u672c\u673aIP 192.168.200.1"),(0,l.kt)("p",null," \u7f51\u5173 192.168.200.2"),(0,l.kt)("p",null," dns 192.168.200.2"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20200406011408858-000b8157.png",alt:"image-20200406011408858"}),"image-20200406011408858"),(0,l.kt)("h4",{id:"3\u542f\u52a8\u865a\u62df\u673a"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3%E5%90%AF%E5%8A%A8%E8%99%9A%E6%8B%9F%E6%9C%BA"},"#"),"3\u542f\u52a8\u865a\u62df\u673a"),(0,l.kt)("p",null," root 123456"),(0,l.kt)("h4",{id:"4xshell-crt-finalshell-\u8fde\u63a5\u5230\u865a\u62df\u673a"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4xshell-crt-finalshell-%E8%BF%9E%E6%8E%A5%E5%88%B0%E8%99%9A%E6%8B%9F%E6%9C%BA"},"#"),"4xshell crt finalshell \u8fde\u63a5\u5230\u865a\u62df\u673a"),(0,l.kt)("p",null,"\u4f5c\u4e1a\uff1alinux \u76f8\u5173\u547d\u4ee4\u590d\u4e60 vim\u547d\u4ee4"),(0,l.kt)("h3",{id:"32-\u9879\u76ee\u7ed3\u6784\u8bf4\u660e"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-2-%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E8%AF%B4%E6%98%8E"},"#"),"3.2 \u9879\u76ee\u7ed3\u6784\u8bf4\u660e"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211009104138637-b7517fce.png",alt:"image-20211009104138637"}),"image-20211009104138637"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211009104247340-bd04ec28.png",alt:"image-20211009104247340"}),"image-20211009104247340"),(0,l.kt)("p",null,"\u7ed3\u6784\u8bf4\u660e\uff1a"),(0,l.kt)("p",null,"ydleses_gateway"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"\u7f51\u5173\u6a21\u5757\uff0c\u6839\u636e\u7f51\u7ad9\u7684\u89c4\u6a21\u548c\u9700\u8981\uff0c\u53ef\u4ee5\u5c06\u7efc\u5408\u903b\u8f91\u76f8\u5173\u7684\u670d\u52a1\u7528\u7f51\u5173\u8def\u7531\u7ec4\u5408\u5230\u4e00\u8d77\u3002\u5728\u8fd9\u91cc\u8fd8\u53ef\u4ee5\u505a\u9274\u6743\u548c\u9650\u6d41\u76f8\u5173\u64cd\u4f5c\u3002\n")),(0,l.kt)("p",null,"ydleses_service"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"\u5fae\u670d\u52a1\u6a21\u5757\uff0c\u8be5\u6a21\u5757\u7528\u4e8e\u5b58\u653e\u6240\u6709\u72ec\u7acb\u7684\u5fae\u670d\u52a1\u5de5\u7a0b\u3002\n")),(0,l.kt)("p",null,"ydleses_service_api ",(0,l.kt)("strong",{parentName:"p"},"bean")," ",(0,l.kt)("strong",{parentName:"p"},"feign")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"\u5bf9\u5e94\u5de5\u7a0b\u7684JavaBean\u3001Feign\u3001\u4ee5\u53caHystrix\u914d\u7f6e\uff0c\u8be5\u5de5\u7a0b\u4e3b\u8981\u5bf9\u5916\u63d0\u4f9b\u4f9d\u8d56\u3002\n")),(0,l.kt)("p",null,"ydleses_transaction_fescar"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"\u5206\u5e03\u5f0f\u4e8b\u52a1\u6a21\u5757\uff0c\u5c06\u5206\u5e03\u5f0f\u4e8b\u52a1\u62bd\u53d6\u5230\u8be5\u5de5\u7a0b\u4e2d\uff0c\u4efb\u4f55\u5de5\u7a0b\u5982\u9700\u8981\u4f7f\u7528\u5206\u5e03\u5f0f\u4e8b\u52a1\uff0c\u53ea\u9700\u4f9d\u8d56\u8be5\u5de5\u7a0b\u5373\u53ef\u3002\n")),(0,l.kt)("p",null,"ydleses_web"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"web\u670d\u52a1\u5de5\u7a0b\uff0c\u5bf9\u5e94\u529f\u80fd\u6a21\u5757\u5982\u9700\u8981\u8c03\u7528\u591a\u4e2a\u5fae\u670d\u52a1\uff0c\u53ef\u4ee5\u5c06\u4ed6\u4eec\u5199\u5165\u5230\u8be5\u6a21\u5757\u4e2d\uff0c\u4f8b\u5982\u7f51\u7ad9\u540e\u53f0\u3001\u7f51\u7ad9\u524d\u53f0\u7b49\n")),(0,l.kt)("p",null,"\u9762\u8bd5\u95ee\u9898\uff1a"),(0,l.kt)("p",null,"1\u5fae\u670d\u52a1\u597d\u5904\uff1a"),(0,l.kt)("p",null,"2\u5206\u5e03\u5f0f\u4e8b\u52a1\uff1a"),(0,l.kt)("h3",{id:"33-\u7236\u5de5\u7a0b\u642d\u5efa"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-3-%E7%88%B6%E5%B7%A5%E7%A8%8B%E6%90%AD%E5%BB%BA"},"#"),"3.3 \u7236\u5de5\u7a0b\u642d\u5efa"),(0,l.kt)("h4",{id:"331-\u4e00\u7ea7\u7236\u5de5\u7a0b\u642d\u5efa"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-3-1-%E4%B8%80%E7%BA%A7%E7%88%B6%E5%B7%A5%E7%A8%8B%E6%90%AD%E5%BB%BA"},"#"),"3.3.1 \u4e00\u7ea7\u7236\u5de5\u7a0b\u642d\u5efa"),(0,l.kt)("p",null,"\u521b\u5efajava maven\u7236\u5de5\u7a0b ydles_parent \u6ce8\u610f\uff1a",(0,l.kt)("strong",{parentName:"p"},"com.ydles")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>2.1.4.RELEASE</version>\n    </parent>\n\n    <properties>\n        <skipTests>true</skipTests>\n    </properties>\n\n    \x3c!--\u4f9d\u8d56\u5305--\x3e\n    <dependencies>\n        \x3c!--\u6d4b\u8bd5\u5305--\x3e\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-test</artifactId>\n            <scope>test</scope>\n        </dependency>\n    </dependencies>\n\n    <dependencyManagement>\n        <dependencies>\n            <dependency>\n                <groupId>org.springframework.cloud</groupId>\n                <artifactId>spring-cloud-dependencies</artifactId>\n                <version>Greenwich.SR1</version>\n                <type>pom</type>\n                <scope>import</scope>\n            </dependency>\n        </dependencies>\n    </dependencyManagement>\n")),(0,l.kt)("p",null,"\u5220\u9664src"),(0,l.kt)("h4",{id:"332-\u4e8c\u7ea7\u7236\u5de5\u7a0b\u6a21\u5757\u642d\u5efa"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-3-2-%E4%BA%8C%E7%BA%A7%E7%88%B6%E5%B7%A5%E7%A8%8B%E6%A8%A1%E5%9D%97%E6%90%AD%E5%BB%BA"},"#"),"3.3.2 \u4e8c\u7ea7\u7236\u5de5\u7a0b\u6a21\u5757\u642d\u5efa"),(0,l.kt)("p",null,"\u521b\u5efaydles_gateway\u3001ydles_service\u3001ydles_service_api\u3001ydles_web\u5de5\u7a0b\uff0c\u5de5\u7a0b\u5168\u90e8\u4e3apom\u5de5\u7a0b\uff0c\u5e76\u5c06\u6240\u6709\u5de5\u7a0b\u7684src\u6587\u4ef6\u5220\u9664\u3002"),(0,l.kt)("h3",{id:"34-eureka\u5fae\u670d\u52a1\u642d\u5efa"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-4-eureka%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA"},"#"),"3.4 Eureka\u5fae\u670d\u52a1\u642d\u5efa"),(0,l.kt)("p",null,"\uff081\uff09pom.xml\u4f9d\u8d56"),(0,l.kt)("p",null,"\u521b\u5efa\u6a21\u5757ydles_eureka\uff0cpom.xml\u5f15\u5165\u4f9d\u8d56"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<dependencies>\n    <dependency>\n        <groupId>org.springframework.cloud</groupId>\n        <artifactId>spring-cloud-starter-netflix-eureka-server</artifactId>\n    </dependency>\n</dependencies>\n")),(0,l.kt)("p",null,"\uff082\uff09 application.yml\u914d\u7f6e"),(0,l.kt)("p",null,"\u521b\u5efa\u914d\u7f6e\u6587\u4ef6application.yml"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"server:\n  port: 6868\neureka:\n  client:\n    register-with-eureka: false #\u662f\u5426\u5c06\u81ea\u5df1\u6ce8\u518c\u5230eureka\u4e2d\n    fetch-registry: false #\u662f\u5426\u4eceeureka\u4e2d\u83b7\u53d6\u4fe1\u606f\n    service-url:\n      defaultZone: http://127.0.0.1:${server.port}/eureka/\n")),(0,l.kt)("p",null,"\uff083\uff09\u542f\u52a8\u7c7b\u914d\u7f6e"),(0,l.kt)("p",null,"\u521b\u5efa\u5305com.ydles.eureka \u5305\u4e0b\u521b\u5efa\u542f\u52a8\u7c7b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"@SpringBootApplication\n@EnableEurekaServer\npublic class EurekaApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(EurekaApplication.class);\n    }\n}\n")),(0,l.kt)("h3",{id:"35-\u516c\u5171\u6a21\u5757\u642d\u5efa"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-5-%E5%85%AC%E5%85%B1%E6%A8%A1%E5%9D%97%E6%90%AD%E5%BB%BA"},"#"),"3.5 \u516c\u5171\u6a21\u5757\u642d\u5efa"),(0,l.kt)("h4",{id:"351-\u5168\u5c40\u516c\u5171\u6a21\u5757"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-5-1-%E5%85%A8%E5%B1%80%E5%85%AC%E5%85%B1%E6%A8%A1%E5%9D%97"},"#"),"3.5.1 \u5168\u5c40\u516c\u5171\u6a21\u5757"),(0,l.kt)("p",null,"\uff081\uff09pom.xml\u4f9d\u8d56"),(0,l.kt)("p",null,"\u521b\u5efa\u516c\u5171\u5b50\u6a21\u5757ydles_common\uff0cpom.xml\u5f15\u5165\u4f9d\u8d56"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<dependencies>\n    \x3c!--web\u8d77\u6b65\u4f9d\u8d56--\x3e\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-web</artifactId>\n    </dependency>\n    \x3c!-- redis \u4f7f\u7528--\x3e\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-data-redis</artifactId>\n    </dependency>\n    <dependency>\n        <groupId>com.alibaba</groupId>\n        <artifactId>fastjson</artifactId>\n        <version>1.2.51</version>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework.cloud</groupId>\n        <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework.cloud</groupId>\n        <artifactId>spring-cloud-starter-openfeign</artifactId>\n    </dependency>\n</dependencies>\n")),(0,l.kt)("p",null,"\uff082\uff09\u5e38\u7528\u5bf9\u8c61"),(0,l.kt)("p",null,"\u521b\u5efacom.ydles.entity\u5305 \uff0c\u5305\u4e0b\u5c01\u88c5\u76f8\u5173\u516c\u5171\u5b9e\u4f53\u7c7b\u3002\u5c06'\u8d44\u6e90/common_entity'\u4e0b\u7684\u76f8\u5173\u8d44\u6e90\u5bfc\u5165\u5de5\u7a0b"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211009115407557-9e25d9d8.png",alt:"image-20211009115407557"}),"image-20211009115407557"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'package com.ydles.entity;\n\n/**\n * \u8fd4\u56de\u7ed3\u679c\u5b9e\u4f53\u7c7b\n */\npublic class Result<T> {\n\n    private boolean flag;//\u662f\u5426\u6210\u529f\n    private Integer code;//\u8fd4\u56de\u7801\n    private String message;//\u8fd4\u56de\u6d88\u606f\n\n    private T data;//\u8fd4\u56de\u6570\u636e\n\n    public Result(boolean flag, Integer code, String message, Object data) {\n        this.flag = flag;\n        this.code = code;\n        this.message = message;\n        this.data = (T)data;\n    }\n\n    public Result(boolean flag, Integer code, String message) {\n        this.flag = flag;\n        this.code = code;\n        this.message = message;\n    }\n\n    public Result() {\n        this.flag = true;\n        this.code = StatusCode.OK;\n        this.message = "\u6267\u884c\u6210\u529f";\n    }\n\n    //getter and setter..\n}\n')),(0,l.kt)("p",null,"\u5efa\u7acb\u7c7b\u7528\u4e8e\u627f\u8f7d\u5206\u9875\u7684\u6570\u636e\u7ed3\u679c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"/**\n * \u5206\u9875\u7ed3\u679c\u7c7b\n */\npublic class PageResult<T> {\n\n    private Long total;//\u603b\u8bb0\u5f55\u6570\n    private List<T> rows;//\u8bb0\u5f55\n\n    public PageResult(Long total, List<T> rows) {\n        this.total = total;\n        this.rows = rows;\n    }\n\n    public PageResult() {\n    }\n\n    //getter and setter ......\n}\n")),(0,l.kt)("p",null,"\u521b\u5efa\u8fd4\u56de\u72b6\u6001\u7801\u5b9e\u4f53\u7c7b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"/**\n * \u8fd4\u56de\u7801\n */\npublic class StatusCode {\n\n    public static final int OK=20000;//\u6210\u529f\n    public static final int ERROR =20001;//\u5931\u8d25\n    public static final int LOGINERROR =20002;//\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\n    public static final int ACCESSERROR =20003;//\u6743\u9650\u4e0d\u8db3\n    public static final int REMOTEERROR =20004;//\u8fdc\u7a0b\u8c03\u7528\u5931\u8d25\n    public static final int REPERROR =20005;//\u91cd\u590d\u64cd\u4f5c\n}\n")),(0,l.kt)("h4",{id:"352-\u6570\u636e\u8bbf\u95ee\u516c\u5171\u6a21\u5757\u642d\u5efa"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-5-2-%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE%E5%85%AC%E5%85%B1%E6%A8%A1%E5%9D%97%E6%90%AD%E5%BB%BA"},"#"),"3.5.2 \u6570\u636e\u8bbf\u95ee\u516c\u5171\u6a21\u5757\u642d\u5efa"),(0,l.kt)("p",null,"\u8fd9\u4e2a\u516c\u5171\u6a21\u5757\u662f\u8fde\u63a5mysql\u6570\u636e\u5e93\u7684\u516c\u5171\u5fae\u670d\u52a1\u6a21\u5757\uff0c\u6240\u4ee5\u9700\u8981\u8fde\u63a5mysql\u7684\u5fae\u670d\u52a1\u90fd\u7ee7\u627f\u81ea\u6b64\u5de5\u7a0b\u3002"),(0,l.kt)("p",null,"\u521b\u5efa\u516c\u5171\u6a21\u5757ydles_common_db\uff0cpom\u6587\u4ef6\u5f15\u5165\u4f9d\u8d56"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<dependencies>\n    <dependency>\n        <groupId>com.ydles</groupId>\n        <artifactId>ydles_common</artifactId>\n        <version>1.0-SNAPSHOT</version>\n    </dependency>\n    \x3c!--\u901a\u7528mapper\u8d77\u6b65\u4f9d\u8d56--\x3e\n    <dependency>\n        <groupId>tk.mybatis</groupId>\n        <artifactId>mapper-spring-boot-starter</artifactId>\n        <version>2.0.4</version>\n    </dependency>\n    \x3c!--MySQL\u6570\u636e\u5e93\u9a71\u52a8--\x3e\n    <dependency>\n        <groupId>mysql</groupId>\n        <artifactId>mysql-connector-java</artifactId>\n    </dependency>\n    \x3c!--mybatis\u5206\u9875\u63d2\u4ef6--\x3e\n    <dependency>\n        <groupId>com.github.pagehelper</groupId>\n        <artifactId>pagehelper-spring-boot-starter</artifactId>\n        <version>1.2.3</version>\n    </dependency>\n</dependencies>\n")),(0,l.kt)("h3",{id:"36-\u5546\u54c1\u5fae\u670d\u52a1\u642d\u5efa"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-6-%E5%95%86%E5%93%81%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA"},"#"),"3.6 \u5546\u54c1\u5fae\u670d\u52a1\u642d\u5efa"),(0,l.kt)("h4",{id:"361-\u5546\u54c1\u5fae\u670d\u52a1api\u5de5\u7a0b\u642d\u5efa"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-6-1-%E5%95%86%E5%93%81%E5%BE%AE%E6%9C%8D%E5%8A%A1api%E5%B7%A5%E7%A8%8B%E6%90%AD%E5%BB%BA"},"#"),"3.6.1 \u5546\u54c1\u5fae\u670d\u52a1API\u5de5\u7a0b\u642d\u5efa"),(0,l.kt)("p",null,"\uff081\uff09ydles_service_api \u5f15\u5165\u4f9d\u8d56"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<dependencies>\n    <dependency>\n        <groupId>org.springframework.cloud</groupId>\n        <artifactId>spring-cloud-starter-openfeign</artifactId>\n        <scope>provided</scope>\n    </dependency>\n    <dependency>\n        <groupId>javax.persistence</groupId>\n        <artifactId>persistence-api</artifactId>\n        <version>1.0</version>\n        <scope>compile</scope>\n    </dependency>\n</dependencies>\n")),(0,l.kt)("p",null,"\uff082\uff09ydles_service_api \u4e0b\u521b\u5efaydles_service_goods_api\u5b50\u6a21\u5757\u5e76\u6dfb\u52a0common\u4f9d\u8d56"),(0,l.kt)("h4",{id:"362-\u5fae\u670d\u52a1\u5de5\u7a0b\u642d\u5efa"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-6-2-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%B7%A5%E7%A8%8B%E6%90%AD%E5%BB%BA"},"#"),"3.6.2 \u5fae\u670d\u52a1\u5de5\u7a0b\u642d\u5efa"),(0,l.kt)("p",null,"\u9879\u76ee\u7ed3\u6784\u4e2d\uff1a"),(0,l.kt)("p",null," 1ydles_service_api \u5fae\u670d\u52a1\u7684feignClient,\u5b9e\u4f53\u7c7b\u3002"),(0,l.kt)("p",null," 2ydles_service \u5fae\u670d\u52a1\uff1a\u542f\u52a8\u7c7b controller service dao\u3002"),(0,l.kt)("p",null,"ydles_service_api\uff1a\u5fae\u670d\u52a1\u63a5\u53e3\u5de5\u7a0b\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<dependencies>\n        <dependency>\n            <groupId>javax.persistence</groupId>\n            <artifactId>persistence-api</artifactId>\n            <version>1.0</version>\n            <scope>compile</scope>\n        </dependency>\n    </dependencies>\n")),(0,l.kt)("p",null,"ydles_service_goods_api\uff1a\u5546\u54c1\u5fae\u670d\u52a1\u5de5\u7a0b,\u5b9e\u4f53\u7c7b\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"    <dependencies>\n        <dependency>\n            <groupId>com.ydles</groupId>\n            <artifactId>ydles_common</artifactId>\n            <version>1.0-SNAPSHOT</version>\n        </dependency>\n    </dependencies>\n")),(0,l.kt)("p",null,"ydles_service_goods\u5de5\u7a0b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"    <dependencies>\n        <dependency>\n            <groupId>com.ydles</groupId>\n            <artifactId>ydles_common_db</artifactId>\n            <version>1.0-SNAPSHOT</version>\n        </dependency>\n        <dependency>\n            <groupId>com.ydles</groupId>\n            <artifactId>ydles_service_goods_api</artifactId>\n            <version>1.0-SNAPSHOT</version>\n        </dependency>\n    </dependencies>\n")),(0,l.kt)("p",null,"application.yml"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"server:\n  port: 9011\nspring:\n  application:\n    name: goods\n  datasource:\n    driver-class-name: com.mysql.jdbc.Driver\n    url: jdbc:mysql://192.168.200.128:3306/ydles_goods?useUnicode=true&characterEncoding=UTF-8&serverTimezone=UTC\n    username: root\n    password: root\neureka:\n  client:\n    service-url:\n      defaultZone: http://127.0.0.1:6868/eureka\n  instance:\n    prefer-ip-address: true\nfeign:\n  hystrix:\n    enabled: true\n\n#hystrix \u914d\u7f6e\nhystrix:\n  command:\n    default:\n      execution:\n        timeout:\n          #\u5982\u679cenabled\u8bbe\u7f6e\u4e3afalse\uff0c\u5219\u8bf7\u6c42\u8d85\u65f6\u4ea4\u7ed9ribbon\u63a7\u5236\n          enabled: true\n        isolation:\n          strategy: SEMAPHORE\n")),(0,l.kt)("p",null,"com.ydles.goods"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@SpringBootApplication\n@EnableEurekaClient\n@MapperScan(basePackages = "com.ydles.goods.dao")\npublic class GoodsApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(GoodsApplication.class,args);\n    }\n}\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6ce8\u610f\uff1a@MapperScan\u662ftk.mybatis.spring.annotation\u5305\u4e0b\u7684\uff0c\u7528\u4e8e\u626b\u63cfMapper\u63a5\u53e3")),(0,l.kt)("h2",{id:"4-\u5546\u54c1\u5fae\u670d\u52a1-\u54c1\u724c\u589e\u5220\u6539\u67e5"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-%E5%95%86%E5%93%81%E5%BE%AE%E6%9C%8D%E5%8A%A1-%E5%93%81%E7%89%8C%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"},"#"),"4. \u5546\u54c1\u5fae\u670d\u52a1-\u54c1\u724c\u589e\u5220\u6539\u67e5"),(0,l.kt)("h3",{id:"41-\u9700\u6c42\u5206\u6790"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"},"#"),"4.1 \u9700\u6c42\u5206\u6790"),(0,l.kt)("p",null,"\u521b\u5efa\u5546\u54c1\u5fae\u670d\u52a1\uff0c\u5b9e\u73b0\u5bf9\u54c1\u724c\u8868\u7684\u589e\u5220\u6539\u67e5\u529f\u80fd\u3002\u5177\u4f53\u5305\u62ec"),(0,l.kt)("p",null,"\uff081\uff09\u67e5\u8be2\u5168\u90e8\u5217\u8868\u6570\u636e"),(0,l.kt)("p",null,"\uff082\uff09\u6839\u636eID\u67e5\u8be2\u5b9e\u4f53\u6570\u636e"),(0,l.kt)("p",null,"\uff083\uff09\u589e\u52a0"),(0,l.kt)("p",null,"\uff084\uff09\u4fee\u6539"),(0,l.kt)("p",null,"\uff085\uff09\u5220\u9664"),(0,l.kt)("p",null,"\uff086\uff09\u6761\u4ef6\u67e5\u8be2"),(0,l.kt)("p",null,"\uff087\uff09\u5206\u9875\u67e5\u8be2"),(0,l.kt)("p",null,"\uff088\uff09\u5206\u9875+\u6761\u4ef6\u67e5\u8be2"),(0,l.kt)("p",null,"\u5199\u4e00\u4e2a\u6d4b\u8bd5controller"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@RequestMapping("/demo")\n@RestController //\u7ec4\u5408\u6ce8\u89e3\npublic class DemoController {\n    @GetMapping("/test")\n    public String demo(){\n        return "demo mesage";\n    }\n}\n')),(0,l.kt)("p",null,"\u6d4b\u8bd5\u65f6\u5148\u542f\u52a8\u6ce8\u518c\u4e2d\u5fc3"),(0,l.kt)("h3",{id:"42-\u8868\u7ed3\u6784\u5206\u6790"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-2-%E8%A1%A8%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90"},"#"),"4.2 \u8868\u7ed3\u6784\u5206\u6790"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u540d\u79f0"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u542b\u4e49"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u957f\u5ea6"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5907\u6ce8"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"id"),(0,l.kt)("td",{parentName:"tr",align:null},"\u54c1\u724cid"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"name"),(0,l.kt)("td",{parentName:"tr",align:null},"\u54c1\u724c\u540d\u79f0"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"img"),(0,l.kt)("td",{parentName:"tr",align:null},"\u54c1\u724c\u56fe\u7247\u5730\u5740"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"letter"),(0,l.kt)("td",{parentName:"tr",align:null},"\u54c1\u724c\u7684\u9996\u5b57\u6bcd"),(0,l.kt)("td",{parentName:"tr",align:null},"CHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"seq"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6392\u5e8f"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})))),(0,l.kt)("h3",{id:"43-\u4ee3\u7801\u5b9e\u73b0"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-3-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"},"#"),"4.3 \u4ee3\u7801\u5b9e\u73b0"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6ce8\u610f"),"\uff1a\u5199\u4ee3\u7801\u8981\u7531\u5e95\u5f80\u4e0a\u5199\u3002"),(0,l.kt)("p",null,"\u5b9a\u4e49\u63a5\u53e3\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'GET ip:port/brand/findAll\n\n\u8fd4\u56de\n{\nflag:true\ncode:20000\nmsg:"\u6210\u529f"\uff0c\ndata:[]\n}\n')),(0,l.kt)("h4",{id:"431-\u54c1\u724c\u5217\u8868"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-3-1-%E5%93%81%E7%89%8C%E5%88%97%E8%A1%A8"},"#"),"4.3.1 \u54c1\u724c\u5217\u8868"),(0,l.kt)("p",null,"\uff081\uff09\u5728ydles_service_goods_api\u521b\u5efacom.ydles.goods.pojo\u5305\uff0c\u5305\u4e0b\u521b\u5efaBrand\u5b9e\u4f53\u7c7b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Table(name="tb_brand")\npublic class Brand implements Serializable{\n    @Id\n    private Integer id;//\u54c1\u724cid\n    private String name;//\u54c1\u724c\u540d\u79f0\n    private String image;//\u54c1\u724c\u56fe\u7247\u5730\u5740\n    private String letter;//\u54c1\u724c\u7684\u9996\u5b57\u6bcd\n    private Integer seq;//\u6392\u5e8f\n    \n    // getter and setter  .....(\u7701\u7565)\n}\n')),(0,l.kt)("p",null,"@Table\u548c@Id\u90fd\u662fJPA\u6ce8\u89e3\uff0c@Table\u7528\u4e8e\u914d\u7f6e\u8868\u4e0e\u5b9e\u4f53\u7c7b\u7684\u6620\u5c04\u5173\u7cfb\uff0c@Id\u7528\u4e8e\u6807\u8bc6\u4e3b\u952e\u5c5e\u6027\u3002"),(0,l.kt)("p",null,"\uff082\uff09Dao\u521b\u5efa"),(0,l.kt)("p",null,"\u5728ydles_service_goods\u5fae\u670d\u52a1\u4e0b\u521b\u5efacom.ydles.goods.dao.BrandMapper\u63a5\u53e3\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"public interface BrandMapper extends Mapper<Brand> {\n}\n")),(0,l.kt)("p",null,"\u7ee7\u627f\u4e86Mapper\u63a5\u53e3\uff0c\u5c31\u81ea\u52a8\u5b9e\u73b0\u4e86\u589e\u5220\u6539\u67e5\u7684\u5e38\u7528\u65b9\u6cd5\u3002"),(0,l.kt)("p",null,"\uff083\uff09\u4e1a\u52a1\u5c42"),(0,l.kt)("p",null,"\u521b\u5efacom.ydles.goods.service.BrandService\u63a5\u53e3\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public interface BrandService {\n\n    /***\n     * \u67e5\u8be2\u6240\u6709\u54c1\u724c\n     * @return\n     */\n  public  List<Brand> findAll();\n}\n")),(0,l.kt)("p",null,"\u521b\u5efacom.ydles.goods.service.impl\u5305\uff0c\u5305\u4e0b\u521b\u5efa\u670d\u52a1\u5b9e\u73b0\u7c7b BrandServiceImpl\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"@Service\npublic class BrandServiceImpl implements BrandService {\n    \n    @Autowired\n    private BrandMapper brandMapper;\n    \n    @Override\n    public List<Brand> findAll() {\n        return brandMapper.selectAll();\n    }   \n}\n")),(0,l.kt)("p",null,"\uff083\uff09\u63a7\u5236\u5c42"),(0,l.kt)("p",null,"\u63a7\u5236\u5c42 com.ydles.goods\u5305\u4e0b\u521b\u5efacontroller\u5305 \uff0c\u5305\u4e0b\u521b\u5efa\u7c7b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@RestController\n@RequestMapping("/brand")\npublic class BrandController {\n\n    @Autowired\n    private BrandService brandService;\n\n    @GetMapping\n    public Result findAll(){\n        List<Brand> brandList = brandService.findAll();\n        return new Result(true, StatusCode.OK,"\u67e5\u8be2\u6210\u529f",brandList) ;\n    }\n  \n}\n')),(0,l.kt)("p",null,"\u6700\u540e\u6d4b\u8bd5 ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9011/brand"},"http://localhost:9011/brandopen in new window")),(0,l.kt)("p",null,"\u53ef\u7528postman\u6d4b\u8bd5"),(0,l.kt)("h4",{id:"432-\u6839\u636eid\u67e5\u8be2\u54c1\u724c"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-3-2-%E6%A0%B9%E6%8D%AEid%E6%9F%A5%E8%AF%A2%E5%93%81%E7%89%8C"},"#"),"4.3.2 \u6839\u636eID\u67e5\u8be2\u54c1\u724c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'GET ip:port/brand/102\n\n{\nflag:true\ncode:20000\nmsg:"\u6210\u529f"\uff0c\ndata:{}\n}\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u5957\u8def\u4ee3\u7801")),(0,l.kt)("p",null,"\uff081\uff09 \u4e1a\u52a1\u5c42\u63a5\u53e3"),(0,l.kt)("p",null,"\u4fee\u6539com.ydles.goods.service.BrandService\u63a5\u53e3\uff0c\u6dfb\u52a0\u6839\u636eID\u67e5\u8be2\u54c1\u724c\u6570\u636e\u65b9\u6cd5\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"/**\n * \u6839\u636eID\u67e5\u8be2\n * @param id\n * @return\n */\npublic Brand findById(Integer id);\n")),(0,l.kt)("p",null,"\uff082\uff09\u4e1a\u52a1\u5c42\u5b9e\u73b0"),(0,l.kt)("p",null,"\u4fee\u6539com.ydles.goods.service.impl.BrandServiceImpl\u65b0\u589e\u65b9\u6cd5\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"/**\n * \u6839\u636eID\u67e5\u8be2\n * @param id\n * @return\n */\n@Override\npublic Brand findById(Integer id){\n    return  brandMapper.selectByPrimaryKey(id);\n}\n")),(0,l.kt)("p",null,"\uff083\uff09 \u63a7\u5236\u5c42"),(0,l.kt)("p",null,"BrandController\u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'/***\n * \u6839\u636eID\u67e5\u8be2\u54c1\u724c\u6570\u636e\n * @param id\n * @return\n */\n@GetMapping("/{id}")\npublic Result findById(@PathVariable Integer id){\n    Brand brand = brandService.findById(id);\n    return new Result(true,StatusCode.OK,"\u67e5\u8be2\u6210\u529f",brand);\n}\n')),(0,l.kt)("p",null,"\u6d4b\u8bd5",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9011/brand/102"},"http://localhost:9011/brand/102open in new window")),(0,l.kt)("h4",{id:"433-\u65b0\u589e\u54c1\u724c"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-3-3-%E6%96%B0%E5%A2%9E%E5%93%81%E7%89%8C"},"#"),"4.3.3 \u65b0\u589e\u54c1\u724c"),(0,l.kt)("p",null,"\u9700\u6c42\uff1aPOST ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9011/brand/insert"},"http://localhost:9011/brand/insertopen in new window")),(0,l.kt)("p",null,"json"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'{\n    "name": "Cartier",\n    "image": "123"\n}\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'\u8fd4\u56de\n{\nflag:true\ncode:20000\nmsg:"\u6210\u529f"\n}\n')),(0,l.kt)("p",null,"\uff081\uff09\u4e1a\u52a1\u5c42\u63a5\u53e3 \u4fee\u6539com.ydles.goods.service.BrandService\uff0c\u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"/***\n * \u65b0\u589e\u54c1\u724c\n * @param brand\n */\npublic void add(Brand brand);\n")),(0,l.kt)("p",null,"\uff082\uff09\u4e1a\u52a1\u5c42\u5b9e\u73b0 \u4fee\u6539com.ydles.goods.service.impl.BrandServiceImpl\uff0c\u65b0\u589e\u589e\u52a0\u54c1\u724c\u65b9\u6cd5\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"/**\n * \u589e\u52a0\n * @param brand\n */\n@Override\npublic void add(Brand brand){\n    brandMapper.insertSelective(brand);\n}\n")),(0,l.kt)("p",null,"\uff083\uff09\u63a7\u5236\u5c42 BrandController\u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'/***\n * \u65b0\u589e\u54c1\u724c\u6570\u636e\n * @param brand\n * @return\n */\n@PostMapping\npublic Result add(@RequestBody Brand brand){\n    brandService.add(brand);\n    return new Result(true,StatusCode.OK,"\u6dfb\u52a0\u6210\u529f");\n}\n')),(0,l.kt)("h4",{id:"434-\u4fee\u6539\u54c1\u724c"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-3-4-%E4%BF%AE%E6%94%B9%E5%93%81%E7%89%8C"},"#"),"4.3.4 \u4fee\u6539\u54c1\u724c"),(0,l.kt)("p",null,"\u9700\u6c42\uff1aPUT ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9011/brand/update/102"},"http://localhost:9011/brand/update/102open in new window")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'{\n  "name": "\u5361\u5730\u4e9a"\n}\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u4fee\u6539\u67d0\u4e00\u4e2a\u54c1\u724c\u65f6\uff0c\u53ea\u4fee\u6539\u4f20\u8fdb\u6765\u7684\u6570\u636e\u3002")),(0,l.kt)("p",null,"\uff081\uff09 \u4e1a\u52a1\u5c42\u63a5\u53e3"),(0,l.kt)("p",null,"\u9700\u6539com.ydles.goods.service.BrandService,\u6dfb\u52a0\u4fee\u6539\u54c1\u724c\u65b9\u6cd5\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"/***\n * \u4fee\u6539\u54c1\u724c\u6570\u636e\n * @param brand\n */\npublic void update(Brand brand);\n")),(0,l.kt)("p",null,"\uff082\uff09\u4e1a\u52a1\u5c42\u5b9e\u73b0 \u4fee\u6539com.ydles.goods.service.impl.BrandServiceImpl\uff0c\u6dfb\u52a0\u4fee\u6539\u54c1\u724c\u65b9\u6cd5\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"/**\n * \u4fee\u6539\n * @param brand\n */\n@Override\npublic void update(Brand brand){\n    brandMapper.updateByPrimaryKeySelective(brand);\n}\n")),(0,l.kt)("p",null,"\uff083\uff09\u63a7\u5236\u5c42"),(0,l.kt)("p",null,"BrandController\u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'/***\n * \u4fee\u6539\u54c1\u724c\u6570\u636e\n * @param brand\n * @param id\n * @return\n */\n@PutMapping(value="/{id}")\npublic Result update(@RequestBody Brand brand,@PathVariable Integer id){\n    brand.setId(id);\n    brandService.update(brand);\n    return new Result(true,StatusCode.OK,"\u4fee\u6539\u6210\u529f");\n}\n')),(0,l.kt)("h4",{id:"435-\u5220\u9664\u54c1\u724c"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-3-5-%E5%88%A0%E9%99%A4%E5%93%81%E7%89%8C"},"#"),"4.3.5 \u5220\u9664\u54c1\u724c"),(0,l.kt)("p",null,"\u9700\u6c42\uff1aDELETE ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9011/brand/325414"},"http://localhost:9011/brand/325414open in new window")),(0,l.kt)("p",null,"\uff081\uff09\u4e1a\u52a1\u5c42\u63a5\u53e3"),(0,l.kt)("p",null,"\u4fee\u6539com.ydles.goods.service.BrandService\uff0c\u6dfb\u52a0\u5220\u9664\u54c1\u724c\u65b9\u6cd5\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"/***\n * \u5220\u9664\u54c1\u724c\n * @param id\n */\npublic void delete(Integer id);\n")),(0,l.kt)("p",null,"\uff082\uff09\u4e1a\u52a1\u5c42\u5b9e\u73b0 \u4fee\u6539com.ydles.goods.service.impl.BrandServiceImpl\uff0c\u65b0\u589e\u5220\u9664\u54c1\u724c\u65b9\u6cd5\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"/**\n * \u5220\u9664\n * @param id\n */\n@Override\npublic void delete(Integer id){\n    brandMapper.deleteByPrimaryKey(id);\n}\n")),(0,l.kt)("p",null,"\uff083\uff09\u63a7\u5236\u5c42 BrandController\u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'/***\n * \u6839\u636eID\u5220\u9664\u54c1\u724c\u6570\u636e\n * @param id\n * @return\n */\n@DeleteMapping(value = "/{id}" )\npublic Result delete(@PathVariable Integer id){\n    brandService.delete(id);\n    return new Result(true,StatusCode.OK,"\u5220\u9664\u6210\u529f");\n}\n')),(0,l.kt)("p",null,"\u4ee3\u7801\u4f18\u5316\uff1a"),(0,l.kt)("p",null,"1\u4ee3\u7801\u91cc\u7684\u9b54\u6cd5\u503c ----\u300b\u5e38\u91cf\u6216\u8005\u679a\u4e3e"),(0,l.kt)("p",null,"2",(0,l.kt)("strong",{parentName:"p"},"resful\u98ce\u683c")," \uff1a"),(0,l.kt)("p",null," \u524d\u540e\u7aef\u4ea4\u4e92\u4e2d\uff0cjson\u4f20\u9012\u6570\u636e\u3002"),(0,l.kt)("p",null," \u6570\u636e\u7684\u589e\u5220\u6539\u67e5\uff0c\u4f7f\u7528http\u7684\u4e0d\u540c\u65b9\u6cd5\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"\u67e5\u8be2 GET  \n\u65b0\u589e POST\n\u4fee\u6539 PUT\n\u5220\u9664 DELETE\n")),(0,l.kt)("h4",{id:"436-\u54c1\u724c\u5217\u8868\u6761\u4ef6\u67e5\u8be2"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-3-6-%E5%93%81%E7%89%8C%E5%88%97%E8%A1%A8%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"},"#"),"4.3.6 \u54c1\u724c\u5217\u8868\u6761\u4ef6\u67e5\u8be2"),(0,l.kt)("p",null,"\u9700\u6c42\uff1aGet ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9011/brand/search?name=%E5%A5%88%E5%84%BF&letter=C"},"http://localhost:9011/brand/search?name=\u5948\u513f&letter=Copen in new window")),(0,l.kt)("p",null,"sql:select * from tb_brand where name like '%\u5948\u513f%' and letter=C"),(0,l.kt)("p",null,"\uff081\uff09 \u4e1a\u52a1\u5c42\u63a5\u53e3"),(0,l.kt)("p",null,"\u4fee\u6539com.ydles.goods.service.BrandService\uff0c\u589e\u52a0\u6839\u636e\u6761\u4ef6\u641c\u7d22\u54c1\u724c\u65b9\u6cd5\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"/***\n * \u591a\u6761\u4ef6\u641c\u7d22\u54c1\u724c\u65b9\u6cd5\n * @param searchMap\n * @return\n */\npublic List<Brand> findList(Map<String, Object> searchMap);\n")),(0,l.kt)("p",null,"\uff082\uff09\u4e1a\u52a1\u5c42\u5b9e\u73b0 \u4fee\u6539com.ydles.goods.service.impl.BrandServiceImpl\uff0c\u6dfb\u52a0\u6839\u636e\u591a\u6761\u4ef6\u641c\u7d22\u54c1\u724c\u65b9\u6cd5\u7684\u5b9e\u73b0\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'//\u7f3a\u5565\u8865\u5565\n    @Override\n    public List<Brand> search(Map<String, String> searchMap) {\n        //sql: select * from tb_brand where letter=C and name like "%\u5948\u513f%"\n        Example example=new Example(Brand.class);\n        //criteria \u653e\u641c\u7d22\u6761\u4ef6\n        Example.Criteria criteria = example.createCriteria();\n\n        if(searchMap!=null){\n            if(StringUtils.isNotBlank(searchMap.get("name"))){\n                //and name like "%\u5948\u513f%"\n                criteria.andLike("name","%"+searchMap.get("name")+"%");\n            }\n            if(StringUtils.isNotBlank(searchMap.get("letter"))){\n                //and name like "%\u5948\u513f%"\n                criteria.andEqualTo("letter",searchMap.get("letter"));\n            }\n        }\n\n        List<Brand> brandList = brandMapper.selectByExample(example);\n        return brandList;\n    }\n')),(0,l.kt)("p",null,"\uff083\uff09 \u63a7\u5236\u5c42 BrandController\u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'/***\n * \u591a\u6761\u4ef6\u641c\u7d22\u54c1\u724c\u6570\u636e\n * @param searchMap\n * @return\n */\n@GetMapping(value = "/search" )\npublic Result findList(@RequestParam Map searchMap){\n    List<Brand> list = brandService.findList(searchMap);\n    return new Result(true,StatusCode.OK,"\u67e5\u8be2\u6210\u529f",list);\n}\n')),(0,l.kt)("p",null,"postman\u6d4b\u8bd5 ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9011/brand/search?name="},"http://localhost:9011/brand/search?name=open in new window")),(0,l.kt)("h4",{id:"437-\u54c1\u724c\u5217\u8868\u5206\u9875\u67e5\u8be2"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-3-7-%E5%93%81%E7%89%8C%E5%88%97%E8%A1%A8%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"},"#"),"4.3.7 \u54c1\u724c\u5217\u8868\u5206\u9875\u67e5\u8be2"),(0,l.kt)("p",null,"\u9700\u6c42 GET ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9011/brand/search/3/5"},"http://localhost:9011/brand/search/3/5open in new window")),(0,l.kt)("p",null,"sql:select * from tb_brand limit 20,10"),(0,l.kt)("p",null,"\uff081\uff09 \u4e1a\u52a1\u5c42\u63a5\u53e3 \u4fee\u6539com.ydles.goods.service.BrandService\u6dfb\u52a0\u5206\u9875\u65b9\u6cd5\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"/***\n * \u5206\u9875\u67e5\u8be2\n * @param page\n * @param size\n * @return\n */\npublic Page<Brand> findPage(int page, int size);\n")),(0,l.kt)("p",null,"\uff082\uff09\u4e1a\u52a1\u5c42\u5b9e\u73b0 \u4fee\u6539com.ydles.goods.service.impl.BrandServiceImpl\u6dfb\u52a0\u5206\u9875\u65b9\u6cd5\u5b9e\u73b0\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"/**\n * \u5206\u9875\u67e5\u8be2\n * @param pagejava\n * @param size\n * @return\n */\n@Override\npublic Page<Brand> findPage(int page, int size){\n    PageHelper.startPage(page,size);\n    return (Page<Brand>)brandMapper.selectAll();\n}\n")),(0,l.kt)("p",null,"\uff083\uff09 \u63a7\u5236\u5c42 BrandController\u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'/***\n * \u5206\u9875\u641c\u7d22\u5b9e\u73b0\n * @param page\n * @param size\n * @return\n */\n@GetMapping(value = "/search/{page}/{size}" )\npublic Result findPage(@PathVariable  int page, @PathVariable  int size){\n    Page<Brand> pageList = brandService.findPage(page, size);\n    PageResult pageResult=new PageResult(pageList.getTotal(),pageList.getResult());\n    return new Result(true,StatusCode.OK,"\u67e5\u8be2\u6210\u529f",pageResult);\n}\n')),(0,l.kt)("h4",{id:"438-\u54c1\u724c\u5217\u8868\u6761\u4ef6\u5206\u9875\u67e5\u8be2"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-3-8-%E5%93%81%E7%89%8C%E5%88%97%E8%A1%A8%E6%9D%A1%E4%BB%B6-%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"},"#"),"4.3.8 \u54c1\u724c\u5217\u8868\u6761\u4ef6+\u5206\u9875\u67e5\u8be2"),(0,l.kt)("p",null,"\u9700\u6c42\uff1a GET ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9011/brand/searchPage/2/5?lettrt=I&name=%22%E5%A5%88%E5%84%BF%22"},'http://localhost:9011/brand/searchPage/2/5?lettrt=I&name="\u5948\u513f"open in new window')),(0,l.kt)("p",null,"\uff081\uff09 \u4e1a\u52a1\u5c42\u63a5\u53e3 \u4fee\u6539com.ydles.goods.service.BrandService\uff0c\u589e\u52a0\u591a\u6761\u4ef6\u5206\u9875\u67e5\u8be2\u65b9\u6cd5\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"/***\n * \u591a\u6761\u4ef6\u5206\u9875\u67e5\u8be2\n * @param searchMap\n * @param page\n * @param size\n * @return\n */\nPage<Brand> findPage(Map<String, Object> searchMap, int page, int size);\n")),(0,l.kt)("p",null,"\uff082\uff09\u4e1a\u52a1\u5c42\u5b9e\u73b0 \u4fee\u6539com.ydles.goods.service.impl.BrandServiceImpl\uff0c\u6dfb\u52a0\u591a\u6761\u4ef6\u5206\u9875\u67e5\u8be2\u65b9\u6cd5\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'/**\n     * \u6761\u4ef6+\u5206\u9875\u67e5\u8be2\n     * @param searchMap \u67e5\u8be2\u6761\u4ef6\n     * @param page \u9875\u7801\n     * @param size \u9875\u5927\u5c0f\n     * @return \u5206\u9875\u7ed3\u679c\n     */\n@Override\npublic Page<Brand> findPage(Map<String,Object> searchMap, int page, int size){\n    PageHelper.startPage(page,size);\n    Example example=new Example(Brand.class);\n    Example.Criteria criteria = example.createCriteria();\n    if(searchMap!=null){\n        // \u54c1\u724c\u540d\u79f0\n        if(searchMap.get("name")!=null && !"".equals(searchMap.get("name"))){\n            criteria.andLike("name","%"+searchMap.get("name")+"%");\n        }\n        // \u54c1\u724c\u7684\u9996\u5b57\u6bcd\n        if(searchMap.get("letter")!=null && !"".equals(searchMap.get("letter"))){\n            criteria.andEqualTo("letter",searchMap.get("letter"));\n        }\n    }\n    return (Page<Brand>)brandMapper.selectByExample(example);\n}\n')),(0,l.kt)("p",null,"\uff083\uff09\u63a7\u5236\u5c42 BrandController\u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'/***\n * \u5206\u9875\u641c\u7d22\u5b9e\u73b0\n * @param searchMap\n * @param page\n * @param size\n * @return\n */\n@GetMapping(value = "/search/{page}/{size}" )\npublic Result findPage(@RequestParam Map searchMap, @PathVariable  int page, @PathVariable  int size){\n    Page<Brand> pageList = brandService.findPage(searchMap, page, size);\n    PageResult pageResult=new PageResult(pageList.getTotal(),pageList.getResult());\n    return new Result(true,StatusCode.OK,"\u67e5\u8be2\u6210\u529f",pageResult);\n}\n')),(0,l.kt)("h2",{id:"5-\u516c\u5171\u5f02\u5e38\u5904\u7406"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-%E5%85%AC%E5%85%B1%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"},"#"),"5. \u516c\u5171\u5f02\u5e38\u5904\u7406"),(0,l.kt)("p",null,"\u4e3a\u4e86\u4f7f\u6211\u4eec\u7684\u4ee3\u7801\u66f4\u5bb9\u6613\u7ef4\u62a4\uff0c\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u7c7b\u96c6\u4e2d\u5904\u7406\u5f02\u5e38"),(0,l.kt)("p",null,"\u5728com.ydles.goods.handler\u5305\u4e0b\u521b\u5efa\u516c\u5171\u5f02\u5e38\u5904\u7406\u7c7bBaseExceptionHandler"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"/**\n * \u7edf\u4e00\u5f02\u5e38\u5904\u7406\u7c7b\n */\n@ControllerAdvice\npublic class BaseExceptionHandler {\n    \n    @ExceptionHandler(value = Exception.class)\n    @ResponseBody\n    public Result error( Exception e) {\n        e.printStackTrace();        \n        return new Result(false, StatusCode.ERROR, e.getMessage());\n    }\n}\n")),(0,l.kt)("p",null,"\u62d3\u5c55\uff1ajava \u5f02\u5e38\u9519\u8bef\u5206\u7c7b"),(0,l.kt)("p",null,"\u603b\u7ed3\uff1a"),(0,l.kt)("p",null,"1\u8d70\u8fdb\u7535\u5546 \u5143\u52a8\u529b\u4e8c\u5962 -\u9762\u8bd5"),(0,l.kt)("p",null,"\u7535\u5546\u662f\u4ec0\u4e48 \u6709\u6280\u672f\u7279\u70b9"),(0,l.kt)("p",null,"\u4e8c\u5962\u5e02\u573a\u5730\u4f4d"),(0,l.kt)("p",null,"2\u5143\u52a8\u529b\u4e8c\u5962 \u9700\u6c42"),(0,l.kt)("p",null,"\u6280\u672f\u67b6\u6784"),(0,l.kt)("p",null,"\u4e1a\u52a1\u67b6\u6784"),(0,l.kt)("p",null,"3\u642d\u5efa\u9879\u76ee"),(0,l.kt)("p",null,"\u5bfc\u5165\u865a\u62df\u673a"),(0,l.kt)("p",null,"\u4ee3\u7801\u67b6\u6784"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211009104138637-b7517fce.png",alt:"image-20211009104138637"}),"image-20211009104138637"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211009104247340-bd04ec28.png",alt:"image-20211009104247340"}),"image-20211009104247340"),(0,l.kt)("p",null,"\u7236\u5de5\u7a0b \u4e8c\u7ea7\u7236\u5de5\u7a0b \u6ce8\u518c\u4e2d\u5fc3"),(0,l.kt)("p",null,"\u5546\u54c1\u5fae\u670d\u52a1"),(0,l.kt)("p",null,"4\u54c1\u724c\u7684crud"),(0,l.kt)("p",null,"\u67e5\u8be2\uff1atk.mybatis"),(0,l.kt)("p",null,"\u6761\u4ef6\u67e5\u8be2\uff1aexample"),(0,l.kt)("p",null,"\u5206\u9875\uff1apageHelper"),(0,l.kt)("p",null,"5\u516c\u5171\u5f02\u5e38\u5904\u7406"),(0,l.kt)("p",null,"\u5f02\u5e38\u5206\u7c7b"),(0,l.kt)("h1",{id:"\u7b2c2\u7ae0-\u5206\u5e03\u5f0f\u6587\u4ef6\u5b58\u50a8"},(0,l.kt)("a",{parentName:"h1",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#%E7%AC%AC2%E7%AB%A0-%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E5%AD%98%E5%82%A8"},"#"),"\u7b2c2\u7ae0 \u5206\u5e03\u5f0f\u6587\u4ef6\u5b58\u50a8"),(0,l.kt)("p",null,"\u89d2\u8272\uff1a\u5546\u54c1 \u540e\u7aef\u5f00\u53d1"),(0,l.kt)("h2",{id:"\u5b66\u4e60\u76ee\u6807-1"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87-1"},"#"),"\u5b66\u4e60\u76ee\u6807"),(0,l.kt)("p",null,"\u76ee\u68071\uff1a\u80fd\u591fCORS\u89e3\u51b3\u8de8\u57df\u95ee\u9898"),(0,l.kt)("p",null,"\u76ee\u68072\uff1a\u7406\u89e3\u89c4\u683c\u53c2\u6570\u6a21\u677f\u4e0e\u5546\u54c1\u5206\u7c7b\u8868\u7ed3\u6784"),(0,l.kt)("p",null,"\u76ee\u68073\uff1a\u638c\u63e1\u901a\u7528mapper\u81ea\u5b9a\u4e49\u65b9\u6cd5\u7684\u4f7f\u7528"),(0,l.kt)("p",null,"\u76ee\u68074\uff1a\u80fd\u591f\u4f7f\u7528\u5206\u5e03\u5f0f\u6587\u4ef6\u5b58\u50a8FastDFS\u4e0a\u4f20\u6587\u4ef6"),(0,l.kt)("h2",{id:"1-\u8de8\u57df\u89e3\u51b3\u65b9\u6848cors-\u9762\u8bd5"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-%E8%B7%A8%E5%9F%9F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88cors-%E9%9D%A2%E8%AF%95"},"#"),"1. \u8de8\u57df\u89e3\u51b3\u65b9\u6848CORS-\u9762\u8bd5"),(0,l.kt)("h3",{id:"11-\u4ec0\u4e48\u662f\u8de8\u57df"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-1-%E4%BB%80%E4%B9%88%E6%98%AF%E8%B7%A8%E5%9F%9F"},"#"),"1.1 \u4ec0\u4e48\u662f\u8de8\u57df"),(0,l.kt)("p",null,"\u9762\u8bd5\uff1a"),(0,l.kt)("p",null,"1\u4ec0\u4e48\u662f\u8de8\u57df\u95ee\u9898\uff1a",(0,l.kt)("strong",{parentName:"p"},"\u6d4f\u89c8\u5668"),"\u7684",(0,l.kt)("strong",{parentName:"p"},"\u540c\u6e90\u7b56\u7565"),"\uff0c\u5bfc\u81f4\u4e0d\u80fd\u5411\u5176\u4ed6\u57df\u540d\u53d1\u9001",(0,l.kt)("strong",{parentName:"p"},"\u5f02\u6b65"),"\u8bf7\u6c42\u3002"),(0,l.kt)("p",null,"2\u540c\u6e90\u7b56\u7565\uff1a\u5177\u6709\u76f8\u540c\u7684\u534f\u8bae\uff08protocol\uff09\uff0c\u4e3b\u673a\uff08host\uff09\u548c\u7aef\u53e3\u53f7\uff08port\uff09"),(0,l.kt)("p",null," \u9875\u9762\uff1a",(0,l.kt)("a",{parentName:"p",href:"http://192.168.1.1:8080/search"},"http://192.168.1.1:8080/searchopen in new window")," \u5546\u54c1\u641c\u7d22\u9875\u9762"),(0,l.kt)("p",null," ",(0,l.kt)("a",{parentName:"p",href:"https://192.168.1.1:8080/search?name=%E6%89%8B%E8%A1%A8"},"https://192.168.1.1:8080/search?name=\u624b\u8868open in new window")," -----\x3eno"),(0,l.kt)("p",null," ",(0,l.kt)("a",{parentName:"p",href:"http://192.168.1.2:8080/search"},"http://192.168.1.2:8080/searchopen in new window")," -------------\x3eno"),(0,l.kt)("p",null," ",(0,l.kt)("a",{parentName:"p",href:"http://192.168.1.1:8081/goods/add"},"http://192.168.1.1:8081/goods/addopen in new window")," -------------\x3eno"),(0,l.kt)("p",null," ",(0,l.kt)("a",{parentName:"p",href:"http://192.168.1.1:8080/goods/add"},"http://192.168.1.1:8080/goods/addopen in new window")," -------------\x3e YES"),(0,l.kt)("p",null,"\u51fa\u4e8e\u6d4f\u89c8\u5668\u7684\u540c\u6e90\u7b56\u7565\u9650\u5236\u3002\u540c\u6e90\u7b56\u7565\uff08Sameoriginpolicy\uff09\u662f\u4e00\u79cd\u7ea6\u5b9a\uff0c\u5b83\u662f\u6d4f\u89c8\u5668\u6700\u6838\u5fc3\u4e5f\u6700\u57fa\u672c\u7684\u5b89\u5168\u529f\u80fd\uff0c\u5982\u679c\u7f3a\u5c11\u4e86\u540c\u6e90\u7b56\u7565\uff0c\u5219\u6d4f\u89c8\u5668\u7684\u6b63\u5e38\u529f\u80fd\u53ef\u80fd\u90fd\u4f1a\u53d7\u5230\u5f71\u54cd\u3002\u53ef\u4ee5\u8bf4Web\u662f\u6784\u5efa\u5728\u540c\u6e90\u7b56\u7565\u57fa\u7840\u4e4b\u4e0a\u7684\uff0c\u6d4f\u89c8\u5668\u53ea\u662f\u9488\u5bf9\u540c\u6e90\u7b56\u7565\u7684\u4e00\u79cd\u5b9e\u73b0\u3002\u540c\u6e90\u7b56\u7565\u4f1a\u963b\u6b62\u4e00\u4e2a\u57df\u7684javascript\u811a\u672c\u548c\u53e6\u5916\u4e00\u4e2a\u57df\u7684\u5185\u5bb9\u8fdb\u884c\u4ea4\u4e92\u3002\u6240\u8c13\u540c\u6e90\uff08\u5373\u6307\u5728\u540c\u4e00\u4e2a\u57df\uff09\u5c31\u662f\u4e24\u4e2a\u9875\u9762\u5177\u6709\u76f8\u540c\u7684\u534f\u8bae\uff08protocol\uff09\uff0c\u4e3b\u673a\uff08host\uff09\u548c\u7aef\u53e3\u53f7\uff08port\uff09"),(0,l.kt)("p",null,"\u8de8\u57df\u95ee\u9898\uff1a\u6d4f\u89c8\u5668\u7684\u540c\u6e90\u7b56\u7565\u9650\u5236\u3002\u4f1a\u62a5\u9519\u3002"),(0,l.kt)("p",null,"\u5982\u679c\u8de8\u57df\u8c03\u7528\uff0c\u4f1a\u51fa\u73b0\u5982\u4e0b\u9519\u8bef\uff1a"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin '",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9100/"},"http://localhost:9100open in new window"),"' is therefore not allowed access. The response had HTTP status code 400.")),(0,l.kt)("p",null,"\u7531\u4e8e\u6211\u4eec\u91c7\u7528\u7684\u662f\u524d\u540e\u7aef\u5206\u79bb\u7684\u7f16\u7a0b\u65b9\u5f0f\uff0c\u524d\u7aef\u548c\u540e\u7aef\u5fc5\u5b9a\u5b58\u5728\u8de8\u57df\u95ee\u9898\u3002\u89e3\u51b3\u8de8\u57df\u95ee\u9898\u53ef\u4ee5\u91c7\u7528CORS"),(0,l.kt)("h3",{id:"12-cors\u7b80\u4ecb"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-2-cors%E7%AE%80%E4%BB%8B"},"#"),"1.2 CORS\u7b80\u4ecb"),(0,l.kt)("p",null,"CORS:\u8de8\u57df\u8d44\u6e90\u5171\u4eab"),(0,l.kt)("p",null,"\u6761\u4ef6\uff1aIE10\u4ee5\u4e0a"),(0,l.kt)("p",null,"\u672c\u8d28\uff1a\u8bf7\u6c42\u5934\u589e\u52a0\u4e00\u4e2a\u53c2\u6570\uff0c\u5f00\u542f\u8de8\u57df\u8bf7\u6c42\u3002"),(0,l.kt)("p",null,'CORS \u662f\u4e00\u4e2a W3C \u6807\u51c6\uff0c\u5168\u79f0\u662f"\u8de8\u57df\u8d44\u6e90\u5171\u4eab"\uff08Cross-origin resource sharing\uff09\u3002CORS\u9700\u8981\u6d4f\u89c8\u5668\u548c\u670d\u52a1\u5668\u540c\u65f6\u652f\u6301\u3002\u76ee\u524d\uff0c\u6240\u6709\u6d4f\u89c8\u5668\u90fd\u652f\u6301\u8be5\u529f\u80fd\uff0cIE \u6d4f\u89c8\u5668\u4e0d\u80fd\u4f4e\u4e8e IE10\u3002\u5b83\u5141\u8bb8\u6d4f\u89c8\u5668\u5411\u8de8\u6e90\u670d\u52a1\u5668\uff0c\u53d1\u51fa XMLHttpRequest \u8bf7\u6c42\uff0c\u4ece\u800c\u514b\u670d\u4e86 AJAX \u53ea\u80fd\u540c\u6e90\u4f7f\u7528\u7684\u9650\u5236\u3002\u6574\u4e2a CORS \u901a\u4fe1\u8fc7\u7a0b\uff0c\u90fd\u662f\u6d4f\u89c8\u5668\u81ea\u52a8\u5b8c\u6210\uff0c\u4e0d\u9700\u8981\u7528\u6237\u53c2\u4e0e\u3002\u5bf9\u4e8e\u5f00\u53d1\u8005\u6765\u8bf4\uff0cCORS \u901a\u4fe1\u4e0e\u540c\u6e90\u7684 AJAX \u901a\u4fe1\u6ca1\u6709\u5dee\u522b\uff0c\u4ee3\u7801\u5b8c\u5168\u4e00\u6837\u3002\u6d4f\u89c8\u5668\u4e00\u65e6\u53d1\u73b0 AJAX \u8bf7\u6c42\u8de8\u6e90\uff0c\u5c31\u4f1a\u81ea\u52a8\u6dfb\u52a0\u4e00\u4e9b\u9644\u52a0\u7684\u5934\u4fe1\u606f\uff0c\u6709\u65f6\u8fd8\u4f1a\u591a\u51fa\u4e00\u6b21\u9644\u52a0\u7684\u8bf7\u6c42\uff0c\u4f46\u7528\u6237\u4e0d\u4f1a\u6709\u611f\u89c9\u3002\u56e0\u6b64\uff0c\u5b9e\u73b0 CORS \u901a\u4fe1\u7684\u5173\u952e\u662f\u670d\u52a1\u5668\u3002\u53ea\u8981\u670d\u52a1\u5668\u5b9e\u73b0\u4e86 CORS \u63a5\u53e3\uff0c\u5c31\u53ef\u4ee5\u8de8\u6e90\u901a\u4fe1\u3002'),(0,l.kt)("p",null,"\u8bf7\u6c42\u8fc7\u7a0b\u5982\u4e0b\u56fe:"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211012160627209-d4dcbdba.png",alt:"image-20211012160627209"}),"image-20211012160627209"),(0,l.kt)("p",null,"Preflight Request\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/2-6-1acd3a28.png",alt:"img"}),"img"),(0,l.kt)("p",null,"\u7136\u540e\u670d\u52a1\u5668\u7aef\u7ed9\u6211\u4eec\u8fd4\u56de\u4e00\u4e2aPreflightResponse"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/2-7-0991966f.png",alt:"img"}),"img"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6211\u4eec\u600e\u4e48\u505a"),"\uff1a\u90a3\u4e48\u5177\u4f53\u5982\u4f55\u5b9e\u73b0\u5462\uff1fspringMVC\u7684\u7248\u672c\u57284.2\u6216\u4ee5\u4e0a\u7248\u672c\uff0c\u53ef\u4ee5\u4f7f\u7528\u6ce8\u89e3\u5b9e\u73b0\u8de8\u57df\u3002 \u6211\u4eec\u53ea\u9700\u8981\u5728Controller\u7c7b\u4e0a\u6dfb\u52a0\u6ce8\u89e3",(0,l.kt)("inlineCode",{parentName:"p"},"@CrossOrigin"),"\u5c31\u53ef\u4ee5\u4e86\u3002"),(0,l.kt)("h2",{id:"2-\u5bfc\u5165\u57fa\u7840\u67b6\u6784\u9879\u76ee\u4e86\u89e3"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-%E5%AF%BC%E5%85%A5%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84%E9%A1%B9%E7%9B%AE-%E4%BA%86%E8%A7%A3"},"#"),"2. \u5bfc\u5165\u57fa\u7840\u67b6\u6784\u9879\u76ee\uff08\u4e86\u89e3\uff09"),(0,l.kt)("p",null,"\u9700\u6c42\uff1a\u521a\u8fdb\u4e00\u5bb6\u65b0\u516c\u53f8\uff0c\u4f60\u4f1a\u62ff\u5230\u662f\u4ee3\u7801\u5462\uff1f\u51e0\u5341\u4e2a\u4eba\u5199\u4e86\u51e0\u5e74\u3002"),(0,l.kt)("p",null,"\u89e3\u538b\u9879\u76ee\u57fa\u7840\u67b6\u6784\u5305 \u5373\u53ef\u3002"),(0,l.kt)("p",null,"\u4f7f\u7528idea\u6253\u5f00\uff0c\u89c2\u5bdf\u9879\u76ee\u67b6\u6784\u3002"),(0,l.kt)("h3",{id:"21-\u5bfc\u5165\u9879\u76ee"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-1-%E5%AF%BC%E5%85%A5%E9%A1%B9%E7%9B%AE"},"#"),"2.1 \u5bfc\u5165\u9879\u76ee"),(0,l.kt)("p",null,"\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"idea"),"\u4e0b\u70b9\u51fb",(0,l.kt)("inlineCode",{parentName:"p"},"file"),"\u83dc\u5355\u4e2d\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"open"),"\u9879, \u627e\u5230ydles_parent\u4f4d\u7f6e\u6253\u5f00"),(0,l.kt)("h2",{id:"3\u89c4\u683c\u53c2\u6570\u4e0e\u5206\u7c7b\u7ba1\u7406\u540e\u53f0-\u91cd\u70b9"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-%E8%A7%84%E6%A0%BC%E5%8F%82%E6%95%B0%E4%B8%8E%E5%88%86%E7%B1%BB%E7%AE%A1%E7%90%86-%E5%90%8E%E5%8F%B0-%E9%87%8D%E7%82%B9"},"#"),"3.\u89c4\u683c\u53c2\u6570\u4e0e\u5206\u7c7b\u7ba1\u7406\uff08\u540e\u53f0\uff09-\u91cd\u70b9"),(0,l.kt)("p",null,"\u6211\u4eec\u672c\u5c0f\u8282\u53ea\u9700\u540c\u5b66\u4eec\u7406\u89e3\u7ba1\u7406\u540e\u53f0\u89c4\u683c\u53c2\u6570\u4e0e\u5206\u7c7b\u7ba1\u7406\u7684\u9700\u6c42\u548c\u8868\u7ed3\u6784\u7684\u8bbe\u8ba1\uff0c\u6ca1\u6709\u4ee3\u7801\u5b9e\u73b0\uff0c\u56e0\u4e3a\u7ba1\u7406\u540e\u53f0\u6240\u9700\u7684\u4ee3\u7801\u5728\u57fa\u7840\u5de5\u7a0b\u4e2d\u5df2\u7ecf\u5e2e\u6211\u4eec\u751f\u6210\u4e86\uff0c\u65e0\u9700\u81ea\u5df1\u7f16\u5199\u3002"),(0,l.kt)("p",null,"\u6253\u5f00day01\u9759\u6001\u9875\u9762-\u540e\u53f0\u9996\u9875\u3002\u67e5\u770b\u5546\u54c1-\u89c4\u683c\u53c2\u6570\u3002"),(0,l.kt)("p",null,"\u5206\u7c7b\uff1a\u5206\u7c7b \u8863\u7269---\u300b\u88d9\u5b50---\u300b\u8fde\u8863\u88d9\u3001\u767e\u8936\u88d9\u3001\u5a5a\u7eb1"),(0,l.kt)("p",null,"\u6a21\u677f\uff1a\u88d9\u5b50\u6a21\u677f------\u300b\u5927\u5c0f\uff1as m l \u88d9\u5b50\u989c\u8272\uff1a\u9ed1\u8272\u3001\u7ea2\u8272 \u80f8\u56f4\uff1a100 \u8170\u56f4\uff1a100 \u81c0\u56f4\uff1a100"),(0,l.kt)("p",null," \u624b\u673a\u6a21\u677f----\u300b\u624b\u673a\u989c\u8272\uff1a\u9ed1\u8272\u3001\u7ea2\u8272 \u5185\u5b58\uff1a4G 6G \u5b58\u50a8\uff1a128G 256G"),(0,l.kt)("p",null,"\u53c2\u6570\uff1a\u91cf\u53d8 \u80f8\u56f4\uff1a110 \u8170\u56f4\uff1a100 \u81c0\u56f4\uff1a100 \u5185\u5b58\uff1a4G 6G \u5b58\u50a8\uff1a128G 256G"),(0,l.kt)("p",null,"\u89c4\u683c\uff1a\u8d28\u53d8 \u5927\u5c0f\uff1as m l \u624b\u673a\u989c\u8272\uff1a\u9ed1\u8272\u3001\u7ea2\u8272"),(0,l.kt)("p",null,"\u5206\u7c7b\uff1a\u624b\u673a \u7535\u8111 \u7535\u89c6"),(0,l.kt)("p",null,"\u54c1\u724c\uff1a\u534e\u4e3a \u5c0f\u7c73 \u82f9\u679c"),(0,l.kt)("p",null,"\u8868\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211012173736017-6e163398.png",alt:"image-20211012173736017"}),"image-20211012173736017"),(0,l.kt)("h3",{id:"31-\u89c4\u683c\u53c2\u6570\u7ba1\u7406"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-1-%E8%A7%84%E6%A0%BC%E5%8F%82%E6%95%B0%E7%AE%A1%E7%90%86"},"#"),"3.1 \u89c4\u683c\u53c2\u6570\u7ba1\u7406"),(0,l.kt)("h4",{id:"311-\u9700\u6c42\u5206\u6790"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-1-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"},"#"),"3.1.1 \u9700\u6c42\u5206\u6790"),(0,l.kt)("p",null,"\u89c4\u683c\u53c2\u6570\u6a21\u677f\u662f\u7528\u4e8e\u7ba1\u7406\u89c4\u683c\u53c2\u6570\u7684\u5355\u5143\u3002"),(0,l.kt)("p",null,"\u524d\u7aef\u4ea4\u4e92\u65b9\u5f0f\u89c1\u7ba1\u7406\u540e\u53f0\u7684\u9759\u6001\u539f\u578b"),(0,l.kt)("h4",{id:"312-\u8868\u7ed3\u6784\u5206\u6790"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-1-2-%E8%A1%A8%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90"},"#"),"3.1.2 \u8868\u7ed3\u6784\u5206\u6790"),(0,l.kt)("p",null,"\u89c4\u683c\u53c2\u6570\u6a21\u677f\u76f8\u5173\u7684\u8868\u67093\u4e2a"),(0,l.kt)("p",null,"tb_template\u8868\uff08\u6a21\u677f\u8868\uff09"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u540d\u79f0"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u542b\u4e49"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u957f\u5ea6"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5907\u6ce8"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"id"),(0,l.kt)("td",{parentName:"tr",align:null},"ID"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"name"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6a21\u677f\u540d\u79f0"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"spec_num"),(0,l.kt)("td",{parentName:"tr",align:null},"\u89c4\u683c\u6570\u91cf"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"para_num"),(0,l.kt)("td",{parentName:"tr",align:null},"\u53c2\u6570\u6570\u91cf"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})))),(0,l.kt)("p",null,"tb_spec\u8868\uff08\u89c4\u683c\u8868\uff09"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u540d\u79f0"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u542b\u4e49"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u957f\u5ea6"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5907\u6ce8"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"id"),(0,l.kt)("td",{parentName:"tr",align:null},"ID"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"name"),(0,l.kt)("td",{parentName:"tr",align:null},"\u540d\u79f0"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"options"),(0,l.kt)("td",{parentName:"tr",align:null},"\u89c4\u683c\u9009\u9879"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"seq"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6392\u5e8f"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"template_id"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6a21\u677fID"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})))),(0,l.kt)("p",null,"tb_para\u8868\uff08\u53c2\u6570\u8868\uff09"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u540d\u79f0"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u542b\u4e49"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u957f\u5ea6"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5907\u6ce8"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"id"),(0,l.kt)("td",{parentName:"tr",align:null},"id"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"name"),(0,l.kt)("td",{parentName:"tr",align:null},"\u540d\u79f0"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"options"),(0,l.kt)("td",{parentName:"tr",align:null},"\u9009\u9879"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"seq"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6392\u5e8f"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"template_id"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6a21\u677fID"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})))),(0,l.kt)("p",null,"\u6a21\u677f\u4e0e\u89c4\u683c\u662f\u4e00\u5bf9\u591a\u5173\u7cfb \uff0c\u6a21\u677f\u4e0e\u53c2\u6570\u662f\u4e00\u5bf9\u591a\u5173\u7cfb"),(0,l.kt)("h3",{id:"32-\u5206\u7c7b\u7ba1\u7406"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-2-%E5%88%86%E7%B1%BB%E7%AE%A1%E7%90%86"},"#"),"3.2 \u5206\u7c7b\u7ba1\u7406"),(0,l.kt)("h4",{id:"321-\u9700\u6c42\u5206\u6790"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-2-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"},"#"),"3.2.1 \u9700\u6c42\u5206\u6790"),(0,l.kt)("p",null,"\u5546\u54c1\u5206\u7c7b\u4e00\u5171\u5206\u4e09\u7ea7\u7ba1\u7406\uff0c\u4e3b\u8981\u4f5c\u7528\u662f\u5728\u7f51\u7ad9\u9996\u9875\u4e2d\u663e\u793a\u5546\u54c1\u5bfc\u822a\uff0c\u4ee5\u53ca\u5728\u7ba1\u7406\u540e\u53f0\u7ba1\u7406\u5546\u54c1\u65f6\u4f7f\u7528\u3002"),(0,l.kt)("h4",{id:"322-\u8868\u7ed3\u6784\u5206\u6790"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-2-2-%E8%A1%A8%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90"},"#"),"3.2.2 \u8868\u7ed3\u6784\u5206\u6790"),(0,l.kt)("p",null,"tb_category \u8868 \uff08",(0,l.kt)("strong",{parentName:"p"},"\u5546\u54c1\u5206\u7c7b"),"\uff09"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u540d\u79f0"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u542b\u4e49"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u957f\u5ea6"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5907\u6ce8"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"id"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5206\u7c7bID"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"name"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5206\u7c7b\u540d\u79f0"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"goods_num"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5546\u54c1\u6570\u91cf"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"is_show"),(0,l.kt)("td",{parentName:"tr",align:null},"\u662f\u5426\u663e\u793a"),(0,l.kt)("td",{parentName:"tr",align:null},"CHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"0 \u4e0d\u663e\u793a 1\u663e\u793a")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"is_menu"),(0,l.kt)("td",{parentName:"tr",align:null},"\u662f\u5426\u5bfc\u822a"),(0,l.kt)("td",{parentName:"tr",align:null},"CHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"0 \u4e0d\u65f6\u5bfc\u822a 1 \u4e3a\u5bfc\u822a")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"seq"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6392\u5e8f"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"parent_id"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4e0a\u7ea7ID"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"template_id"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6a21\u677fID"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})))),(0,l.kt)("p",null,"\u5546\u54c1\u5206\u7c7b\u4e0e\u6a21\u677f\u662f\u591a\u5bf9\u4e00\u5173\u7cfb"),(0,l.kt)("h2",{id:"4\u901a\u7528mapper\u81ea\u5b9a\u4e49\u65b9\u6cd5-\u91cd\u70b9\u638c\u63e1"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-%E9%80%9A%E7%94%A8mapper%E8%87%AA%E5%AE%9A%E4%B9%89%E6%96%B9%E6%B3%95-%E9%87%8D%E7%82%B9%E6%8E%8C%E6%8F%A1"},"#"),"4.\u901a\u7528mapper\u81ea\u5b9a\u4e49\u65b9\u6cd5-\u91cd\u70b9\u638c\u63e1"),(0,l.kt)("h3",{id:"41-\u6839\u636e\u5546\u54c1\u5206\u7c7b\u540d\u79f0\u67e5\u8be2\u54c1\u724c\u5217\u8868"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-1-%E6%A0%B9%E6%8D%AE%E5%95%86%E5%93%81%E5%88%86%E7%B1%BB%E5%90%8D%E7%A7%B0%E6%9F%A5%E8%AF%A2%E5%93%81%E7%89%8C%E5%88%97%E8%A1%A8"},"#"),"4.1 \u6839\u636e\u5546\u54c1\u5206\u7c7b\u540d\u79f0\u67e5\u8be2\u54c1\u724c\u5217\u8868"),(0,l.kt)("p",null,"\u9700\u6c42\uff1a\u6839\u636e\u5546\u54c1\u5206\u7c7b\u540d\u79f0\u67e5\u8be2\u54c1\u724c\u5217\u8868"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"http://localhost:9001/brand/category/\u5973\u58eb\u5305\u888b\n")),(0,l.kt)("h4",{id:"411-\u8868\u7ed3\u6784\u5206\u6790"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-1-1-%E8%A1%A8%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90"},"#"),"4.1.1 \u8868\u7ed3\u6784\u5206\u6790"),(0,l.kt)("p",null,"\u57fa\u4e8e\u4e0a\u8ff0\u7684\u8bb2\u89e3\u5df2\u77e5\u5206\u7c7b\u4e0e\u54c1\u724c\u4e4b\u95f4\u7684\u5173\u7cfb\u5c5e\u4e8e\u591a\u5bf9\u591a\u5173\u7cfb\uff0c\u8fd9\u91cc\u901a\u8fc7tb_category_brand\u8868\u6765\u5efa\u7acb\u5173\u8054\u5173\u7cfb\u3002"),(0,l.kt)("p",null,"\u5206\u7c7b-\u54c1\u724c\u4e2d\u95f4\u8868"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u5217\u540d"),(0,l.kt)("th",{parentName:"tr",align:null},"\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"category_id"),(0,l.kt)("td",{parentName:"tr",align:null},"int(11)"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5206\u7c7bID")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"brand_id"),(0,l.kt)("td",{parentName:"tr",align:null},"int(11)"),(0,l.kt)("td",{parentName:"tr",align:null},"\u54c1\u724cID")))),(0,l.kt)("h4",{id:"412-\u4ee3\u7801\u5b9e\u73b0"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-1-2-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"},"#"),"4.1.2 \u4ee3\u7801\u5b9e\u73b0"),(0,l.kt)("p",null,"\u5199\u51fasql"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT NAME,image FROM tb_brand WHERE id IN ( SELECT brand_id FROM tb_category_brand WHERE category_id IN ( SELECT id FROM tb_category WHERE NAME = '\u5973\u58eb\u5305\u888b' ) )\n")),(0,l.kt)("p",null,"\uff081\uff09\u4fee\u6539BrandMapper\uff0c\u65b0\u589e\u65b9\u6cd5\u5b9a\u4e49"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    /**\n     * \u6839\u636e\u5206\u7c7b\u540d\u79f0\u67e5\u8be2\u54c1\u724c\u5217\u8868\n     * @param categoryName\n     * @return\n     */\n    @Select("SELECT name,img FROM tb_brand WHERE id  IN (SELECT brand_id FROM tb_category_brand WHERE  category_id IN (SELECT id FROM tb_category WHERE NAME=#{name}) )order by seq")\n    public List<Map> findListByCategoryName(@Param("name") String categoryName);\n')),(0,l.kt)("p",null,"\uff082\uff09\u4fee\u6539BrandService\uff0c\u65b0\u589e\u65b9\u6cd5\u5b9a\u4e49"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"/**\n     * \u6839\u636e\u5546\u54c1\u5206\u7c7b\u540d\u79f0\u67e5\u8be2\u54c1\u724c\u5217\u8868\n     * @param categoryName\n     * @return\n     */\npublic List<Map> findListByCategoryName(String categoryName);\n")),(0,l.kt)("p",null,"\uff083\uff09BrandServiceImpl\u5b9e\u73b0\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"@Override\npublic List<Map> findListByCategoryName(String categoryName) {\n    return brandMapper.findListByCategoryName(categoryName);\n}\n")),(0,l.kt)("p",null,"\uff084\uff09BrandController\u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'/**\n * \u6839\u636e\u5206\u7c7b\u540d\u79f0\u67e5\u8be2\u54c1\u724c\u5217\u8868\n * @param category\n * @return\n */\n@GetMapping("/category/{category}")\npublic Result  findListByCategoryName(@PathVariable String category){\n    System.out.println(category);\n    List<Map> brandList = brandService.findListByCategoryName(category);\n    return new Result(true,StatusCode.OK,"\u67e5\u8be2\u6210\u529f",brandList);\n}\n')),(0,l.kt)("p",null,"\u6d4b\u8bd5\uff1a ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9001/brand/category/%E5%A5%B3%E5%A3%AB%E5%8C%85%E8%A2%8B"},"http://localhost:9001/brand/category/\u5973\u58eb\u5305\u888bopen in new window")),(0,l.kt)("h3",{id:"42-\u6839\u636e\u5546\u54c1\u5206\u7c7b\u540d\u79f0\u67e5\u8be2\u89c4\u683c\u5217\u8868"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-2-%E6%A0%B9%E6%8D%AE%E5%95%86%E5%93%81%E5%88%86%E7%B1%BB%E5%90%8D%E7%A7%B0%E6%9F%A5%E8%AF%A2%E8%A7%84%E6%A0%BC%E5%88%97%E8%A1%A8"},"#"),"4.2 \u6839\u636e\u5546\u54c1\u5206\u7c7b\u540d\u79f0\u67e5\u8be2\u89c4\u683c\u5217\u8868"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"http://localhost:9001/spec/category/%E5%A5%B3%E5%A3%AB%E5%8C%85%E8%A2%8B"},"http://localhost:9001/spec/category/\u5973\u58eb\u5305\u888bopen in new window")),(0,l.kt)("h4",{id:"421-\u8868\u7ed3\u6784\u5206\u6790"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-2-1-%E8%A1%A8%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90"},"#"),"4.2.1 \u8868\u7ed3\u6784\u5206\u6790"),(0,l.kt)("p",null,"\u6211\u4eec\u8fd9\u91cc\u4f1a\u7528\u5230\u89c4\u683c\u8868\u3001\u6a21\u677f\u8868\u3001\u5206\u7c7b\u8868 ",(0,l.kt)("strong",{parentName:"p"},"\u6ce8\u610f\uff1a\u4ee5\u4e0b\u8868\u7ed3\u6784\u5df2\u7701\u7565\u65e0\u5173\u5b57\u6bb5")),(0,l.kt)("p",null,"tb_template \u8868\uff08\u6a21\u677f\u8868\uff09"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u540d\u79f0"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u542b\u4e49"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u957f\u5ea6"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5907\u6ce8"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"id"),(0,l.kt)("td",{parentName:"tr",align:null},"ID"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"name"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6a21\u677f\u540d\u79f0"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})))),(0,l.kt)("p",null,"tb_spec \u8868\uff08 \u89c4\u683c\u8868\uff09"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u540d\u79f0"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u542b\u4e49"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u957f\u5ea6"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5907\u6ce8"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"id"),(0,l.kt)("td",{parentName:"tr",align:null},"ID"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"name"),(0,l.kt)("td",{parentName:"tr",align:null},"\u540d\u79f0"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"options"),(0,l.kt)("td",{parentName:"tr",align:null},"\u89c4\u683c\u9009\u9879"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"seq"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6392\u5e8f"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"template_id"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6a21\u677fID"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})))),(0,l.kt)("p",null,"tb_category \u8868 \uff08\u5546\u54c1\u5206\u7c7b\uff09"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u540d\u79f0"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u542b\u4e49"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u957f\u5ea6"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5907\u6ce8"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"id"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5206\u7c7bID"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"name"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5206\u7c7b\u540d\u79f0"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"parent_id"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4e0a\u7ea7ID"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"template_id"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6a21\u677fID"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})))),(0,l.kt)("h4",{id:"422-\u4ee3\u7801\u5b9e\u73b0"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-2-2-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"},"#"),"4.2.2 \u4ee3\u7801\u5b9e\u73b0"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"sql"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"select name,options from tb_spec where template_id in (select template_id from tb_category where name = '\u5973\u58eb\u5305\u888b') order by seq\n")),(0,l.kt)("p",null,"\uff081\uff09SpecMapper\u65b0\u589e\u65b9\u6cd5\u5b9a\u4e49"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},' @Select("SELECT name,options FROM tb_spec WHERE template_id IN ( SELECT template_id FROM tb_category WHERE NAME=#{categoryName}) order by seq")\n    public List<Map> findListByCategoryName(@Param("categoryName") String categoryName);  \n')),(0,l.kt)("p",null,"\uff082\uff09SpecService\u65b0\u589e\u65b9\u6cd5\u5b9a\u4e49"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"/**\n     * \u6839\u636e\u5546\u54c1\u5206\u7c7b\u540d\u79f0\u67e5\u8be2\u89c4\u683c\u5217\u8868\n     * @param categoryName\n     * @return\n     */\npublic List<Map> findListByCategoryName(String categoryName);\n")),(0,l.kt)("p",null,"\uff083\uff09SpecServiceImpl\u5b9e\u73b0\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Override\npublic List<Map> findListByCategoryName(String categoryName) {\n    List<Map> specList = specMapper.findListByCategoryName(categoryName);\n    for(Map spec:specList){\n        String[] options = ((String) spec.get("options")).split(",");//\u89c4\u683c\u9009\u9879\u5217\u8868\n        spec.put("options",options);\n    }\n    return specList;\n}\n')),(0,l.kt)("p",null,"\uff084\uff09SpecController\u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'/**\n     * \u6839\u636e\u5546\u54c1\u5206\u7c7b\u540d\u79f0\u67e5\u8be2\u89c4\u683c\u5217\u8868\n     * @param category\n     * @return\n     */\n@GetMapping("/category/{category}")\npublic Result findListByCategoryName(@PathVariable  String category){\n    List<Map> specList = specService.findListByCategoryName(category);\n    return new Result(true,StatusCode.OK,"",specList);\n}\n')),(0,l.kt)("p",null,"\u6d4b\u8bd5\uff1a ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9001/spec/category/%E5%A5%B3%E5%A3%AB%E5%8C%85%E8%A2%8B"},"http://localhost:9001/spec/category/\u5973\u58eb\u5305\u888bopen in new window")),(0,l.kt)("h2",{id:"5-\u5206\u5e03\u5f0f\u6587\u4ef6\u5b58\u50a8-fastdfs"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E5%AD%98%E5%82%A8-fastdfs"},"#"),"5. \u5206\u5e03\u5f0f\u6587\u4ef6\u5b58\u50a8-FastDFS"),(0,l.kt)("p",null,"FastDFS:Fast distribite file system \u6709\u5c0f\u6709\u591a\u7684\u5c0f\u6587\u4ef6"),(0,l.kt)("p",null,"HDFS:hadoop distribite file system \u5927\u6587\u4ef6"),(0,l.kt)("h3",{id:"51-fastdfs\u7b80\u4ecb"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-1-fastdfs%E7%AE%80%E4%BB%8B"},"#"),"5.1 FastDFS\u7b80\u4ecb"),(0,l.kt)("h4",{id:"511-fastdfs\u4f53\u7cfb\u7ed3\u6784"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-1-1-fastdfs%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"},"#"),"5.1.1 FastDFS\u4f53\u7cfb\u7ed3\u6784"),(0,l.kt)("p",null,"FastDFS\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u8f7b\u91cf\u7ea7",(0,l.kt)("a",{parentName:"p",href:"https://baike.baidu.com/item/%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/1250388"},"\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edfopen in new window"),"\uff0c\u5b83\u5bf9\u6587\u4ef6\u8fdb\u884c\u7ba1\u7406\uff0c\u529f\u80fd\u5305\u62ec\uff1a\u6587\u4ef6\u5b58\u50a8\u3001\u6587\u4ef6\u540c\u6b65\u3001\u6587\u4ef6\u8bbf\u95ee\uff08\u6587\u4ef6\u4e0a\u4f20\u3001\u6587\u4ef6\u4e0b\u8f7d\uff09\u7b49\uff0c\u89e3\u51b3\u4e86\u5927\u5bb9\u91cf\u5b58\u50a8\u548c\u8d1f\u8f7d\u5747\u8861\u7684\u95ee\u9898\u3002\u7279\u522b\u9002\u5408\u4ee5\u6587\u4ef6\u4e3a\u8f7d\u4f53\u7684\u5728\u7ebf\u670d\u52a1\uff0c\u5982\u76f8\u518c\u7f51\u7ad9\u3001\u89c6\u9891\u7f51\u7ad9\u7b49\u7b49\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u4f5c\u8005"),"\uff1a\u963f\u91cc P8 200w\u5e74\u85aa \u4f59\u5e86\u5927\u795e"),(0,l.kt)("p",null,"FastDFS\u4e3a\u4e92\u8054\u7f51\u91cf\u8eab\u5b9a\u5236\uff0c\u5145\u5206\u8003\u8651\u4e86\u5197\u4f59\u5907\u4efd\u3001\u8d1f\u8f7d\u5747\u8861\u3001\u7ebf\u6027\u6269\u5bb9\u7b49\u673a\u5236\uff0c\u5e76\u6ce8\u91cd\u9ad8\u53ef\u7528\u3001\u9ad8\u6027\u80fd\u7b49\u6307\u6807\uff0c\u4f7f\u7528FastDFS\u5f88\u5bb9\u6613\u642d\u5efa\u4e00\u5957\u9ad8\u6027\u80fd\u7684\u6587\u4ef6\u670d\u52a1\u5668\u96c6\u7fa4\u63d0\u4f9b\u6587\u4ef6\u4e0a\u4f20\u3001\u4e0b\u8f7d\u7b49\u670d\u52a1\u3002"),(0,l.kt)("p",null,"FastDFS \u67b6\u6784\u5305\u62ec Tracker server \u548c Storage server\u3002\u5ba2\u6237\u7aef\u8bf7\u6c42 Tracker server \u8fdb\u884c\u6587\u4ef6\u4e0a\u4f20\u3001\u4e0b\u8f7d\uff0c\u901a\u8fc7Tracker server \u8c03\u5ea6\u6700\u7ec8\u7531 Storage server \u5b8c\u6210\u6587\u4ef6\u4e0a\u4f20\u548c\u4e0b\u8f7d\u3002"),(0,l.kt)("p",null,"Tracker server \u4f5c\u7528\u662f\u8d1f\u8f7d\u5747\u8861\u548c\u8c03\u5ea6\uff0c\u901a\u8fc7 Tracker server \u5728\u6587\u4ef6\u4e0a\u4f20\u65f6\u53ef\u4ee5\u6839\u636e\u4e00\u4e9b\u7b56\u7565\u627e\u5230Storage server \u63d0\u4f9b\u6587\u4ef6\u4e0a\u4f20\u670d\u52a1\u3002\u53ef\u4ee5\u5c06 tracker \u79f0\u4e3a\u8ffd\u8e2a\u670d\u52a1\u5668\u6216\u8c03\u5ea6\u670d\u52a1\u5668\u3002Storage server \u4f5c\u7528\u662f\u6587\u4ef6\u5b58\u50a8\uff0c\u5ba2\u6237\u7aef\u4e0a\u4f20\u7684\u6587\u4ef6\u6700\u7ec8\u5b58\u50a8\u5728 Storage \u670d\u52a1\u5668\u4e0a\uff0cStorageserver \u6ca1\u6709\u5b9e\u73b0\u81ea\u5df1\u7684\u6587\u4ef6\u7cfb\u7edf\u800c\u662f\u5229\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684\u6587\u4ef6\u7cfb\u7edf\u6765\u7ba1\u7406\u6587\u4ef6\u3002\u53ef\u4ee5\u5c06storage\u79f0\u4e3a\u5b58\u50a8\u670d\u52a1\u5668\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/1559117928459-f3921375.png",alt:"1559117928459"}),"1559117928459"),(0,l.kt)("p",null,"tracker: \u5143\u6570\u636e\u4fe1\u606f\uff0c\u6587\u4ef6\u4e0a\u4f20\u65f6\u95f4\u3001\u5730\u5740\u3001\u5927\u5c0f\u3002"),(0,l.kt)("p",null," \u8bb0\u5f55storage\u96c6\u7fa4\u4fe1\u606f\u3002"),(0,l.kt)("p",null,"storage:\u5b58\u6570\u636e\u3002"),(0,l.kt)("h4",{id:"512-\u4e0a\u4f20\u6d41\u7a0b"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-1-2-%E4%B8%8A%E4%BC%A0%E6%B5%81%E7%A8%8B"},"#"),"5.1.2 \u4e0a\u4f20\u6d41\u7a0b"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211013013254634-d43864d9.png",alt:"image-20211013013254634"}),"image-20211013013254634"),(0,l.kt)("p",null,"\u5ba2\u6237\u7aef\u4e0a\u4f20\u6587\u4ef6\u540e\u5b58\u50a8\u670d\u52a1\u5668\u5c06\u6587\u4ef6 ID \u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u6b64\u6587\u4ef6 ID \u7528\u4e8e\u4ee5\u540e\u8bbf\u95ee\u8be5\u6587\u4ef6\u7684\u7d22\u5f15\u4fe1\u606f\u3002\u6587\u4ef6\u7d22\u5f15\u4fe1\u606f\u5305\u62ec\uff1a\u7ec4\u540d\uff0c\u865a\u62df\u78c1\u76d8\u8def\u5f84\uff0c\u6570\u636e\u4e24\u7ea7\u76ee\u5f55\uff0c\u6587\u4ef6\u540d\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"fileId"),": group1/M00/00/00/asdfsadfsadfsadfsadfsadfsa.png"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u7ec4\u540d"),"\uff1a\u6587\u4ef6\u4e0a\u4f20\u540e\u6240\u5728\u7684 storage \u7ec4\u540d\u79f0\uff0c\u5728\u6587\u4ef6\u4e0a\u4f20\u6210\u529f\u540e\u6709storage \u670d\u52a1\u5668\u8fd4\u56de\uff0c\u9700\u8981\u5ba2\u6237\u7aef\u81ea\u884c\u4fdd\u5b58\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u865a\u62df\u78c1\u76d8\u8def\u5f84"),"\uff1astorage \u914d\u7f6e\u7684\u865a\u62df\u8def\u5f84\uff0c\u4e0e\u78c1\u76d8\u9009\u9879store_path\u5bf9\u5e94\u3002\u5982\u679c\u914d\u7f6e\u4e86"),(0,l.kt)("p",null,"/data/00-ff/00-ff/-----\x3e/M00"),(0,l.kt)("p",null,"/data2----\x3e/M01"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6570\u636e\u4e24\u7ea7\u76ee\u5f55"),"\uff1astorage \u670d\u52a1\u5668\u5728\u6bcf\u4e2a\u865a\u62df\u78c1\u76d8\u8def\u5f84\u4e0b\u521b\u5efa\u7684\u4e24\u7ea7\u76ee\u5f55\uff0c\u7528\u4e8e\u5b58\u50a8\u6570\u636e"),(0,l.kt)("p",null,"\u6587\u4ef6\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6587\u4ef6\u540d"),"\uff1a\u4e0e\u6587\u4ef6\u4e0a\u4f20\u65f6\u4e0d\u540c\u3002\u662f\u7531\u5b58\u50a8\u670d\u52a1\u5668\u6839\u636e\u7279\u5b9a\u4fe1\u606f\u751f\u6210\uff0c\u6587\u4ef6\u540d\u5305\u542b\uff1a\u6e90\u5b58\u50a8"),(0,l.kt)("p",null,"\u670d\u52a1\u5668 IP \u5730\u5740\u3001\u6587\u4ef6\u521b\u5efa\u65f6\u95f4\u6233\u3001\u6587\u4ef6\u5927\u5c0f\u3001\u968f\u673a\u6570\u548c\u6587\u4ef6\u62d3\u5c55\u540d\u7b49\u4fe1\u606f\u3002"),(0,l.kt)("h3",{id:"52-fastdfs\u642d\u5efa-\u4e86\u89e3"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-2-fastdfs%E6%90%AD%E5%BB%BA-%E4%BA%86%E8%A7%A3"},"#"),"5.2 FastDFS\u642d\u5efa-\u4e86\u89e3"),(0,l.kt)("p",null,"\u5df2\u7ecf\u5728\u865a\u62df\u673a\u4e2d\u642d\u5efa\u5b8c\u6bd5\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u4f7f\u7528Docker\u642d\u5efaFastDFS\u7684\u5f00\u53d1\u73af\u5883"),(0,l.kt)("p",null,"\u62c9\u53d6\u955c\u50cf"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"docker pull morunchang/fastdfs\n")),(0,l.kt)("p",null,"\u8fd0\u884ctracker"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"docker run -d --name tracker --net=host morunchang/fastdfs sh tracker.sh\n")),(0,l.kt)("p",null,"\u8fd0\u884cstorage"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"docker run -d --name storage --net=host -e TRACKER_IP=<your tracker server address>:22122 -e GROUP_NAME=<group name> morunchang/fastdfs sh storage.sh\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u7684\u7f51\u7edc\u6a21\u5f0f\u662f\u2013net=host, \u66ff\u6362\u4e3a\u4f60\u673a\u5668\u7684Ip\u5373\u53ef"),(0,l.kt)("li",{parentName:"ul"},"\u662f\u7ec4\u540d\uff0c\u5373storage\u7684\u7ec4"),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u60f3\u8981\u589e\u52a0\u65b0\u7684storage\u670d\u52a1\u5668\uff0c\u518d\u6b21\u8fd0\u884c\u8be5\u547d\u4ee4\uff0c\u6ce8\u610f\u66f4\u6362 \u65b0\u7ec4\u540d")),(0,l.kt)("p",null,"\uff084\uff09\u4fee\u6539nginx\u7684\u914d\u7f6e"),(0,l.kt)("p",null,"\u8fdb\u5165storage\u7684\u5bb9\u5668\u5185\u90e8\uff0c\u4fee\u6539nginx.conf"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"docker exec -it storage  /bin/bash\n")),(0,l.kt)("p",null,"\u8fdb\u5165\u540e"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"vi /data/nginx/conf/nginx.conf\n")),(0,l.kt)("p",null,"\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"location /group1/M00 {\n   proxy_next_upstream http_502 http_504 error timeout invalid_header;\n     proxy_cache http-cache;\n     proxy_cache_valid  200 304 12h;\n     proxy_cache_key $uri$is_args$args;\n     proxy_pass http://fdfs_group1;\n     expires 30d;\n }\n")),(0,l.kt)("p",null,"\uff085\uff09\u9000\u51fa\u5bb9\u5668"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"exit\n")),(0,l.kt)("p",null,"\uff086\uff09\u91cd\u542fstorage\u5bb9\u5668"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"docker restart storage\n")),(0,l.kt)("h3",{id:"53-\u6587\u4ef6\u5b58\u50a8\u5fae\u670d\u52a1"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-3-%E6%96%87%E4%BB%B6%E5%AD%98%E5%82%A8%E5%BE%AE%E6%9C%8D%E5%8A%A1"},"#"),"5.3 \u6587\u4ef6\u5b58\u50a8\u5fae\u670d\u52a1"),(0,l.kt)("p",null,"\u521b\u5efa\u6587\u4ef6\u7ba1\u7406\u5fae\u670d\u52a1ydles_service_file\uff0c\u8be5\u5de5\u7a0b\u4e3b\u8981\u7528\u4e8e\u5b9e\u73b0\u6587\u4ef6\u4e0a\u4f20\u4ee5\u53ca\u6587\u4ef6\u5220\u9664\u7b49\u529f\u80fd\u3002"),(0,l.kt)("p",null,"\uff081\uff09\u4fee\u6539pom.xml\uff0c\u5f15\u5165\u4f9d\u8d56"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<dependencies>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-web</artifactId>\n    </dependency>\n    <dependency>\n        <groupId>net.oschina.zcx7878</groupId>\n        <artifactId>fastdfs-client-java</artifactId>\n        <version>1.27.0.0</version>\n    </dependency>\n    <dependency>\n        <groupId>com.ydles</groupId>\n        <artifactId>ydles_common</artifactId>\n        <version>1.0-SNAPSHOT</version>\n    </dependency>\n</dependencies>\n")),(0,l.kt)("p",null,"\uff082\uff09\u5728resources\u6587\u4ef6\u5939\u4e0b\u521b\u5efafasfDFS\u7684\u914d\u7f6e\u6587\u4ef6",(0,l.kt)("strong",{parentName:"p"},"fdfs_client.conf")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"connect_timeout = 60\nnetwork_timeout = 60\ncharset = UTF-8\nhttp.tracker_http_port = 8080\ntracker_server = 192.168.200.128:22122\n")),(0,l.kt)("p",null,"connect_timeout\uff1a\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u79d2\u3002"),(0,l.kt)("p",null,"network_timeout\uff1a\u901a\u4fe1\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u79d2\u3002\u53d1\u9001\u6216\u63a5\u6536\u6570\u636e\u65f6\u3002\u5047\u8bbe\u5728\u8d85\u65f6\u65f6\u95f4\u540e\u8fd8\u4e0d\u80fd\u53d1\u9001\u6216\u63a5\u6536\u6570\u636e\uff0c\u5219\u672c\u6b21\u7f51\u7edc\u901a\u4fe1\u5931\u8d25"),(0,l.kt)("p",null,"charset\uff1a \u5b57\u7b26\u96c6"),(0,l.kt)("p",null,"http.tracker_http_port \uff1a.tracker\u7684http\u7aef\u53e3"),(0,l.kt)("p",null,"tracker_server\uff1a tracker\u670d\u52a1\u5668IP\u548c\u7aef\u53e3\u8bbe\u7f6e"),(0,l.kt)("p",null,"\uff083\uff09\u5728resources\u6587\u4ef6\u5939\u4e0b\u521b\u5efaapplication.yml"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"spring:\n  servlet:\n    multipart:\n      max-file-size: 10MB\n      max-request-size: 10MB\nserver:\n  port: 9008\neureka:\n  client:\n    service-url:\n      defaultZone: http://127.0.0.1:6868/eureka\n  instance:\n    prefer-ip-address: true\nfeign:\n  hystrix:\n    enabled: true\n")),(0,l.kt)("p",null,"max-file-size\u662f\u5355\u4e2a\u6587\u4ef6\u5927\u5c0f\uff0cmax-request-size\u662f\u8bbe\u7f6e\u603b\u4e0a\u4f20\u7684\u6570\u636e\u5927\u5c0f"),(0,l.kt)("p",null,"\uff084\uff09\u521b\u5efacom.ydles.file\u5305\uff0c\u521b\u5efa\u542f\u52a8\u7c7bFileApplication"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"@SpringBootApplication\n@EnableEurekaClient\npublic class FileApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(FileApplication.class);\n    }\n}\n")),(0,l.kt)("h3",{id:"54-\u6587\u4ef6\u4e0a\u4f20-\u91cd\u70b9"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-4-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-%E9%87%8D%E7%82%B9"},"#"),"5.4 \u6587\u4ef6\u4e0a\u4f20-\u91cd\u70b9"),(0,l.kt)("h4",{id:"541-\u6587\u4ef6\u4fe1\u606f\u5c01\u88c5"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-4-1-%E6%96%87%E4%BB%B6%E4%BF%A1%E6%81%AF%E5%B0%81%E8%A3%85"},"#"),"5.4.1 \u6587\u4ef6\u4fe1\u606f\u5c01\u88c5"),(0,l.kt)("p",null,"\u6587\u4ef6\u4e0a\u4f20\u4e00\u822c\u90fd\u6709\u6587\u4ef6\u7684\u540d\u5b57\u3001\u6587\u4ef6\u7684\u5185\u5bb9\u3001\u6587\u4ef6\u7684\u6269\u5c55\u540d\u3001\u6587\u4ef6\u7684md5\u503c\u3001\u6587\u4ef6\u7684\u4f5c\u8005\u7b49\u76f8\u5173\u5c5e\u6027\uff0c\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\u5c01\u88c5\u8fd9\u4e9b\u5c5e\u6027\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"FastDFSFile\uff1a\u6587\u4ef6\u5b9e\u4f53\u7c7b")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"FastDFSClient\uff1a\u6587\u4ef6\u5de5\u5177\u7c7b\uff0c\u5c01\u88c5\u5e95\u5c42\u65b9\u6cd5\u3002")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"FileController\uff1a\u63a5\u53e3")),(0,l.kt)("p",null,"\u521b\u5efacom.ydles.file.pojo.FastDFSFile"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public class FastDFSFile {\n    //\u6587\u4ef6\u540d\u5b57\n    private String name;\n    //\u6587\u4ef6\u5185\u5bb9\n    private byte[] content;\n    //\u6587\u4ef6\u6269\u5c55\u540d\n    private String ext;\n    //\u6587\u4ef6MD5\u6458\u8981\u503c\n    private String md5;\n    //\u6587\u4ef6\u521b\u5efa\u4f5c\u8005\n    private String author;\n\n    public FastDFSFile(String name, byte[] content, String ext, String height,\n                       String width, String author) {\n        super();\n        this.name = name;\n        this.content = content;\n        this.ext = ext;\n        this.author = author;\n    }\n\n    public FastDFSFile(String name, byte[] content, String ext) {\n        super();\n        this.name = name;\n        this.content = content;\n        this.ext = ext;\n    }\n\n    // getter and setter ...\n}\n")),(0,l.kt)("h4",{id:"542-\u6587\u4ef6\u64cd\u4f5c"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-4-2-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"},"#"),"5.4.2 \u6587\u4ef6\u64cd\u4f5c"),(0,l.kt)("p",null,"\u521b\u5efaFastDFSClient\u7c7b,\u653e\u5728com.ydles.file.util\u4e0b\u5728\u8be5\u7c7b\u4e2d\u5b9e\u73b0FastDFS\u4fe1\u606f\u83b7\u53d6\u4ee5\u53ca\u6587\u4ef6\u7684\u76f8\u5173\u64cd\u4f5c\uff0c"),(0,l.kt)("p",null,"\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public class FastDFSClient {\n    \n    private static org.slf4j.Logger logger = LoggerFactory.getLogger(FastDFSClient.class);\n\n    /***\n     * \u521d\u59cb\u5316\u52a0\u8f7dFastDFS\u7684TrackerServer\u914d\u7f6e\n     */\n    static {\n        try {\n            String filePath = new ClassPathResource("fdfs_client.conf").getFile().getAbsolutePath();\n            ClientGlobal.init(filePath);\n        } catch (Exception e) {\n            logger.error("FastDFS Client Init Fail!",e);\n        }\n    }\n\n    /***\n     * \u6587\u4ef6\u4e0a\u4f20\n     * @param file\n     * @return\n     */\n    public static String[] upload(FastDFSFile file) {\n        //\u83b7\u53d6\u6587\u4ef6\u7684\u4f5c\u8005\n        NameValuePair[] meta_list = new NameValuePair[1];\n        meta_list[0] = new NameValuePair("author", file.getAuthor());\n\n        //\u63a5\u6536\u8fd4\u56de\u6570\u636e\n        String[] uploadResults = null;\n        StorageClient storageClient=null;\n        try {\n            //\u521b\u5efaStorageClient\u5ba2\u6237\u7aef\u5bf9\u8c61\n            storageClient = getTrackerClient();\n\n            /***\n             * \u6587\u4ef6\u4e0a\u4f20\n             * 1)\u6587\u4ef6\u5b57\u8282\u6570\u7ec4\n             * 2)\u6587\u4ef6\u6269\u5c55\u540d\n             * 3)\u6587\u4ef6\u4f5c\u8005\n             */\n            uploadResults = storageClient.upload_file(file.getContent(), file.getExt(), meta_list);\n        } catch (Exception e) {\n            logger.error("Exception when uploadind the file:" + file.getName(), e);\n        }\n\n        if (uploadResults == null && storageClient!=null) {\n            logger.error("upload file fail, error code:" + storageClient.getErrorCode());\n        }\n        //\u83b7\u53d6\u7ec4\u540d\n        String groupName = uploadResults[0];\n        //\u83b7\u53d6\u6587\u4ef6\u5b58\u50a8\u8def\u5f84\n        String remoteFileName = uploadResults[1];\n        return uploadResults;\n    }\n\n    /***\n     * \u83b7\u53d6\u6587\u4ef6\u4fe1\u606f\n     * @param groupName:\u7ec4\u540d\n     * @param remoteFileName\uff1a\u6587\u4ef6\u5b58\u50a8\u5b8c\u6574\u540d\n     * @return\n     */\n    public static FileInfo getFile(String groupName, String remoteFileName) {\n        try {\n            StorageClient storageClient = getTrackerClient();\n            return storageClient.get_file_info(groupName, remoteFileName);\n        } catch (Exception e) {\n            logger.error("Exception: Get File from Fast DFS failed", e);\n        }\n        return null;\n    }\n\n    /***\n     * \u6587\u4ef6\u4e0b\u8f7d\n     * @param groupName\n     * @param remoteFileName\n     * @return\n     */\n    public static InputStream downFile(String groupName, String remoteFileName) {\n        try {\n            //\u521b\u5efaStorageClient\n            StorageClient storageClient = getTrackerClient();\n\n            //\u4e0b\u8f7d\u6587\u4ef6\n            byte[] fileByte = storageClient.download_file(groupName, remoteFileName);\n            InputStream ins = new ByteArrayInputStream(fileByte);\n            return ins;\n        } catch (Exception e) {\n            logger.error("Exception: Get File from Fast DFS failed", e);\n        }\n        return null;\n    }\n\n    /***\n     * \u6587\u4ef6\u5220\u9664\n     * @param groupName\n     * @param remoteFileName\n     * @throws Exception\n     */\n    public static void deleteFile(String groupName, String remoteFileName)\n            throws Exception {\n        //\u521b\u5efaStorageClient\n        StorageClient storageClient = getTrackerClient();\n\n        //\u5220\u9664\u6587\u4ef6\n        int i = storageClient.delete_file(groupName, remoteFileName);\n    }\n\n    /***\n     * \u83b7\u53d6Storage\u7ec4\n     * @param groupName\n     * @return\n     * @throws IOException\n     */\n    public static StorageServer[] getStoreStorages(String groupName)\n            throws IOException {\n        //\u521b\u5efaTrackerClient\n        TrackerClient trackerClient = new TrackerClient();\n        //\u83b7\u53d6TrackerServer\n        TrackerServer trackerServer = trackerClient.getConnection();\n        //\u83b7\u53d6Storage\u7ec4\n        return trackerClient.getStoreStorages(trackerServer, groupName);\n    }\n\n    /***\n     * \u83b7\u53d6Storage\u4fe1\u606f,IP\u548c\u7aef\u53e3\n     * @param groupName\n     * @param remoteFileName\n     * @return\n     * @throws IOException\n     */\n    public static ServerInfo[] getFetchStorages(String groupName,\n                                                String remoteFileName) throws IOException {\n        TrackerClient trackerClient = new TrackerClient();\n        TrackerServer trackerServer = trackerClient.getConnection();\n        return trackerClient.getFetchStorages(trackerServer, groupName, remoteFileName);\n    }\n\n    /***\n     * \u83b7\u53d6Tracker\u670d\u52a1\u5730\u5740\n     * @return\n     * @throws IOException\n     */\n    public static String getTrackerUrl() throws IOException {\n        return "http://"+getTrackerServer().getInetSocketAddress().getHostString()+":"+ClientGlobal.getG_tracker_http_port()+"/";\n    }\n\n    /***\n     * \u83b7\u53d6Storage\u5ba2\u6237\u7aef\n     * @return\n     * @throws IOException\n     */\n    private static StorageClient getTrackerClient() throws IOException {\n        TrackerServer trackerServer = getTrackerServer();\n        StorageClient storageClient = new StorageClient(trackerServer, null);\n        return  storageClient;\n    }\n\n    /***\n     * \u83b7\u53d6Tracker\n     * @return\n     * @throws IOException\n     */\n    private static TrackerServer getTrackerServer() throws IOException {\n        TrackerClient trackerClient = new TrackerClient();\n        TrackerServer trackerServer = trackerClient.getConnection();\n        return  trackerServer;\n    }\n}\n')),(0,l.kt)("h4",{id:"543-\u6587\u4ef6\u4e0a\u4f20"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-4-3-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"},"#"),"5.4.3 \u6587\u4ef6\u4e0a\u4f20"),(0,l.kt)("p",null,"\u521b\u5efa\u4e00\u4e2aFileController\uff0c\u5728\u8be5\u63a7\u5236\u5668\u4e2d\u5b9e\u73b0\u6587\u4ef6\u4e0a\u4f20\u64cd\u4f5c\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@RestController\n@RequestMapping("/file")\npublic class FileController {\n\n    @PostMapping("/upload")\n    public Result uploadFile(MultipartFile file){\n        try{\n            //\u5224\u65ad\u6587\u4ef6\u662f\u5426\u5b58\u5728\n            if (file == null){\n                throw new RuntimeException("\u6587\u4ef6\u4e0d\u5b58\u5728");\n            }\n            //\u83b7\u53d6\u6587\u4ef6\u7684\u5b8c\u6574\u540d\u79f0\n            String originalFilename = file.getOriginalFilename();\n            if (StringUtils.isEmpty(originalFilename)){\n                throw new RuntimeException("\u6587\u4ef6\u4e0d\u5b58\u5728");\n            }\n\n            //\u83b7\u53d6\u6587\u4ef6\u7684\u6269\u5c55\u540d\u79f0  abc.jpg   jpg\n            String extName = originalFilename.substring(originalFilename.lastIndexOf(".") + 1);\n\n            //\u83b7\u53d6\u6587\u4ef6\u5185\u5bb9\n            byte[] content = file.getBytes();\n\n            //\u521b\u5efa\u6587\u4ef6\u4e0a\u4f20\u7684\u5c01\u88c5\u5b9e\u4f53\u7c7b\n            FastDFSFile fastDFSFile = new FastDFSFile(originalFilename,content,extName);\n\n            //\u57fa\u4e8e\u5de5\u5177\u7c7b\u8fdb\u884c\u6587\u4ef6\u4e0a\u4f20,\u5e76\u63a5\u53d7\u8fd4\u56de\u53c2\u6570  String[]\n            String[] uploadResult = FastDFSClient.upload(fastDFSFile);\n\n            //\u5c01\u88c5\u8fd4\u56de\u7ed3\u679c\n            String url = FastDFSClient.getTrackerUrl()+uploadResult[0]+"/"+uploadResult[1];\n            return new Result(true,StatusCode.OK,"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",url);\n        }catch (Exception e){\n            e.printStackTrace();\n        }\n        return new Result(false, StatusCode.ERROR,"\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25");\n    }\n}\n')),(0,l.kt)("h3",{id:"55-postman\u6d4b\u8bd5\u6587\u4ef6\u4e0a\u4f20"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-5-postman%E6%B5%8B%E8%AF%95%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"},"#"),"5.5 Postman\u6d4b\u8bd5\u6587\u4ef6\u4e0a\u4f20"),(0,l.kt)("p",null,"\u6b65\u9aa4\uff1a"),(0,l.kt)("p",null,"1\u3001\u9009\u62e9post\u8bf7\u6c42\u65b9\u5f0f\uff0c\u8f93\u5165\u8bf7\u6c42\u5730\u5740 ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9008/upload"},"http://localhost:9008/uploadopen in new window")," 2\u3001\u586b\u5199Headers"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"Key\uff1aContent-Type \nValue\uff1amultipart/form-data\n")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20200406180731441-a2267e13.png",alt:"image-20200406180731441"}),"image-20200406180731441"),(0,l.kt)("p",null,"3\u3001\u586b\u5199body \u9009\u62e9form-data \u7136\u540e\u9009\u62e9\u6587\u4ef6file \u70b9\u51fb\u6dfb\u52a0\u6587\u4ef6\uff0c\u6700\u540e\u53d1\u9001\u5373\u53ef\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20200406180804793-d63a8a7f.png",alt:"image-20200406180804793"}),"image-20200406180804793"),(0,l.kt)("p",null,"\u603b\u7ed3\uff1a"),(0,l.kt)("p",null,"1\u8de8\u57df-\u9762\u8bd5"),(0,l.kt)("p",null,"\u4ec0\u4e48\u662f\u8de8\u57df\uff1a\u7531\u4e8e\u6d4f\u89c8\u5668\u7684\u540c\u6e90\u7b56\u7565\uff0c\u5bfc\u81f4\u4e0d\u80fd\u5411\u5176\u4ed6\u57df\u53d1\u9001\u5f02\u6b65\u8bf7\u6c42\u3002"),(0,l.kt)("p",null,"\u4ec0\u4e48\u662f\u540c\u6e90\u7b56\u7565\uff1a\u534f\u8bae\uff0c\u57df\u540d\uff0c\u7aef\u53e3\u53f7"),(0,l.kt)("p",null,"CORS @CrossOrigin"),(0,l.kt)("p",null,"2\u56de\u770b\u5176\u4ed6\u540c\u4e8b\u5199\u7684\u4ee3\u7801"),(0,l.kt)("p",null,"3\u89c4\u683c\u53c2\u6570\u6a21\u677f\u5206\u7c7b\u54c1\u724c \u5173\u7cfb"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211012173736017-6e163398.png",alt:"image-20211012173736017"}),"image-20211012173736017"),(0,l.kt)("p",null,"4\u81ea\u5b9a\u4e49mapper"),(0,l.kt)("p",null,"\u590d\u6742sql\u9700\u6c42\uff0c\u81ea\u5b9a\u4e49mapper\u65b9\u6cd5 sql\u4e66\u5199"),(0,l.kt)("p",null,"5fastDFS"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211013013254634-d43864d9.png",alt:"image-20211013013254634"}),"image-20211013013254634"),(0,l.kt)("p",null,"\u4e0a\u4f20\u5199\u5b8c"),(0,l.kt)("p",null,"\u4f5c\u4e1a\uff1a\u5220\u9664 \u4e0b\u8f7d\u56fe\u7247 fileID"),(0,l.kt)("h1",{id:"\u7b2c3\u7ae0-\u5fae\u670d\u52a1\u7f51\u5173\u9650\u6d41\u9274\u6743"},(0,l.kt)("a",{parentName:"h1",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#%E7%AC%AC3%E7%AB%A0-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BD%91%E5%85%B3%E9%99%90%E6%B5%81-%E9%89%B4%E6%9D%83"},"#"),"\u7b2c3\u7ae0 \u5fae\u670d\u52a1\u7f51\u5173\u9650\u6d41&\u9274\u6743"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u89d2\u8272"),"\uff1a\u7f51\u5173\u7ec4\u4e00\u5458\u3002"),(0,l.kt)("h2",{id:"\u8bfe\u7a0b\u76ee\u6807"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#%E8%AF%BE%E7%A8%8B%E7%9B%AE%E6%A0%87"},"#"),"\u8bfe\u7a0b\u76ee\u6807"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u638c\u63e1\u5fae\u670d\u52a1\u7f51\u5173Gateway\u7684\u7cfb\u7edf\u642d\u5efa\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u638c\u63e1\u7f51\u5173\u9650\u6d41\u7684\u5b9e\u73b0"),(0,l.kt)("li",{parentName:"ul"},"\u80fd\u591f\u4f7f\u7528BCrypt\u5b9e\u73b0\u5bf9\u5bc6\u7801\u7684\u52a0\u5bc6\u4e0e\u9a8c\u8bc1"),(0,l.kt)("li",{parentName:"ul"},"\u4e86\u89e3\u52a0\u5bc6\u7b97\u6cd5"),(0,l.kt)("li",{parentName:"ul"},"\u80fd\u591f\u4f7f\u7528JWT\u5b9e\u73b0\u5fae\u670d\u52a1\u9274\u6743")),(0,l.kt)("h2",{id:"1\u5fae\u670d\u52a1\u7f51\u5173gateway-\u8fc7\u6ee4\u8def\u7531"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BD%91%E5%85%B3gateway-%E8%BF%87%E6%BB%A4-%E8%B7%AF%E7%94%B1"},"#"),"1.\u5fae\u670d\u52a1\u7f51\u5173Gateway \u8fc7\u6ee4+\u8def\u7531"),(0,l.kt)("h3",{id:"11-\u5fae\u670d\u52a1\u7f51\u5173\u6982\u8ff0-\u9762\u8bd5"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-1-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BD%91%E5%85%B3%E6%A6%82%E8%BF%B0-%E9%9D%A2%E8%AF%95"},"#"),"1.1 \u5fae\u670d\u52a1\u7f51\u5173\u6982\u8ff0-\u9762\u8bd5"),(0,l.kt)("p",null,"\u4e0d\u540c\u7684\u5fae\u670d\u52a1\u4e00\u822c\u4f1a\u6709\u4e0d\u540c\u7684\u7f51\u7edc\u5730\u5740\uff0c\u800c\u5916\u90e8\u5ba2\u6237\u7aef\u53ef\u80fd\u9700\u8981\u8c03\u7528\u591a\u4e2a\u670d\u52a1\u7684\u63a5\u53e3\u624d\u80fd\u5b8c\u6210\u4e00\u4e2a\u4e1a\u52a1\u9700\u6c42\uff0c\u5982\u679c\u8ba9\u5ba2\u6237\u7aef\u76f4\u63a5\u4e0e\u5404\u4e2a\u5fae\u670d\u52a1\u901a\u4fe1\uff0c\u4f1a\u6709\u4ee5\u4e0b\u7684\u95ee\u9898\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5ba2\u6237\u7aef\u4f1a\u591a\u6b21\u8bf7\u6c42\u4e0d\u540c\u7684\u5fae\u670d\u52a1\uff0c\u589e\u52a0\u4e86\u5ba2\u6237\u7aef\u7684\u590d\u6742\u6027"),(0,l.kt)("li",{parentName:"ul"},"\u5b58\u5728\u8de8\u57df\u8bf7\u6c42\uff0c\u5728\u4e00\u5b9a\u573a\u666f\u4e0b\u5904\u7406\u76f8\u5bf9\u590d\u6742"),(0,l.kt)("li",{parentName:"ul"},"\u8ba4\u8bc1\u590d\u6742\uff0c\u6bcf\u4e2a\u670d\u52a1\u90fd\u9700\u8981\u72ec\u7acb\u8ba4\u8bc1"),(0,l.kt)("li",{parentName:"ul"},"\u96be\u4ee5\u91cd\u6784\uff0c\u968f\u7740\u9879\u76ee\u7684\u8fed\u4ee3\uff0c\u53ef\u80fd\u9700\u8981\u91cd\u65b0\u5212\u5206\u5fae\u670d\u52a1\u3002\u4f8b\u5982\uff0c\u53ef\u80fd\u5c06\u591a\u4e2a\u670d\u52a1\u5408\u5e76\u6210\u4e00\u4e2a\u6216\u8005\u5c06\u4e00\u4e2a\u670d\u52a1\u62c6\u5206\u6210\u591a\u4e2a\u3002\u5982\u679c\u5ba2\u6237\u7aef\u76f4\u63a5\u4e0e\u5fae\u670d\u52a1\u901a\u4fe1\uff0c\u90a3\u4e48\u91cd\u6784\u5c06\u4f1a\u5f88\u96be\u5b9e\u65bd")),(0,l.kt)("p",null,"\u4ee5\u4e0a\u8fd9\u4e9b\u95ee\u9898\u53ef\u4ee5\u501f\u52a9\u7f51\u5173\u89e3\u51b3\u3002"),(0,l.kt)("p",null,"\u7f51\u5173\u662f\u4ecb\u4e8e\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7aef\u4e4b\u95f4\u7684\u4e2d\u95f4\u5c42\uff0c\u6240\u6709\u7684\u5916\u90e8\u8bf7\u6c42\u90fd\u4f1a\u5148\u7ecf\u8fc7 \u7f51\u5173\u8fd9\u4e00\u5c42\u3002\u4e5f\u5c31\u662f\u8bf4\uff0cAPI \u7684\u5b9e\u73b0\u65b9\u9762\u66f4\u591a\u7684\u8003\u8651\u4e1a\u52a1\u903b\u8f91\uff0c\u800c\u5b89\u5168\u3001\u6027\u80fd\u3001\u76d1\u63a7\u53ef\u4ee5\u4ea4\u7531 \u7f51\u5173\u6765\u505a\uff0c\u8fd9\u6837\u65e2\u63d0\u9ad8\u4e1a\u52a1\u7075\u6d3b\u6027\u53c8\u4e0d\u7f3a\u5b89\u5168\u6027\uff0c\u5178\u578b\u7684\u67b6\u6784\u56fe\u5982\u56fe\u6240\u793a\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211016171713891-8ab2053c.png",alt:"image-20211016171713891"}),"image-20211016171713891"),(0,l.kt)("p",null,"\u753b\u56fe"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211016171720573-14a38cba.png",alt:"image-20211016171720573"}),"image-20211016171720573"),(0,l.kt)("p",null,"\u4f18\u70b9\u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5b89\u5168 \uff0c\u53ea\u6709\u7f51\u5173\u7cfb\u7edf\u5bf9\u5916\u8fdb\u884c\u66b4\u9732\uff0c\u5fae\u670d\u52a1\u53ef\u4ee5\u9690\u85cf\u5728\u5185\u7f51\uff0c\u901a\u8fc7\u9632\u706b\u5899\u4fdd\u62a4\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u6613\u4e8e\u76d1\u63a7\u3002\u53ef\u4ee5\u5728\u7f51\u5173\u6536\u96c6\u76d1\u63a7\u6570\u636e\u5e76\u5c06\u5176\u63a8\u9001\u5230\u5916\u90e8\u7cfb\u7edf\u8fdb\u884c\u5206\u6790\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u6613\u4e8e\u7edf\u4e00\u8ba4\u8bc1\u6388\u6743\u3002\u53ef\u4ee5\u5728\u7f51\u5173\u4e0a\u8fdb\u884c\u8ba4\u8bc1\uff0c\u7136\u540e\u518d\u5c06\u8bf7\u6c42\u8f6c\u53d1\u5230\u540e\u7aef\u7684\u5fae\u670d\u52a1\uff0c\u800c\u65e0\u987b\u5728\u6bcf\u4e2a\u5fae\u670d\u52a1\u4e2d\u8fdb\u884c\u8ba4\u8bc1\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u51cf\u5c11\u4e86\u5ba2\u6237\u7aef\u4e0e\u5404\u4e2a\u5fae\u670d\u52a1\u4e4b\u95f4\u7684\u4ea4\u4e92\u6b21\u6570")),(0,l.kt)("p",null,"\u603b\u7ed3\uff1a\u5fae\u670d\u52a1\u7f51\u5173\u5c31\u662f\u4e00\u4e2a\u7cfb\u7edf\uff0c\u901a\u8fc7\u66b4\u9732\u8be5\u5fae\u670d\u52a1\u7f51\u5173\u7cfb\u7edf\uff0c\u65b9\u4fbf\u6211\u4eec\u8fdb\u884c\u76f8\u5173\u7684\u9274\u6743\uff0c\u5b89\u5168\u63a7\u5236\uff0c\u65e5\u5fd7\u7edf\u4e00\u5904\u7406\uff0c\u6613\u4e8e\u76d1\u63a7\u7684\u76f8\u5173\u529f\u80fd\u3002"),(0,l.kt)("p",null,"\u5b9e\u73b0\u5fae\u670d\u52a1\u7f51\u5173\u7684\u6280\u672f\u6709\u5f88\u591a\uff0c"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"nginx")," Nginx (engine x) \u662f\u4e00\u4e2a\u9ad8\u6027\u80fd\u7684",(0,l.kt)("a",{parentName:"li",href:"https://baike.baidu.com/item/HTTP"},"HTTPopen in new window"),"\u548c",(0,l.kt)("a",{parentName:"li",href:"https://baike.baidu.com/item/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/7793488"},"\u53cd\u5411\u4ee3\u7406open in new window"),"web\u670d\u52a1\u5668\uff0c\u540c\u65f6\u4e5f\u63d0\u4f9b\u4e86IMAP/POP3/SMTP\u670d\u52a1"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"zuul")," ,Zuul \u662f Netflix \u51fa\u54c1\u7684\u4e00\u4e2a\u57fa\u4e8e JVM \u8def\u7531\u548c\u670d\u52a1\u7aef\u7684\u8d1f\u8f7d\u5747\u8861\u5668\u3002 \u4e0d\u7ef4\u62a4\u4e86\uff0c\u5f03\u7528\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"spring-cloud-gateway"),", \u662fspring \u51fa\u54c1\u7684 \u57fa\u4e8espring \u7684\u7f51\u5173\u9879\u76ee\uff0c\u96c6\u6210\u65ad\u8def\u5668\uff0c\u8def\u5f84\u91cd\u5199\uff0c\u6027\u80fd\u6bd4Zuul\u597d\u3002")),(0,l.kt)("p",null,"\u6211\u4eec\u4f7f\u7528gateway\u8fd9\u4e2a\u7f51\u5173\u6280\u672f\uff0c\u65e0\u7f1d\u8854\u63a5\u5230\u57fa\u4e8espring cloud\u7684\u5fae\u670d\u52a1\u5f00\u53d1\u4e2d\u6765\u3002"),(0,l.kt)("p",null,"gateway\u5b98\u7f51\uff1a"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://spring.io/projects/spring-cloud-gateway"},"https://spring.io/projects/spring-cloud-gatewayopen in new window")),(0,l.kt)("h3",{id:"12-\u5fae\u670d\u52a1\u7f51\u5173\u5fae\u670d\u52a1\u642d\u5efa"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-2-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BD%91%E5%85%B3%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA"},"#"),"1.2 \u5fae\u670d\u52a1\u7f51\u5173\u5fae\u670d\u52a1\u642d\u5efa"),(0,l.kt)("p",null,"\u7531\u4e8e\u6211\u4eec\u5f00\u53d1\u7684\u7cfb\u7edf \u6709\u5305\u62ec\u524d\u53f0\u7cfb\u7edf\u548c\u540e\u53f0\u7cfb\u7edf\uff0c\u540e\u53f0\u7684\u7cfb\u7edf\u7ed9\u7ba1\u7406\u5458\u4f7f\u7528\u3002\u90a3\u4e48\u4e5f\u9700\u8981\u8c03\u7528\u5404\u79cd\u5fae\u670d\u52a1\uff0c\u6240\u4ee5\u6211\u4eec\u9488\u5bf9\u7ba1\u7406\u540e\u53f0\u642d\u5efa\u4e00\u4e2a\u7f51\u5173\u5fae\u670d\u52a1\u3002\u5206\u6790\u5982\u4e0b\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211017093610888-593f8dc8.png",alt:"image-20211017093610888"}),"image-20211017093610888"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u642d\u5efa\u6b65\u9aa4\uff1a")),(0,l.kt)("p",null,"\u521b\u5efa\u9879\u76ee ydles_gateway_system"),(0,l.kt)("p",null,"1\u4f9d\u8d56\u3002\u4e8c\u7ea7\u7236\u5de5\u7a0b\u5bfc\u5165\u4e86\uff0c\u6240\u4ee5\u4e5f\u53ef\u4ee5\u4e0d\u5bfc\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-gateway</artifactId>\n</dependency>\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-netflix-hystrix</artifactId>\n</dependency>\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>\n</dependency>\n")),(0,l.kt)("p",null,"2\u542f\u52a8\u7c7b\uff1acom.ydles.system.GatewayApplication"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"@SpringBootApplication\n@EnableEurekaClient\npublic class GatewayApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(GatewayApplication.class, args);\n    }\n}\n")),(0,l.kt)("p",null,"3\u914d\u7f6e\u6587\u4ef6\uff1aapplication.yml"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"spring:\n  application:\n    name: sysgateway\n  cloud:\n    gateway:\n      routes:\n      - id: goods\n        uri: lb://goods\n        predicates:\n        - Path=/goods/**\n        filters:\n        - StripPrefix= 1\n      - id: system\n        uri: lb://system\n        predicates:\n        - Path=/system/**\n        filters:\n        - StripPrefix= 1\n  redis:\n    host: 192.168.200.128\nserver:\n  port: 9101\neureka:\n  client:\n    service-url:\n      defaultZone: http://127.0.0.1:6868/eureka\n  instance:\n    prefer-ip-address: true\n")),(0,l.kt)("p",null,"\u53c2\u8003\u5b98\u65b9\u624b\u518c\uff1a"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://cloud.spring.io/spring-cloud-gateway/spring-cloud-gateway.html#_stripprefix_gatewayfilter_factory"},"https://cloud.spring.io/spring-cloud-gateway/spring-cloud-gateway.html#_stripprefix_gatewayfilter_factoryopen in new window")),(0,l.kt)("p",null,"\u6d4b\u8bd5\uff1a"),(0,l.kt)("p",null,"\u76f4\u63a5\u8bbf\u95eegoods\u670d\u52a1\uff1a",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9001/brand"},"http://localhost:9001/brandopen in new window")),(0,l.kt)("p",null,"\u901a\u8fc7\u7f51\u5173\u8bbf\u95ee\uff1a",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9101/goods/brand"},"http://localhost:9101/goods/brandopen in new window")),(0,l.kt)("p",null,"localhost:9001/brand"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211017094741750-9acbd1b9.png",alt:"image-20211017094741750"}),"image-20211017094741750"),(0,l.kt)("p",null,"\u8def\u7531\u529f\u80fd\uff1a"),(0,l.kt)("p",null,"1\u7f51\u5173\u8bbf\u95ee\uff1a",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9101/goods/brand/category/%E6%89%8B%E6%9C%BA"},"http://localhost:9101/goods/brand/category/\u624b\u673aopen in new window")),(0,l.kt)("p",null,"2uri: /goods/brand/category/\u5973\u58eb\u5305\u888b"),(0,l.kt)("p",null,"3\u5546\u54c1\u5fae\u670d\u52a1\uff1a",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9001/brand/category/%E5%A5%B3%E5%A3%AB%E5%8C%85%E8%A2%8B"},"http://localhost:9001/brand/category/\u5973\u58eb\u5305\u888bopen in new window")),(0,l.kt)("h3",{id:"13-\u5fae\u670d\u52a1\u7f51\u5173\u8de8\u57df"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-3-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BD%91%E5%85%B3%E8%B7%A8%E5%9F%9F"},"#"),"1.3 \u5fae\u670d\u52a1\u7f51\u5173\u8de8\u57df"),(0,l.kt)("p",null,"\u4fee\u6539application.yml ,\u5728spring.cloud.gateway\u8282\u70b9\u6dfb\u52a0\u914d\u7f6e\uff0c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"  globalcors:\n    cors-configurations:\n      '[/**]': # \u5339\u914d\u6240\u6709\u8bf7\u6c42\n        allowedOrigins: \"*\" #\u8de8\u57df\u5904\u7406 \u5141\u8bb8\u6240\u6709\u7684\u57df\n        allowedMethods: # \u652f\u6301\u7684\u65b9\u6cd5\n          - GET\n          - POST\n          - PUT\n          - DELETE  \n")),(0,l.kt)("p",null,"\u6700\u7ec8\u914d\u7f6e\u6587\u4ef6\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"spring:\n  application:\n    name: sysgateway\n  cloud:\n    gateway:\n      globalcors:\n        cors-configurations:\n          '[/**]': # \u5339\u914d\u6240\u6709\u8bf7\u6c42\n            allowedOrigins: \"*\" #\u8de8\u57df\u5904\u7406 \u5141\u8bb8\u6240\u6709\u7684\u57df\n            allowedMethods: # \u652f\u6301\u7684\u65b9\u6cd5\n            - GET\n            - POST\n            - PUT\n            - DELETE\n      routes:\n      - id: goods\n        uri: lb://goods\n        predicates:\n        - Path=/goods/**\n        filters:\n        - StripPrefix= 1\nserver:\n  port: 9101\neureka:\n  client:\n    service-url:\n      defaultZone: http://127.0.0.1:6868/eureka\n  instance:\n    prefer-ip-address: true\n")),(0,l.kt)("h3",{id:"14-\u5fae\u670d\u52a1\u7f51\u5173\u8fc7\u6ee4\u5668"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-4-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%BD%91%E5%85%B3%E8%BF%87%E6%BB%A4%E5%99%A8"},"#"),"1.4 \u5fae\u670d\u52a1\u7f51\u5173\u8fc7\u6ee4\u5668"),(0,l.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u7f51\u5173\u8fc7\u6ee4\u5668\uff0c\u5b9e\u73b0\u4e00\u4e9b\u903b\u8f91\u7684\u5904\u7406\uff0c\u6bd4\u5982ip\u9ed1\u767d\u540d\u5355\u62e6\u622a\u3001\u7279\u5b9a\u5730\u5740\u7684\u62e6\u622a\u7b49\u3002\u4e0b\u9762\u7684\u4ee3\u7801\u4e2d\u505a\u4e86\u4e24\u4e2a\u8fc7\u6ee4\u5668\uff0c\u5e76\u4e14\u8bbe\u5b9a\u7684\u5148\u540e\u987a\u5e8f\uff0c\u53ea\u6f14\u793a\u8fc7\u6ee4\u5668\u4e0e\u8fd0\u884c\u6548\u679c\u3002\uff08\u5177\u4f53\u903b\u8f91\u5904\u7406\u90e8\u5206\u5b66\u5458\u5b9e\u73b0\uff09"),(0,l.kt)("p",null,"\u9700\u6c42\uff1a"),(0,l.kt)("p",null," 1 ip\u62e6\u622a\u3002pdd ip\u662f\u6dd8\u5b9d\uff0c\u4e0d\u8ba9\u4f60\u767e\u4ebf\u8865\u8d34\u3002"),(0,l.kt)("p",null," 2 \u5371\u9669\u64cd\u4f5c\u65e5\u5fd7\u6253\u5370\uff1a/admin/delete \u8bb0\u5f55"),(0,l.kt)("p",null,"\uff081\uff09ydles_gateway_system\u521b\u5efaIpFilter"),(0,l.kt)("p",null,"\u9700\u6c42\uff1aip\u9ed1\u540d\u5355\u62e6\u622a"),(0,l.kt)("p",null,"IpFilter com.ydles.system.filter\u5305\u4e0b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Component\npublic class IpFilter implements GlobalFilter, Ordered {\n//\u5177\u4f53\u4e1a\u52a1\u903b\u8f91\n@Override\npublic Mono<Void> filter(ServerWebExchange exchange, GatewayFilterChain chain) {\n    //\u83b7\u53d6\u5ba2\u6237\u7aef\u7684\u8bbf\u95eeip\n    System.out.println("\u7ecf\u8fc7\u4e86\u7b2c\u4e00\u4e2a\u8fc7\u6ee4\u5668");\n    ServerHttpRequest request = exchange.getRequest();\n    InetSocketAddress remoteAddress = request.getRemoteAddress();\n    System.out.println("ip:"+remoteAddress.getHostName());\n    //\u653e\u884c\n    return chain.filter(exchange);\n}\n\n//\u8fc7\u6ee4\u5668\u7684\u6267\u884c\u4f18\u5148\u7ea7,\u8fd4\u56de\u503c\u8d8a\u5c0f,\u6267\u884c\u4f18\u5148\u7ea7\u8d8a\u9ad8\n@Override\npublic int getOrder() {\n    return 1;\n}\n}\n')),(0,l.kt)("p",null,"\uff081\uff09ydles_gateway_system\u521b\u5efaUrlFilter"),(0,l.kt)("p",null,"\u9700\u6c42\uff1a\u7279\u5b9a\u5730\u5740\u7684\u62e6\u622a /admin/delete log"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Component\npublic class UrlFilter implements GlobalFilter, Ordered {\n    @Override\n    public Mono<Void> filter(ServerWebExchange exchange, GatewayFilterChain chain) {\n        System.out.println("\u7ecf\u8fc7\u4e86\u7b2c\u4e8c\u4e2a\u8fc7\u6ee4\u5668");\n        ServerHttpRequest request = exchange.getRequest();\n        String path = request.getURI().getPath();\n        System.out.println("path:"+path);\n        //\u653e\u884c\n        return chain.filter(exchange);\n    }\n\n@Override\npublic int getOrder() {\n    return 2;\n}\n}\n')),(0,l.kt)("p",null,"\u8bbf\u95ee\u6d4b\u8bd5\uff1a ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9101/goods/brand/category/%E6%89%8B%E6%9C%BA"},"http://localhost:9101/goods/brand/category/\u624b\u673aopen in new window")),(0,l.kt)("h2",{id:"2-\u7f51\u5173\u9650\u6d41"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-%E7%BD%91%E5%85%B3%E9%99%90%E6%B5%81"},"#"),"2 \u7f51\u5173\u9650\u6d41"),(0,l.kt)("p",null,"\u6982\u5ff5\uff1a\u4e24\u4e2a\u6982\u5ff5"),(0,l.kt)("p",null,"\u9650\u6d41\uff1a\u5f53\u6211\u4eec\u7684\u7cfb\u7edf\u88ab\u9891\u7e41\u7684\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u5c31\u6709\u53ef\u80fd\u5c06\u7cfb\u7edf\u538b\u57ae\uff0c\u9700\u8981\u5728\u6bcf\u4e00\u4e2a\u5fae\u670d\u52a1\u4e2d\u505a\u9650\u6d41\u64cd\u4f5c"),(0,l.kt)("p",null,"\u7f51\u5173\u9650\u6d41\uff1a\u5728\u7f51\u5173\u7cfb\u7edf\u505a\u9650\u6d41 goods 1w/s search 5w/s"),(0,l.kt)("h3",{id:"21-\u601d\u8def\u5206\u6790"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-1-%E6%80%9D%E8%B7%AF%E5%88%86%E6%9E%90"},"#"),"2.1 \u601d\u8def\u5206\u6790"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211017165438658-289fd086.png",alt:"image-20211017165438658"}),"image-20211017165438658"),(0,l.kt)("h3",{id:"22-\u4ee4\u724c\u6876\u7b97\u6cd5"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-2-%E4%BB%A4%E7%89%8C%E6%A1%B6%E7%AE%97%E6%B3%95"},"#"),"2.2 \u4ee4\u724c\u6876\u7b97\u6cd5"),(0,l.kt)("p",null,"\u4ee4\u724c\u6876\u7b97\u6cd5\u662f\u6bd4\u8f83\u5e38\u89c1\u7684\u9650\u6d41\u7b97\u6cd5\u4e4b\u4e00\uff0c\u5927\u6982\u63cf\u8ff0\u5982\u4e0b\uff1a"),(0,l.kt)("p",null,"1\uff09\u6240\u6709\u7684\u8bf7\u6c42\u5728\u5904\u7406\u4e4b\u524d\u90fd\u9700\u8981\u62ff\u5230\u4e00\u4e2a\u53ef\u7528\u7684\u4ee4\u724c\u624d\u4f1a\u88ab\u5904\u7406\uff1b"),(0,l.kt)("p",null,"2\uff09\u6839\u636e\u9650\u6d41\u5927\u5c0f\uff0c\u8bbe\u7f6e\u6309\u7167\u4e00\u5b9a\u7684\u901f\u7387\u5f80\u6876\u91cc\u6dfb\u52a0\u4ee4\u724c\uff1b"),(0,l.kt)("p",null,"3\uff09\u6876\u8bbe\u7f6e\u6700\u5927\u7684\u653e\u7f6e\u4ee4\u724c\u9650\u5236\uff0c\u5f53\u6876\u6ee1\u65f6\u3001\u65b0\u6dfb\u52a0\u7684\u4ee4\u724c\u5c31\u88ab\u4e22\u5f03\u6216\u8005\u62d2\u7edd\uff1b"),(0,l.kt)("p",null,"4\uff09\u8bf7\u6c42\u8fbe\u5230\u540e\u9996\u5148\u8981\u83b7\u53d6\u4ee4\u724c\u6876\u4e2d\u7684\u4ee4\u724c\uff0c\u62ff\u7740\u4ee4\u724c\u624d\u53ef\u4ee5\u8fdb\u884c\u5176\u4ed6\u7684\u4e1a\u52a1\u903b\u8f91\uff0c\u5904\u7406\u5b8c\u4e1a\u52a1\u903b\u8f91\u4e4b\u540e\uff0c\u5c06\u4ee4\u724c\u76f4\u63a5\u5220\u9664\uff1b"),(0,l.kt)("p",null,"5\uff09\u4ee4\u724c\u6876\u6709\u6700\u4f4e\u9650\u989d\uff0c\u5f53\u6876\u4e2d\u7684\u4ee4\u724c\u8fbe\u5230\u6700\u4f4e\u9650\u989d\u7684\u65f6\u5019\uff0c\u8bf7\u6c42\u5904\u7406\u5b8c\u4e4b\u540e\u5c06\u4e0d\u4f1a\u5220\u9664\u4ee4\u724c\uff0c\u4ee5\u6b64\u4fdd\u8bc1\u8db3\u591f\u7684\u9650\u6d41"),(0,l.kt)("p",null,"\u5982\u4e0b\u56fe\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211017170219974-a340258f.png",alt:"image-20211017170219974"}),"image-20211017170219974"),(0,l.kt)("p",null,"\u8fd9\u4e2a\u7b97\u6cd5\u7684\u5b9e\u73b0\uff0c\u6709\u5f88\u591a\u6280\u672f\uff0cGuava(\u8bfb\u97f3: \u74dc\u54c7)\u662f\u5176\u4e2d\u4e4b\u4e00\uff0credis\u5ba2\u6237\u7aef\u4e5f\u6709\u5176\u5b9e\u73b0\u3002"),(0,l.kt)("h3",{id:"23-\u7f51\u5173\u9650\u6d41\u4ee3\u7801\u5b9e\u73b0"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-3-%E7%BD%91%E5%85%B3%E9%99%90%E6%B5%81%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"},"#"),"2.3 \u7f51\u5173\u9650\u6d41\u4ee3\u7801\u5b9e\u73b0"),(0,l.kt)("p",null,"\u9700\u6c42\uff1a\u6bcf\u4e2aip\u5730\u57401\u79d2\u5185\u53ea\u80fd\u53d1\u90011\u6b21\u8bf7\u6c42goods\uff0c\u591a\u51fa\u6765\u7684\u8bf7\u6c42\u8fd4\u56de429\u9519\u8bef\u3002"),(0,l.kt)("p",null,"\u4ee3\u7801\u5b9e\u73b0\uff1a"),(0,l.kt)("p",null,"\uff081\uff09spring cloud gateway \u9ed8\u8ba4\u4f7f\u7528redis\u7684RateLimter\u9650\u6d41\u7b97\u6cd5\u6765\u5b9e\u73b0\u3002\u6240\u4ee5\u6211\u4eec\u8981\u4f7f\u7528\u9996\u5148\u9700\u8981\u5f15\u5165redis\u7684\u4f9d\u8d56"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-data-redis-reactive</artifactId>\n    <version>2.1.3.RELEASE</version>\n</dependency>\n")),(0,l.kt)("p",null,"\uff082\uff09\u5b9a\u4e49KeyResolver"),(0,l.kt)("p",null,"\u5728GatewayApplicatioin\u5f15\u5bfc\u7c7b\u4e2d\u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801\uff0cKeyResolver\u7528\u4e8e\u8ba1\u7b97\u67d0\u4e00\u4e2a\u7c7b\u578b\u7684\u9650\u6d41\u7684KEY\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ef\u4ee5\u901a\u8fc7KeyResolver\u6765\u6307\u5b9a\u9650\u6d41\u7684Key\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"@Bean\npublic KeyResolver ipKeyResolver(){\n    return new KeyResolver() {\n        @Override\n        public Mono<String> resolve(ServerWebExchange exchange) {\n            return Mono.just(exchange.getRequest().getRemoteAddress().getHostName());\n        }\n    };\n}\n")),(0,l.kt)("p",null,"\uff083\uff09\u914d\u7f6e\u6587\u4ef6\u914d\u7f6eredis\u53ca\u9650\u6d41\u7b56\u7565\u3002\u67d0\u4e2a\u670d\u52a1\u7684filters\u4e0b\uff0c\u52a0\u5165\u5982\u4e0b\u4ee3\u7801\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'spring:\n  application:\n    name: sysgateway\n  cloud:\n    gateway:\n      globalcors:\n        cors-configurations:\n          \'[/**]\': # \u5339\u914d\u6240\u6709\u8bf7\u6c42\n            allowedOrigins: "*" #\u8de8\u57df\u5904\u7406 \u5141\u8bb8\u6240\u6709\u7684\u57df\n            allowedMethods: # \u652f\u6301\u7684\u65b9\u6cd5\n            - GET\n            - POST\n            - PUT\n            - DELETE\n      routes:\n      - id: goods\n        uri: lb://goods\n        predicates:\n        - Path=/goods/**\n        filters:\n        - StripPrefix= 1\n        - name: RequestRateLimiter #\u8bf7\u6c42\u6570\u9650\u6d41 \u540d\u5b57\u4e0d\u80fd\u968f\u4fbf\u5199 \n          args:\n            key-resolver: "#{@ipKeyResolver}"\n            redis-rate-limiter.replenishRate: 1 #\u4ee4\u724c\u6876\u6bcf\u79d2\u586b\u5145\u5e73\u5747\u901f\u7387\n            redis-rate-limiter.burstCapacity: 1 #\u4ee4\u724c\u6876\u603b\u5bb9\u91cf\n      - id: system\n        uri: lb://system\n        predicates:\n        - Path=/system/**\n        filters:\n        - StripPrefix= 1\n  # \u914d\u7f6eRedis 127.0.0.1\u53ef\u4ee5\u7701\u7565\u914d\u7f6e\n  redis:\n    host: 192.168.200.128\n    port: 6379\nserver:\n  port: 9101\neureka:\n  client:\n    service-url:\n      defaultZone: http://127.0.0.1:6868/eureka\n  instance:\n    prefer-ip-address: true\n')),(0,l.kt)("p",null,"\u89e3\u91ca\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"burstCapacity\uff1a\u4ee4\u724c\u6876\u603b\u5bb9\u91cf\u3002"),(0,l.kt)("li",{parentName:"ul"},"replenishRate\uff1a\u4ee4\u724c\u6876\u6bcf\u79d2\u586b\u5145\u5e73\u5747\u901f\u7387\u3002"),(0,l.kt)("li",{parentName:"ul"},"key-resolver\uff1a\u7528\u4e8e\u9650\u6d41\u7684\u952e\u7684\u89e3\u6790\u5668\u7684 Bean \u5bf9\u8c61\u7684\u540d\u5b57\u3002\u5b83\u4f7f\u7528 SpEL \u8868\u8fbe\u5f0f\u6839\u636e#{@beanName}\u4ece Spring \u5bb9\u5668\u4e2d\u83b7\u53d6 Bean \u5bf9\u8c61\u3002")),(0,l.kt)("p",null,"\u901a\u8fc7\u5728",(0,l.kt)("inlineCode",{parentName:"p"},"replenishRate"),"\u548c\u4e2d\u8bbe\u7f6e\u76f8\u540c\u7684\u503c\u6765\u5b9e\u73b0\u7a33\u5b9a\u7684\u901f\u7387",(0,l.kt)("inlineCode",{parentName:"p"},"burstCapacity"),"\u3002\u8bbe\u7f6e",(0,l.kt)("inlineCode",{parentName:"p"},"burstCapacity"),"\u9ad8\u4e8e\u65f6\uff0c\u53ef\u4ee5\u5141\u8bb8\u4e34\u65f6\u7a81\u53d1",(0,l.kt)("inlineCode",{parentName:"p"},"replenishRate"),"\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u9700\u8981\u5728\u7a81\u53d1\u4e4b\u95f4\u5141\u8bb8\u901f\u7387\u9650\u5236\u5668\u4e00\u6bb5\u65f6\u95f4\uff08\u6839\u636e",(0,l.kt)("inlineCode",{parentName:"p"},"replenishRate"),"\uff09\uff0c\u56e0\u4e3a2\u6b21\u8fde\u7eed\u7a81\u53d1\u5c06\u5bfc\u81f4\u8bf7\u6c42\u88ab\u4e22\u5f03\uff08",(0,l.kt)("inlineCode",{parentName:"p"},"HTTP 429 - Too Many Requests"),"\uff09"),(0,l.kt)("p",null,'key-resolver: "#{@userKeyResolver}" \u7528\u4e8e\u901a\u8fc7SPEL\u8868\u8fbe\u5f0f\u6765\u6307\u5b9a\u4f7f\u7528\u54ea\u4e00\u4e2aKeyResolver.'),(0,l.kt)("p",null,"\u5982\u4e0a\u914d\u7f6e\uff1a"),(0,l.kt)("p",null,"\u8868\u793a \u4e00\u79d2\u5185\uff0c\u5141\u8bb8 \u4e00\u4e2a\u8bf7\u6c42\u901a\u8fc7\uff0c\u4ee4\u724c\u6876\u7684\u586b\u5145\u901f\u7387\u4e5f\u662f\u4e00\u79d2\u949f\u6dfb\u52a0\u4e00\u4e2a\u4ee4\u724c\u3002"),(0,l.kt)("p",null,"\u6700\u5927\u7a81\u53d1\u72b6\u51b5 \u4e5f\u53ea\u5141\u8bb8 \u4e00\u79d2\u5185\u6709\u4e00\u6b21\u8bf7\u6c42\uff0c\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u6765\u8c03\u6574 \u3002"),(0,l.kt)("p",null,"\uff084\uff09\u6d4b\u8bd5"),(0,l.kt)("p",null,"\u542f\u52a8redis"),(0,l.kt)("p",null,"\u542f\u52a8\u6ce8\u518c\u4e2d\u5fc3"),(0,l.kt)("p",null,"\u542f\u52a8\u5546\u54c1\u5fae\u670d\u52a1"),(0,l.kt)("p",null,"\u542f\u52a8gateway\u7f51\u5173"),(0,l.kt)("p",null,"\u6253\u5f00\u6d4f\u89c8\u5668 ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9101/goods/brand"},"http://localhost:9101/goods/brandopen in new window")),(0,l.kt)("p",null,"\u5feb\u901f\u5237\u65b0\uff0c\u5f531\u79d2\u5185\u53d1\u9001\u591a\u6b21\u8bf7\u6c42\uff0c\u5c31\u4f1a\u8fd4\u56de429\u9519\u8bef\u3002"),(0,l.kt)("p",null,"http \u54cd\u5e94\u7801"),(0,l.kt)("p",null,"2 \u6ca1\u95ee\u9898"),(0,l.kt)("p",null," 200"),(0,l.kt)("p",null,"3 \u6ca1\u95ee\u9898\uff0c\u9700\u8981\u6d4f\u89c8\u5668\u505a\u64cd\u4f5c"),(0,l.kt)("p",null," 302 303 \u8f6c\u53d1"),(0,l.kt)("p",null,"4 \u5ba2\u6237\u7aef\u6709\u95ee\u9898"),(0,l.kt)("p",null," 404 not found 429"),(0,l.kt)("p",null,"5\u670d\u52a1\u7aef"),(0,l.kt)("p",null," 501 \u7cfb\u7edf\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),(0,l.kt)("h2",{id:"3-bcrypt\u5bc6\u7801\u52a0\u5bc6"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-bcrypt%E5%AF%86%E7%A0%81%E5%8A%A0%E5%AF%86"},"#"),"3. BCrypt\u5bc6\u7801\u52a0\u5bc6"),(0,l.kt)("h3",{id:"31-bcrypt\u5feb\u901f\u5165\u95e8"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-1-bcrypt%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"},"#"),"3.1 BCrypt\u5feb\u901f\u5165\u95e8"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211018160603550-6d6e0ce6.png",alt:"image-20211018160603550"}),"image-20211018160603550"),(0,l.kt)("p",null,"\u5728\u7528\u6237\u6a21\u5757\uff0c\u5bf9\u4e8e\u7528\u6237\u5bc6\u7801\u7684\u4fdd\u62a4\uff0c\u901a\u5e38\u90fd\u4f1a\u8fdb\u884c\u52a0\u5bc6\u3002\u6211\u4eec\u901a\u5e38\u5bf9\u5bc6\u7801\u8fdb\u884c\u52a0\u5bc6\uff0c\u7136\u540e\u5b58\u653e\u5728\u6570\u636e\u5e93\u4e2d\uff0c\u5728\u7528\u6237\u8fdb\u884c\u767b\u5f55\u7684\u65f6\u5019\uff0c\u5c06\u5176\u8f93\u5165\u7684\u5bc6\u7801\u8fdb\u884c\u52a0\u5bc6\u7136\u540e\u4e0e\u6570\u636e\u5e93\u4e2d\u5b58\u653e\u7684\u5bc6\u6587\u8fdb\u884c\u6bd4\u8f83\uff0c\u4ee5\u9a8c\u8bc1\u7528\u6237\u5bc6\u7801\u662f\u5426\u6b63\u786e\u3002 \u76ee\u524d\uff0cMD5\u548cBCrypt\u6bd4\u8f83\u6d41\u884c\u3002\u76f8\u5bf9\u6765\u8bf4\uff0cBCrypt\u6bd4MD5\u66f4\u5b89\u5168\u3002\u56e0\u4e3a\u5176\u5185\u90e8\u5f15\u5165\u7684\u52a0\u76d0\u673a\u5236"),(0,l.kt)("p",null,"BCrypt \u5b98\u7f51",(0,l.kt)("a",{parentName:"p",href:"http://www.mindrot.org/projects/jBCrypt/"},"http://www.mindrot.org/projects/jBCrypt/open in new window")),(0,l.kt)("p",null,"\uff081\uff09\u65b0\u5efa\u6d4b\u8bd5\u7c7b\uff0cmain\u65b9\u6cd5\u4e2d\u7f16\u5199\u4ee3\u7801\uff0c\u5b9e\u73b0\u5bf9\u5bc6\u7801\u7684\u52a0\u5bc6"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public class TestBcrypt {\n\n    public static void main(String[] args) {\n        /**\n         * \u5f97\u5230\u76d0\n         * \u76d0\u662f\u4e00\u4e2a\u968f\u673a\u751f\u6210\u7684\u542b\u670929\u4e2a\u5b57\u7b26\u7684\u5b57\u7b26\u4e32,\u5e76\u4e14\u4f1a\u4e0e\u5bc6\u7801\u4e00\u8d77\u5408\u5e76\u8fdb\u884c\u6700\u7ec8\u7684\u5bc6\u6587\u751f\u6210\n         * \u5e76\u4e14\u6bcf\u4e00\u6b21\u751f\u6210\u7684\u76d0\u7684\u503c\u90fd\u662f\u4e0d\u540c\u7684\n         */\n        for(int i=0;i<10;i++){\n            String gensalt = BCrypt.gensalt();\n            System.out.println("salt:"+gensalt);\n            String saltPassword = BCrypt.hashpw("123456", gensalt);\n            System.out.println("\u672c\u6b21\u751f\u6210\u7684\u5bc6\u7801:"+saltPassword);\n        }\n    }\n}\n')),(0,l.kt)("p",null,"\uff082\uff09main\u65b9\u6cd5\u4e2d\u7f16\u5199\u4ee3\u7801\uff0c\u5b9e\u73b0\u5bf9\u5bc6\u7801\u7684\u6821\u9a8c\u3002BCrypt\u4e0d\u652f\u6301\u53cd\u8fd0\u7b97\uff0c\u53ea\u652f\u6301\u5bc6\u7801\u6821\u9a8c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'//\u6821\u9a8c\u5bc6\u7801\nboolean checkpw = BCrypt.checkpw("123456", saltPassword);\nSystem.out.println("\u5bc6\u7801\u6821\u9a8c\u7ed3\u679c:"+checkpw);\n')),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u7ed3\u679c"),"\uff1a\u6bcf\u6b21\u76d0\u4e0d\u4e00\u6837\uff0c\u52a0\u5bc6\u540e\u4e0d\u4e00\u6837\uff0c\u4f46\u90fd\u80fd\u9a8c\u8bc1\u3002"),(0,l.kt)("h3",{id:"32-\u65b0\u589e\u7ba1\u7406\u5458\u5bc6\u7801\u52a0\u5bc6-\u638c\u63e1"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-2-%E6%96%B0%E5%A2%9E%E7%AE%A1%E7%90%86%E5%91%98%E5%AF%86%E7%A0%81%E5%8A%A0%E5%AF%86-%E6%8E%8C%E6%8F%A1"},"#"),"3.2 \u65b0\u589e\u7ba1\u7406\u5458\u5bc6\u7801\u52a0\u5bc6-\u638c\u63e1"),(0,l.kt)("h4",{id:"321-\u9700\u6c42\u4e0e\u8868\u7ed3\u6784\u5206\u6790"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-2-1-%E9%9C%80%E6%B1%82%E4%B8%8E%E8%A1%A8%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90"},"#"),"3.2.1 \u9700\u6c42\u4e0e\u8868\u7ed3\u6784\u5206\u6790"),(0,l.kt)("p",null,"ydles_system\u4e0btb_admin\u65b0\u589e\u7ba1\u7406\u5458\uff0c\u4f7f\u7528BCrypt\u8fdb\u884c\u5bc6\u7801\u52a0\u5bc6"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"id"),(0,l.kt)("th",{parentName:"tr",align:null},"int"),(0,l.kt)("th",{parentName:"tr",align:null},"\u4e3b\u952eid"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"login_name"),(0,l.kt)("td",{parentName:"tr",align:null},"varchar"),(0,l.kt)("td",{parentName:"tr",align:null},"\u767b\u5f55\u540d")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"password"),(0,l.kt)("td",{parentName:"tr",align:null},"varchar"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5bc6\u7801")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"status"),(0,l.kt)("td",{parentName:"tr",align:null},"char"),(0,l.kt)("td",{parentName:"tr",align:null},"\u72b6\u6001")))),(0,l.kt)("h4",{id:"322-\u4ee3\u7801\u5b9e\u73b0"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-2-2-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"},"#"),"3.2.2 \u4ee3\u7801\u5b9e\u73b0"),(0,l.kt)("p",null,"\uff081\uff09\u4fee\u6539ydles_service_system\u9879\u76ee\u7684AdminServiceImpl"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"    @Override\n    public void add(Admin admin){\n        //\u83b7\u53d6\u76d0\n        String gensalt = BCrypt.gensalt();\n        //\u5bf9\u7528\u6237\u7684\u5bc6\u7801\u8fdb\u884c\u52a0\u5bc6\n        String hashpw = BCrypt.hashpw(admin.getPassword(), gensalt);\n        admin.setPassword(hashpw);\n        adminMapper.insert(admin);\n    }\n")),(0,l.kt)("p",null,"\u6d4b\u8bd5\uff1apostman ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9101/system/admin"},"http://localhost:9101/system/adminopen in new window")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "loginName":"test1",\n    "password":"123456",\n    "status":"1"\n}\n')),(0,l.kt)("h3",{id:"33-\u7ba1\u7406\u5458\u767b\u5f55\u5bc6\u7801\u9a8c\u8bc1"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-3-%E7%AE%A1%E7%90%86%E5%91%98%E7%99%BB%E5%BD%95%E5%AF%86%E7%A0%81%E9%AA%8C%E8%AF%81"},"#"),"3.3 \u7ba1\u7406\u5458\u767b\u5f55\u5bc6\u7801\u9a8c\u8bc1"),(0,l.kt)("h4",{id:"331-\u9700\u6c42\u5206\u6790"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-3-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"},"#"),"3.3.1 \u9700\u6c42\u5206\u6790"),(0,l.kt)("p",null,"\u7cfb\u7edf\u7ba1\u7406\u7528\u6237\u9700\u8981\u7ba1\u7406\u540e\u53f0\uff0c\u9700\u8981\u5148\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801\u8fdb\u884c\u767b\u5f55\uff0c\u624d\u80fd\u8fdb\u5165\u7ba1\u7406\u540e\u53f0\u3002"),(0,l.kt)("p",null,"\u601d\u8def\uff1a"),(0,l.kt)("p",null,"\u7528\u6237\u53d1\u9001\u8bf7\u6c42\uff0c\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801"),(0,l.kt)("p",null,"\u540e\u53f0\u7ba1\u7406\u5fae\u670d\u52a1controller\u63a5\u6536\u53c2\u6570\uff0c\u9a8c\u8bc1\u7528\u6237\u540d\u548c\u5bc6\u7801\u662f\u5426\u6b63\u786e\uff0c\u5982\u679c\u6b63\u786e\u5219\u8fd4\u56de\u7528\u6237\u767b\u5f55\u6210\u529f\u7ed3\u679c"),(0,l.kt)("h4",{id:"332-\u4ee3\u7801\u5b9e\u73b0"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-3-2-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"},"#"),"3.3.2 \u4ee3\u7801\u5b9e\u73b0"),(0,l.kt)("p",null,"\uff081\uff09AdminService\u65b0\u589e\u65b9\u6cd5\u5b9a\u4e49"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"    /**\n     * \u767b\u5f55\u9a8c\u8bc1\u5bc6\u7801\n     * @param admin\n     * @return\n     */\n    boolean login(Admin admin);\n")),(0,l.kt)("p",null,"\uff082\uff09AdminServiceImpl\u5b9e\u73b0\u6b64\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    @Override\n    public boolean login(Admin admin) {\n        //\u6839\u636e\u767b\u5f55\u540d\u67e5\u8be2\u7ba1\u7406\u5458\n        Admin admin1=new Admin();\n        admin1.setLoginName(admin.getLoginName());\n        admin1.setStatus("1");\n        Admin admin2 = adminMapper.selectOne(admin1);//\u6570\u636e\u5e93\u67e5\u8be2\u51fa\u7684\u5bf9\u8c61\n        if(admin2==null){\n            return false;\n        }else{\n            //\u9a8c\u8bc1\u5bc6\u7801, Bcrypt\u4e3aspring\u7684\u5305, \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u660e\u6587\u5bc6\u7801, \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u5bc6\u6587\u5bc6\u7801\n            return BCrypt.checkpw(admin.getPassword(),admin2.getPassword());\n        }\n    }\n')),(0,l.kt)("p",null,"\uff083\uff09AdminController\u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    /**\n     * \u767b\u5f55\n     * @param admin\n     * @return\n     */\n    @PostMapping("/login")\n    public Result login(@RequestBody Admin admin){\n        boolean login = adminService.login(admin);\n        if(login){\n            return new Result();\n        }else{\n            return new Result(false,StatusCode.LOGINERROR,"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef");\n        }\n    }\n')),(0,l.kt)("p",null,"\u6d4b\u8bd5\uff1apostman ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9101/system/admin/login"},"http://localhost:9101/system/admin/loginopen in new window")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "loginName":"test1",\n    "password":"1234561"\n}\n')),(0,l.kt)("h2",{id:"4\u52a0\u5bc6\u7b97\u6cd5\u4e86\u89e3"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95-%E4%BA%86%E8%A7%A3"},"#"),"4.\u52a0\u5bc6\u7b97\u6cd5(\u4e86\u89e3)"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u7531\u4e8e\u5728\u5b66\u4e60JWT\u7684\u65f6\u5019\u4f1a\u6d89\u53ca\u4f7f\u7528\u5f88\u591a\u52a0\u5bc6\u7b97\u6cd5, \u6240\u4ee5\u5728\u8fd9\u91cc\u505a\u4e0b\u626b\u76f2, \u7b80\u5355\u4e86\u89e3\u5c31\u53ef\u4ee5")),(0,l.kt)("p",null,"\u52a0\u5bc6\u7b97\u6cd5\u79cd\u7c7b\u6709:"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211019155118932-e2af51ef.png",alt:"image-20211019155118932"}),"image-20211019155118932"),(0,l.kt)("h3",{id:"41\u53ef\u9006\u52a0\u5bc6\u7b97\u6cd5"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-1-%E5%8F%AF%E9%80%86%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95"},"#"),"4.1.\u53ef\u9006\u52a0\u5bc6\u7b97\u6cd5"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u89e3\u91ca:")," \u52a0\u5bc6\u540e, \u5bc6\u6587\u53ef\u4ee5\u53cd\u5411\u89e3\u5bc6\u5f97\u5230\u5bc6\u7801\u539f\u6587."),(0,l.kt)("h4",{id:"411-\u5bf9\u79f0\u52a0\u5bc6"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-1-1-%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86"},"#"),"4.1.1. \u5bf9\u79f0\u52a0\u5bc6"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20191207093647995-4391d019.png",alt:"image-20191207093647995"}),"image-20191207093647995"),(0,l.kt)("p",null,"\u79d8\u94a5\uff1a2\uff08\u6bcf\u4f4d\u5411\u540e\u63a82\u4e2a\uff09"),(0,l.kt)("p",null,"abc----cde-------\x3eabc"),(0,l.kt)("p",null,"\u3010",(0,l.kt)("strong",{parentName:"p"},"\u6587\u4ef6\u52a0\u5bc6\u548c\u89e3\u5bc6\u4f7f\u7528\u76f8\u540c\u7684\u5bc6\u94a5\uff0c\u5373\u52a0\u5bc6\u5bc6\u94a5\u4e5f\u53ef\u4ee5\u7528\u4f5c\u89e3\u5bc6\u5bc6\u94a5"),"\u3011"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u89e3\u91ca:")," \u5728\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u4e2d\uff0c\u6570\u636e\u53d1\u4fe1\u65b9\u5c06\u660e\u6587\u548c\u52a0\u5bc6\u5bc6\u94a5\u4e00\u8d77\u7ecf\u8fc7\u7279\u6b8a\u7684\u52a0\u5bc6\u7b97\u6cd5\u5904\u7406\u540e\uff0c\u4f7f\u5176\u53d8\u6210\u590d\u6742\u7684\u52a0\u5bc6\u5bc6\u6587\u53d1\u9001\u51fa\u53bb\uff0c\u6536\u4fe1\u65b9\u6536\u5230\u5bc6\u6587\u540e\uff0c\u82e5\u60f3\u89e3\u8bfb\u51fa\u539f\u6587\uff0c\u5219\u9700\u8981\u4f7f\u7528\u52a0\u5bc6\u65f6\u7528\u7684\u5bc6\u94a5\u4ee5\u53ca\u76f8\u540c\u52a0\u5bc6\u7b97\u6cd5\u7684\u9006\u7b97\u6cd5\u5bf9\u5bc6\u6587\u8fdb\u884c\u89e3\u5bc6\uff0c\u624d\u80fd\u4f7f\u5176\u56de\u590d\u6210\u53ef\u8bfb\u660e\u6587\u3002\u5728\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u4e2d\uff0c\u4f7f\u7528\u7684\u5bc6\u94a5\u53ea\u6709\u4e00\u4e2a\uff0c\u6536\u53d1\u53cc\u65b9\u90fd\u4f7f\u7528\u8fd9\u4e2a\u5bc6\u94a5\uff0c\u8fd9\u5c31\u9700\u8981\u89e3\u5bc6\u65b9\u4e8b\u5148\u77e5\u9053\u52a0\u5bc6\u5bc6\u94a5\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u4f18\u70b9:")," \u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u7684\u4f18\u70b9\u662f\u7b97\u6cd5\u516c\u5f00\u3001\u8ba1\u7b97\u91cf\u5c0f\u3001\u52a0\u5bc6\u901f\u5ea6\u5feb\u3001\u52a0\u5bc6\u6548\u7387\u9ad8\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u7f3a\u70b9:")," \u6ca1\u6709\u975e\u5bf9\u79f0\u52a0\u5bc6\u5b89\u5168."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u7528\u9014\uff1a")," \u4e00\u822c\u7528\u4e8e\u4fdd\u5b58\u7528\u6237\u624b\u673a\u53f7\u3001\u8eab\u4efd\u8bc1\u7b49\u654f\u611f\u4f46\u80fd\u89e3\u5bc6\u7684\u4fe1\u606f\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u5e38\u89c1\u7684\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u6709"),": ",(0,l.kt)("inlineCode",{parentName:"p"},"AES\u3001DES\u30013DES\u3001Blowfish\u3001IDEA\u3001RC4\u3001RC5\u3001RC6\u3001HS256")),(0,l.kt)("h4",{id:"412-\u975e\u5bf9\u79f0\u52a0\u5bc6"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-1-2-%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86"},"#"),"4.1.2. \u975e\u5bf9\u79f0\u52a0\u5bc6"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20191207093855574-a597380b.png",alt:"image-20191207093855574"}),"image-20191207093855574"),(0,l.kt)("p",null,"\u3010",(0,l.kt)("strong",{parentName:"p"},"\u4e24\u4e2a\u5bc6\u94a5\uff1a\u516c\u5f00\u5bc6\u94a5\uff08publickey\uff09\u548c\u79c1\u6709\u5bc6\u94a5\uff0c\u516c\u6709\u5bc6\u94a5\u52a0\u5bc6\uff0c\u79c1\u6709\u5bc6\u94a5\u89e3\u5bc6"),"\u3011"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u89e3\u91ca:")," \u540c\u65f6\u751f\u6210\u4e24\u628a\u5bc6\u94a5\uff1a\u79c1\u94a5\u548c\u516c\u94a5\uff0c\u79c1\u94a5\u9690\u79d8\u4fdd\u5b58\uff0c\u516c\u94a5\u53ef\u4ee5\u4e0b\u53d1\u7ed9\u4fe1\u4efb\u5ba2\u6237\u7aef."),(0,l.kt)("p",null,"\u52a0\u5bc6\u4e0e\u89e3\u5bc6:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u79c1\u94a5\u52a0\u5bc6\uff0c\u6301\u6709\u79c1\u94a5\u6216\u516c\u94a5\u624d\u53ef\u4ee5\u89e3\u5bc6"),(0,l.kt)("li",{parentName:"ul"},"\u516c\u94a5\u52a0\u5bc6\uff0c\u6301\u6709\u79c1\u94a5\u624d\u53ef\u89e3\u5bc6")),(0,l.kt)("p",null,"\u7b7e\u540d:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u79c1\u94a5\u7b7e\u540d, \u6301\u6709\u516c\u94a5\u8fdb\u884c\u9a8c\u8bc1\u662f\u5426\u88ab\u7be1\u6539\u8fc7.")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u4f18\u70b9:")," \u975e\u5bf9\u79f0\u52a0\u5bc6\u4e0e\u5bf9\u79f0\u52a0\u5bc6\u76f8\u6bd4\uff0c\u5176\u5b89\u5168\u6027\u66f4\u597d\uff1b"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u7f3a\u70b9:")," \u975e\u5bf9\u79f0\u52a0\u5bc6\u7684\u7f3a\u70b9\u662f\u52a0\u5bc6\u548c\u89e3\u5bc6\u82b1\u8d39\u65f6\u95f4\u957f\u3001\u901f\u5ea6\u6162\uff0c\u53ea\u9002\u5408\u5bf9\u5c11\u91cf\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\u3002 ",(0,l.kt)("strong",{parentName:"p"},"\u7528\u9014\uff1a")," \u4e00\u822c\u7528\u4e8e\u7b7e\u540d\u548c\u8ba4\u8bc1\u3002\u79c1\u94a5\u670d\u52a1\u5668\u4fdd\u5b58, \u7528\u6765\u52a0\u5bc6, \u516c\u94a5\u5ba2\u6237\u62ff\u7740\u7528\u4e8e\u5bf9\u4e8e\u4ee4\u724c\u6216\u8005\u7b7e\u540d\u7684\u89e3\u5bc6\u6216\u8005\u6821\u9a8c\u4f7f\u7528."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u5e38\u89c1\u7684\u975e\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u6709\uff1a")," ",(0,l.kt)("inlineCode",{parentName:"p"},"RSA\u3001DSA\uff08\u6570\u5b57\u7b7e\u540d\u7528\uff09\u3001ECC\uff08\u79fb\u52a8\u8bbe\u5907\u7528\uff09\u3001RS256 (\u91c7\u7528SHA-256 \u7684 RSA \u7b7e\u540d)")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u62d3\u5c55"),"\uff1alinux \u514d\u5bc6\u767b\u9646\u3002"),(0,l.kt)("h3",{id:"42\u4e0d\u53ef\u9006\u52a0\u5bc6\u7b97\u6cd5"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-2-%E4%B8%8D%E5%8F%AF%E9%80%86%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95"},"#"),"4.2.\u4e0d\u53ef\u9006\u52a0\u5bc6\u7b97\u6cd5"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u89e3\u91ca:")," \u4e00\u65e6\u52a0\u5bc6\u5c31\u4e0d\u80fd\u53cd\u5411\u89e3\u5bc6\u5f97\u5230\u5bc6\u7801\u539f\u6587."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u79cd\u7c7b:")," Hash\u52a0\u5bc6\u7b97\u6cd5, \u6563\u5217\u7b97\u6cd5, \u6458\u8981\u7b97\u6cd5\u7b49"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u7528\u9014\uff1a"),"\u4e00\u822c\u7528\u4e8e\u6548\u9a8c\u4e0b\u8f7d\u6587\u4ef6\u6b63\u786e\u6027\uff0c\u4e00\u822c\u5728\u7f51\u7ad9\u4e0a\u4e0b\u8f7d\u6587\u4ef6\u90fd\u80fd\u89c1\u5230\uff1b\u5b58\u50a8\u7528\u6237\u654f\u611f\u4fe1\u606f\uff0c\u5982\u5bc6\u7801\u3001 \u5361\u53f7\u7b49\u4e0d\u53ef\u89e3\u5bc6\u7684\u4fe1\u606f\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u5e38\u89c1\u7684\u4e0d\u53ef\u9006\u52a0\u5bc6\u7b97\u6cd5\u6709\uff1a")," ",(0,l.kt)("inlineCode",{parentName:"p"},"MD5\u3001SHA\u3001HMAC")),(0,l.kt)("h3",{id:"43base64\u7f16\u7801"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-3-base64%E7%BC%96%E7%A0%81"},"#"),"4.3.Base64\u7f16\u7801"),(0,l.kt)("p",null,"Base64\u662f\u7f51\u7edc\u4e0a\u6700\u5e38\u89c1\u7684\u7528\u4e8e\u4f20\u8f938Bit\u5b57\u8282\u4ee3\u7801\u7684\u7f16\u7801\u65b9\u5f0f\u4e4b\u4e00\u3002Base64\u7f16\u7801\u53ef\u7528\u4e8e\u5728HTTP\u73af\u5883\u4e0b\u4f20\u9012\u8f83\u957f\u7684\u6807\u8bc6\u4fe1\u606f\u3002\u91c7\u7528Base64\u7f16\u7801\u89e3\u7801\u5177\u6709\u4e0d\u53ef\u8bfb\u6027\uff0c\u5373\u6240\u7f16\u7801\u7684\u6570\u636e\u4e0d\u4f1a\u88ab\u4eba\u7528\u8089\u773c\u6240\u76f4\u63a5\u770b\u5230\u3002",(0,l.kt)("strong",{parentName:"p"},"\u6ce8\u610f\uff1aBase64\u53ea\u662f\u4e00\u79cd\u7f16\u7801\u65b9\u5f0f\uff0c\u4e0d\u7b97\u52a0\u5bc6\u65b9\u6cd5\u3002")),(0,l.kt)("p",null,"\u5728\u7ebf\u7f16\u7801\u5de5\u5177\uff1a"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"http://www.jsons.cn/img2base64/"},"http://www.jsons.cn/img2base64/open in new window")),(0,l.kt)("p",null,"\u62d3\u5c55\uff1a\u5b57\u7b26\u7f16\u7801\u76f8\u5173\u77e5\u8bc6\u3002"),(0,l.kt)("h2",{id:"5-jwt-\u5b9e\u73b0\u5fae\u670d\u52a1\u9274\u6743"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-jwt-%E5%AE%9E%E7%8E%B0%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%89%B4%E6%9D%83"},"#"),"5. JWT \u5b9e\u73b0\u5fae\u670d\u52a1\u9274\u6743"),(0,l.kt)("h3",{id:"51-\u4ec0\u4e48\u662f\u5fae\u670d\u52a1\u9274\u6743"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-1-%E4%BB%80%E4%B9%88%E6%98%AF%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%89%B4%E6%9D%83"},"#"),"5.1 \u4ec0\u4e48\u662f\u5fae\u670d\u52a1\u9274\u6743"),(0,l.kt)("p",null,"\u6211\u4eec\u4e4b\u524d\u5df2\u7ecf\u642d\u5efa\u8fc7\u4e86\u7f51\u5173\uff0c\u4f7f\u7528\u7f51\u5173\u5728\u7cfb\u7edf\u4e2d\u6bd4\u8f83\u9002\u5408\u8fdb\u884c\u6743\u9650\u6821\u9a8c\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211019155804648-cf22f74c.png",alt:"image-20211019155804648"}),"image-20211019155804648"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211019160152399-3bf6cb89.png",alt:"image-20211019160152399"}),"image-20211019160152399"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u5355\u70b9\u767b\u5f55"),"\u7684\u7279\u70b9\u662f\uff1a"),(0,l.kt)("p",null,"1\u3001\u8ba4\u8bc1\u7cfb\u7edf\u4e3a\u72ec\u7acb\u7684\u7cfb\u7edf\u3002"),(0,l.kt)("p",null,"2\u3001\u5404\u5b50\u7cfb\u7edf\u901a\u8fc7Http\u6216\u5176\u5b83\u534f\u8bae\u4e0e\u8ba4\u8bc1\u7cfb\u7edf\u901a\u4fe1\uff0c\u5b8c\u6210\u7528\u6237\u8ba4\u8bc1\u3002"),(0,l.kt)("p",null,"3\u3001\u7528\u6237\u8eab\u4efd\u4fe1\u606f\u5b58\u50a8\u5728Redis\u96c6\u7fa4\u3002"),(0,l.kt)("p",null,"Java\u4e2d\u6709\u5f88\u591a\u7528\u6237\u8ba4\u8bc1\u7684\u6846\u67b6\u90fd\u53ef\u4ee5\u5b9e\u73b0\u5355\u70b9\u767b\u5f55\uff1a"),(0,l.kt)("p",null,"1\u3001Apache Shiro."),(0,l.kt)("p",null,"2\u3001CAS"),(0,l.kt)("p",null,"3\u3001Spring security CAS"),(0,l.kt)("h3",{id:"52-jwt"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-2-jwt"},"#"),"5.2 JWT"),(0,l.kt)("p",null,"JSON Web Token\uff08JWT\uff09\u662f\u4e00\u4e2a\u975e\u5e38\u8f7b\u5de7\u7684\u89c4\u8303\u3002\u8fd9\u4e2a\u89c4\u8303\u5141\u8bb8\u6211\u4eec\u4f7f\u7528JWT\u5728\u7528\u6237\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u4f20\u9012\u5b89\u5168\u53ef\u9760\u7684\u4fe1\u606f\u3002"),(0,l.kt)("p",null,"\u4e00\u4e2aJWT\u5b9e\u9645\u4e0a\u5c31\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5b83\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff0c\u5934\u90e8\u3001\u8f7d\u8377\u4e0e\u7b7e\u540d\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u5934\u90e8\uff08Header\uff09")),(0,l.kt)("p",null,"\u5934\u90e8\u7528\u4e8e\u63cf\u8ff0\u5173\u4e8e\u8be5JWT\u7684\u6700\u57fa\u672c\u7684\u4fe1\u606f\uff0c\u4f8b\u5982\u5176\u7c7b\u578b\u4ee5\u53ca\u7b7e\u540d\u6240\u7528\u7684\u7b97\u6cd5\u7b49\u3002\u8fd9\u4e5f\u53ef\u4ee5\u88ab\u8868\u793a\u6210\u4e00\u4e2aJSON\u5bf9\u8c61\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'{"typ":"JWT","alg":"HS256"}\n')),(0,l.kt)("p",null,"\u5728\u5934\u90e8\u6307\u660e\u4e86\u7b7e\u540d\u7b97\u6cd5\u662fHS256\u7b97\u6cd5\u3002 \u6211\u4eec\u8fdb\u884cBASE64\u7f16\u7801",(0,l.kt)("a",{parentName:"p",href:"http://base64.xpcha.com/%EF%BC%8C%E7%BC%96%E7%A0%81%E5%90%8E%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A6%82%E4%B8%8B%EF%BC%9A"},"http://base64.xpcha.com/\uff0c\u7f16\u7801\u540e\u7684\u5b57\u7b26\u4e32\u5982\u4e0b\uff1aopen in new window")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u8f7d\u8377\uff08playload\uff09")),(0,l.kt)("p",null,"\u8f7d\u8377\u5c31\u662f\u5b58\u653e\u6709\u6548\u4fe1\u606f\u7684\u5730\u65b9\u3002"),(0,l.kt)("p",null,"\u5b9a\u4e49\u4e00\u4e2apayload:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'{"sub":"1234567890","name":"itlils","admin":true,"age":18}\n')),(0,l.kt)("p",null,"\u7136\u540e\u5c06\u5176\u8fdb\u884cbase64\u52a0\u5bc6\uff0c\u5f97\u5230Jwt\u7684\u7b2c\u4e8c\u90e8\u5206\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6Iml0bGlscyIsImFkbWluIjp0cnVlLCJhZ2UiOjE4fQ==\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u7b7e\u8bc1\uff08signature\uff09")),(0,l.kt)("p",null,"jwt\u7684\u7b2c\u4e09\u90e8\u5206\u662f\u4e00\u4e2a\u7b7e\u8bc1\u4fe1\u606f\uff0c\u8fd9\u4e2a\u7b7e\u8bc1\u4fe1\u606f\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"header (base64\u540e\u7684)"),(0,l.kt)("p",{parentName:"blockquote"},"payload (base64\u540e\u7684)"),(0,l.kt)("p",{parentName:"blockquote"},"secret")),(0,l.kt)("p",null,"\u8fd9\u4e2a\u90e8\u5206\u9700\u8981base64\u52a0\u5bc6\u540e\u7684header\u548cbase64\u52a0\u5bc6\u540e\u7684payload\u4f7f\u7528.\u8fde\u63a5\u7ec4\u6210\u7684\u5b57\u7b26\u4e32\uff0c\u7136\u540e\u901a\u8fc7header\u4e2d\u58f0\u660e\u7684\u52a0\u5bc6\u65b9\u5f0f\u8fdb\u884c\u52a0\u76d0secret\u7ec4\u5408\u52a0\u5bc6\uff0c\u7136\u540e\u5c31\u6784\u6210\u4e86jwt\u7684\u7b2c\u4e09\u90e8\u5206\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'hs256("eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6Iml0bGlscyIsImFkbWluIjp0cnVlLCJhZ2UiOjE4fQ==",secret)\n')),(0,l.kt)("p",null,"\u5c06\u8fd9\u4e09\u90e8\u5206\u7528.\u8fde\u63a5\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u5b57\u7b26\u4e32,\u6784\u6210\u4e86\u6700\u7ec8\u7684jwt:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"JTdCJTIydHlwJTIyJTNBJTIySldUJTIyJTJDJTIyYWxnJTIyJTNBJTIySFMyNTYlMjIlN0Q=.JTdCJTIyc3ViJTIyJTNBJTIyMTIzNDU2Nzg5MCUyMiUyQyUyMm5hbWUlMjIlM0ElMjJqYWNrJTIyJTJDJTIyYWRtaW4lMjIlM0F0cnVlJTdE.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ\n")),(0,l.kt)("h3",{id:"53-jjwt\u7b7e\u53d1\u4e0e\u9a8c\u8bc1token"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-3-jjwt%E7%AD%BE%E5%8F%91%E4%B8%8E%E9%AA%8C%E8%AF%81token"},"#"),"5.3 JJWT\u7b7e\u53d1\u4e0e\u9a8c\u8bc1token"),(0,l.kt)("p",null,"JJWT\u662f\u4e00\u4e2a\u63d0\u4f9b\u7aef\u5230\u7aef\u7684JWT\u521b\u5efa\u548c\u9a8c\u8bc1\u7684Java\u5e93\u3002\u6c38\u8fdc\u514d\u8d39\u548c\u5f00\u6e90(Apache License\uff0c\u7248\u672c2.0)\uff0cJJWT\u5f88\u5bb9\u6613\u4f7f\u7528\u548c\u7406\u89e3\u3002\u5b83\u88ab\u8bbe\u8ba1\u6210\u4e00\u4e2a\u4ee5\u5efa\u7b51\u4e3a\u4e2d\u5fc3\u7684\u6d41\u7545\u754c\u9762\uff0c\u9690\u85cf\u4e86\u5b83\u7684\u5927\u90e8\u5206\u590d\u6742\u6027\u3002"),(0,l.kt)("p",null,"\u5b98\u65b9\u6587\u6863\uff1a"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/jwtk/jjwt"},"https://github.com/jwtk/jjwtopen in new window")),(0,l.kt)("h4",{id:"531-\u521b\u5efatoken"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-3-1-%E5%88%9B%E5%BB%BAtoken"},"#"),"5.3.1 \u521b\u5efatoken"),(0,l.kt)("p",null,"\uff081\uff09\u65b0\u5efa\u9879\u76eejwtTest\u4e2d\u7684pom.xml\u4e2d\u6dfb\u52a0\u4f9d\u8d56\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n    <groupId>io.jsonwebtoken</groupId>\n    <artifactId>jjwt</artifactId>\n    <version>0.9.0</version>\n</dependency>\n")),(0,l.kt)("p",null,"(2) \u521b\u5efa\u6d4b\u8bd5\u7c7b\uff0c\u4ee3\u7801\u5982\u4e0b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public static void main(String[] args) {    \n//\u83b7\u53d6\u7cfb\u7edf\u7684\u5f53\u524d\u65f6\u95f4\n    long currentTimeMillis = System.currentTimeMillis();\n    Date date = new Date(currentTimeMillis);\n\n    //\u751f\u6210jwt\u4ee4\u724c\n    JwtBuilder jwtBuilder = Jwts.builder()\n            .setId("66")//\u8bbe\u7f6ejwt\u7f16\u7801\n            .setSubject("\u5143\u52a8\u529b\u4e8c\u5962")//\u8bbe\u7f6ejwt\u4e3b\u9898\n            .setIssuedAt(new Date())//\u8bbe\u7f6ejwt\u7b7e\u53d1\u65e5\u671f\n            //.setExpiration(date)//\u8bbe\u7f6ejwt\u7684\u8fc7\u671f\u65f6\u95f4\n            .signWith(SignatureAlgorithm.HS256, "ydlershe");\n\n    //\u751f\u6210jwt\n    String jwtToken = jwtBuilder.compact();\n    System.out.println(jwtToken);\n}\n')),(0,l.kt)("p",null,"\u8fd0\u884c\u6253\u5370\u7ed3\u679c\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiIyNyIsInN1YiI6InlkbGVyc2hlc2hhbmdjaGVuZyIsImlhdCI6MTYzNDYzMjA0N30.ZTrtNXaAQzFIr1MipUTMaprB2xYcvz5_XbNlvN4Adeoxxxxxxxxxx eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiIyNyIsInN1YiI6InlkbGVyc2hlc2hhbmdjaGVuZyIsImlhdCI6MTYzNDYzMjA0N30.ZTrtNXaAQzFIr1MipUTMaprB2xYcvz5_XbNlvN4Adeoey\n")),(0,l.kt)("p",null,"\u518d\u6b21\u8fd0\u884c\uff0c\u4f1a\u53d1\u73b0\u6bcf\u6b21\u8fd0\u884c\u7684\u7ed3\u679c\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u7684\u8f7d\u8377\u4e2d\u5305\u542b\u4e86\u65f6\u95f4\u3002"),(0,l.kt)("p",null,"\u9a8c\u8bc1base64 ",(0,l.kt)("a",{parentName:"p",href:"https://tool.oschina.net/encrypt?type=3"},"https://tool.oschina.net/encrypt?type=3open in new window")),(0,l.kt)("h4",{id:"532-\u89e3\u6790token"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-3-2-%E8%A7%A3%E6%9E%90token"},"#"),"5.3.2 \u89e3\u6790token"),(0,l.kt)("p",null,"\u6211\u4eec\u521a\u624d\u5df2\u7ecf\u521b\u5efa\u4e86token \uff0c\u5728web\u5e94\u7528\u4e2d\u8fd9\u4e2a\u64cd\u4f5c\u662f\u7531\u670d\u52a1\u7aef\u8fdb\u884c\u7136\u540e\u53d1\u7ed9\u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u5728\u4e0b\u6b21\u5411\u670d\u52a1\u7aef\u53d1\u9001\u8bf7\u6c42\u65f6\u9700\u8981\u643a\u5e26\u8fd9\u4e2atoken\uff08\u8fd9\u5c31\u597d\u50cf\u662f\u62ff\u7740\u4e00\u5f20\u95e8\u7968\u4e00\u6837\uff09\uff0c\u90a3\u670d\u52a1\u7aef\u63a5\u5230\u8fd9\u4e2atoken \u5e94\u8be5\u89e3\u6790\u51fatoken\u4e2d\u7684\u4fe1\u606f\uff08\u4f8b\u5982\u7528\u6237id\uff09,\u6839\u636e\u8fd9\u4e9b\u4fe1\u606f\u67e5\u8be2\u6570\u636e\u5e93\u8fd4\u56de\u76f8\u5e94\u7684\u7ed3\u679c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'String compactJwt="eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiIyNyIsInN1YiI6InlkbGVyc2hlc2hhbmdjaGVuZyIsImlhdCI6MTYzNDYzMjMyNn0.orvxPJcAsOquRjcjj947vMmD11QoZn8BuHKSeCEbV8g";\n\nClaims claims = Jwts.parser().setSigningKey("ydlershe").parseClaimsJws(compactJwt).getBody();\n\nSystem.out.println(claims);\n')),(0,l.kt)("p",null,"\u8fd0\u884c\u6253\u5370\u6548\u679c\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"{jti=27, sub=ydlersheshangcheng, iat=1634632326}\n")),(0,l.kt)("p",null,"\u8bd5\u7740\u5c06token\u6216\u7b7e\u540d\u79d8\u94a5\u7be1\u6539\u4e00\u4e0b\uff0c\u4f1a\u53d1\u73b0\u8fd0\u884c\u65f6\u5c31\u4f1a\u62a5\u9519\uff0c\u6240\u4ee5\u89e3\u6790token\u4e5f\u5c31\u662f\u9a8c\u8bc1token."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6ce8\u610f"),"\uff1a\u8bbe\u7f6e\u7b7e\u540dkey\u5fc5\u987b\u548c\u751f\u6210\u65f6\u4e00\u81f4\u3002"),(0,l.kt)("h4",{id:"533-\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-3-3-%E8%AE%BE%E7%BD%AE%E8%BF%87%E6%9C%9F%E6%97%B6%E9%97%B4"},"#"),"5.3.3 \u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4"),(0,l.kt)("p",null,"\u6709\u5f88\u591a\u65f6\u5019\uff0c\u6211\u4eec\u5e76\u4e0d\u5e0c\u671b\u7b7e\u53d1\u7684token\u662f\u6c38\u4e45\u751f\u6548\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4e3atoken\u6dfb\u52a0\u4e00\u4e2a\u8fc7\u671f\u65f6\u95f4\u3002"),(0,l.kt)("p",null,"\uff081\uff09\u521b\u5efatoken \u5e76\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'//\u5f53\u524d\u65f6\u95f4\nlong currentTimeMillis = System.currentTimeMillis();\nDate date = new Date(currentTimeMillis);\nJwtBuilder builder= Jwts.builder()\n    .setId("888")   //\u8bbe\u7f6e\u552f\u4e00\u7f16\u53f7\n    .setSubject("\u5c0f\u767d")//\u8bbe\u7f6e\u4e3b\u9898  \u53ef\u4ee5\u662fJSON\u6570\u636e\n    .setIssuedAt(new Date())//\u8bbe\u7f6e\u7b7e\u53d1\u65e5\u671f\n    .setExpiration(date)\n    .signWith(SignatureAlgorithm.HS256,"ydlershe");//\u8bbe\u7f6e\u7b7e\u540d \u4f7f\u7528HS256\u7b97\u6cd5\uff0c\u5e76\u8bbe\u7f6eSecretKey(\u5b57\u7b26\u4e32)\n//\u6784\u5efa \u5e76\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\nSystem.out.println( builder.compact() );\n')),(0,l.kt)("p",null,"\u89e3\u91ca\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},".setExpiration(date)//\u7528\u4e8e\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4 \uff0c\u53c2\u6570\u4e3aDate\u7c7b\u578b\u6570\u636e\n")),(0,l.kt)("p",null,"\u8fd0\u884c\uff0c\u6253\u5370\u6548\u679c\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiI4ODgiLCJzdWIiOiLlsI_nmb0iLCJpYXQiOjE1NTc5MDUzMDgsImV4cCI6MTU1NzkwNTMwOH0.4q5AaTyBRf8SB9B3Tl-I53PrILGyicJC3fgR3gWbvUI\n")),(0,l.kt)("p",null,"\uff082\uff09\u89e3\u6790TOKEN"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'String compactJwt="eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiI4ODgiLCJzdWIiOiLlsI_nmb0iLCJpYXQiOjE1NTc5MDUzMDgsImV4cCI6MTU1NzkwNTMwOH0.4q5AaTyBRf8SB9B3Tl-I53PrILGyicJC3fgR3gWbvUI";\n\nClaims claims = Jwts.parser().setSigningKey("ydlershe").parseClaimsJws(compactJwt).getBody();\n\nSystem.out.println(claims);\n')),(0,l.kt)("p",null,"\u6253\u5370\u6548\u679c\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211019163701578-8687048e.png",alt:"image-20211019163701578"}),"image-20211019163701578"),(0,l.kt)("p",null,"\u5f53\u524d\u65f6\u95f4\u8d85\u8fc7\u8fc7\u671f\u65f6\u95f4\uff0c\u5219\u4f1a\u62a5\u9519\u3002"),(0,l.kt)("h4",{id:"534-\u81ea\u5b9a\u4e49claims"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-3-4-%E8%87%AA%E5%AE%9A%E4%B9%89claims"},"#"),"5.3.4 \u81ea\u5b9a\u4e49claims"),(0,l.kt)("p",null,"\u6211\u4eec\u521a\u624d\u7684\u4f8b\u5b50\u53ea\u662f\u5b58\u50a8\u4e86id\u548csubject\u4e24\u4e2a\u4fe1\u606f\uff0c\u5982\u679c\u4f60\u60f3\u5b58\u50a8\u66f4\u591a\u7684\u4fe1\u606f\uff08\u4f8b\u5982\u89d2\u8272\uff09\u53ef\u4ee5\u5b9a\u4e49\u81ea\u5b9a\u4e49claims\u3002"),(0,l.kt)("p",null,"\u521b\u5efa\u6d4b\u8bd5\u7c7b\uff0c\u5e76\u8bbe\u7f6e\u6d4b\u8bd5\u65b9\u6cd5\uff1a"),(0,l.kt)("p",null,"\u521b\u5efatoken:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Test\npublic void createJWT(){\n    //\u5f53\u524d\u65f6\u95f4\n    long currentTimeMillis = System.currentTimeMillis();\n    currentTimeMillis+=1000000L;\n    Date date = new Date(currentTimeMillis);\n    JwtBuilder builder= Jwts.builder()\n        .setId("888")   //\u8bbe\u7f6e\u552f\u4e00\u7f16\u53f7\n        .setSubject("\u5c0f\u767d")//\u8bbe\u7f6e\u4e3b\u9898  \u53ef\u4ee5\u662fJSON\u6570\u636e\n        .setIssuedAt(new Date())//\u8bbe\u7f6e\u7b7e\u53d1\u65e5\u671f\n        .setExpiration(date)//\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\n        .claim("roles","admin")//\u8bbe\u7f6e\u89d2\u8272\n        .signWith(SignatureAlgorithm.HS256,"ydlershe");//\u8bbe\u7f6e\u7b7e\u540d \u4f7f\u7528HS256\u7b97\u6cd5\uff0c\u5e76\u8bbe\u7f6eSecretKey(\u5b57\u7b26\u4e32)\n    //\u6784\u5efa \u5e76\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\n    System.out.println( builder.compact() );\n}\n')),(0,l.kt)("p",null,"\u8fd0\u884c\u6253\u5370\u6548\u679c\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiI4ODgiLCJzdWIiOiLlsI_nmb0iLCJpYXQiOjE1NTc5MDU4MDIsImV4cCI6MTU1NzkwNjgwMiwicm9sZXMiOiJhZG1pbiJ9.AS5Y2fNCwUzQQxXh_QQWMpaB75YqfuK-2P7VZiCXEJI\n")),(0,l.kt)("p",null,"\u89e3\u6790TOKEN:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'//\u89e3\u6790\n@Test\npublic void parseJWT(){\n    String compactJwt="eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiI4ODgiLCJzdWIiOiLlsI_nmb0iLCJpYXQiOjE1NTc5MDU4MDIsImV4cCI6MTU1NzkwNjgwMiwicm9sZXMiOiJhZG1pbiJ9.AS5Y2fNCwUzQQxXh_QQWMpaB75YqfuK-2P7VZiCXEJI";\n    Claims claims = Jwts.parser().setSigningKey("ydlershe").parseClaimsJws(compactJwt).getBody();\n    System.out.println(claims);\n}\n')),(0,l.kt)("p",null,"\u8fd0\u884c\u6548\u679c\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211019163914827-628adf98.png",alt:"image-20211019163914827"}),"image-20211019163914827"),(0,l.kt)("h3",{id:"54-\u5143\u52a8\u529b\u4e8c\u5962\u5fae\u670d\u52a1\u9274\u6743\u4ee3\u7801\u5b9e\u73b0-\u91cd\u70b9"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-4-%E5%85%83%E5%8A%A8%E5%8A%9B%E4%BA%8C%E5%A5%A2%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%89%B4%E6%9D%83%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-%E9%87%8D%E7%82%B9"},"#"),"5.4 \u5143\u52a8\u529b\u4e8c\u5962\u5fae\u670d\u52a1\u9274\u6743\u4ee3\u7801\u5b9e\u73b0-\u91cd\u70b9"),(0,l.kt)("h4",{id:"541-\u601d\u8def\u5206\u6790-\u91cd\u70b9\u7406\u89e3"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-4-1-%E6%80%9D%E8%B7%AF%E5%88%86%E6%9E%90-%E9%87%8D%E7%82%B9%E7%90%86%E8%A7%A3"},"#"),"5.4.1 \u601d\u8def\u5206\u6790-\u91cd\u70b9\u7406\u89e3"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211019171251313-1275c4a8.png",alt:"image-20211019171251313"}),"image-20211019171251313"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"1.1 \u7528\u6237\u8fdb\u5165\u7f51\u5173\u5f00\u59cb\u767b\u9646\uff0c\u7f51\u5173\u8fc7\u6ee4\u5668\u8fdb\u884c\u5224\u65ad\uff0c\u5982\u679c\u662f\u767b\u5f55\uff0c\u5219\u8def\u7531\u5230\u540e\u53f0\u7ba1\u7406\u5fae\u670d\u52a1\u8fdb\u884c\u767b\u5f55\n1.2. \u7528\u6237\u767b\u5f55\u6210\u529f\uff0c\u540e\u53f0\u7ba1\u7406\u5fae\u670d\u52a1\u7b7e\u53d1JWT TOKEN\u4fe1\u606f\u8fd4\u56de\u7ed9\u7528\u6237\n2.1 \u7528\u6237\u518d\u6b21\u8fdb\u5165\u7f51\u5173\u5f00\u59cb\u8bbf\u95ee\uff0c\u7f51\u5173\u8fc7\u6ee4\u5668\u63a5\u6536\u7528\u6237\u643a\u5e26\u7684TOKEN \n2.2 \u7f51\u5173\u8fc7\u6ee4\u5668\u89e3\u6790TOKEN \uff0c\u5224\u65ad\u662f\u5426\u6709\u6743\u9650\uff0c\u5982\u679c\u6709\uff0c\u5219\u653e\u884c\uff0c\u5982\u679c\u6ca1\u6709\u5219\u8fd4\u56de\u672a\u8ba4\u8bc1\u9519\u8bef\n")),(0,l.kt)("p",null,"\u4e00\u3001",(0,l.kt)("strong",{parentName:"p"},"\u767b\u9646"),"\uff1a"),(0,l.kt)("p",null,"1\u7528\u6237\u8fdb\u5165\u7f51\u5173\u5f00\u59cb\u767b\u9646\uff0c\u7f51\u5173\u8fc7\u6ee4\u5668\u8fdb\u884c\u5224\u65ad\uff0c\u5982\u679c\u662f\u767b\u5f55\uff0c\u5219\u8def\u7531\u5230\u540e\u53f0\u7ba1\u7406\u5fae\u670d\u52a1\u8fdb \u884c\u767b\u5f55"),(0,l.kt)("p",null,"2\u7528\u6237\u767b\u5f55\u6210\u529f\uff0c\u540e\u53f0\u7ba1\u7406\u5fae\u670d\u52a1\u7b7e\u53d1JWT TOKEN\u4fe1\u606f\u8fd4\u56de\u7ed9\u7528\u6237"),(0,l.kt)("p",null,"\u4e8c\u3001",(0,l.kt)("strong",{parentName:"p"},"\u8bbf\u95ee\u8d44\u6e90"),"\uff1a"),(0,l.kt)("p",null,"1\u7528\u6237\u518d\u6b21\u8fdb\u5165\u7f51\u5173\u5f00\u59cb\u8bbf\u95ee\uff0c\u7f51\u5173\u8fc7\u6ee4\u5668\u63a5\u6536\u7528\u6237\u643a\u5e26\u7684TOKEN"),(0,l.kt)("p",null,"2\u7f51\u5173\u8fc7\u6ee4\u5668\u89e3\u6790TOKEN \uff0c\u5224\u65ad\u662f\u5426\u6709\u6743\u9650\uff0c\u5982\u679c\u6709\uff0c\u5219\u653e\u884c\uff0c\u5982\u679c\u6ca1\u6709\u5219\u8fd4\u56de\u672a\u8ba4\u8bc1\u9519\u8bef"),(0,l.kt)("h4",{id:"542-\u7cfb\u7edf\u5fae\u670d\u52a1\u7b7e\u53d1token"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-4-2-%E7%B3%BB%E7%BB%9F%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%AD%BE%E5%8F%91token"},"#"),"5.4.2 \u7cfb\u7edf\u5fae\u670d\u52a1\u7b7e\u53d1token"),(0,l.kt)("p",null,"\uff081\uff09\u5728ydles_service_system\u6dfb\u52a0\u4f9d\u8d56"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n  <groupId>io.jsonwebtoken</groupId>\n  <artifactId>jjwt</artifactId>\n  <version>0.9.0</version>\n</dependency>\n")),(0,l.kt)("p",null,"\uff082\uff09\u5728ydles_service_system\u4e2d\u7c98\u8d34JwtUtil\u5de5\u5177\u7c7b\u3002\u770b\u61c2\u5373\u53ef\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'package com.ydles.system.util;\nimport io.jsonwebtoken.JwtBuilder;\nimport io.jsonwebtoken.Jwts;\nimport io.jsonwebtoken.SignatureAlgorithm;\nimport javax.crypto.SecretKey;\nimport javax.crypto.spec.SecretKeySpec;\nimport java.util.Base64;\nimport java.util.Date;\n/**\n * JWT\u5de5\u5177\u7c7b\n */\npublic class JwtUtil {\n\n    //\u6709\u6548\u671f\u4e3a\n    public static final Long JWT_TTL = 3600000L;// 60 * 60 *1000  \u4e00\u4e2a\u5c0f\u65f6\n    //\u8bbe\u7f6e\u79d8\u94a5\u660e\u6587\n    public static final String JWT_KEY = "ydlershe";\n\n    /**\n     * \u521b\u5efatoken\n     * @param id\n     * @param subject\n     * @param ttlMillis\n     * @return\n     */\n    public static String createJWT(String id, String subject, Long ttlMillis) {\n\n        SignatureAlgorithm signatureAlgorithm = SignatureAlgorithm.HS256;\n        long nowMillis = System.currentTimeMillis();\n        Date now = new Date(nowMillis);\n        if(ttlMillis==null){\n            ttlMillis=JwtUtil.JWT_TTL;\n        }\n        long expMillis = nowMillis + ttlMillis;\n        Date expDate = new Date(expMillis);\n        SecretKey secretKey = generalKey();\n\n        JwtBuilder builder = Jwts.builder()\n                .setId(id)              //\u552f\u4e00\u7684ID\n                .setSubject(subject)   // \u4e3b\u9898  \u53ef\u4ee5\u662fJSON\u6570\u636e\n                .setIssuer("admin")     // \u7b7e\u53d1\u8005\n                .setIssuedAt(now)      // \u7b7e\u53d1\u65f6\u95f4\n                .signWith(signatureAlgorithm, secretKey) //\u4f7f\u7528HS256\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u7b7e\u540d, \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u79d8\u94a5\n                .setExpiration(expDate);// \u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\n        return builder.compact();\n    }\n\n    /**\n     * \u751f\u6210\u52a0\u5bc6\u540e\u7684\u79d8\u94a5 secretKey\n     * @return\n     */\n    public static SecretKey generalKey() {\n        byte[] encodedKey = Base64.getDecoder().decode(JwtUtil.JWT_KEY);\n        SecretKey key = new SecretKeySpec(encodedKey, 0, encodedKey.length, "AES");\n        return key;\n    }\n}\n')),(0,l.kt)("p",null,"\uff083\uff09\u4fee\u6539AdminController\u7684login\u65b9\u6cd5, \u7528\u6237\u767b\u5f55\u6210\u529f\u5219\u7b7e\u53d1TOKEN"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    /**\n     * \u767b\u5f55\n     * @param admin\n     * @return\n     */\n    @PostMapping("/login")\n    public Result login(@RequestBody Admin admin){\n        boolean login = adminService.login(admin);\n        if(login){  //\u5982\u679c\u9a8c\u8bc1\u6210\u529f\n            Map<String,String> info = new HashMap<>();\n            info.put("username",admin.getLoginName());\n            String token = JwtUtil.createJWT(UUID.randomUUID().toString(), admin.getLoginName(), null);\n            info.put("token",token);\n            return new Result(true, StatusCode.OK,"\u767b\u5f55\u6210\u529f",info);\n        }else{\n            return new Result(false,StatusCode.LOGINERROR,"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef");\n        }\n    }\n')),(0,l.kt)("p",null,"\u4f7f\u7528postman \u6d4b\u8bd5 ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:9101/system/admin/login"},"http://localhost:9101/system/admin/loginopen in new window")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{"loginName":"itlilaoshi","password":"123456"}\n')),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211019172438539-3124e6e0.png",alt:"image-20211019172438539"}),"image-20211019172438539"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211019172548033-ac3b96d2.png",alt:"image-20211019172548033"}),"image-20211019172548033"),(0,l.kt)("h4",{id:"543-\u7f51\u5173\u8fc7\u6ee4\u5668\u9a8c\u8bc1token"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_5-4-3-%E7%BD%91%E5%85%B3%E8%BF%87%E6%BB%A4%E5%99%A8%E9%AA%8C%E8%AF%81token"},"#"),"5.4.3 \u7f51\u5173\u8fc7\u6ee4\u5668\u9a8c\u8bc1token"),(0,l.kt)("p",null,"\uff081\uff09\u5728ydles_gateway_system\u7f51\u5173\u7cfb\u7edf\u6dfb\u52a0\u4f9d\u8d56"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!--\u9274\u6743--\x3e\n<dependency>\n    <groupId>io.jsonwebtoken</groupId>\n    <artifactId>jjwt</artifactId>\n    <version>0.9.0</version>\n</dependency>\n")),(0,l.kt)("p",null,"\uff082\uff09\u5bfc\u5165jwt\u5de5\u5177\u7c7b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'package com.ydles.gateway.util;\nimport io.jsonwebtoken.Claims;\nimport io.jsonwebtoken.Jwts;\nimport javax.crypto.SecretKey;\nimport javax.crypto.spec.SecretKeySpec;\nimport java.util.Base64;\n\n/**\n * jwt\u6821\u9a8c\u5de5\u5177\u7c7b\n */\npublic class JwtUtil {\n\n    //\u6709\u6548\u671f\u4e3a\n    public static final Long JWT_TTL = 3600000L;// 60 * 60 *1000  \u4e00\u4e2a\u5c0f\u65f6\n    //\u8bbe\u7f6e\u79d8\u94a5\u660e\u6587\n    public static final String JWT_KEY = "ydlershe";\n\n    /**\n     * \u751f\u6210\u52a0\u5bc6\u540e\u7684\u79d8\u94a5 secretKey\n     *\n     * @return\n     */\n    public static SecretKey generalKey() {\n        byte[] encodedKey = Base64.getDecoder().decode(JwtUtil.JWT_KEY);\n        SecretKey key = new SecretKeySpec(encodedKey, 0, encodedKey.length, "AES");\n        return key;\n    }\n\n    /**\n     * \u89e3\u6790\n     *\n     * @param jwt\n     * @return\n     * @throws Exception\n     */\n    public static Claims parseJWT(String jwt) throws Exception {\n        SecretKey secretKey = generalKey();\n        return Jwts.parser()\n                .setSigningKey(secretKey)\n                .parseClaimsJws(jwt)\n                .getBody();\n    }\n}\n')),(0,l.kt)("p",null,"\uff083\uff09\u521b\u5efa\u8fc7\u6ee4\u5668\uff0c\u7528\u4e8etoken\u9a8c\u8bc1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'/**\n * \u9274\u6743\u8fc7\u6ee4\u5668 \u9a8c\u8bc1token\n */\n@Component\npublic class AuthorizeFilter implements GlobalFilter, Ordered {\n    private static final String AUTHORIZE_TOKEN = "token";\n\n    @Override\n    public Mono<Void> filter(ServerWebExchange exchange, GatewayFilterChain chain) {\n        //1. \u83b7\u53d6\u8bf7\u6c42\n        ServerHttpRequest request = exchange.getRequest();\n        //2. \u5219\u83b7\u53d6\u54cd\u5e94\n        ServerHttpResponse response = exchange.getResponse();\n        //3. \u5982\u679c\u662f\u767b\u5f55\u8bf7\u6c42\u5219\u653e\u884c\n        if (request.getURI().getPath().contains("/admin/login")) {\n            return chain.filter(exchange);\n        }\n        //4. \u83b7\u53d6\u8bf7\u6c42\u5934\n        HttpHeaders headers = request.getHeaders();\n        //5. \u8bf7\u6c42\u5934\u4e2d\u83b7\u53d6\u4ee4\u724c\n        String token = headers.getFirst(AUTHORIZE_TOKEN);\n\n        //6. \u5224\u65ad\u8bf7\u6c42\u5934\u4e2d\u662f\u5426\u6709\u4ee4\u724c\n        if (StringUtils.isEmpty(token)) {\n            //7. \u54cd\u5e94\u4e2d\u653e\u5165\u8fd4\u56de\u7684\u72b6\u6001\u5417, \u6ca1\u6709\u6743\u9650\u8bbf\u95ee\n            response.setStatusCode(HttpStatus.UNAUTHORIZED);\n            //8. \u8fd4\u56de\n            return response.setComplete();\n        }\n\n        //9. \u5982\u679c\u8bf7\u6c42\u5934\u4e2d\u6709\u4ee4\u724c\u5219\u89e3\u6790\u4ee4\u724c\n        try {\n            JwtUtil.parseJWT(token);\n        } catch (Exception e) {\n            e.printStackTrace();\n            //10. \u89e3\u6790jwt\u4ee4\u724c\u51fa\u9519, \u8bf4\u660e\u4ee4\u724c\u8fc7\u671f\u6216\u8005\u4f2a\u9020\u7b49\u4e0d\u5408\u6cd5\u60c5\u51b5\u51fa\u73b0\n            response.setStatusCode(HttpStatus.UNAUTHORIZED);\n            //11. \u8fd4\u56de\n            return response.setComplete();\n        }\n        //12. \u653e\u884c\n        return chain.filter(exchange);\n    }\n\n    @Override\n    public int getOrder() {\n        return 0;\n    }\n}\n')),(0,l.kt)("p",null,"\uff084\uff09\u6d4b\u8bd5\uff1a"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6ce8\u610f: \u6570\u636e\u5e93\u4e2d\u7ba1\u7406\u5458\u8d26\u6237\u4e3a : itlilaoshi, \u5bc6\u7801\u4e3a : 123456")),(0,l.kt)("p",null,"\u5982\u679c\u4e0d\u643a\u5e26token\u76f4\u63a5\u8bbf\u95ee\uff0c\u5219\u8fd4\u56de401\u9519\u8bef"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211019175512769-d7add392.png",alt:"image-20211019175512769"}),"image-20211019175512769"),(0,l.kt)("p",null,"\u5982\u679c\u643a\u5e26\u6b63\u786e\u7684token\uff0c\u5219\u8fd4\u56de\u67e5\u8be2\u7ed3\u679c"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211019175633553-8c2bf1c6.png",alt:"image-20211019175633553"}),"image-20211019175633553"),(0,l.kt)("p",null,"1\u9996\u5148\u767b\u9646\u62ff\u5230\u4ee4\u724c"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"http://localhost:9101/system/admin/login"},"http://localhost:9101/system/admin/loginopen in new window")),(0,l.kt)("p",null,"2\u8bbf\u95ee\u67d0\u4e2a\u8d44\u6e90"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"http://localhost:9101/system/admin"},"http://localhost:9101/system/adminopen in new window")),(0,l.kt)("p",null,"\u8fd4\u56de401"),(0,l.kt)("p",null,"3header\u4e2d\u5e26\u4e0atoken"),(0,l.kt)("p",null,"\u53ef\u4ee5\u662f\u6b63\u5e38\u8bbf\u95ee"),(0,l.kt)("p",null,"\u603b\u7ed3\uff1a"),(0,l.kt)("p",null,"1\u7f51\u5173 \u8fc7\u6ee4+\u8def\u7531"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211016171720573-14a38cba.png",alt:"image-20211016171720573"}),"image-20211016171720573"),(0,l.kt)("p",null,"2\u7f51\u5173\u9650\u6d41"),(0,l.kt)("p",null,"\u4ee4\u724c\u6876"),(0,l.kt)("p",null,"\u4ee3\u7801\u5b9e\u73b0 reyresolver \u914d\u7f6e\u6d41\u901f\uff0c\u6876\u5927\u5c0f"),(0,l.kt)("p",null,"3\u5bc6\u7801\u52a0\u5bc6"),(0,l.kt)("p",null,"\u5bc6\u7801 \u5b58\u6210\u5bc6\u6587"),(0,l.kt)("p",null,"md5+ \u52a0\u76d0"),(0,l.kt)("p",null,"BCrypt"),(0,l.kt)("p",null,"4\u52a0\u5bc6\u7b97\u6cd5"),(0,l.kt)("p",null," \u53ef\u9006"),(0,l.kt)("p",null," \u5bf9\u79f0\u52a0\u5bc6"),(0,l.kt)("p",null," \u975e\u5bf9\u79f0"),(0,l.kt)("p",null," \u4e0d\u53ef\u9006"),(0,l.kt)("p",null,"5jwt\u5b9e\u73b0\u7f51\u5173\u9274\u6743"),(0,l.kt)("p",null,"jwt base64( head).base64(payload).hs256(\u524d\u4e24\u90e8\u5206,secret)"),(0,l.kt)("p",null,"jjwt \u751f\u6210jwt \u89e3\u6790"),(0,l.kt)("p",null," \u56fe\uff1a\u7f51\u5173\u96c6\u6210\u9274\u6743\u903b\u8f91"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211019171251313-1275c4a8.png",alt:"image-20211019171251313"}),"image-20211019171251313"),(0,l.kt)("h1",{id:"\u7b2c4\u7ae0-\u5546\u54c1\u7ba1\u7406"},(0,l.kt)("a",{parentName:"h1",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#%E7%AC%AC4%E7%AB%A0-%E5%95%86%E5%93%81%E7%AE%A1%E7%90%86"},"#"),"\u7b2c4\u7ae0 \u5546\u54c1\u7ba1\u7406"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u89d2\u8272"),"\uff1a\u5546\u54c1\u7ec4\uff0c\u540e\u7aef\u5f00\u53d1\u3002"),(0,l.kt)("h2",{id:"\u5b66\u4e60\u76ee\u6807-2"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87-2"},"#"),"\u5b66\u4e60\u76ee\u6807"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u80fd\u591f\u4f7f\u7528\u5f00\u6e90\u7b97\u6cd5snowflake\u751f\u6210\u5206\u5e03\u5f0fid"),(0,l.kt)("li",{parentName:"ul"},"\u5b8c\u6210\u65b0\u589e\u548c\u4fee\u6539\u5546\u54c1\u529f\u80fd"),(0,l.kt)("li",{parentName:"ul"},"\u5b8c\u6210\u5546\u54c1\u5ba1\u6838\u548c\u4e0a\u4e0b\u67b6\u529f\u80fd"),(0,l.kt)("li",{parentName:"ul"},"\u5b8c\u6210\u5220\u9664\u4e0e\u8fd8\u539f\u5546\u54c1\u529f\u80fd")),(0,l.kt)("h2",{id:"1-\u5206\u5e03\u5f0fid\u751f\u6210\u89e3\u51b3\u65b9\u6848-\u9762\u8bd5"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-%E5%88%86%E5%B8%83%E5%BC%8Fid%E7%94%9F%E6%88%90%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-%E9%9D%A2%E8%AF%95"},"#"),"1. \u5206\u5e03\u5f0fID\u751f\u6210\u89e3\u51b3\u65b9\u6848-\u9762\u8bd5"),(0,l.kt)("h3",{id:"\u4e3a\u4ec0\u4e48\u751f\u6210\u552f\u4e00id"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#%E4%B8%BA%E4%BB%80%E4%B9%88%E7%94%9F%E6%88%90%E5%94%AF%E4%B8%80id"},"#"),"\u4e3a\u4ec0\u4e48\u751f\u6210\u552f\u4e00ID"),(0,l.kt)("p",null,"\u80cc\u666f\uff1a\u4e92\u8054\u7f51\u591a\u6a21\u5757\u5fae\u670d\u52a1\u60c5\u51b5\u4e0b\uff0c\u9ad8\u5e76\u53d1\u3002"),(0,l.kt)("p",null,"\u7a0b\u5e8f\uff1agoods order"),(0,l.kt)("p",null,"\u6570\u636e\u5e93\uff1agoods order"),(0,l.kt)("p",null,"order\u5fae\u670d\u52a1 100 id 1 id 1"),(0,l.kt)("p",null,"\u91c7\u7528\u5206\u5e93\u5206\u8868\u3002order1\\order2\u7b49\u3002"),(0,l.kt)("p",null,"\u6240\u4ee5\u4e3b\u952e\u7684\u751f\u6210\u6210\u4e3a\u95ee\u9898\u3002"),(0,l.kt)("p",null,"\u6bcf\u4e2a\u6a21\u5757\u5b58\u5165\u6570\u636e\u5e93\u65f6\uff0c\u9700\u8981\u751f\u6210\u552f\u4e00\u7684ID\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211020150542889-e8029396.png",alt:"image-20211020150542889"}),"image-20211020150542889"),(0,l.kt)("h3",{id:"11-\u5206\u5e03\u5f0fid\u751f\u6210\u89e3\u51b3\u65b9\u6848"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-1-%E5%88%86%E5%B8%83%E5%BC%8Fid%E7%94%9F%E6%88%90%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"},"#"),"1.1 \u5206\u5e03\u5f0fID\u751f\u6210\u89e3\u51b3\u65b9\u6848"),(0,l.kt)("h4",{id:"111-uuid"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-1-1-uuid"},"#"),"1.1.1 UUID"),(0,l.kt)("p",null,"\u5e38\u89c1\u7684\u65b9\u5f0f\u3002\u53ef\u4ee5\u5229\u7528\u6570\u636e\u5e93\u4e5f\u53ef\u4ee5\u5229\u7528\u7a0b\u5e8f\u751f\u6210\uff0c\u4e00\u822c\u6765\u8bf4\u5168\u7403\u552f\u4e00\u3002"),(0,l.kt)("p",null,"gateway\u670d\u52a1\u4e0b\u6d4b\u8bd5uuid\u751f\u6210"),(0,l.kt)("p",null,"\u4ee3\u7801\u4f8b\u5b50\uff1aa8fb5e44-f841-49ff-b10b-01d3afb2b238"),(0,l.kt)("p",null,"36*8=288bit"),(0,l.kt)("p",null,"\u4f18\u70b9\uff1a"),(0,l.kt)("p",null,"1\uff09\u7b80\u5355\uff0c\u4ee3\u7801\u65b9\u4fbf\u3002"),(0,l.kt)("p",null,"2\uff09\u751f\u6210ID\u6027\u80fd\u975e\u5e38\u597d\uff0c\u57fa\u672c\u4e0d\u4f1a\u6709\u6027\u80fd\u95ee\u9898\u3002"),(0,l.kt)("p",null,"3\uff09\u5168\u7403\u552f\u4e00\uff0c\u5728\u9047\u89c1\u6570\u636e\u8fc1\u79fb\uff0c\u7cfb\u7edf\u6570\u636e\u5408\u5e76\uff0c\u6216\u8005\u6570\u636e\u5e93\u53d8\u66f4\u7b49\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u4ece\u5bb9\u5e94\u5bf9\u3002"),(0,l.kt)("p",null,"\u7f3a\u70b9\uff1a"),(0,l.kt)("p",null,"1\uff09\u6ca1\u6709\u6392\u5e8f\uff0c\u65e0\u6cd5\u4fdd\u8bc1\u8d8b\u52bf\u9012\u589e\u3002"),(0,l.kt)("p",null,"2\uff09UUID\u5f80\u5f80\u662f\u4f7f\u7528\u5b57\u7b26\u4e32\u5b58\u50a8\uff0c\u67e5\u8be2\u7684\u6548\u7387\u6bd4\u8f83\u4f4e\u3002 id int \u5feb\uff01"),(0,l.kt)("p",null,"3\uff09\u5b58\u50a8\u7a7a\u95f4\u6bd4\u8f83\u5927\uff0c\u5982\u679c\u662f\u6d77\u91cf\u6570\u636e\u5e93\uff0c\u5c31\u9700\u8981\u8003\u8651\u5b58\u50a8\u91cf\u7684\u95ee\u9898\u300232string*8=256bit"),(0,l.kt)("p",null,"4\uff09\u4f20\u8f93\u6570\u636e\u91cf\u5927"),(0,l.kt)("p",null,"5\uff09\u4e0d\u53ef\u8bfb\u3002"),(0,l.kt)("h4",{id:"112-redis"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-1-2-redis"},"#"),"1.1.2 Redis"),(0,l.kt)("p",null,"gateway\u670d\u52a1\u4e0b\u6d4b\u8bd5redis\u9012\u589e"),(0,l.kt)("p",null,'long 1=incr(id")'),(0,l.kt)("p",null,'long 2=incr("id")'),(0,l.kt)("p",null,"\u5f53\u4f7f\u7528\u6570\u636e\u5e93\u6765\u751f\u6210ID\u6027\u80fd\u4e0d\u591f\u8981\u6c42\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528Redis\u6765\u751f\u6210ID\u3002\u8fd9\u4e3b\u8981\u4f9d\u8d56\u4e8eRedis\u662f\u5355\u7ebf\u7a0b\u7684\uff0c\u6240\u4ee5\u4e5f\u53ef\u4ee5\u7528\u751f\u6210\u5168\u5c40\u552f\u4e00\u7684ID\u3002\u53ef\u4ee5\u7528Redis\u7684\u539f\u5b50\u64cd\u4f5c INCR\u548cINCRBY\u6765\u5b9e\u73b0\u3002"),(0,l.kt)("p",null,"\u4f18\u70b9\uff1a"),(0,l.kt)("p",null,"1\uff09\u4e0d\u4f9d\u8d56\u4e8e\u6570\u636e\u5e93\uff0c\u7075\u6d3b\u65b9\u4fbf\uff0c\u4e14\u6027\u80fd\u4f18\u4e8e\u6570\u636e\u5e93\u3002"),(0,l.kt)("p",null,"2\uff09\u6570\u5b57ID\u5929\u7136\u6392\u5e8f\uff0c\u5bf9\u5206\u9875\u6216\u8005\u9700\u8981\u6392\u5e8f\u7684\u7ed3\u679c\u5f88\u6709\u5e2e\u52a9\u3002 id long"),(0,l.kt)("p",null,"\u7f3a\u70b9\uff1a"),(0,l.kt)("p",null,"1\uff09\u5982\u679c\u7cfb\u7edf\u4e2d\u6ca1\u6709Redis\uff0c\u8fd8\u9700\u8981\u5f15\u5165\u65b0\u7684\u7ec4\u4ef6\uff0c\u589e\u52a0\u7cfb\u7edf\u590d\u6742\u5ea6\u3002"),(0,l.kt)("p",null,"2\uff09\u9700\u8981\u7f16\u7801\u548c\u914d\u7f6e\u7684\u5de5\u4f5c\u91cf\u6bd4\u8f83\u5927\u3002"),(0,l.kt)("p",null,"3\uff09\u7f51\u7edc\u4f20\u8f93\u9020\u6210\u6027\u80fd\u4e0b\u964d\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211020153248879-79cf6246.png",alt:"image-20211020153248879"}),"image-20211020153248879"),(0,l.kt)("h4",{id:"113-\u5f00\u6e90\u7b97\u6cd5snowflake"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-1-3-%E5%BC%80%E6%BA%90%E7%AE%97%E6%B3%95snowflake"},"#"),"1.1.3 \u5f00\u6e90\u7b97\u6cd5snowflake"),(0,l.kt)("p",null,"64\u4f4dbit\u6570\u5b57\u3002\u8be6\u60c5\u89c1\u62d3\u5c55\u8d44\u6599\u3002"),(0,l.kt)("p",null,"1000000000000000000000000000000000000000000000000000000000000001"),(0,l.kt)("p",null,"0 1010101010000000 0000100001 0000000001"),(0,l.kt)("p",null,"0 1010101010000000 0000100001 0000000010"),(0,l.kt)("p",null,"0 1010101010000011 0000100001 0000000001 4096"),(0,l.kt)("p",null,"\u540c\u4e00\u6beb\u79d2\u4e0b\u540c\u4e00\u673a\u5668 4096"),(0,l.kt)("p",null,"\u540c\u4e00\u673a\u56681\u79d2 4096000"),(0,l.kt)("p",null,"snowflake\u662fTwitter\u5f00\u6e90\u7684\u5206\u5e03\u5f0fID\u751f\u6210\u7b97\u6cd5\uff0c\u7ed3\u679c\u662f\u4e00\u4e2along\u578b\u7684ID\u3002\u5176\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u4f7f\u752841bit\u4f5c\u4e3a\u6beb\u79d2\u6570\uff0c10bit\u4f5c\u4e3a\u673a\u5668\u7684ID\uff085\u4e2abit\u662f\u6570\u636e\u4e2d\u5fc3\uff0c5\u4e2abit\u7684\u673a\u5668ID\uff09\uff0c12bit\u4f5c\u4e3a\u6beb\u79d2\u5185\u7684\u6d41\u6c34\u53f7\uff08\u610f\u5473\u7740\u6bcf\u4e2a\u8282\u70b9\u5728\u6bcf\u6beb\u79d2\u53ef\u4ee5\u4ea7\u751f 4096 \u4e2a ID\uff09\uff0c\u6700\u540e\u8fd8\u6709\u4e00\u4e2a\u7b26\u53f7\u4f4d\uff0c\u6c38\u8fdc\u662f0"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/4-2-efd67f6b.png",alt:"img"}),"img"),(0,l.kt)("p",null,"\u4f18\u70b9\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6beb\u79d2\u6570\u5728\u9ad8\u4f4d\uff0c\u81ea\u589e\u5e8f\u5217\u5728\u4f4e\u4f4d\uff0c\u6574\u4e2aID\u90fd\u662f\u8d8b\u52bf\u9012\u589e\u7684\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u4f9d\u8d56\u6570\u636e\u5e93\u7b49\u7b2c\u4e09\u65b9\u7cfb\u7edf\uff0c\u4ee5\u670d\u52a1\u7684\u65b9\u5f0f\u90e8\u7f72\uff0c\u7a33\u5b9a\u6027\u66f4\u9ad8\uff0c\u751f\u6210ID\u7684\u6027\u80fd\u4e5f\u662f\u975e\u5e38\u9ad8\u7684\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u6839\u636e\u81ea\u8eab\u4e1a\u52a1\u7279\u6027\u5206\u914dbit\u4f4d\uff0c\u975e\u5e38\u7075\u6d3b\u3002 32\u673a\u623f 32\u53f0goods")),(0,l.kt)("p",null,"\u7f3a\u70b9\uff1a \u5f3a\u4f9d\u8d56\u673a\u5668\u65f6\u949f\uff0c\u5982\u679c\u673a\u5668\u4e0a\u65f6\u949f\u56de\u62e8\uff0c\u4f1a\u5bfc\u81f4\u53d1\u53f7\u91cd\u590d\u6216\u8005\u670d\u52a1\u4f1a\u5904\u4e8e\u4e0d\u53ef\u7528\u72b6\u6001\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u5728\u300a\u5143\u52a8\u529b\u4e8c\u5962\u300b\u7cfb\u7edf\u4e2d\u91c7\u7528\u7684\u5c31\u662f\u5f00\u6e90\u7b97\u6cd5snowflake"),(0,l.kt)("h3",{id:"12-snowflake\u5feb\u901f\u5165\u95e8-\u638c\u63e1"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-2-snowflake%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8-%E6%8E%8C%E6%8F%A1"},"#"),"1.2 snowflake\u5feb\u901f\u5165\u95e8-\u638c\u63e1"),(0,l.kt)("h4",{id:"121-\u5feb\u901f\u5165\u95e8"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-2-1-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"},"#"),"1.2.1 \u5feb\u901f\u5165\u95e8"),(0,l.kt)("p",null,"\uff081\uff09common\u4e0b\u5bfc\u5165IdWorker\u5de5\u5177\u7c7b\uff0c\u65b9\u4fbf\u5176\u4ed6\u6a21\u5757\u8c03\u7528\u3002\uff082\uff09\u7f16\u5199\u4ee3\u7801"),(0,l.kt)("p",null,"\u7136\u540egoods\u5de5\u7a0b\u4e0b\uff0c\u521b\u5efa\u6d4b\u8bd5\u7c7b\u3002"),(0,l.kt)("p",null,"\u89c2\u5bdf\u7279\u6027\uff1a\u552f\u4e00\u6027\u3001\u589e\u957f\u6027"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public static void main(String[] args) {\n        IdWorker idWorker = new IdWorker(1,1);\n        for(int i=0;i<1000;i++){\n        long id = idWorker.nextId();\n        System.out.println(id);\n    }\n}\n")),(0,l.kt)("h4",{id:"122-\u914d\u7f6e\u5206\u5e03\u5f0fid\u751f\u6210\u5668"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-2-2-%E9%85%8D%E7%BD%AE%E5%88%86%E5%B8%83%E5%BC%8Fid%E7%94%9F%E6%88%90%E5%99%A8"},"#"),"1.2.2 \u914d\u7f6e\u5206\u5e03\u5f0fID\u751f\u6210\u5668"),(0,l.kt)("p",null,"\uff081\uff09IdWorker.java\u62f7\u8d1d\u5230ydles_common\u5de5\u7a0bcom.ydles.util\u5305\u4e2d"),(0,l.kt)("p",null,"\uff082\uff09ydles_service_goods\u7684application.yml\u6dfb\u52a0\u914d\u7f6e"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"workerId: 0\ndatacenterId: 0\n")),(0,l.kt)("p",null,"\uff083\uff09\u4fee\u6539GoodsApplication\uff0c\u589e\u52a0\u4ee3\u7801"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    @Value("${workerId}")\n    private Integer workerId;\n\n    @Value("${datacenterId}")\n    private Integer datacenterId;\n\n    @Bean\n    public IdWorker idWorker(){\n        return new IdWorker(workerId,datacenterId);\n    }\n')),(0,l.kt)("h2",{id:"2-\u65b0\u589e\u548c\u4fee\u6539\u5546\u54c1"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-%E6%96%B0%E5%A2%9E%E5%92%8C%E4%BF%AE%E6%94%B9%E5%95%86%E5%93%81"},"#"),"2 \u65b0\u589e\u548c\u4fee\u6539\u5546\u54c1"),(0,l.kt)("h3",{id:"21-\u6982\u5ff5\u4e0e\u8868\u7ed3\u6784\u5206\u6790"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-1-%E6%A6%82%E5%BF%B5%E4%B8%8E%E8%A1%A8%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90"},"#"),"2.1 \u6982\u5ff5\u4e0e\u8868\u7ed3\u6784\u5206\u6790"),(0,l.kt)("h4",{id:"211-spu\u4e0esku\u6982\u5ff5"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-1-1-spu%E4%B8%8Esku%E6%A6%82%E5%BF%B5"},"#"),"2.1.1 SPU\u4e0eSKU\u6982\u5ff5"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"SPU = Standard Product Unit \uff08\u6807\u51c6\u4ea7\u54c1\u5355\u4f4d\uff09")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u6982\u5ff5 : SPU \u662f\u5546\u54c1\u4fe1\u606f\u805a\u5408\u7684\u6700\u5c0f\u5355\u4f4d\uff0c\u662f\u4e00\u7ec4\u53ef\u590d\u7528\u3001\u6613\u68c0\u7d22\u7684\u6807\u51c6\u5316\u4fe1\u606f\u7684\u96c6\u5408\uff0c\u8be5\u96c6\u5408\u63cf\u8ff0\u4e86\u4e00\u4e2a\u4ea7\u54c1\u7684\u7279\u6027\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u901a\u4fd7\u70b9\u8bb2\uff0c\u5c5e\u6027\u503c\u3001\u7279\u6027\u76f8\u540c\u7684\u8d27\u54c1\u5c31\u53ef\u4ee5\u79f0\u4e3a\u4e00\u4e2a SPU"),(0,l.kt)("p",{parentName:"li"},"  \u4f8b\u5982\uff1a",(0,l.kt)("strong",{parentName:"p"},"\u534e\u4e3aP50 \u5c31\u662f\u4e00\u4e2a SPU")),(0,l.kt)("p",{parentName:"li"},"  ",(0,l.kt)("a",{parentName:"p",href:"https://item.jd.com/100024533316.html"},"https://item.jd.com/100024533316.htmlopen in new window")),(0,l.kt)("p",{parentName:"li"},"  ",(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211020111925671-072476dc.png",alt:"image-20211020111925671"}),"image-20211020111925671"))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"SKU=stock keeping unit( \u5e93\u5b58\u91cf\u5355\u4f4d)")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"SKU \u5373\u5e93\u5b58\u8fdb\u51fa\u8ba1\u91cf\u7684\u5355\u4f4d\uff0c \u53ef\u4ee5\u662f\u4ee5\u4ef6\u3001\u76d2\u3001\u6258\u76d8\u7b49\u4e3a\u5355\u4f4d\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"SKU \u662f\u7269\u7406\u4e0a\u4e0d\u53ef\u5206\u5272\u7684\u6700\u5c0f\u5b58\u8d27\u5355\u5143\u3002\u5728\u4f7f\u7528\u65f6\u8981\u6839\u636e\u4e0d\u540c\u4e1a\u6001\uff0c\u4e0d\u540c\u7ba1\u7406\u6a21\u5f0f\u6765\u5904\u7406\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5728\u670d\u88c5\u3001\u978b\u7c7b\u5546\u54c1\u4e2d\u4f7f\u7528\u6700\u591a\u6700\u666e\u904d\u3002"),(0,l.kt)("p",{parentName:"li"},"  \u4f8b\u5982\uff1a",(0,l.kt)("strong",{parentName:"p"},"\u534e\u4e3aP50 \u7ea2\u8272 64G \u5c31\u662f\u4e00\u4e2a SKU")),(0,l.kt)("p",{parentName:"li"},"  \u534e\u4e3aP50 \u7ea2\u8272 8+64G 3000 \u5c31\u662f\u4e00\u4e2a SKU\u3002\u6211\u4eec\u771f\u5b9e\u80fd\u4e70\u5230\u7684\u5177\u6709\u5177\u4f53\u6570\u636e\u7684\u4e00\u4e2a\u7269\u54c1\u3002"),(0,l.kt)("p",{parentName:"li"},"  ",(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20191207110032892-ed8dfc9d.png",alt:"image-20191207110032892"}),"image-20191207110032892"))),(0,l.kt)("h4",{id:"212-\u8868\u7ed3\u6784\u5206\u6790"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-1-2-%E8%A1%A8%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90"},"#"),"2.1.2 \u8868\u7ed3\u6784\u5206\u6790"),(0,l.kt)("p",null,"tb_spu \u8868 \uff08SPU\u8868\uff09"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u540d\u79f0"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u542b\u4e49"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u957f\u5ea6"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5907\u6ce8"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"id"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4e3b\u952e"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"sn"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8d27\u53f7"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"name"),(0,l.kt)("td",{parentName:"tr",align:null},"SPU\u540d"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"caption"),(0,l.kt)("td",{parentName:"tr",align:null},"\u526f\u6807\u9898"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"brand_id"),(0,l.kt)("td",{parentName:"tr",align:null},"\u54c1\u724cID"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"category1_id"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4e00\u7ea7\u5206\u7c7b"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"category2_id"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4e8c\u7ea7\u5206\u7c7b"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"category3_id"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4e09\u7ea7\u5206\u7c7b"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"template_id"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6a21\u677fID"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"freight_id"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8fd0\u8d39\u6a21\u677fid"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"img"),(0,l.kt)("td",{parentName:"tr",align:null},"\u56fe\u7247"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"imgs"),(0,l.kt)("td",{parentName:"tr",align:null},"\u56fe\u7247\u5217\u8868"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"sale_service"),(0,l.kt)("td",{parentName:"tr",align:null},"\u552e\u540e\u670d\u52a1"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"introduction"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4ecb\u7ecd"),(0,l.kt)("td",{parentName:"tr",align:null},"TEXT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"spec_items"),(0,l.kt)("td",{parentName:"tr",align:null},"\u89c4\u683c\u5217\u8868"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"para_items"),(0,l.kt)("td",{parentName:"tr",align:null},"\u53c2\u6570\u5217\u8868"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"sale_num"),(0,l.kt)("td",{parentName:"tr",align:null},"\u9500\u91cf"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"comment_num"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bc4\u8bba\u6570"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"is_marketable"),(0,l.kt)("td",{parentName:"tr",align:null},"\u662f\u5426\u4e0a\u67b6"),(0,l.kt)("td",{parentName:"tr",align:null},"CHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"is_enable_spec"),(0,l.kt)("td",{parentName:"tr",align:null},"\u662f\u5426\u542f\u7528\u89c4\u683c"),(0,l.kt)("td",{parentName:"tr",align:null},"CHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"is_delete"),(0,l.kt)("td",{parentName:"tr",align:null},"\u662f\u5426\u5220\u9664"),(0,l.kt)("td",{parentName:"tr",align:null},"CHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"status"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5ba1\u6838\u72b6\u6001"),(0,l.kt)("td",{parentName:"tr",align:null},"CHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})))),(0,l.kt)("p",null,"tb_sku \u8868\uff08SKU\u5546\u54c1\u8868\uff09"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u540d\u79f0"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u542b\u4e49"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u957f\u5ea6"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5907\u6ce8"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"id"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5546\u54c1id"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"sn"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5546\u54c1\u6761\u7801"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"name"),(0,l.kt)("td",{parentName:"tr",align:null},"SKU\u540d\u79f0"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"price"),(0,l.kt)("td",{parentName:"tr",align:null},"\u4ef7\u683c\uff08\u5206\uff09"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"num"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5e93\u5b58\u6570\u91cf"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"alert_num"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5e93\u5b58\u9884\u8b66\u6570\u91cf"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"img"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5546\u54c1\u56fe\u7247"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"imgs"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5546\u54c1\u56fe\u7247\u5217\u8868"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"weight"),(0,l.kt)("td",{parentName:"tr",align:null},"\u91cd\u91cf\uff08\u514b\uff09"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"create_time"),(0,l.kt)("td",{parentName:"tr",align:null},"\u521b\u5efa\u65f6\u95f4"),(0,l.kt)("td",{parentName:"tr",align:null},"DATETIME"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"update_time"),(0,l.kt)("td",{parentName:"tr",align:null},"\u66f4\u65b0\u65f6\u95f4"),(0,l.kt)("td",{parentName:"tr",align:null},"DATETIME"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"spu_id"),(0,l.kt)("td",{parentName:"tr",align:null},"SPUID"),(0,l.kt)("td",{parentName:"tr",align:null},"BIGINT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"category_id"),(0,l.kt)("td",{parentName:"tr",align:null},"\u7c7b\u76eeID"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"category_name"),(0,l.kt)("td",{parentName:"tr",align:null},"\u7c7b\u76ee\u540d\u79f0"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"brand_name"),(0,l.kt)("td",{parentName:"tr",align:null},"\u54c1\u724c\u540d\u79f0"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"spec"),(0,l.kt)("td",{parentName:"tr",align:null},"\u89c4\u683c"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"sale_num"),(0,l.kt)("td",{parentName:"tr",align:null},"\u9500\u91cf"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"comment_num"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8bc4\u8bba\u6570"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"status"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5546\u54c1\u72b6\u6001 1-\u6b63\u5e38\uff0c2-\u4e0b\u67b6\uff0c3-\u5220\u9664"),(0,l.kt)("td",{parentName:"tr",align:null},"CHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})))),(0,l.kt)("h3",{id:"22-\u5b9e\u73b0\u601d\u8def"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-2-%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"},"#"),"2.2 \u5b9e\u73b0\u601d\u8def"),(0,l.kt)("p",null,"\u524d\u7aef\u4f20\u9012\u7ed9\u540e\u7aef\u7684\u6570\u636e\u683c\u5f0f \u662f\u4e00\u4e2aspu\u5bf9\u8c61\u548csku\u5217\u8868\u7ec4\u6210\u7684\u5bf9\u8c61"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "spu": {\n        "name": "PRADA\u5305\u53052020\u79cb\u5b63\u9650\u91cf\u7248",\n        "caption": "PRADA\u6700\u65b0\u5305\u5305",\n        "brandId": 103,\n        "category1Id": 903,\n        "category2Id": 945,\n        "category3Id": 946,\n        "freightId": 10,\n        "image": "https://img14.360buyimg.com/n1/jfs/t1/181065/5/3216/48663/6098c03fEad0ea4e5/659d59d79f8d0043.jpg",\n        "images": "https://img14.360buyimg.com/n1/jfs/t1/181065/5/3216/48663/6098c03fEad0ea4e5/659d59d79f8d0043.jpg,//img14.360buyimg.com/n1/jfs/t1/198898/26/12864/27744/61655645E38886d5d/a27cd7700b92b5ca.jpg,https://img14.360buyimg.com/n1/jfs/t1/191847/24/2416/44441/6098c03fEfe505a38/b00b22b4e091f1c3.jpg",\n        "introduction": "PRADA\u5305\u53052020\u79cb\u5b63\u9650\u91cf\u7248,\u62a2\u5b8c\u4e3a\u6b62",\n         "paraItems": "{"\u51fa\u5382\u5e74\u4efd":"2020","\u8d60\u54c1":"\u888b\u5b50"}",\n         "saleService": "\u516b\u5929\u5305\u9000,\u95ea\u7535\u9000\u8d27",\n         "sn": "020102331",\n         "specItems":  "{"\u989c\u8272":["\u9ed1","\u84dd"],"\u4e8c\u624b\u7a0b\u5ea6":["\u5d2d\u65b0\u51fa\u5382","\u7565\u6709\u78e8\u635f","\u4e45\u7ecf\u6c99\u573a","\u7834\u635f\u4e0d\u582a","\u6218\u75d5\u7d2f\u7d2f"]}",\n         "templateId": 42\n    },\n    "skuList": [\n    {\n         "sn": "10192010293",\n         "num": 100,\n         "alertNum": 20,\n         "price": 10000,\n         "spec": "{"\u989c\u8272":"\u9ed1","\u4e8c\u624b\u7a0b\u5ea6":"\u5d2d\u65b0\u51fa\u5382"}",\n         "image": "https://img14.360buyimg.com/n1/jfs/t1/181065/5/3216/48663/6098c03fEad0ea4e5/659d59d79f8d0043.jpg",\n         "images": "https://img14.360buyimg.com/n1/jfs/t1/181065/5/3216/48663/6098c03fEad0ea4e5/659d59d79f8d0043.jpg,//img14.360buyimg.com/n1/jfs/t1/198898/26/12864/27744/61655645E38886d5d/a27cd7700b92b5ca.jpg,https://img14.360buyimg.com/n1/jfs/t1/191847/24/2416/44441/6098c03fEfe505a38/b00b22b4e091f1c3.jpg",\n        "status": "1",\n        "weight": 530\n    },{\n        "sn": "10192010292",\n         "num": 100,\n         "alertNum": 20,\n         "price": 8000,\n         "spec": "{"\u989c\u8272":"\u84dd\u8272","\u4e8c\u624b\u7a0b\u5ea6":"\u7565\u6709\u78e8\u635f"}",\n         "image": "https://img14.360buyimg.com/n1/jfs/t1/181065/5/3216/48663/6098c03fEad0ea4e5/659d59d79f8d0043.jpg",\n         "images": "https://img14.360buyimg.com/n1/jfs/t1/181065/5/3216/48663/6098c03fEad0ea4e5/659d59d79f8d0043.jpg,//img14.360buyimg.com/n1/jfs/t1/198898/26/12864/27744/61655645E38886d5d/a27cd7700b92b5ca.jpg,https://img14.360buyimg.com/n1/jfs/t1/191847/24/2416/44441/6098c03fEfe505a38/b00b22b4e091f1c3.jpg",\n        "status": "1",\n        "weight": 530\n    },{\n        "sn": "10192010292",\n         "num": 100,\n         "alertNum": 20,\n         "price": 4000,\n         "spec": "{"\u989c\u8272":"\u7ea2\u8272","\u4e8c\u624b\u7a0b\u5ea6":"\u4e45\u7ecf\u6c99\u573a"}",\n         "image": "https://img14.360buyimg.com/n1/jfs/t1/181065/5/3216/48663/6098c03fEad0ea4e5/659d59d79f8d0043.jpg",\n         "images": "https://img14.360buyimg.com/n1/jfs/t1/181065/5/3216/48663/6098c03fEad0ea4e5/659d59d79f8d0043.jpg,//img14.360buyimg.com/n1/jfs/t1/198898/26/12864/27744/61655645E38886d5d/a27cd7700b92b5ca.jpg,https://img14.360buyimg.com/n1/jfs/t1/191847/24/2416/44441/6098c03fEfe505a38/b00b22b4e091f1c3.jpg",\n        "status": "1",\n        "weight": 530\n    }\n        \n  ]\n}\n')),(0,l.kt)("h3",{id:"23-\u4ee3\u7801\u5b9e\u73b0-\u65e5\u5e38\u5de5\u4f5c"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-3-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-%E6%97%A5%E5%B8%B8%E5%B7%A5%E4%BD%9C"},"#"),"2.3 \u4ee3\u7801\u5b9e\u73b0-\u65e5\u5e38\u5de5\u4f5c"),(0,l.kt)("h4",{id:"231-spu\u4e0esku\u5217\u8868\u7684\u4fdd\u5b58"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-3-1-spu%E4%B8%8Esku%E5%88%97%E8%A1%A8%E7%9A%84%E4%BF%9D%E5%AD%98"},"#"),"2.3.1 SPU\u4e0eSKU\u5217\u8868\u7684\u4fdd\u5b58"),(0,l.kt)("p",null,"\u4ee3\u7801\u5b9e\u73b0\uff1a"),(0,l.kt)("p",null,"\uff081\uff09ydles_service_goods_api\u5de5\u7a0b\u521b\u5efa\u7ec4\u5408\u5b9e\u4f53\u7c7bGoods"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"/**\n * \u5546\u54c1\u7ec4\u5408\u5b9e\u4f53\u7c7b\n */\npublic class Goods implements Serializable {\n\n    private Spu spu;\n    private List<Sku> skuList;\n\n    public Spu getSpu() {\n        return spu;\n    }\n\n    public void setSpu(Spu spu) {\n        this.spu = spu;\n    }\n\n    public List<Sku> getSkuList() {\n        return skuList;\n    }\n\n    public void setSkuList(List<Sku> skuList) {\n        this.skuList = skuList;\n    }\n}\n")),(0,l.kt)("p",null,"\uff082\uff09ydles_service_goods\u5de5\u7a0bSpuService\u65b0\u589e\u65b9\u6cd5add(Goods goods)"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"    /***\n     * \u65b0\u589e\n     * @param goods\n     */\n    void add(Goods goods);\n")),(0,l.kt)("p",null,"\uff083\uff09ydles_service_goods\u5de5\u7a0bSpuServiceImpl\u5b9e\u73b0\u6b64\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    @Autowired\n    private CategoryMapper categoryMapper;\n\n    @Autowired\n    private SkuMapper skuMapper;\n\n    @Autowired\n    private BrandMapper brandMapper;\n\n    @Autowired\n    private IdWorker idWorker;\n\n    /**\n     * \u4fdd\u5b58\u5546\u54c1 SPU+SKU\u5217\u8868\n     * @param goods \u5546\u54c1\u7ec4\u5408\u5b9e\u4f53\u7c7b\n     */\n    @Transactional\n    @Override\n    public void add(Goods goods) {\n        Spu spu = goods.getSpu();\n        long spuId = idWorker.nextId();\n        spu.setId(String.valueOf(spuId));\n        spu.setIsDelete("0");\n        spu.setIsMarketable("0");\n        spu.setStatus("0");\n        spuMapper.insertSelective(spu);\n\n        //\u4fdd\u5b58sku\u96c6\u5408\u6570\u636e\u5230\u6570\u636e\u5e93\n        saveSkuList(goods);\n    }\n\n    /**\n     * \u4fdd\u5b58sku\u5217\u8868\n     * @param goods\n     */\n    private void saveSkuList(Goods goods){\n        //\u83b7\u53d6spu\u5bf9\u8c61\n        Spu spu = goods.getSpu();\n        //\u5f53\u524d\u65e5\u671f\n        Date date = new Date();\n        //\u83b7\u53d6\u54c1\u724c\u5bf9\u8c61\n        Brand brand = brandMapper.selectByPrimaryKey(spu.getBrandId());\n        //\u83b7\u53d6\u5206\u7c7b\u5bf9\u8c61\n        Category category = categoryMapper.selectByPrimaryKey(spu.getCategory3Id());\n        //\u83b7\u53d6sku\u96c6\u5408\u5bf9\u8c61\n        List<Sku> skuList = goods.getSkuList();\n        if (skuList != null) {\n            for (Sku sku : skuList) {\n                //\u8bbe\u7f6esku\u4e3b\u952eID\n                sku.setId(String.valueOf(idWorker.nextId()));\n                //\u8bbe\u7f6esku\u89c4\u683c\n                if (sku.getSpec() == null || "".equals(sku.getSpec())) {\n                    sku.setSpec("{}");\n                }\n                //\u8bbe\u7f6esku\u540d\u79f0(\u5546\u54c1\u540d\u79f0 + \u89c4\u683c)\n                String name = spu.getName();\n                //\u5c06\u89c4\u683cjson\u5b57\u7b26\u4e32\u8f6c\u6362\u6210Map\n                Map<String, String> specMap = JSON.parseObject(sku.getSpec(), Map.class);\n                if (specMap != null && specMap.size() > 0) {\n                    for(String value : specMap.values()){\n                        name += " "+ value;\n                    }\n                }\n\n                sku.setName(name);//\u540d\u79f0\n                sku.setSpuId(spu.getId());//\u8bbe\u7f6espu\u7684ID\n                sku.setCreateTime(date);//\u521b\u5efa\u65e5\u671f\n                sku.setUpdateTime(date);//\u4fee\u6539\u65e5\u671f\n                sku.setCategoryId(category.getId());//\u5546\u54c1\u5206\u7c7bID\n                sku.setCategoryName(category.getName());//\u5546\u54c1\u5206\u7c7b\u540d\u79f0\n                sku.setBrandName(brand.getName());//\u54c1\u724c\u540d\u79f0\n                skuMapper.insertSelective(sku);//\u63d2\u5165sku\u8868\u6570\u636e\n            }\n        }\n    }\n')),(0,l.kt)("p",null,"\uff083\uff09\u4fee\u6539SpuController\u7684add\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    /***\n     * \u65b0\u589e\u6570\u636e\n     * @param goods\n     * @return\n     */\n    @PostMapping\n    public Result add(@RequestBody Goods goods){\n        spuService.add(goods);\n        return new Result(true,StatusCode.OK,"\u6dfb\u52a0\u6210\u529f");\n    }\n')),(0,l.kt)("h4",{id:"232-\u54c1\u724c\u4e0e\u5206\u7c7b\u5173\u8054"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-3-2-%E5%93%81%E7%89%8C%E4%B8%8E%E5%88%86%E7%B1%BB%E5%85%B3%E8%81%94"},"#"),"2.3.2 \u54c1\u724c\u4e0e\u5206\u7c7b\u5173\u8054"),(0,l.kt)("p",null,"\u5b9e\u73b0\u601d\u8def\uff1a"),(0,l.kt)("p",null,"\u5c06\u5206\u7c7bID\u4e0eSPU\u7684\u54c1\u724cID \u4e00\u8d77\u63d2\u5165\u5230tb_category_brand\u8868\u4e2d"),(0,l.kt)("p",null,"\uff081\uff09\u521b\u5efa\u5b9e\u4f53\u7c7b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Table(name="tb_category_brand")\npublic class CategoryBrand implements Serializable {\n\n    @Id\n    private Integer categoryId;\n\n    @Id\n    private Integer brandId;\n\n\n    public Integer getCategoryId() {\n        return categoryId;\n    }\n\n    public void setCategoryId(Integer categoryId) {\n        this.categoryId = categoryId;\n    }\n\n    public Integer getBrandId() {\n        return brandId;\n    }\n\n    public void setBrandId(Integer brandId) {\n        this.brandId = brandId;\n    }\n}\n')),(0,l.kt)("p",null,"\u8fd9\u4e2a\u8868\u662f\u8054\u5408\u4e3b\u952e\uff0c\u6240\u4ee5templateId\u548cbrandId\u90fd\u6709@Id\u6ce8\u89e3"),(0,l.kt)("p",null,"\uff082\uff09\u65b0\u5efa\u6570\u636e\u8bbf\u95ee\u63a5\u53e3"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public interface CategoryBrandMapper extends Mapper<CategoryBrand> {\n}\n")),(0,l.kt)("p",null,"\uff083\uff09SpuServiceImpl\u5f15\u5165"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"    @Autowired\n    private CategoryBrandMapper categoryBrandMapper;\n")),(0,l.kt)("p",null,"\uff084\uff09\u4fee\u6539SpuServiceImpl\u7684saveSkuList\u65b9\u6cd5\uff0c\u6dfb\u52a0\u5206\u7c7b\u4e0e\u54c1\u724c\u4e4b\u95f4\u7684\u5173\u8054, \u4fee\u6539\u540e\u4ee3\u7801\u5982\u4e0b:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'private void saveSkuList(Goods goods) {\n        //\u83b7\u53d6spu\u5bf9\u8c61\n        Spu spu = goods.getSpu();\n        //\u5f53\u524d\u65e5\u671f\n        Date date = new Date();\n        //\u83b7\u53d6\u54c1\u724c\u5bf9\u8c61\n        Brand brand = brandMapper.selectByPrimaryKey(spu.getBrandId());\n        //\u83b7\u53d6\u5206\u7c7b\u5bf9\u8c61\n        Category category = categoryMapper.selectByPrimaryKey(spu.getCategory3Id());\n\n        /**\n         * \u6dfb\u52a0\u5206\u7c7b\u4e0e\u54c1\u724c\u4e4b\u95f4\u7684\u5173\u8054\n         */\n        CategoryBrand categoryBrand = new CategoryBrand();\n        categoryBrand.setBrandId(spu.getBrandId());\n        categoryBrand.setCategoryId(spu.getCategory3Id());\n        int count = categoryBrandMapper.selectCount(categoryBrand);\n        //\u5224\u65ad\u662f\u5426\u6709\u8fd9\u4e2a\u54c1\u724c\u548c\u5206\u7c7b\u7684\u5173\u7cfb\u6570\u636e\n        if(count == 0) {\n            //\u5982\u679c\u6ca1\u6709\u5173\u7cfb\u6570\u636e\u5219\u6dfb\u52a0\u54c1\u724c\u548c\u5206\u7c7b\u5173\u7cfb\u6570\u636e\n            categoryBrandMapper.insert(categoryBrand);\n        }\n\n        //\u83b7\u53d6sku\u96c6\u5408\u5bf9\u8c61\n        List<Sku> skuList = goods.getSkuList();\n        if (skuList != null) {\n            for (Sku sku : skuList) {\n                //\u8bbe\u7f6esku\u4e3b\u952eID\n                sku.setId(String.valueOf(idWorker.nextId()));\n                //\u8bbe\u7f6esku\u89c4\u683c\n                if (sku.getSpec() == null || "".equals(sku.getSpec())) {\n                    sku.setSpec("{}");\n                }\n                //\u8bbe\u7f6esku\u540d\u79f0(\u5546\u54c1\u540d\u79f0 + \u89c4\u683c)\n                String name = spu.getName();\n                //\u5c06\u89c4\u683cjson\u5b57\u7b26\u4e32\u8f6c\u6362\u6210Map\n                Map<String, String> specMap = JSON.parseObject(sku.getSpec(), Map.class);\n                if (specMap != null && specMap.size() > 0) {\n                    for(String value : specMap.values()){\n                        name += " "+ value;\n                    }\n                }\n\n                sku.setName(name);//\u540d\u79f0\n                sku.setSpuId(spu.getId());//\u8bbe\u7f6espu\u7684ID\n                sku.setCreateTime(date);//\u521b\u5efa\u65e5\u671f\n                sku.setUpdateTime(date);//\u4fee\u6539\u65e5\u671f\n                sku.setCategoryId(category.getId());//\u5546\u54c1\u5206\u7c7bID\n                sku.setCategoryName(category.getName());//\u5546\u54c1\u5206\u7c7b\u540d\u79f0\n                sku.setBrandName(brand.getName());//\u54c1\u724c\u540d\u79f0\n                skuMapper.insertSelective(sku);//\u63d2\u5165sku\u8868\u6570\u636e\n            }\n        }\n    }\n')),(0,l.kt)("h4",{id:"233-\u6839\u636eid\u67e5\u8be2\u5546\u54c1"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-3-3-%E6%A0%B9%E6%8D%AEid%E6%9F%A5%E8%AF%A2%E5%95%86%E5%93%81"},"#"),"2.3.3 \u6839\u636eID\u67e5\u8be2\u5546\u54c1"),(0,l.kt)("p",null,"\u9700\u6c42\uff1a\u6839\u636eid \u67e5\u8be2SPU\u548cSKU\u5217\u8868 \uff0c\u663e\u793a\u6548\u679c\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'{\n    "spu": {\n        "id":"12312312312"\n        "name": "PRADA\u5305\u53052021\u79cb\u5b63\u9650\u91cf\u7248",\n        "caption": "PRADA\u6700\u65b0\u5305\u5305",\n        "brandId": 103,\n        "category1Id": 903,\n        "category2Id": 945,\n        "category3Id": 946,\n        "freightId": 10,\n        "img": "https://img14.360buyimg.com/n1/jfs/t1/181065/5/3216/48663/6098c03fEad0ea4e5/659d59d79f8d0043.jpg",\n        "imgs": "https://img14.360buyimg.com/n1/jfs/t1/181065/5/3216/48663/6098c03fEad0ea4e5/659d59d79f8d0043.jpg,//img14.360buyimg.com/n1/jfs/t1/198898/26/12864/27744/61655645E38886d5d/a27cd7700b92b5ca.jpg,https://img14.360buyimg.com/n1/jfs/t1/191847/24/2416/44441/6098c03fEfe505a38/b00b22b4e091f1c3.jpg",\n        "introduction": "\u5546\u54c1\u4ecb\u7ecd",\n         "paraItems": "{"\u51fa\u5382\u5e74\u4efd":"2020","\u8d60\u54c1":"\u888b\u5b50"}",\n         "saleService": "\u4e03\u5929\u5305\u9000,\u95ea\u7535\u9000\u8d27",\n         "sn": "020102331",\n         "specItems":  "{"\u989c\u8272":["\u9ed1","\u84dd"],"\u4e8c\u624b\u7a0b\u5ea6":["\u5d2d\u65b0\u51fa\u5382","\u7565\u6709\u78e8\u635f","\u4e45\u7ecf\u6c99\u573a","\u7834\u635f\u4e0d\u582a","\u6218\u75d5\u7d2f\u7d2f"]}",\n         "templateId": 42\n    },\n    "skuList": [\n    {\n         "sn": "10192010293",\n         "num": 100,\n         "alertNum": 20,\n         "price": 10000,\n         "spec": "{"\u989c\u8272":"\u9ed1","\u4e8c\u624b\u7a0b\u5ea6":"\u5d2d\u65b0\u51fa\u5382"}",\n         "img": "https://img14.360buyimg.com/n1/jfs/t1/181065/5/3216/48663/6098c03fEad0ea4e5/659d59d79f8d0043.jpg",\n         "imgs": "https://img14.360buyimg.com/n1/jfs/t1/181065/5/3216/48663/6098c03fEad0ea4e5/659d59d79f8d0043.jpg,//img14.360buyimg.com/n1/jfs/t1/198898/26/12864/27744/61655645E38886d5d/a27cd7700b92b5ca.jpg,https://img14.360buyimg.com/n1/jfs/t1/191847/24/2416/44441/6098c03fEfe505a38/b00b22b4e091f1c3.jpg",\n        "status": "1",\n        "weight": 530\n    },\n        {\n        "sn": "10192010292",\n         "num": 100,\n         "alertNum": 20,\n         "price": 5000,\n         "spec": "{"\u989c\u8272":"\u9ed1","\u4e8c\u624b\u7a0b\u5ea6":"\u6218\u75d5\u7d2f\u7d2f"}",\n         "img": "https://img14.360buyimg.com/n1/jfs/t1/181065/5/3216/48663/6098c03fEad0ea4e5/659d59d79f8d0043.jpg",\n         "imgs": "https://img14.360buyimg.com/n1/jfs/t1/181065/5/3216/48663/6098c03fEad0ea4e5/659d59d79f8d0043.jpg,//img14.360buyimg.com/n1/jfs/t1/198898/26/12864/27744/61655645E38886d5d/a27cd7700b92b5ca.jpg,https://img14.360buyimg.com/n1/jfs/t1/191847/24/2416/44441/6098c03fEfe505a38/b00b22b4e091f1c3.jpg",\n        "status": "1",\n        "weight": 530\n    },\n  ]\n}\n')),(0,l.kt)("p",null,"\u4ee3\u7801\u5b9e\u73b0\uff1a"),(0,l.kt)("p",null,"\uff081\uff09ydles_service_goods\u5de5\u7a0bSpuService\u65b0\u589e\u65b9\u6cd5\u5b9a\u4e49"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"    /**\n     * \u6839\u636eID\u67e5\u8be2\u5546\u54c1\n     * @param id\n     * @return\n     */\n    public Goods findGoodsById(String id);\n")),(0,l.kt)("p",null,"\uff082\uff09ydles_service_goods\u5de5\u7a0bSpuServiceImpl\u5b9e\u73b0\u6b64\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    /**\n     * \u6839\u636eID\u67e5\u8be2\u5546\u54c1\n     * @param id\n     * @return\n     */\n    public Goods findGoodsById(String id){\n        //\u67e5\u8be2spu\n        Spu spu = spuMapper.selectByPrimaryKey(id);\n\n        //\u67e5\u8be2SKU \u5217\u8868\n        Example example=new Example(Sku.class);\n        Example.Criteria criteria = example.createCriteria();\n        criteria.andEqualTo("spuId",id);\n        List<Sku> skuList = skuMapper.selectByExample(example);\n\n        //\u5c01\u88c5\uff0c\u8fd4\u56de\n        Goods goods=new Goods();\n        goods.setSpu(spu);\n        goods.setSkuList(skuList);\n        return goods;\n    }\n')),(0,l.kt)("p",null,"\uff083\uff09\u4fee\u6539SpuController\u7684findById\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    @GetMapping("/{id}")\n    public Result findById(@PathVariable String id){\n        Goods goods = spuService.findGoodsById(id);\n        return new Result(true,StatusCode.OK,"\u67e5\u8be2\u6210\u529f",goods);\n    }\n')),(0,l.kt)("h4",{id:"234-\u4fdd\u5b58\u4fee\u6539"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-3-4-%E4%BF%9D%E5%AD%98%E4%BF%AE%E6%94%B9"},"#"),"2.3.4 \u4fdd\u5b58\u4fee\u6539"),(0,l.kt)("p",null,"\uff081\uff09ydles_service_goods\u5de5\u7a0bSpuService\u65b0\u589e\u65b9\u6cd5\u5b9a\u4e49"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"    /***\n     * \u4fee\u6539\u6570\u636e\n     * @param spu\n     */\n    void update(Goods goods);\n")),(0,l.kt)("p",null,"\uff082\uff09ydles_service_goods\u5de5\u7a0bSpuServiceImpl\u5b9e\u73b0\u6b64\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    @Override\n    public void update(Goods goods ) {\n        //\u53d6\u51faspu\u90e8\u5206\n        Spu spu = goods.getSpu();\n        spuMapper.updateByPrimaryKey(spu);\n        //\u5220\u9664\u539fsku\u5217\u8868\n        Example example=new Example(Sku.class);\n        Example.Criteria criteria = example.createCriteria();\n        criteria.andEqualTo("spuId",spu.getId());\n        skuMapper.deleteByExample(example);\n\n        saveSkuList(goods);//\u4fdd\u5b58sku\u5217\u8868\n    }\n')),(0,l.kt)("p",null,"\uff083\uff09\u4fee\u6539SpuController\u7684update\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    /***\n     * \u4fee\u6539\u6570\u636e\n     * @param goods\n     * @param id\n     * @return\n     */\n    @PutMapping(value="/{id}")\n    public Result update(@RequestBody Goods goods,@PathVariable String id){\n        spuService.update(goods);\n        return new Result(true,StatusCode.OK,"\u4fee\u6539\u6210\u529f");\n    }\n')),(0,l.kt)("h2",{id:"3-\u5546\u54c1\u5ba1\u6838\u4e0e\u4e0a\u4e0b\u67b6-\u65e5\u5e38\u5de5\u4f5c"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-%E5%95%86%E5%93%81%E5%AE%A1%E6%A0%B8%E4%B8%8E%E4%B8%8A%E4%B8%8B%E6%9E%B6-%E6%97%A5%E5%B8%B8%E5%B7%A5%E4%BD%9C"},"#"),"3 \u5546\u54c1\u5ba1\u6838\u4e0e\u4e0a\u4e0b\u67b6-\u65e5\u5e38\u5de5\u4f5c"),(0,l.kt)("h3",{id:"31-\u9700\u6c42\u5206\u6790"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"},"#"),"3.1 \u9700\u6c42\u5206\u6790"),(0,l.kt)("p",null,"\u5546\u54c1\u6307spu"),(0,l.kt)("p",null," 1\u5546\u54c1\u65b0\u589e\u540e\uff0c\u5ba1\u6838\u72b6\u6001\u4e3a0\uff08\u672a\u5ba1\u6838\uff09\uff0c\u9ed8\u8ba4\u4e3a\u4e0b\u67b6\u72b6\u6001\u3002"),(0,l.kt)("p",null," 2\u5ba1\u6838\u5546\u54c1\uff0c\u9700\u8981\u6821\u9a8c\u662f\u5426\u662f\u88ab\u5220\u9664\u7684\u5546\u54c1\uff0c\u5982\u679c\u672a\u5220\u9664\u5219\u4fee\u6539\u5ba1\u6838\u72b6\u6001\u4e3a1\uff0c\u5e76\u81ea\u52a8\u4e0a\u67b6\u3002"),(0,l.kt)("p",null," 3\u4e0b\u67b6\u5546\u54c1\uff0c\u9700\u8981\u6821\u9a8c\u662f\u5426\u662f\u88ab\u5220\u9664\u7684\u5546\u54c1\uff0c\u5982\u679c\u672a\u5220\u9664\u5219\u4fee\u6539\u4e0a\u67b6\u72b6\u6001\u4e3a0"),(0,l.kt)("p",null," 4\u4e0a\u67b6\u5546\u54c1\uff0c\u9700\u8981\u5ba1\u6838\u72b6\u6001\u4e3a1,\u5982\u679c\u4e3a1,\u5219\u66f4\u6539\u4e0a\u4e0b\u67b6\u72b6\u6001\u4e3a1"),(0,l.kt)("h3",{id:"32-\u5b9e\u73b0\u601d\u8def"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-2-%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"},"#"),"3.2 \u5b9e\u73b0\u601d\u8def"),(0,l.kt)("p",null,"\uff081\uff09\u6309\u7167ID\u67e5\u8be2SPU\u4fe1\u606f"),(0,l.kt)("p",null,"\uff082\uff09\u5224\u65ad\u4fee\u6539\u5ba1\u6838\u3001\u4e0a\u67b6\u4e0b\u67b6\u72b6\u6001"),(0,l.kt)("p",null,"\uff083\uff09\u4fdd\u5b58SPU"),(0,l.kt)("h3",{id:"33-\u4ee3\u7801\u5b9e\u73b0"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-3-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"},"#"),"3.3 \u4ee3\u7801\u5b9e\u73b0"),(0,l.kt)("h4",{id:"331-\u5546\u54c1\u5ba1\u6838"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-3-1-%E5%95%86%E5%93%81%E5%AE%A1%E6%A0%B8"},"#"),"3.3.1 \u5546\u54c1\u5ba1\u6838"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u9700\u6c42"),"\uff1a\u6821\u9a8c\u662f\u5426\u662f\u88ab\u5220\u9664\u7684\u5546\u54c1\uff0c\u5982\u679c\u672a\u5220\u9664\u5219\u4fee\u6539\u5ba1\u6838\u72b6\u6001\u4e3a1\uff0c\u5e76\u81ea\u52a8\u4e0a\u67b6"),(0,l.kt)("p",null,"/audit/"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u56de\u987e"),"\uff0cupdateByPrimaryKey\u4e0eupdateByPrimaryKeySelective\u533a\u522b\u3002"),(0,l.kt)("p",null,"\uff081\uff09SpuService\u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"    /**\n     * \u5ba1\u6838\n     * @param id\n     */\n    public void audit(String id);\n")),(0,l.kt)("p",null,"\uff082\uff09SpuServiceImpl\u5b9e\u73b0\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    @Transactional\n    public void audit(String id) {\n        //\u67e5\u8be2spu\u5bf9\u8c61\n        Spu spu = spuMapper.selectByPrimaryKey(id);\n        if (spu == null){\n            throw new RuntimeException("\u5f53\u524d\u5546\u54c1\u4e0d\u5b58\u5728");\n        }\n        //\u5224\u65ad\u5f53\u524dspu\u662f\u5426\u5904\u4e8e\u5220\u9664\u72b6\u6001\n        if ("1".equals(spu.getIsDelete())){\n            throw new RuntimeException("\u5f53\u524d\u5546\u54c1\u5904\u4e8e\u5220\u9664\u72b6\u6001");\n        }\n        //\u4e0d\u5904\u4e8e\u5220\u9664\u72b6\u6001,\u4fee\u6539\u5ba1\u6838\u72b6\u6001\u4e3a1,\u4e0a\u4e0b\u67b6\u72b6\u6001\u4e3a1\n        spu.setStatus("1");\n        spu.setIsMarketable("1");\n        //\u6267\u884c\u4fee\u6539\u64cd\u4f5c\n        spuMapper.updateByPrimaryKeySelective(spu);\n    }\n')),(0,l.kt)("p",null,"\uff082\uff09SpuController\u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    /**\n     * \u5ba1\u6838\n     * @param id\n     * @return\n     */\n    @PutMapping("/audit/{id}")\n    public Result audit(@PathVariable String id){\n        spuService.audit(id);\n        return new Result();\n    }\n')),(0,l.kt)("p",null,"\u6d4b\u8bd5"),(0,l.kt)("h4",{id:"332-\u4e0b\u67b6\u5546\u54c1"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-3-2-%E4%B8%8B%E6%9E%B6%E5%95%86%E5%93%81"},"#"),"3.3.2 \u4e0b\u67b6\u5546\u54c1"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u9700\u6c42"),"\uff1a\u6821\u9a8c\u662f\u5426\u662f\u88ab\u5220\u9664\u7684\u5546\u54c1\uff0c\u5982\u679c\u672a\u5220\u9664\u5219\u4fee\u6539\u4e0a\u67b6\u72b6\u6001\u4e3a0"),(0,l.kt)("p",null,"/pull/"),(0,l.kt)("p",null,"\uff081\uff09SpuService\u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"    /**\n     * \u4e0b\u67b6\u5546\u54c1\n     * @param id\n     */\n    public void pull(String id);\n")),(0,l.kt)("p",null,"\uff082\uff09SpuServiceImpl\u5b9e\u73b0\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Transactional\n    public void pull(String id) {\n        //\u67e5\u8be2spu\n        Spu spu = spuMapper.selectByPrimaryKey(id);\n        if (spu == null){\n            throw new RuntimeException("\u5f53\u524d\u5546\u54c1\u4e0d\u5b58\u5728");\n        }\n        //\u5224\u65ad\u5f53\u524d\u5546\u54c1\u662f\u5426\u5904\u4e8e\u5220\u9664\u72b6\u6001\n        if ("1".equals(spu.getIsDelete())){\n            throw new RuntimeException("\u5f53\u524d\u5546\u54c1\u5904\u4e8e\u5220\u9664\u72b6\u6001");\n        }\n        //\u5546\u54c1\u5904\u4e8e\u672a\u5220\u9664\u72b6\u6001\u7684\u8bdd,\u5219\u4fee\u6539\u4e0a\u4e0b\u67b6\u72b6\u6001\u4e3a\u5df2\u4e0b\u67b6(0)\n        spu.setIsMarketable("0");\n        spuMapper.updateByPrimaryKeySelective(spu);\n    }\n')),(0,l.kt)("p",null,"\uff082\uff09SpuController\u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    /**\n     * \u4e0b\u67b6\n     * @param id\n     * @return\n     */\n    @PutMapping("/pull/{id}")\n    public Result pull(@PathVariable String id){\n        spuService.pull(id);\n        return new Result();\n    }\n')),(0,l.kt)("p",null,"\u6d4b\u8bd5"),(0,l.kt)("h4",{id:"333-\u4e0a\u67b6\u5546\u54c1"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-3-3-%E4%B8%8A%E6%9E%B6%E5%95%86%E5%93%81"},"#"),"3.3.3 \u4e0a\u67b6\u5546\u54c1"),(0,l.kt)("p",null,"\u9700\u6c42\uff1a\u5fc5\u987b\u662f\u901a\u8fc7\u5ba1\u6838\u7684\u5546\u54c1\u624d\u80fd\u4e0a\u67b6"),(0,l.kt)("p",null,"/put/"),(0,l.kt)("p",null,"\uff081\uff09SpuService\u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"    /**\n     * \u4e0a\u67b6\u5546\u54c1\n     * @param id\n     */\n    public void put(String id);\n")),(0,l.kt)("p",null,"\uff082\uff09SpuServiceImpl \u5b9e\u73b0\u6b64\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    /**\n     * \u4e0a\u67b6\u5546\u54c1\n     * @param id\n     */\n    @Override\n    public void put(String id) {\n        Spu spu = spuMapper.selectByPrimaryKey(id);\n        if(!spu.getStatus().equals("1")){\n            throw new RuntimeException("\u672a\u901a\u8fc7\u5ba1\u6838\u7684\u5546\u54c1\u4e0d\u80fd\u4e0a\u67b6\uff01");\n        }\n        spu.setIsMarketable("1");//\u4e0a\u67b6\u72b6\u6001\n        spuMapper.updateByPrimaryKeySelective(spu);\n    }\n')),(0,l.kt)("p",null,"\uff083\uff09SpuController\u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    /**\n     * \u4e0a\u67b6\n     * @param id\n     * @return\n     */\n    @PutMapping("/put/{id}")\n    public Result put(@PathVariable String id){\n        spuService.put(id);\n        return new Result();\n    }\n')),(0,l.kt)("p",null,"\u6d4b\u8bd5"),(0,l.kt)("h2",{id:"4-\u5220\u9664\u4e0e\u8fd8\u539f\u5546\u54c1-\u65e5\u5e38\u5de5\u4f5c"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-%E5%88%A0%E9%99%A4%E4%B8%8E%E8%BF%98%E5%8E%9F%E5%95%86%E5%93%81-%E6%97%A5%E5%B8%B8%E5%B7%A5%E4%BD%9C"},"#"),"4 \u5220\u9664\u4e0e\u8fd8\u539f\u5546\u54c1-\u65e5\u5e38\u5de5\u4f5c"),(0,l.kt)("h3",{id:"41-\u9700\u6c42\u5206\u6790-1"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-1-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90-1"},"#"),"4.1 \u9700\u6c42\u5206\u6790"),(0,l.kt)("p",null,"\u5546\u54c1\u5217\u8868\u4e2d\u7684\u5220\u9664\u5546\u54c1\u529f\u80fd\uff0c\u5e76\u975e\u771f\u6b63\u7684\u5220\u9664(\u7269\u7406\u5220\u9664)\uff0c\u800c\u662f\u91c7\u7528\u903b\u8f91\u5220\u9664\u5c06\u5220\u9664\u6807\u8bb0\u7684\u5b57\u6bb5\u8bbe\u7f6e\u4e3a1."),(0,l.kt)("p",null,"\u5728\u56de\u6536\u7ad9\u4e2d\u6709\u8fd8\u539f\u5546\u54c1\u7684\u529f\u80fd\uff0c\u5c06\u5220\u9664\u6807\u8bb0\u7684\u5b57\u6bb5\u8bbe\u7f6e\u4e3a0"),(0,l.kt)("p",null,"\u5728\u56de\u6536\u7ad9\u4e2d\u6709\u5220\u9664\u5546\u54c1\u7684\u529f\u80fd\uff0c\u662f\u771f\u6b63\u7684\u7269\u7406\u5220\u9664,\u5c06\u6570\u636e\u4ece\u6570\u636e\u5e93\u4e2d\u5220\u9664\u6389\u3002"),(0,l.kt)("h3",{id:"42-\u5b9e\u73b0\u601d\u8def"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-2-%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"},"#"),"4.2 \u5b9e\u73b0\u601d\u8def"),(0,l.kt)("p",null,"\u5546\u54c1\u5217\u8868\u4e2d\u7684\u5220\u9664\u5546\u54c1,\u6267\u884c\u903b\u8f91\u5220\u9664\uff0c\u4fee\u6539spu\u8868is_delete\u5b57\u6bb5\u4e3a1"),(0,l.kt)("p",null,"\u5546\u54c1\u56de\u6536\u7ad9\u4e2d\u7684\u8fd8\u539f\u5546\u54c1,\u4fee\u6539spu\u8868is_delete\u5b57\u6bb5\u4e3a0"),(0,l.kt)("p",null,"\u5546\u54c1\u56de\u6536\u7ad9\u4e2d\u7684\u5220\u9664\u5546\u54c1,\u6267\u884cdelete\u64cd\u4f5c,\u8fdb\u884c\u7269\u7406\u5220\u9664"),(0,l.kt)("h3",{id:"43-\u4ee3\u7801\u5b9e\u73b0-1"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-3-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-1"},"#"),"4.3 \u4ee3\u7801\u5b9e\u73b0"),(0,l.kt)("h4",{id:"431-\u903b\u8f91\u5220\u9664\u5546\u54c1"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-3-1-%E9%80%BB%E8%BE%91%E5%88%A0%E9%99%A4%E5%95%86%E5%93%81"},"#"),"4.3.1 \u903b\u8f91\u5220\u9664\u5546\u54c1"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u9700\u6c42"),"\uff1a\u5546\u54c1\u5217\u8868\u4e2d\u7684\u5220\u9664\u5546\u54c1,\u6267\u884c\u903b\u8f91\u5220\u9664\uff0c\u5224\u65ad\u5176\u5df2\u4e0b\u67b6\uff0c\u4fee\u6539spu\u8868is_delete\u5b57\u6bb5\u4e3a1\u3002"),(0,l.kt)("p",null,"SpuController"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    @DeleteMapping(value = "/{id}")\n    public Result delete(@PathVariable String id) {\n        spuService.delete(id);\n        return new Result(true, StatusCode.OK, "\u5220\u9664\u6210\u529f");}\n')),(0,l.kt)("p",null,"SpuService"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"}," void delete(String id);\n")),(0,l.kt)("p",null,"SpuServiceImpl"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    @Override\n    @Transactional\n    public void delete(String id) {\n        //\u903b\u8f91\u5220\u9664\n        //\u67e5\u8be2spu\n    Spu spu = spuMapper.selectByPrimaryKey(id);\n\n    //\u5224\u65ad\u662f\u5426\u5904\u4e8e\u4e0b\u67b6\n    if(!spu.getIsMarketable().equals("0")){\n        throw new RuntimeException("\u4e0b\u67b6\u72b6\u6001\u624d\u80fd\u5220\u9664\u5546\u54c1");\n    }\n\n    //\u662f\u4e0b\u67b6\u72b6\u6001 \u7ecf\u884c\u8f6f\u5220\u9664\n    spu.setIsDelete("1");\n    spu.setStatus("0");\n\n    //\u5b58\u5165\u6570\u636e\u5e93\n    spuMapper.updateByPrimaryKeySelective(spu);\n\n}\n')),(0,l.kt)("p",null,"\u6d4b\u8bd5"),(0,l.kt)("h4",{id:"432-\u8fd8\u539f\u88ab\u5220\u9664\u7684\u5546\u54c1"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-3-2-%E8%BF%98%E5%8E%9F%E8%A2%AB%E5%88%A0%E9%99%A4%E7%9A%84%E5%95%86%E5%93%81"},"#"),"4.3.2 \u8fd8\u539f\u88ab\u5220\u9664\u7684\u5546\u54c1"),(0,l.kt)("p",null,"\u56de\u6536\u7ad9\u663e\u793a\u6570\u636e\uff1aselect * from spu where is_delete=1"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u9700\u6c42"),"\uff1a\u6062\u590d\u5df2\u5220\u9664\u72b6\u6001\u7684\u5546\u54c1\uff0c\u8bbe\u7f6e\u5176\u5df2\u5220\u9664\u5c5e\u6027\u4e3a0\uff0c\u672a\u5ba1\u6838\u3002"),(0,l.kt)("p",null,"/restore/"),(0,l.kt)("p",null,"\uff081\uff09SpuService\u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"    /**\n     * \u6062\u590d\u6570\u636e\n     * @param id\n     */\n    public void restore(String id);\n")),(0,l.kt)("p",null,"\uff082\uff09SpuServiceImpl\u5b9e\u73b0\u6b64\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    /**\n     * \u6062\u590d\u6570\u636e\n     * @param id\n     */\n    @Override\n    public void restore(String id) {\n        Spu spu = spuMapper.selectByPrimaryKey(id);\n        //\u68c0\u67e5\u662f\u5426\u5220\u9664\u7684\u5546\u54c1\n        if(!spu.getIsDelete().equals("1")){\n            throw new RuntimeException("\u6b64\u5546\u54c1\u672a\u5220\u9664\uff01");\n        }\n        spu.setIsDelete("0");//\u672a\u5220\u9664\n        spu.setStatus("0");//\u672a\u5ba1\u6838\n        spuMapper.updateByPrimaryKeySelective(spu);\n    }    \n')),(0,l.kt)("p",null,"\uff083\uff09SpuController\u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    /**\n     * \u6062\u590d\u6570\u636e\n     * @param id\n     * @return\n     */\n    @PutMapping("/restore/{id}")\n    public Result restore(@PathVariable String id){\n        spuService.restore(id);\n        return new Result();\n    }\n')),(0,l.kt)("h4",{id:"433-\u7269\u7406\u5220\u9664\u5546\u54c1"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_4-3-3-%E7%89%A9%E7%90%86%E5%88%A0%E9%99%A4%E5%95%86%E5%93%81"},"#"),"4.3.3 \u7269\u7406\u5220\u9664\u5546\u54c1"),(0,l.kt)("p",null,"\u9700\u6c42\uff1a\u5224\u65ad\u5fc5\u987b\u903b\u8f91\u5220\u9664\u5546\u54c1\u624d\u80fd\u7269\u7406\u5220\u9664"),(0,l.kt)("p",null,"\uff081\uff09SpuService \u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"    /**\n     * \u7269\u7406\u5220\u9664\n     * @param id\n     */\n    public void realDelete(String id);\n")),(0,l.kt)("p",null,"\uff082\uff09SpuServiceImpl \u5b9e\u73b0\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    @Override\n    public void realDelete(String id) {\n        Spu spu = spuMapper.selectByPrimaryKey(id);\n        //\u68c0\u67e5\u662f\u5426\u5220\u9664\u7684\u5546\u54c1\n        if(!spu.getIsDelete().equals("1")){\n            throw new RuntimeException("\u6b64\u5546\u54c1\u672a\u5220\u9664\uff01");\n        }\n        spuMapper.deleteByPrimaryKey(id);\n        \n    }\n')),(0,l.kt)("p",null,"\uff083\uff09SpuController\u65b0\u589e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'    /**\n     * \u7269\u7406\u5220\u9664\n     * @param id\n     * @return\n     */\n    @DeleteMapping("/realDelete/{id}")\n    public Result realDelete(@PathVariable String id){\n        spuService.realDelete(id);\n        return new Result();\n    }\n')),(0,l.kt)("p",null,"\u6d4b\u8bd5"),(0,l.kt)("p",null,"\u603b\u7ed3\uff1a"),(0,l.kt)("p",null,"1\u5206\u5e03\u5f0fid"),(0,l.kt)("p",null,"\u4e3a\u4ec0\u4e48\uff1a\u540c\u4e00\u4e2a\u6a21\u5757\uff0c\u5206\u5e03\u5f0f\u90e8\u7f72\uff0c\u9700\u8981\u4e0d\u91cd\u590d\u7684id"),(0,l.kt)("p",null,"\u600e\u4e48\u505a\uff1auuid redis \u96ea\u82b1\u7b97\u6cd5"),(0,l.kt)("p",null,"\u4e8c\u5962 idworker"),(0,l.kt)("p",null,"2crud"),(0,l.kt)("p",null,"spu---\x3esku(spuId)"),(0,l.kt)("p",null,"iphone 13-----\x3e8+128 5000,8+512 8000"),(0,l.kt)("p",null,"\u589e\uff1agoods(spu,skuList) \u54c1\u724c\u5206\u7c7b\u5173\u8054"),(0,l.kt)("p",null,"\u5220: \u903b\u8f91 \u8fd8\u539f \u7269\u7406\u5220\u9664"),(0,l.kt)("p",null,"\u6539\uff1a\u539f\u6765sku\u5173\u8054\u5220\u9664\u6389\uff0c\u65b0\u589e"),(0,l.kt)("p",null,"\u67e5\uff1aid"),(0,l.kt)("h1",{id:"\u7b2c5\u7ae0-\u7f51\u7ad9\u9996\u9875\u9ad8\u53ef\u7528-nginxlua"},(0,l.kt)("a",{parentName:"h1",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#%E7%AC%AC5%E7%AB%A0-%E7%BD%91%E7%AB%99%E9%A6%96%E9%A1%B5%E9%AB%98%E5%8F%AF%E7%94%A8-nginx-lua"},"#"),"\u7b2c5\u7ae0 \u7f51\u7ad9\u9996\u9875\u9ad8\u53ef\u7528 nginx+lua"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u89d2\u8272"),"\uff1a",(0,l.kt)("strong",{parentName:"p"},"\u8fd0\u7ef4"),"\u3002linux\u7b80\u5355\u7684\u547d\u4ee4\uff0cvim\u57fa\u672c\u64cd\u4f5c\u3002"),(0,l.kt)("h2",{id:"\u5b66\u4e60\u76ee\u6807-3"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87-3"},"#"),"\u5b66\u4e60\u76ee\u6807"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e86\u89e3Lua\u8bed\u8a00\u7684\u57fa\u672c\u8bed\u6cd5"),(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528nginx+Lua+redis\u5b9e\u73b0\u5e7f\u544a\u7f13\u5b58-\u91cd\u70b9"),(0,l.kt)("li",{parentName:"ul"},"\u638c\u63e1nginx\u9650\u6d41\u7684\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5")),(0,l.kt)("h2",{id:"1-lua\u4ecb\u7ecd"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-lua%E4%BB%8B%E7%BB%8D"},"#"),"1 Lua\u4ecb\u7ecd"),(0,l.kt)("h3",{id:"11-lua\u662f\u4ec0\u4e48"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-1-lua%E6%98%AF%E4%BB%80%E4%B9%88"},"#"),"1.1 lua\u662f\u4ec0\u4e48"),(0,l.kt)("p",null,"Lua \u662f\u4e00\u4e2a\u5c0f\u5de7\u7684",(0,l.kt)("strong",{parentName:"p"},(0,l.kt)("a",{parentName:"strong",href:"https://baike.baidu.com/item/%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80"},"\u811a\u672c\u8bed\u8a00open in new window")),"\u3002 html js python \u5f31\u7c7b\u578b\u8bed\u8a00"),(0,l.kt)("p",null,"\u7b80\u5355\u6765\u8bf4\uff1a"),(0,l.kt)("p",null,"Lua \u662f\u4e00\u79cd\u8f7b\u91cf\u5c0f\u5de7\u7684\u811a\u672c\u8bed\u8a00\uff0c\u7528\u6807\u51c6C\u8bed\u8a00\u7f16\u5199\u5e76\u4ee5\u6e90\u4ee3\u7801\u5f62\u5f0f\u5f00\u653e\uff0c \u5176\u8bbe\u8ba1\u76ee\u7684\u662f\u4e3a\u4e86\u5d4c\u5165\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u4ece\u800c\u4e3a\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u7075\u6d3b\u7684\u6269\u5c55\u548c\u5b9a\u5236\u529f\u80fd\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"lua \u8bed\u8a00\u5177\u6709\u4ee5\u4e0b\u7279\u6027")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u652f\u6301",(0,l.kt)("strong",{parentName:"li"},"\u9762\u5411\u8fc7\u7a0b"),"(procedure-oriented)\u7f16\u7a0b\u548c",(0,l.kt)("strong",{parentName:"li"},"\u51fd\u6570\u5f0f\u7f16\u7a0b"),"(functional programming)\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u81ea\u52a8\u5185\u5b58\u7ba1\u7406\uff1b\u53ea\u63d0\u4f9b\u4e86\u4e00\u79cd\u901a\u7528\u7c7b\u578b\u7684\u8868\uff08table\uff09\uff0c\u7528\u5b83\u53ef\u4ee5\u5b9e\u73b0\u6570\u7ec4\uff0c\u54c8\u5e0c\u8868\uff0c\u96c6\u5408\uff0c\u5bf9\u8c61\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u8bed\u8a00\u5185\u7f6e\u6a21\u5f0f\u5339\u914d\uff1b\u95ed\u5305(closure)\uff1b\u51fd\u6570\u4e5f\u53ef\u4ee5\u770b\u505a\u4e00\u4e2a\u503c\uff1b\u63d0\u4f9b\u591a\u7ebf\u7a0b\uff08\u534f\u540c\u8fdb\u7a0b\uff0c\u5e76\u975e\u64cd\u4f5c\u7cfb\u7edf\u6240\u652f\u6301\u7684\u7ebf\u7a0b\uff09\u652f\u6301\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u901a\u8fc7\u95ed\u5305\u548ctable\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u652f\u6301\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u6240\u9700\u8981\u7684\u4e00\u4e9b\u5173\u952e\u673a\u5236\uff0c\u6bd4\u5982\u6570\u636e\u62bd\u8c61\uff0c\u865a\u51fd\u6570\uff0c\u7ee7\u627f\u548c\u91cd\u8f7d\u7b49\u3002")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u5e94\u7528\u573a\u666f")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6e38\u620f\u5f00\u53d1"),(0,l.kt)("li",{parentName:"ul"},"\u72ec\u7acb\u5e94\u7528\u811a\u672c"),(0,l.kt)("li",{parentName:"ul"},"Web \u5e94\u7528\u811a\u672c"),(0,l.kt)("li",{parentName:"ul"},"\u6269\u5c55\u548c\u6570\u636e\u5e93\u63d2\u4ef6\u5982\uff1aMySQL Proxy \u548c MySQL WorkBench"),(0,l.kt)("li",{parentName:"ul"},"\u5b89\u5168\u7cfb\u7edf\uff0c\u5982\u5165\u4fb5\u68c0\u6d4b\u7cfb\u7edf"),(0,l.kt)("li",{parentName:"ul"},'redis\u4e2d\u5d4c\u5957\u8c03\u7528\u5b9e\u73b0\u7c7b\u4f3c\u4e8b\u52a1\u7684\u529f\u80fd\u3002 redis \u6ce8\u5165 lua\u811a\u672c\uff0credis\u589e\u5f3a\u3002 incr("id")'),(0,l.kt)("li",{parentName:"ul"},"web\u5bb9\u5668\u4e2d\u5e94\u7528\u5904\u7406\u4e00\u4e9b\u8fc7\u6ee4 \u7f13\u5b58\u7b49\u7b49\u7684\u903b\u8f91\uff0c\u4f8b\u5982nginx\u3002")),(0,l.kt)("h3",{id:"12-lua\u7684\u5b89\u88c5"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-2-lua%E7%9A%84%E5%AE%89%E8%A3%85"},"#"),"1.2 lua\u7684\u5b89\u88c5"),(0,l.kt)("p",null,"\u865a\u62df\u673a\u4e2d\u5df2\u5b89\u88c5\u3002\u5efa\u8bae\u5bf9\u7167pdf\u81ea\u5df1\u5b89\u88c5\u3002"),(0,l.kt)("p",null,"\u6709linux\u7248\u672c\u7684\u5b89\u88c5\u4e5f\u6709mac\u7248\u672c\u7684\u5b89\u88c5\u3002\u3002\u6211\u4eec\u91c7\u7528linux\u7248\u672c\u7684\u5b89\u88c5\uff0c\u9996\u5148\u6211\u4eec\u51c6\u5907\u4e00\u4e2alinux\u865a\u62df\u673a\u3002"),(0,l.kt)("p",null,"\u5b89\u88c5\u6b65\u9aa4,\u5728linux\u7cfb\u7edf\u4e2d\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"yum install -y gcc\n\nyum install libtermcap-devel ncurses-devel libevent-devel readline-devel\n\ncurl -R -O http://www.lua.org/ftp/lua-5.3.5.tar.gz\n\ntar -zxf lua-5.3.5.tar.gz\n\ncd lua-5.3.5\n\nmake linux test\n\nmake install\n")),(0,l.kt)("h3",{id:"13-\u5feb\u901f\u5165\u95e8"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-3-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"},"#"),"1.3 \u5feb\u901f\u5165\u95e8"),(0,l.kt)("p",null,"\u521b\u5efahello.lua\u6587\u4ef6\uff0c\u5185\u5bb9\u4e3a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'print("hello");\n')),(0,l.kt)("p",null,"\u4fdd\u5b58\u3002\u6267\u884c\u547d\u4ee4"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"lua helloworld.lua\n")),(0,l.kt)("p",null,"\u8f93\u51fa\u4e3a\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"Hello\n")),(0,l.kt)("h3",{id:"14-lua\u7684\u57fa\u672c\u8bed\u6cd5"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-4-lua%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"},"#"),"1.4 LUA\u7684\u57fa\u672c\u8bed\u6cd5"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"lua\u6709\u4ea4\u4e92\u5f0f\u7f16\u7a0b\u548c\u811a\u672c\u5f0f\u7f16\u7a0b\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u4ea4\u4e92\u5f0f\u7f16\u7a0b\u5c31\u662f\u76f4\u63a5\u8f93\u5165\u8bed\u6cd5\uff0c\u5c31\u80fd\u6267\u884c\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u811a\u672c\u5f0f\u7f16\u7a0b\u9700\u8981\u7f16\u5199\u811a\u672c\u6587\u4ef6\uff0c\u7136\u540e\u518d\u6267\u884c\u3002")),(0,l.kt)("p",null,"\u4e00\u822c\u91c7\u7528\u811a\u672c\u5f0f\u7f16\u7a0b\u3002\uff08\u4f8b\u5982\uff1a\u7f16\u5199\u4e00\u4e2ahello.lua\u7684\u6587\u4ef6\uff0c\u8f93\u5165\u6587\u4ef6\u5185\u5bb9\uff0c\u5e76\u6267\u884clua hell.lua\u5373\u53ef\uff09"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u62d3\u5c55"),"\uff1a\u7f16\u5199lua\u811a\u672c\u3002\u56de\u5fc6linux\u57fa\u672c\u64cd\u4f5c\u3002vim\u57fa\u672c\u64cd\u4f5c\u3002\u53c2\u89c1\u62d3\u5c55\u8d44\u6599\u3002"),(0,l.kt)("p",null,"linux:",(0,l.kt)("a",{parentName:"p",href:"https://www.runoob.com/linux/linux-command-manual.html"},"https://www.runoob.com/linux/linux-command-manual.htmlopen in new window")),(0,l.kt)("p",null,"vim:",(0,l.kt)("a",{parentName:"p",href:"https://blog.csdn.net/weixin_37657720/article/details/80645991"},"https://blog.csdn.net/weixin_37657720/article/details/80645991open in new window")),(0,l.kt)("h4",{id:"141-\u6ce8\u91ca"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-4-1-%E6%B3%A8%E9%87%8A"},"#"),"1.4.1 \u6ce8\u91ca"),(0,l.kt)("p",null,"\u5355\u884c\u6ce8\u91ca\uff1a\u4e24\u4e2a\u51cf\u53f7\u662f\u5355\u884c\u6ce8\u91ca:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"--\n")),(0,l.kt)("p",null,"\u591a\u884c\u6ce8\u91ca\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"--[[\n \u591a\u884c\u6ce8\u91ca\n \u591a\u884c\u6ce8\u91ca\n--]]\n")),(0,l.kt)("h4",{id:"142-\u5173\u952e\u5b57"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-4-2-%E5%85%B3%E9%94%AE%E5%AD%97"},"#"),"1.4.2 \u5173\u952e\u5b57"),(0,l.kt)("p",null,"\u5173\u952e\u5b57\u5c31\u597d\u6bd4java\u4e2d\u7684 break if else\u7b49\u7b49\u4e00\u6837\u7684\u6548\u679c\u3002lua\u7684\u5173\u952e\u5b57\u5982\u4e0b\uff1a"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null}),(0,l.kt)("th",{parentName:"tr",align:null}),(0,l.kt)("th",{parentName:"tr",align:null}),(0,l.kt)("th",{parentName:"tr",align:null}))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"and"),(0,l.kt)("td",{parentName:"tr",align:null},"break"),(0,l.kt)("td",{parentName:"tr",align:null},"do"),(0,l.kt)("td",{parentName:"tr",align:null},"else")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"elseif"),(0,l.kt)("td",{parentName:"tr",align:null},"end"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"for")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"function"),(0,l.kt)("td",{parentName:"tr",align:null},"if"),(0,l.kt)("td",{parentName:"tr",align:null},"in"),(0,l.kt)("td",{parentName:"tr",align:null},"local")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"nil"),(0,l.kt)("td",{parentName:"tr",align:null},"not"),(0,l.kt)("td",{parentName:"tr",align:null},"or"),(0,l.kt)("td",{parentName:"tr",align:null},"repeat")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"return"),(0,l.kt)("td",{parentName:"tr",align:null},"then"),(0,l.kt)("td",{parentName:"tr",align:null},"true"),(0,l.kt)("td",{parentName:"tr",align:null},"until")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"while"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})))),(0,l.kt)("h4",{id:"143-\u5b9a\u4e49\u53d8\u91cf"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-4-3-%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"},"#"),"1.4.3 \u5b9a\u4e49\u53d8\u91cf"),(0,l.kt)("p",null,"\u5168\u5c40\u53d8\u91cf\uff0c\u9ed8\u8ba4\u7684\u60c5\u51b5\u4e0b\uff0c\u5b9a\u4e49\u4e00\u4e2a\u53d8\u91cf\u90fd\u662f\u5168\u5c40\u53d8\u91cf\uff0c"),(0,l.kt)("p",null,"\u5982\u679c\u8981\u7528\u5c40\u90e8\u53d8\u91cf \u9700\u8981\u58f0\u660e\u4e3alocal.\u4f8b\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-lua"},"-- \u5168\u5c40\u53d8\u91cf\u8d4b\u503c\na=1\n-- \u5c40\u90e8\u53d8\u91cf\u8d4b\u503c\nlocal b=2 \n")),(0,l.kt)("p",null,"\u5982\u679c\u53d8\u91cf\u6ca1\u6709\u521d\u59cb\u5316\uff1a\u5219 \u5b83\u7684\u503c\u4e3a",(0,l.kt)("strong",{parentName:"p"},"nil")," \u8fd9\u548cjava\u4e2d\u7684null\u4e0d\u540c\u3002"),(0,l.kt)("h4",{id:"144-lua\u4e2d\u7684\u6570\u636e\u7c7b\u578b"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-4-4-lua%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"},"#"),"1.4.4 Lua\u4e2d\u7684\u6570\u636e\u7c7b\u578b"),(0,l.kt)("p",null,"Lua \u662f",(0,l.kt)("strong",{parentName:"p"},"\u52a8\u6001\u7c7b\u578b\u8bed\u8a00"),"\uff0c\u53d8\u91cf\u4e0d\u8981\u7c7b\u578b\u5b9a\u4e49,\u53ea\u9700\u8981\u4e3a\u53d8\u91cf\u8d4b\u503c\u3002 \u503c\u53ef\u4ee5\u5b58\u50a8\u5728\u53d8\u91cf\u4e2d\uff0c\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u6216\u7ed3\u679c\u8fd4\u56de\u3002"),(0,l.kt)("p",null,"Lua \u4e2d\u6709 8 \u4e2a\u57fa\u672c\u7c7b\u578b\u5206\u522b\u4e3a\uff1anil\u3001boolean\u3001number\u3001string\u3001userdata\u3001function\u3001thread \u548c table\u3002"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u6570\u636e\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u63cf\u8ff0"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"nil"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8fd9\u4e2a\u6700\u7b80\u5355\uff0c\u53ea\u6709\u503cnil\u5c5e\u4e8e\u8be5\u7c7b\uff0c\u8868\u793a\u4e00\u4e2a\u65e0\u6548\u503c\uff08\u5728\u6761\u4ef6\u8868\u8fbe\u5f0f\u4e2d\u76f8\u5f53\u4e8efalse\uff09\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"boolean"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5305\u542b\u4e24\u4e2a\u503c\uff1afalse\u548ctrue\u3002")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"number"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8868\u793a\u53cc\u7cbe\u5ea6\u7c7b\u578b\u7684\u5b9e\u6d6e\u70b9\u6570")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5b57\u7b26\u4e32\u7531\u4e00\u5bf9\u53cc\u5f15\u53f7\u6216\u5355\u5f15\u53f7\u6765\u8868\u793a")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"function"),(0,l.kt)("td",{parentName:"tr",align:null},"\u7531 C \u6216 Lua \u7f16\u5199\u7684\u51fd\u6570")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"userdata"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8868\u793a\u4efb\u610f\u5b58\u50a8\u5728\u53d8\u91cf\u4e2d\u7684C\u6570\u636e\u7ed3\u6784")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"thread"),(0,l.kt)("td",{parentName:"tr",align:null},"\u8868\u793a\u6267\u884c\u7684\u72ec\u7acb\u7ebf\u8def\uff0c\u7528\u4e8e\u6267\u884c\u534f\u540c\u7a0b\u5e8f")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"table"),(0,l.kt)("td",{parentName:"tr",align:null},'Lua \u4e2d\u7684\u8868\uff08table\uff09\u5176\u5b9e\u662f\u4e00\u4e2a"\u5173\u8054\u6570\u7ec4"\uff08associative arrays\uff09\uff0c\u6570\u7ec4\u7684\u7d22\u5f15\u53ef\u4ee5\u662f\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u6216\u8868\u7c7b\u578b\u3002\u5728 Lua \u91cc\uff0ctable \u7684\u521b\u5efa\u662f\u901a\u8fc7"\u6784\u9020\u8868\u8fbe\u5f0f"\u6765\u5b8c\u6210\uff0c\u6700\u7b80\u5355\u6784\u9020\u8868\u8fbe\u5f0f\u662f{}\uff0c\u7528\u6765\u521b\u5efa\u4e00\u4e2a\u7a7a\u8868\u3002')))),(0,l.kt)("h4",{id:"145-\u6d41\u7a0b\u63a7\u5236"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-4-5-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"},"#"),"1.4.5 \u6d41\u7a0b\u63a7\u5236"),(0,l.kt)("p",null,"\u5982\u4e0b\uff1a\u7c7b\u4f3c\u4e8eif else"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-lua"},'--[ 0 \u4e3a true ]\nif(0) then\n    print("0 \u4e3a true")\nelse\n    print("0 \u4e0d\u4e3atrue")\nend\n')),(0,l.kt)("p",null,"\u6267\u884c:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"lua hello.lua\n")),(0,l.kt)("p",null,"\u7ed3\u679c\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"0\u4e3atrue\n")),(0,l.kt)("h4",{id:"146-\u51fd\u6570"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-4-6-%E5%87%BD%E6%95%B0"},"#"),"1.4.6 \u51fd\u6570"),(0,l.kt)("p",null,"lua\u4e2d\u4e5f\u53ef\u4ee5\u5b9a\u4e49\u51fd\u6570\uff0c\u7c7b\u4f3c\u4e8ejava\u4e2d\u7684\u65b9\u6cd5\u3002\u4f8b\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-lua"},'--[[ \u51fd\u6570\u8fd4\u56de\u4e24\u4e2a\u503c\u7684\u6700\u5927\u503c --]]\nfunction max(num1, num2)\n\n   if (num1 > num2) then\n      result = num1;\n   else\n      result = num2;\n   end\n\n   return result; \nend\n-- \u8c03\u7528\u51fd\u6570\nprint("\u4e24\u503c\u6bd4\u8f83\u6700\u5927\u503c\u4e3a ",max(10,4))\nprint("\u4e24\u503c\u6bd4\u8f83\u6700\u5927\u503c\u4e3a ",max(5,6))\n')),(0,l.kt)("p",null,"\u6267\u884c:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"lua hello.lua\n")),(0,l.kt)("p",null,"\u7ed3\u679c\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"10\n")),(0,l.kt)("h4",{id:"147-require-\u51fd\u6570"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_1-4-7-require-%E5%87%BD%E6%95%B0"},"#"),"1.4.7 require \u51fd\u6570"),(0,l.kt)("p",null,"require \u7528\u4e8e \u5f15\u5165\u5176\u4ed6\u7684\u6a21\u5757\uff0c\u7c7b\u4f3c\u4e8ejava\u4e2d\u7684\u7c7b\u8981\u5f15\u7528\u522b\u7684\u7c7b\u7684\u6548\u679c\u3002"),(0,l.kt)("p",null,"\u7528\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'require "<\u6a21\u5757\u540d>"\n')),(0,l.kt)("h2",{id:"2nginxluaredis\u5b9e\u73b0\u5e7f\u544a\u7f13\u5b58-\u91cd\u70b9"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-nginx-lua-redis%E5%AE%9E%E7%8E%B0%E5%B9%BF%E5%91%8A%E7%BC%93%E5%AD%98-%E9%87%8D%E7%82%B9"},"#"),"2.nginx+lua+redis\u5b9e\u73b0\u5e7f\u544a\u7f13\u5b58-\u91cd\u70b9"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u9762\u8bd5"),":"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"1"),"ngxin\u6709\u4ec0\u4e48\u4f5c\u7528\uff1f"),(0,l.kt)("p",null," 1.1\u8d1f\u8f7d\u5747\u8861"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211023123424137-4d8217c4.png",alt:"image-20211023123424137"}),"image-20211023123424137"),(0,l.kt)("p",null," 1.2\u53cd\u5411\u4ee3\u7406"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211023124014197-58a74834.png",alt:"image-20211023124014197"}),"image-20211023124014197"),(0,l.kt)("p",null," 1.3\u9759\u6001\u7f51\u9875\u670d\u52a1\u5668"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211023124341749-5e73f5ea.png",alt:"image-20211023124341749"}),"image-20211023124341749"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"2"),"tomcat\u4e0enginx,\u7f51\u9875\u670d\u52a1\u5668\uff0c\u4ed6\u4eec\u7684\u533a\u522b\u662f\u4ec0\u4e48\u5462\uff1f"),(0,l.kt)("p",null,"\u7f51\u9875\u670d\u52a1\u5668\uff1atomcat\u4e0enginx\u3002"),(0,l.kt)("p",null,"1\u4ece\u5e94\u7528\u65b9\u9762\uff1a"),(0,l.kt)("p",null," tomcat\u4e00\u822c\u662f\u505a\u52a8\u6001\u89e3\u6790\u624d\u4f1a\u7528\u5f97\u5230\uff0c\u652f\u6301jsp(html+java)\u7684\u89e3\u6790\uff0c\u9700\u8981\u914d\u7f6eJDK\u652f\u6301\u3002"),(0,l.kt)("p",null," nginx\uff0c\u5219\u4e00\u822c\u662f\u505a\u9759\u6001html \uff0c1\u8d1f\u8f7d\u5747\u8861\u30012\u53cd\u5411\u4ee3\u7406\u30013http\u670d\u52a1\u5668\u3002"),(0,l.kt)("p",null,"2\u6027\u80fd\u65b9\u9762 \uff1a"),(0,l.kt)("p",null," tomcat\u5e76\u53d1500"),(0,l.kt)("p",null," nginx \u4e0a\u4e07 tps"),(0,l.kt)("p",null,"\u9700\u8981\u5728\u9875\u9762\u4e0a\u663e\u793a\u5e7f\u544a\u7684\u4fe1\u606f\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211023114235735-19e2222a.png",alt:"image-20211023114235735"}),"image-20211023114235735"),(0,l.kt)("h3",{id:"22-openresty"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-2-openresty"},"#"),"2.2 OpenResty"),(0,l.kt)("h4",{id:"221-openresty\u4ecb\u7ecd"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-2-1-openresty%E4%BB%8B%E7%BB%8D"},"#"),"2.2.1 OpenResty\u4ecb\u7ecd"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u7f57\u6c38\u6d69")," \u9524\u5b50\u53d1\u5e03\u4f1a \u4eca\u665a\u7968\u94b1 68w \u6350\u7ed9",(0,l.kt)("strong",{parentName:"p"},"OpenResty")," \u57fa\u91d1\u4f1a"),(0,l.kt)("p",null,"OpenResty(\u53c8\u79f0\uff1angx_openresty) \u662f\u4e00\u4e2a\u57fa\u4e8e NGINX \u7684\u53ef\u4f38\u7f29\u7684 Web \u5e73\u53f0\uff0c\u7531\u4e2d\u56fd\u4eba\u7ae0\u4ea6\u6625\u53d1\u8d77\uff0c\u63d0\u4f9b\u4e86\u5f88\u591a\u9ad8\u8d28\u91cf\u7684\u7b2c\u4e09\u65b9\u6a21\u5757\u3002"),(0,l.kt)("p",null,"OpenResty \u662f\u4e00\u4e2a\u5f3a\u5927\u7684 Web \u5e94\u7528\u670d\u52a1\u5668\uff0cWeb \u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u4f7f\u7528 Lua \u811a\u672c\u8bed\u8a00\u8c03\u52a8 Nginx \u652f\u6301\u7684\u5404\u79cd C \u4ee5\u53ca Lua \u6a21\u5757,\u66f4\u4e3b\u8981\u7684\u662f\u5728\u6027\u80fd\u65b9\u9762\uff0cOpenResty\u53ef\u4ee5 \u5feb\u901f\u6784\u9020\u51fa\u8db3\u4ee5\u80dc\u4efb 10K \u4e43\u81f31000K\u4ee5\u4e0a\u5e76\u53d1\u8fde\u63a5\u54cd\u5e94\u7684\u8d85\u9ad8\u6027\u80fd Web \u5e94\u7528\u7cfb\u7edf\u3002"),(0,l.kt)("p",null,"360\uff0cUPYUN\uff0c\u963f\u91cc\u4e91\uff0c\u65b0\u6d6a\uff0c\u817e\u8baf\u7f51\uff0c\u53bb\u54ea\u513f\u7f51\uff0c\u9177\u72d7\u97f3\u4e50\u7b49\u90fd\u662f OpenResty \u7684\u6df1\u5ea6\u7528\u6237\u3002"),(0,l.kt)("p",null,"OpenResty \u7b80\u5355\u7406\u89e3\uff0c\u5c31\u76f8\u5f53\u4e8e\u5c01\u88c5\u4e86nginx,\u5e76\u4e14\u96c6\u6210\u4e86LUA\u811a\u672c\uff0c\u5f00\u53d1\u4eba\u5458\u53ea\u9700\u8981\u7b80\u5355\u7684\u5176\u63d0\u4f9b\u4e86\u6a21\u5757\u5c31\u53ef\u4ee5\u5b9e\u73b0\u76f8\u5173\u7684\u903b\u8f91\uff0c\u800c\u4e0d\u518d\u50cf\u4e4b\u524d\uff0c\u8fd8\u9700\u8981\u5728nginx\u4e2d\u81ea\u5df1\u7f16\u5199lua\u7684\u811a\u672c\uff0c\u518d\u8fdb\u884c\u8c03\u7528\u4e86\u3002"),(0,l.kt)("h4",{id:"222-openresty\u5b89\u88c5"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-2-2-openresty%E5%AE%89%E8%A3%85"},"#"),"2.2.2 OpenResty\u5b89\u88c5"),(0,l.kt)("p",null,"\u865a\u62df\u673a\u4e2d\u5df2\u5b89\u88c5\u3002"),(0,l.kt)("p",null,"linux\u5b89\u88c5openresty:"),(0,l.kt)("p",null,"1.\u6dfb\u52a0\u4ed3\u5e93\u6267\u884c\u547d\u4ee4"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"yum install yum-utils\n\nyum-config-manager --add-repo https://openresty.org/package/centos/openresty.repo\n")),(0,l.kt)("p",null,"2.\u6267\u884c\u5b89\u88c5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"yum install openresty\n")),(0,l.kt)("p",null,"3.\u5b89\u88c5\u6210\u529f\u540e \u4f1a\u5728\u9ed8\u8ba4\u7684\u76ee\u5f55\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"/usr/local/openresty\n")),(0,l.kt)("h4",{id:"223-\u5b89\u88c5nginx"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-2-3-%E5%AE%89%E8%A3%85nginx"},"#"),"2.2.3 \u5b89\u88c5nginx"),(0,l.kt)("p",null,"\u9ed8\u8ba4\u5df2\u7ecf\u5b89\u88c5\u597d\u4e86nginx,\u5728\u76ee\u5f55\uff1a/usr/local/openresty/nginx \u4e0b\u3002"),(0,l.kt)("p",null,"\u4fee\u6539/usr/local/openresty/nginx/conf/nginx.conf ,\u5c06\u914d\u7f6e\u6587\u4ef6\u4f7f\u7528\u7684\u6839\u8bbe\u7f6e\u4e3aroot,\u76ee\u7684\u5c31\u662f\u5c06\u6765\u8981\u4f7f\u7528lua\u811a\u672c\u7684\u65f6\u5019 \uff0c\u76f4\u63a5\u53ef\u4ee5\u52a0\u8f7d\u5728root\u4e0b\u7684lua\u811a\u672c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"#user nobody; \u914d\u7f6e\u6587\u4ef6\u7b2c\u4e00\u884c\u539f\u6765\u4e3a\u8fd9\u6837, \u73b0\u6539\u4e3a\u4e0b\u9762\u7684\u914d\u7f6e\nuser root root;\n")),(0,l.kt)("p",null,"\u6d4b\u8bd5\u8bbf\u95ee ",(0,l.kt)("a",{parentName:"p",href:"http://192.168.200.128/"},"http://192.168.200.128open in new window")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211023152642713-453d3e06.png",alt:"image-20211023152642713"}),"image-20211023152642713"),(0,l.kt)("h3",{id:"23-\u5b9e\u73b0\u601d\u8def"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-3-%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"},"#"),"2.3 \u5b9e\u73b0\u601d\u8def"),(0,l.kt)("h4",{id:"231-\u8868\u7ed3\u6784\u5206\u6790"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-3-1-%E8%A1%A8%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90"},"#"),"2.3.1 \u8868\u7ed3\u6784\u5206\u6790"),(0,l.kt)("p",null,"banner"),(0,l.kt)("p",null,"\u67e5\u770b\u6570\u636e\u5e93\uff1aydles_business\u5e93\u4e0btb_ad\u8868\uff0c\u5206\u6790\u8868\u7ed3\u6784\u3002"),(0,l.kt)("p",null,"\u5e7f\u544a\u4f4d\u7f6e\uff1a\u4e0d\u540c\u4f4d\u7f6e\u4ef7\u4f4d\u4e0d\u540c\u3002",(0,l.kt)("a",{parentName:"p",href:"http://xn--jd-128d276c.com/"},"\u67e5\u770bjd.comopen in new window")),(0,l.kt)("p",null,"tb_ad \uff08\u5e7f\u544a\u8868\uff09"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u540d\u79f0"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u542b\u4e49"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5b57\u6bb5\u957f\u5ea6"),(0,l.kt)("th",{parentName:"tr",align:null},"\u5907\u6ce8"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"id"),(0,l.kt)("td",{parentName:"tr",align:null},"ID"),(0,l.kt)("td",{parentName:"tr",align:null},"INT"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"name"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5e7f\u544a\u540d\u79f0"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"position"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5e7f\u544a\u4f4d\u7f6e"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"\u7cfb\u7edf\u5b9a\u4e49")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"start_time"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5f00\u59cb\u65f6\u95f4"),(0,l.kt)("td",{parentName:"tr",align:null},"DATETIME"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"end_time"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5230\u671f\u65f6\u95f4"),(0,l.kt)("td",{parentName:"tr",align:null},"DATETIME"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"status"),(0,l.kt)("td",{parentName:"tr",align:null},"\u72b6\u6001"),(0,l.kt)("td",{parentName:"tr",align:null},"CHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"0\uff1a\u65e0\u6548 1:\u6709\u6548")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"image"),(0,l.kt)("td",{parentName:"tr",align:null},"\u56fe\u7247\u5730\u5740"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"url"),(0,l.kt)("td",{parentName:"tr",align:null},"URL"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"remarks"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5907\u6ce8"),(0,l.kt)("td",{parentName:"tr",align:null},"VARCHAR"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"web_index_lb"),(0,l.kt)("td",{parentName:"tr",align:null},"\u9996\u9875\u8f6e\u64ad\u56fe"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"web_index_amusing"),(0,l.kt)("td",{parentName:"tr",align:null},"\u6709\u8da3\u533a"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"web_index_ea_lb"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5bb6\u7528\u7535\u5668\u697c\u5c42\u8f6e\u64ad\u56fe"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"web_index_ea"),(0,l.kt)("td",{parentName:"tr",align:null},"\u5bb6\u7528\u7535\u5668\u697c\u5c42\u5e7f\u544a"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"web_index_mobile_lb"),(0,l.kt)("td",{parentName:"tr",align:null},"\u624b\u673a\u901a\u8baf\u697c\u5c42\u8f6e\u64ad\u56fe"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"web_index_mobile"),(0,l.kt)("td",{parentName:"tr",align:null},"\u624b\u673a\u901a\u8baf\u697c\u5c42\u5e7f\u544a"),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null})))),(0,l.kt)("h4",{id:"232-\u7f13\u5b58\u9884\u70ed\u4e0e\u4e8c\u7ea7\u7f13\u5b58\u67e5\u8be2"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-3-2-%E7%BC%93%E5%AD%98%E9%A2%84%E7%83%AD%E4%B8%8E%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98%E6%9F%A5%E8%AF%A2"},"#"),"2.3.2 \u7f13\u5b58\u9884\u70ed\u4e0e\u4e8c\u7ea7\u7f13\u5b58\u67e5\u8be2"),(0,l.kt)("p",null,"\u7f13\u5b58\u9884\u70ed\u4e0e\u4e8c-\u7ea7\u7f13\u5b58\u67e5\u8be2"),(0,l.kt)("p",null,"1\u7f13\u5b58\u9884\u70ed\uff1a\u7f16\u5199lua\u811a\u672c\u5b9e\u73b0\u7f13\u5b58\u9884\u70ed\uff08\u5c06mysql\u91cc\u7684\u6570\u636e\u67e5\u8be2\u51fa\u6765\u5b58\u5165redis\uff09"),(0,l.kt)("p",null,"2\u4e00\u7ea7\u7f13\u5b58\u67e5\u8be2:"),(0,l.kt)("p",null,"3 \u4e8c\u7ea7\u7f13\u5b58\u67e5\u8be2"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211026160529570-72b25d72.png",alt:"image-20211026160529570"}),"image-20211026160529570"),(0,l.kt)("h3",{id:"24-\u4ee3\u7801\u5b9e\u73b0"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-4-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"},"#"),"2.4 \u4ee3\u7801\u5b9e\u73b0"),(0,l.kt)("h4",{id:"241-\u7f13\u5b58\u9884\u70ed"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-4-1-%E7%BC%93%E5%AD%98%E9%A2%84%E7%83%AD"},"#"),"2.4.1 \u7f13\u5b58\u9884\u70ed"),(0,l.kt)("p",null,"\u8fd0\u7ef4\u4eba\u5458\uff0c\u811a\u672c\uff0c\u6bcf\u5929\u51cc\u66682\u70b9\uff0cnginx\u53d1\u4e00\u4e2a\u8bf7\u6c42"),(0,l.kt)("p",null,"\uff08 ",(0,l.kt)("a",{parentName:"p",href:"http://192.168.200.128/ad_update?position=web_index_lb%EF%BC%89%EF%BC%8C%E8%AE%A9nginx%E6%9D%A5%E5%81%9A%E7%9A%84%E3%80%82"},"http://192.168.200.128/ad_update?position=web_index_lb\uff09\uff0c\u8ba9nginx\u6765\u505a\u7684\u3002open in new window")),(0,l.kt)("p",null,"\u5b9e\u73b0\u601d\u8def\uff1a"),(0,l.kt)("p",null,"\u5b9a\u4e49\u8bf7\u6c42\uff1a\u7528\u4e8e\u67e5\u8be2\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u66f4\u65b0\u5230redis\u4e2d\u3002"),(0,l.kt)("p",null,"\uff081\uff09\u8fde\u63a5mysql \uff0c\u6309\u7167\u5e7f\u544a\u5206\u7c7bID\u8bfb\u53d6\u5e7f\u544a\u5217\u8868\uff0c\u8f6c\u6362\u4e3ajson\u5b57\u7b26\u4e32\u3002"),(0,l.kt)("p",null,"\uff082\uff09\u8fde\u63a5redis\uff0c\u5c06\u5e7f\u544a\u5217\u8868json\u5b57\u7b26\u4e32\u5b58\u5165redis \u3002"),(0,l.kt)("p",null,"\u5b9a\u4e49\u8bf7\u6c42\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"\u8bf7\u6c42\uff1a\n    /ad_update\n\u53c2\u6570\uff1a\n    position  --\u6307\u5b9a\u5e7f\u544a\u4f4d\u7f6e\n\u8fd4\u56de\u503c\uff1a\n    json \n")),(0,l.kt)("p",null,"1\u7f16\u5199/root/lua/ad_update.lua\u3002\u5927\u81f4\u770b\u61c2\u5373\u53ef\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-lua"},'ngx.header.content_type="application/json;charset=utf8"\nlocal cjson = require("cjson")\nlocal mysql = require("resty.mysql")\nlocal uri_args = ngx.req.get_uri_args()\nlocal position = uri_args["position"]\n\nlocal db = mysql:new()\ndb:set_timeout(1000)\nlocal props = {\n    host = "192.168.200.128",\n    port = 3306,\n    database = "ydles_business",\n    user = "root",\n    password = "root"\n}\n\nlocal res = db:connect(props)\nlocal select_sql = "select url,image from tb_ad where status =\'1\' and position=\'"..position.."\' and start_time<= NOW() AND end_time>= NOW()"\nres = db:query(select_sql)\ndb:close()\n\nlocal redis = require("resty.redis")\nlocal red = redis:new()\nred:set_timeout(2000)\n\nlocal ip ="192.168.200.128"\nlocal port = 6379\nred:connect(ip,port)\n\nred:set("ad_"..position,cjson.encode(res))\nred:close()\n\nngx.say("{\\"flag\\":true,\\"position\\":\\""..position.."\\"}")\n')),(0,l.kt)("p",null,'redis key:ad_web_index_lb value:"{url:',(0,l.kt)("a",{parentName:"p",href:"http://asdfasdf/"},"http://asdfasdfopen in new window"),',image:asdfasdf}"'),(0,l.kt)("p",null,"2 \u4f7fnginx\u6267\u884clua\u811a\u672c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"vim /usr/local/openresty/nginx/conf/nginx.conf\n")),(0,l.kt)("p",null,"\u5728server 80 localhost\u4e2d\u6dfb\u52a0\u8f6c\u53d1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"#\u6dfb\u52a0\u5e7f\u544a\nlocation /ad_update {\n    content_by_lua_file /root/lua/ad_update.lua;\n}\n")),(0,l.kt)("p",null,"\u6d4b\u8bd5\uff1a\u91cd\u542fnginx"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"cd /usr/local/openresty/nginx/sbin\n./nginx -s reload\n")),(0,l.kt)("p",null,"\u8bbf\u95ee\uff1a\u8fd0\u7ef4 \u9875\u9762 ",(0,l.kt)("a",{parentName:"p",href:"http://192.168.200.128/ad_update?position=web_index_lb"},"http://192.168.200.128/ad_update?position=web_index_lbopen in new window")),(0,l.kt)("p",null,"\u67e5\u770bredis\u4e2d\u6709\u6ca1\u6709\u6570\u636e\u3002"),(0,l.kt)("h4",{id:"242-\u5e7f\u544a\u7f13\u5b58\u8bfb\u53d6"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-4-2-%E5%B9%BF%E5%91%8A%E7%BC%93%E5%AD%98%E8%AF%BB%E5%8F%96"},"#"),"2.4.2 \u5e7f\u544a\u7f13\u5b58\u8bfb\u53d6"),(0,l.kt)("p",null,"\u7528\u6237\u8bbf\u95ee\u9996\u9875\uff0c\u94a9\u5b50\u65b9\u6cd5\u91cc\uff0c\u8bf7\u6c42\uff08",(0,l.kt)("a",{parentName:"p",href:"http://192.168.200.128/ad_read?position=web_index_lb%EF%BC%89%EF%BC%8C%E6%98%BE%E7%A4%BA%E5%9C%A8%E9%A1%B5%E9%9D%A2%E4%B8%8A%E3%80%82"},"http://192.168.200.128/ad_read?position=web_index_lb\uff09\uff0c\u663e\u793a\u5728\u9875\u9762\u4e0a\u3002open in new window")),(0,l.kt)("p",null,"\u5b9e\u73b0\u601d\u8def\uff1a"),(0,l.kt)("p",null,"\u901a\u8fc7lua\u811a\u672c\u76f4\u63a5\u4eceredis\u4e2d\u83b7\u53d6\u6570\u636e\u5373\u53ef\u3002"),(0,l.kt)("p",null,"\u5b9a\u4e49\u8bf7\u6c42\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"\u8bf7\u6c42:/ad_read\n\u53c2\u6570\uff1aposition\n\u8fd4\u56de\u503c\uff1ajson\n")),(0,l.kt)("p",null,"\u521b\u5efa\u6587\u4ef6 vim /root/lua/ad_read.lua\u3002\u770b\u61c2\u5373\u53ef\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-lua"},'ngx.header.content_type="application/json;charset=utf8" \nlocal uri_args = ngx.req.get_uri_args(); \nlocal position = uri_args["position"]; \nlocal redis = require("resty.redis"); \nlocal red = redis:new() \nred:set_timeout(2000) \nlocal ok, err = red:connect("192.168.200.128", 6379) \nlocal rescontent=red:get("ad_"..position) \nngx.say(rescontent) \nred:close()\n')),(0,l.kt)("p",null,"\u4fee\u6539\uff1anginx\u8bfb\u53d6lua\u811a\u672c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"vim /usr/local/openresty/nginx/conf/nginx.conf\n")),(0,l.kt)("p",null,"\u5728server 80 localhost\u4e2d\u6dfb\u52a0\u8f6c\u53d1"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"#\u8bfb\u53d6\u5e7f\u544a\nlocation /ad_read {\n    content_by_lua_file /root/lua/ad_read.lua;\n}\n")),(0,l.kt)("p",null,"\u91cd\u542fnginx"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"cd /usr/local/openresty/nginx/sbin\n./nginx -s reload\n")),(0,l.kt)("p",null,"\u6d4b\u8bd5\u8bbf\u95ee\uff1a \u7528\u6237\u767b\u5f55\u9996\u9875 ",(0,l.kt)("a",{parentName:"p",href:"http://192.168.200.128/ad_read?position=web_index_lb"},"http://192.168.200.128/ad_read?position=web_index_lbopen in new window")),(0,l.kt)("h4",{id:"243-\u4e8c\u7ea7\u7f13\u5b58-\u52a0\u5165openresty\u672c\u5730\u7f13\u5b58"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-4-3-%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98-%E5%8A%A0%E5%85%A5openresty%E6%9C%AC%E5%9C%B0%E7%BC%93%E5%AD%98"},"#"),"2.4.3 \u4e8c\u7ea7\u7f13\u5b58-\u52a0\u5165openresty\u672c\u5730\u7f13\u5b58"),(0,l.kt)("p",null,"\u95ee\u9898\uff1a\u5982\u4e0a\u7684\u65b9\u5f0f\u6ca1\u6709\u95ee\u9898\uff0c\u4f46\u662f\u5982\u679c\u8bf7\u6c42\u90fd\u5230redis\uff0credis\u538b\u529b\u4e5f\u5f88\u5927\uff0c\u6240\u4ee5\u6211\u4eec\u4e00\u822c\u91c7\u7528\u591a \u7ea7\u7f13\u5b58\u7684\u65b9\u5f0f\u6765\u51cf\u5c11\u4e0b\u6e38\u7cfb\u7edf\u7684\u670d\u52a1\u538b\u529b\u3002"),(0,l.kt)("p",null,"\u89e3\u51b3\u65b9\u6848\uff1a\u5148\u67e5\u8be2openresty\u672c\u5730\u7f13\u5b58 \u5982\u679c\u6ca1\u6709\u518d\u67e5\u8be2redis\u4e2d\u7684\u6570\u636e"),(0,l.kt)("p",null,"\u64cd\u4f5c\uff1a \u770b\u61c2\u5185\u5bb9\u5373\u53ef\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4fee\u6539/root/lua\u76ee\u5f55\u4e0bad_read\u6587\u4ef6, \u5185\u5bb9\u5982\u4e0b:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-lua"},'--\u8bbe\u7f6e\u54cd\u5e94\u5934\u7c7b\u578b\nngx.header.content_type="application/json;charset=utf8"\n--\u83b7\u53d6\u8bf7\u6c42\u4e2d\u7684\u53c2\u6570ID\nlocal uri_args = ngx.req.get_uri_args();\nlocal position = uri_args["position"];\n\n--\u83b7\u53d6\u672c\u5730\u7f13\u5b58\nlocal cache_ngx = ngx.shared.dis_cache;\n--\u6839\u636eID \u83b7\u53d6\u672c\u5730\u7f13\u5b58\u6570\u636e\nlocal adCache = cache_ngx:get(\'ad_cache_\'..position);\n\nif adCache == "" or adCache == nil then\n\n    --\u5f15\u5165redis\u5e93\n    local redis = require("resty.redis");\n    --\u521b\u5efaredis\u5bf9\u8c61\n    local red = redis:new()\n    --\u8bbe\u7f6e\u8d85\u65f6\u65f6\u95f4\n    red:set_timeout(2000)\n    --\u8fde\u63a5\n    local ok, err = red:connect("192.168.200.128", 6379)\n    --\u83b7\u53d6key\u7684\u503c\n    local rescontent=red:get("ad_"..position)\n    --\u8f93\u51fa\u5230\u8fd4\u56de\u54cd\u5e94\u4e2d\n    ngx.say(rescontent)\n    --\u5173\u95ed\u8fde\u63a5\n    red:close()\n    --\u5c06redis\u4e2d\u83b7\u53d6\u5230\u7684\u6570\u636e\u5b58\u5165nginx\u672c\u5730\u7f13\u5b58\n    cache_ngx:set(\'ad_cache_\'..position, rescontent, 10*60);\n\nelse\n --nginx\u672c\u5730\u7f13\u5b58\u4e2d\u83b7\u53d6\u5230\u6570\u636e\u76f4\u63a5\u8f93\u51fa\n ngx.say(adCache)\nend\n')),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4fee\u6539nginx\u914d\u7f6e\u6587\u4ef6vi /usr/local/openresty/nginx/conf/nginx.conf \uff0chttp\u8282\u70b9\u4e0b\u6dfb\u52a0\u914d\u7f6e:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"#\u5305\u542bredis\u521d\u59cb\u5316\u6a21\u5757\nlua_shared_dict dis_cache 5m;  #\u5171\u4eab\u5185\u5b58\u5f00\u542f\n")),(0,l.kt)("h4",{id:"244-\u524d\u7aef\u9875\u9762\u5b9e\u73b0\u4e86\u89e3"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_2-4-4-%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E5%AE%9E%E7%8E%B0-%E4%BA%86%E8%A7%A3"},"#"),"2.4.4 \u524d\u7aef\u9875\u9762\u5b9e\u73b0\uff08\u4e86\u89e3\uff09"),(0,l.kt)("p",null,"\uff081\uff09\u4fee\u6539index.html\uff0c\u7f16\u5199\u811a\u672c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"  <script>\n    new Vue({\n      el:\"#app\",\n      data:{\n        ad:{\n          web_index_lb:[]\n        }\n      },\n      methods:{\n        adRead:function(position){\n          axios.get('ad_read?position='+position).then(response=>{\n               this.ad[position]=response.data\n          })\n        }\n      },\n      created(){\n        this.adRead('web_index_lb')\n          this.adRead('web_index_lb')\n      }\n    })\n  <\/script>\n")),(0,l.kt)("p",null,"\u5728\u9875\u9762\u4e0a\u6dfb\u52a0",(0,l.kt)("inlineCode",{parentName:"p"},"...")),(0,l.kt)("p",null,"\uff082\uff09\u4fee\u6539index.html\uff0c\u6e32\u67d3\u5e7f\u544a\u8f6e\u64ad\u56fe"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'<div id="myCarousel" data-ride="carousel" data-interval="4000" class="sui-carousel slide">\n    <ol class="carousel-indicators">\n        <li data-target="#myCarousel" data-slide-to="0" class="active" v-for="item in ad.web_index_lb"></li>\n    </ol>\n    <div class="carousel-inner" id="lbt">\n        <div class="item" v-for="item in contentList">\n            <a :href="item.url">\n            <img :src="item.pic"  />\n          </a>\n        </div>      \n    </div>\n    <a href="#myCarousel" data-slide="prev" class="carousel-control left">\u2039</a>\n    <a href="#myCarousel" data-slide="next" class="carousel-control right">\u203a</a>\n</div>\n')),(0,l.kt)("p",null,"\uff083\uff09\u4e0a\u4f20\u81f3\u670d\u52a1\u5668\u5e76\u6d4b\u8bd5"),(0,l.kt)("p",null,"\u66f4\u6539"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"# \u52a0\u8f7d\u9996\u9875\n        location / {\n            root   html;\n            index  index.html index.htm;\n        }\n")),(0,l.kt)("p",null,"\u8bbf\u95ee \uff1a ",(0,l.kt)("a",{parentName:"p",href:"http://192.168.200.128/"},"http://192.168.200.128/open in new window")),(0,l.kt)("p",null,"\u57df\u540d\u8bbf\u95ee\uff1aC:\\Windows\\System32\\drivers\\etc\\hosts"),(0,l.kt)("p",null," \u6dfb\u52a0 192.168.200.128 ",(0,l.kt)("a",{parentName:"p",href:"http://www.ydles.com/"},"www.ydles.comopen in new window")),(0,l.kt)("p",null,"\u8bbf\u95ee \uff1a",(0,l.kt)("a",{parentName:"p",href:"http://www.ydles.com/"},"http://www.ydles.com/open in new window")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211026151431725-848ccf2c.png",alt:"image-20211026151431725"}),"image-20211026151431725"),(0,l.kt)("h2",{id:"3-nginx\u9650\u6d41"},(0,l.kt)("a",{parentName:"h2",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-nginx%E9%99%90%E6%B5%81"},"#"),"3 nginx\u9650\u6d41"),(0,l.kt)("p",null,"\u56de\u987e\u7f51\u5173\u9650\u6d41\uff1a\u4ee4\u724c\u6876\u3002"),(0,l.kt)("p",null,"\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u9996\u9875\u7684\u5e76\u53d1\u91cf\u662f\u6bd4\u8f83\u5927\u7684\uff0c\u5373\u4f7f\u6709\u4e86\u591a\u7ea7\u7f13\u5b58\uff0c\u5982\u679c\u6709\u5927\u91cf\u6076\u610f\u7684\u8bf7\u6c42\uff0c\u4e5f\u4f1a\u5bf9\u7cfb\u7edf\u9020\u6210\u5f71\u54cd\u3002\u800c\u9650\u6d41\u5c31\u662f\u4fdd\u62a4\u63aa\u65bd\u4e4b\u4e00\u3002"),(0,l.kt)("p",null,"nginx\u63d0\u4f9b\u4e24\u79cd\u9650\u6d41\u7684\u65b9\u5f0f\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e00\u662f\u63a7\u5236\u901f\u7387"),(0,l.kt)("li",{parentName:"ul"},"\u4e8c\u662f\u63a7\u5236\u5e76\u53d1\u8fde\u63a5\u6570")),(0,l.kt)("h3",{id:"31-\u63a7\u5236\u901f\u7387"},(0,l.kt)("a",{parentName:"h3",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-1-%E6%8E%A7%E5%88%B6%E9%80%9F%E7%8E%87"},"#"),"3.1 \u63a7\u5236\u901f\u7387"),(0,l.kt)("p",null,"\u63a7\u5236\u901f\u7387\u7684\u65b9\u5f0f\u4e4b\u4e00\u5c31\u662f\u91c7\u7528\u6f0f\u6876\u7b97\u6cd5\u3002"),(0,l.kt)("h4",{id:"311-\u6f0f\u6876\u7b97\u6cd5\u5b9e\u73b0\u63a7\u5236\u901f\u7387\u9650\u6d41"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-1-1-%E6%BC%8F%E6%A1%B6%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0%E6%8E%A7%E5%88%B6%E9%80%9F%E7%8E%87%E9%99%90%E6%B5%81"},"#"),"3.1.1 \u6f0f\u6876\u7b97\u6cd5\u5b9e\u73b0\u63a7\u5236\u901f\u7387\u9650\u6d41"),(0,l.kt)("p",null,"1\u6f0f\u6876(Leaky Bucket)\u7b97\u6cd5\u601d\u8def\u5f88\u7b80\u5355,\u6c34(\u8bf7\u6c42)\u5148\u8fdb\u5165\u5230\u6f0f\u6876\u91cc,\u6f0f\u6876\u4ee5\u4e00\u5b9a\u7684\u901f\u5ea6\u51fa\u6c34(\u63a5\u53e3\u6709\u54cd\u5e94\u901f\u7387),\u5f53\u6c34\u6d41\u5165\u901f\u5ea6\u8fc7\u5927\u4f1a\u76f4\u63a5\u6ea2\u51fa(\u8bbf\u95ee\u9891\u7387\u8d85\u8fc7\u63a5\u53e3\u54cd\u5e94\u901f\u7387),\u7136\u540e\u5c31\u62d2\u7edd\u8bf7\u6c42,\u53ef\u4ee5\u770b\u51fa\u6f0f\u6876\u7b97\u6cd5\u80fd\u5f3a\u884c\u9650\u5236\u6570\u636e\u7684\u4f20\u8f93\u901f\u7387.\u793a\u610f\u56fe\u5982\u4e0b:"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/1559033998856-f98798b3.png",alt:"1559033998856"}),"1559033998856"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"2\u4e0e\u4ee4\u724c\u6876\u533a\u522b\uff1a")),(0,l.kt)("p",null,"\u4ee4\u724c\u6876\u63a7\u5236\u8fdb\u7684\u901f\u5ea6"),(0,l.kt)("p",null,"\u6f0f\u6876\u7b97\u6cd5\u63a7\u5236\u51fa\u7684\u901f\u5ea6"),(0,l.kt)("p",null,"\u6f0f\u6876\u7b97\u6cd5\u5b9e\u73b0 nginx\u7684\u914d\u7f6e"),(0,l.kt)("p",null,"3\u914d\u7f6e\u793a\u610f\u56fe\u5982\u4e0b\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfYAAADdCAYAAABJ91D9AAAKvElEQVR4nO3d646juBYG0HBU7/9E/W6cHyM0tMdX4hCzay1p1DUQXyCEDwMJ277v+wsACOF/Vwr9+fNndj8AgAkuBTsAsCbBDgCBCHYACESwA0Aggh0AAhHsABCIYAeAQAQ7AAQi2AEgkF8T7Nu2vbZt+3Y3AOCjPhbsKwapn8UHILqPBXsrRGuhv9oBAQA8xa85FQ8Av8HPHY0cI/B93/8ajZ+nn/+/VubgtDoA/NfHg33btr+CO/f3oTTvCPfztFz5nj4AQGQfPxW/QqCWRv0AEI1r7AAQiGAHgEA++j3287/p9OP0eOnGuNy8Y5pr5gCQ97Gb53LBW7pZ7mr5UQ4IAIjuEafiS6P/Efu+C3UAwrvle+zvEsgA0OcRI3YAoI9gB4BABDsABCLYmcov/AEp+4V7hQj28/fbS/Ov1MmY87cXcn+3ynGP1mfF+zEmt75a+6QnurosvmZ8vxDB3voq25WNqlQm0gd1pvOHN32AT8tv/9DfvU3N/qz8ZqVQP/ZJ33xOxcx27feeJUSwsx4BwW/wW7bzq8tptP4dj/ge+1Xno8z0ka+p3DPhS2XS58j39OF85N5qK9fHVlujy1TrV6tvOa2RSa0PpbZH+5YrV+tjbblG+1Bb/z1lStvU6PtQK9P7/uT61LvNt9ZDaR3U2uhZ159oJ50+45cva31ulevdh7S2q1aZkf5d2UZy7V19JDd5oYO9tNGen++e/lsrc0wf2ejOv3tf23hrz6rvPQ3W89z783Km/UrXRamvo8t67lvah9zyXe1bz7rO1TG6LKX6S//WyuTmtdqpafXtPL1WprUOanqWOe1baX3MXgcz2xnV2kZa5XrXZ227apW5ukw9bdX6kNbJe0IH+0pKG/js+q/uhFPv9K13h9VTT2larX+5g4qRHWmrD632Zxptp2f9jJoR6u+0cdeyXB213qV0sDy6fj6x7V4Z7Bx/r7J+IxHsX7TyBj3atztPn6UjrW+4a1mvtLPC+pkpNxLsed277TzBlfd6ZJBxdZ209gdXDwDp4+a5RczYAX9qh75SOFzdEcw6i1Dq0x162llhR/nJA4vzqeP0v9ntnP9e6TNwmPFepyPnT67TtM2j3RXX7dOFGLGnH8LXq35zUmlDSqefyxzS00i9fUvLpP0otdErbadUV7rDrV2PzPWt5FymdL2t1Ifz37V6cn3LTR95f0pqdeXWT22bOnaSPe93q52WnvXT6tsxL/37yvZe61vPez1jHXyqnaN8Wm/rM5ero+cSQWsfUutHz36nprb+0r71HHDU+rDCwenThQj20kbQM/28wb/b3uhre+f1hPxoO61pM0fF77w/I31r7Rxnvse1ZSxtU1e2havvw2hds3ak76y3kdeM9uOddma9b1f3O++8b72f/at9mFkX84QI9m/69A03tRHQzHZmWa0/tYOip6zTsyf2md/l3W3Rtvw+wf6mT2+ENvL33DFKvdMT+wzcy81zABCIYAeAQAQ7AAQi2AEgEMEOAIEIdgAIRLADQCCCHQACEewAEIhgB4BABDsABCLYASAQwQ4AgQh2AAhEsANAIIIdAAIR7AAQiGAHgEAEOwAEItgBIBDBDgCBCHYACESwA0Aggh0AAhHsABCIYAeAQAQ7AAQSIti3bXtt29Y9vTUPAJ4qRLADAP/4+XYHZtj3fWh6ax4APJUROwAEItgBIBDBDgCBCHYACESwA0Aggh0AAhHsABCIYAeAQAQ7AAQi2AEgEMEOAIEIdgAIRLADQCCCHQACEewAEIhgB4BABDsABCLYASAQwQ4AgQh2AAhEsANAIIJ9Adu2vbZt+3Y3AAhAsC9i3/dvdwGAAAQ7AAQi2AEgkJ9vd2CW9Br1cWr7PP18uvuYvu979vp2Or1WX64up9YB+IYQwb5tWza0c9OP/z9CuOc15wDPvbZU15W+A8A7QgR7OlLOhXyt7IhafVcCOj14AIB3hAj21+tVHFWPBuY5aHOBK4ABWFmIm+fS696lUfXs74r77jkAqwkzYs/d1Fa6Ae78+tzNbrXReu3mOTfOAfBtIYK9FqSlea3wHSk3I8hdZwdghhDB/nQCHYBZQlxjBwD+IdgBIBDBDgCBCHYACESwA0Aggh0AAhHsABCIYAeAQAQ7AAQi2AEgEMEOAIEIdgAIRLADQCCCHQACEewAEIhgB4BABDsABCLYASAQwQ4AgQh2AAhEsANAIIIdAAIR7AAQiGAHgEAEOwAEItgBIBDBDgCBCHYACESwD9i27bVtW/f01jwAmE2wA0AgP9/uwJPs+z40vTUPAGYzYgeAQAQ7AAQi2AEgEMEOAIEIdgAIRLADQCCCHQACEewAEIhgB4BABDsABCLYASAQwQ4AgQh2AAhEsANAIIIdAAIR7AAQiGAHgEAEOwAEItgBIBDBDgCBCHYACESw07Rt27e7cMlov7dte+yyAhwE+4Bjx//tnf+d7W/b9tr3/bb2akbW/dV+r7KsAFcJ9gH7vt+2468F2G8Nn9+63AAjBDtFK43WRzy13wAz/Hy7A1GcR9hpqKSj72N+rsx52vF37fW1PpzLp3W9Y2R5Sn07Tyv1r9ROWhaAfwn2CdIR4vn/c/NqZUrlXq98gLb6cFyXrtXbs0y1dq6sg2NZ0/612umte5RRPhCFYL/ZER61kP5Um7PqOo+WayPstP3W/Fa7I68fdSyXcAeeTrB/UTryXEUr4Eqj5VqZO5ZVMAO4ee52pVPXT1G6jl973YxlXenAB2BlRuwDSje2pQGXjmJz83KheA7A3A1ltRvrcu30XP/OLWMrhHuWp7YOWstyZXnS8gC/lWAf0HN6emReK4hKN8+98/p3w2/2Ohhpq7Y8s0b0Tz2TAnAQ7PzlqaE2o99PXXaAM9fYASAQwQ4AgQh2AAhEsANAIIIdAAJxV/yCeh72MnoHt69xrWf179/nvkK4al+BfxmxL6j13PcZ3wk/+EW377k7JK+818e22NomgXUIdgAIxKn4Bymdoq+dMu0pM3JKuPYM9SvPpG+1kyvz7rPde582N6udllY7tXZ7nmOfa+uddZDWZyQPaxHsD1LaGZ8fOZr+WytzTB/ZMZeeoX7lmfQ9bfXUdf69/txra2VKZrbTu5y5ds6vSQO99zn2tfd65GeKr5QH7ifYuaQ0eptd/5UDj5zZ9xKscM9C6bfz0wcUzawfWJ9gZ5qVg2DkQOTpYThyUFRbB06zwzMJdj5i1jPYr47ce+r9dGh9Ixhzj/6d/Q0LYG2CfUGlG9t6ppfqScscSjdgtfrW8zz4XBu90nZKdaX3EJSuMY/e1HZXO+c60zK59dZz02NPfe+sg7QtBwewFsG+oNKOsmf6OWjfbW/0tb3zekJ+tJ3WtCvhc0c7IzevrVgfsB7Bzl8+cd05V7+RXgzeQ1iPYOcvn95RCwKAz/LLcwAQiGAHgEAEOwAEItgHHD/jCQCrEuwD3PgFwOoEOwAEItgBIBDBDgCBCPZBV373HADuItgH+SlUAFYm2AEgEMEOAIEIdgAIRLAPcNMcAKvz2NYBbpoDYHVG7AAQiGAHgEAEOwAEItgBIBDBDgCBCHYACESwA0Aggh0AAhHsABCIYAeAQLbd76QCQBhG7AAQiGAHgEAEOwAEItgBIBDBDgCBCHYACESwA0Aggh0AAhHsABCIYAeAQAQ7AATyf8TJlnNZ2+DAAAAAAElFTkSuQmCC",alt:"1559034089505"}),"1559034089505"),(0,l.kt)("p",null,"\u770b\u61c2\u5373\u53ef\uff0c\u6ce8\u610f\u4f4d\u7f6e\u3002"),(0,l.kt)("p",null,"\u4fee\u6539/usr/local/openresty/nginx/conf/nginx.conf:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"# \u8bbe\u7f6e\u9650\u6d41\u914d\u7f6e \u9650\u901f\uff0c\u6bcf\u79d22\u4e2a,\u5185\u5b58\u533a\u57df10m\uff0c\u5927\u698216\u4e07\u4e2asession\nlimit_req_zone $binary_remote_addr zone=myRateLimit:10m rate=2r/s;\n\nserver {\n     listen       8081;\n     server_name  localhost;\n     charset utf-8;\n     location / {\n          limit_req zone=myRateLimit;\n          root   html;\n          index  index.html index.htm;\n     }\n}\n")),(0,l.kt)("p",null,"\u89e3\u91ca\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"binary_remote_addr \u662f\u4e00\u79cdkey\uff0c\u8868\u793a\u57fa\u4e8e remote_addr(\u5ba2\u6237\u7aefIP) \u6765\u505a\u9650\u6d41\uff0cbinary_ \u7684\u76ee\u7684\u662f\u538b\u7f29\u5185\u5b58\u5360\u7528\u91cf\u3002\nzone\uff1a\u5b9a\u4e49\u5171\u4eab\u5185\u5b58\u533a\u6765\u5b58\u50a8\u8bbf\u95ee\u4fe1\u606f\uff0c myRateLimit:10m \u8868\u793a\u4e00\u4e2a\u5927\u5c0f\u4e3a10M\uff0c\u540d\u5b57\u4e3amyRateLimit\u7684\u5185\u5b58\u533a\u57df\u30021M\u80fd\u5b58\u50a816000 IP\u5730\u5740\u7684\u8bbf\u95ee\u4fe1\u606f\uff0c10M\u53ef\u4ee5\u5b58\u50a816W IP\u5730\u5740\u8bbf\u95ee\u4fe1\u606f\u3002\nrate \u7528\u4e8e\u8bbe\u7f6e\u6700\u5927\u8bbf\u95ee\u901f\u7387\uff0crate=10r/s \u8868\u793a\u6bcf\u79d2\u6700\u591a\u5904\u740610\u4e2a\u8bf7\u6c42\u3002Nginx \u5b9e\u9645\u4e0a\u4ee5\u6beb\u79d2\u4e3a\u7c92\u5ea6\u6765\u8ddf\u8e2a\u8bf7\u6c42\u4fe1\u606f\uff0c\u56e0\u6b64 10r/s \u5b9e\u9645\u4e0a\u662f\u9650\u5236\uff1a\u6bcf100\u6beb\u79d2\u5904\u7406\u4e00\u4e2a\u8bf7\u6c42\u3002\u8fd9\u610f\u5473\u7740\uff0c\u81ea\u4e0a\u4e00\u4e2a\u8bf7\u6c42\u5904\u7406\u5b8c\u540e\uff0c\u82e5\u540e\u7eed100\u6beb\u79d2\u5185\u53c8\u6709\u8bf7\u6c42\u5230\u8fbe\uff0c\u5c06\u62d2\u7edd\u5904\u7406\u8be5\u8bf7\u6c42.\u6211\u4eec\u8fd9\u91cc\u8bbe\u7f6e\u62102 \u65b9\u4fbf\u6d4b\u8bd5\u3002\n")),(0,l.kt)("p",null,"\u6d4b\u8bd5\uff1a\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"cd /usr/local/openresty/nginx/sbin\n\n./nginx -s reload\n")),(0,l.kt)("p",null,"\u5feb\u901f\u5237\u65b0\uff1a ",(0,l.kt)("a",{parentName:"p",href:"http://192.168.200.128:8081/"},"http://192.168.200.128:8081/open in new window")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211026155137306-8287e9f9.png",alt:"image-20211026155137306"}),"image-20211026155137306"),(0,l.kt)("p",null,"http 503: \u7531\u4e8e\u4e34\u65f6\u7684",(0,l.kt)("a",{parentName:"p",href:"https://baike.baidu.com/item/%E6%9C%8D%E5%8A%A1%E5%99%A8"},"\u670d\u52a1\u5668open in new window"),"\u7ef4\u62a4\u6216\u8005\u8fc7\u8f7d\uff0c\u670d\u52a1\u5668\u5f53\u524d\u65e0\u6cd5\u5904\u7406\u8bf7\u6c42\u3002"),(0,l.kt)("h4",{id:"312-\u5904\u7406\u7a81\u53d1\u6d41\u91cf"},(0,l.kt)("a",{parentName:"h4",href:"https://www.ydlclass.com/doc21xnv/java/fifth/2%E3%80%81%E4%BA%8C%E5%A5%A2%E4%BA%A4%E6%98%93/01/#_3-1-2-%E5%A4%84%E7%90%86%E7%AA%81%E5%8F%91%E6%B5%81%E9%87%8F"},"#"),"3.1.2 \u5904\u7406\u7a81\u53d1\u6d41\u91cf"),(0,l.kt)("p",null,"\u4e0a\u9762\u4f8b\u5b50\u9650\u5236 2r/s\uff0c\u5982\u679c\u6709\u65f6\u6b63\u5e38\u6d41\u91cf\u7a81\u7136\u589e\u5927\uff0c\u8d85\u51fa\u7684\u8bf7\u6c42\u5c06\u88ab\u62d2\u7edd\uff0c\u65e0\u6cd5\u5904\u7406\u7a81\u53d1\u6d41\u91cf\uff0c\u53ef\u4ee5\u7ed3\u5408 ",(0,l.kt)("strong",{parentName:"p"},"burst")," \u53c2\u6570\u4f7f\u7528\u6765\u89e3\u51b3\u8be5\u95ee\u9898\u3002"),(0,l.kt)("p",null,"\u4f8b\u5982\uff0c\u5982\u4e0b\u914d\u7f6e\u8868\u793a\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"limit_req_zone $binary_remote_addr zone=myRateLimit:10m rate=2r/s;\n\nserver {\n     listen       8081;\n     server_name  localhost;\n     charset utf-8;\n     location / {\n          limit_req zone=myRateLimit burst=5 nodelay;\n          root   html;\n          index  index.html index.htm;\n     }\n}\n")),(0,l.kt)("p",null,"burst \u8bd1\u4e3a\u7a81\u53d1\u3001\u7206\u53d1\uff0c\u8868\u793a\u5728\u8d85\u8fc7\u8bbe\u5b9a\u7684\u5904\u7406\u901f\u7387\u540e\u80fd\u989d\u5916\u5904\u7406\u7684\u8bf7\u6c42\u6570,\u5f53 rate=2r/s \u65f6\uff0c\u5c061s\u62c6\u62102\u4efd\uff0c\u5373\u6bcf500ms\u53ef\u5904\u74061\u4e2a\u8bf7\u6c42\u3002"),(0,l.kt)("p",null,"\u6b64\u5904\uff0c",(0,l.kt)("strong",{parentName:"p"},"burst=5")," \uff0c\u82e5\u540c\u65f6\u67096\u4e2a\u8bf7\u6c42\u5230\u8fbe\uff0cNginx \u4f1a\u5904\u7406\u7b2c\u4e00\u4e2a\u8bf7\u6c42\uff0c\u5269\u4f595\u4e2a\u8bf7\u6c42\u5c06\u653e\u5165\u961f\u5217\uff0c\u7136\u540e\u6bcf\u9694500ms\u4ece\u961f\u5217\u4e2d\u83b7\u53d6\u4e00\u4e2a\u8bf7\u6c42\u8fdb\u884c\u5904\u7406\u3002\u82e5\u8bf7\u6c42\u6570\u5927\u4e8e6\uff0c\u5c06\u62d2\u7edd\u5904\u7406\u591a\u4f59\u7684\u8bf7\u6c42\uff0c\u76f4\u63a5\u8fd4\u56de503."),(0,l.kt)("p",null,"\u4e0d\u8fc7\uff0c\u5355\u72ec\u4f7f\u7528 burst \u53c2\u6570\u5e76\u4e0d\u5b9e\u7528\u3002\u5047\u8bbe burst=50 \uff0crate\u4e3a10r/s\uff0c\u6392\u961f\u4e2d\u768450\u4e2a\u8bf7\u6c42\u867d\u7136\u6bcf100ms\u4f1a\u5904\u7406\u4e00\u4e2a\uff0c\u4f46\u7b2c50\u4e2a\u8bf7\u6c42\u5374\u9700\u8981\u7b49\u5f85 50 * 100ms\u5373 5s\uff0c\u8fd9\u4e48\u957f\u7684\u5904\u7406\u65f6\u95f4\u81ea\u7136\u96be\u4ee5\u63a5\u53d7\u3002"),(0,l.kt)("p",null,"\u56e0\u6b64\uff0cburst \u5f80\u5f80\u7ed3\u5408 nodelay \u4e00\u8d77\u4f7f\u7528\u3002"),(0,l.kt)("p",null,"\u4f8b\u5982\uff1a\u5982\u4e0b\u914d\u7f6e\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"server {\n    location / {\n        limit_req zone=myRateLimit burst=5 nodelay;\n        root   html;\n        index  index.html index.htm;\n    }\n}\n")),(0,l.kt)("p",null,"\u5982\u4e0a\u8868\u793a\uff1a"),(0,l.kt)("p",null,"\u5904\u7406\u7a81\u53d15\u4e2a\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u6ca1\u6709\u5ef6\u8fdf\uff0c\u7b49\u5230\u5b8c\u6210\u4e4b\u540e\uff0c\u6309\u7167\u6b63\u5e38\u7684\u901f\u7387\u5904\u7406\u3002"),(0,l.kt)("p",null,"\u5982\u4e0a\u4e24\u79cd\u914d\u7f6e\u7ed3\u5408\u5c31\u8fbe\u5230\u4e86\u901f\u7387\u7a33\u5b9a\uff0c\u4f46\u7a81\u7136\u6d41\u91cf\u4e5f\u80fd\u6b63\u5e38\u5904\u7406\u7684\u6548\u679c\u3002\u914d\u7f6e\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'#user  nobody;\nuser root root;\nworker_processes  1;\n\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n\n#pid        logs/nginx.pid;\n\n\nevents {\n    worker_connections  1024;\n}\n\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    #log_format  main  \'$remote_addr - $remote_user [$time_local] "$request" \'\n    #                  \'$status $body_bytes_sent "$http_referer" \'\n    #                  \'"$http_user_agent" "$http_x_forwarded_for"\';\n\n    #access_log  logs/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    #keepalive_timeout  0;\n    keepalive_timeout  65;\n\n    #gzip  on;\n\n    # \u8bbe\u7f6e\u9650\u6d41\u914d\u7f6e\n    limit_req_zone $binary_remote_addr zone=myRateLimit:10m rate=2r/s;\n\n    server {  \n        listen       8081;\n        server_name  localhost;\n        charset utf-8;\n        location / {\n            limit_req zone=myRateLimit burst = 5 nodelay;\n            root   html;\n            index  index.html index.htm;\n        }\n    }\n}\n')),(0,l.kt)("p",null,"\u6d4b\u8bd5\uff1a\u5982\u4e0b\u56fe \u57281\u79d2\u949f\u4e4b\u5185\u53ef\u4ee5\u5237\u65b05\u6b21\uff0c\u6b63\u5e38\u5904\u7406\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211026160018237-5a60fa08.png",alt:"image-20211026160018237"}),"image-20211026160018237"),(0,l.kt)("p",null,"\u4f46\u662f\u8d85\u8fc7\u4e4b\u540e\uff0c\u8fde\u7eed\u5237\u65b05\u6b21\uff0c\u629b\u51fa\u5f02\u5e38\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211026155137306-8287e9f9.png",alt:"image-20211026155102861"}),"image-20211026155102861"),(0,l.kt)("p",null,"\u603b\u7ed3\uff1a \u8fd0\u7ef4"),(0,l.kt)("p",null,"1lua\u811a\u672c"),(0,l.kt)("p",null,"js lua python go"),(0,l.kt)("p",null,"2\u91cd\u70b9-----\u9996\u9875\u5e7f\u544a\u7f13\u5b58"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211026160529570-72b25d72.png",alt:"image-20211026160529570"}),"image-20211026160529570"),(0,l.kt)("p",null,"3nginx\u9650\u6d41"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211026160329109-71d312ff.png",alt:"image-20211026160329109"}),"image-20211026160329109"),(0,l.kt)("p",null,"\u6f0f\u6876\u7b97\u6cd5\uff1a\u6f0f\u6d1e"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://www.ydlclass.com/doc21xnv/assets/image-20211026160434768-32c97aad.png",alt:"image-20211026160434768"}),"image-20211026160434768"),(0,l.kt)("p",null,"burst=5 nodelay"))}o.isMDXComponent=!0}}]);